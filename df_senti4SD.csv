ID;Text
4;{{ with .Data }} also works
5;if .Data is invalid it won't be rendered
6;ah
7;true
8;okay okay thank you
9;saved me a few mins ‚ù§Ô∏è
10;yea yw
11;Hwllo
12;Hwllo
13;I am finding imposible chaining proxies with net/http. is it?
14;Have you tried using the net proxy stuff
15;thanks
16;I forget the exact names but there‚Äôs some pre built proxy stuff in there
17;May or may not be useful
18;The built in proxy stuff is nice
19;had used it once and it was p nice
20;probably
21;why
22;I think you probably can with uintptr and without the cgo sanitization flags on
23;then go would probably not think twice about the validity of those pointers
24;but I'm not sure
25;I can ping the relevant people if you want
26;@Deleted User
27;syscall.Mmap returns a []byte anyway
28;<https://golang.org/pkg/syscall/#Mmap>
29;or better would be <https://godoc.org/golang.org/x/sys/unix#Mmap>
30;oh there they are
31;huh that's actually pretty perfect imo since you can probably fit uint8s in there for RGB(A)
32;8bpc 24/32bpp (without/with alpha)
33;"i've codegened > 600 go files that all wrap include the same set of c headers through cgo; compile times are horrific. does anyone know technique around reducing the compile time?"
34;not really cgo is just really inefficient
35;i was afraid of that :(.... i'd like to at least precompile and distribute binaries for consumers of my package to get quicker compile times... but i'm guessing there's no standard for that either
36;time for a proper CI pipeline
37;nah a CI pipeline won't save you much
38;unless you can figure out static compiling w/ it
39;probably by muslc or AppImage who knows
40;you can try and squeeze all the files in a few large C files I think that'll speed it up
41;oh it won't make things faster
42;but you can stop thinking about it
43;no like if you build the Cgo binary in the CI it probably won't even run on 80% of Linux distros
44;:kek:
45;friggin cgo
46;and idek how you're gonna handle Windows
47;Im starting my biggest project yet
48;";;"
49;"ya i'm actually building go bindings for the godot engine; i've got it in a good alpha state but i haven't tried macos or windows"
50;i plan on opening it up to the world after i get a couple more features completed
51;@_diamondburned_ do you think squeezing the go files together into one big go file will reduce compile time? there's far more go files than c header files
52;"im displaying this in a HTML where there\'s a navbar to navigate between the different resultsthere\'s a navigation```<li class=""navitem""> <div class=""navlink listactions id=""result00001 datainvoiceid=""00001""> //some irrelevant html </div></li>```which then opens the actual result ( another HTML element this contains other data from original struct )```<div class=""result00001""> <div class=""contentsection animated animatedFadeInUp fadeInUp""> //irrelevant HTML </div></div>```How can i accomplish this with templates?"
53;(the struct has no ID and some data pointers are similar/duplicates so maybe generate ID's and do it that way?)
54;you can do a revealer as html right below it or a href to another page
55;like `/thing/{id}`
56;yeah i seen that
57;but that's such a bootleg way imo
58;there has to be a better way
59;right?
60;gonna do a bit of reading if i figure it out ill lyk
61;@Ba'al‚ô±Berith not sure how it's bootleg
62;that's how APIs work
63;hell Discord's website works like that
64;None
65;yeah pretty standard issue stuff
66;yeah i guess so
67;I just don't like the idea of having to redirect to another page because there's multiple
68;or am i misunderstanding you
69;i think i'm misunderstanding you
70;my bad
71;i look like an idiot soryr
72;do that if you want a page for each item
73;no no
74;i want to avoid that
75;if not just use an html revealer of some sort
76;html revealer?
77;something like https://minicss.org/docs#spoilersandaccordions
78;@Deleted User so can you do it?
79;yeah that's exactly what i'm doing haha
80;but in order for that to work you have to declare an ID for the drop down
81;eh not really
82;here let me clarify better i'm really bad at explaining
83;you don't need an ID you just need the content to be the children of the revealer
84;None
85;See this?
86;yeah?
87;In order to click on it and display it the ID needs to be the same
88;that's arbitrary just use an incrementing integer
89;So my question ishow can i do that in go when i don't have an ID?
90;the actual external api i'm calling doesn't have an ID
91;So maybe like write a function to generate an ID and append to the json?
92;make a method on the struct value you're passing in
93;call it Incr or sth
94;yeah exactly what i was thinking
95;make it increment the interger and reutrn it
96;ok so do it
97;i was just seeing if there was a different way üòõ
98;Thank you as always you're super helpful
99;sorry about earlier i heavily mis understood you
100;yeah yw
101;@_diamondburned_ Sorry for ping i did a little bit of reading this can also be accomplished with ```{{range $index _ := .response}}```
102;My apologies i don't think i mentioned use of templates
103;oh you did
104;i just didn't think of it
105;üòõ
106;Thank you for always being active and answer our newbie questions
107;yea np
108;> nvm all it does is prevent invalid munmaps?@Deleted User keeping a pointer to the memory that mmap returns in a longlived data structure ensures the garbage collector never tries to reclaim the memory since it won't use munmap if it does
109;"how i can split a string of numbers and letter ( A9"") and read separately the number and the character?"
110;couple ways i suppose
111;you can literally loop over strings
112;so
113;you probably want to start with that
114;exist a native library similar to ctype ?
115;go lets you interact with c code sure
116;cgo
117;thanks
118;but what is the Go way?
119;:thinkingo:
120;do what works
121;A9?
122;that looks like hexadecimal
123;no no
124;and why would there ever be a library to do this
125;the string is similar A9 K10 and i need separte the character and the number
126;maybe a regex
127;depends on how reliable the patterns are
128;`a[0] + a[1:]`
129;yeah
130;because in c++ exist ctype
131;and i am new in go
132;what does ctype have to do
133;classify characters
134;package unicode
135;https://godoc.org/unicode
136;or just use a regex
137;thanks @deezy and @_diamondburned_ i will try
138;`([AZ])(\\d+)`
139;yeah np
140;:hugged:
141;jeesh
142;i'm getting `range can only initialize variables` now
143;neat
144;never seen that one before
145;guessing that code is written wrong so more reading
146;not once in my life
147;Yeah no trace of that one on the internet besides a github
148;and no real response
149;so guess this ones gonna take a bit of reading
150;show your work?
151;ill keep you guys updated incase you ever encounter this in the future üòÆ
152;it's probably simple
153;there's not a lot of nuance to range
154;```{{range $index,_ := .res}}```
155;that's the only line i'm using
156;so here's entire chunk of html
157;"```{{ range $index _ := .res }} <li class=""navitem""> <div class=""navlink listactions id=""result{{$index}} datainvoiceid=""{{$index}}""> //html code </div></li> {{ end }}```"
158;i guess i need to do something like ```{{range $index,$item := .res}}```
159;rep that worked üôÇ
160;interesting
161;i guess templates don't let you ignore the variables like that
162;it also doesn't force a variable to be used so it's fine ig
163;how efficient is using an array of structs to store lots of information in memory?
164;I'm writing a tool to dump information about the system when run on a Windows machine (stuff like running processes registry windows services scheduled tasks etc.)
165;for dumping processes I'm looking to gather information like PID exe name exe path arguments and user
166;so I was thinking about storing this information in memory as an array of structs (in my head I'm thinking of it like a table)
167;of course it would only be in memory while enumerating it then it gets saved to file garbage collected and move on to the next thing to dump
168;but I understand that I could be storing megabytes worth of structs in memory and I'm wondering if that's the best way I could go about it
169;if the machine has the resources go for it
170;Otherwise you can always use something like sqlite
171;I'm looked at some people implementing dataframes in Go but I'm trying to be as least reliant on thirdparty libraries
172;just use ram.. it is the easiest
173;you just have to remember that nothing's free
174;you either use more memory or have faster access times/lower cpu time
175;yeah I think I'd prefer to use more memory
176;I'm not looking to parse this information at all
177;compression is the go to example
178;compression needs more cpu takes less space
179;all I'm doing is retrieving the information through WinAPIs storing it in an array of structs then iterating over all of them to save to an XML/JSON file
180;nothing is free tho the memory is gonna be somewhere
181;yes I understand that
182;but looking back on it I don't see the tool requiring more than 10MB of memory at a time
183;which is really nothing compared to the gigs of ram on a normal system
184;are you storing each struct in a file?
185;and what\'s this WinAPI like?
186;can you get partial info?
187;one at a time?
188;or are you required to get everything at once
189;if latter then you'll have to deal w/ possibly allocating a big chunk of memory
190;I get all of the PIDs at once but then I iterate over the PIDs one by one and get a handle to their processes and retrieve the information I need
191;oh that's pretty simple then
192;I don't think you'd use a lot of memory for that yeah
193;I guess you could try and use a single instance of the struct and sequentially read and write the info into the file
194;since you're saying to write each item down and not the entire slice
195;I could do that
196;```go// CallDeferred delays call by delay in secondsfunc CallDeferred(delay float64 task func()) { go func() { time.Sleep(time.Duration(delay)  time.Second) task() }()}``` there is something horribly wrong with this function ca someone explane me what it is?
197;I see no reason to time.sleep here
198;and if you rely on delay for synchronization this is bad use mutexes
199;```Exception 0xc00000fd 0x1 0x753000 0x7ffdd42e0cc7PC=0x7ffdd42e0cc7signal arrived during external code executiongithub.com/gogl/gl/v3.3core/gl._Cfunc_glowDrawArrays(0x7ffe0c333580 0x4 0xc000000006) _cgo_gotypes.go:6244 +0x4cgithub.com/gogl/gl/v3.3core/gl.DrawArrays(...) C:/Users/jakub/Documents/programming/golang/src/github.com/gogl/gl/v3.3core/gl/package.go:9274github.com/faiface/glhf.(vertexArray).draw(...) C:/Users/jakub/Documents/programming/golang/src/github.com/faiface/glhf/vertex.go:266github.com/faiface/glhf.(VertexSlice).Draw(0xc0001ed620) C:/Users/jakub/Documents/programming/golang/src/github.com/faiface/glhf/vertex.go:145 +0x54github.com/faiface/pixel/pixelgl.(canvasTriangles).draw.func1() C:/Users/jakub/Documents/programming/golang/src/github.com/faiface/pixel/pixelgl/canvas.go:330 +0x395github.com/faiface/mainthread.Run(0x5e73a8) C:/Users/jakub/Documents/programming/golang/src/github.com/faiface/mainthread/mainthread.go:44 +0xc4github.com/faiface/pixel/pixelgl.Run(0x5e73a8) C:/Users/jakub/Documents/programming/golang/src/github.com/faiface/pixel/pixelgl/run.go:32 +0x6bmain.main() C:/Users/jakub/Documents/programming/golang/src/myFirstProject/main.go:180 +0x34``` this happendse after a while
200;error is long and repetative this is just a beginning that differs
201;I'm not sure I'm supposed to guess what the error is without seing actual code
202;Golang attempt to find the module on Github even it's not there. I've already inited the go module with github.com url.
203;I use `go mod init github.com/pontakornth/myprojectname` . There is no actual repo there for now.
204;?
205;```goCallDeferred( t.ReloadSpeed func() {t.Unloaded = false})``` basicly just swithcing the boolean whenever gun needs to reload
206;You should just go mod init
207;I tried but it need module path. (Edit: Change name to path)
208;```go: cannot determine module path for source directory /mnt/d/Projects/Web/golang_bk (outside GOPATH module path must be specified)Example usage: go mod init example.com/m to initialize a v0 or v1 module go mod init example.com/m/v2 to initialize a v2 moduleRun go help mod init for more information.```
209;Yes give it a module path name@mmknightx
210;As it says
211;just realized I could do ```gotype Chan chan chan chan chan chan chan chan chan chan Chan```
212;im not sure if this is even creatable but im not getting an error
213;@mlokis lookup the readme of the package more carefully
214;You can do that. The make statement is going to be nice
215;But there aren't any limits there. Same reason you can make double and triple pointers
216;Or even more of you wanted to
217;using the Windows API in Go at times can be pretty frustrating
218;it's so simple with C/C++ because all the values are given to you
219;you can just call the function and parse it `TOKEN_QUERY` and it will work
220;or you can simply create a variable with type `TOKEN_USER`
221;having to reimplement all the structures and values in Go is a royal pain
222;especially since sometimes I can't find the value
223;for example it took me about 45 minutes of Googling to find out that `TOKEN_QUERY` is equal to 8. I had to dig into the source code of the C library to find that out
224;there are some things about the WinAPI that are beautifully documented and make total sense and then there's other things where the only place I can find information about it is by digging through the source code of the library
225;I guess no one else bothers to answer this question because most people using the Windows API are using C/C++ or any other language that has wrappers for these kinds of things. Or they're just smart enough and have enough experience to know these kinds of things
226;and yes I know Go has the syscall library that contains a bunch of Go wrappers but I\'m trying not to use them as this project is for educational purposes and I want to learn more about Windows internals. So I\'m reimplementing everything myself.
227;didn't think it would be this annoying though
228;"hey guys what is the best way to grab a key from json at runtime? For example an env variable may be `foo.bar` I would then want to extract `baz` from:```json{""foo"": {""bar"": baz""}}```at compile time I have no idea what this json is going to look like."
229;should I use something like `var result map[string]interface{}` with `json.Unmarshal`?
230;Is this json standard and uniform every run?
231;If so then it into a struct
232;And marshal the data into a struct
233;if you have no idea what the json would look like but you only know and care about the bar attribute you can find it with regex
234;"basically all I know is that the user wants to grab the value of `result[""foo""][""bar""]` and that is it."
235;via an env variable `foo.bar`
236;@Madxmike do you mean that I can guarantee the data returned is json?
237;that will be parsed into the `json.Unmarshal`?
238;I can't no
239;Uhh
240;it is a web request
241;```gofunc GetUserID(r io.Reader key string) (UserID error) { var jsonMap map[string]interface{} err := json.NewDecoder(r).Decode(&jsonMap) if err != nil { return  err } ...}```
242;something like this so far
243;now I need to parse `key`
244;this is weirdly complicated actually
245;Well you‚Äôre basically saying ‚Äúgiven a unknown set of data extract a arbitrary subset of that data based on an abitrary key‚Äù
246;Atleast that‚Äôs what I‚Äôm reading
247;this looks awful to me but maybe will help you understand the end goal
248;"```gofunc GetUserID(r io.Reader key string) (UserID error) { var jsonMap map[string]interface{} err := json.NewDecoder(r).Decode(&jsonMap) if err != nil { return  err } keyMap := strings.Split(key ."") var value interface{} for _ key := range keyMap { value = jsonMap[key] jsonMap = jsonMap[key].(map[string]interface{}) } return value.(string) nil}```"
249;I think I will need to put a catch around `jsonMap = jsonMap[key].(map[string]interface{})`
250;or you know
251;check the second return type of assertion
252;yep good shout ü§¶
253;I want the output to always be a string but the key technically could return other types üò©
254;I miss python üòõ
255;"```gofunc GetUserID(r io.Reader key string) (UserID error) { var jsonMap map[interface{}]interface{} err := json.NewDecoder(r).Decode(&jsonMap) if err != nil { return  err } keyMap := strings.Split(key ."") var value interface{} for _ key := range keyMap { value = jsonMap[key] switch value.(type) { case map[interface{}]interface{}: jsonMap = jsonMap[key].(map[interface{}]interface{}) } } return fmt.Sprintf(""%v value) nil}```is this awful?"
256;It looks very complicated for what looks like json data
257;@ohnny can you describe more what you are trying to do
258;Getting xy feeling about this right now
259;sorry it is so broad what I want to do
260;he already did a bit above
261;basically all I know is a key for example `foo.bar` it could be `foo` it could be `foo.bar.foo2.bar2`  I want my function to return the value of this key based on `r io.Reader`
262;returning an error if it isn't there
263;it could not be there because it isn't in the json it could not be there because the io.Reader doesn't even contain json
264;Should I implement stack and queue using Arrays/Slice or Linked List in Go?
265;can use either
266;theres different methods to using both efficiently for both cases
267;can depend on your use case
268;:thinkingo:
269;https://play.golang.org/p/KpKpYRlXEV5 here it is in action üôÇ
270;there is a lib for this actually
271;hold on let me see if i can find it
272;https://github.com/Jeffail/gabs @ohnny
273;lol thought there may be üòõ
274;that is exactly what I was after
275;thank you
276;np
277;so I'm trying to translate this <https://gist.github.com/huoshan12345/44b1b4927b21d4ec21d1cbd61ea659da> into go
278;and it appears that the stuff I need is in `golang.org/x/crypto/nacl/box` and `crypto/cipher`
279;"but I can't quite figure out how to pass `tag` in```cs cipher.Encrypt(nonce: iv, plaintext: plainText, ciphertext: cipherText, tag: tag, associatedData: time.ToString().ToBytes());```"
280;currently my go equivalent is```go block err := aes.NewCipher(key) if err != nil { return  err } aesgcm err := cipher.NewGCM(block) if err != nil { return  err } _ = aesgcm.Seal( cipherText iv plainText, []byte(strconv.Itoa(int(stamp))), )```
281;but I also don't have a way to test the output
282;I'm having a problem accessing data within a struct
283;Some background information:
284;These are what my structs look like:```gotype SID struct {}type SID_AND_ATTRIBUTES struct { Sid SID Attributes uint32}type TOKEN_USER struct { User SID_AND_ATTRIBUTES}```It seems to be working because when I execute `GetTokenInformation()` I can run `fmt.Println(tokenUser.User)` and get the result `{0xc0001af050 0}` but when I try to do `fmt.Println(tokenUser.User.Sid)` or `fmt.Println(tokenUser.User.Attributes` and get onthing back.```gotokenUser.User.Sid = &{}tokenUser.User.Attributes = 0```
285;so I can see that there's information in the `tokenUser.User` struct but I can't seem to access it to pass onto the next function (`LookupAccountSidA()`)
286;```gov.McginleyList = append(v.McginleyList < mcginley)```
287;is this syntax allowed
288;where i can make the appending variable straight receiving from the channel
289;probably not
290;just use two lines
291;wrd arighty thank
292;u
293;@TimeLoad You say there is information in `tokenUser` but it looks like it's just a struct with an address in it (which is an address to the SID struct)
294;If you don't initialize the struct w/ some information there's not gonna be any values when you try to access it.
295;``tokenUser.User.Attributes = 0`` because ``0`` is the nil value for `uint32`
296;and `tokenUser.User.Sid = &{}` because it's a reference to a struct w/ nothing in it (the SID struct)
297;Timeload: can you show us how you're using the structs? Can't make much sense from the textual description
298;hello newbie hereI don't really understand how to import local packages.My project would be used as an executable.Here is my project structure (feel free to say if it can be improved):```./main.go./my_project + foo.go + bar.go./otherfoldersthatshouldnotbeusedbyenduser``` `foo.go` and `bar.go` begins with `package my_project` `main.go` begins with `package main` then `import ./my_project`But when I try to `go get` this project it fails.Also is my project structure correct? Should `main.go` be in `my_project` or in `root`? I put it on root to avoid typing `go get mygitserver.com/myuser/myproject/myproject` instead `go get mygitserver.com/myuser/myproject`.
299;> probably not@Sgt_Tailor why not? `<c` is a valid value right?
300;@xblooos that's definitely valid syntax (I don't know what your data actually is this was just a basic test of the syntax)```gotype V struct { McginleyList []int}func main() { mcginley := make(chan int) v := V{} go func() { mcginley < 1 }() fmt.Println(v) v.McginleyList = append(v.McginleyList <mcginley) fmt.Println(v)}```
301;You're right nothing in the spec forbids it so it is valid I suppose. Not that I've countered a usecase for it before üòõ
302;well it's definitely useful for reading a channel into a slice
303;```gofor { x = append(x <c)}```or whatever
304;though there's probably safer ways to do that
305;True. But with situations like that I have to guard the slice with mutexed 9/10 times
306;Don't think I've ever read into a slice like that before but it is neat that it is possible
307;that's fair
308;Wouldn't you want the reading to stop when the channel closes anyway?
309;So```gofor v := range c { x = append(x v)}```
310;But yeah using values read from channels in expressions seems perfectly fine
311;Hello. I have a for loop which iterates over a slice. When a specific criteria regarding an element is met I need to add an element just next to that element. How could I do that?
312;If statement and slice tricks
313;?go slices
314;Slice usage and internals <https://blog.golang.org/goslicesusageandinternals>  Sgt_Tailor
315;might be nice to add <https://github.com/golang/go/wiki/SliceTricks> to that tag :)
316;I don\'t understand how could I shift the other elements
317;you don't
318;you make a new slice
319;consisting of oldSliceHead newElement oldSliceTail
320;<https://github.com/golang/go/wiki/SliceTricks#insert> :) @Jaedsaf
321;you can append a zero value and copy forward like that second method shows
322;so> you don't@deezy isn't quite true
323;i mean that's the simplest solution
324;but not necessarily the most correct :P
325;Tried and it works
326;Thanks
327;no prob :)
328;hey guys I have a project structure like this:
329;how do I update the go.mod with the packages?
330;you don't?
331;:thinkingo:
332;the toolchain will update the mod file for you
333;in like 99.99999% of cases
334;yeah sorry it is not though that is what I am confused about
335;None
336;I have this set too
337;¬Ø\\_(„ÉÑ)_/¬Ø
338;idk man
339;if you want to update your dependencies do `go get u ./...` in the project root
340;yeah I tried that
341;that's an editor problem
342;i'm betting
343;who needs editors
344;goland bad
345;confusing abstractions
346;prove me wrong
347;running `go get u ./...` doesn't write anything to `go.mod`
348;it should :thinkingo:
349;```‚ùØ go get u ./...go: finding module for package github.com/coreos/gooidcgo: finding module for package github.com/sirupsen/logrusgo: finding module for package github.com/Jeffail/gabs/v2go: finding module for package github.com/containous/traefik/v2/pkg/rulesgo: finding module for package golang.org/x/oauth2go: finding module for package github.com/thomseddon/goflagsgo: found github.com/containous/traefik/v2/pkg/rules in github.com/containous/traefik/v2 v2.2.8go: found github.com/sirupsen/logrus in github.com/sirupsen/logrus v1.6.0go: found github.com/thomseddon/goflags in github.com/thomseddon/goflags v1.4.0go: found github.com/Jeffail/gabs/v2 in github.com/Jeffail/gabs/v2 v2.5.1go: found github.com/coreos/gooidc in github.com/coreos/gooidc v2.2.1+incompatiblego: found golang.org/x/oauth2 in golang.org/x/oauth2 v0.0.020200107190931bf48bf16ab8dgo: github.com/containous/traefik/v2@v2.2.8 requires github.com/abbot/gohttpauth@v0.0.000010101000000000000000000: invalid version: unknown revision 000000000000```
350;I thought it did?!
351;oh well that's an error
352;goland is confusing me
353;ah boy
354;sorry
355;awkward
356;needed to add this mess:```replace ( github.com/Azure/goautorest => github.com/Azure/goautorest v12.4.1+incompatible github.com/abbot/gohttpauth => github.com/containous/gohttpauth v0.4.10.2018011215395165b0cdae8d7f github.com/docker/docker => github.com/docker/engine v1.4.20.20191113042239ea84732a7725 github.com/gocheck/check => github.com/containous/check v0.0.020170915194414ca0bf163426a github.com/gorilla/mux => github.com/containous/mux v0.0.020181024131434c33f32e26898 github.com/mailgun/minheap => github.com/containous/minheap v0.0.0201908091808106e71eb837595 github.com/mailgun/multibuf => github.com/containous/multibuf v0.0.0201908090143338b6c9a7e6bba github.com/rancher/goranchermetadata => github.com/containous/goranchermetadata v0.0.020190402144056c6a65f8b7a28)```
357;yikes
358;I really don't like these guys
359;think they should be banned
360;why do you need that
361;bruh
362;why are you using so many replaces
363;just require the versions you need??
364;fixes `version: unknown revision 000000000000` üòõ
365;im not even gonna get involved in this mess
366;üö∂
367;it is bad I am not either üòÑ
368;go get u ./... updates indirect dependencies as well iirc instead of just updating direct ones and cascading
369;why don't you like goland btw üôÇ
370;Not relevant. This isn't an editor issue
371;so I have two goroutines constantly looping waiting for events i have an errors channel that's supposed to kill them when a message arrives but only one would get a single error message right?
372;should I just push two errors into the channel or is there a way to read without consuming the message from the channel?
373;uhh
374;the answer involves closing the channel
375;but i forget exactly what that looks like
376;http://wysocki.in/golangchannelsquitchannel/
377;seems to have lots of nice reading on the subject
378;you need something that muxes one error channel to multiple error channels
379;or that yeah
380;this is roughly the exact scenario that condition variables are actually useful for actually
381;tru
382;sync.Cond or something?
383;actually actually :^)
384;never fucked with it
385;<https://golang.org/pkg/sync/#Cond> yep
386;ganna check it out thing is I have one looping checking for channel messages and the other trying to read from a tcp connection
387;actually actually actually conveys two different things in that sentence
388;almost sounds like context. there are subunits of the same task
389;currently sending down two errors seems simpler
390;and you want to handle cancellation
391;yeah but that has off by one errors
392;what if you spawn 6 goroutines and send 5 errors
393;you can't guarantee that the two errors will go to different goroutines
394;oh neat
395;oh dang
396;it's that I have these two routines```gofunc (c Connection) transmitData() { for { select { case packet := < c.SendQueue: writeTCPPacket(c.conn packet) case < errors: return } }}func (c Connection) receieveData() { for { packet := readTCPPacket(c.conn) c.ReceiveQueue < packet select { case < c.errors: return } }}```
397;this is what I was planning on
398;the easy way here would be multiple error channels one for each worker
399;would save me from importing another package I guess
400;idk that sounds kinda stinky
401;How can i type infer sync.Map returns from load()?
402;you probably can't
403;i'm guessing it's returning interface{}
404;yeah
405;which means you have to tell Go what its type is
406;yeah thats what im trying to work out
407;Don't take this the wrong way
408;but why don't you know
409;are you familiar with type assertions and type switches?
410;if you're not sure interface has .Type and .Value
411;fmt.Print that out and see what's up
412;yeah tru
413;"`fmt.Printf(""%#v"")` is your friend"
414;@ChillFish8 type assertion
415;Also id be concerned about your use of sync.Map in the first place
416;Its usecases are hyperspecific
417;9.9/10 a map + mutex is better choice
418;Its more just testing and getting used to the inbuilt extensions
419;For my use case a map + RwLock is probably the best choice because im going to end up doing alot of Reads rather than writes
420;Probably
421;and you get type safety that way
422;Hi
423;I've been learn gorountine for many times
424;But I wasn't satisfied
425;Ive watch freecodecamp
426;Read medium
427;Goroutines are pretty simple compared to Other langs
428;@ChillFish8 do you have any reference?
429;?go concurrency
430;Kavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_TailorUnderstanding channels <https://www.youtube.com/watch?v=KBZlN0izeiY>  Sgt_TailorRob Pike  Concurrency Is Not Parallelism <https://www.youtube.com/watch?v=cN_DpYBzKso>  Skippy
431;some useful talks
432;they're absolutely the easiest concurrency I've seen in a language by far
433;I just don't understand their explanation
434;okay where are you stuck
435;@deezy how to let the go thread executed
436;?
437;ü§î `go func()`
438;@ChillFish8 ahh yes
439;well first off
440;tho iirc goroutines are not threads
441;go doesn't have threads
442;it's important not to get it mixed up
443;because threads and goroutines are...pretty different in practice
444;So how do you call it?
445;goroutine
446;it's a goroutine
447;arnt Goroutines stackless? Idk if thats the right term for how they're implemented
448;other languages that do similar things call them fibers or green threads
449;implementationwise there's different trickery on different platforms but you don't have to worry about anything under the hood to use goroutines :)
450;iirc on linux a few goroutines will often occupy a single os thread and the runtime manages that efficiently
451;but again you don't typically need to worry about that
452;the runtime makes it just work :)
453;?go scheduler
454;Kavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_Tailor
455;@ChillFish8 they are not stackless
456;There are at all times max N active scheduler threads. Where N defaults to the amount of cores a system has
457;All goroutines are multiplexed onto those threads
458;goroutines do have stacks. The limit of the stack varies per architecture. It is 1G on x64 machines
459;That is the stack per routine btw
460;Ah alright when Doad mentioned that the Goroutines were balanced over OS threads i doubted my original thought
461;Just because theyre multiplexed doesnt mean they cant have a thread
462;stack
463;Is there a general rule of thumb of how many goroutines you can stack onto a single thread in that case
464;you don't really think about that
465;you don't have any control
466;Thats not something you really have control over
467;The runtime moves goroutines around as it sees fit
468;ah
469;Unless you call runtime.LockOSThread
470;and that's usually only necessary for cgo stuff
471;because c libraries expect a single thread to work in
472;yeah
473;gotta say I really like goroutines
474;if you do your code right it works pretty much the same either one core or more
475;you stop thinking about your hardware/os limitations and more about how your code is structured
476;?go concurrency
477;damn it
478;?go routines
479;?go concurrency
480;Kavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_TailorUnderstanding channels <https://www.youtube.com/watch?v=KBZlN0izeiY>  Sgt_TailorRob Pike  Concurrency Is Not Parallelism <https://www.youtube.com/watch?v=cN_DpYBzKso>  Skippy
481;?go pipelines
482;Go Concurrency Patterns: Pipelines and cancellation <https://blog.golang.org/pipelines>  technololigy
483;cut my hand real bad cant type
484;oof
485;go gud
486;didn‚Äôt know there were go pipelines wtf
487;its just channels
488;that makes sense
489;simple composable building blocks
490;it‚Äôs just a logical extension of channels kinda like how there‚Äôs no while loop but you can make a while loop with simply a for loop
491;that's the beauty of go showing itself
492;go really is such a good language
493;really small simple pieces that you just layer on top of each other
494;it really shows the beauty of simplicity
495;the true artist knows his work is done not when there is nothing left to add but nothing left to take away
496;Fools ignore complexity. Pragmatists suffer it. Some can avoid it. Geniuses remove it.
497;"ripped straight from my github bio ;)"
498;Anyone know how I'd share the publickey to other clients? https://godoc.org/crypto/rsa#PublicKey
499;was expecting it to be a string
500;@Akandesh https://stackoverflow.com/a/25181584/7794030
501;what the heck
502;Yes
503;I don't understand anything here. The code atleast
504;oh maybe I understand something at the bottom
505;sec
506;Before you ask no I have no idea how this works and I'm glad I dropped out of school before getting to understand this level of maths I just used google
507;Hm this example seems to have recieved the RSA Public key already in base64 format
508;well
509;That's what I'm trying to figure out how to ü§î
510;i'm guessing PublicKey is []byte
511;I wish
512;oh
513;whoa
514;what are you supposed to do with that
515;I wonder ü§î
516;Gotta do what the stackoverflow does in reverse I think
517;You wanna do the reverse operation
518;:)
519;Didn't think I'd have to learn the background of RSA to do this
520;abstractions can only get you so far
521;I also found this
522;https://stackoverflow.com/a/29679379/7794030
523;they can take you a long way
524;It's not in Go but it should be very straight forward
525;but at some point you gotta get under the hood
526;I'm not sure that's true
527;don't worry you'll get there
528;okay so `big.Int` is supposedly a int array?
529;No it's an int that's bigger than int64
530;oh yeah.. this is my first day with Golang üòÖ decided to jump in and first do RSA then afterwards AES. I come from a C++ background
531;yeah that's one of your factors
532;spoilers: crypto is hard
533;yeah but the ``?
534;doing it from scratch is hard
535;So how many bytes is a big.Int then?
536;In go arrays are always noted as `[]` of some sort IIRC
537;So it's really a pointer I think
538;okay but also
539;Unlike in C/C++
540;https://golang.org/pkg/math/big/#Int
541;I see
542;documentation is your friend
543;Yeah big ints are weird so it's always pointers seemingly
544;ü§î
545;"I think the disconnect here is how you actually want to transmit that information‚Äîan RSA public key is by definition just a modulus and exponent and there exist multiple formats to encode that information; do you want a specific one?"
546;^
547;I see so it's basically just a bunch of bytes that signify the modulus and then there's a a couple for the exponent?
548;If you want what you might see in a certificate you're probably looking for ASN.1: https://golang.org/pkg/crypto/x509/#MarshalPKCS1PublicKey
549;They just want the key as a text without necessarily knowing how modulus and exponent have anything to do?
550;( crypto is hard )
551;OH DAMN
552;You're a life saver LethalClips I was about to go write code I would only half understaznd
553;Well.. I'm sending it over to a C++ client I have not yet made. I'll be using another RSA library there to use the key to encode the data I'll communicate with etc
554;so I believe the format is not that important. What's important is that I can send the bytes
555;but that's the thing
556;the bytes are
557;everything
558;The crypto libraries seem very fragmented at first but what you quickly realize is that there\'s a lot more pluggability than you might first think and the Go implementations do their best to implement things exactly where they should be
559;"RSA has nothing to do with how it's encoded; it's just RSA"
560;There are encoding mechanisms but they're defined externally
561;Yeah I think I know what you're saying.
562;just gotta figure out how to get a big.Int pointer over to a byte array
563;you've already been given the answer
564;let me guess the answer is reading docs? :^)
565;https://golang.org/pkg/crypto/x509/#MarshalPKCS1PublicKey
566;lethal linked this like 2 minutes ago
567;Yeah I saw that but didn't look into it
568;cool
569;didn't realize its parameters were that simple
570;go is good
571;thought it would require more work
572;trust the documentation
573;like lethal said a lot of things end up being SUPER pluggable
574;lots of simple components that you layer together
575;Yeah never would've thought that existed
576;For example you can also take your public key and plug it into the `crypto/ssh` library to get an SSH public key https://godoc.org/golang.org/x/crypto/ssh#MarshalAuthorizedKey
577;and if it did I would've expected it to be part of the Keys functions
578;this is the kind of stuff that makes me wish Go had try/catch
579;see but that ties responsibility too closely
580;yea the ways these packages are used is quite new to me
581;But none of those things are nesseciarily exceptions
582;go takes some getting used to
583;but it's very comfortable
584;I like it though seems really efficient coding wise ¬Ø\\_(„ÉÑ)_/¬Ø
585;it's just multiple points of failure that would lead to the same decision would be a lot easier to write with a try catch
586;It's definitely a bit of a shock if you're unfamiliar with how all of the pieces of the crypto sphere fit together‚Äîtrust me I've been there (and the libraries still aren't perfect: try generating a Curve25519 key without looking at the definition of it lmao)
587;oh no
588;i'm not even man enough to mess with curve
589;But once you work with it for a bit I think the design and its benefits becomes quite clear
590;The library just provides you the X25519 function and expects you to know how to generate a private key lmao
591;Not great design on that one
592;Crypto is just something I intentionally avoid because it seems like this huge gaping sinkhole of information
593;same
594;Brain is too smooth for that right now
595;just import packages and blame the library author when things go wrong
596;(even better: `ed25519` will generate a keypair for you but `curve25519` doesn't)
597;hm i crash
598;nil pointer deref
599;"```gofunc number_to_bytearray(number int) []byte { buff := new(bytes.Buffer) err := binary.Write(buff binary.LittleEndian int32(number)) if err == nil { fmt.Println(""Error in number conversion:  err.Error()) return nil } return buff.Bytes()}``` something something very bad"
600;What line
601;Oh yourerror check is wrong
602;Youre saying theres an error if err is nil
603;argh
604;I thought I fixed that
605;must've had it right from the start then made it wrong
606;Also please no underscores
607;numberToByteArray
608;(even though its not an array its a slice)
609;nah im gonna snake in Go and there's nothing you can do about it !
610;Go is now called go
611;:robpike:
612;Kinda kringe but ok
613;we can add golangcilint to your ci/cd
614;and make it scream
615;atleast I got this bothering me
616;lmao snake case
617;#deserved
618;kebapcasebestcase
619;I added `golangcilint` to my CI/CD and now my life is a neverending quest to please the `gocognit` gods
620;snake case bad
621;also it should be intToBytes or something
622;number is very ambiguous
623;yeah number feels weird
624;yea true
625;`number interface{}`
626;What does a runtime `unexpected return` error mean like what could be the origins
627;you have a `return` where it shouldn't be
628;how can that be on runtime though o.o
629;isnt that somehting that the compiler picks up
630;how about you share the full error
631;it is
632;:thonk:
633;the whole panic
634;i...doubt that
635;there's almost certainly more output than that
636;It's not a panic I log errors with `println(err.Error())` rn and thats what I get
637;okay so post the code the error comes from
638;:thonk:
639;yeah show your work
640;I dont know where it comes from
641;The project is 100+ files sooooo
642;well you've wrriten some go code right
643;where is the `err` from
644;post that block
645;yeah dude
646;you're literally
647;printing the error out
648;what generated the error
649;scroll up a few lines
650;idk üò¢
651;I am just printing the err.Error() and thats what i get
652;Right
653;So start there
654;and work backwards
655;find out what line that error comes from
656;like literally just post the function that the print is in
657;there's 87 `err.Error()` in the code
658;oof
659;that's not very good logging
660;time to add more descriptive log messages
661;place breakpoints on every one of them and then see which hits üòé
662;"don\'t do`log.Println(err)`do`log.Printf(""error doing ThingB: %s err)`"
663;or maybe you can place a breakpoint inside the Error() func
664;then you might actually have some idea where your errors are coming from
665;isn't there anything like `log.Println(__FUNCTION__ err.Error())` in go?
666;eh
667;or even better `__LINE__`
668;you can get stack trace/source info like that
669;BUT
670;that sounds not as useful as actual contextual information
671;i much prefer simple unique human readable
672;yeah
673;context information
674;ofc not but its faster
675;just copy paste
676;lazy coder <
677;fun fact
678;programming is 95% reading
679;time to update 87 errors lul
680;this is an important lesson about technical debt
681;should be able to just do it in one line
682;and updated all of them at once
683;find all
684;replace all
685;I wouldn't be able to set custom messages though
686;mhmm i guess yeah
687;it sucks
688;but
689;well see you in 10 minutes
690;Or do you mean with `__LINE__` or what it was
691;it's easy
692;typing the fn name takes 2 seconds
693;or less
694;no just just descripive error messages
695;but stdlib log can print the filename and line number
696;that's one of the log.Flags
697;oh sick
698;there's also `string(debug.Stack())`
699;and `runtime.Caller()`
700;both gives you the filename line number and the information for the function
701;only Stack's output is big (think panic trace)
702;and Caller is more manual
703;Anyone remember the package for creating tiny custom taskbar apps in Go? It might've just been an OSX thing but I remember seeing it on /r/golang awhile back. Can't seem to find it. People had made BTC price tickers and stuff with it in the past. I remember it being super customizable.
704;nothing an abstract function can't solve though
705;just google for one and look at the godoc
706;I think it might have been https://github.com/getlantern/systray
707;only 55 errors to go üòÖ
708;that's the spirit
709;sometimes programming is just a lot of tedious bookkeeping
710;I am pretty sure its coming from 1 of my cron jobs though
711;"Hello! I\'m currently using compres/zlib and github.com/JakeMakesStuff/goerlpack and im running into an error with the following code. That error is unknown data type which is coming from erlpack.UnpackReader I presume its an issue with my struct for Handshake but I\'m not really sure heres the code:```golang _ msg err := socket.ReadMessage() if err != nil { log.Println(err) log.Fatalln(""Unable to read message."") return } b := bytes.NewReader(msg) r err := zlib.NewReader(b) if err != nil { log.Println(err) return } var handshake Handshake err = erlpack.UnpackReader(r &handshake) if err != nil { log.Println(err) log.Fatalln(""Unable to parse handshake."") return } r.Close()```And heres the struct: ```gotype Handshake struct { Operation int32 `json:""op""` RawData struct { HeartbeatInterval int32 `json:""heartbeat_interval""` } `json:""d""`}```Thanks!"
712;how do i convert a hex color string #FFFFFF to an int hex color 0xFFFFFF
713;:KM_Dorime:
714;@Deleted User if you're unmarshaling ETF data why is your struct tag `json`? :p
715;ya know what. That I did not think about.
716;It looks like the library uses the `erlpack` tag
717;Thank you so much
718;(https://github.com/JakeMakesStuff/goerlpack/blob/master/unpack.go#L229)
719;Let me see is that works
720;aye zoro
721;@Riku you could do some big dumb hacky stuff by removing the `#` and using hex.DecodeString lel
722;:ASwtf: ive seen you in discord botlist server
723;:BCS_PepeLaugh: alright that works
724;https://stackoverflow.com/questions/54197913/parsehexstringtoimagecolor
725;there's some clever and notsoclever answers here
726;i already have color validation so
727;:KM_Dorime:
728;I'm still running into that error @Carson
729;```2020/08/01 20:20:12 unknown data type```
730;i wouldn't be surprised if image/color hasn't a way to convert to bytes
731;man this lib isn't very verbose with its errors
732;are you doing zlibstream w/ Discord?
733;oh nvm
734;not stream
735;Yep I am
736;afaik encoding/zlib won't work w/ the zlibstream stuff which sucks
737;ripski
738;uhhh
739;there's a reason all those zlib code are commented out in my library lol
740;lemme see
741;I'd be happy if I could just get erlpack to work
742;hex decodestring returns bytes
743;how do i make this an int
744;and it needs to be in 0xFFFFF
745;format
746;are you trying to convert hex to int?
747;because decodestring is not how you do it
748;hex color to an int hex
749;im still getting that error yikes
750;so from #FFFFFF to 0xFFFFFF(valid int)
751;parseint with base 16
752;trim the #
753;^
754;@Deleted User https://github.com/golang/go/issues/31514
755;thats a good way actually
756;i'd say just comment out zlib code and try erlpack only
757;sucks how there's no complete pure go erlpack tbh
758;would've added it in my lib
759;but cgo bad
760;yeah thats what I'm trying atm and still getting unknown data type
761;It seems zlib is only sent by Discord on JSON anyways
762;``wss://gateway.discord.gg/?v=6&encoding=etf``
763;Unless their docs are lying
764;whats the bitsize
765;oh interesting
766;@Riku 64 or 32
767;or 16 but that won't fit
768;if 32 > int or int32
769;"```golang b := bytes.NewReader(msg) // r err := zlib.NewReader(b) if err != nil { log.Println(err) return } var handshake Handshake err = erlpack.UnpackReader(b &handshake) if err != nil { log.Println(err) log.Fatalln(""Unable to parse handshake."") return } // r.Close()```"
770;64 > int or int64
771;for colors you only need 32 though
772;specifically for nonalpha (FFFFFF) 24 is enough
773;but there's no int24
774;https://i.kawaii.sh/qrQt3I.png
775;what's your current structure
776;:KM_Dorime:
777;after updating the code
778;@Riku colorful.Hex is redundant
779;just let ParseInt do the job of parsing a valid color
780;then just do a `if inthex < 0 || inthex > 0xFFFFFF {`
781;It's superfluous but no need to go `[]byte` > `bytes.Reader` > `erlpack.UnpackReader` when `erlpack.Unpack` already takes `[]byte`
782;I would try printing out what you receive byteforbyte and confirm that what you're getting conforms to ETF
783;is the if statement if it is an error or not an error :KM_Dorime:
784;From looking at the code `unknown data type` only occurs on invalid ETF
785;if it's >FFFFFF then it's invalid
786;just make a new Err
787;and return that
788;alright
789;how would I even check if its valid etf?
790;http://erlang.org/doc/apps/erts/erl_ext_dist.html
791;"I\'ve no idea how to parse that so I just logged string(msg) and it gave me ``ÔøΩtddtd_tracelm([""gatewayprdmainxbnb"",{""micros"":0.0}]jdheartbeat_intervalbÔøΩ""dopadsdnildtdnil``"
792;and logging just msg gives me ``[131 116 0 0 0 4 100 0 1 100 116 0 0 0 2 100 0 6 95 116 114 97 99 101 108 0 0 0 1 109 0 0 0 40 91 34 103 97 116 101 119 97 121 45 112 114 100 45 109 97 105 110 45 119 108 106 102 34 44 123 34 109 105 99 114 111 115 34 58 48 46 48 125 93 106 100 0 18 104 101 97 114 116 98 101 97 116 95 105 110 116 101 114 118 97 108 98 0 0 161 34 100 0 2 111 112 97 10 100 0 1 115 100 0 3 110 105 108 100 0 1 116 100 0 3 110 105 108]``
793;Unfortunately that's kind of the deal when you're trying to use a super obscure encoding format you should have a decent understanding of how the format is set up to be able to debug issues like this
794;you can always do a byte for byte diff against known good output
795;Understood
796;in theory
797;that's assuming the outputs are deterministic
798;> Unfortunately that's kind of the deal when you're trying to use a super obscure encoding format you should have a decent understanding of how the format is set up to be able to debug issues like thisthis 100% lol
799;I'd just stick w/ JSON
800;welp shit back to the drawing board.
801;it be like that sometimes
802;I've wanted a reason learn more about encoding and all that So I guess this is a good one
803;Yeah I'm not saying to give up but a baseline understanding of ETF is definitely going to be essential
804;Each element is encoded by one byte specifying its type some header information then the data
805;"As a small example: let\'s take `lm([""gatewayprdmainxbnb"",{""micros"":0.0}]`"
806;`l` is 108 ASCII so let's see what type 108 is in the ETF docs
807;Yeah Thats why I wanted to use etf is cause I'm really aiming for the best of scalability in this app
808;json isn't that slow
809;12.16 LIST_EXT
810;108 Length Elements Tail
811;And actually this is where looking at the bytes helps
812;Look for the first 108 after that we see `0 0 0 1`
813;ETF specifies the next four bytes after `108` is the length so this list has 1 element
814;Then we see `109 0 0 0 40`
815;`109` is a binary and the next four bytes are the length which here is 40
816;"It\'s not a coincidence: `[""gatewayprdmainxbnb"",{""micros"":0.0}]` is exactly 40 characters long"
817;if anyone is still here from my err.Error() stuff i got it finally
818;congrats!
819;Ah yeah I see still confusing asf for me tho. im just gonna stick with json until it becomes a bottleneck
820;@_diamondburned_ where do you get the indication that that issue is blocking Discord's transport compression from working? Just curious
821;It seems like the issue here was that they were trying to treat transport compression like payload compression creating a new reader for every message read on the socket
822;other zlib impls call Flush before getting the data so I figured I'd need to here too
823;wdym :Thonk:
824;the main issue w/ Go's zlib was that Read required a valid zlib though
825;and a partial zlib isn't valid
826;so it errors out
827;future Reads check on that error state and error out immediately too
828;when I was using zlib I was getting an invalid zlib header error
829;"Does Discord send a payload that doesn't work? That issue specifically mentions SSH and says that that feature is deprecated; I'm just trying to understand what the actual issue is here"
830;@Deleted User your first message was using zlib and getting an error from erlpack no?
831;The issue is me not knowing what I'm doing lol
832;Well in your original example you were creating a new reader for each message
833;Transport compression works on the stream as a whole not individual messages
834;it's not really that it doesn't work
835;Discord's zlibstream is effectively treating the entire stream as a huge zlib payload that you're supposed to keep feeding into the decoder to get the data
836;but the thing is
837;zlib as a standard wants the last few bytes as something special to verify the whole payload and Go's implementation really wants those
838;but the stream EOFs out before Go gets to see those last few bytes that it wants
839;so it errors out
840;idek if zlibstream as it is breaks any standard
841;Anyone here familiar with Hugo's markdown system? The numbered lists are being odd for me. It's aligned so that the text is in line with the normal page margins but the number is off the the left so the page looks sloppy. Ex: Words form a sentence here. 1. But the numbers are aligned oddly :( And another sentence here.
842;probably CSS?
843;I suppose so but the template renders lists fine when I express them in HTML
844;maybe it's not treated as an actual markdown block?
845;try adding a space before and after the list
846;Like just a new line?
847;yeah
848;@Carson just to make sure what I said was correct I tried experimenting around with ignoring the error
849;and the read payload was complete
850;except the Read method checks its internal state for the error and return early
851;so only the first payload gets decompressed properly
852;which is annoying
853;why does it even have an internal error state
854;That didn't work. If I prefix the actual list line with 4 spaces it brings it back inline but makes it codelike. I'm assuming that's a different markdown feature at that point.
855;Hey I'm new to golang and am having trouble parsing this json response to a struct and was wondering if any of ya would be able to help me out?
856;sure
857;"So im just testing with this api for minecraft since ive worked with it in python ```type Account struct { Id string `json:""id""` Name string `json:""name""` Legacy bool `json:""legacy""`}type MojangResponse []AccountmojangResponse := &MojangResponse{}ff := json.NewDecoder(response.Body).Decode(mojangResponse)```"
858;the struct is always blank
859;"`[{""id"":""25776687d39142419098378870f82915"",""name"":""jesus"",""legacy"":true},{""id"":""d664f4b4d6884d289fbd3d58ef2844b4"",""name"":""Bob""}]`"
860;that is the response from the api
861;what are you printing
862;also use `ID` not `Id`
863;no use Id
864;Did you check the error returned by Decode?
865;also just do `mojangResponse := MojangResponse{}` and take a pointer of it
866;`Id` is against Go's naming conventions
867;so don't do it
868;reference?
869;golint might complain
870;i hate `ID`s
871;@Sgt_Tailor i get EOF
872;@Robin its the Go convention
873;Should be easily googlable
874;The reference <https://github.com/golang/go/wiki/CodeReviewComments#initialisms>
875;@Poket Are you implementing Yggdrasil?
876;No not the authentication
877;Just like the username to ID
878;Ah got it
879;and username history
880;@Poket are you reading from the response and then passing response.Body to NewDecoder?
881;Because you cant read the body twice from response.Body
882;@Robin https://github.com/golang/go/wiki/CodeReviewComments#initialisms
883;oh fuck
884;I'm late
885;FUCKKKK
886;Thx for showing the same link
887;lol
888;now I am eternally pissed
889;üò≠ ok ok
890;I have a buffer reader reading it
891;> the struct is always blank@Poket the response is a json array but you're trying to decode into a struct
892;Theres that too
893;But my struct is array of other struct?
894;No they aren't
895;@zephyrtronium MojangResponse is type []
896;It is
897;The type is defines as a slice of Accounts
898;oh
899;ha i'm dumb
900;So is stroom
901;I bet theyre double reading
902;No pothead you are
903;Its a slice
904;@Poket just try and not make a pointer to slice
905;And the response is an array
906;do `mojangResponse := MojangResponse{}` and unmarshal into `&mojangResponse`
907;You have to for decoding Diamond
908;then print `mojangResponse`
909;It won't take a non pointer
910;yes you take the reference while unmarshaling
911;not while constructing
912;Im tellin ya theyre double reading the response.Body
913;because do the latter and you might print out the pointer
914;oh yeah error check too
915;_either way_. We are providing non relevant info right now
916;not really?
917;@Poket please show more surrounding code
918;Are you doing ioutil.ReadAll(response.Body) beforehand
919;We want to know why it is not working. In order to get that reason we have to check the error returned by the decoder
920;Okay i have gotten it now parsing int othe struct
921;It is working now
922;What was the issue
923;It was because I was reading it into buffer before
924;the body
925;Knew it
926;Double read :)
927;I didn't realize I could only read it once
928;Well that is great to know i will look out for those mistakes
929;Stroom is no longer brainlet
930;I have ascended
931;:kkk_genius:
932;ty guys üòÑ
933;Nah still dumdum Stroom
934;I dab on you Sgt :ElaDab:
935;I DAB on you
936;Hey does someone have seen a good minecraft go proxy?
937;@Ois√≠n
938;minecraft is just TCP so any proxy should work
939;hello
940;unless you want something like bungeecord
941;I mean an extensible one
942;bungee is the usual one but depends what you need
943;to get many to use it probs would need to implement plugins and such like bungee
944;yk i'd like to push the minecraft community to use more go but that's hard
945;>go>PluginsPick one
946;i'm working on a prod ready pluggable proxy
947;people in the minecraft community aren't gonna move away from java anytime soon
948;a lot of them don't even like kotlin
949;i could support different plugin systems like lua tengo (https://github.com/d5/tengo) that would be very simple for beginners
950;The problem is that all other projects are years ahead so making a switch isn't going to be easy üò¶
951;I know for sure reimplementing the vanilla server is very work intensive/impossible
952;but having a cool goto proxy for the go world might be a good fit
953;actually there is even a C version of vanilla server: https://github.com/cuberite/cuberite
954;"Hello I was reading the net/http go library and I found this: if n := t.connsPerHost[w.key]; n < t.MaxConnsPerHost {  if t.connsPerHost == nil {"
955;how come condition (t.connsPerHost == nil ) ever be met. If that was the case wouldnt an error be raised in (n := t.connsPerHost[w.key])??
956;I dont think lookup on nil map panics
957;Correct it returns the zero value for the type
958;it does not a nil map is empty
959;ok thanks and sorry
960;no worries
961;is there a way to remove a item from a slice using the value
962;instead of iterating through it
963;if you dont have the index you have to iterate it
964;thats the basic fundamentals of how slices/arrays work
965;right
966;just checking if there was another way
967;how do i delete a item from a slice üòÖ
968;slice tricks
969;link is somewhere above
970;?go slice
971;slice tricks <https://github.com/golang/go/wiki/SliceTricks>  stdioSlice usage and internals <https://blog.golang.org/goslicesusageandinternals>  Sgt_Tailor
972;when
973;oh hey it's there
974;sorry
975;could someone explain this to me `a[i] = a[len(a)1] `
976;swap the current index's element with the last one in the list
977;well not swap
978;how does that delete an item then ?
979;but it copies the last element on there
980;"it doesn't; the next line does"
981;well they both somewhat do
982;the line you pasted overrides the item
983;`a = a[:len(a)1]` oh so what does this do ?
984;the next line deletes the last item which was duplicated earlier
985;oh right
986;i see
987;`a = append(a[:i] a[i+1:]...)`what does the ... do again ?
988;expand
989;explode
990;w/e
991;any links to explain ?
992;i mean there's not much to explain
993;say slice a is `[]int{1 2 3}`
994;you know how append can take a single element?
995;so `a = append(a 4)` would add 4 in there
996;you can do `a = append(a 5 6 7)` as well
997;and a would be `[]int{1 2 3 4 5 6 7}`
998;okay i get that part
999;this would also work if `8 9 10` is in a slice
1000;`b := []int{8 9 10}`
1001;if you look at the signature of `append` you'll notice that it's something like `func(slice []T elements ...T)`
1002;`...T` is a variadic argument that allows unlimited arguments of type T
1003;in this case integers
1004;which is why `5 6 7` worked
1005;but if you have a []T you'll have to expand the slice to that variadic list
1006;so it's like args in python
1007;so `append(a b...)`
1008;i ahve no ieda what that is
1009;i haven't done python in 3 years
1010;oh  sorry well i think i know what you mean
1011;but why is that included in the append
1012;`a = append(a[:i] a[i+1:]...)` < this
1013;because `a[i+1:]` is a slice
1014;you're slicing a into a smaller slice w/ that
1015;"```go for { select { case message:= <channel: switch message { case fmt.Sprintf(""stop %s url): fmt.Printf(""%s stopping"",url) break case online"": channel < fmt.Sprintf(""running %s url) time.Sleep(1time.Second) } case _ = < ticker.C: secondScan := grabHREF(url) fmt.Println(secondScan) if firstScan != secondScan { _ _ = s.ChannelMessageSend(channelID fmt.Sprintf( <%s> has changed url)) } firstScan = secondScan } }``` i\'m not sure the `break` here works"
1016;am i using it correctly ?
1017;That‚Äôs going to break the select statement not the loop
1018;how would i break the loop
1019;assign it a label
1020;^
1021;```goLabel: for { break Label```
1022;then break label ?
1023;oh yep
1024;ok
1025;ok
1026;thanks
1027;can labels be used for anything ?
1028;goto as well
1029;though goto isn't used that often anymore
1030;also np
1031;any reason goto isn't used ?
1032;Generally not needed and it leads to messy control flow
1033;how do i stop a go routine reading something it sent to a channel
1034;Just don‚Äôt read from the channel?
1035;but it's running a for loop
1036;checking the channel
1037;Close the channel
1038;You‚Äôre sending something to a channel and don‚Äôt want to read from it?
1039;What‚Äôs the actual problem not the solution you‚Äôre trying?
1040;ok i need to have a way to communicate between this go routine and the main code i have it so if i send the message online it will respond with it\'s preassigned \'id\
1041;select another channel
1042;hey I am trying to make a api where my raspberry pi is supposed to send data. Can anyone tell me how do I make sure no on except my raspberry pi can do so ?
1043;use a secret token
1044;Some form of authentication
1045;or better yet don't make an API
1046;Simple bearer token on something
1047;use ssh or anything else
1048;Also this
1049;send that token in body or header ?
1050;Auth header
1051;anything you expose is going to be inherently more insecure than not
1052;gonna use https
1053;should be fine i suppose
1054;doesn't change much
1055;ssh is still more secure if exposed than https
1056;okay how will my rpi ssh to my server to send the data ?
1057;give it a key
1058;generate one
1059;i just realised having one channel communicating to many go routines probably won't work üò©
1060;I understand that but ssh is a shell access. Will I have to use scp or something to transfer my data ? Are there any articles that can guide me a little ?
1061;ssh is not necessarily shell access
1062;it's remote access in general but you can use shell over it
1063;you can expose a localhost port over ssh
1064;you can expose a port to a remote Unix socket with ssh
1065;you can do X forwarding with ssh
1066;you can do TCP with ssh
1067;any resource I can read would be awesome kindly point me somewhere!
1068;can someone do this for me because I'm about to go to sleep
1069;> i just realised having one channel communicating to many go routines probably won't work üò©@tfyl yes it can work
1070;if your code is organized around a single channel it can
1071;how would this be possible because otherwise i'd need a channel for each routine
1072;if you need one message go to all then a channel per goroutine ye
1073;if one to any then only one channel
1074;there's gotta be some sort of
1075;multicast
1076;like io.MultiWriter but channels
1077;:thonk:
1078;but i need one to go to the main one
1079;A for loop and a send
1080;not just one random one
1081;Keep a list of channels
1082;Iterate over them
1083;Send to each
1084;Keep a reference to any specific channel you want to send to
1085;ü§î that would work
1086;didn't know you could have a slice of channels
1087;you can have a slice of anything
1088;also
1089;map values
1090;can be ANY type
1091;`map[doad]deezy`
1092;what do you mean `map values` ?
1093;`map[key]value`
1094;i'm confused now
1095;yeah literally any
1096;it's fine
1097;`map[T]interface{}`
1098;generics
1099;`[]chan Whatever`
1100;is what you want
1101;don't get too distracted
1102;oh yeah i get what you mean my map[key]value now
1103;i'll give this a try
1104;can a channel have any name ?
1105;i.e. special characters
1106;haha what
1107;all variable names follow the same rules
1108;oh üò¨
1109;i knew that
1110;a good rule of thumb
1111;if you think the thing you want to do involves a new feature new syntax rules or exceptions to existing ones
1112;you're probably wrong
1113;in go specifically
1114;üëç
1115;i need to be able to get from a url to a unique channel name would a hash be a good option ?
1116;sounds like a map
1117;That‚Äôs exactly what a map is for to hash keys
1118;ok any links to what you're talking about üòÖ
1119;https://tour.golang.org/moretypes/19
1120;in the go tour we all find our way
1121;any reason why i'd get back an empty byte array on a socket receive? i know the client is sending data
1122;and i've never ran into this while using sockets before and my 70% asleep brain can't figure it out lol
1123;"What is a socket""? TCP UDP etc.? Are you checking the error on the read?"
1124;tcp and i am yes
1125;Are you sure there's space in the slice that you're passing in on the `Read`?
1126;dets err := ioutil.ReadAll(conn) if err != nil { panic(err) }
1127;i also tried the more manual approach
1128;_ err = r.Read(sizeb) besizeb = binary.BigEndian.Uint32(sizeb) dets := make([]byte besizeb) _ err = io.ReadFull(r dets) if err != nil { log.Println(err) break }
1129;which is also giving me
1130;Try using just a `Read` I'll bet you'll get an EOF in the error :p
1131;using a read means I need to have the size of the incoming data though yeah?
1132;unless i want to manage variablze sized chunks
1133;okay sec
1134;you're right in that i never checked the error of the r.read when I was doing it that way earlier
1135;okay you were right lol
1136;Yeah so the way I came to that conclusion is that `ReadAll` doesn't return an error on EOF because that's the only way it knows to stop reading‚Äîit goes until EOF and if it's an EOF the error is `nil`
1137;"At this point you know you're getting an EOF which could mean your client is closing the connection (FIN or RST) or that you're hitting your deadline; does it instantly return EOF or is it delayed?"
1138;instantly
1139;i don't think the client is closing it prematurely or at all really
1140;Well there's a great way to find out: it's Wireshark time üòÖ
1141;Find a packet set your conversation filter and it'll be super easy to see what's actually happening
1142;hours seems like a relatively short interval
1143;how often are you changing your certs
1144;you\'re probably fine with having just a lone Ticker that fires off some UpdateCerts method
1145;just uh
1146;think about intervals
1147;relative sizes i mean
1148;I'd just use a proxy webserver
1149;@Carson i'm combing through wireshark and i don't see the client sending anything at all i only see my sends and the subsequent acks but the second the client sends the server gets an eof (tested by waiting a few seconds before the client replies and they died in tandem)
1150;Well it definitely sounds like something is getting through then no? üòÑ
1151;A socket isn't going to just coincidentally die like that without something happening over TCP
1152;(and if your server is sending ACKs what does that say? :p)
1153;"@Carson sorry bout the disappearance lol i passed out >>; turns out the one who wrote the client screwed something up with handling the socket conns lol which explains why wireshark never saw anything at all being sent from that end"
1154;"How can i unmarshal json like:```json{ hello"": world""}``` into a struct where it\'s just keyvalue pairs?"
1155;or would i use a map for that?
1156;use a map
1157;yeah it's exactly what you need
1158;you're on the right track
1159;got it so i would just unmarshal the json into the map?
1160;yeah
1161;cool thanks!
1162;hello can I make a map with value type map??
1163;Y is there so much overlap between rust and Go users
1164;they are like polar opposite languages
1165;also I'm learning rust
1166;@keyk yes
1167;`map[string]map[string]string`
1168;you'll need to initialize the root map and all its children values too though
1169;that means doing a nil check on every value
1170;> Y is there so much overlap between rust and Go users> they are like polar opposite languages> also I'm learning rustBecause Go provides alot of utility for things that you might do with Rust but without the added annoyance of borrowing and lifetimes directlyIf you need actual native stuff with C Rust is better but in alot of cases Go can do the job aswell with alot less effort and less compile time
1171;go and rust are kind of like the 2 big new compiled languages and they both have their wins and losses
1172;Anyone in cyber security field? im working on one project need some help.
1173;while both are comparable to c++ in terms of use cases go is stronger in terms of development time and simplicity (particularly in concurrency) while rust is far more suited for tight performance uses with its expressive type system and heavy focus on memory safety
1174;and yes rust plays far better with existing c/c++ libs which is an added bonus if that's something you need
1175;@emnaruto07 if you have a question specific to using go don't ask to ask just ask :)
1176;actually is related to bruteforcing tool
1177;it may be more appropriate to discuss the topic in #offtopic then  though we're a bit quiet these hours of the day anyway
1178;okay
1179;"on an unrelated note reusing `ss` here is safe and probably more efficient right?```gofunc (m MethodCall) SigString() string { ma := map[string]string{ application_key"": m, } ss := make([]string len(ma)) i := 0 for k := range m { ss[i] = k i++ } sort.Strings(keys) for i := range ss { ss[i] += = + ma[k] } return strings.Join(ss )}```"
1180;I almost feel like you dont even need ss
1181;Whats the first i for?
1182;Its thr same values as k
1183;And why cant the two for loops become one loop
1184;And whats keys? Youre not using that anywhere
1185;ah forgot to change that name
1186;You probably want `i k := range m` in the first one ye
1187;I would think
1188;I'm sorting the keys of `ma`
1189;"```gofunc (m MethodCall) SigString() string { ma := map[string]string{ application_key"": foo"", } ss := make([]string len(ma)) i := 0 for k := range ma { ss[i] = k i++ } sort.Strings(ss) for i := range ss { ss[i] += = + ma[k] } return strings.Join(ss )}```fixed a few wrong names here sorry about that"
1190;you can ignore the actual value of `ma` here it'll be built by something else
1191;Why are i and k a thing
1192;You can use `ss := make([]string 0 len(ma))` and use append in the first loop for cleaner code
1193;i = k
1194;No
1195;hmm
1196;"When should i write `myVar := :)""` over `var myVar string = :)""`?"
1197;Because it's a map
1198;Not an integer
1199;O shid its a map
1200;@Rovako Whenever you can
1201;Really?
1202;Yep
1203;yep more readable
1204;Isnt it a good style to write it fully?
1205;No
1206;Nope
1207;Recommended is short way
1208;That was fast and clear XD
1209;Ok thanks for quick answer
1210;Short is the good way
1211;I sometimes take it too far declaring stuff like `t := (T)(nil)` instead of `var t T` but yes lol
1212;I feel like the first is still clearer
1213;"But constants are always written like this? `const MYCONST string = IAMPRETTYCOOLTHOUGH""`"
1214;If the type isn‚Äôt appearent to the reader from the assignment you‚Äôre doing some weird stuff imo
1215;yeah though you can omit the `string`
1216;And you should
1217;Is it in go also a convention to write consts always uppercase?
1218;@Madxmike I feel like both indicate the type just fine but `t := (T)(nil)` makes it extra clear that it's a nil ptr
1219;The const is a bit more nuanced
1220;Because it‚Äôs untyped const if you leave the string out
1221;@Rovako https://golang.org/pkg/math/#pkgconstantsNot always
1222;https://stackoverflow.com/questions/22688906/gonamingconventionsforconst
1223;Oh ok thanks
1224;Sometimes you want typed consts
1225;> The standard library uses camelcase so I advise you do that as well. The first letter is uppercase or lowercase depending on whether you want to export the constant.but> os.O_RDONLY is an exception because it was borrowed directly from POSIX.
1226;"And consts are correctly written like this in go? `const Test = test""`"
1227;Yep
1228;basically use go casing rules everywhere unless it's something from existing convention like posix
1229;"And not `const Test string = test""`?"
1230;https://blog.golang.org/constants
1231;This is a guide on it
1232;It really depends
1233;Ok thanks
1234;For instance: declaring a enum in go would be a list of typed constants
1235;"```gotype LeaveType stringconst( AnnualLeave LeaveType = AnnualLeave"" Sick = Sick"" BankHoliday = BankHoliday"" Other = Other"")```"
1236;Enums should always be consts? Ok
1237;See how these are typed
1238;Yeah im just taking the go tour rn
1239;Trying to learn whats good go code
1240;"```gotype LeaveType stringconst ( AnnualLeave LeaveType = AnnualLeave"" Sick = Sick"" BankHoliday = BankHoliday"" Other = Other"")```and always gofmt ;)"
1241;I copy pasted from some website lol
1242;no worries lol just trying to show them how gofmt helps a lot
1243;@superloach Yeah what you're doing seems ok and safe. Aside from setting the slice as 0len appropriate capacity and using append instead of `i` I wouldn't change anything myself
1244;gofmt formats go code üòÆ
1245;yep!
1246;XD
1247;@vlads thanks I'll make that adjustment :)
1248;Haha yep!
1249;vscode plugin does this when you hit save
1250;Gofmt is pretty cool
1251;And gos philosophy is to make code very readable?
1252;That‚Äôs part of it yes
1253;One question:
1254;I've had times when I looked at the Go implementation instead of the official specification for an algorithm and protocol because I found it easier
1255;weird thought but if I didn't want to use `make([]int len cap)` would something like `[]int{cap  1: 0}[:len]` work?
1256;No
1257;If i set a pretty low integer value and i use `:=` syntax does it automaticlly use something like int8?
1258;hmm
1259;They‚Äôre unexported
1260;No the default is always int for integers
1261;And allocation is needed
1262;Because it cannot know the bounded range you want the integer to be
1263;@Rovako it defaults to `int` use `x := int8(y)`
1264;oh
1265;@Rovako int means the type integer of your architecture
1266;So this would be still the good syntax writing somethin like doad 2 has written
1267;may be int64 or int 32 on amd64 and so on
1268;on a 32bit system `int` works like `int32` and on a 64bit system `int` works like `int64`
1269;Oh
1270;So you should just write `test := 124` and everything is good?
1271;Yes
1272;Pretty much
1273;Oh ok
1274;Thanks
1275;> So you should just write `test := 124` and everything is good?@Rovako this is not a rule
1276;if you had a range 0255 is better to use uint8
1277;it take less memory
1278;I mean
1279;Sure but that wasn‚Äôt what he was asking
1280;Maybe it does maybe it doesn't
1281;If it's just a random variable somewhere iterating over a 110 I'd still keep it as an int.
1282;ints make everything easy
1283;@Doad it appears to work fine :P <https://play.golang.org/p/AOn0Cu5H9m>
1284;And worrying about a couple bytes in Go isn‚Äôt a big deal
1285;@superloach excuse me
1286;"```gofunc multiplicate(x y uint) { return x  y;}```I would write something like this if i want just positive values wont i?"
1287;yep
1288;Plus it's probably registered anyway. And if you have to put it on the stack you probably have to add alignment so you're not winning much
1289;You do not need a function for that
1290;I'm sure it's an example :)
1291;It was an example
1292;^^
1293;and you can just call `multiplicate(2 3)` and it'll make those uint values
1294;> And worrying about a couple bytes in Go isn‚Äôt a big deal@Doad if you had low memory footprint in your code always is a good thing. High heap usage is bad for performance.
1295;int types are inferred and the default for declaration is just `int`
1296;"Well without the `;` and with a return type```func multiplicate(x y uint) uint {```"
1297;But yes
1298;> and you can just call multiplicate(2 3) and it'll make those uint valuesThis was for an example if i really need uint values. For example if this function would process those values in a way that negative values would result in an error.
1299;So i know whats the error if its not working
1300;yep
1301;Well no
1302;Can go infer that conversion on typed ints?
1303;don't think so
1304;Because if you convert a negative integer to an unsigned integer it's not an error no?
1305;That only works in the example because 2 and 3 are constant untyped ints
1306;Iirc
1307;typed ints have to be cast
1308;Yeah
1309;https://play.golang.org/p/37CMomziOpC yup
1310;And there is a big ol section on those conversion rules somewhere
1311;Do you often play in the playground? üòÇ
1312;It‚Äôs very specific on what can fit into what and how
1313;playground is super useful for testing stuff
1314;Just bookmark playground
1315;It‚Äôs the most useful tool
1316;Also uint doesn't throw errors like you might expect it to: https://play.golang.org/p/BV_358rr3N5
1317;https://golang.org/ref/spec#Conversions
1318;I didnt mean that with an error
1319;But im gonna now continue with the go tour
1320;vscode has discord integration??
1321;thats kinda cool
1322;Im using vscodium
1323;And thats a plugin
1324;oh
1325;lol
1326;But yes
1327;XD
1328;what's vscodium'?
1329;like a fork of vscode?
1330;open source binaries
1331;oh
1332;https://vscodium.com/
1333;I might have to write my own plugin so it says VSCodium and not vs code XD
1334;discord can't even find emacs >.<
1335;there's probably a package for that tho somewhere
1336;Are you on linux?
1337;Oh
1338;it thinks emacs is the title of the file i'm editing
1339;lol
1340;i guess that is the title of the window
1341;Ok ü§î
1342;yeah im on linux
1343;Me too üôÇ
1344;On what distro are you on?
1345;void
1346;Nice üôÇ
1347;> https://vscodium.com/@Rovako omg... telemetry that vscode gets is only for help them to catch errors and enhance the product
1348;no need for this. huehuehuehuehue
1349;HEYY there's an emacs plugin for discord
1350;epic
1351;there is an emacs plugin for everything
1352;lol
1353;i didn't expect it to be in the emacs repo doe
1354;cuz discord is proprietary
1355;> omg... telemetry that vscode gets is only for help them to catch errors and enhance the product@jcbritobr I don't really trust microsoft with telemetry data...........but at the same time we're all using discord which is as much a part of the botnet as anything so whatever
1356;the irony eh
1357;it will not leak important information from your projetcs.... lol
1358;idk I'm on a thinkpad discord server where ppl flash their mobos with open source firmware cuz intel has a management engine installed by defualt that can phone home.....but like you're usin discord. what is the point in flashing the bios if you're on discord already
1359;how much guys are using windows here or mac osx?
1360;I am using Windows and Mac
1361;I deploy on Windows mainly
1362;these leaks more information than all the softwares on github together
1363;on/to
1364;what is the concern with github?
1365;aren't repos public anyways
1366;github can see my repos even if i were to host them on gitlab
1367;I use Linux and mac
1368;yep vscode is in github.... lol
1369;no need to be scared of vscode telemetry
1370;I am looking forward to Rust when it gets faster prototyping
1371;Does it matter if i write```goif(test >= tests) { //do some stuff}```or if i write```goif test >= tests { //do some stuff}```or is this just personal preference?
1372;just personal preference
1373;but i prefer second way
1374;but gopher would do the second one
1375;yes
1376;I forget what's the interface that I should use for pluggable http clients? or do I just need to make my own?
1377;sencond way you are typing less characters in your code
1378;will make in simplier and clean
1379;fmt will fix it to the 2nd way anyways
1380;And people viewing this code think: Damn this guy knows how to code in go
1381;üòÇ
1382;its pretty hard to write things in the wrong style
1383;because go fmt catches 95% of them
1384;unless you go an write some snake case
1385;in which we will yell at you instead
1386;if you are usin liteide will does it wrong
1387;liteide doesn't use golint
1388;then don't use that :^)
1389;nor gofmt by default
1390;> then don't use that :^)@superloach i dont use
1391;and if you use notepad it doesnt either :bigthonk:
1392;true
1393;you will have to use by hand. Newer gophers will write code in wrong way
1394;None
1395;yep vscode is better option
1396;it would be pretty hard to find someone writing go in a nonstandard editor
1397;> it would be pretty hard to find someone writing go in a nonstandard editor@Madxmike these guys who use vscode are more experient programmers
1398;someone that is just looking the language will be in others %
1399;nah
1400;Goland
1401;Works best for me
1402;but you need to pay it
1403;@Madxmike `nano` user here :^)
1404;micro is the best option for term or vim
1405;interesting to see the trend switching from older to newer editors in that image
1406;I prefer micro. Very simple use
1407;I want to like micro but it's a bit slower than nano (especially over ssh) and I'm already comfortable with nano ü§∑\u200d‚ôÄÔ∏è
1408;https://microeditor.github.io/
1409;Are http requests also covered in the go tour?
1410;no afaik
1411;How I can delete a defer without a return/panic?
1412;?xy
1413;http://xyproblem.info/
1414;?
1415;what are you actually trying to do
1416;that you need to delete a defer
1417;I have some function that need to recover a panic but in a seperate way
1418;why are there panics in the first place
1419;üôÇ
1420;@Str≈ìm tbf panics are used to unroll things
1421;like in encoding/json
1422;errors
1423;yes
1424;ill unroll you
1425;pls do
1426;@minish i hope youre not using panics because you prefer exceptions
1427;can you post a small sample of what you are trying to do
1428;"``` buf := strings.Split(self.URL .com/"")[1] self.lang = strings.Split(buf /"")[0]```"
1429;this is an example
1430;if in the string there are not .com/
1431;please dont name things `self` or `this`
1432;"> if in the string there are not .com/""@minish then you should do a length check before indexing"
1433;then you wont get a panic
1434;^
1435;ok ok thanks i'm a python dev i'm trying to learn go
1436;youre probably used to exceptions right?
1437;in Go things are done a bit differently
1438;exceptions are rarely used only in exceptional circumstances
1439;ok thanks
1440;knew it was xy üòÜ
1441;im stumped with a bug and I dont even know how to explain it in a short way
1442;so some background for every tcp connection I have two goroutines one expects messages from a channel to send into the tcp connection (working as intended) one constantly tries to read messages from the tcp connection and puts them into a channel (not working as intended)
1443;"```gofunc (c Connection) receieveData() { go func(){ for { fmt.Println(""Recieving data"") packet err := readTCPPacket(c.conn); if err != nil { c.Errors < err c.stopTransmit < true fmt.Println(""error reading exiting"") return } fmt.Println(""data put in queue"") c.ReceiveQueue < packet select { case < c.stopRecieve: fmt.Println(""stopping recieve"") return } } }()}```"
1444;what stumps me is that recieving data prints only once it never loops a second time and the prints before the two returns never show up
1445;The select blocks
1446;Until stopReceive
1447;You need a `default` case
1448;aaah
1449;do I just leave a `pass`?
1450;continue
1451;You don't need to add anything to the default body
1452;Just and empty default case
1453;"wdym by the write""?"
1454;he deleted his message a ok it works now
1455;thanks dad
1456;~~dad~~ foather
1457;moather
1458;whos moather
1459;Yes
1460;ok
1461;How do you get functions from other files in go? I've just came from js and switched for better memory usage
1462;if theyre in the same package/folder theyre already available
1463;I've just written some funky code
1464;"```gofunc (c Client) WithUserSession(args ...interface{}) Client { const usage = WithUserSession() WithUserSession(userSession) WithUserSession(perms) WithUserSession(perms accessToken sessionSecretKey) or WithUserSession(sessionKey sessionSecretKey)""```"
1465;big strings
1466;true
1467;what is this
1468;ok.ru api
1469;small question is it bad practice to split up big strings on multiple line and concatenate them ?
1470;why do you have a usage string
1471;for panics
1472;just because it can happen in multiple places and I don't want to rewrite that
1473;?
1474;what panics
1475;"```go Description: fmt.Sprintf( This is the help for the Profile functionnality\\""+ Profile displays the profile of the concerned user.\""+ Use it like so :\""+ `%sprofile <@Gabrian>`\""+ (fields enclosed in <> are optionals)\""+ You can tag a user to see his list too"", conf.Prefix, ),```Is this bad ?"
1476;`panic(usage)` in 1arg if it's not a userSession or perms
1477;`panic(usage)` if it's not 0 1 3 or 2arg
1478;@Karitham not bad but also not really necessary imo with backtick strings
1479;maybe...have a different method for each type
1480;:robpike:
1481;yeah but then I wouldn't be able to use sprintf
1482;with backticks strings you cannot use the % flags
1483;or I miss something
1484;yes you can
1485;yeah you can?
1486;@Str≈ìm stinky
1487;lol what
1488;i'll retry but it didn't work when I tried
1489;you can't use \\\\ sequences but % sequences are fine
1490;oh
1491;maybe it's just my syntax highlighting that fucks up and I'm like okay it doesn't work
1492;I'm so dumb
1493;stinky is using panics with varargs interface{}
1494;fukin nasty
1495;meh
1496;today i will not use the type system :kkk_hmm:
1497;I want chaining so I can't return error
1498;then have a different method for each
1499;:pobrike:
1500;bruh
1501;Can I somehow use \\` inside ` strings ` ?
1502;None
1503;@Str≈ìm I realise I've overcomplicated this lol
1504;every time you use interface+panic for type systems a gopher is killed
1505;nice and clean now```gopackage okrutype Client struct { AppParams Bases UserSession Doer Doer}func New(appParams AppParams) Client { return &Client{ AppParams: appParams, }. WithBases(DefaultBases). WithUserSession(DefaultUserSession). WithDoer(DefaultDoer)}func (c Client) WithBases(bases Bases) Client { c.Bases = bases return c}func (c Client) WithUserSession(userSession UserSession) Client { c.UserSession = userSession return c}func (c Client) WithDoer(doer Doer) Client { c.Doer = doer return c}```
1506;Doer
1507;yes
1508;youre a doer
1509;```gotype Doer interface { Do(http.Request) (http.Response error)}var DefaultDoer = Doer(http.DefaultClient)```
1510;`HTTPDoer` might be more clear
1511;er would it be `HttpDoer`? I forget what the convention is on that
1512;nvm it's `HTTP`
1513;checked names in `net/http` lol
1514;HTTPRequester
1515;hm that's better
1516;no u
1517;shush
1518;I'm gonna be cursed and call it `HTTPer`
1519;gah I can't decide
1520;`HTTPClient` it is
1521;https://golang.org/pkg/net/http/#RoundTripper
1522;Different method name but same signature so you might get some inspiration :p
1523;Various solutions to import custom packages with Struct Interfaces and Methods... https://www.golangprograms.com/golangimportandexportstructpackagesandinterfaces.html
1524;sure
1525;i use ale to do that
1526;https://github.com/denseanalysis/ale
1527;yeah ale is pretty good at it
1528;also acceptable
1529;go is gud
1530;os.args waitgroup üò≥
1531;bruh git just failed to authenticate whAt
1532;sounds like you did it bad
1533;oh lmao I enabled 2fa
1534;mistake
1535;tbh yeah
1536;you don't want passphrases on your git keys
1537;I forgot why I stopped using it this is why
1538;MAYBE ssh keys
1539;DEFINITELY root keys/certs stuff used for actual deployments
1540;helloI don't really understand how to import local packages.My project would be used as an executable.Here is my project structure:```./main.go./my_project + foo.go + bar.go./otherfoldersthatshouldnotbeusedbyenduser``` foo.go and bar.go begins with `package my_project` main.go begins with `package main` then `import ./my_project`But when I try to go get this project it fails.Also is my project structure correct? Maybe main.go should be in my_project folder? I put it on root to avoid typing `go get mygitserver.com/myuser/myproject/myproject` instead `go get mygitserver.com/myuser/myproject`.
1541;?go modules
1542;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
1543;use modules
1544;"This is my code to solve a problem of Leetcode```gofunc kidsWithCandies(candies []int extraCandies int) []bool {  greatest := 0  for i := 0; i<len(candies); i++ { if(greatest < candies[i]) {greatest=candies[i]} }  var result = [len(candies)]bool for i:=0; i<len(candies); i++ { if(candies[i] + extraCandies >= greatest) result[i] = true //Why I can't assign true/false values in a boolean Array? Error on this line else result[i] = false }  return result}```This is someone else efficient code to solve the same problem```gofunc kidsWithCandies(candies []int extraCandies int) []bool { greatest := 0 res := make([]bool len(candies)) for _ v := range candies { //What is the use of _ identifier here? if v > greatest { greatest = v } } for i v := range candies { if v + extraCandies >= greatest { res[i] = true } } return res}```"
1545;_ just means ignore this
1546;because you cant have unused variables
1547;...yeah so the code is saying ignore the index and just use the value of the iterator.
1548;thanks and why can't I assign true and false to a boolean array inside a loop iteration?
1549;`var result = [len(candies)]bool` a couple lines before that is invalid syntax
1550;that code doesn't even reach type checking
1551;> `var result = [len(candies)]bool` a couple lines before that is invalid syntax@zephyrtronium oh okay thanks so that was the problem
1552;@zephyrtronium I changed the syntax to result := make([]bool len(candies)) but still the same error:Line 12: Char 87: syntax error: assignment result[i] = true used as value (solution.go)Line 22: Char 6: syntax error: unexpected __helper__ expecting ( (solution.go)
1553;@WeBareBears Not familiar with this challenge but this runs atleast...https://play.golang.org/p/84vcmo6QAYf
1554;if statements must have curlies `{}` but you can squash that into one line anyway.
1555;`result := make([]bool len(candies))` this is more correct than what I did üòâ
1556;@donoh Thankssssss The problem was in the Braces thanks I am really bad programmer. and I fixed it when I read the code in your link.
1557;LOL  so am I!
1558;@aosync nothing lol it's just a funny use case
1559;"progress on the ok.ru client lib :D```go&users.User{UID:""[REDACTED] Name:""Terra ‚ú®""}```"
1560;the apis are surprisingly well documented aside from translation issues
1561;In other languages I found that foreach is slower than for loop. Is it the same in Go?
1562;"what exactly do you mean by foreach and for loop""?"
1563;because go doesn't have something like `.ForEach((x) => /.../)` in js
1564;do you mean range?
1565;I mean the processing time not the algorithmic complexities because these are not related to foreach and for loop
1566;spoilers
1567;foreach IS a loop
1568;^
1569;and go doesn't have foreach it has normal and range for loops
1570;I mean someting like for _ v ?
1571;yeah that's range
1572;yesi mean the range loop
1573;so is there any speed difference because range loop is for each I think
1574;"```gofor i v := range s { /.../}```is approximately the same as ```gov := s[0]for i := 0; i < len(s); i++ { v = s[i] /.../}```(excepting 0len or nil slices)"
1575;so unless you don't need `v` they're identical as far as performance goes
1576;they technically are not the same on a slice of values
1577;since the value is copied into `v`
1578;ah right
1579;I found out on stackoverflow that range loop is faster but the difference is so low that it can be ignored.
1580;yes
1581;i mean i guess the difference could be significant if you had a slice of very large values where the copy was a large portion of the time
1582;but would need to benchmark that
1583;Yeah it could be.
1584;"Nested templating: Can I have to .gohtml files with identical defines in them? Example: templateA.gohtml: {{ define main }}templateB.gohtml: {{define main""}}I load these via .ParseGlob and cal one or the other with ExecuteTemplate but am getting unexpected results (templateB main when I call templateA). Am I misunderstanding how this works?"
1585;"BTW each calls {{template base""}} which includes a {{template main""}} section."
1586;> I found out on stackoverflow that range loop is faster but the difference is so low that it can be ignored.Youre worrying about nonissues
1587;@WeBareBears
1588;The speed of how 2 different loops happen is hardly a concern
1589;> The speed of how 2 different loops happen is hardly a concern@Str≈ìm Yes you are right As I am a newbie I am curious to know little things sometimes.
1590;Holy guacamole when would i defer a function?
1591;Whats the usecase of this `defer`?
1592;To defer execution of a function until a return or panic happens
1593;"abusing `goquerystring`\'s `Encoder` interface is pretty neat because you can effectively tag default values into a struct```gotype GetCurrentUser struct { method.Name `url:""users.getCurrentUser""` method.Format `url:""json""` Fields []string `url:""fields,comma""`}```"
1594;I have a very long if/if else/else. The conditions are random. Is there a better way to do this?
1595;switch/case could be better
1596;> conditions are random
1597;wut
1598;also switches are very nice
1599;```goswitch {case someCond:case someOtherCond:case condsAreFun:default:```much more readable than```goif someCond {} else if someOtherCond {} else if condsAreFun {} else {}```
1600;Huh I didn't know you could leave switch empty for a prettier if/else
1601;yep :)
1602;thanks :)
1603;no prob :)
1604;"Can I use `v ok := somemap[key]; ok` in a case statement?"
1605;I don't think so no.
1606;Okay I'll just move those exceptions into the default with an else if/else then
1607;can you not?
1608;hm apparently not
1609;:kek:
1610;> can you not?i read that as way sassier than it apparently was
1611;lol
1612;```gotest := 50 //created a variable with an integer value of 50pointer := &test // this created a pointer to the value of the test variablepointer = 49 // This changed the value of test?fmt.Println(test) // This should return 49 right?```
1613;And when would you do something like this? üòÇ
1614;when you wanna update the value that a variable is pointing at
1615;like you can pass `&test` to another function and modify it from there
1616;Wouldnt be it easier if you just write `test = 49` and done? XD
1617;Not in all scenarios
1618;What if i wanna change the value of a variable outside a function from within a function
1619;Thats not working
1620;Ok youre right
1621;Since when are you in the Gohper Herder? @Str≈ìm
1622;Few years
1623;Did Gopher personally invited you to the herder?
1624;üòÇ
1625;yes
1626;I herd the gophers
1627;üòÆ
1628;And the only reason to use pointers is to change some values?
1629;Or to avoid copies
1630;And maybe more reasons i cant remember right now
1631;Youre right
1632;awesome
1633;Thats pretty cool
1634;Didnt thought about it
1635;> And maybe more reasons i cant remember right nowI have to learn them all cause im new to go. (Nah not the game the language!)
1636;What is gopher doing there?
1637;He is watching me getting more and more go knowledge lmao
1638;strum is atleast the 10th best gopher herder here
1639;10th best?
1640;What kind of list is this?
1641;"> there is very rarely any particular need to use a value receiver; doing so mostly just lets you document that the value won't be modified by the method@zephyrtronium ty for explanation."
1642;@lieuwe_berg you can
1643;You declare a var bool set the ok to the bool and then switch case
1644;Thouhg idk if switch cases are better than if else always
1645;> strum is atleast the 10th best gopher herder here@Madxmike :KEKW: :peepoCri:
1646;dont tag me
1647;@Madxmike :robpike:
1648;solved
1649;https://blog.heroku.com/neitherselfnorthisreceiversingo
1650;hi i'm confused as to what this error means. https://img.spiral.li/1fau7wasp6.png
1651;i clearly do have a function body
1652;put () around your returns
1653;and its `error` not `err` for the return type
1654;oh
1655;right
1656;> `(Server).Close(&myServer) // same as myServer.Close()`I never knew this was a thing @Madxmike
1657;thanks
1658;someone with more knowledge than me could confirm but iirc methods are just turned into functions with the receiver as the first argument
1659;yeah I'm aware of that just never tried to actually use it like that
1660;https://golang.org/ref/spec#Method_expressions
1661;Also wrapping a singular method like marshal feels a bit much
1662;Just... call marshal on the object
1663;also you should call that `ToJSON()`
1664;Go's naming convention
1665;Hi there just wondering how I would order a slice of files (using `ioutil.ReadDir`) that look like this by time created: `2020_02_08_18_4735_create_test_table.down.sql` tried using `sort.Slice` but no avail
1666;sort.Slice should work
1667;slice of files
1668;Show us the money
1669;"do you mean slice of strings representing filenames""?"
1670;and yes
1671;sort.Slice will work
1672;if you do it right üôÉ
1673;Lol @deezy yeah thats the ticket
1674;just making sure
1675;So I have it working via Unix Time```sort.Slice(files func(i,j int) bool{ return files[i].ModTime().Unix() > files[j].ModTime().Unix() })```But this is by the mod time not by Year  Month  Day  Hour  Minute  Sec
1676;well yeah you care about the filename
1677;he meant sort.Slice by the filename string
1678;I think
1679;`return files[i].Name() > files[i].Name()`
1680;pretty much
1681;if you want a proper solution I'd recommend parsing the filename using a regex or sth
1682;you may or may not want to do
1683;but eh if it works it works
1684;parsing exactly
1685;time.Parse
1686;you may be able to just lexicographically sort them
1687;change the > to < as appropriate
1688;What if I told you
1689;https://golang.org/pkg/sort/#Strings
1690;that exists
1691;`files[i]` is probably of type `os.FileInfo`
1692;hence `.ModTime()`
1693;I'm pretty terrible at regex tbh
1694;Is it worth converting them back to time and sorting them that way?
1695;depends
1696;It seems to be working but probably not robust
1697;on how you actually want them sorted
1698;Earliest time (beginning of slice) created to latest (end of slice)
1699;and also if the filenames vary
1700;StringSlice just does `func (p StringSlice) Less(i j int) bool { return p[i] < p[j] }`
1701;That is if you want to sort by string
1702;so you can do that in sort.Slice as well on the filename
1703;> It seems to be working but probably not robusthonestly parsing is going to be roughly as fast/slow so if it works I'd say just leave it be
1704;File names will be: 2020_02_08_18_4748_create_test2_table.up.sql and down.sql so time and date are always different as well as the creating and drop table
1705;Ok great
1706;Thanks for the help as always much appreciated
1707;yeah this looks like a straigt up and down lxicographical sort
1708;yeah np
1709;no need to complicate
1710;Do i understand it correctly. This:```gotest := []int{1 2 3 4 5 6}```is the short for:```gotest := [6]int{1 2 3 4 5 6}```or is there a difference?
1711;the latter is an array not a slice
1712;arrays have static lengths
1713;Oh
1714;and arrays of different lengths are different types
1715;So the first one is a slice?
1716;And the second one an array?
1717;`[2]int` is NOT interchangable with `[]int` OR `[3]int`
1718;yeah first slice second array
1719;Ah ok thanks
1720;Go is pretty cool üôÇ
1721;I have to learn many new things XD
1722;The neat thing is once you learn the basic stuff the rest of it is just special cases
1723;Of the basic stuff
1724;you mean other arround or are they always special cases?
1725;Like this for instance
1726;This is a basic stuff?
1727;Never heard of slices in my life lol
1728;XD
1729;Basic to the language
1730;language primitives yes
1731;the basic building blocks of the language
1732;?go tour
1733;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
1734;the tour covers the language pretty thoroughly
1735;Im doing this tour rn
1736;slices are like vectors
1737;they have a length capacity and a pointer to a backing array
1738;Ah ok
1739;slices are dynamically allocated in memory and Arrays are static they are allocated in Stack
1740;slices have something like .length?
1741;not always the case
1742;that's up to Go's escape detector
1743;@Rovako yeah `len(slice)`
1744;which returns the internal `.len` field
1745;Ok
1746;@Rovako I am new to Go as well and found it very easy compared to other languages. It only has 25 keywords
1747;Im not at the point of the go tour with this len() yet. I will probably do the tour twice cause english isnt my native language XD
1748;slices are very similar in idea to things like vector or arraylist
1749;what's your native language?
1750;the go language specification document is about 35 to 40 pages
1751;i managed to read it over a lunch break
1752;Go Tour is translated to a lot of languages so yours might be there
1753;just with more arraylike syntax
1754;I wish someday I become a great programmer like you people
1755;> what's your native language?I know that its translated but idk if i did the tour on my language i wanted to know the english words so im doing it on english lol
1756;ok fair
1757;you can always do twice once in each language
1758;the language keywrods won't be translated
1759;just the surrounding explanations
1760;Tour is damm easy lol
1761;I know
1762;There are many interesting concepts in Go like Iota and Atoi
1763;@WeBareBears Since when do you count yourself as a gopher friend?
1764;> @WeBareBears Since when do you count yourself as a gopher friend?@Rovako what?
1765;but yeah also do both. you're gonna end up rereading the tour MANY times
1766;> but yeah also do both. you're gonna end up rereading the tour MANY times@deezy True
1767;You mentioned you recently started using go as a programming language
1768;> You mentioned you recently started using go as a programming language@Rovako I am learning Go so it means I am also using Go I think it sound fair enough to count myself in the Gophers community :gopher: üôÇ
1769;When did you started?
1770;read godoc too
1771;godoc is the ultimate tool
1772;I started 2 days ago
1773;or maybe 3
1774;I cannot do Go without godoc
1775;godoc is a tool isnt it?
1776;> When did you started?@Rovako do you have experience in any other language before?
1777;it's both
1778;both a tool and a website that hosts the tool
1779;> @Rovako #arikawa do you have experience in any other language before?Yes but in some other languages XD
1780;@Rovako oh okay well tbh the syntax is easy and writing basic programs like Reverse a Linked List etc are easy. The real thing is writing softwares in any langauge which I am unable to write everytime I try I just don't know what to do after reading some documentation.
1781;Im not even finished with the tour and im used to things that are in go different. But if i got the tour completed i should know everything to write my imaginations into code in go. We'll see
1782;Thats nice wish you good luck man. Do let me know if I can help you in writing any software.
1783;What software?
1784;I just need to learn how go works
1785;There is a difference between knowing language syntax and how to apply it to software architecture
1786;It's like the difference between knowing how to swing a hammer and how to build a house
1787;The Tour teaches you how to use the hammer
1788;And thats what i need
1789;Im not completely starting from scratch with programming.
1790;Maybe forgot some things but thats not that dangerous
1791;Also need to know when to use a sledge hammer or if you should get a small pick hammer
1792;I just need to learn how to use the tools that go gives me to create the things i already created with other tools.
1793;That describes it pretty well in my opinion
1794;"Apologies asking another question regarding above. I have a directory of sql files all of which have a corresponding .up.sql and .down.sql file Im returning a `[]map[string]string` which looks like this:```[ { created_at"": 2020_02_08_18_4735"", name"": 2020_02_08_18_4735_create_test_table"", path_down"": /migrations/2020_02_08_18_4735_create_test_table.down.sql"", path_up"": /migrations/2020_02_08_18_4735_create_test_table.up.sql"" }, { created_at"": 2020_02_08_18_4735"", name"": 2020_02_08_18_4735_create_test_table"", path_down"": /migrations/2020_02_08_18_4735_create_test_table.down.sql"", path_up"": /migrations/2020_02_08_18_4735_create_test_table.up.sql"" },``` My problem is that there is duplicates because Im appending to the slice on every iteration Im struggling to figure out an elegant way of adding to the slice elegantly ```var filesToMigrate []map[string]stringfor _ f := range files { fileName := f.Name() createdAt := fileName[0:18] name := m.getDBFileName(fileName) filesToMigrate = append(filesToMigrate map[string]string { created_at"": createdAt, name"": name, path_up"": m.migrationPath + / + name + .up.sql"", path_down"": m.migrationPath + / + name + .down.sql"", })}```"
1795;sorry not elegantly adding to the slice so there is no duplicates
1796;> prevent duplicates
1797;okay
1798;based on what propery of these files
1799;spoilers you're already using the exact thing you need
1800;Append?
1801;maps
1802;So I need maps of maps?
1803;sounds like it
1804;"it may be worthwhile to turn ```go{ created_at"": createdAt, name"": name, path_up"": m.migrationPath + / + name + .up.sql"", path_down"": m.migrationPath + / + name + .down.sql"", }``` into an actual struct"
1805;`[]map[string]string` to this > `[]map[string]string[string]string`
1806;also
1807;if only each file had a unqiue attribute
1808;yea make a struct
1809;also that
1810;yeah
1811;also you can just make another map
1812;`map[string]Migration`
1813;you don't need to cram it all into a single varaible
1814;created_at is unique I was thinking to create a key like that
1815;```gotype Migration struct { createdAt time.Time // etc etc}```
1816;i mean aren't the filenames also unique
1817;and more useful
1818;Ah st thank you that makes a ten tonne of sense
1819;So the map[UNIQUE(created_at)] ?
1820;i'd just use the full filename as the map key
1821;unless those aren't unique
1822;path_up and path_down are not unique basically one one struct of all the relevant files
1823;"> name"": 2020_02_08_18_4735_create_test_table"
1824;bruh
1825;are these nonunique as well
1826;True true
1827;You guys a legends thank you
1828;I think my stackoverflow rating would be 60000 without this channel
1829;"```govar filesToMigrate map[string]Migrationfor _ f := range files { fileName := f.Name() createdAt := fileName[0:18] name := m.getDBFileName(fileName) if _ ok := filesToMigrate[name]; !ok { filesToMigrate[name] = //Create Migration from data } }```"
1830;and then to get all the migrations as a list at the end```gomigrations := make([]Migration 0 len(filesToMigrate))for _ v := range filesToMigrate { migrations = append(migrations v)}return migrations```
1831;Thank you @Madxmike v much
1832;The last block thats adding to the map right?
1833;which
1834;the 2nd thing i posted is just to get the list of migrations as a slice
1835;since the map is just to prevent duplicates
1836;Ah I see what you mean
1837;hell actually you could just do it inline 1 sec
1838;I was using golangmigrate but didnt like it so thought I would test myself and make one
1839;"```gomigrationsFound := make(map[string]struct{})migrations := make([]Migration 0)for _ f := range files { fileName := f.Name() createdAt := fileName[0:18] name := m.getDBFileName(fileName) if _ ok := migrationsFound[name]; !ok { migrationsFound[name] = struct{}{} migrations = append(migrations <create migration object>) } }```"
1840;Amazing thank you @Madxmike very much appreciated.
1841;that will keep track of all the migrations and create the list at the same time
1842;not sure which one is more idomatic
1843;I am literally dying here.
1844;Can someone point me to the solution? https://github.com/hybridgroup/gocv/issues/716
1845;Hi~I'm suffeing a lot trying to make an assembly emulator (of a particular architecture) in Rust because of traits bounds and stuff like that.Is Go my saviour? I need to do build it to web assembly :c
1846;probably not
1847;Go could do something like that and target WASM I suppose
1848;I just need to switch between different numerical data types maybe an instance that runs the computer with integers of 8 bits words other with u8 words why not a i16 word? etc
1849;based on a config file
1850;Go is a general purpose programming language that can target WASM so it can definitely be applied to something like that
1851;i see
1852;is there a way to do that in go? (easy generics)
1853;i dont think its going to be necessarily easier or harder in go vs rust
1854;go doesnt have generics
1855;Go does not have generics
1856;oh :c
1857;any advice?
1858;for what part specifically? Supporting multiple word sizes in a VM?
1859;yep
1860;if you're going to use wasm why not use Rust?
1861;Go's wasm output is really big (as big as a desktop binary)
1862;i've being trying with rust but it's terrifying
1863;You can just multiply byte counts and address by your word size and just use bytes underneath
1864;read one byte for 8 bit words and read two bytes for 16 bit words
1865;dozens of lines specifying bounds for generics and then got a i can\'t found that method
1866;thats a #metoo moment
1867;hahah
1868;cant find that method means you calling a method on the wrong type my friend
1869;or you didnt bring the trait into scope
1870;None
1871;will the transpose func get called every time?
1872;no
1873;only once
1874;kk good
1875;as for the word type kinda hard tbh
1876;I'm thinking of using build flags
1877;```go// +build u8package thingtype Word uint8```
1878;so i have a 2d array representing a tic tac toe board and because the rendering has to be done with a transpoed matrix i transpose it in my render func however when taking input from the user i have to flip the i and j indices is there a cleaner way
1879;than what i have
1880;hey anyone who wants to be my partner in learning Go and maybe then working on some interesting projects on it?
1881;anyone who wants pm me
1882;what projects arey ou wokring on?
1883;what font is that? @fr3fou
1884;firacode
1885;ok i was planning on mapping a channel on a slice of channels to each go routine (i am carrying on from yesterday) but now I'm wondering how do i make a channel with a different name every time
1886;can i use sprintf when declaring variables  or something like it
1887;... channels aren't named
1888;?go tour
1889;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
1890;well the variable name
1891;actually no what am i talking about
1892;don't mind me
1893;:mike:
1894;in mysql do i always have to do rows.Close or does it depend?
1895;@_diamondburned_ my face exactly
1896;> Close closes the Rows preventing further enumeration. If Next is called and returns false and there are no further result sets the Rows are closed automatically and it will suffice to check the result of Err. Close is idempotent and does not affect the result of Err.
1897;what if sql throws an error :KM_Dorime:
1898;Doesn't hurt to just `defer` close it when you get a result
1899;Then rows is most likely nil
1900;It is a pointer after all
1901;defer close it after checking the error
1902;If I use a map does the original variable also need to be passed in
1903;ok now here is a question about defer does it only run if its hit because if an error or some condition isnt met will it run defer if the defer statement is after return
1904;now that i think about it the reverse nature of defer makes a bit more sense if thats the case
1905;:KM_Dorime:
1906;defer will run when the function returns
1907;what if the defer is after the return
1908;like
1909;returndefer
1910;actually run defer close after you checked the err that Query returns
1911;That isn't valid code
1912;you err check on Query and on Scan
1913;its close enough code
1914;doesnt have the be valid
1915;you get the point
1916;Only defer statements that are executed will run
1917;^
1918;```if false { defer something()}```
1919;that will never run
1920;`defer` add it to the list of things to run
1921;if `defer` doesn't get executed it won't run when the function returns
1922;ah got it
1923;"!go```go if false{ defer fmt.Println(""not executed"") }  defer fmt.Println(""executed"")```"
1924;None
1925;yeh i got it
1926;cool. They are executed in reverse order btw should that interest you
1927;yeah i knew that from the start this makes more sense as to why they do that tho
1928;cool beans
1929;have been doing go for like few months :KM_Dorime:
1930;> If I use a map does the original variable also need to be passed inanyone üòÖ
1931;?
1932;what does that even mean
1933;i think he means do you have to do like map[originalvalue]
1934;ok i'm confused rn
1935;i'll give an example
1936;that depends on what you do tbh
1937;```GOfor key value := range map1 { }```this iterates a map index becomes the key
1938;need to be passed in for what?
1939;what are you doing
1940;"```gopackage mainimport fmt""type Vertex struct { Lat Long float64}var m map[string]Vertexfunc main() { m = make(map[string]Vertex) a := Vertex{ 40.68433 74.39967, } m[""Bell Labs""] = a fmt.Println(m[""Bell Labs""])}```will m[""Bell Labs""] work if a is out of the scope"
1941;that will work
1942;:KM_Dorime:
1943;well wait
1944;if a is out of the scope how does it know what a is
1945;a has to be accessible when you set the value
1946;when you get the value from the map it doesnt matter
1947;it will work
1948;specifically in this case you're copying `a`'s value
1949;when main() fn is returned a gets destroyed but not the value in the map
1950;i mean let's say i passed in m into a function without a
1951;will it work
1952;yes
1953;as i said
1954;more specifically would it work if this is a map for a channel
1955;the values stored in the map has nothing to do with `a`
1956;slightly different w/ a channel but still yes
1957;when you store the channel inside the map Go knows that there are 2 references to the same channel
1958;the variable and the map's value
1959;when the variable gets destroyed the map's value persists
1960;so Go doesn't destroy the channel
1961;that's perfect
1962;thank you
1963;yw
1964;my explanation at the beginning was very bad
1965;So im converting this program i have made in python to check a bunch of usernames against the mojang api it is split up into 10 accounts at a time. With python I could just open up like 100 threads now I am learning golang and was wondering If i just have a queue struct`type AccountQueueItem struct { users []string}type AccountQueue struct { items []AccountQueueItem mux sync.Mutex}`and have it thread safe can i just open up 100 go routines and have it pop from the queue like I have done in python? Or is this bad practice and what should i be using for golang?
1966;It returns the account id username and legacy status i have the request working fine you guys had helped me a bit yesterday
1967;it's bad practice
1968;for what you're doing you'd want to use a single channel to distribute that job among workers
1969;which gives this pattern the name job workers
1970;worker pool
1971;etc
1972;w/e
1973;https://gobyexample.com/workerpools
1974;a channel is basically a threadsafe queue
1975;alright I will look into that thanks
1976;yea np
1977;is it reasonable to ignore errors from `json` package when you know for sure the only inputs are valid json?
1978;e.g. when you marshalled the data you're unmarshalling
1979;and nothing's happened to the `[]byte` since marshalling
1980;ig
1981;the linter will scream at you but whatever
1982;personally I'd panic
1983;"```gochannelList := make(map[string]chan string)a := make(chan string)channelList[""test""] = afor i _ := range channelList{ fmt.Println(i)}```"
1984;will `i` be test
1985;or will it be the index value
1986;`for key value := range map`
1987;seriously just
1988;?go tour
1989;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
1990;do this ^
1991;Android is linux right and web servers runs on linux/windows. Is it possible to convert an android phone hardware into a mini server?
1992;> `for key value := range map`i haven't used maps before thought it could be different
1993;yeah but they're also documented in the tour
1994;what can i convert []string into to compare two values i tried byte but it seems like you can't turn it into that using byte()
1995;into what
1996;oh
1997;any datatype i can use `!=` on
1998;wdym convert
1999;comparing is just a len check and looping
2000;is that all `!=` does ?
2001;wut
2002;you can't != a slice afaik
2003;not sure what you mean
2004;your original question is way too vague
2005;^
2006;ok i think i'll just make the slice into a long string and compare
2007;```gofunc stringsEqual(s1 s2 []string) bool { if len(s1) != len(s2) { return false } for i := range s1 { if s1[i] != s2[i] { return false } } return true}```
2008;i mean we could help
2009;but we need lik
2010;example input/output
2011;bare minimum
2012;^
2013;well i was just asking if there is an inbuilt function to compare slices
2014;but compare how
2015;check if they both have the same values
2016;there's an inbuilt function to compare literally everything lol
2017;compare their lengths? check if their contents are identical? check if they have ONLY common elements/ NO common elements?
2018;it's just not very elegant to use
2019;and return true and false
2020;there\'s a lot of ways to compare things
2021;^
2022;oh yeah i see what you mean ü§¶\u200d‚ôÇÔ∏è
2023;Okay so check if their contents are identical?
2024;yep
2025;use `sort.Strings()` and a for loop
2026;ez
2027;üëç i'll give that a go
2028;yeah just sort both slices loop over one and use the index to compare
2029;ALTHOUGH
2030;now i have to wonder
2031;"is`[]string{""foo foo bar}` equal to `[]{""foo bar""}`"
2032;by your rules/needs
2033;identical is still vague yeah
2034;does that include when s1 contains elements found in s2 but not necessarily the opposite?
2035;w/b string order?
2036;man
2037;programming was a mistake
2038;why didn't i go pro in esports
2039;ok gamer
2040;well stuff like that should not really be an issue
2041;like there's no wrong answer here
2042;it depends on what you're doing
2043;i'm just trying to help you clarify precisely what you care about
2044;so you can write code that does it right
2045;because i'm getting href values from `github.com/gocolly/colly` and appending them to a list to then compare later on
2046;but as you mention it
2047;it is an issue because just a tiny detail changes a lot of code
2048;welcome to programming
2049;it would be better if the amount of times a item occurs does not matter
2050;There\'s a difference between all elements in X occur in Y and each element of X occurs only ONCE in Y
2051;computers are dumb
2052;> it would be better if the amount of times a item occurs does not mattercould i not just sort it and remove duplicates
2053;okay so
2054;now that you say that
2055;> if the amount of times a item occurs does not matter
2056;this is where a map becomes useful
2057;`map[string]bool`
2058;now you can easily keep track of whether or not a string has occured
2059;so roughly
2060;<nitpick> `map[string]struct{}` </nitpick>
2061;bruh
2062;i really
2063;it's correct yes
2064;but then you have to explain why struct{} takes up zero bytes
2065;and that detracts from the ACTUAL point
2066;nah i'll just say taht it does
2067;explanation is the reader's exercise
2068;anyways
2069;huh
2070;i get this `map[string]bool`
2071;```govar things map[string]boolfor s _ := range slice1 { things[s] = true}for s _ := range slice2 { _ ok := things[s] if !ok { // the current slice member did not occur in the first slice } }```
2072;is this a template or something i am meant to do`map[string]struct{}`
2073;Alright so im planning on making a discord bot some data is not as important and doesnt need to be permanantely stored. I was thinking of using redis as keyvalue but whats the difference from just having a map in the program itself.
2074;see? struct{} just confuses the topic
2075;:AStaigaClap: might be more for offtopic
2076;(‚ïØ¬∞‚ñ°¬∞Ôºâ‚ïØÔ∏µ ‚îª‚îÅ‚îª
2077;json files
2078;ü§™
2079;@Riku stored in redis will make it survive a bot restart
2080;yeah thats the one thing i thought is a benefit but for the data im storing i have no idea if that matters :dorime:
2081;> ```go> var things map[string]bool> > for s _ := range slice1 {> things[s] = true> }> > for s _ := range slice2 {> _ ok := things[s]> if !ok {> // the current slice member did not occur in the first slice> } > }> ```ahhh yes i remember seeing something like this in the tour thanks for the example. i completely forgot about the `ok` part
2082;it's a super handy map feature!
2083;you can check for the existence of keys ( without panicking )
2084;so you have maps and sets
2085;in the mathematical sense
2086;because at that point i can just write a very small go http microservice to put and grab things from a mapless footprint than redis no?
2087;:PepeStudy:
2088;> less footprint than redis no?but obviously redis will have to be running on something. If it's on the same machine would it not take up quite a bit of resources (compared to just using maps in your code)
2089;or can you have multiple maps(key value store technically but sameshit) in redis
2090;redis lets you store more than one piece of data yes
2091;you may want to refer to the redis documentation
2092;> ```go> var things map[string]bool> > for s _ := range slice1 {> things[s] = true> }> > for s _ := range slice2 {> _ ok := things[s]> if !ok {> // the current slice member did not occur in the first slice> } > }> ```@deezy don't you mean `for _ s := range slice1 {` for the first & second loop (as the first one is the index value)
2093;you can technically do multiple maps w/ a single
2094;just prepend a prefix as a unique identifier for it
2095;probably
2096;which ever is correct
2097;there's only two possible choices
2098;so
2099;i'm sure you can figure it out
2100;yeah i have üòÅ
2101;but
2102;None
2103;why is it an unresolved reference when it's inside the for loop
2104;Not familar with unresolved reference
2105;also that's gonna panic w/ a nil dereference
2106;because `var things map[string]bool` is a nil map
2107;oh yeah my code was slightly wrong
2108;gdi
2109;i really hate that you have to use make() on maps
2110;oh yeah
2111;i can fix that
2112;maps slices and channels
2113;the red headed step children
2114;also i know why i got that issue
2115;i think i really am blind
2116;i just overwrote the variable so s is not going to be the discord session anymore
2117;> maps slices and channelsis there any reason you have to use make for them
2118;oh absolutely
2119;well what would that be
2120;absolutely incapable of explaining them
2121;it's something to do with how the runtime treats them as pseudopointers
2122;the runtime literally special cases them so their zero value is nil
2123;yea they're implicitly pointers
2124;like pointers
2125;so just like how `var t T` is a nil pointer
2126;but they aren't pointer types explicitly
2127;`var ch chan T` is also a nil pointer
2128;right
2129;oh I think I'm better off not knowing
2130;yeah
2131;just
2132;remember
2133;make() for channels maps and slices
2134;`var` will work everywhere else
2135;alright
2136;can i start a timer once i stpo it
2137;i stopped a timer and i wanna start it from its last position
2138;i'm gooing to assume no
2139;but also
2140;this is easily testable
2141;play.golang.org
2142;https://play.golang.org/p/3G2PAYtUJ7T something like this
2143;i'll leave finishing it as an exercise for the reader
2144;Speaking of testing many people in here working in QA roles?
2145;nope thank goodness
2146;would this be the right place to ask about configurations
2147;of a service?
2148;Is it possible to have a map of a map
2149;yes @tfyl
2150;I mean...how would you get the map with the key
2151;maps are just a certain type
2152;Wouldn't it take a map as a key
2153;Or are you talking about like a 2d map
2154;2d map
2155;Oh
2156;I guess
2157;everything is possible with the proper hash algorithm üòâ
2158;to start and stop a service would u recommend usign a cron job or a systemd timer
2159;or is there no functional diff
2160;What do you mean stop a service
2161;an ubuntu service
2162;Oh ü§¶\u200d‚ôÇÔ∏è
2163;I'd use a systemd timer
2164;But that's simply because I learnt it like that
2165;sounds good. would u know how to configured the service not to start on a start of an instance though
2166;i mean service is a heavily overloaded term
2167;does that mean  a process that needs to be running continously and is business critical or cron job that runs once a day any if it fails it will pick up the previous work just fine
2168;the service does the running of the program and upkeep
2169;but the cron job or systemd timer will start and stop the service when i scheduale it
2170;none of those are factually incorrect statements
2171;doesn't describe what you actually need tho
2172;ah sorry
2173;dont know how else tod escribe it
2174;ill try figuring it out with google
2175;quick question using gochi how would I go about passing my database pool to http.Handlers?
2176;not recommended
2177;you could use context like I have seen before though
2178;... how should I connect to my database then?
2179;generally I have seen this:
2180;I know how to use context I'm just trying to understand why I'm not supposed to do that in general
2181;```gopackage maintype deps struct { db sql.DB}func (d deps) Handler(w http.ResponseWriter r http.Request) {}```
2182;oh
2183;hmm
2184;This allows for even ease of testing your handlers
2185;Oh yeah that could work
2186;ie: you take a sql.DB interface as db and then you can mock it without probs
2187;makes sense
2188;ty
2189;yea np
2190;I was trying to use google translate on my app. Any examples i can refer to?
2191;I found this library http://cloud.google.com/go/translate/apiv3  but the examples doesnt seem to work.
2192;Anyone here working in QA? :PAre there any discords for people working in or kinda new to QA?
2193;is that golang related stuff?
2194;are you talking about Quality Assurance ?
2195;maybe #offtopic stuff
2196;Hi
2197;Is there a 3rd party package or something builtin for measuring function runtime duration?
2198;We want to profile our app (not web app)
2199;hmm. how can I have an optional return on a function (if there's an error return `nil err` but i can't do that because it's supposed to return a struct)
2200;@Deleted User you can return empty structs
2201;`NameOfStruct{}`
2202;right but then how do i check for an empty struct on the other end?
2203;@react0r yes it's called pprof
2204;and it's built in
2205;you can also use a simple time Now and subtract
2206;but profiling goes into much further details
2207;@Deleted User If there's an error the user should check for the existence of an error first. If there's not you can add a bool as a second return or return a pointer to the struct and have it be nil
2208;i'm doing something like this ```got err := getFromDb(something)if err != nil { RenderError(err) }if t == nil { RenderNotFound(something) }```
2209;i guess i could just add another return that i check to see if i got an answer
2210;I would say the idiomatic way to do that would be with typed errors
2211;```got err := gerFromDb(something)if errors.Is(err errNotFound) { RenderNotFound(something) }else if err != nil { RenderError(err) }// else use t```
2212;hmm okay
2213;thank you
2214;@Deleted User https://blog.golang.org/go1.13errors this might be of use
2215;i was reading a bit of that yesterday. it's kinda confusing considering all i've done with errors in Go is check if they exist
2216;@_diamondburned_ I heard about it  do you have example on how to use it ?
2217;https://blog.golang.org/pprof
2218;@Deleted User you can use https://github.com/pkg/errors to add some context to your errors. Much better in understanding where you application errors
2219;i'll take a look
2220;i also still can't figure out how to see if i got a database query result or not inside of my db function so aaaa
2221;i thought of checking the vars I scanned into to see if they were nil but you apparently can't do that
2222;actually i figured it out. cool
2223;what is vscode on about?
2224;first time trying vscode normally a vim user
2225;Think you have vscode badly setup or something
2226;Or you didnt save the file
2227;I've heard people have linting issues in vscode
2228;Also it didn't remove the unused import so it seems like tools aren't properly setup
2229;interesting i just downloaded the go plugin and clicked install to whatever ir prompted :l
2230;nah the unused import gets removed when i run that
2231;i just tested adding a print to see if it fixed it
2232;oh well i guess im sticking to vim then
2233;:vim: life
2234;its a lint bug. Also happens to me. I can solve closing the file and reopen it again.
2235;this kind of error is even more explicit reproduced using workspaces.
2236;I have a great time with vscode and go :)
2237;But it did take a while of tinkering
2238;I prefer vscode also.
2239;the only problem is that workspaces and go do not work flowless yet. There are some bugs.
2240;Hi guys ! I\'m using `gogit` lib to manage a local git repo is there any way I could hack the thing to make it work over an ssh session ?Like it would do the go equivalent of :```$ ssh user@host$ cd /var/www/webapp$ git pull```
2241;Vim is better anyway especially with cocgo and vimgo
2242;Why is it better
2243;I disagree
2244;They both still use gopls under the hood
2245;To each there own
2246;Vim isn't better because of CoC (or YCM) w/ go plugs  it's only preferentially better if you prefer vim's movement style
2247;it's the same language server for any editor anyways
2248;Hello wanted to ask a question I've come across this pattern a lot: `(os.PathError)(nil)` or `(T)(nil)` where `T` is a type. Anyone has an article on what it actually does or how it works? I've been trying to understand it but its escaping me.
2249;is it a form of type assertion on the type itself?
2250;Its often used to make sure that the type implements the interface
2251;`var x Interface = (Type)(nil)`
2252;Might see it at the top level of a file
2253;Yes I know this but I want to know how its achieving it. What makes it work üòÑ
2254;Interfaces underneath have two values underneath they are represented as [type value]
2255;Its a typed nil
2256;Because pointer types can be nil we're saying that this nil is of type Type
2257;hmmm I see
2258;Can I do something like: `(MyType)(int)` or `(MyType)(struct)` ?
2259;The interface has to have a value of type int in this case right?
2260;or struct?
2261;iirc its literally the same as something like
2262;int(foo)
2263;its just that your type is Type
2264;so you are coverting nil to Type
2265;> int(foo)@Madxmike OH! Bingo! üòÑ
2266;This is what I was looking for!
2267;dont take that as fact but seems right
2268;üëç
2269;one thing neat about go is all the stuff that looks wierd is usually just a specific case of a language primitive
2270;Yeah I am kinda trying to understand the gotchas of golang and how internally things work üòÑ fun stuff üòõ
2271;i find unless its some super specific implementation detail its usually on https://golang.org/ref/spec
2272;like all the slightly less super specific stuff is on there
2273;> https://golang.org/ref/spec#Conversion
2274;Seems you were right
2275;`(Point)(p) // p is converted to Point`
2276;Smooth brain power
2277;So basically what `(T)(nil)` does is converts `nil` to a typed `nil`.
2278;This also https://yourbasic.org/golang/gotchawhynilerrornotequalnil/ explains why
2279;Cool stuff üòÑ
2280;Hi there Im struggling to understand passing by pointer of value in go. I read a directory of files and want to sort them based on string name (to be a separate function)```func (m mig) sort(files []os.FileInfo up bool) []os.FileInfo { if up { sort.Slice(files func(i,j int) bool{ return files[i].Name() > files[i].Name() }) } else { sort.Slice(files func(i,j int) bool{ return files[i].Name() < files[i].Name() }) } return files}```Im calling it like this``` files err := ioutil.ReadDir(m.migrationPath) if err != nil { return nil err } files = m.sort(files true)```
2281;Im not sure if I should be putting a  or & somewhere!
2282;https://tour.golang.org/moretypes/1
2283;If I pass in `[]os.FileInfo` I get all sorts of errors in the sort.Slice function
2284;probably yes
2285;you generally don't use pointers to slices
2286;https://golang.org/pkg/sort/ try working off the examples in the documentation
2287;cause hey they don't have any pointers
2288;But if they dont have pointers `files = m.sort(files true)` why doesnt that work?!
2289;Apologies! Just a bit confused
2290;okay so
2291;how about
2292;we simplify
2293;https://play.golang.org/p/5y0x22l4OM7
2294;start here
2295;fill in some example filenames
2296;and sort the slice using the sort package
2297;this is troubleshooting 101
2298;isolate and simplify
2299;ignore FileInfo ignore the rest of your code. just write a piece of code that can correctly call sort.Slice
2300;and nothing else
2301;Ok @deezy thanks ill have a go in playground
2302;once you can sort a slice of strings you can extend your code a little bit. sort a slice of STRUCTS based on ONE member. then based off TWO
2303;https://play.golang.org/p/UKloN1nklu This is the thing im stuck on it just never changes
2304;You're not indexing properly
2305;return files[i] > files[i]
2306;breh
2307;You're only using `i` not `i` and `j`
2308;https://play.golang.org/p/KxgRlNQmor6
2309;My bad chaps
2310;Thank you
2311;admittedly `i` and `j` are nearly the worst possible variables to use next to each other
2312;hey guys do you know if golang has already got some kind of seekable buffer?
2313;you mean []byte?
2314;also `bytes.Buffer`
2315;@deezy yeah
2316;but you cannot just skip a section of it though
2317;is indexable in some capacity
2318;"Hello I\'ve got another braindamaging question why a pointer to a struct has the ability to modify an inner struct? ```gopackage mainimport ( fmt"" net/http"")type Counter struct { n struct { n int }}func (c Counter) ServeHTTP(w http.ResponseWriter r http.Request) { c.n.n++ _ err := fmt.Fprint(w c.n) if err != nil { panic(err) }}func main() { str := &Counter{ n: struct{ n int }{n: 0}, } if err := http.ListenAndServe("":8080 str); err != nil { panic(err) }}```"
2319;"what do you mean: Why you can edit n int""?"
2320;Yes.
2321;becase it's part of the object
2322;Since the pointer is ponting only at the memory of the first struct. Does it allow to modify the entire object?
2323;So the pointer cascades.
2324;You didnt change the inner struct
2325;Only a field of the inner struct
2326;The Counter struct still contains the same inner struct instance
2327;I see.
2328;The str variable still points to the same Counter struct that contains an inner struct instance
2329;> hi I have a beginner question:> if we have a struct type ane interface type for example consider we have type Heap struct{} and we want to create type Heap interface{} to determine the behavior but both have the same name what you guys do in this kind of situations how to chose a name for them??
2330;You never changed what inner struct instance it contains
2331;@mrsoftware often you add er to the interface name. But maybe here you should give the struct a better name
2332;Is it an array backed heap? A pointertree backed heap?
2333;@Str≈ìm gotcha!
2334;Thanks
2335;I'd describe the struct better
2336;https://golang.org/ref/spec#Selectors
2337;this one
2338;@Str≈ìm i try to implement simple Heap on array.
2339;`c.n.n++` is really `(c).n.n++`
2340;the compiler does the dereference for you
2341;> `c.n.n++` is really `(c).n.n++`@Madxmike Yep. Actually I was thinking that in terms of memory distribution the internal structs would be located elsewhere. But I now understand only in case they were pointer based.
2342;yes
2343;and even then the pointer itself would be in the same contiguous block of memory
2344;if you had like ```gotype Foo struct { a int b int}```
2345;I also tried ```type Counter struct { n struct { n int }}```But this becomes nuts on dereferencing üòÑ
2346;just be glad its automatic lol
2347;üòÖ
2348;`(c).(n).n = 5`
2349;Actually
2350;None
2351;üòÑ
2352;because you have a int
2353;not an int
2354;++ doesnt exist on int
2355;@mrsoftware then name the struct ArrayHeap
2356;you could derefence the last n there and it should work
2357;c.n.(n)++
2358;probably
2359;> `(c).(n).n = 5`@Madxmike This worked for me `(c.n.n)++`
2360;yeah
2361;so you get the value of c.n.n and dereference it
2362;its all in the spec somewhere
2363;Yes.
2364;> its all in the spec somewhere@Madxmike Ah the specs ‚ù§Ô∏è üòÑ
2365;haha
2366;i just have it bookmarked
2367;its very useful
2368;I have this https://kapeli.com/dash and Go as homepage and its fast on pulling anything from the api.
2369;Hi all quick question  which CI/CD systems are you using?
2370;@Str≈ìm thanks ‚ù§Ô∏è
2371;@Tri i use Drone for CI
2372;have used ArgoCD at previous work place for CD with Travis for CI
2373;is drone any good yet
2374;i've messed with it a bit in the past and found it really...let's say minimal
2375;works perfect for me
2376;can use any docker image for the steps and run commands in it
2377;or make your own plugins for preconfigured stuff just pass in settings
2378;http://plugins.drone.io/
2379;I've used drone to a degree for personal projects but I get the feeling it might be limited for full production deployment have you had any limitations or challenges with it that used more time than it should have with production builds @Str≈ìm ?
2380;no i dont see how its limiting
2381;https://github.com/Strum355/currentcostinflux/blob/master/.drone.yaml
2382;heres an example for a rust project compiling for multiple architectures and creating a Github Release
2383;that pfp is terrifying
2384;might have to spin drone up again
2385;@Madxmike its the biting pear of salamanca
2386;its an ancient meme
2387;2006
2388;its 2020
2389;we call them boomer memes now
2390;https://www.deviantart.com/ursulav/art/TheBitingPearofSalamanca29677500
2391;holy shit dude
2392;yea man
2393;real old stuff
2394;i remember discovering it on Xat first
2395;https://github.com/UCCNetsoc/Windlassworker/blob/master/.drone.yml
2396;heres an example for a Go docker project
2397;builds and pushes dev image prod image runs sourcegraph indexing and then gives discord notif on fail or success
2398;lol
2399;did someone start arguing about errors again
2400;Hi all üôÇ
2401;hello
2402;is there a reasonable way to only read from an `io.Reader` until a specific string is found?
2403;I know `ioutil.ReadAll` and `strings.Split` is way easier but it feels silly
2404;meh it's a onetime thing anyway not like performance is a concern
2405;im not sure about the stdlib but you could just wrap it in a custom reader that reads the bytes into a builder
2406;and checks if that builder is greater than the len of the wanted string if so reset the builder
2407;and then checks if the built string is the string
2408;woah pkg.go.dev got changed
2409;looks like shit with windows scrollbars but it's still cool
2410;wow
2411;definitely nicer than having to scroll to top for the index
2412;too much whitespace
2413;looks much more :POGGERS: on mobile
2414;poggers
2415;also a scanner might work here @Madxmike
2416;yeah
2417;use that
2418;thats a much better way of doing things
2419;@superloach single rune or an actual string?
2420;bufio has some reader funcs that accept a rune as a delimiter
2421;Wow these docs are much better on mobile
2422;actual string though I can do it by checking the contents of rune delimited
2423;@Str≈ìm thanks for the information earlier I'll take another look @ drone
2424;i mean also
2425;scanner exists
2426;"```gofunc worker(id int jobs <chan int results chan< int) { for j := range jobs { fmt.Println(""worker id started job j) time.Sleep(time.Second) fmt.Println(""worker id finished job j) results < j  2 }}```When I launch multiple goroutines and one of them reads a value from the buffered channel `jobs` that would mean no other goroutine can read the value anymore no?"
2427;yes
2428;so no data race at all
2429;thx
2430;Having started golang only a few weeks ago Ive just published my first packagehttps://github.com/ainsleyclark/golangsqlmigrateFeedback welcome and appreciated!Thank you @Str≈ìm @Madxmike @deezy for all your help
2431;congrats
2432;now it's time to rewrite
2433;run fmt :BabyRage:
2434;Sorry @Madxmike
2435;?
2436;run fmt on your package
2437;so it gets formatted
2438;How do I do that in goland?
2439;run `go fmt <your package path>`
2440;Nice didnt know that thanks
2441;Any other suggestions?
2442;eliminate the color dependency and allow a drop in logger
2443;How do I do that? Im not sure what you mean by drop in logger?
2444;you would store a logger struct in your migrate instance
2445;and allow the user to pass it in
2446;just like your db connection
2447;Do you have a demo up your sleeve @Madxmike havent seen loggers before tbh
2448;uhh no i actually dont
2449;look up the log package
2450;there is an interface in there
2451;called logger
2452;Ok great thanks
2453;you just accept that interface in your new instance function
2454;store it in your migrate
2455;and when you log out you just call that logger
2456;that way the end user can customize the logging how they want to
2457;Thats a v nice touch thanks
2458;"and you would replace all these instances ```go color.Red.Print(""Failure: ) fmt.Println(v.name) color.Red.Println(err)```"
2459;with something like `m.logger.Println(....)`
2460;or something
2461;you wont have the fancy coloring out of the box but it would be better
2462;More robust? Or so that your not relying on third party?
2463;yes
2464;Would I rid of verbose mode in that case?
2465;maybe?
2466;i dont know
2467;Ill see how it goes
2468;but then it would be really really easy for me to say
2469;hey i want to use this lib but i want to log its messages out with logrus
2470;Great thanks I know its not a beast like golangmigrate but it works which is the main thing.
2471;yeah
2472;True
2473;Common pratice to split my files up like that so migrate.go db.go & util.go?
2474;my migrate.go was massive
2475;yeah i split stuff into separate files all the time
2476;mostly because i'm sick of looking at it
2477;Hahaha thats exactly what I thought
2478;go fmt ./...
2479;missing another flag to write the changes
2480;how can i increase a slice length without using append?
2481;you can't?
2482;i'm talking the situation where i already have enough capacity
2483;@deezy i can't?
2484;pretty sure you can't
2485;append() is how you expand slices
2486;then is there a bytes.Buffer that can read n bytes?
2487;not dependant on the byte's slice size
2488;"```gopackage mainimport fmt""type person struct { fname string lname string}func (p person) Hello() { fmt.Println(""Hey  + p.fname + how are you man"")}func main() { p1 := person{ Robin"", Reevs"", } p1.person() //Why Person() function is not attached to p1?}```"
2489;I have commented the error
2490;yes
2491;where do you see a function/method called `person`?
2492;> where do you see a function/method called `person`?@Str≈ìm I have conncted the Hello Function to it
2493;oh dam my silly mistake the function name is Hello not Person
2494;correct
2495;by doing (p person) you are referring to a copy of person if i'm not wrong
2496;Yes I think so even Arrays are not passed by reference in Go
2497;slices are in a way pass by reference but not really
2498;> slices are in a way pass by reference but not really@Str≈ìm Slices are simply structs and have an underlying array
2499;slices are passed by referencce because I think they are created Dynamically in Heap and it is costly to pass a Slice by Value everytime?
2500;https://github.com/golang/go/blob/master/src/runtime/slice.go#L13
2501;the slice header is pass by value
2502;Arrays are crated in stack and so passing them without reference will not cost so much memeory difference
2503;slice is pass by value
2504;but the array data is a pointer in the slice itself
2505;@WeBareBears what i meant before is that is you try to modify any fields of the struct while using (p person) you'll be working on a copy
2506;> what i meant before is that is you try to modify any fields of the struct while using (p person) you'll be working on a copyand thats not necessarily a problem
2507;yeah yeah ofc üôÇ
2508;was just pointing out incase he was meaning to do the opposite
2509;as i wasted sometime on that bit aswell
2510;@luckcolors oh okayy wel structures don't have any default values. If I try to modify a struct I will be using pointer
2511;I don't know much of Go correct me if I am wrong
2512;I do that in C
2513;it comes down to what you want to achieve
2514;@WeBareBears for example take this library https://github.com/shopspring/decimal
2515;in this case they wanted to make it so a Decimal value was not modifiable for safeness
2516;so every operation they have defined always returns a copy
2517;but there are situations for example when you are working a big in ram map of values that you don't want that to happen
2518;and so you add the  like (p person)
2519;that way you always get a pointer to the same object instance
2520;same in c when working with files
2521;Yes right dealing with big stuff and passing copies all the times is really not good thing to do.
2522;I think this could be one of the reasons language without pointers are slower than the languages with pointers
2523;> Yes I think so even Arrays are not passed by reference in Go@WeBareBears only slices
2524;"Hi Need a help on implementing in memory cache data which will holds only ""key & data. Require for faster searching & optimising the CPU percentage. Any example or any implementation will be helpful.Thanks in Advance"
2525;map?
2526;map
2527;depends on what you mean by search
2528;just ate 2 packets of ramen and now im sweating any tips?
2529;> Hi Need a help on implementing in memory cache data which will holds only > key & data. Require for faster searching & optimising the CPU percentage. > Any example or any implementation will be helpful.> > Thanks in Advance@swadhin https://github.com/patrickmn/gocache
2530;i cant stop sweating
2531;from...ramen?
2532;@Deleted User #offtopic
2533;mike
2534;i think im dying
2535;deadass
2536;okay
2537;cool
2538;@swadhin requirement to implement it yourself or just wanting a good lib to do it?
2539;"> depends on what you mean by search""@Str≈ìm just key string & data uint8"
2540;just a map then sure
2541;map is the default one for that
2542;just use gocache friend
2543;it implements even timeout for caches
2544;they didnt say they want timeouts
2545;a map would be more type safe
2546;gocache uses interface{}
2547;type asserting all the time would be annoying also
2548;especially when you know your only going to have 1 type
2549;create your own data structure and algorithm :micdrop:
2550;> just use gocache friend@jcbritobr I checked it have lots of features using internally. and I do not have so much data hardly 500 keys.
2551;use a map
2552;`map[string]uint8`
2553;:robpike:
2554;literally
2555;just use
2556;> @jcbritobr I checked it have lots of features using internally. and I do not have so much data hardly 500 keys.@swadhin then a map is better
2557;a map
2558;Go with GO map
2559;map[string]uint8 yeah.. I am thinking that will be better.
2560;dont overcomplicate it
2561;a map is all you need
2562;Great.. sure I will go with it then.
2563;https://stackoverflow.com/questions/29677670/whatisthebigoperformanceofmapsingolang
2564;Thanks Guys.. A really helpful channel.
2565;> https://stackoverflow.com/questions/29677670/whatisthebigoperformanceofmapsingolang@WeBareBears all map read and assignments are o(n)
2566;it is indexed
2567;Yes
2568;read is O(1) not O(n)
2569;:robpike:
2570;its not even in golang but any language
2571;> read is O(1) not O(n)@Str≈ìm way better
2572;depends on the map
2573;treebacked map is O(logn)
2574;hashmap is O(1)
2575;O(logn) is also better than o(n)
2576;yes
2577;its very fast
2578;O(1) is the fastest lol
2579;yep
2580;Anybody used this before? <https://github.com/pion/dtls>
2581;If you have what does this feature mean? Packet loss and reordering is handled during handshaking
2582;"Hey guys any one familiar with gorm? I\'m trying to create relations for example:```type Version struct { ID uint `gorm:""primary_key""` Name string `gorm:""size: 255;not null""` Description string `gorm:""size: 255;not null""` // ex. This version includes special wheels etc. CarId uint `gorm:""foreignkey:carId""` Spec []Spec}``````type Car struct { ID uint `gorm:""primary_key""` Model string `gorm:""size:255;not null""` Version []Version ```and as I understand from gorm docs it should create foreign key in version table but it just creates a car_id field I tried adding `gorm:foreignkey:... but it seems like it\'s not the casem I\'m not a fan on assigning all foreign keys manually"
2583;I'm using gorm v1 but right now I saw gorm v2 I will try to migrate looks like most things are similar
2584;Any savage users familar with cobra? just trying to wrap my head around it:Is it possible to store sub commands in the same file? Or is it possible to group commands by directory such as``` something  something1master.go  something1child.go  something2child.go```
2585;shouldn't be any difference in that case since all files are in the same package
2586;have it as one file or split it into multiple
2587;the location of coimmands doesnt matter
2588;you have to register them manually
2589;i guess package visibility would matter
2590;but either way
2591;If run `cobra add test` and put it in a folder called `test` under `cmd` it doesn't recognise `cmd.rootCmd.AddCommand(testCmd)` which is probably what your talking about
2592;because you have to import the test package now
2593;Where?
2594;in the file you use it
2595;where ever you need it
2596;if said file is in a different package
2597;there is nothing particularly special going on in cobra
2598;it works just like normal go
2599;Sorry for the screenshot in advance
2600;add your command in your root instead
2601;Ahhhh
2602;penny dropped
2603;like wherever you register the root command
2604;import the subpackages
2605;and register them
2606;`rootCmd` isn't exported so you can't access it
2607;So I just make the testCmd TestCmd so I can use it wherever I like?
2608;Hello i have weird problem idk whats wrongSame bash in VSC:
2609;None
2610;Same bash without VSC:
2611;None
2612;first value in vsc is miss for no reason
2613;what is your code
2614;Whats vsc
2615;visual studio code
2616;> what is your code
2617;"```gopackage mainimport ( fmt"")func main(){ var SIZE int var NumberOfOne NumberOfTwo NumberOfThree NumberOfFour NumberOfFive NumberOfSix int = 0,0,0,0,0,0 fmt.Scanf(""%d &SIZE) table := make([]int SIZE) fmt.Printf(""You can put max: %d numbers \ SIZE) for i := 0; i < SIZE; i++ { fmt.Scanf(""%d &table[i]) }  fmt.Printf(""%v \ table) for j := 0; j < SIZE; j++{ if table[j] == 1{ NumberOfOne += 1 }else if table[j] == 2{ NumberOfTwo += 1 }else if table[j] == 3{ NumberOfThree += 1 }else if table[j] == 4{ NumberOfFour += 1 }else if table[j] == 5{ NumberOfFive += 1 }else if table[j] == 6{ NumberOfSix += 1 } } fmt.Printf(""%d %d %d %d %d %d NumberOfOne NumberOfTwo NumberOfThree NumberOfFour NumberOfFive NumberOfSix)}```"
2618;yandere dev elseif
2619;i know
2620;in linux and mingw64 console working perfectly
2621;vsc mingw64 console get cancer
2622;im gonna have it has to do with scanf being weird
2623;you should just use scanln and scanf the entire line imo
2624;im betting the vs code terminal interts some character somewhere there
2625;and scanf doesnt like it
2626;also don\'t do numberOfN
2627;use a slice
2628;`var numbers = make([]int 6)`
2629;then just do `numbers[j] += 1`
2630;man there are so many things you could say here about it
2631;im not even sure where to start
2632;?go tour
2633;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
2634;how about that
2635;the bot actually worked
2636;so scanln
2637;i know about slices
2638;but i am lazy tard
2639;i try scan ln
2640;if you were actually lazy you would write it correctly if you know the correct way
2641;yea the way i told you is faster to write
2642;because you end up spending more time fixing bad code than writing it
2643;üò¶
2644;Scanln crash my app
2645;bruh
2646;"```gopackage mainimport ( fmt"")func main(){ var SIZE int var NumberOfOne NumberOfTwo NumberOfThree NumberOfFour NumberOfFive NumberOfSix int = 0,0,0,0,0,0 fmt.Scanln(&SIZE) table := make([]int SIZE) //fmt.Printf(""You can put max: %d numbers \ SIZE) //for i := 0; i < SIZE; i++ { fmt.Scanln(&table) //}  //fmt.Printf(""%v \ table) fmt.Println(table) for j := 0; j < SIZE; j++{ if table[j] == 1{ NumberOfOne += 1 }else if table[j] == 2{ NumberOfTwo += 1 }else if table[j] == 3{ NumberOfThree += 1 }else if table[j] == 4{ NumberOfFour += 1 }else if table[j] == 5{ NumberOfFive += 1 }else if table[j] == 6{ NumberOfSix += 1 } } //fmt.Printf(""%d %d %d %d %d %d NumberOfOne NumberOfTwo NumberOfThree NumberOfFour NumberOfFive NumberOfSix) fmt.Println(NumberOfOne NumberOfTwo NumberOfThree NumberOfFour NumberOfFive NumberOfSix)}```"
2647;```fmt.Scanln(&SIZE)```
2648;in this line
2649;i put number and app crashed
2650;yeah size is an int
2651;scanln is for strings
2652;so i must back to scanf
2653;no
2654;you scan into a string
2655;then you do Sscanf
2656;or atoi
2657;strconv
2658;yup
2659;üò¶
2660;Uh I'm pretty sure you can `Scanln` directly into an int? Why would the function take an `interface{}` not a `string`?
2661;"```gopackage mainimport ( fmt"")func main() { var n int fmt.Scanln(&n) fmt.Println(n)}``````> 77```"
2662;go in windows bad
2663;hmm
2664;this code crash
2665;in windows
2666;lmao
2667;yeah maybe try not using vsc
2668;like try running from a cmd
2669;cmd is same i tested
2670;wack
2671;i must compile without vsc terminal
2672;you're not checking `err` on that scanln
2673;```gofunc Scanln(a ...interface{}) (n int err error)```
2674;you can elide `n` but check if there's an `err`
2675;ok i test
2676;windows bad
2677;ftfy
2678;hey this is probably more of a docker question than a Go question since it works without docker but i'm getting this error while trying to build a container for my project:`can't load package: package github.com/devkittens/midnight: found packages api (api.go) and bot (bot.go) in /build`
2679;after 10x compiles
2680;None
2681;oh
2682;https://tenor.com/view/thinkemojithonkmemegif11987870
2683;You keep saying ‚Äúit crashes‚Äù but don‚Äôt provide any sort of error message I‚Äôm not sure how we‚Äôre supposed to help off that
2684;i try save error to err var
2685;but interpreter says
2686;1 variable but 2 arguments
2687;I wasn‚Äôt even referring to the error returned by the function I just meant the crashes
2688;@Deleted User post your dockerfle
2689;But as @superloach pointed out the function returns two values the second of which is the error
2690;i fixed it
2691;i had `ADD ` instead of `ADD .`
2692;there no messages
2693;just i will compile with mingw64 and edit in vsc
2694;and its fine
2695;with scanf
2696;i would recommend going through the tour
2697;?go tour
2698;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
2699;how it can help me with vsc?
2700;because its obvious you dont understand some basic language constructs and are going to have a rough time
2701;It sounds like something is seriously messed up with your environment if you‚Äôre fully crashing a ‚Äúcrash‚Äù in Go is a panic which gives you a plethora of useful information
2702;having more knowledge of how the language works will help you fix that vsc bug
2703;ok but where i can see error message?
2704;"```gopackage mainimport ( fmt"")func main() { var n int _ err := fmt.Scanln(&n) if err != nil{ fmt.Println(err)  } fmt.Println(n)}```"
2705;this code working
2706;"```gopackage mainimport( fmt"")func main(){ var SIZE int var NumberOfOne NumberOfTwo NumberOfThree NumberOfFour NumberOfFive NumberOfSix int = 0,0,0,0,0,0 //fmt.Scanf(""%d &SIZE) _ err := fmt.Scanln(&SIZE) if err != nil{ fmt.Println(err)  } table := make([]int SIZE) //fmt.Printf(""You can put max: %d numbers \ SIZE) //for i := 0; i < SIZE; i++ { //fmt.Scanln(&table[i]) //} _ err1 := fmt.Scanln(&table) if err1 != nil{ fmt.Println(err1)  }  //fmt.Printf(""%v \ table) for j := 0; j < SIZE; j++{ if table[j] == 1{ NumberOfOne += 1 }else if table[j] == 2{ NumberOfTwo += 1 }else if table[j] == 3{ NumberOfThree += 1 }else if table[j] == 4{ NumberOfFour += 1 }else if table[j] == 5{ NumberOfFive += 1 }else if table[j] == 6{ NumberOfSix += 1 } } //fmt.Printf(""%d %d %d %d %d %d NumberOfOne NumberOfTwo NumberOfThree NumberOfFour NumberOfFive NumberOfSix) fmt.Println(NumberOfOne NumberOfTwo NumberOfThree NumberOfFour NumberOfFive NumberOfSix)}```"
2707;```go$ go run zadanko8.go6can't scan type: []int0 0 0 0 0 0```
2708;"but with this code:```gopackage mainimport ( fmt"")func main() { var n int _ err := fmt.Scanln(&n) if err != nil{ fmt.Println(err)  } fmt.Println(n)}```"
2709;working
2710;https://tenor.com/view/thinkemojithonkmemegif11987870
2711;@Madxmike
2712;you cant scan into a int[]
2713;the problem is literally what it says
2714;go do the tour
2715;?go learn
2716;Gopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Go by Example <https://gobyexample.com/>  SkippyA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  Skippy
2717;here are a bunch of resources to learn
2718;ok but same thing working
2719;in other code
2720;so?
2721;its not the same thing
2722;at all
2723;one is scanning into an int
2724;the other is scanning into a []int
2725;those are two completely different things
2726;so i must cast to []?
2727;@Madxmike ```go for i := range table{ fmt.Scanln(&table[i]) }```
2728;but its not working with spaces
2729;like
2730;``` 2 2 2 2 2 2 // bad``````222222// ok```
2731;Yeah
2732;Because spaces are not ints
2733;Also it‚Äôs scanning that entire line into a single slice entry
2734;Which doesn‚Äôt work
2735;so why printf working but this not?
2736;you are scanning a line not scanning characters separated by spaces
2737;maybe bufio will be good for that?
2738;you can scan a line and then split on a delimiter
2739;"`fmt.Scanf(""%d"")`?"
2740;im using scanf before sanln
2741;but scanf causes issues in vsc cmd and powershell
2742;but thanks you all
2743;"I just saw that there's 69 clones from 30 unique cloners on my trash project. I don't know who tf is actually using it but may god help them ;‚Äî;"
2744;Why doesn't flutter use Go? Would look much better IMO üòõ
2745;Who else thinks Dart is Java with a pinch of Javascript and all that dipped in poop sauce?
2746;https://tenor.com/view/stressedfacegif4425242
2747;go ask them
2748;I didnt get your question lol
2749;love me some family guy thouhg
2750;go is well suited for the problem task of highly concurrent applications
2751;dart is well suited for the problem task of building user interfaces
2752;almost none of Flutter's API would work in go
2753;anyone want to have a look at this code and help make it less spaghetti https://github.com/rbxb/httpfilter/blob/master/server.go#L95 specifically just the `parseFilter` function
2754;split space AND trimspace?
2755;use strings.Fields on this one
2756;I'd 100% just not assume this is ever nil
2757;and skip the check in general
2758;you're panicking anyway
2759;just ```gof := sv.ops[op]f(wr req vals[1:]...)```
2760;oh I didn't know strings.Fields existed I'll use it
2761;also the reusing slice is very bruh but i will not comment on that
2762;in fact i'd probably move it to the top
2763;just so the bottom looks cleaner
2764;reusing the vals slice?
2765;```go vals := make([]string 0) for _ line := range lines { vals = vals[:0] for _ word := range strings.Split(line  ) {```
2766;fuck
2767;oh yeah that's cleaner
2768;but yeah I'll probably just create a new one each loop so it's less confusing
2769;alright i made the changes and it's already looking a lot more readable
2770;btw
2771;https://golang.org/pkg/bytes/
2772;https://golang.org/pkg/bytes/#Fields
2773;may save some mem
2774;idk
2775;yeah i started to implement it by just going through the bytes but it was getting really messy
2776;dang bytes.Fields is cool
2777;where we're going we won't need strings üòé
2778;oh didn't know that bytes.Fields existed either
2779;yeah i'll use that
2780;well
2781;it returns a slice of slices of bytes so isn't that the same as strings.Fields?
2782;yea you're just bypassing the string conversions
2783;ah okay
2784;probably not a meaningful change in performance or anything
2785;returning a slice of subslices of s so would it copy into new arrays or return slices that are still based on the original array
2786;slice of slice of bytes
2787;the thing with byte slices is that you're copying the header only
2788;the backing array is the same
2789;yeah so that would save some memory
2790;with strings you're actually copying everything
2791;alright i made the changes
2792;pretty much the same just replaced strings with bytes
2793;> EqualFold reports whether s and t interpreted as UTF8 strings are equal under Unicode casefolding which is a more general form of caseinsensitivity. https://golang.org/pkg/strings/#EqualFoldwhat are examples of nonascii unicode casefolding?
2794;and why is it useful?
2795;there are some nonEnglish characters that have uppercase and lowercase counterparts
2796;that's when it'd be useful
2797;like this https://play.golang.org/p/eT5W9dGh3p6
2798;ah (√° √Å) is a good one
2799;Has anyone used awslambdago events? I'm trying to use the APIGatewayProxyIntegration but I can't figure out how to parse a JSON body passed in
2800;https://github.com/aws/awslambdago/blob/master/events/apigw.go
2801;be super careful with case sensitivity of non English languages because it can be locale dependent too
2802;e.g. in Turkish capital i is ƒ∞ and lowercase I is ƒ±
2803;"```GO for _ v := range roles { if menu ok := menus[v.messageID]; ok { menu.Roles = append(menu.Roles v) fmt.Println(menu) } }```"
2804;alright so
2805;when i print it out everything appears fine
2806;but the actual map is unnafected
2807;is it because it copies by value so i should rewrite to the key?
2808;yes
2809;unless menu is ptr
2810;is anyone familiar with goelasticsearch? i copied their bulk indexer example and i'm getting `Indexed [0] terms with [2] errors` but the OnFailure isn't being called
2811;here's my code: <https://gist.github.com/devkittens/7c3e728f555581886a06df6579a9d163>
2812;What is the correct way to parse from string to JSON?
2813;the answer almost 100% involves realizing that you actually have an io.Reader and using Encode/Decode
2814;From a method I am returning the response as string it's not in bytes.
2815;right
2816;but where does the string come from
2817;almost 100% sure it comes from bytes
2818;From bytes
2819;Yea
2820;there ya go
2821;strings are just an unnecessary middleman
2822;https://golang.org/pkg/encoding/json/#Unmarshal hey what do you know it takes bytes
2823;`func Unmarshal(data []byte v interface{}) error`
2824;it's very useful to realize that everything is bytes
2825;I already tried this let me share the code
2826;humans may have various ways of printing bytes out that make them more meaningful
2827;but it's always bytes
2828;always. period.
2829;Ok so after `Unmarshal` is there standard way to return in the API?
2830;wdym
2831;do you know what Unmarshal does
2832;I am just doing `fmt.Fprintf(w response)`
2833;`err := Unmarshal(b &targetStruct)`
2834;where b is []byte
2835;Yea so the second parameter will hold the JSON data.
2836;sure
2837;so
2838;call unmarshal
2839;and then return targetStruct
2840;as long as the error isn't nil
2841;you ARE checking your errors right?
2842;That's what I am asking what is the correct way to return the targetStruct?
2843;`return targetStruct`
2844;the same way you return literally everything else
2845;Ok
2846;returns are returns
2847;there's no special cases
2848;that's a lie. if you have named return values
2849;but yes just `return thingToReturn`
2850;But the method I am using for the API calls so it suppose to return the data with Status
2851;i don't know what that means
2852;I have created API which is just a method If I am not wrong and the method is suppose to return the response wuth success or failure
2853;I handled the failure part but in the success I need to return the data with status code 200
2854;Yeah that's normal. That's what `func foo() (something error)` is for
2855;Ok fine
2856;Then let me just try with `return`
2857;okay well how do i write an http 200 status code is entirely different from how do i decode json
2858;it's okay if those are all problems you're having
2859;but
2860;> but it's always bytes@deezy byte propaganda :Pyr right tho lol
2861;you're giving me a moving target
2862;we're all bytes dawg
2863;can't stop the signal man
2864;damn deep
2865;@deezy https://gist.github.com/aavrug/ff970ffc016c0b7377d8661a01da9185
2866;I was not returning anything so trying to do `fmt.Fprintf(w response)`
2867;okay so
2868;first off
2869;what is the biggest problem
2870;what is the FIRST error
2871;is it a syntax error or a runtime error or what
2872;spoilers: i know the answer
2873;If I am changing return of the `sendRequest` to a string then the `fmt.Fprintf(w response)` is printing the response just fine but in a string format with no error
2874;that's...not really what i asked
2875;but
2876;sendRequest doesn't seem to return an error which could be a problem. there's also super duper definitely at least ONE compiler error that'll stop this code from even running in the first place
2877;If I am using as a byte then this is what I am getting `cannot use dat (type map[string]interface {}) as type string in argument to fmt.Fprintf`
2878;yeah okay
2879;thank you
2880;cool so
2881;```map[string]interface{}string```
2882;you have two different types
2883;because
2884;they are different
2885;I have modified the code because not returning anything so let me share that
2886;anyways
2887;forget all of this code
2888;https://play.golang.org/
2889;whatever you're having trouble with focus on that
2890;if you're having trouble with json ignore http.
2891;Ok
2892;ALSO
2893;like i said you have this whole sendRequest() thing hidden
2894;so for all i know it's ignoring errors and just giving you garbage/empty data to json decode
2895;I can share the code but for reference If you want the return of sendRequest then it is something like ```[123 34 116 111 116 97 108 95 99 111 117 110 116 34 58 51 44 34 100 97 116 97 34 58 91 123 34 105 100 34 58 34 98 101 49 101 101 48 99 48 45 97 51 52 56 45 52 100 99 49 45 56 97 50 53 45 51 50 56 97 99 48 100 50 49 101 98 55 34 44 34 105 115 95 99 111 109 112 108 101 116 101 100 34 58 102 97 108 115 101 44 34 105 115 95 97 99 116 105 118 101 34 58 116 114 117 101 44 34 99 114 101 97 116 111 ....]```
2896;right those are bytes
2897;so that's a good sign
2898;a nonempty response i mean
2899;Yes I am always getting the response that I cross checked.
2900;Good good
2901;This bytes only I am trying to change into JSON
2902;I'm not trying to bust your balls. Just making sure that we start from the bottom up
2903;And have everything in order as we go
2904;No issue
2905;Right so
2906;now you have bytes in `resp`
2907;but none of the code you linked would generate the error you referenced
2908;so
2909;¬Ø\\_(„ÉÑ)_/¬Ø
2910;there's no Sprintf calls
2911;"And then I am trying to use the bytes like ```resp := sendRequest(w r)var dat map[string]interface{}if err := json.Unmarshal(resp &dat); err != nil { panic(err)}fmt.Println(dat)fmt.Fprintf(w dat)```"
2912;https://golang.org/pkg/fmt/#Fprintf
2913;> but none of the code you linked would generate the error you referenced@deezy I didn't get this
2914;check the docs for Fprintf
2915;it takes 3 ( or more ) arguments
2916;Ok let me see
2917;the second argument is a format string
2918;the THIRD ( plus ) arguments are the actual data to plug INTO the format string
2919;Not sure what's that mean but let me try to read the doc and understand
2920;So in my code `w` it the reference for the `w http.ResponseWriter` and the second argument is Unmarshal data.
2921;anyone familiar with pgx? i'm using pgxpool and i'm trying to figure out how to use it with scany
2922;```cannot use pool (type pgxpool.Pool) as type sqlscan.Querier in argument to sqlscan.Select: pgxpool.Pool does not implement sqlscan.Querier (missing QueryContext method)```
2923;which makes sense i guess
2924;oh i'm doing something completely wrong
2925;gg
2926;@deezy Is this correct?```var dat map[string]interface{}fmt.Fprintf(w string(resp) dat)```
2927;I am still getting string in the response not sure where I am doing the mistake.
2928;sb help me  i have error in golang protobuff build by gogofaster
2929;My file is in the same folder but still I am getting error. and It gets fixed when I put tpl.gohtml outside this folder. Why this works this strange?
2930;it's looking in the current working directory of your command prompt
2931;not in the directory of the file
2932;Are go variables localized within if statements?
2933;Yes
2934;ah
2935;yes its same in every language
2936;I don't feel like I've ran into that problem in PHP.
2937;What's the best option then make an empty variable then fill it within the `if` statement and check if it's filled afterwards?
2938;Uhu
2939;still you need some condition to enter the if to change that global empty variable
2940;Php is weird that way. All variables have function scope. Other languages have proper scoping
2941;"what about```goansiBytes := []byte{}if ctx.Bool(""stdin"") { ansiBytes err := ioutil.ReadAll(os.Stdin) if err != nil { log.Fatal(err) } fmt.Print(string(ansiBytes))} else { ansiBytes err := ioutil.ReadFile(ctx.Args().First())  if err != nil { log.Fatal(err) } fmt.Println(ctx.Args().First() : string(ansiBytes))}```"
2942;idek if `ansiBytes := []byte{}` is the right way to set a byte array to an empty value
2943;JavaScript also has function scope with `var`
2944;And i think python too
2945;Yeah there are a couple that do it
2946;C/C++ also has function scope with other options available as well
2947;"Hi trying to get passed this error im trying to loop over a struct: but getting `panic: reflect: NumField of nonstruct type env.Env` can anyone help?```func validate(env Env) error { typ := reflect.TypeOf(env) val := reflect.ValueOf(env) for i := 0; i < typ.NumField(); i++ { fieldValue := val.Field(i).Interface() fmt.Println(fieldValue) } return nil```"
2948;Any ideas?
2949;How to read the package on golang.org
2950;@Deleted User which package?
2951;https://godoc.org/golang.org/x/net/html
2952;ok?
2953;ok
2954;using ```go key err := rsa.GenerateKey(rand.Reader 2048) if err != nil { fmt.Println( err.Error()) } keybytes := x509.MarshalPKCS1PublicKey(&key.PublicKey)``` I end up with this
2955;but this aint right
2956;I need something like this
2957;So what kind of encryption is that?
2958;or am I doing something wrong?
2959;second should be PKCS#1 according to https://www.alvestrand.no/objectid/1.2.840.113549.1.1.1.html
2960;so what's up with first ü§î
2961;https://golang.org/src/crypto/x509/pkcs1.go#L167 by looking at code it might be missing important stuff
2962;since it only has the value it seems
2963;hello guys I currently read and write files in my golang app to `/var/files/` how should I think about opening this up for horizontal scaling?
2964;What do you do there
2965;so I will have an index to a file in a db like `10.0.0.3:/var/files/foo.txt` which will be added after writing the file instead of the current `f err := os.Open(fileStoreDirectory + filePath)` so filePath will become  `10.0.0.3:/var/files/foo.txt`
2966;but then how should I actually go about grabbing the file?
2967;so all my nodes will be `10.0.0.x`
2968;Maybe use an object store instead of filesystem?
2969;okay sweet
2970;Then it be host independent
2971;No need to put the ip in the db
2972;and host the object store on each node?
2973;Yea things like minio can be distributed
2974;or just have one node as the object store?
2975;Multiple
2976;If its only one it might as well be filesystem
2977;Go for clustered and replicated minio
2978;Or S3 if youre on AWS
2979;sweet
2980;on it
2981;thank you so much
2982;Np
2983;https://github.com/minio/miniogo
2984;Das the one
2985;Hi I asked this yesterday but still struggling with something with cobra.In cmd I have a package called test (which is a command) In test I have```func init() { cmd.Root.AddCommand(testCmd)}```But when I install it it doesnt show up it only shows up if I have it in the same package
2986;Any ideas? Been banging my head against the wall
2987;rclone seem to do it gracefully https://github.com/rclone/rclone/blob/master/cmd/about/about.go
2988;Anyone?
2989;> But when I install it it doesnt show up it only shows up if I have it in the same packagewut
2990;are you using modules?
2991;what would be the best/most efficient way to remove a string from a slice of strings.(index order not important)
2992;Yeah Im using modules @deezy
2993;@xblooos swap to the end and reslice one shorter
2994;you need to elaborate on the problem
2995;like
2996;an error message
2997;or something useful
2998;Ok one sec
2999;it isn\'t working doesn\'t convey any useful technical information
3000;my car isn\'t working what\'s wrong with it
3001;"This is test.go in /cmd/test/test.go```package testimport ( cms/cmd"" fmt"" github.com/spf13/cobra"")// testCmd represents the test commandvar testCmd = &cobra.Command{ Use: test"", Short: A brief description of your command"", Long: `A longer description that spans multiple lines and likely contains examples`, Run: func(cmd cobra.Command args []string) { fmt.Println(""test called"") },}func init() { cmd.Root.AddCommand(testCmd)}```When I run go install myproject then run cobra```Usage: myproject [flags]```It doesnt show up"
3002;In root.go /cmd/root.go If I add `Root.AddCommand(Testcmd)` it shows up because Im adding the command before executing.
3003;Basically I need the ability to add commands in separate packages in cobra and add them in their on init functions. Which Im aware is viable its just not picking up
3004;Does that make sense?
3005;whats the root command file
3006;"```// Root represents the base command when called without any subcommandsvar Root = &cobra.Command{ Use: myproject"", Short: A brief description of your application"", Long: `A longer description that spans multiple lines and likely contains`, DisableAutoGenTag: true, Run: func(cmd cobra.Command args []string) { },}// Execute adds all child commands to the root command and sets flags appropriately.// This is called by main.main(). It only needs to happen once to the Root.func Execute() { //Root.AddCommand(migrate.NewMigrateCmd(db)) if err := Root.Execute(); err != nil { fmt.Println(err) os.Exit(1) }}```"
3007;all the solutions seem
3008;length
3009;lengthy
3010;i wish there were a .remove like in python
3011;üò´
3012;@xblooos its 2 lines
3013;A swap and a slice
3014;Any ideas @Madxmike ?
3015;yeah import your sub command packages
3016;so the init is ran
3017;Import to root?
3018;https://github.com/therealfakemoot/genesis_retired2/blob/master/cmd/render.go
3019;this is how i did cobra
3020;If I do that ive got an import cyrcle
3021;the child command has an init() function that needs access to RootCmd
3022;so your child commands need to import whatever has RootCmd in it so they can register themselves
3023;so i would do a for loop and find the index at which the string is in the slice. then i would take that index and i would swap it to the end. and then i would relice it 1?
3024;the file structure they want doesnt allow that
3025;and yeah youre gonna have an import cycle
3026;@xblooos yes
3027;Im not sure I get it @deezy I was trying to avoid a huge massive folder in cmd because It will being unmaintable
3028;Im not sure where your calling your child commands
3029;Fair game so pretty stuck with having everything in cmd?
3030;so the solution is the one i said yesterday. import your commands into your root init and register them to your root there
3031;or create a function in the child packages to register
3032;`func Register(cmd cobra.Command)`
3033;^
3034;yeah
3035;and call that from the root
3036;and then the children call their children to register on them
3037;I tried doing the former and have a constructor to return a new command but because it was returning an unamed command I wasnt able to register children
3038;What would you Register look like? Would it be in the sub packages or root.go?
3039;"```govar Root = &cobra.Command{ Use: myproject"", Short: A brief description of your application"", Long: `A longer description that spans multiple lines and likely contains`, DisableAutoGenTag: true, Run: func(cmd cobra.Command args []string) { },}func init() { Root.AddCommand(&test.TestCmd)}```"
3040;this is what i mean by the former
3041;"```goimport ( fmt"")func main() { hey := []string{""hi"",""bye""} index := findingIndex(hey) fmt.Println(index)   }func findingIndex(xd []string)int{ for i,use := range xd{ if use == hi""{ return i }  } return nil} ```"
3042;how would i be able to return i if its there but if its not there
3043;return nothing
3044;Thanks @Madxmike & @deezy Ill ive it another go
3045;the register function would look exactly like that
3046;you would have it in the packages that need to be registered
3047;i am missing the part where an import cycle happens. The only reference to Root happens with AddCommand
3048;so i am not sure why the children can't just import Root
3049;because init has to be imported to be ran
3050;oh
3051;yeah
3052;init() bad
3053;so you have to import it in your cmd
3054;so the Root variable is valid
3055;yeah no i remember now
3056;So in root.go I would have what you said above ^
3057;it's been ages since i fucked with cobra
3058;and what would I put in the child commands? SOrry to be ignorant
3059;@Ainsley whatever file contains RootCmd needs to import all child commands
3060;that's all
3061;Root imports the child commands and calls AddCommand
3062;"But thats what Ive been doing?```import ( myproject/cmd"")``````func init() { fmt.Println(""TEST INIT"") cmd.Root.AddCommand(testCmd)}```"
3063;"```import ( test github.com/name/package/cmd/testCmd"")var Root = &cobra.Command{ Use: myproject"", Short: A brief description of your application"", Long: `A longer description that spans multiple lines and likely contains`, DisableAutoGenTag: true, Run: func(cmd cobra.Command args []string) { },}func init() { Root.AddCommand(&test.TestCmd)}```"
3064;^
3065;that
3066;then repeat for all the different Commands you create in whatever variety of subpackages exist
3067;Amazing
3068;If I have a child test command such as `test child` I would just add it in root.go? Or test.go?
3069;Presumably I need to use Root all the time?
3070;Yes
3071;Root is now where you register commands
3072;it's a tree
3073;so you can attach commands to Root
3074;and then you can attach commands to other nonroot commands
3075;Legends
3076;THANK YOU
3077;Seriously thank you 3 hours that took me lol
3078;@Str≈ìm have you setup minio in a swarm before?
3079;No
3080;damn
3081;in their docs they say to create 4 different services https://docs.min.io/docs/deployminioondockerswarm.html
3082;but why would you do that when you can just set deploy mode to global for example
3083;"```gopackage mainimport ( fmt"")func main() { car:= map[string]int { gta"": 1, Mario"": 2, Sonic"": 3, }  fmt.Println(car)}```Output:```map[Mario:2 Sonic:3 gta:1]```Map are unordered? I think Maps in go are designed for fast look up not for fast looping."
3084;correct
3085;:gopher: ok
3086;hey there fellow gophers I am having a hard time trying to create a go websocket server handling requests from a client written in react and sending back commands when needed. Can anyone in here help?
3087;only if you can describe the problem you're having
3088;Well yes sure sorry
3089;besides updated some Profile settings so please don't be irritated that the name and picture changed
3090;to clarify the joke: the general rule in these communities is don\'t ask to ask just ask
3091;hey can anyone help? just means it takes longer for anyone to get to the actual problem
3092;well got it sorry. Quite new to the community and discord in general
3093;no worries!
3094;not mad
3095;just offering some tips
3096;"I have this so far:```type message struct { Name string `json:""name""` Data interface{} `json:""data""`}var wsupgrader = websocket.Upgrader{ ReadBufferSize: 1024, WriteBufferSize: 1024, // Acceppt Any CheckOrigin: func(r http.Request) bool { return true },}// SocketHandler will handle the socket connectionsfunc SocketHandler() gin.HandlerFunc { return func(c gin.Context) { logger.Info(""Hitting the SocketHandler()"") conn err := wsupgrader.Upgrade(c.Writer c.Request nil) defer conn.Close() if err != nil { logger.Panicf(""Failed to upgrade ws: %+v\ err) } for { t msg err := conn.ReadMessage() if err != nil { break } logger.Infof(""t is: %+v t) logger.Infof(""msg is: %+v string(msg)) // Unmarshall json var message message json.Unmarshal([]byte(msg) &message) fmt.Println(message.Name) fmt.Println(message.Data) // Switch over possible commands switch message.Name { case createUser"": fmt.Println(""createUser hittinh"") default: fmt.Println(""no valid command"") } // Echo back to client conn.WriteMessage(t msg) // Echo done } }}```"
3097;Just one more question @deezy / @Madxmike apologies again!In a command that gets called for example `testCmd` it requires a `sql.DB` and an `environment struct` to get itself going.Ive been reading alot about `dependency injection` and well its just confusing but I understand its useful for testing.How would `testCmd` utilise the database and environment? I did have a constructor to pass it to it but seems as if Im getting a nil pointer so do you think there is any harm in having a global `db` global `env`?
3098;as you might see from the snip in the for loop I receive the message from the client and unmarshal it. Then print it's content to the console. I want to switch over a few given commands like (addThrow changeThrow createUser deleteUser ..) and make the server do different things.
3099;Problem number 1 it appears to me that my method of doing it with a `switch` is not really a good solution so I am looking for guidance on how to do that right. Also the data I receive differs and I seam not to be able to handle it right. Here come a few examples:
3100;"createUser:```[15:59:01][MAIN] : time=""20200804T15:59:01+02:00 level=info msg=""msg is: {\\""name\\"":\\""createUser\\"",\\""data\\"":{\\""data\\"":{\\""name\\"":\\""test\\"",\\""nickname\\"":\\""test\\"",\\""profileImg\\"":null,\\""imageName\\"":null,\\""mimetype\\"":null}}}""[15:59:01][MAIN] : createUser[15:59:01][MAIN] : map[data:map[imageName:<nil> mimetype:<nil> name:test nickname:test profileImg:<nil>]][15:59:01][MAIN] : createUser hittinh```"
3101;"deleteUser:```[15:59:09][MAIN] : time=""20200804T15:59:09+02:00 level=info msg=""t is: 1""[15:59:09][MAIN] : time=""20200804T15:59:09+02:00 level=info msg=""msg is: {\\""name\\"":\\""deleteUser\\"",\\""data\\"":{\\""data\\"":\\""1\\""}}""[15:59:09][MAIN] : deleteUser[15:59:09][MAIN] : map[data:1][15:59:09][MAIN] : no valid command```"
3102;"createGame:```[16:14:06][MAIN] : time=""20200804T16:14:06+02:00 level=info msg=""t is: 1""[16:14:06][MAIN] : time=""20200804T16:14:06+02:00 level=info msg=""msg is: {\\""name\\"":\\""createGame\\"",\\""data\\"":{\\""data\\"":{\\""players\\"":[\\""1\\"",\\""2\\""],\\""beginner\\"":\\""2\\"",\\""game\\"":\\""X01\\"",\\""variant\\"":\\""501\\"",\\""activePlayer\\"":\\""2\\"",\\""inGame\\"":\\""Straight\\"",\\""outGame\\"":\\""Double\\""}}}""[16:14:06][MAIN] : createGame[16:14:06][MAIN] : map[data:map[activePlayer:2 beginner:2 game:X01 inGame:Straight outGame:Double players:[1 2] variant:501]]```"
3103;See how the data differs in type everytime? I cannot wrap my head around how to handle that
3104;So how can I handle all this elegant?
3105;Does the data differ a lot ?
3106;Can't you make structs and set the unmarshalling var to each type with a switch ?
3107;you can
3108;If you know the type beforehand it works
3109;I now the structure of every request coming from the client as I designed them ^^
3110;"So if I define the struct like this:```type message struct { Name string `json:""name""` Data map[string]map[string]string `json:""data""`}```I happen to be able to get the correct input by using:``` fmt.Println(message.Data[""data""][""name""]) fmt.Println(message.Data[""data""][""nickname""])```later on"
3111;but this does only apply to the structure of createUser...
3112;"And it will partly work for createGame whereas for example the array of playerIDs participating in the game are not correct:```[16:23:57][MAIN] : time=""20200804T16:23:57+02:00 level=info msg=""t is: 1""[16:23:57][MAIN] : time=""20200804T16:23:57+02:00 level=info msg=""msg is: {\\""name\\"":\\""createGame\\"",\\""data\\"":{\\""data\\"":{\\""players\\"":[\\""1\\"",\\""2\\""],\\""beginner\\"":\\""2\\"",\\""game\\"":\\""X01\\"",\\""variant\\"":\\""501\\"",\\""activePlayer\\"":\\""2\\"",\\""inGame\\"":\\""Straight\\"",\\""outGame\\"":\\""Double\\""}}}""[16:23:57][MAIN] : createGame[16:23:57][MAIN] : map[activePlayer:2 beginner:2 game:X01 inGame:Straight outGame:Double players: variant:501][16:23:57][MAIN] : 2[16:23:57][MAIN] : X01[16:23:57][MAIN] : 501[16:23:57][MAIN] : no valid command```"
3113;```goswitch{ case type == userStruct: var toUnmardshal userStruct default:}json.Unmarshal(toUnmarshal)```
3114;Well you get the idea
3115;"In the line where there is a 2 (message.Data[""data""][""players""]) there should be [1 2] instead of just 2"
3116;hold it @Karitham no I do not get it.. Over which value are you switching? that looks really different to me
3117;I would need to define a message struct for every specific action right? I can live with that just fine
3118;Yes
3119;For each type of data you receive you make a struct
3120;so there would be```type createUserStruct struct {}...```
3121;okay
3122;Then unmarshal your data in a var of the correct type
3123;oh I get it
3124;You just have to know the type of the data you receive // have a way to find it out
3125;you define the variable and it's type switching over the message.Name case
3126;so if `message.Name` is `createUser` then I define `var toUnmarshal createUserStruct` or if `message.Name` is `deleteUser` I then define `var toUnmarshal deleteUserStruct`
3127;Well this appears to me like not good code at all ^^ How do professionals do that?
3128;Yes but actually no
3129;You have to unmarshall to get message.name don't you ?
3130;well yes s
3131;How would you unmarshall before getting message.name
3132;right
3133;Then you have a design problem
3134;I do in fact
3135;lol
3136;I can't design sorry
3137;okay I am coming from python backend with react frontend using socket.io which was handling that for me just fine. For whatever reason I switched the backend to go and am trying to implement what my python backend did before. So as socket.io generally sucks in go (I heard that the other day) I am trying to implement websockets my own way. Turns out implementing websockets in go sucks too it appears to me.
3138;damn.
3139;> websockets in go sucksare you using gorilla/websocket
3140;I do
3141;Am I doing this wrong too? Would not be surprised ...
3142;no
3143;its a great lib
3144;okay and am I handling my requests wrong? Do I implement this lib wrong?
3145;I might give you code snips to see if this is the case then
3146;"basically this is my routing (gin):```// Socket routesfunc Socket(cfg utils.Config r gin.Engine _ orm.ORM) error { r.GET(cfg.EndpointAndPath(""/ws"") handlers.SocketHandler()) return nil}```"
3147;and the handler you already saw above (the big snip I posted first)
3148;my client will use javascript (react app). If you need to see code from there I can paste too
3149;websockets in Go are just fine
3150;:boomer:
3151;basically you have some N number of different packets being sent over the websocket right
3152;and you need to unmarshal those into some type right?
3153;so you can do something with that data
3154;yes exactly
3155;do these packets have an identifier
3156;to tell you what the packet is
3157;I can get rid of a lot of the structure by altering the frontend calls I discovered
3158;this will not change though that before unmarshalling I cannot know what type of action is needed
3159;> do these packets have an identifier@Madxmike Like which identifier
3160;an identifier
3161;that way you can know what the packet you just recieved is
3162;"like a packet_type"": create"
3163;no not yet. Where would I integrate this with the frontend code?
3164;when you send the packet
3165;would it be helpful to paste my socket class?
3166;you add an identifier to it
3167;sure
3168;"```import { EventEmitter } from events';// Socket class to construct and provide methods for WebSocket connections.class Socket { constructor(ws = new WebSocket() ee = new EventEmitter()) { this.ws = ws; this.ee = ee; // attach message function as event listener for incoming websocket messages. ws.onmessage = this.message.bind(this); // attach open function tas event listener on websocket connections. ws.onopen = this.open.bind(this); // attache close function as listener on websocket disconnections. ws.onclose = this.close.bind(this); // attache error function as listener on websocket errors. ws.onerror = this.error.bind(this); } // on adds a function as an event consumer/listener. on(name fn) { this.ee.on(name fn); } // off removes a function as an event consumer/listener. off(name fn) { this.ee.removeListener(name fn); } // open handles a connection to a websocket. open() { this.ee.emit('connect'); } // close to handles a disconnection from a websocket. close() { this.ee.emit('disconnect'); } // error handles an error on a websocket. error(e) { console.log('websocket error:  e); } // emit sends a message on a websocket. emit(name data) { const message = JSON.stringify({ name data }); this.ws.send(message); } // message handles an incoming message and forwards it to an event listener. message(e) { try { const message = JSON.parse(e.data); this.ee.emit(message.name message.data); } catch (err) { this.ee.emit('error err); console.log(Date().toString() + :  err); } }}// TODO carve out websocket address later onlet ws = new WebSocket('ws://localhost:5000/ws');let socketClient = new Socket(ws);export { socketClient };```"
3169;so basically my commands to issue the `emit` function
3170;okay
3171;so the name
3172;"like so:``` socket.emit('createUser creationData);```"
3173;yes
3174;yes the name is within the message
3175;that would be an identifier
3176;it is `'createUser'` in this case
3177;because it allows you to identify the packet
3178;okay fine
3179;That
3180;can you post an example json that would be emitted on the websocket
3181;but that name I can only get by unmarshalling the msg
3182;hold on ill tell you how to fix that
3183;Like creating a user? sure!
3184;we gotta work there first
3185;"```[16:38:50][MAIN] : time=""20200804T16:38:50+02:00 level=info msg=""msg is: {\\""name\\"":\\""createUser\\"",\\""data\\"":{\\""name\\"":\\""test\\"",\\""nickname\\"":\\""test\\"",\\""profileImg\\"":null,\\""imageName\\"":null,\\""mimetype\\"":null}}""```"
3186;that is the raw msg recieved by the socket handler in go
3187;"so `{\\""name\\"":\\""createUser\\"",\\""data\\"":{\\""name\\"":\\""test\\"",\\""nickname\\"":\\""test\\"",\\""profileImg\\"":null,\\""imageName\\"":null,\\""mimetype\\"":null}} is the actual json correct`"
3188;thats sent across the websocket
3189;yes
3190;see this line: ` t msg err := conn.ReadMessage()`
3191;okay so one thing you may have been frustrated at is that go is not very good by design to handle abitrary data
3192;the msg is the message read by gorilla/websocket from the client. So I think that is what is coming through the actual websocket right?
3193;you have to define structures and types
3194;unlike something like python or js
3195;I got that already yes. But I do not fear structuring data then
3196;so lets define some types
3197;so to your point
3198;> but that name I can only get by unmarshalling the msg
3199;the only data we care about to start off with is the name
3200;so lets make a struct that can handle that
3201;exactly
3202;"```gotype Packet struct { name string `json:""name""`}```"
3203;but then the rest of the data is lost
3204;conviently the json package provides a way to handle that
3205;https://golang.org/pkg/encoding/json/#RawMessage
3206;this basically takes the remaining bytes of the json message and puts them into a variable
3207;oh I see
3208;"```gotype Packet struct { name string `json:""name""` data json.RawMessage}```"
3209;I was about to write exactly that
3210;^^
3211;and now you can unmarshal your data into this
3212;fun fact
3213;websocket provides a function exactly for this
3214;https://godoc.org/github.com/gorilla/websocket#Conn.ReadJSON
3215;so instead of ReadMessage
3216;you would have this
3217;```govar packet Packeterr := conn.ReadJson(&packet)if err != nil {  //handle the error here}```
3218;and now you have a working packet type
3219;with all your data
3220;thats step 1
3221;Well hold your horses good sir
3222;where would I insert that var packet snip?
3223;in my handler right?
3224;yes
3225;instead of read message
3226;let me try that then
3227;Nice so now when logging out packet.Name and string(packet.Data) I will get this:
3228;"```[16:54:14][MAIN] : time=""20200804T16:54:14+02:00 level=info msg=createUser[16:54:14][MAIN] : time=""20200804T16:54:14+02:00 level=info msg=""{\\""name\\"":\\""test\\"",\\""nickname\\"":\\""test\\"",\\""profileImg\\"":null,\\""imageName\\"":null,\\""mimetype\\"":null}""```"
3229;üëç
3230;okay so now what do we have
3231;So now I could switch over packet.Name and define different structs to handle different packet.Data
3232;yes
3233;I saw someone do it in a clean way I do not undestand though
3234;may I paste a link to a tutorial?
3235;and the cool thing is that you can just `json.Unmarshal(packe.Data createUser)`
3236;and have the create user struct filled with the data
3237;since json.RawMessage is just a []byte
3238;yes this is the reason I needed string() wrapper to log it out to console right?
3239;yes
3240;otherwise it just prints out the bytes
3241;Oh boy my learning curve is steep right now
3242;its okay
3243;dynamic languages were a mistake lol
3244;https://snassr.io/post/0002_goreactsockets/
3245;can you go and see what this dude did by defining a router (which will map a action name to a handler) at least this is what I understood by reading his code
3246;But I could not implement that (maybe too dump for it)
3247;uhh the router you will have to go look at gin for details on how to do it
3248;specifcially because you are using gin
3249;oh no you got me wrong there
3250;The router I already got straight
3251;I am talking about this. Let me paste something
3252;"```go// Router is a message routing object mapping events to function handlers.type Router struct { rules map[Event]Handler // rules maps events to functions.}// FindHandler implements a handler finding function for router.func (rt Router) FindHandler(event Event) (Handler bool) { handler found := rt.rules[""helloFromClient""] return handler found}// Handle is a function to add handlers to the router.func (rt Router) Handle(event Event handler Handler) { // store in to router rules rt.rules[event] = handler}```"
3253;If I am not mistaken he somehow does dispatch different packet.Name to different predefined handler
3254;ohh
3255;Is that just a way not to do switch case?
3256;that seems a bit extra
3257;heres the secret: it is just a big fancy switch
3258;I think if I would understand what he is doing it would be a nice and clean way to keep the different action handlers say in a handlers folder and just pull them in
3259;well lol
3260;okay
3261;so are you used to normal mvc type architecture
3262;So I might justt pull out the handlers to separate files and call them in a big switch case construct in my socket handler then
3263;No I am not a programmer by profession
3264;okay cool
3265;?go layout
3266;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
3267;read over this
3268;basically you split up things based on domain
3269;and the handlers are seperated by that domain boundary
3270;I think I did that following another tutorial
3271;what I would do
3272;is leverage gin
3273;and make this packet thing a middleware
3274;that determines which http handler to call
3275;see my tree view here: ```bash‚ùØ tree L 3.‚îú‚îÄ‚îÄ build‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ server‚îú‚îÄ‚îÄ cmd‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ server‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ config‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ main.go‚îú‚îÄ‚îÄ config.yml‚îú‚îÄ‚îÄ go.mod‚îú‚îÄ‚îÄ gopherboard.db‚îú‚îÄ‚îÄ go.sum‚îú‚îÄ‚îÄ gqlgen.yml‚îú‚îÄ‚îÄ internal‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ gql‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ generated.go‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ models‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ resolvers‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ schemas‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ handlers‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ game.go‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ gql.go‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ ping.go‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ socket.go‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ upload.go‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ logger‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ main.go‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ orm‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ main.go‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ models‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ server‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ main.go‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ router.go‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ routes‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ utils‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ types.go‚îú‚îÄ‚îÄ scripts‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ build.sh‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ gqlgen.sh‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ run.sh```
3276;nope this is mvc you got there
3277;oh so you are not talking about folder structure and how to structire your packages?
3278;folder structur and package structure are the same thing logically in go
3279;more or less
3280;well yes you are right
3281;are you there another few minutes
3282;yes
3283;I will have to transfer from work to home
3284;ok
3285;i can be back in about 20 mins or such
3286;thanks buddy you helped me out really good so far
3287;i try
3288;appreciate it
3289;this is also why i dislike tutorials because they incorpate all this shit like gql and gin and everything else
3290;just build the thing out using the std like a good gopher
3291;lol
3292;Yeah what is up with that?
3293;All tutorials throwing random dependencies around
3294;well its impossible to build a server without an orm sgt
3295;dont you know
3296;ow jeez I sure need that for my static api
3297;i can understand the one off libraries that do a specific thing really well
3298;like websocket
3299;yeah websocket is acceptable
3300;im suprised the tutorials hes following hasnt made him setup docker too
3301;x/net/websocket isn't as nice
3302;actuall the real question here
3303;why is he being told to use websockets for things that can easily be http events
3304;Didn't read the rest of the chat
3305;like why is createUser coming over a websocket
3306;jesus
3307;"`{\\""name\\"":\\""test\\"",\\""nickname\\"":\\""test\\"",\\""profileImg\\"":null,\\""imageName\\"":null,\\""mimetype\\"":null}""` this is the data hes getting over ws basically"
3308;and im going to assume he is just going to be told to create a user with this
3309;and do normal things
3310;ughh this has turned into a giant xy problem
3311;doing RPC over websocket makes thing 1000 times more complicated than needed
3312;websocket nice for receiving events instead of long polling
3313;it looks like its some game server
3314;so i think thats what the websocket stuff is for
3315;but the data being shown so far thats being sent over the websocket is not things that should be
3316;> this is also why i dislike tutorials because they incorpate all this shit like gql and gin and everything else@Madxmike What do you mean by gql and gin?
3317;the libraries graphql and gin
3318;Tutorials teaching these should be avoided?
3319;unless you are specifically looking for how to incorporate them yes
3320;because you get too tied up in using those specific libs
3321;and now how to actually solve the problem
3322;the stdlib is very good for 90% of your normal webserver things
3323;I am new to software dev already wasted alot of time using frameworks like Express and many npm packages. I just don't like to build up my foundation with such huge abstraction
3324;so I switched to Go and its really nice working with std lib here only
3325;like lets just pretend the thing you are building is a simple game server with some live websocket functionality
3326;the list of dependencies you need for that are:gorilla/websocketgorilla/mux or gochi maybe
3327;and yeah
3328;thats about it
3329;gorilla is a standard package?
3330;but these tutorials want you to have an entire graphql system for some reason
3331;its not
3332;but its very good
3333;gorilla/websocket in particular is basically the defacto websocket lib
3334;Thats good then keeping the dependence on external sources to very minimal is the best thing while developing anything
3335;nice conversation going on here üòÑ
3336;yep
3337;It is in fact a game server handling a good ol game of darts (throwing darts at a board)
3338;So basically it will host an api which my automated darts machine can handle (or the camera detection I am working on also in go with gocv)
3339;If you are curious how this might look you can see my old dev status (working example) here: https://www.youtube.com/watch?v=cbdSK9wNLu8&t=49s
3340;thats pretty neat
3341;This is my old darts project which I am rewriting right now to a modern ui (react) and a better backend (go :P)
3342;https://github.com/patrickhener/dartomat3000
3343;https://github.com/patrickhener/dARts
3344;The websockets are meant to handle the complete game state update and such. I did use socket.io in python before to have this kind of live updates. I was told to use websocket implementation directly in go as socket.io is not good
3345;So here I am trying to get rid of socket.io by implementing my own handlers in go for websocket events üòÑ
3346;so the thing i was trying to point out
3347;is that a lot of your data that does not need to be streamed
3348;can be just simple http events
3349;POST GET etc
3350;like say creating a new user
3351;you can just have an endpoint
3352;say `https://mywebsite.com/api/user`
3353;and you can just post your user data to that end point
3354;@JohnnyTheSmith Thats game video is yours?
3355;@WeBareBears yes live demo of my old setup. I did record that in my dart room right
3356;Thats really nice. You are reinventing it in Go now?
3357;Okay I get you. I was just pulling in graphql as it will be easier to transfer big data junks to my scoreboard application. In the application there is not more than one query to get the game and all the associated data. So when something changes in the game (for example a dart gets thrown to the board GET /throw/20/1 > single 20) then the scoreboard will refetch the data and represent it
3358;sure
3359;but why cant you just send a json response from a http handler
3360;@WeBareBears Yes I do. Backend service will be a go app (this will also be easier for me to release) Frontend will be written in react and might be included and served by go as well to have a single application then.
3361;Our statement was just about beginner tutorials in general. using graphql and stuff is perfectly valid and so is doing rpc over a websocket
3362;I sure can (I just don't know how)
3363;yeah
3364;Well yes you are right
3365;You know the reason why I decided to use go?
3366;I love how it is just playin simple (if you get what you are doing)
3367;So I guess I cannot let go of languages like python where you just pull in a framework you need when you need it
3368;its a bit of a mindshift
3369;It is indeed
3370;especially if you have dealt in the js world
3371;I am also new to react and I am surprised how good a ui can be written. I think it is beautiful (but contrary to go I know)
3372;Make sure your program don't encounter any bugs throwing darts could be dangerous.
3373;the general meme of go is that dependencies should only be added when needed to do a specific thing
3374;but that is a bit of a meme so theres nothing wrong with adding things
3375;you should just know why you are doing it
3376;but either way
3377;if you already have all the stuff setup for it
3378;then go for it
3379;i would really recommend the next project you do try and explore the stdlib
3380;batteries included is the phrase i keep forgetting with it
3381;well okay. I might strip down to just using gin and websocket and not using graphql then
3382;that might be no big deal in react and also will strip down my code tremendously
3383;thats up to you
3384;as sgt said there is nothing wrong with using those things
3385;boilerplate for using graphql with apollo in js is really big
3386;but yeah it adds a lot of complexity
3387;well I might then as well stick to it as I already got it up and running ^^
3388;So you were talking about making the packet thing a middelware to gin to dispatch to certain actions when hitting a websocket request.
3389;that sounds about a good design. So how would I approach this?
3390;uhh you would have to lookup gin middleware
3391;ive never have found a need for gin so i have never used it
3392;basic idea is that you have some set http handlers
3393;and the packet parsing middleware infront of them
3394;and the middleware parses the packet and then sends it down to the correct handler in the context
3395;along with your ws conn
3396;it may not be the 100% best solution but its what came up in my head
3397;That might replace the big switch case then right?
3398;no
3399;idk i havent thought through it 100%
3400;So if I understand gin right (hovering over the docs) a middleware is nothing else than a function I define and then plug it between the path and the handler of a route definition
3401;What's going on here üëÅÔ∏è
3402;I will try that by printing something to the console everytime a ws call will be there. let me try that
3403;yeah basically
3404;thinking through it may not be the thing you want
3405;since you already have the ws established you probably just want to define some functions to handle each packet type correctly
3406;That would mean that I use switch case and dispatch to different functions then?
3407;yeah
3408;you're not going to get around some type of switch here with how this data is being handled
3409;a map[string]handler is basically the same thing as a switch in this case but youre hiding it behind a map
3410;and all your functions would need to have the same signiture
3411;which is annoying
3412;because they are not handling the same type of data
3413;so I just define my structs and do a big switch then in the main handler of the connection. that sounds about reasonable and doable for me
3414;"```go// Middlewarefunc myTestMiddleware() gin.HandlerFunc { return func(c gin.Context) { fmt.Println(""This is a test from Middleware"") }}// Socket routesfunc Socket(cfg utils.Config r gin.Engine _ orm.ORM) error { r.GET(cfg.EndpointAndPath(""/ws"") myTestMiddleware() handlers.SocketHandler()) return nil}```"
3415;"```bash[17:56:05][MAIN] : [GINdebug] POST /gameState/:id > github.com/patrickhener/domNG/server/internal/handlers.GameState.func1 (4 handlers)[17:56:05][MAIN] : [GINdebug] Listening and serving HTTP on :5000[17:56:58][MAIN] : This is a test from Middleware[17:57:02][MAIN] : [GIN] 2020/08/04  17:57:02 | 200 | 3.832708524s | ::1 | GET /ws""[17:57:02][MAIN] : This is a test from Middleware[17:57:03][MAIN] : [GIN] 2020/08/04  17:57:03 | 204 | 25.648¬µs | ::1 | OPTIONS /graphql""[17:57:03][MAIN] : [GIN] 2020/08/04  17:57:03 | 200 | 6.680847ms | ::1 | POST /graphql""```"
3416;this middleware is doing it's work ^^
3417;yeah
3418;even though this might not be what I need it just works. nice
3419;the middleware is useful for stuff you want to do with every request before getting to the handler
3420;well I will remember that. There might be a case where I can use this again
3421;But there it does not make any sense at all^^
3422;like you may have a authed middleware that checks if the user is authorized to access that endpoint
3423;or something
3424;How do I handle a multipart upload of a profile image?
3425;let my see how I did it in python first
3426;```pythondef create_user(data): player_name = data['data']['name'] player_nickname = data['data']['nickname'] player_profileImg = data['data']['profileImg'] if data['data']['profileImg']: player_image_name = data['data']['imageName'] player_image_mime = data['data']['mimetype'] else: player_image_name = None player_image_mime = None # Create Player new_player = PlayerModel( name=player_name nickname=player_nickname in_game=False) db_session.add(new_player) db_session.commit() # Get created player from DB created_player = db_session.query( PlayerModel).order_by(PlayerModel.id.desc()).first() # Create Image upload_image(created_player.id player_profileImg, player_image_mime player_image_name)```
3427;This is the create_user function which handled the data passed through the websocket
3428;I did create the user in database
3429;i mean you would just end up sending the image over the websocket i guess
3430;its all just bytes in the end
3431;and with the user created I created a new image with the id of the user as foreign key to the image
3432;Looks like I did exactly that in python too
3433;was the python one recieving the image data in the ws
3434;at the same time
3435;"```def upload_image(player_id file mimetype name): if not file: return create_fake_image(player_id) if allowed_file(name): original_extension = name.rsplit(\'.\ 1)[1].lower() filename = f\'{uuid.uuid4()}.{original_extension}\' write_file = open(os.path.join(upload_folder filename) wb"") write_file.write(file) write_file.close() gql_create_image( player_id f\'/uploads/{filename}\ filename mimetype) return f""Image {filename} was saved successfully"" return Something went wrong uploading the image""```"
3436;well to me it looks like the image was in the json data through the websocket yes
3437;if you were already doing that then it probably would be fine
3438;I did a trick where the player will get a random image out of 10 (animals) when no image was passed
3439;nice
3440;so I just need to find out how to handle the byte array sent through ws and write it to disk again
3441;websocket is just a protocol of how to transfer data
3442;it shouldnt change depending on your language
3443;unless someone isnt implementing it correctly
3444;again you normaly would just do this over a http request
3445;well okay fine. I can handle this
3446;Another big thing bugging me (already in python) is how to handle changes of false throws
3447;Idk image.Image may decode properly with through the json decoder
3448;so you throw a dart at the machine and it will say it is a single 20 when in reality it was a single 5
3449;I did write a overly complicated change routine for this game. What I would love would be a undo button (transaction undoing in the database)
3450;Just have some manual way of updating it I guess
3451;well at the frontend I will just select the throw and change it
3452;it will then send the throw to the api /updateThrow/throwId/newNumber/newModifier
3453;but depending on game a change will be massive
3454;if you take cricket for instance. this game you will need to hit 1520 and 25 3 times
3455;everytime you hit it in advance someone who hasn't hit it 3 times already will gain points
3456;the one with the least points and all numbers hit at least 3 times wins
3457;so take the situation where I falsely hit a number a forth time
3458;You could just store a list of all of those events
3459;And when that event is updated recalculate front abt list
3460;when changing this throw I will need to undo the gained points for every plaer who has gained them as well as change the throw
3461;From beginning to end
3462;okay so you think of something like a transaction log
3463;aka command pattern if I am not mistaken right?
3464;I forget the exact name of it
3465;can you hint me on how you would do that if you would need to? just the basics
3466;@Str≈ìm is there a technical name for a event queue
3467;Well the event log
3468;I remember reading it in my microservices book but can‚Äôt remember the name
3469;was this book specific to golang?
3470;No
3471;well okay
3472;It was an event driven microservices book
3473;But one of the ideas is a immutable log of all events from the beginning of time
3474;So if you startup a new service or restart one it would just reread that event log
3475;And get the correct state eventually
3476;wheremthe begjnning would be game start
3477;Yes
3478;okay.
3479;I mean you could just store it all in a slice
3480;so lets say in the log I do remove line 30 of 66
3481;And just keep appending to the slice
3482;then it would recalculate
3483;sounds great
3484;Yeah
3485;You‚Äôre going to have a very small number of events
3486;would that mean all my actions would need to be done once again
3487;define small
3488;Like less than a thousand
3489;well yes that is true depending on players playing
3490;Really less than like a 10k
3491;lets say I needabout 25 rounds of 3 throws to end a 501 game with double out
3492;this would be 75 throws per player
3493;Wherever the time complexity of your operations means it takes an unreasonable amount of time
3494;To update
3495;that sounds if a general middleware would be a good solution to this use case?
3496;If you have a operation that is O(n) then you‚Äôre going to hit very very large numbers before caring about reprocessing
3497;If it‚Äôs O(n!) then you‚Äôre going to get to like 10
3498;The way you‚Äôre doing things right now I would just get the data from the handlers and send it to where it needs to be processed
3499;yes right
3500;and there is the problem with the change function right?
3501;As I am just pushing information between functions I need overly complicated functions to change things afterwards within my game logic
3502;So it comes to me that my complete game design is wrong then
3503;What I understood is that I have a starting point (every player has 501 score and needs to get to 0 by hitting the last number with a double lets say)
3504;and then I write transactions.
3505;```1. player202020> 501 60 = 441```
3506;that is a transaction
3507;what I did till now is create a new throw round
3508;Ultimately without getting into very domain bounded stuff I can‚Äôt offer a solution
3509;Does anyone know if there are sentry io implementations for gorilla mux out there ü§î I couldn't find any myself
3510;insert 3 throws
3511;reduce the score
3512;next player
3513;and so on
3514;Sure
3515;but what you are trying to say is to write that into a file right?
3516;No
3517;You can keep it in memory
3518;The implementation details don‚Äôt really matter on that though
3519;The idea is you are keeping a list of ‚Äúplays‚Äù let‚Äôs say
3520;When you mutate that list you make sure to update the score based on the entire list
3521;So let‚Äôs say you have a `20 20 10 20`
3522;But the 10 is wrong
3523;Well you just update that entry
3524;And the thing will reprocesses from the beginning
3525;And give you a correct score
3526;right and score will change depending on that list#
3527;okay I got that
3528;that works just fine for an easy game like x01 I guess. This might be more complicated with cricket then
3529;Sure
3530;That‚Äôs why I said it was domain bounded
3531;Because the details of everything are based on the domain you are working I
3532;whereas in x01 the only thing matters is score in cricket it is if a number is closed (hit 3 times by every player) or opened (hit by a specific player 3 times) and if someone gained points
3533;Ah you mean you don't know darts good enough to offer the solution
3534;darts is the domain
3535;sorry I am not a native speaker
3536;Yes
3537;okay got it.
3538;It‚Äôs like saying ‚ÄúI want to design a system that lets you calculate a bunch of things related to cars‚Äù
3539;so heres the deal. I will try to apply this to the easy case of x01 games and when implementing cricket it will come to me at long last I guess
3540;Well if you don‚Äôt know how cars work it will be hard
3541;Gotcha
3542;Best we can help with here is specific fixes or general advice
3543;you sure can thanks again
3544;@Madxmike hi
3545;Hey guys I have previously been using io.Copy like this to download a file from a web handler:```gof _ := os.Open(filePath)io.Copy(w f)```I am now using minio which returns an object that I can `Read` I am a little confused how to do the equiv? Sorry for the very newbie question.
3546;i told you dont tag me
3547;:aPES_LulExplode:
3548;@Madxmike Hi
3549;event log or queue seems like a fine term
3550;yeah
3551;so as I am storing my score in a sqlite database file the function which will recalculate the state will finally write to the database when having the correct store and then the scoreboard ui will refetch the scores once again right?
3552;@ohnny is it an io.Reader
3553;is what?
3554;the object?
3555;the object
3556;is the method on it Read([]byte) (int error)
3557;```gofunc (o Object) Read(b []byte) (n int err error) {```
3558;yeah
3559;so its a io.Reader
3560;from minio FYI
3561;and you want to write the contents of that to a file?
3562;to the `w http.ResponseWriter`
3563;io.copy still works
3564;w is the writer
3565;o is the reader
3566;huh wtf
3567;I am so confused
3568;it does as well
3569;but it is of type `type Object struct {`
3570;yes
3571;not `Reader`
3572;interfaces are just sets of methods
3573;a io.Reader is just any struct that implements `Read(b []byte) (n int err error) `
3574;ohhh
3575;yeah just saw
3576;```gotype Reader interface { Read(p []byte) (n int err error)}```
3577;https://tour.golang.org/methods/9
3578;:robpike:
3579;so any class that implements `Read(p []byte) (n int err error)` will work
3580;> :robpike:@Str≈ìm what does this emoji mean üòÑ
3581;yes
3582;sweet
3583;awkwardly not seen that before
3584;thanks
3585;(even though I have used a lot)
3586;it's rob pike
3587;It can mean anything really
3588;:robpike:
3589;Usually bruh
3590;I wanna hear rob say bruh now
3591;"@Madxmike dude! This is sexy:```gotype changeSettings struct { Podium bool `json:""podium""` Sound bool `json:""sound""` SoundTheme string `json:""soundTheme""` Theme string `json:""theme""`}```"
3592;"```gofunc handleChangeSettings(packet packet) error { logger.Info(""Handle change settings"") logger.Infof(""Packet data is: %+v\ string(packet.Data)) var data changeSettings if err := json.Unmarshal(packet.Data &data); err != nil { return err } logger.Infof(""Data is now: %+v\ data) logger.Info(data.Podium) logger.Info(data.Sound) return nil}```"
3593;"```goswitch packet.Name { case createUser"": logger.Info(""Handle create User"") case deleteUser"": logger.Info(""Handle delete user"") case createGame"": logger.Info(""Handle create Game"") case changeSettings"": if err := handleChangeSettings(packet); err != nil { logger.Errorf(""Error when trying to change settings: %+v\ err) } case redirectonbackend"": logger.Info(""Handle redirect on backend"") default: logger.Errorf(""The event sent via websocket cannot be handeled: %+v\ packet.Name) }```"
3594;"Output will be like:```go[18:57:09][MAIN] : time=""20200804T18:57:09+02:00 level=info msg=changeSettings[18:57:09][MAIN] : time=""20200804T18:57:09+02:00 level=info msg=""{\\""podium\\"":true,\\""sound\\"":true,\\""soundTheme\\"":\\""test\\"",\\""theme\\"":\\""test2\\""}""[18:57:09][MAIN] : time=""20200804T18:57:09+02:00 level=info msg=""Handle change settings""[18:57:09][MAIN] : time=""20200804T18:57:09+02:00 level=info msg=""Packet data is: {\\""podium\\"":true,\\""sound\\"":true,\\""soundTheme\\"":\\""test\\"",\\""theme\\"":\\""test2\\""}\""[18:57:09][MAIN] : time=""20200804T18:57:09+02:00 level=info msg=""Data is now: {Podium:true Sound:true SoundTheme:test Theme:test2}\""[18:57:09][MAIN] : time=""20200804T18:57:09+02:00 level=info msg=true[18:57:09][MAIN] : time=""20200804T18:57:09+02:00 level=info msg=true[18:57:09][MAIN] : [GIN] 2020/08/04  18:57:09 | 200 | 1.292096361s | ::1 | GET /ws""[18:57:10][MAIN] : [GIN] 2020/08/04  18:57:10 | 200 | 218.299¬µs | ::1 | POST /graphql""```"
3595;yeah
3596;I do now control my data flow thanks to you. 1000 times thanks again
3597;"how would I go about creating an empty JSON object? Right now I have this: ```go""highlight"": map[string]interface{}{ fields"": map[string]interface{}{ definition"": something"", },},```but I need an empty object instead of the `""something""`."
3598;just remove that kv pair
3599;i think they mean they need an empty object in the definiton key
3600;or use the string `{}`
3601;"`""definition"": `"
3602;"yea i need something like this: ```json highlight"": { fields"": { definition"": {} },```"
3603;anyways
3604;you're already doing what you need
3605;? no
3606;yeah
3607;"`""highlight"": map[string]interface{}{`"
3608;what do you think this line is doing?
3609;@Deleted User `{}` is equivalent to `map[string]interface{}{}`
3610;i thought it was that
3611;it\'s creating a key highlight and creating an object
3612;"@deezy they wanted ` definition"": {}`"
3613;emphasis on the last part
3614;does that work
3615;but gofmt says i need an object inside the second `{}`
3616;yes
3617;that won't work
3618;that's not valid go syntax i'm pretty sure
3619;oy vey
3620;:thinkingo:
3621;oh
3622;i didn't save the file
3623;`map[string]interface{}`
3624;i'm dumb
3625;this makes an object
3626;`map[string]interface{}{}` works
3627;`map[string]interface{}` is a type deezy
3628;`map[string]interface{}{}` is a value
3629;Hmm. The Discord API server has a tag for a Python escape sequence for the emoji 1Ô∏è‚É£ that's like `0\\N{combining enclosing keycap}`. How would I replicate this in Go?
3630;Its the 1 emoji
3631;Like the literal 1 emoji unicode rune
3632;o
3633;ok i was confused ty
3634;There isn\'t any 1 emoji rune but it\'s the same idea as Python if you want to encompass both runes
3635;https://play.golang.org/p/8OAFF5kwyxy
3636;it seems that i can copy paste `3Ô∏è‚É£`
3637;"Both approaches are valid; because Go source is UTF8 you can put the whole sequence in the source"
3638;Yes but that's two runes
3639;A literal `3` and a combining enclosing keycap
3640;is that problematic?
3641;Oh its a combination emoji?
3642;yea
3643;that's why there's a tag for it in dapi
3644;It's not inherently problematic but it's important to know what type of objects your code is working with if you're manipulating strings be it bytes runes graphemes etc.
3645;also your link doesn't work it outputs the number one then a square (is that intended?)
3646;ü§® works fine over here
3647;must be my browser
3648;None
3649;o
3650;None
3651;https://img.spiral.li/k9mpd2c6t9.png
3652;ok then using `\\u20E3` is a lot easier than making a map
3653;let's see if it works in discord
3654;Yup you can represent any Unicode rune with an escape sequence
3655;0‚ÄìFFFF is `\\uXXXX` and 10000‚ÄìFFFFFFFF is `\\UXXXXXXXX`
3656;https://img.spiral.li/lsn400tetv.png
3657;yeet it works
3658;thanks yall
3659;"(and actually to be more correct if you want to force it to display as an emoji you should put an emoji variation selector in; it looks as though Discord does that automatically)"
3660;e.g. https://play.golang.org/p/AQmVKR1a0Qx
3661;warning newb question: how come `len` doesn't return int64 on the safe side?
3662;for example when doing something like `len(r.Body.Bytes())`
3663;the max size of a slice is the max size of `int`
3664;not sure about the others
3665;oh
3666;Greetings. I am new to GO I spent several dozen hours learning about it wrapping basics around my head. I am not new to programming in general however I work as PHP developer and have some JavaScript knowledge as well. Nonetheless I\'d like to ask You few questions:1. How do you deal with optional fields given there\'s no `null` as far I am concerned? I am aware variables get initialized with zerovalue depending on the type however in some cases they (such as `int 0`) can be considered valid values as well.2. The code in GO I reviewed so far mostly had public fields in struct. What if I wanted to make the struct immutable? Should I make them private and add getter methods?3. According to my yesterday\'s research there\'s few dependency manager tools in GO ecosystem  can You tell me more about this topic? For comparison in PHP we have `composer` (and in JS world it\'s `npm` or `yarn`) which allows downloading or updating vendor with simple command and it respects versioning rules (semver).4. Is there expendable easy to use web framework that aims to give developer tools to work with rather than full blown magical box? In PHP ecosystem we have `Symfony` framework. It\'s lightweight and provides basic features for web development such a routing. It also offers components which are standalone and can be used outside the framework but integrates with it for ease of use. Guess they could be called optin features that have to be added/installed separately maybe something like packages?
3667;1) you don't. all fields are required2) that's an option sure3) there's only one neeeded. go modules4) gochi
3668;and the max of int is based on the build implementation
3669;re 3)
3670;so it will be either 32 or 64 bits
3671;go is a REAL language
3672;how do you mean sorry?
3673;so it has an actual official dependency management toolchain
3674;```go There is also a set of predeclared numeric types with implementationspecific sizes:uint either 32 or 64 bitsint same size as uintuintptr an unsigned integer large enough to store the uninterpreted bits of a pointer valueTo avoid portability issues all numeric types are defined types and thus distinct except byte which is an alias for uint8 and rune which is an alias for int32. Explicit conversions are required when different numeric types are mixed in an expression or assignment. For instance int32 and int are not the same type even though they may have the same size on a particular architecture. ```
3675;https://golang.org/ref/spec#Numeric_types
3676;ahh okay
3677;"`The length is part of the array's type; it must evaluate to a nonnegative constant representable by a value of type int.`"
3678;on the len of an array
3679;is it stupid to set everything to int64 when the maximum thing I will be storing is the size of a large file 10GB or less in bytes
3680;10 gigabyte is 1e+10 and int max ize is 1e+127 right?
3681;someone smarter than I would need to answer
3682;lol yeah I am getting confused
3683;my general idea is to use int for everything unless you are needing to set specific bounds
3684;like i need this to be up to 64 bits no matter the implementation
3685;but the maximum representation of a 10gb file in bytes is `10000000000` which is only 10 bytes of data
3686;?
3687;what?
3688;10 bits
3689;what representation
3690;10 billion is not 10 bits
3691;im confused by your question
3692;`someInt := fileSize(filePathWhichIsMax10GB)`
3693;okay so file size
3694;specifically
3695;it's useful to be specific
3696;how many bits is `someInt`
3697;when talking about technology
3698;10 billion requires atleast a 34 bit number
3699;really?
3700;2^32 max is ~2.7billion
3701;yeah
3702;it's like
3703;2,650,000,000
3704;well whoops
3705;oh fuck
3706;thats signed
3707;Big bits
3708;over 9000
3709;I was using `e` not `^`
3710;getting confused
3711;unsigned 2^32 is 4.2billion
3712;the maximum value of `int` on 32bit targets is 2,147,483,647
3713;I thought it was 2e32 which is mahoosive
3714;no lol
3715;yeah so I do need to use a larger int
3716;so uint is twice that
3717;which is like 4 and a bit GB (in bytes)
3718;but to answer your question: use a int64 if you need to guarantee that you can hold up to 64 bits
3719;not 4 and a bit exactly 4 GB
3720;GB is defined in most contexts in terms of powers of 2
3721;`len(r.Body.Bytes())` will return a byte right?
3722;with the exception of when someone is selling storage they typically use powers of 10 instead
3723;and if that max value is 32
3724;it won't work if the upload is larger than 4GB?
3725;> will return a byte right?no
3726;it returns an int
3727;always
3728;len returns an int
3729;sorry so confusing
3730;But .Bytes() idk
3731;not the type `byte` lol
3732;will return the number of bytes in the body
3733;of the request
3734;not bits
3735;yes
3736;so if the body of the request is > 4GB it will max out at 4GB
3737;if you build on a 32 bit architecture yes
3738;because `int` will be 32 bits
3739;yep
3740;how do I get around that üôÇ
3741;you build on a 64 bit architecture
3742;so 8GB?
3743;I want to measure 10GB
3744;+
3745;which is uhh pretty much everywhere?
3746;you'd have to try to build on 32 bit arch
3747;64 bits is like a trillion trillion
3748;probably the solution is to avoid any situation where you need a possibly 10 gb file contained in a single request
3749;or some silly number
3750;we invented streaming a very long time ago for this reason
3751;also yes trying to handle an entire 10gb file in one go sounds like
3752;wrong
3753;for whatever reason
3754;(2^64)/1073741824 is the max
3755;feels like it should be a multipart request no?
3756;god almighty don't say this is over http
3757;> also yes trying to handle an entire 10gb file in one go sounds like@deezy How come and what language would you use
3758;no
3759;not in go
3760;in one go
3761;ohhh
3762;sorry üôÇ
3763;yeah 100% agree
3764;like zeph said
3765;streaming
3766;ALSO
3767;this is super super duper not a good use case for http
3768;(2^64)/1073741824 is the number of GB?
3769;which is a lot
3770;compared to `(2^32)/1073741824` == 4
3771;what protocol would you use?
3772;almost ltierally anything else. ftp scp
3773;i don't know what your use case is
3774;but http is notortiously unreliable at handling large/long running transfers like this
3775;is it? I didn't know that
3776;I am just really messing about
3777;that's okay
3778;it's fine to explore your options
3779;i'm just saying that like
3780;> > 1. How do you deal with optional fields given there\'s no null as far I am concerned? I am aware variables get initialized with zerovalue depending on the type however in some cases they (such as int 0) can be considered valid values as well.> deezy: 1) you don\'t. all fields are requiredif the zero value is not valid and you need an optional field you can make it a pointer no?
3781;you're sitting here spending hours worrying about overflowing ints when you call len(file)
3782;or is that not the correct way to do that
3783;but i'm almost certain that these file transfers will crap out and die before you even reach 100mb
3784;sorry I get sort of addicted to ideas
3785;like len messing up üòõ
3786;you have an aversion to documentation thats all üòõ
3787;:KEKW:
3788;:kek:
3789;and that üòÑ
3790;quite like a discussion üòâ
3791;just like
3792;bookmark https://golang.org/ref/spec
3793;and it will answer 90% of your spec related questions
3794;with a ctrl+f
3795;yep
3796;the spec is very good and very easy to read
3797;its how i answer most of the technical questions here
3798;I have a general idea of how it works
3799;as far as language specs go at least
3800;and then i look at the spec to confirm
3801;Thanks for answers @deezy . I'll take a look on `gochi`.> 1) you don't. all fields are requiredSo what do I do in case of optional stuff? I've seen some pseudonull solutions which didn't make good first impression. I've also seen usage of custom types which could be reference to null if I remember well.> 3) there's only one neeeded. go modulesSo to my understanding things like `Dep` ( https://github.com/golang/dep ) are outdated concept because `go modules` is now the official way to go?5. In PHP including Symfony we have Dependency Injection sometimes along with autowiring. Is such pattern used here as well?First message for reference: https://discordapp.com/channels/118456055842734083/118456055842734083/740291803844050995
3802;it's still a technical document but it's very digestible
3803;and if im still wrong lethal will eventually correct me
3804;bookmarked
3805;thanks for the help guys
3806;> So to my understanding things like Dep ( https://github.com/golang/dep ) are outdated concept because go modules is now the official way to go?yes dont worry about anything BUT modules
3807;I am going to look into sftp
3808;> 5. In PHP including Symfony we have Dependency Injection sometimes along with autowiring. Is such pattern used here as well?generally any automagical tools arent a big thing in go. You just pass stuff down to where its needed
3809;your main.go becomes your dependency injector
3810;1) Generally you have sensible defaults. All values are initialized to a zero value. Usually this is enough. An empty string usually signifies no input given
3811;Autowiring might be somewhat magical but DI itself  not in my opinion at least from PHP view
3812;DI isn\'t formally a thing in go you just use interfaces
3813;so that the boundaries of your code are loosely coupled
3814;?go layout
3815;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
3816;if you stick to a domain driven design instead of mvc you end up with something fairly easy to do di yourself with
3817;because things your packages need are clearly defined
3818;and if you accept an interface then the packages dont really need to know the actual thing being injected into them
3819;but most of the DI frameworks ive seen especially more in the js world are very automagical
3820;but thats also just js lol
3821;alright so you need a specific service here so just put it in your constructor and everything will just work
3822;i have a time.time i need a time.duration of low long its been from that time.time
3823;how i do this :KM_Dorime:
3824;time.Since
3825;https://golang.org/pkg/time/#Since
3826;thanks
3827;#4 specifically in that article is what i mean
3828;you know everytime i read this article im suprised just how exceptionally well it gets its point across
3829;i wish all medium articles were like this
3830;> but i'm almost certain that these file transfers will crap out and die before you even reach 100mb@deezy surely not?
3831;100mb may have been hyperbolic
3832;the deeper structural problems with http as a file upload mechanism remain
3833;I mean in general. Whats so bad about http as a protocol vs ftp?
3834;very poor nonuniversal resume/chunk functionality
3835;for one
3836;i mean
3837;compare http to rsync
3838;and there you have it
3839;rsync is an actual file transfer protocol
3840;http is not
3841;if you're trying to send 10gb+ files it's probably important that they get there fast reliably and in a way that interruptions don't require a full restart of the process
3842;you CAN add this functionality on top of an http server but you're just hand rolling partial implementations of existing battle tested solutions
3843;trust me i have hand rolled thousands of partial implementations of existing battle tested solutions
3844;I guess ive never run in to a problem transferring large ish files over http. Not 10gb consistently.
3845;it's just one of those things where like
3846;it'll probably be fine 90% of the time
3847;is that good enough?
3848;I guess im curious about the other 10% of the time
3849;right
3850;imagine you've uploaded 5gb and your mom is mad you didn't do your homework so she unplugs the router
3851;how do you handle resuming that
3852;http has multipart file uploads but does that allow you resume uploads at arbitrary points? honest question i actually do not know
3853;ah okay  fair enough
3854;if it does that's pretty cool
3855;and does address THAT concern fairly robustly
3856;but it may not
3857;and it may not be a universal feature
3858;the go stdlib almost certainly won't implement it
3859;I see what you're getting at now.
3860;when i said is 90% good enough? i\'m not passing judgement
3861;there are LOTS of situations where 90% is BEYOND good enough
3862;I just kept thinking.. I dont understand the problem.. TCP window size will scale you'll fill your pipe and you'll get the file regardless of out of order packets etc.
3863;basically this is fine its using tcp
3864;as opposed to
3865;well that's fine for as long as the tcp connection remains open
3866;additional functionality
3867;but if mom unplugs the router
3868;connection closed by peer
3869;nwo your tcp stream is interrupted and has no reference point
3870;yeah. I'm thinking through it as a network engineer not a software engineer.
3871;right
3872;the network stack can't solve this problem
3873;what you're saying makes sense
3874;it's an application layer problem
3875;i know. Thats why I couldnt see what the issue is.
3876;because the network stack doesn't know anything about files
3877;just streams of bytes
3878;If I have a goroutine for reading from a connection and one for writing to one how would I tell them both to stop?
3879;Or is my approach bad
3880;a context or a close channel
3881;context sounds like it's something i should look up
3882;thanks
3883;perfect actually :)
3884;What is a `[]uint8`? I'm getting `panic: interface conversion: interface {} is []interface{} not []uint8` trying to unmarshal some JSON.
3885;a slice of uint8 values
3886;`[]uint8` is not interchangeable with `[]interface{}`
3887;that's what i thought
3888;but i can't find either of those in my code or in the returned json
3889;https://play.golang.org/
3890;start here
3891;"```govar curH stringjson.Unmarshal(hit.(map[string]interface{})[""highlight""].(map[string]interface{})[""definition""].([]byte) &curH)```"
3892;write code until you get the error
3893;sure
3894;oh god
3895;holy hell
3896;yeah i copied the example and it's incomprehensible
3897;:robpike:
3898;that's not good code
3899;`[]byte` is the same as `[]uint8`
3900;ohhh
3901;doing like 5 type conversions on the same line
3902;that final assertion is where you're getting the panic
3903;also you probably actually want structs
3904;i have a struct
3905;and not maps
3906;this is just extracting the specific part of the json response i need
3907;then i'm able to put it into my struct
3908;i mean
3909;you could also just
3910;"```gotype Payload struct { Highlight Highlight`json:""highlight""`}type Highlight struct { Definition Definition `json:""definition""`}type Definition struct { Whatever string `json:""whatever""`}```"
3911;and just completely avoid this hideous tree of nested inline maps
3912;i don't know what elasticsearch is going to return though
3913;that's my only issue
3914;okay well
3915;at the very least break that line out into multiple pieces
3916;so it's at least partially legible
3917;mkay
3918;"```gotype T struct { Value string `json:""value""`}type X struct { T Value string `json:""value""`}``` what would X.Value end up being?"
3919;`(X instance).Value` refers to the field within `X`
3920;https://play.golang.org/p/BWxUIqZYJbn
3921;To refer to the field in `T` you would need to do `(X instance).T.Value`
3922;general rule im sure you can find the actual line in the spec is that the struct's methods and members have higher will always be used over the promoted ones
3923;You caught me here's the relevant portion:> The following rules apply to selectors:> > For a value x of type T or T where T is not a pointer or interface type x.f denotes the field or method at the shallowest depth in T where there is such an f. If there is not exactly one f with shallowest depth the selector expression is illegal.
3924;the promotion stuff is just syntax sugar isnt it?
3925;thats what it looks like in the selectors spec atleast
3926;"Promotion is more a side effect of that snippet rather than something that forcefully happens; here `T.Value` isn't promoted on `X` because `X.Value` doesn't refer to it"
3927;That seems sort of backwards but that's actually how it's defined in the spec:> A field or method f of an embedded field in a struct x is called promoted if x.f is a legal selector that denotes that field or method f.
3928;"An embedded field isn't available on the embedder because it's promoted; it's promoted because it's available on the embedder (except in situations like this)."
3929;Thanks guys üòÑ
3930;well below that you have `p.M0() // ((p).T0).M0() M0 expects T0 receiver`where M0() is a method on T0 which is a embeded struct on p
3931;what im asking is does go automatically turn `p.M0()` into `((p).T0).M0()` at compile time?
3932;like it does with automatic pointer dereference?
3933;Yes because `T2` embeds `T0` `T2`'s method set contains the method set of `T0` (as well as `T0`)
3934;I've got a question
3935;how long time does it take to learn the basics of go?
3936;Depends on your prior experience
3937;Also whatever you consider the basics
3938;Setting up a web server is a super basic task in go
3939;But probably isn‚Äôt what you mean
3940;?go tour
3941;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
3942;as long as it takes you to get through the go tour
3943;:P
3944;i need help
3945;same tbh
3946;@Deleted User whats up
3947;whatcha need help with
3948;(btw rather than saying you need help just ask what you need)
3949;"```go url := http://w00dy.pw/send.php?host= + locipaddress + &port= + port + &time= + timee + &method= + method  tr := &http.Transport { ResponseHeaderTimeout: 5time.Second, DisableCompression: true, } client := &http.Client{Transport: tr Timeout: 5time.Second} locresponse err := client.Get(url) if err != nil { this.conn.Write([]byte(fmt.Sprintf(""\\033[31mAPI Server is down. Contact w00dy#6666.\\033[37;1m\\r\""))) continue } locresponsedata err := ioutil.ReadAll(locresponse.Body) if err != nil { this.conn.Write([]byte(fmt.Sprintf(""\\033[31mError... IP Address Only!\\033[37;1m\\r\""))) continue } locrespstring := string(locresponsedata) locformatted := strings.Replace(locrespstring \ \\r\ 1) this.conn.Write([]byte(""\\x1b[1;33mAPI Server Result\\x1b[1;36m: \\r\\\x1b[1;36m + locformatted + \\x1b[0m\\r\""))```"
3950;i dont know much about go
3951;none at all
3952;python lua and c im decent in
3953;i just dont know how to request multiple urls
3954;you want to make a http request to multiple URLs?
3955;get request yes
3956;to multiple ```url := http://w00dy.pw/send.php?host= + locipaddress + &port= + port + &time= + timee + &method= + method ```
3957;thats only one URL
3958;ik i want to add more
3959;I know about tour of go but I prefer learning from booksCurrently I'm working with Head First Go and found nice free books on Go on github for examplehttps://astaxie.gitbooks.io
3960;if you want to make more requests just create more requests and send them using your client
3961;I'm planning to take the tour of go when I finish them
3962;```gotr := &http.Transport{...}client := &http.Client{...}for _ url := range []string{/your URLs go in here or make a slice in a different way and use it here/} { // make request and handle errors appropriately}```
3963;(that wont compile cause of the parser ^)
3964;but you get my point
3965;kinda not really lol
3966;@Deleted User you can't make multiple requests with the one line you'd almost copy your whole code block and just do it again for the 2nd request.
3967;^
3968;However if you know absolutely nothing a good start really is to read a few tutorials like the go tour.
3969;?go tour
3970;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
3971;"```go url := http://w00dy.pw/send.php?host= + locipaddress + &port= + port + &time= + timee + &method= + method  url2 := http://w00dy.pw/send2.php?host= + locipaddress + &port= + port + &time= + timee + &method= + method  url3 := http://w00dy.pw/send3.php?host= + locipaddress + &port= + port + &time= + timee + &method= + method  tr := &http.Transport { ResponseHeaderTimeout: 5time.Second, DisableCompression: true, } client := &http.Client{Transport: tr Timeout: 5time.Second} locresponse err := client.Get(url) if err != nil { this.conn.Write([]byte(fmt.Sprintf(""\\033[31mAPI Server is down. Contact w00dy#6666.\\033[37;1m\\r\""))) continue } locresponsedata err := ioutil.ReadAll(locresponse.Body) if err != nil { this.conn.Write([]byte(fmt.Sprintf(""\\033[31mError... IP Address Only!\\033[37;1m\\r\""))) continue } locrespstring := string(locresponsedata) locformatted := strings.Replace(locrespstring \ \\r\ 1) this.conn.Write([]byte(""\\x1b[1;33mAPI Server Result\\x1b[1;36m: \\r\\\x1b[1;36m + locformatted + \\x1b[0m\\r\""))```"
3972;That'll help you understand a lot and it'll make it easier for all of us to help you if you know a little bit about how the language works.
3973;ik this isnt going to work and looks very retarded
3974;but this is how id like it to work
3975;so it sounds like what you want
3976;is a list of URLs
3977;yes
3978;and then to loop over them
3979;and do your requests
3980;i dont know how to structure this
3981;Where'd you get all the code you've got here?
3982;its apart of my project
3983;"```go if err != nil || cmd == /API || cmd == /api { this.conn.Write([]byte(""\\x1b[1;36mIPv4\\x1b[1;36m: \\x1b[0m"")) locipaddress err := this.ReadLine(false) this.conn.Write([]byte(""\\x1b[1;36mPort\\x1b[1;36m: \\x1b[0m"")) port err := this.ReadLine(false) this.conn.Write([]byte(""\\x1b[1;36mTime\\x1b[1;36m: \\x1b[0m"")) timee err := this.ReadLine(false) this.conn.Write([]byte(""\\x1b[1;36mMethod\\x1b[1;36m: \\x1b[0m"")) method err := this.ReadLine(false) if err != nil { return } url := http://w00dy.pw/send.php?host= + locipaddress + &port= + port + &time= + timee + &method= + method tr := &http.Transport { ResponseHeaderTimeout: 5time.Second, DisableCompression: true, } client := &http.Client{Transport: tr Timeout: 5time.Second} locresponse err := client.Get(url) if err != nil { this.conn.Write([]byte(fmt.Sprintf(""\\033[31mAPI Server is down. Contact w00dy#6666.\\033[37;1m\\r\""))) continue } locresponsedata err := ioutil.ReadAll(locresponse.Body) if err != nil { this.conn.Write([]byte(fmt.Sprintf(""\\033[31mError... IP Address Only!\\033[37;1m\\r\""))) continue } locrespstring := string(locresponsedata) locformatted := strings.Replace(locrespstring \ \\r\ 1) this.conn.Write([]byte(""\\x1b[1;33mAPI Server Result\\x1b[1;36m: \\r\\\x1b[1;36m + locformatted + \\x1b[0m\\r\"")) }```"
3984;full thing
3985;go through the tour you want to pay attention specifically for a slice of strings and for loops
3986;you can easily solve your problem by doing that
3987;?go tour
3988;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
3989;so wait
3990;locresponse err := client.Get(url)
3991;what about it?
3992;https://www.golangprograms.com/howtohandlehttpgetresponse.html
3993;could i turn urls into list and get them all with client.Get
3994;kind of?
3995;turn your urls into a list (called slice)
3996;and then iterate over that list
3997;and each iteration call `client.Get`
3998;ah
3999;and handle the body from that request on each iteration
4000;well
4001;what you'd what is
4002;```govar urls []stringfor url _ := range urls { http.Whatever(url body etc etc)}```
4003;at the most abstract level
4004;my code example doens't check for errors or do ANYTHING with the data
4005;but
4006;ill pay someone to modify it rn and send it in here so i can reverse engineer this
4007;that's how the code flow will work
4008;because i am l o s t
4009;who wrote this code for you lol
4010;if its in your project might be worth it to learn it
4011;i do want to learn it and i am trying but http reequest is out of the league of what im learning rn
4012;that's
4013;a very low bar
4014;i mean your code already requests one URL youre not struggling with requesting URL this problem youre trying to solve boils down to needing to iterate over a for loop
4015;http requests is a super super super super super duper low bar for i can do stuff with programing
4016;i love python because of simplicity
4017;i never said that I'm just trying to learn go
4018;yanno
4019;well... making a GET request in Go is almost equally simple give or take some added benefits of error handling üòÑ
4020;the point is if you have to pay someone to handle http.Get() you are not in a good position
4021;i refuse to do that out of respect for your intelligence
4022;i wrote this in python
4023;with no error
4024;that\'s like saying i\'m really good at shopping i just have to pay 3 people to get all the ingredient for my cooking recipies
4025;but when it comes to go i am retard
4026;then learn
4027;Lets focus on the Go aspect of all of this.
4028;i want to learn go but i dont have the patience to learn a new lang just for 13 lines of code
4029;Woody you're gonna have to learn some it's not often people will want to just write code for someone. We'll help get you there but the whole point of this community is to help people learn not so much write code for people.
4030;I'm not trying to just have someone write it for me
4031;i just need it working
4032;i want to learn french but i don\'t want to learn how to say hi how are you
4033;hence why google translate was made
4034;> ill pay someone to modify it rn and send it in here so i can reverse engineer this> I'm not trying to just have someone write it for me
4035;You can get to solving your issue here very quickly deezy already gave you the high level overview of what you need to do you just need to figure out what code belongs where (which is a very simple part). As Skippy said go through the tour and you'll figure it out in no time.
4036;high level overview
4037;yes
4038;he did
4039;what is simple to you guys
4040;To be fair you're not struggling with making a GET request you need to focus on learning how to use a for loop to iterate over a list (slice in Go)
4041;is foreign to me
4042;Yeah running through the tour won't take very long and you'll learn a lot
4043;so use the tour! üòÑ
4044;its seriously a great resource
4045;back to python lolz
4046;> what is simple to you guys is foreign to me
4047;well
4048;yes
4049;all new knowledge is foreign
4050;> back to python lolz@Deleted User if you don't want to learn go that's prolly what you'd want to do anyways lol
4051;i want to learn but i dont want to spend hours/days learning go when it needs to be done in about 7 hours lol
4052;going through the tour doesnt take that long üòÑ
4053;im going through tour rn
4054;> i want to learn but i don't want to spend time doing it
4055;welp
4056;ok
4057;i have a real unfortunate message for you
4058;totally butcher what i say
4059;and take words out of context
4060;lol deezy has a fair point but okay
4061;"i mean you\'re the one who apparently proposed that...""go can be learned in seven hours?"
4062;im clearly in here
4063;trying to learn
4064;but nothing but sarcasm and nonsense metaphors
4065;from you
4066;btw if you learn how to write go now... you'll actually know what this code you've pasted does which can be extremely helpful in the future
4067;in case something like this happens later down the road
4068;and/or you need to make more modifications
4069;and you dont need to learn the ins and outs of the language but if you (for w/e reason) don't know how to understand the code you're working with that's a tough situation man
4070;now i gotta go and pay 75$ an hour on freelance rip
4071;was this code passed down to you or something?
4072;why do you have to work w/ it?
4073;yeah
4074;what are you trying to do
4075;i make 350$
4076;off it
4077;a month
4078;:kek:
4079;fr
4080;thats how i feel
4081;and btw if you have any specific questions regarding the tour and/or how to solve ur issue feel free to ask
4082;my hosting company brings more income than that
4083;sure i can make list for urls
4084;but that doesnt help with the arguements that needed to be added
4085;this is way to complex to learn before the end of today
4086;sure
4087;make a list of urls AND their arguments
4088;two seaprate slices
4089;by arguments do you mean the things youre adding on?
4090;like the query params?
4091;+ locipaddress + &port= + port + &time= + timee + &method= + method
4092;mhm
4093;when you do that concatenation
4094;it just becomes a bigger string
4095;so you dont need to store those seperately
4096;you can just store that itself inside the slice
4097;why not have an array of json objects
4098;with all properties
4099;yeah thats good practice ^
4100;```gos := []string{ http://w00dy.pw/send.php?host= + locipaddress + &port= + port + &time= + timee + &method= + method,}```
4101;if you want to use your approach
4102;you can do something like this
4103;(this is just a slice of length 1) but i think you get the idea
4104;the concatenation of the string will be understood
4105;@Deleted User ^
4106;thanks for the help boys it means alot
4107;truly
4108;üëç
4109;use url.Values pls
4110;"```gov := url.Values{ host"": {locipaddress},}url := https:/dasdasdasdad? + v.Encode()```"
4111;:kek:
4112;i paid this fucker off freelance
4113;for 125 lets hope he pulls through
4114;good luck
4115;dont need luck ina legal transaction! thanks tho!
4116;"Is it possible to conditionally change a `json:""""` when json marshalling? I want to ignore a property most of the time but send it to the client in some cases."
4117;Create a custom marshalling method on the struct
4118;That tells json how to marshal
4119;Oh I didn't even know that was possible. I'll look into it!
4120;if i want to format a variable/varibles using sprintf. if i do %v that would allow for all types?
4121;yes
4122;but
4123;there's three different verbs
4124;%v %+v %#v
4125;spoilers: documentation is your friend
4126;https://golang.org/pkg/fmt/
4127;thank u!!!!
4128;i looked at it before
4129;just wanted to clarify
4130;and if i want to do time.kitchen but with seconds
4131;do i just need to say time.seconds separately and combine the time?
4132;You can use the kitchen constant to define your own layout just look at what number defines seconds in the time layout
4133;you can use my forked page for reference: https://godate.diamondb.xyz
4134;How can I create an `io.Reader` from a file at an external link?
4135;"a file at an external link""?"
4136;like let's say `https://imgur.com/i/somefile.png`
4137;oh a http.Response
4138;do `http.Get()`
4139;oh ty
4140;huh
4141;Do I need to use `func (Response) Write`
4142;res.Body perhaps
4143;oh yea my bad
4144;hello how do I import a folder(local package) in go 1.14?
4145;"I have use `import ./worker""`  but the compiler shows `build commandlinearguments: cannot find module for path`."
4146;appworker worker.go `package Worker`main.go `package main`
4147;Is your project set up as a module? (does it have a `go.mod` file?)
4148;Yes there is a `go.mod` file.
4149;What is the module declared as?
4150;go.mod`module ./workergo 1.14`
4151;I try to change it to `module worker` or `module Worker` (also change with package name)
4152;That doesn‚Äôt look like a correct usage of the modules system. Is that in the worker folder or your toplevel directory?
4153;You very seldom want to declare subpackages as their own module. You should declare the top level project as a module then import `my/module/name/worker`.
4154;I am trying to get JSON from byte but still unable to do that ```var dat map[string]interface{}fmt.Fprintf(w string(resp) dat)```
4155;I tried multiple things but still no luck
4156;Unable to understand what mistake I am doing.
4157;```app `folder` worker `folder` |worker.go package Worker main.go package main```
4158;Sure.
4159;That still goes along with what I suggested. Initialize a module in the `app` folder then you can import `name/worker`.
4160;@aavrug what does ‚Äúget JSON from byte‚Äù mean? What do you have and what are you trying to obtain? Where does JSON fit into this? What is `dat`?
4161;I have data in byte format and trying to parse into JSON format the `resp` is holding the bytes
4162;`dat` I defined for parsing into JSON in the above code
4163;When you say ‚Äúparse into JSON format‚Äù do you mean that `resp` contains JSON (i.e. parsing from JSON)? Or are you trying to produce JSON?
4164;how do I declare the top level project as a module? Is make dir in app folder as `app/module/name/worker `?
4165;I am not sure what you mean by produce I am trying to get JSON data from bytes
4166;Go to the toplevel folder then `go mod init my/module/name`
4167;The `resp` is in byte format
4168;I‚Äôm still failing to see where JSON fits in. You can‚Äôt just ‚Äúparse into JSON‚Äù. Does `resp` contain JSON within those bytes?
4169;Ok let me show the output
4170;"When I am executing the above code getting `{""total_count"":3,""data"":[{""id"":""be1ee0c0a3484...""}]}`"
4171;This is in a string format I wan in JSON
4172;That sure looks like JSON to me.
4173;Yea but it is in a string format which looks like in JSON
4174;JSON is always a string by definition. It‚Äôs an interchange format.
4175;Are you looking to take the information stored in that JSON and put it into a Go struct/map?
4176;I have created an API and the response I am expecting in JSON
4177;From the string I'll not able to take the values by key but If it will be a proper JSON data I'll able to get the values by key.
4178;That is proper JSON data. I think there‚Äôs a misunderstanding of what JSON is here.
4179;Yea so in Go I want it in a struct but I don't know the structure of the response.
4180;If you want to take that information and put it into Go types that‚Äôs called ‚Äúunmarshaling‚Äù. That‚Äôs the opposite of what you originally asked for but it sounds like it‚Äôs what you really want.
4181;"You have JSON and want to take that data out of the JSON; you don‚Äôt want to ‚Äúget JSON‚Äù."
4182;So from postman I am hitting the API which I created it should show me proper JSON data.
4183;But it is showing string there I am not taking any data I am just returning from my method
4184;I‚Äôm really not sure what the misconception is. That is ‚Äúproper JSON data‚Äù. JSON is a string.
4185;Always.
4186;Yea it is
4187;If you want to retrieve information from that JSON string you do that through a process of ‚Äúunmarshaling‚Äù which parses the JSON data and puts it into Go objects. A JSON object can be represented by a struct or a map.
4188;Ok done
4189;@c26c7200 feel free to keep things in here‚ÄîI‚Äôve got the bandwidth. üôÇ
4190;Got it what I was doing wrong
4191;"So I was not setting the header in the response so it was look like as a plain text after setting the header `w.Header().Set(""ContentType application/json; charset=utf8"")` now it in JSON"
4192;Sorry for the confusion I was unable to explain it properly
4193;@Carson Thanks
4194;I got `package worker is not in GOROOT` . But I don't want to put `worker package` to GOROOT..
4195;How are you attempting to import it?
4196;"```package mainimport ( worker""```"
4197;anyone help?
4198;None
4199;Refer to my message above specifically the `my/module/name/worker` part. One part seems to be missing here. üôÇ
4200;"worker.go```package Workerimport ( fmt"" io/ioutil"" net/http"" strings"" sync"" ```"
4201;i am a noob so
4202;help?
4203;anyone?
4204;pls?
4205;"@Carson thanks. ` pd_go/module/name/worker""` has a tip `import cycle not allowed` but I have to go out now."
4206;pls help me
4207;i am a big noob
4208;Yeah you can‚Äôt have two packages importing each other. That‚Äôs a bit of a different issue though and gets more towards package and project layout than modules.
4209;help me with this pls
4210;thx
4211;@Enxtrv look at the capitalisation
4212;hover over function names to see what's wrong
4213;You mean this?
4214;yeah. but now the issue is that the type of birthday is wrong.
4215;how to fix it?
4216;https://stackoverflow.com/questions/46369920/convertstringdatetotimetimeingolang
4217;the v porgramming language seems cool is like go + rust
4218;cant read can tell me how to fix it ?
4219;@kmosq yes but the main difference is that go and rust are languages that actually work
4220;damn
4221;@Enxtrv you take the date from the console and then convert it to a date and then you check the age difference
4222;gottem
4223;actually work? jizus
4224;yes
4225;im reasonably certain if you use that language in production it will still randomly segfault
4226;this commit tho: https://github.com/vlang/gitly/commit/f0aadba2a40205006386397f8f827e4b871e3577
4227;so a language in development?
4228;there's a lot more to it but essentially yes
4229;so a language in development doesn't work what are u going to say next
4230;you have access to a search engine im sure you can find out what the issues are with v üôÇ
4231;i though u were searching for them
4232;I have joined as a DevOps intern and I want to learn how can I use Golang for the role. I want to explore more on how to build pipelines for CI CD with golang and the overall devops workflow. I tried looking for pinned message in the group but I am unable to find that. It would be great if anyone could help me with this. Thanks
4233;If we use an empty interface what are the downsides
4234;For unmarshalling json data
4235;https://cdn.discordapp.com/attachments/737680277643722753/740431621362155598/Fly.png
4236;thanks i hate it
4237;Lol lit!
4238;Anyone know how to broadcast a message to every connected client via gorilla/websocket?
4239;None
4240;None
4241;pls continue
4242;None
4243;(also isn't this a little off topic?)
4244;It's not even a topic
4245;> If we use an empty interface what are the downsides for unmarshalling json data
4246;That's a good question
4247;well okay. someone able to HELP ME adapt gorilla/websocket chat example (hub broadcast messages) to my specific setup? Right now I can receive messages via websocket at server level and handle them just fine. But I need to broadcast a message to all connected clients from within the server.
4248;I use watermill with the gochannel implementation for pub/sub @JohnnyTheSmith
4249;I use an event loop and a write channel
4250;not going overkill
4251;"well okay. Let me show you what I got so far. I am fairly new to Go.```goRoute definition// Socket routesfunc Socket(cfg utils.Config r gin.Engine _ orm.ORM) error { r.GET(cfg.EndpointAndPath(""/ws"") ServeWS()) return nil}Handler// ServeWS will handle the socket connectionsfunc ServeWS() gin.HandlerFunc { return func(c gin.Context) { conn err := wsupgrader.Upgrade(c.Writer c.Request nil) defer conn.Close() if err != nil { logger.Panicf(""Failed to upgrade ws: %+v err) return } for { var packet Packet if err := conn.ReadJSON(&packet); // t msg err := conn.ReadMessage() err != nil { break } logger.Info(packet.Name) logger.Info(string(packet.Data)) switch packet.Name { case createUser"": logger.Info(""Handle create User"") case deleteUser"": logger.Info(""Handle delete user"") case createGame"": if err := handleCreateGame(packet); err != nil { logger.Errorf(""Error when creating game: %+v err) } case changeSettings"": if err := handleChangeSettings(packet); err != nil { logger.Errorf(""Error when trying to change settings: %+v err) } case redirectonbackend"": if err := handleRedirectOnBackend(packet conn); err != nil { logger.Errorf(""Error when trying to redirect on backend: %+v err) } default: logger.Errorf(""The event sent via websocket cannot be handeled: %+v packet.Name) } } }}```"
4252;So right now I am dispatching to different functions this is working just fine. The client transmits data and I am handling this
4253;Imagine there are two tabs opened. One is showing an index page and one is showing a game setup page. Both are connected to the websocket server. If I now start a game on the setup page this page will redirect to a game controller (issued by frontend react). Before it does that it will emit a message redirectOnBackend with the data target: index. So now my backend has to broadcast the redirect to all clients connected. The index page will listen for the event redirect and will check on the target data. If the data says index it will redirect to another predefined page (in this case scoreboard)
4254;"As I handle the case above called redirectonbackend I do execute the function `handleRedirectOnBackend` which does this:```gofunc handleRedirectOnBackend(packet Packet conn websocket.Conn) error { var target redirectOnBackend if err := json.Unmarshal(packet.Data &target); err != nil { logger.Errorf(""Could not redirect: %+v string(packet.Data)) return err } logger.Infof(""Redirect target is: %+v target.Target) sendPacket := Packet{ Name: redirect"", Data: packet.Data, } conn.WriteJSON(sendPacket) return nil}```"
4255;But it appears to me that `conn.WriteJSON(sendPacket)` will only send that back to the client which issued the `redirectOnBackend` which is the game setup page. That is not what I am trying to do
4256;I want the function to broadcast it to everyone connected
4257;So now I am thinking of a way to replicate the chat example with its hub and client to implement this function and cannot wrap my head around how to do it. Any suggestions?
4258;Or is there a better way of doing it?
4259;"Using pubsub I have this```Go// ServeWs handles websocket requests from the peer.func ServeWs(w http.ResponseWriter r http.Request) { usr ok := r.Context().Value(middlewareKeyUser).(controller.User) if !ok { http.Error(w http.StatusText(http.StatusForbidden) http.StatusForbidden) return } ws err := upgrader.Upgrade(w r nil) if err != nil { return } defer ws.Close() ws.SetReadLimit(maxMessageSize) _ = ws.SetReadDeadline(time.Now().Add(pongWait)) ws.SetPongHandler(func(string) error { _ = ws.SetReadDeadline(time.Now().Add(pongWait)); return nil }) var notif notification ctx := context.Background() ctx quit := context.WithCancel(ctx) go sendNotifications(ctx usr class notif ws) for { _ bytes err := readMessage(ws) if err != nil { quit() break } if err = json.Unmarshal(bytes &notif); err != nil { quit() if websocket.IsUnexpectedCloseError(err websocket.CloseGoingAway websocket.CloseAbnormalClosure) { model.Logger.Error(err) } break } if err := publish(class.TeacherID class.ID studs notif usr); err != nil { quit() model.Logger.Error(err) } }}// readMessage will read a websocket messagefunc readMessage(ws websocket.Conn) (int []byte error) { msgType bytes err := ws.ReadMessage() if err != nil { if websocket.IsUnexpectedCloseError(err websocket.CloseGoingAway websocket.CloseAbnormalClosure) { model.Logger.Error(err) } return msgType nil err } return msgType bytes nil}```"
4260;"```Go// publish will marshall the notification as json and send it to the pubsub provider. Will return an error if publishing or// marshalling failsfunc publish(teacherID uint classID uint students []controller.Student notif notification user controller.User) error { notifJSON err := json.MarshalIndent(notif  \\t"") if err != nil { return err } msg := message.NewMessage(watermill.NewUUID() notifJSON) if notif.Recipient == 0 && user.UserType == controller.UserTypeStudent { // Student to teacher return model.PubSub.Publish(fmt.Sprintf(""%d.teacher teacherID) msg) } if notif.Recipient == 0 && user.UserType == controller.UserTypeTeacher { // Teacher to class return model.PubSub.Publish(fmt.Sprintf(""%d.class classID) msg) } if i := studentInArray(students notif.Recipient); i != 0 { // Student or teacher to student return model.PubSub.Publish(fmt.Sprintf(""%d.student notif.Recipient) msg) } return model.ErrBadRequest}// sendNotifications subscribes the current connection correct topics.// ctx argument makes it so that when ctx is Done subscription will be closedfunc sendNotifications(ctx context.Context usr controller.User class controller.Class notif notification ws websocket.Conn) error { messagesClass err := model.PubSub.Subscribe(ctx fmt.Sprintf(""%d.class class.ID)) if err != nil { return err } var messagesPersonnal <chan message.Message switch usr.UserType { case controller.UserTypeTeacher: messagesPersonnal err = model.PubSub.Subscribe(ctx fmt.Sprintf(""%d.teacher usr.TeacherID)) if err != nil { return err } case controller.UserTypeStudent: messagesPersonnal err = model.PubSub.Subscribe(ctx fmt.Sprintf(""%d.student usr.StudentID)) if err != nil { return err } } return writeNotifications(ctx messagesClass messagesPersonnal ws)}```"
4261;```Go// writeNotifications is basically sendNotifications part 2. It acts at a write pump and will write all the notifications the// pubsub provider sends until connection is closed which is signaled by the quit channelfunc writeNotifications(ctx context.Context messagesClass messagesPersonnal <chan message.Message ws websocket.Conn) error { ticker := time.NewTicker(pingPeriod) var err error defer ticker.Stop() for { select { case msg := <messagesClass: msg.Ack() _ = ws.SetWriteDeadline(time.Now().Add(writeWait)) err = ws.WriteMessage(websocket.TextMessage msg.Payload) case msg := <messagesPersonnal: msg.Ack() _ = ws.SetWriteDeadline(time.Now().Add(writeWait)) err = ws.WriteMessage(websocket.TextMessage msg.Payload) case <ctx.Done(): return nil case <ticker.C: _ = ws.SetWriteDeadline(time.Now().Add(writeWait)) err = ws.WriteMessage(websocket.PingMessage nil) } if err != nil { return err } }}```
4262;There's some part you don't need but the thing basically could work like that
4263;I basically for each conn have one goroutine which receives data and broadcost messages and one goroutine which sends data/handles broadcoasted messages
4264;okay this looks somewhat oversized for what I am trying to do. Thanks for your code though. I think I will stick with the chat example and try to figure how to adapt read and write pump to my situation. I already figured what the hub does and how registering und unregistering might work. I just need to find out which pump is which and where to add my switch I guess.
4265;> If we use an empty interface what are the downsides@EliteDaMyth
4266;Well I could include the message queue in this hub scenarion. I can now again control all incoming messages within this setup. The only thing I can not figure is how to send a broadcast then
4267;"```go// Packet defines a packet structtype Packet struct { Name string `json:""name""` Data json.RawMessage}/// Sending the packate to the hub? sendPacket := Packet{ Name: redirect"", Data: packet.Data, } logger.Infof(""Package to be broadcasted is: %+v sendPacket) c.hub.broadcast < []byte(sendPacket)```This will give me `cannot convert sendPacket (variable of type Packet) to []byte`"
4268;@EliteDaMyth no type safety at compile time
4269;You have to assert everything at runtime
4270;i know it with the name varargs
4271;basically its nothing else than a slice
4272;"```gofunc main() { myFunc(""hello hi these are arguments"") // Will print out \'5\'}func myFunc(strs ...string) { fmt.Println(len(strs))}```"
4273;"Now I have a question using viper ( https://github.com/spf13/viper ). I use the following code to initialize a configuration:```gofunc Initialize() error { // Define the configuration file path home err := homedir.Dir() if err != nil { return err } viper.AddConfigPath(home + /.myApp"") viper.SetConfigName(""config"") viper.SetConfigType(""json"") // Set the defaults of the configuration viper.SetDefault(""first first"") viper.SetDefault(""second second"") // Safesave the default configuration if it does not exist err = viper.SafeWriteConfig() if err != nil { return err } // Read the configuration file err = viper.ReadInConfig() return err}```But instead of creating the nonexistant config file it errors because the config file does not exist. But `SafeWriteConfig` literally should save it if it does not exist"
4274;Does the directory exist
4275;Can you show some output
4276;I was just dumb and I forgot to create the directory because I thought that viper would do that for me.
4277;Thank you üòÑ
4278;"I have an issue with a packages struct the key `Lang` has the wrong xml destination. When Marshalling it becomes `xmlns:_xml=""xml _xml:lang=‚Äú‚Äù` when I just want `xml:lang=‚Äú""```` type LocalizedName struct { Lang string `xml:""xml lang,attr""` Value string `xml:"",chardata""`}```Is there a way to overwrite this?"
4279;Open a PR to the library to fix it :)
4280;I have this file coming over websockets. This is how it looks like when logging it to console before beeing sent through ws on client side:
4281;"```jsPlayerPage.jsx:41 {name: Test nickname: test2 profileImg: File imageName: mygopher.png mimetype: image/png""}imageName: mygopher.png""mimetype: image/png""name: Test""nickname: test2""profileImg: File\xa0{name: mygopher.png lastModified: 1594796428492 lastModifiedDate: Wed Jul 15 2020 09:00:28 GMT+0200 (Central European Summer Time) webkitRelativePath:  size: 202838,\xa0‚Ä¶}__proto__: Object```"
4282;I defined a struct to handle the data received on the server side like so:
4283;"```gotype createUser struct { Name string `json:""name""` Nickname string `json:""nickname""` ProfileImg []byte `json:""profileImg""` ImageName string `json:""imageName""` Mimetype string `json:""mimetype""`}```"
4284;And it looks like []byte is not the right type to get the acutal `File` containing the image.
4285;So what should I choose then to unmarshal the data correctly?
4286;Thanks the only way I have been able to fix this was parsing the xml document and replacing the attributes with the xmldom package which is obviously not efficient. Figured there might be a better approach without having to rely on the publisher.
4287;"```govar tpl template.Templatefunc init() { //How this init function gets called automatically when running the program? tpl = template.Must(template.ParseGlob(""templates/""))}func main() { err := tpl.Execute(os.Stdout nil) if err != nil { log.Fatalln(err) }}```"
4288;This code is working fine but I was wondering how init function gets called automatically while running?
4289;thats what the runtime does
4290;It runs all init functions of every imported package
4291;oh okay i got it now
4292;"Any good way to avoid that a program can be copied?I had thinked about to get the mac addresses before of compile my software. Then at compiling there will be an unique ID associated to those address. And finally when the program is run it sends the mac addresses and the ID to the server to check if it is right; finally the program is run whether the server sends it an OK."
4293;You basically want to implement DRM ?
4294;"What happens if i parse json into a struct using fields like this?```goShiInvestmentAmount interface{} `json:""shi_investment_amount""````"
4295;Hardware fingerprinting. Mac address can be spoofed btw
4296;The ID can be altered as well
4297;Running `strings` or something to inspect the binary and change it
4298;Then there is the option to just MITM the phone home request
4299;@Sgt_Tailor I know that the MAC can be faked but I need a sort of machine ID
4300;Is there a way I can break a for loop based on a timeout?
4301;set a timestamp before you run the loop. check if you have passed that timestamp after every run :3
4302;Sure check a time.After channel with a select statement and a default
4303;@Sgt_Tailor yes this seems to be the way to go (seeing a similar example come by online)
4304;"hi guys how do you suggest I do a check for a string containing bad words""?say I have a list of bad words (for demonstration purposes only 1 for now: ass""How could I easily test for a string containing that word but only if it is an actual word? so like if i send the sentence You\'re an ass it gets flagged but not something like I\'m wearing glasses"". I will be having potentially 300 items in my list and so checking for every word in a message by spliting on space and removing punctuation can get time inefficient"
4305;Hey I'm trying to write some code inverts the colors of an image in golang... I have this code but my images are coming out looking weird:Code: <https://gist.github.com/SinistreCyborg/13ce03a9cc13180bb12e2800cb094f11>example run trying to invert the colors of my avatar image
4306;I'd say build a regex tbh
4307;`\\b(ass|foo|bar)\\b`
4308;@superloach good idea üëç
4309;and you'd need to escape and join if you want to build it from a list of words
4310;my regex will only contain full words so it should be fine
4311;fair enough :)
4312;@Cyborg `(color.Color).RGBA()` returns 16bit channels not 8bit
4313;so the easiest way would be to use RGBA64 and `65535  r` etc.
4314;or you could divide the values
4315;Ohhhhhh that's why
4316;ty
4317;hey guys is there ever an excuse to use a go routine inside a http handler without handling the response? I am currently running some database queries that act as a keep alive inside a go routine which just logs any errors as the user does not really need to know if it fails only the developer does... Is this a valid reason or should I make the user wait for the database responses?
4318;sure you can concurrently send a keepalive heartbeat
4319;You probably don't need to run a query though
4320;sorry I think this was really badly worded. I basically want to delete a file after a certain amount of time unless a user is currently downloading it in which they will send a keep alive request over websocket. On the server side this just increases the timestamp in a db row. What I am wondering is whether it is bad practice to do an update query in a go routine (that could fail for some reason) and just log any error or not rather than returning a response to the user or is this abusing go routines?
4321;that's a pretty convoluted way to do that tbh
4322;just delete the file when the download is complete
4323;or create a ticker and only delete if it's not being downloaded
4324;else wait for the next tick or something
4325;no need to involve a database
4326;where would the ticker be stored?
4327;@superloach im completly horrible with regexes but say that the regex is just `\\b(a|b|c)\\b` and my message is just `a` it doesn't seem to match with the regex. Is that as expected?
4328;"I\'m using `var bwRegex = regexp.MustCompile(""\\b( + strings.Join(badWords |"") + )\\b"")`"
4329;side note do you guys reccomend any log level libraries?
4330;like pythons `logging`
4331;and something I could add middleware to like sentry
4332;logrus is the best IMO @ohnny
4333;Instead of relying on regex I would range over the words and check them. But word lists are easy to avoid
4334;A$$
4335;A S S
4336;A.S.S.
4337;@Sgt_Tailor the issue is that i need to also range over every word in the message then
4338;amazing thanks
4339;this isn't really my issue though just following orders from my client x)
4340;Regex does the same but obscures that logic
4341;yeah but it's nicer with stuff like punctuation
4342;so it will still match with `you're an ass!!!`
4343;hmm I thought `\\b` would also match `^|$`
4344;you could always change them to `(?:\\b|^)` and `(?:\\b|$)` but there should be an easier way
4345;it matches on https://regexr.com but not in my actual app
4346;which is weird
4347;yeah different regexp flavors
4348;ah
4349;of course thats a thing
4350;<https://pkg.go.dev/regexp/syntax> has docs
4351;the definition of `\\b` looks like it should work though
4352;```\\b at ASCII word boundary (\\w on one side and \\W \\A or \\z on the other)```
4353;let me see if it works with the non capture group
4354;alright
4355;ah wait  try putting the expr in backticks @hhhapz
4356;```govar bwRegex = regexp.MustCompile(`\\b(` + strings.Join(badWords `|`) + `)\\b`)```
4357;normal strings might be escaping weird
4358;kk that wrked
4359;awesome
4360;of course xD
4361;cant believe I forgot that
4362;yeah lol it just slipped past me
4363;quick test shows that was producing the backspace character lol
4364;makes sense
4365;"how can I get the first Key Value pair of a ```gotype authPair struct { value string user string}// credentials := viper.GetStringMapString(""auth_credentials"")var username password stringfor u pw := range credentials { username = u password = pw break}```Is this the best way?"
4366;why not just `credentials[0]`?
4367;@Monique i think it's a map
4368;@meat unfortunately due to optimizations it isn\'t possible to get the first value of a map as they are stored as hashes for quick lookup.
4369;afaik the best way is to just range over it but even that isn't going to be the exact same every time
4370;Oh yeah it's a map mb
4371;Define first value
4372;also what kind of map is this
4373;should `u` be an int?
4374;In what order? Insertion? Natural sorting order?
4375;What is this awful thing to the left and how do I get rid of it?https://f.lieuweberg.com/BU7Ean.png
4376;Or is it like a map[string]string?
4377;@lieuwe_berg it‚Äôs there new page
4378;It‚Äôs actually fairly useful if you are searching for something but forget the name
4379;@lieuwe_berg its much better this way and it works amazingly on mobile device
4380;@Str≈ìm i think he wants insertion as in the configuration file
4381;@lieuwe_berg are you referring to the scroll bar?
4382;yes
4383;I see how it can be useful but I usually just scroll to the top for the index
4384;This only makes it off center
4385;"it's an issue in a couple of sites; i suggest using some extension i recomend stylus"
4386;The mobile site is much better now too
4387;https://chrome.google.com/webstore/detail/stylus/clngdbkpkpeebahjckkjfobafhncgmne @lieuwe_berg
4388;in the options you can select a much nicer scrollbar for all websites
4389;https://github.com/StylishThemes/OverlayScrollbarsthis is the particular theme
4390;Oh I didn't mean it like that
4391;I meant much like github where the about area is no longer above but instead next to the content putting it all offcenter
4392;this is what it looks for me
4393;yeah with the scrolling list not in the middle
4394;im sorry but i dont actually understand what the issue is still lol
4395;https://f.lieuweberg.com/dit4AB.png
4396;that is almost what it used to be right?
4397;thats the old website
4398;almost yes
4399;but now when you scroll far down it is just that everything is moved a bit to the right
4400;it's just my ocd lol
4401;ü§∑\u200d‚ôÇÔ∏è
4402;I preferred the index in the page itself above the constants
4403;you can probably do some custom css magic using stlus to hide the right bar if it really bothers you
4404;but im not sure what else can be done about it
4405;thanks for the responses and yes it is a map. Of `map[string]string`
4406;yeah there is no first index of a map in any language
4407;yes there are
4408;in ordered maps
4409;many languages have ordered maps
4410;@hhhapz thanks for linking overlayscrollbars I'd been meaning to look into something like that and hadn't gotten around to it yet lol
4411;windowsstyle scrollbars in firefox are ü§¢
4412;is `context.Context` used for stuff like flash messages on web backends or what should I use for such things
4413;wdym flash messages?
4414;Context can provide data for a context timeouts deadlines and cancellations
4415;Well for example if I did a login route and want to show a specific message on dashboard redirect i would need to save that somewhere. Is context the right tool for this? (server side generated btw)
4416;that would be up to your frontend
4417;and you either have a hardcoded message there or return one from your API
4418;Its template generated so essentially there is no direct API but only the webserver which does both frontend & backend
4419;But let's say I want to pass value X after redirect. Should I then save that in cookie read and delete?
4420;I'm not sure I follow
4421;Your template could contain the frontend aspect of the message
4422;and just set that value
4423;oh you're basically trying to pass a value through a redirect?
4424;Well in this case it is the following issue:A page where it lists stuff from the DB. You can click on an item you get redirected to the item page you click delete it deletes the item from db you get redirected to the page where it lists it again. Once deleted I want to set a custom message like Successfully deleted X and show that on the listing page
4425;yes
4426;there's like a million ways to do that
4427;query string param cookie form body etc
4428;context.Context is a purely back end construct
4429;^
4430;Ok
4431;Its from the backend for the backend
4432;I mean this would be backend2backend as the backend renders the frontend
4433;If you checkout the docs for it youll see the functionality it has
4434;they are completely dependent on each other
4435;And that it doesnt provide or discuss any mechanics for any frontend interaction
4436;But okay so I guess i'll go with query string. Seems to be the easiest
4437;> windowsstyle scrollbars in firefox are ü§¢@superloach all scrollbars on windows and linux are horrible. the mac ones are great and i sorely miss them on linux
4438;yeah just not sure where you see `context.Context` fitting in with that
4439;It just came to me as an idea that's why i asked ^^
4440;@Charlie contexts are great for when you're doing thing in goroutines chaining tons of functions together or generally doing a lot of multithreading where you want to be able to cancel the code or pass information
4441;`s/multithreading/concurrency/` but yes
4442;good concurrency enables efficient parallelism but they're not inherently connected
4443;?go concurrency
4444;Kavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_TailorUnderstanding channels <https://www.youtube.com/watch?v=KBZlN0izeiY>  Sgt_TailorRob Pike  Concurrency Is Not Parallelism <https://www.youtube.com/watch?v=cN_DpYBzKso>  Skippy
4445;Concurrency is not Parallelism
4446;exactly
4447;that rob pike vid really helped me grasp the core concepts behind concurrency in go
4448;it's definitely not a TRIVIAL idea to wrap your head around
4449;but it's very useful
4450;and it's really not too complex once you think about it with gophers :P
4451;just takes some good explaining
4452;Hi maybe I have missed something in to go validate docs but do you know if its possible to retrun the as a validation slice and not as a string? For example:`Key: Post.Slug Error:Field validation for Slug failed on the required tagKey: Post.Title Error:Field validation for Title failed on the required tagKey: Post.Content Error:Field validation for Content failed on the required tag`What would be 100% better`{`
4453;Sorry ```key: slugmessage: faile```
4454;idk link to the docs?
4455;https://github.com/gingonic/gin
4456;you gotta be more specific
4457;only six references to validate on the godocs https://pkg.go.dev/github.com/gingonic/gin?tab=doc
4458;and none of them are useful
4459;https://github.com/goplayground/validator
4460;This one sorry
4461;ugggh
4462;this is why i very quickly gave up trying to write my validation library
4463;this api stinkssssssssss
4464;okay well
4465;when you have multiple validation errors it returns https://pkg.go.dev/github.com/goplayground/validator/v10?tab=doc#ValidationErrors
4466;which is literally a slice of errors
4467;literally exactly what you need
4468;Hmmm ok is there a way or returning that? Cant see it
4469;> Hi maybe I have missed something in to go validate docs but do you know if its possible to retrun the as a validation slice and not as a string? For example:> Key: Post.Slug Error:Field validation for Slug failed on the required tagKey: Post.Title Error:Field validation for Title failed on the required tagKey: Post.Content Error:Field validation for Content failed on the required tag
4470;you already have it
4471;that string you printed out IS the slice of errors
4472;But in Vue is coming backing as a string?
4473;okay?
4474;that's because you're turning it into a string?
4475;in your go code
4476;"`g.JSON(http.StatusBadRequest gin.H{""error"": err.Error()})`"
4477;yes
4478;exactly like i said
4479;Sorry @deezy how do I return the slice?
4480;okay well
4481;first off
4482;`err` IS a slice
4483;already
4484;https://pkg.go.dev/github.com/goplayground/validator/v10?tab=doc#ValidationErrors
4485;again
4486;when there are multiple validation errors the `ValidationErrors` type is returned
4487;which is
4488;literally
4489;[]FieldError
4490;or whatever
4491;so you have a slice
4492;"``` g.JSON(http.StatusBadRequest gin.H{""error"": err.Error()})```in this line of code `err` is literally `ValidationErrors` which is `[]WhateverError`"
4493;you have your slice. the question is what do you ACTUALLY want to do with it
4494;Ah ok so I can basically loop over this and build up a nice array for Json?
4495;Slice Queue or LinkedList Queue Which I should use with Tree?
4496;sure
4497;i'm pretty sure that isn't a question that can be answered without any context Robin.
4498;Different data structures have different ideal use cases etc
4499;This is the error thats comingb ack though @deezy not `ValidationErrors` `var err error = g.ShouldBindJSON(&post`
4500;okay just
4501;immediately after that line
4502;"```fmt.Printf(""%#v err)```"
4503;> i'm pretty sure that isn't a question that can be answered without any context Robin.@deezy If I want to do operations on Max(int64) numbers?
4504;unfortunately i don't quite know enough about those specific data structures to offer meaningful advice
4505;Okay but which is fast Linked List or Slice? in deletion and insertion
4506;no clue
4507;if it actually matters you can write a benchmark
4508;if you can't be bothered to write a benchmark perofrmance isn't actually that important to you
4509;Pretty sure linked list aren't fastWith cache invalidation and yada yada it's actually pretty bad
4510;`validator.ValidationErrors{(validator.fieldError)(0xc0000baab0) (validator.fieldError)(0xc0000bab40) (validator.fieldError)(0xc0000babd0)}` Your right about the field errors just scratching my head about looping over it
4511;well
4512;the documentation may be helpful there
4513;https://pkg.go.dev/github.com/goplayground/validator/v10?tab=doc#ValidationErrors
4514;`type ValidationErrors []FieldError`
4515;it looks like ValidationErrors is literally a slice
4516;it IS a slice
4517;loop over it like any other slice
4518;None
4519;uh
4520;Saying that I cant loop over that particular type
4521;that's not even remotely how you loop over slices
4522;wait what
4523;paste the exact error
4524;`Cannot range over err (type error)` `var err error = g.ShouldBindJSON(&post)`
4525;OH
4526;god damn it
4527;INTERFACES
4528;okay so
4529;you have to convert `err` to the concrete ValidationErrors type
4530;i'd write something like this```govErrs ok := err.(whatever.ValidationErrors)if !ok { // only one validation error is present. write code that handles a singular erorr here}for e _ := range vErrs {}```
4531;i think i did that correctly
4532;Ok nice thanks deezy not sure what to do with the err.(whatever) though because I only get `err.Error()`
4533;i mean
4534;it's your code
4535;you wrote err.Error()
4536;delete it
4537;and do something different
4538;perhaps the literal code i pasted for you
4539;error is of type `var err error = g.ShouldBindJSON(&post)` It seems its not of Validation errors
4540;yes
4541;Apologies I just dont understand why theyre not passing back a slice
4542;None
4543;hi are you reading?
4544;okay so
4545;what happens is
4546;Lol yes But I havent a clue how to do that
4547;that function returns `error`
4548;error is an interface
4549;```gotype error interface { Error() string}```specifically this
4550;long story short the interface hides the true value that\'s being returned
4551;so you have to open it up and get the real value that's being returned
4552;which is what my code does
4553;Ok that makes sense but `convert err to the concrete ValidationErrors type` still confuses me
4554;How do I do that?
4555;bruhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh
4556;None
4557;i'm trying so hard to help
4558;I know you are mate and I appriciate it but its not sinking in/working
4559;None
4560;i mean
4561;is that even remotely the code i posted?
4562;```govErrs ok := err.(whatever.ValidationErrors)if !ok { // only one validation error is present. write code that handles a singular erorr here}for e _ := range vErrs {}```
4563;it's text you can just copy and paste it
4564;I did
4565;None
4566;you super duper didn't
4567;But I do not know what to put for this err.(whatever.ValidationErrors)
4568;Give me a moment
4569;that's the type conversion
4570;type assertion is the technical term i believe
4571;https://tour.golang.org/methods/15
4572;Yeah Im lost still I don't know what to pass to get the errors back but I appreciate your help
4573;Is whatever.ValidationErros something from gin?
4574;üò©
4575;https://pkg.go.dev/github.com/goplayground/validator/v10?tab=doc#ValidationErrors
4576;i've pasted that link like seven times now
4577;Ok thanks
4578;@deezy Thank you buddy working thanks for being patient lol
4579;`vErrs ok := err.(validator.ValidationErrors)`
4580;sorry i'm not trying to be a dick
4581;just wowzers
4582;anyways
4583;Nah your not Its just difficult to understand everything when your starting out
4584;once you have a ValidationErrors
4585;you should be able to `range` over it
4586;and do your thang
4587;Pefect looking good. Thanks again
4588;the interfaces thing tripped me up too
4589;Interfaces still baffles me lol
4590;teachable moment. no level of knowledge means you're done learning or practicing
4591;That‚Äôs true teaching I find is the best form of practicing
4592;that's why i'm here
4593;i'm too lazy to actually write code
4594;it's the only way to keep myself sharp
4595;Good man
4596;I checked out your GitHub you have some nice stuff on there
4597;i have
4598;let's say big dream
4599;and also big lazy
4600;"```gopackage mainimport fmt""type Node struct { age int name string}func main() { var queue []Node p1 := Node{12 alex""} p2 := Node{13 john""} queue = append(queue p1) // Enqueue queue = append(queue p2) //fmt.Println(queue) for len(queue) > 0 { fmt.Print(queue[0]) // First element queue = queue[1:] // Dequeue }}```What this warning message means? for the type Node struct`exported type Node should have comment or be unexportedgolint`"
4601;exactly what it says
4602;lint wants you to have comments on exported things
4603;Comment exported functions
4604;It starts with the name
4605;any example will be helpful
4606;So commend should look like `// Node defines an age / name struct`
4607;Just put it on top of your function / type
4608;https://blog.golang.org/godoc
4609;Yes its fixed thanks @Karitham
4610;At first I thought it was useless then reaching 5000 Loc and it was so useful
4611;hi I have a question about context usage. I'm using something similar to this code https://play.golang.org/p/A45mfHsjz2Q
4612;and as we can see the longRun function keeps running even after we get the timeout
4613;can we tell the longRun to stop after timeout? or this implementation is not correct?
4614;the context doesnt kill anything automatically
4615;it just allows you to tell when you should stop
4616;"you would have to do something like ```gofunc longRun(ctx context.Context) { select { case <ctx.Done(): return case <time.After(5  time.Second): fmt.Println(""Finish long running""); }}```"
4617;but otherwise there is no way to kill a goroutine once started
4618;it has to return in some way
4619;so the timeout per say needs to be implemented on the lonRun function
4620;"```gotype CanvasTextComponent struct { Text string `json:""text""` Style string `json:""style""`}func (c CanvasTextComponent) MarshalJSON() ([]byte error) { t := struct { Type string `json:""type""` CanvasTextComponent }{ Type: text"", CanvasTextComponent: c, } return json.Marshal(t)}``` Why would this cause a stack overflow?"
4621;Its recursive no?
4622;shouldn't be?
4623;or maybe it is
4624;because of the embeded struct
4625;Youre marshalling something with CanvasTextComponent
4626;Which calls MarshalJSON on itself
4627;Forever
4628;Yea so it would be recursive..
4629;dang
4630;ugh how would you go about implementing this?
4631;You gotta assemble the byte slice yourself :)
4632;```gofor len(queue) > 0 { fmt.Print(queue[0]) // First element,This element is removed is it still in the memory? queue = queue[1:] // Dequeue }```
4633;you havent actually removed anything
4634;you just made the slice smaller
4635;slices are just views of an array
4636;say your array is `{2 4 6 7 9}`your slice would see `{2 4 6 7 9}``{4 6 7 9}``{7 9}``{9}``{}`
4637;but the array is still `{2 4 6 7 9}`
4638;ahh right nice explanation
4639;so
4640;Should I assing them to 0 before decreasing the slice size? to actually remove them
4641;what are you doing? emptying the queue completely?
4642;```queue[0] = 0 // Erase element (write zero value) like this?queue = queue[1:]```
4643;> what are you doing? emptying the queue completely?@Madxmike yess
4644;is the type known
4645;like it is a `IntQueue` for instance
4646;No I want to do it on my Binary Tree Nodes
4647;what is the type then
4648;`interface{}`?
4649;repeat after me
4650;Reslicing a slice doesn't change the length of the backing array
4651;```type Node struct { Left Node data int Right Node }```
4652;okay thx
4653;> Reslicing a slice doesn't change the length of the backing array@Sgt_Tailor yes right
4654;and all of the nodes of this tree are stored in this slice right
4655;No nodes of tree will be stored in root node of type Node. I will use Queue to implement my Create Tree function only
4656;okay
4657;so you dont need to destroy the nodes
4658;just empty the queue
4659;Yess I was just wondering whether it was possible or not to destory memeory before reslicing
4660;because there is a difference there since you would have to do extra work to make sure all the pointers are nil if you were destroying the nodes
4661;so if the entire queue is just a bunch of values
4662;just create a new slice
4663;the old one will be gc'd
4664;okay will do this way.
4665;but just to make sure are the nodes in the queue all roots at this point
4666;left and right are nil
4667;"```c++void Tree::CreateTree() { Node p; Node t; int x; queue<Node> q;  root = new Node; cout << Enter root data:  << flush; cin >> x; root>data = x; root>lchild = nullptr; root>rchild = nullptr; q.emplace(root);  while (! q.empty()){ p = q.front(); q.pop();  cout << Enter left child data of  << p>data << :  << flush; cin >> x; if (x != 1){ t = new Node; t>data = x; t>lchild = nullptr; t>rchild = nullptr; p>lchild = t; q.emplace(t); }  cout << Enter right child data of  << p>data << :  << flush; cin >> x; if (x != 1){ t = new Node; t>data = x; t>lchild = nullptr; t>rchild = nullptr; p>rchild = t; q.emplace(t); } }}```C++ version of that function I am trying to convert this to Go code This is just one function from that C++ code of making Binary Tree"
4668;yeah
4669;well if you have a slice of Nodethen you need to itterate through the entire slice
4670;and set slice[i] = nil
4671;Yeeah exactly thats the right approach
4672;thanks
4673;it just varies based on the actual type going on
4674;like lets say you had a queue of ints
4675;you could just remake
4676;and everything would be fine
4677;yes right I got it now thanks :gopher:
4678;there is some portion of this i am forgetting or getting wrong i feel
4679;but its probably close enough lol
4680;Its okay you gave me enough idea what I have to do.
4681;the chad array bsaed binary tree
4682;you also could just use a list
4683;https://golang.org/pkg/container/list/
4684;its a doubly linked list implementation
4685;"```goqueue := list.New()queue.PushBack(""Hello ) // Enqueuequeue.PushBack(""world!"")for queue.Len() > 0 { e := queue.Front() // First element fmt.Print(e.Value) queue.Remove(e) // Dequeue}```List Version example I will try both ways"
4686;Hey guys I'm pretty new to golang. I'm having this issue where I want to split my string that I get from standard input
4687;```reader := bufio.NewReader(os.Stdin) numberIntegers _ := reader.ReadString('\') numbers _ := reader.ReadString('\') numberArr = numbers.split( )```
4688;this is giving me an error
4689;strings don't have methods
4690;`strings.Split(numbers  )`
4691;and also you're not initializing numberArr
4692;that too
4693;oh I have to initialize it first
4694;`numberArr := strings.Split(numbers  )`
4695;probably just use `:=`
4696;alright gonna try that
4697;not sure if you mean to read two lines from input as well
4698;yea it's a coding challenge I'm doing. The two lines of input are required.
4699;anyways I've tried the thing and it's working thanks üòÑ
4700;Anyone know a quick and easy way to ensure all values in a slice are equal to each other?
4701;loop and check
4702;yeah write a loop
4703;couldn't possibly get quicker and easier than that
4704;What is better:http.Error(w 404 not found 404) orhttp.NotFound(w r)And do I need to use these when my api get\'s a POST request or just simply \'return\ ?
4705;well those are errors
4706;you'd use those when things go wrong
4707;ya but they do same thing What I wanna do is that if someone doesn not use correct auth and POST to my api I wanna ignore them so should I send them a response 404 error or nothing ?
4708;POST requests need to be given a 404 ?
4709;maybe you should look up what 404 actually means
4710;not found
4711;https://en.wikipedia.org/wiki/List_of_HTTP_status_codes
4712;yeah
4713;so
4714;is that actually what's happening?
4715;thre's probably another 4xx code that would be more descriptive
4716;if they get the auth wrong i wanna tell em this page doesn't exist technically the error should be 401 but that would give them a hint something exists here but 404 kills all possibilities of them trying again
4717;uhhhh
4718;haha pls correct me
4719;i mean that's not a super useful thing to do but whatever
4720;405 ?
4721;so you've decided what you want to do and how to do it
4722;what's the actual question now?
4723;is it okay to do it like this ? Does it really makes things better in any way ?
4724;i mean 401 is the most correct error
4725;whatever you're trying to accomplish by returning a 404 isn't going to work or accomplish what you want
4726;okay
4727;Imma go with 401 then
4728;thx man
4729;much appreciated
4730;> if they get the auth wrong i wanna tell em this page doesn't exist technically the error should be 401 but that would give them a hint something exists here but 404 kills all possibilities of them trying again@Lochiro why try to stop users from using a service tho
4731;If you have a user and they have wrong details you will just confuse them and make them angry.
4732;cuz there are going to be only 3 users
4733;you are right though in a proper application that totally make so much sense to give proper responses.
4734;this is a personel iot project and the api is for it
4735;so no one else knows about it
4736;and its not for public use
4737;Okay. But if other users face trouble they won't be able to read your mind if something goes wrong. Keep that in mind
4738;yah
4739;@Lochiro 404 is actually what you want if someone requests a resource they domt have access to @deezy
4740;Dont make the distinction between what exists that they can't access and what doesnt exist
4741;:thonk:
4742;but
4743;401
4744;literally exists
4745;so what I was doing is okay ?
4746;That lets an attacker know that the resource exists
4747;What. 404 is not meant for that
4748;That is an incorrect interpretation
4749;i mean i get the whole don\'t let people enumerate endpoints thing
4750;but
4751;seems like a lot of work
4752;@Sgt_Tailor
4753;I gotta go
4754;Que
4755;If thats an actualn issue with your api there is a fundamental flaw with your api
4756;Why the mention @Str≈ìm
4757;> if they get the auth wrong i wanna tell em this page doesn't exist technically the error should be 401 but that would give them a hint something exists here but 404 kills all possibilities of them trying again@Lochiro this
4758;It's up to you if you're going by the book 401 would be the most correct thing to return but you have the freedom to do whatever you want :p
4759;If you want you can give a custom error code of 69420
4760;I know GitHub is one example that 404s on an unauthorized resource
4761;No one is stopping you
4762;Gitlab as well
4763;404 when you don't have access
4764;I hate that gitlab does that
4765;So fucking much
4766;Basic security@hhhapz
4767;It's not security
4768;It's a stupid annoying feature
4769;No its security
4770;Could argue it is information leakage. Either is fine imo. But this is #offtopic
4771;hi!
4772;ive never acutally read golang errrors
4773;```gopanic: runtime error: index out of range [1]goroutine 350 [running]:main.compare(0xc001664000 0xc001680000 0xc001684000 0xc000f5bc20 0xc000f5bc80 0xc001692000 0xc00011420f 0x4 0xc000134300) /home/ubuntu/Scripts/hi.go:591 +0x83cdcreated by main.main /home/ubuntu/Scripts/hi.go:1070 +0x889```
4774;how can i interpret this
4775;big oof
4776;array out of range
4777;When it's used latest go.mod download the last version tagged but how to download the last commit after of the last tag?
4778;at hi.go
4779;hi.go like 591 is wrong
4780;probably wrong maths
4781;line 591
4782;which is called from hi.go line 1070
4783;It is called with a bunch of pointers
4784;@klensi `go get repo@branch`
4785;That will get the latest commit on that branch
4786;"log.Println(""setup not proper"")"
4787;this happens to be my code at 591
4788;chanSortMcginley[symbol] = make(chan float64 1000)
4789;and thats at 11070
4790;so i was confused how there is an error
4791;check your assumptions
4792;@klensi (you can also pin to a specific commit with `go get repo@commithash` but if you‚Äôre simply looking for the tip of a branch and don‚Äôt want to fetch the hash you can just use the branch)
4793;`panic: runtime error: index out of range [1]`
4794;it's literally telling you that you're requesting the index 1
4795;so
4796;at some point that variable is going negative
4797;ah i see the error
4798;its different in my IDE
4799;than in my script thats runnign
4800;intresting
4801;unlikely unless vscode or something didn't save the file yet
4802;yea i did n't save the file
4803;@Carson I used master and it worked. Thanks!
4804;cause im runing one on a server and one to edit
4805;oh 1070
4806;is the goroutine
4807;that was made
4808;and then the error is 591
4809;that is the stack trace. The error is at 591. The rest shows where the code is called from
4810;the function the error is in (compare) is called from `main` at line 1070
4811;ahhhh
4812;makes sense
4813;thank u so much
4814;first golang error read
4815;:/
4816;Does someone know already existing implementations of TICK stack monitoring middlewares for go web servers
4817;I use telegraf with statsd
4818;Then add some simple middleware
4819;I'll see if I find something to start with
4820;Seems hard to start with it
4821;You mentioned TICK so I assume you have telegraf running
4822;It has the <https://github.com/influxdata/telegraf/tree/master/plugins/inputs/statsd> input
4823;Yes but also integration statsd into the project seems quite complicated for me too
4824;With all those different things
4825;statsd itself is pretty easy to work with using a library
4826;<https://godoc.org/gopkg.in/alexcesaro/statsd.v2> for example
4827;You'll probably have to make the middleware yourself,but that is trivial as well
4828;It's just a really a lot coming from nothing in terms of monitoring
4829;```func middlewareOne(next http.Handler) http.Handler { return http.HandlerFunc(func(w http.ResponseWriter r http.Request) { // statsd stuff next.ServeHTTP(w r) // more statsd stuff })}```
4830;"```go// CreateTree functionfunc (node Node) CreateTree() { queue := list.New() var d int println(""Enter root value: ) fmt.Scanf(""%d d) root := &Node{} root.data = d root.Left = nil root.Right = nil queue.PushBack(&root) //Done creating the root node //Lets create child nodes for queue.Len() > 0 { p := queue.Front() queue.Remove(queue.Front()) // popped fmt.Println(""Enter left child data of  + p.data) //error on p.data fmt.Scanf(""%d d) if d != 1 { t := &Node{} t.data = d t.Left = nil t.Right = nil p.Left = t //error here queue.Remove(t) //error here } }}```"
4831;``Error1: p.data undefined (type list.Element has no field or method data) ``
4832;I found this https://github.com/netdata/gostatsd which I think has a good example ?
4833;``Error2:p.Left undefined (type list.Element has no field or method Left)``
4834;Not the most used statsd lib but should work
4835;``Error3:cannot use t (type Node) as type list.Element in argument to queue.Remove``
4836;All I can do is repeat the errors
4837;They are pretty clear
4838;what's the reason I am unable to assign the values
4839;The types don't match
4840;List does not match? with Struct of Node?
4841;type list.Element has no field or method Left
4842;cannot use t (type Node) as type list.Element in argument to queue.Remove
4843;Node isn't a list.Element
4844;and list.Element doesn't have a field called Left
4845;okay yes thanks
4846;I mean all I did was repeat the errors üòõ
4847;ü¶Ü
4848;23 hours of today spent creating binary tree. üò¶ Nothing worked. I am very big noob
4849;1 hour left and next day hits
4850;you might want to take a break then
4851;yes gonna try again tomorrow
4852;taking breaks is great for productivity
4853;there's diminishing returns on smashing your head into a wall
4854;Hi there @Madxmike I read your blog post and find it really good for go starters. In general your blog is really sexy looking
4855;oh shit i have a blog
4856;You do and it is really nice compared to my react spa landing page
4857;i havent felt in the writing mood the last month lol
4858;thanks
4859;i didnt make it
4860;its all a hugo theme
4861;I started several blogs and did not overcome the first post
4862;https://blog.hener.eu/
4863;This was my last try to start a blog. Didn't come further than Hello World üòõ
4864;https://blog.noahsc.xyz
4865;Imagine writing :KEKW:
4866;Everyone wants to say they have a blog
4867;No one wants to write for the blog
4868;mood
4869;so true
4870;gonna plug mine too
4871;https://blog.diamondb.xyz
4872;Oh I have to read the article about docker env
4873;Nice @Str≈ìm
4874;@JohnnyTheSmith thank you
4875;Also really nice theme
4876;Nice theme diamond
4877;So guys I have this really specific problem I cannot wrap my head around. I send a image base64 encoded over websocket to my backend server (frontend is react). I know for sure it leaves frontend side well by logging to console. At backend side I am able to receive the string as long as the packet send over websocket is not too long.
4878;I made a empirical study about it by generating images 1x1px 10x10px ...
4879;If I hit 10kx10k pixel the file will be 292kb big and the service will just stop working
4880;"Does anyone know reasons why ```go srv := &http.Server{ Handler: n, Addr: : + os.Getenv(""PORT""), WriteTimeout: 15  time.Second, ReadTimeout: 15  time.Second, } println(""Listening to Port  + os.Getenv(""PORT"")) log.Fatal(srv.ListenAndServe())``` works without any errors but when I try to connect it times out without logging anything on the server"
4881;But I do not get any error message or such on server backend
4882;well your server doesn't do anything
4883;it has no routes
4884;It has though
4885;not in your c ode sample
4886;stripped ofc here is more
4887;Server will just stop working and I even have to restart it to get it to work again. So any Idea how I can approach this issue?
4888;add more logging
4889;find out where it breaks
4890;"```go r := mux.NewRouter() r.PathPrefix(""/"").HandlerFunc(func(w http.ResponseWriter req http.Request) { utils.RenderNotFoundError(w) return }) n := negroni.New(/negroni.NewLogger()/)  n.UseHandler(r) srv := &http.Server{ Handler: n, Addr: : + os.Getenv(""PORT""), WriteTimeout: 15  time.Second, ReadTimeout: 15  time.Second, } println(""Listening to Port  + os.Getenv(""PORT"")) log.Fatal(srv.ListenAndServe())```"
4891;works on localhost btw
4892;windows pc in this case
4893;Is it a firewall problem then? Tried deactivating firewall on windows or add exception on corresponding port?
4894;Yeah researching that right now first thought it was a code issue because I changed something
4895;nah if it works locally then it's a system configuration issue ( e.g. firewall etc )
4896;exactly
4897;so if you are local admin to the windows machine hit `win + r` and then type `fw.msc`
4898;deactivate firewall for all 3 profiles temporary and test again
4899;Don't keep the firewall deactivated. If it works activate it once again and add corresponding inbound rule to the ruleset
4900;oh I think it might be `wf.msc` instead. Not quite sure
4901;golly goodness windows is gross
4902;Actually it was a firewall issue fixed ^^ (issue was on ubuntu btw so at least an easy fix)
4903;yeah not that easy as `sudo iptables A INPUT p TCP dport 80 j ACCEPT`
4904;Glad that you worked it out
4905;So someone willing to assist me debugging what is wrong with my app?
4906;add more logging
4907;find out where it's actually stopping
4908;THEN you can start debugging
4909;Well I do log the packet first time it gets in via websockets
4910;yeah no
4911;log more
4912;if it is a big file it will not log anything
4913;and if it is little I see the log
4914;idk man go code isn't going to just silently fail unless you tell it to
4915;"```gofunc (c Client) readPump() { defer func() { c.hub.unregister < c c.conn.Close() }() c.conn.SetReadLimit(maxMessageSize) c.conn.SetReadDeadline(time.Now().Add(pongWait)) c.conn.SetPongHandler(func(string) error { c.conn.SetReadDeadline(time.Now().Add(pongWait)); return nil }) for { var packet Packet if err := c.conn.ReadJSON(&packet); err != nil { logger.Info(""Got an Error reading the message from socket"") if websocket.IsUnexpectedCloseError(err websocket.CloseGoingAway websocket.CloseAbnormalClosure) { log.Printf(""error: %v err) } logger.Errorf(""Error reading message: %v err) break } logger.Infof(""packet content is: %+v packet) // Switch here over possible socket events and pull in handlers switch packet.Name { case createUser"": if err := HandleCreateUser(packet); err != nil { logger.Errorf(""Error when creating user: %+v err) }```"
4916;well this is the snip where the websocket gets the packet
4917;see where there is `logger.Infof ...`
4918;as soon as the packet hits the websocket it is supposed to be logged
4919;So let me quickly show you what is happening if it is working and what is happening if not
4920;"```go[20:19:41][MAIN] : time=""20200805T20:19:41+02:00 level=info msg=""packet content is: {Name:createUser Data:[123 34 110 97 109 101 34 58 34 116 101 115 116 34 44 34 110 105 99 107 110 97 109 101 34 58 34 116 101 115 116 34 44 34 112 114 111 102 105 108 101 73 109 103 34 58 34 100 97 116 97 58 105 109 97 103 101 47 112 110 103 59 98 97 115 101 54 52 44 105 86 66 79 82 119 48 75 71 103 111 65 65 65 65 78 83 85 104 69 85 103 65 65 65 65 69 65 65 65 65 66 67 65 73 65 65 65 67 81 100 49 80 101 65 65 65 66 103 50 108 68 81 49 66 74 81 48 77 103 99 72 74 118 90 109 108 115 90 81 65 65 75 74 70 57 107 84 49 73 119 48 65 99 120 86 57 84 105 48 85 113 72 101 119 103 52 112 67 104 7 ....```"
4921;"so this is logged out after parsing and looks like that:```go[20:19:41][MAIN] : time=""20200805T20:19:41+02:00 level=info msg=""Data is: {Name:test Nickname:test ProfileImg:data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9Ti0UqHewg4pChOlkQFXHUKhShQqgVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi5Oik6CIl/i8ptIjx4Lgf7+497t4BQrPKNKtnHNB028ykkmIuvyr2viKMECKIIiozy5iTpDR8x9c9Any9S/As/3N/jn61YDEgIBLPMsO0iTeIpzdtg/M+cYyVZZX4nHjMpAsSP3Jd8fiNc8llgWfGzGxmnjhGLJa6WOliVjY14iniuKrplC/kPFY5b3HWqnXWvid/YaSgryxzneYwUljEEiSIUFBHBVXYSNCqk2IhQ/tJH/+Q65fIpZCrAkaOBdSgQXb94H/wu1urODnhJUWSQOjFcT5GgN5doNVwnO9jx2mdAMFn4Erv+GtNYOaT9EZHix8B0W3g4rqjKXvA5Q4w+GTIpuxKQZpCsQi8n9E35YGBW6BvzeutvY/TByBLXaVvgINDYLRE2es+7w539/bvmXZ/P/OXcnQjwXIyAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5AgFDA8w7vSdwAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAMSURBVAjXY2BgYAAAAAQAASc0JwoAAAAASUVORK5CYII= ImageName:1px.png}""```"
4922;Right? So basically I could just transfer the base64 back to an image and write it to disk. That is what I am looking for
4923;This testfile was 1 by 1 pixel colored black with a size of 545bytes
4924;So if I repeat that with a file of 10k by 10k black pixels (size 292.6kb) it will stop working
4925;websocket messages have a max size iirc
4926;_How hard would a simple btree be? Me after trying to imlement the delete function: oww_
4927;i mean
4928;sending files over websockets is kinda weird
4929;to begin with
4930;@Madxmike I did increase the size to somewhat big (like 4mb without effect)
4931;@deezy okay so you think I should do it differently right?
4932;Might be a better way to do it
4933;But I have to send it in one go (no puns intended)
4934;Cause the createUser handler has to create the user in database and when the user is created the image has to be written to disk and be registered in database as well with the players ID as foreign key
4935;So should I handle this with a simple rest like POST request?
4936;yeah this is why i was saying it would be easier to do these types of things with http
4937;should I also do that for delete user as well and maybe create game?
4938;Well I have been dump the whole time it looks like
4939;On frontend site with react (axios) it will be really easy to make a post request to a API route I guess
4940;Oh boy I will have to refactor my app then. But if it is cleaner Code I'll go for it
4941;You guys are great. I mean my learning curve is so steep someone could slip and break his neck easily on it.
4942;i mean fetch is pretty simple
4943;yeah fetch is good as well üòÑ
4944;I am using axios for other things already so already got the dependeny ^^
4945;But I gonna target that another day ^^ See you guys. Thanks
4946;The build tag for macOS is darwin isn't?I'm using `// +build darwin freebsd` and it's working at FreeBSD but not at macOS
4947;umm
4948;there's a subcommand
4949;`go list` i think?
4950;that will print out all the options for GOOS/GOARCH
4951;it's somewhere in there
4952;it isn't `go list`
4953;@Madxmike they don't by spec though applications are free to implement their own restrictions
4954;it's one of the subcommands i've forgotten i guess
4955;oh okay
4956;is there any way at all to get a free code sign?
4957;a what
4958;digitial cert for exe files
4959;i'd be surprised if you could
4960;with gob you need to know the container type to decode
4961;it's kind of a problem for me my method takes `interface{}` to insert into the database
4962;but to decode I need to get a container right?
4963;i tried passing a slice to fill but you can use `[]int` as `[]interface{}` or something
4964;@deezy There is to remove the comma üòÄ
4965;Can someone help me to understand this go snippet? ```goch := make(chan os.Signal) signal.Notify(ch syscall.SIGINT syscall.SIGTERM) go func() { for { select { case <ch: cancel() } } }()```Thanks in advance
4966;Creates a channel for signals
4967;signals.notify will send OS signals to the created channel
4968;starts a new goroutines that waits for said signal
4969;If such a signal arrive cancel() is executed
4970;SIGINT and SIGTERM are send when you press ctrl+C in a terminal
4971;It allows the program to clean up instead of dying straight away
4972;How is this for a mega based Tree btw: https://play.golang.org/p/J2lxDsevrJQ
4973;doesn't reorder keys whatsoever
4974;okay someone explain this please
4975;```PS Z:\\Workspace\\gowebveiwtests> go run .package .: found packages main (main.go) and webview (webview.go) in Z:\\Workspace\\gowebveiwtests```
4976;You have files with a different package in the same dir
4977;that isn't allowed
4978;... well im just gonna say that isnt smart
4979;but makes somewhat sense
4980;You are only allowed to have one package per dir as the directory name is normally the package name
4981;Thanks @Sgt_Tailor
4982;Can't just mix and match them
4983;np Zane
4984;My Tree is so good that if you add sequential keys it is just a linked list KekW
4985;like i said it isnt smart but makes sense
4986;It is smart because it makes the logic of resolving packages 1000 times easier
4987;fair
4988;package > import path == path on filesystem == url to version control
4989;super galaxybrain
4990;I saw that potatoman
4991;sorry
4992;copypasted the ncurses ui from weechat
4993;accidentaly
4994;anyone know how i should solve my problem?
4995;idk man i suggested using a real serialization format like json
4996;well
4997;a bit heavier
4998;this is the same problem as pickle
4999;it looks attractive
5000;oh everything is just native and stored perfectly exactly as is it\'s so nice
5001;but it's a thin veneer covering a lot of hacky shit
5002;mhmm
5003;msgpack would be better if i needed something lightweight
5004;not in stdlib tho
5005;> heaveir> lightweight
5006;what does that mean
5007;well larger
5008;is shaving off 10% off the top actually important
5009;there will be a fair bit of fetching
5010;probably 10,000s of kv pairs
5011;sure that's fine
5012;consul/etcd do that with json just fine
5013;so here's a question
5014;did you write a benchmark identifying transmission bandwidth as a bottleneck/problem causing you to look for space savings?
5015;nope
5016;cool
5017;use json
5018;you're making life way harder than it has to be
5019;i'm just writing a db abstraction
5020;Humans are terrible at guessing
5021;yes and you're hung up because you're obssessed with optimizing a problem that doesn't exist
5022;Dont guess
5023;Work with data
5024;you can keep messing with gob or
5025;actually make it work with json
5026;Computers are complex. Dont make it more so by guessing
5027;ikeapack üòÇ
5028;:kek:
5029;@Ikkerens
5030;I feel advertised
5031;we see you king
5032;it looks good
5033;but yeah json seems really easy
5034;it's quite nice!
5035;and very universal
5036;I mean ikeapack is a serializer not a database though it can be used in conjunction very well with kv pairs
5037;everything in the universe speaks json
5038;so
5039;have you looked at badgerDB or bolt?
5040;"okay been a while since i programmed so a little rusty... but wtf go```gopackage mainimport github.com/webview/webview""func main() { debug := true w := webview.New(debug) defer w.Destroy() w.SetTitle(""Minimal webview example"") w.SetSize(800 600 webview.HintNone) w.Navigate(""https://en.m.wikipedia.org/wiki/Main_Page"") w.Run()}``````gomodule webviewfuckgo 1.14``````PS Z:\\Workspace\\gowebveiwtests> go buildcan\'t load package: package webviewfuck:main.go:3:14: expected \'STRING\ found \'.\'```"
5041;i'm using badger
5042;they're wrapping badger
5043;and storing raw dobs inside it
5044;üôÉ
5045;ah yeah I'm personally using ikeapack combined with badger so fwiw it works great üòÑ
5046;probably will make an sqlite driver too
5047;might as well
5048;why is it complaining about a normal import
5049;wtf
5050;what is that in go.mod
5051;oh wait.... forgot to save file
5052;kekw
5053;do a `go mod tidy`
5054;nah i just forgot to save the file
5055;Every time i see that error
5056;People forgot to save the damn file
5057;maybe time for an autosaving IDE? xD
5058;hell nah officer tenpenny
5059;Hell yea
5060;:kkk_chad:
5061;I think ive disabled autosave coz autoformat is annoying that way
5062;bad idea
5063;I just save every few keystrokes
5064;goland autosave good
5065;oh god
5066;Its habit at this stage
5067;jetbrains
5068;vimgo is chad
5069;everybody has their preference don't jetbrains shame me
5070;alright
5071;the devtools look pretty detailed
5072;imean the tooling
5073;i save when i run
5074;idk why you'd need to save
5075;more
5076;than that
5077;Every keystroke
5078;Never have issues from not saving
5079;:kkk_chad:
5080;> be me> :w every line
5081;noooooo
5082;i should make it save after every keystroke bruh
5083;you can't just do IO for its own sake!
5084;ok @Ikkerens ima give ikeapack a try
5085;Should be fairly simple it has 3 functions 2 interfaces and (selfbrag) has 100% test coverage
5086;i see your a potato (or not) too
5087;wait do i still need to know the target type?
5088;yeah?
5089;the type you unmarshal to
5090;why is that an issue :Thonk:
5091;cos i'm just serializing `interface{}`
5092;so the caller must pass a container to unmarshal to?
5093;problem is that needs to be in an array which is causing issues
5094;Correct
5095;oh for marshaling?
5096;you can serialize an interface{}typed value as long as the underlying type is something that works
5097;so you still have to know what interface{} thing you're passing into the fn
5098;and unmarshal into `interface{}`
5099;And when you're not sure you can always implement the interfaces for your custom array type
5100;why are you unmarshaling into interface{}
5101;I'm either missing a very important detail here or the answer is straight up no
5102;basically you have to know the type of your values at some point you can't just deserialize into interface{}
5103;^
5104;because different consumers of the driver are marshalling/unmarshalling differnet things
5105;ok
5106;"if this is what you\'re doing: ```govar v = string""doStuffPls(&v)func doStuffPls(v interface{}) { thing.Unmarshal(v)}```"
5107;this works
5108;that's why i keep suggesting json. all of this interface{} stuff and not knowing what types you're handling you're working with is bad voodoo
5109;note that I'm not unmarshaling onto the interface
5110;I'm passing the interface asis
5111;still need to know if it is a map or array when unmarshaling Deezy
5112;sure
5113;this will not work: ```gofunc doStuffPls(v interface{}) { thing.Unmarshal(&v)}```
5114;this means unmarshal onto an interface which is ambiguous and is an implementation detail
5115;in slices you just pass a `&` to the slice?
5116;on the topmost function (the function that you call w/ the slice) you call it w/ a reference to that slice
5117;so
5118;"```govar sl = []string{""a""}doStuffPls(&sl)```"
5119;doStuffPls must pass the interface as it is all the way to ikeapack's Unmarshaler
5120;or anything's Unmarshaler
5121;and you can deserialize into an element of the slice?
5122;wdym
5123;like into a value in a slice?
5124;yeah
5125;"```govar sl = []string{""a""}doStuffPls(&sl[0])```"
5126;and doStuffPls can fill the slice itself?
5127;that's not filling the slice that's filling the first element of the slice
5128;because you asked for an element
5129;if you ask for a slice..
5130;<an> element
5131;slice
5132;element
5133;note the [0]
5134;https://hastebin.com/erigixamiq.cpp This doesn't do what I want it to. I want it to update v.Type
5135;Do I need to add reflection here? is there any way that I can just statically set the type?
5136;is comp type interface{}?
5137;`comp = v` shouldn't be needed
5138;you could do
5139;"```go switch v := comp.(type) { case CanvasButtonComponent: v.Type = button"" case ...:```"
5140;that should be it
5141;note that I asserted to a pointer type
5142;that is required
5143;Let me try that out
5144;thanks üòÑ
5145;yea np
5146;Curious can I go from a map to a struct?
5147;sure
5148;"```gos.Key1 = m[""key1""]```"
5149;lather rinse repeat
5150;"Let\'s say that I have a struct that looks like this: ```gotype C struct { Type string `json:""type""` X string `json:""x""`}``` but the actual struct is different per type and I would like to have proper types (no interfaces preferable). Is this even possible?"
5151;well the real first question is why do you need to wrap this like you are
5152;wym wrap?
5153;the api that I am using is dumb..
5154;if you want a single solution for all types then not without reflect
5155;they take json to create a little UI
5156;the json has an array of a bunch of types
5157;you can probably use interface{}
5158;or you can use your own interfaces if you need to
5159;```gotype Thinger interface { SetThis(thing T)}```
5160;then just throw `[]Thinger` into the json marshaler
5161;reflection will do its magic
5162;Yea but how do I get it out?
5163;good question
5164;LOL
5165;yea that's hard
5166;do you already know the types of each element?
5167;not the possible types but the exact types of each element
5168;if not then you'll need a way to distinguish between objects
5169;in the Type field (each struct has one)
5170;ok so
5171;do this
5172;this might be a bit wasteful
5173;```gotype S struct { Type string raw json.RawMessage}```
5174;but you'll have to put up w/ it
5175;switch type and unmarshal raw again with proper type
5176;ouuuu
5177;I don't thikn that works
5178;I like that
5179;Raw  but yea. It should work?
5180;the raw json message field won't be touched
5181;ehh
5182;I think it's going to expect something liek this
5183;"```json{""raw"": {} type"": 1}```"
5184;which I don't think is your json structure
5185;my idea is similar though
5186;Let me test it out
5187;try the same type but w/ an embedded json rawmessage
5188;actually no that probably won't work
5189;what stdio said is what i was going to say
5190;fuck
5191;ok you'll still need an UnmarshalJSON w/ stdio's plan but I see how it is now
5192;oh wait
5193;sigh
5194;hey guys when pushing a github repo without tagging which contains a module in it and then trying to `go get u all` it as a requirement from another package it does not pick it up  still the older version...
5195;I wonder if you could embed an interface
5196;https://play.golang.org/p/DkeBIOlFNWh
5197;yeah a value interface field
5198;my method is a bit different
5199;wait that wouldn't work if that is the only example
5200;All the fields are on the same level
5201;not nested
5202;when I remove from the go.mod and then run `go get u all` it fetches `v0.0.02020080520460805c07fb6dc3c` even though that is a commit behind
5203;"```gotype T []Thingerfunc (t T) UnmarshalJSON(b []byte) error { var raws []json.RawMessage if err := json.Unmarshal(b &raws); err != nil { return errors.Wrap(err Failed to get array"") } var typeV struct{ Type string } for _ raw := range raws { if err := json.Unmarshal(raw &typeV); err != nil { return errors.Wrap(err Failed to get type"") } var v Thinger switch typeV.Type { case Thing1"": v = NewThing1() // return T or any pointer } if err := json.Unmarshal(raw v); err != nil { return errors.Wrap(err Failed to unmarshal value"") } t = append(t v) } return nil}```"
5204;there
5205;@Teddy ^
5206;You're a wizard
5207;@ohnny do `go get dep@1230103123u1h312h31`
5208;random bits being the commit hash
5209;that'll force the cache to recheck remote
5210;awesome
5211;thank you
5212;do you guys rate limit IP addresses in chi?
5213;yyeah
5214;do you use tollbooth?
5215;yes
5216;i hate it
5217;but yes
5218;Hey is there a way to convert a C# source to Go since i am not that good sadly
5219;no
5220;why
5221;cause: > since i am not that good sadly
5222;lol
5223;yes but actually no
5224;converting one language to another is a lot more work than it sounds
5225;I'd recommend just learning the language
5226;you can ask questions about porting C# to Go here and people can try and help you on that
5227;honestly just do the same things
5228;if you don't know how to replicate something google or ask here
5229;yea just do it bro
5230;Does checking the type of a struct have any performance overhead?
5231;curious how I should research this
5232;type assertion from interface{}?
5233;yeah
5234;or a custom interface for that matter
5235;according to zerpho:> i think it's a 128bit compare in total but yeah should be fine
5236;asserting to a concrete type is p cheap
5237;asserting to another interface isn't
5238;ah
5239;I have a number of structs which have to satisfy an interface. I was type checking everything against a struct then using the interface as the last element in the type switch
5240;Would that technically be ok since the last type/interface check shouldn't happen often?
5241;https://play.golang.org/p/_s7ZQMzzGe8
5242;like this
5243;what do you need the last case for
5244;that could just be a default
5245;since i is already of the same type
5246;left it in there just as a test tbh
5247;btw @_diamondburned_ it worked. I appreciate the help
5248;i had it at the top previously to check if it called forgot to remove it after moving it to the bottom :P
5249;so would this way of doing it be ok do you think?
5250;yea np
5251;@Lomomn yea sure
5252;nice thanks :)
5253;yeah your playground looks good
5254;this doesn't feel too weird to do either and it would make a sort of multiple inheritance sort of possible right?
5255;its not inheritance
5256;>sort of inheritance
5257;Person is not a Entity
5258;more composition
5259;a Person is composed of an entity
5260;yeah ik but in terms of languages which support inheritance it feels a bit like it
5261;its an important distinction
5262;that's what i mean
5263;because go doesnt support inheritance
5264;https://en.wikipedia.org/wiki/Composition_over_inheritance
5265;that's why i said sort of inheritance
5266;discord just updated and it loads slower than ever
5267;and its not going to work like it
5268;in simple cases like this yes
5269;its going to be basically the same
5270;yeah that's all i cared about in this case
5271;but even like this `Overrides Entity.Talk`there is no overriding here
5272;it just calls the Talk method on Person instead of Entity so functionally it's the same for me
5273;my wording was wrong sorry
5274;im just wanting to point it out
5275;because it works until it doesnt
5276;and then you have a bit ol mess
5277;yeah ahah this was as complex as I want it to get
5278;> Does checking the type of a struct have any performance overhead?@Lomomn it compiles down to pointer comparation
5279;Interface.type = target_type
5280;so tldr not much?
5281;As if u were using `if` statementNot much
5282;bruh is it that long for a tldr
5283;tldr: no
5284;?????????????????????????????????????????????????????????????????????
5285;thanks :) @Laevus Dexter
5286;tldr:
5287;i mightve asked this before but is there a way to format kitchen time to get the seconds?
5288;or some other way
5289;i believe i mightve asked but i lost it
5290;well the format strings are just strings
5291;so you could copy/paste them
5292;or
5293;"`time.KITCHEN_SINK + %seconds""`"
5294;whatever it is
5295;i see u can do like
5296;custom ones
5297;hmm maybe urs is actually easier
5298;i could jsut do time.seconds and make that a string
5299;but i would have to insert it before the PM/AM
5300;You can make a custom time string
5301;And have it be parsed our however you want
5302;It‚Äôs all in the time docs
5303;will it understand taht i want 12 hour time?
5304;Diamond has a tool for it too
5305;I forget
5306;yea im looking at the docs rn for time
5307;@_diamondburned_
5308;i lookt here first now but if i dont understand how to procede i come here
5309;could u give an example
5310;of the parsing
5311;I‚Äôm in bed on my phone
5312;Each of those characters in the parse string mean specific things
5313;The docs layout what each character means
5314;If you check the constants you will see they are just strings of those characters
5315;Just like %d in a fmt function means a specific thing
5316;alright!
5317;https://godate.diamondb.xyz/
5318;thank u sm and @deezy
5319;this is the same formmating as strftime but how do i feed it hte format
5320;bruhhh
5321;https://golang.org/pkg/time/
5322;"```gotimeZone _ := time.LoadLocation(""America/New_York"") currentTime := time.Now().In(timeZone) newTime := currentTime.Format(""3:04:05PM"")```"
5323;i was able to format liek this
5324;https://golang.org/pkg/time/#Time.Format
5325;yeah that should do it
5326;it is not in the godocs lmfao
5327;what isn't?
5328;hence the external website
5329;Format()?
5330;no no
5331;his strftime conversion thing
5332;https://golang.org/pkg/time/#pkgconstants
5333;It literally describes how to make the string btw
5334;But yeah the tool is cool
5335;thank u sm
5336;big help
5337;Hey i have an issue with console
5338;go build ldflags s w H windowsgui
5339;even when i build using this paramater
5340;sometimes console still flashes
5341;on the screen
5342;is there another way to remove console?
5343;does golang has a song?
5344;I mean I think I reinvent my app and make it sing üòâ
5345;ive heard that go can be used to make android apps how dose ut compare to java based apps?
5346;bad
5347;obviously
5348;"Java has native support on Android; it's probably the easiest choice"
5349;short answer: don't do itlong answer: please don't do it
5350;you still need Java tools to build Go applications on Android as well
5351;but if you really want to then there's qt
5352;qt works on Android since forever but Go qt seems to have support for it as well
5353;i see lol
5354;if you dont like java use kotlin instead
5355;what would you say are the best uses for go then? just serverside?
5356;heard of go and am wondering when it should be used over other languages
5357;i recommend for the qt stuff https://github.com/therecipe/qt I have just found it btw
5358;networking systems serverside devops cli
5359;qt is an option i didn't think of but i personally wouldn't find it ideal
5360;yeah that qt
5361;the only qt
5362;so in otherwords more for backend then actual apps
5363;what is actual apps
5364;go can serve web pages so
5365;that\'s about as actual app as you need to get
5366;what you say if my server side is in pure golang and my front is in go binding for qt... can it work for desktop? maybe even mobile?
5367;cause ya know
5368;it's 2020
5369;@museyoucoulduse im sure that could work
5370;but java would do it better...
5371;then go write java
5372;do you have an actual specific question about go
5373;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
5374;@museyoucoulduse yes
5375;pretty much answered go is best for server side stuff more then not
5376;qt takes a deadass long time to compile
5377;but it's probably more worth it than Java
5378;honestly if you're going to use java might as will switch to kotlin
5379;I've made like 34 GUI applications myself in Go
5380;but thats not relevant
5381;maybe more
5382;TUIs too
5383;well i'm not sure if it could be only in web because it's audio app and I have some cool images of web audio apps in mind that never really worked in production for long
5384;can you tell me if working audio app should be neccessairly on desktop or should I pursue a mobile by what I think javascript
5385;@hhhapz why kotlin over java for android specificly? i thought it was more for cross platform apps
5386;kotlin is what android documentation recommends
5387;and examples are given in kotlin by default
5388;kotlin is a superset of java in this context
5389;it is fully interoperable but it also allows cross platform development for ios in the mobile world
5390;although kotlin/native is still young and this topic is offtopic
5391;@museyoucoulduse I wouldn't say JS and mobile go well together
5392;you can do it it's React Native
5393;but I wouldn't recommend
5394;k sorry about that
5395;I wouldn't recommend JS for anything really
5396;except maybe progressive web app
5397;react native is pretty good
5398;I don't like it
5399;it feels slow and buggy
5400;I've only used it on iOS though
5401;fair
5402;what big features dose java have that go dosent?
5403;this isn't a place to discuss this bro
5404;look at the channel topic.. go topics
5405;i feel liek you're asking roundabout questions that are hiding the true intent of your questions which is what you should try researching
5406;^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
5407;ok back to topic: how would I call c++ library from go code?
5408;https://golang.org/doc/faq#Do%5FGo%5Fprograms%5Flink%5Fwith%5FCpp%5Fprograms
5409;yeah I have read a cgo but more specifically I would like to ask about swig
5410;I'm not entirely sure how to approach that
5411;did you try searching up swig tutorial with golang or anything similar
5412;I'm sorry not yet
5413;just asking...
5414;theres tons of resources
5415;ok will use the parent of golang  google tho üôÇ
5416;I'm in the pursuit of creating digital audio workstation
5417;just to clarify the needs
5418;but I'm not an engineer just an associate degree in IT so it might take some time to learn the maths
5419;oh man
5420;audio was fun
5421;I remember tinkering around w/ making a voice client for Discord
5422;that was about as much as poking around random magic numbers until things work
5423;do you know exactly what I'm looking for?
5424;there are some libraries
5425;but still I want to edit audio midi and mix with effects
5426;nothing special
5427;and yet there is still no go get daw  the lazy me
5428;first you need to break down
5429;what is a digital audio workstation
5430;while there is something for javascript https://www.npmjs.com/package/webaudiodaw
5431;what does it do?
5432;ok like I said editing and recording audio and midi with mixing and effects
5433;okay so then figure out how to do each of those things individually
5434;then bring them together
5435;figure out how to record the audio
5436;figure out how to edit the audio
5437;then figure out how to add in multiple clips together
5438;``` reverb : { wet : .4 },```
5439;w e t
5440;wet is the amount of fx applied üôÇ
5441;for your pleasure
5442;oh man
5443;yeah music is somewhat deprived
5444;if you really think audio processing is as easy as some libraries like npm then I have news for you
5445;fft
5446;dsp
5447;guys I'm lost in the woods
5448;yeah you can do like 90% of interesting things with audio processing just with filters
5449;and then 9% is synthesis and 1% is other stuff
5450;synthesis isn't terribly hard but sometimes hard to make fast enough though
5451;so the first thing should be playing audio
5452;then I think recording
5453;when I get there I should make my app able to process it
5454;and save on the disk
5455;burn on CD
5456;or smth...
5457;https://github.com/golang/go/issues/18497 might have some interesting links for you
5458;(the proposal itself seems unlikely to ever happen)
5459;so why go does not have audio package?
5460;no one has both the knowledge and time to make and maintain one basically
5461;what language has an audio package in stdlib?
5462;python has some stuff
5463;webaudio api
5464;this? https://docs.python.org/3/library/wave.html
5465;javascript
5466;matlab has fft builtin :cirSmug:
5467;javascript is ambiguous
5468;you're talking strictly the browser's API
5469;nodejs stdlib does not have audio
5470;<https://docs.python.org/3/library/audioop.html>
5471;bruh
5472;https://docs.python.org/3/library/winsound.html
5473;yeah python has a number of things in this direction because most of its stdlib predates the idea of package repositories
5474;same with java
5475;can I use the proposal's audio buffer interface as the building block of my app?
5476;I'd recommend you to use third party libraries
5477;There's really no reason to copy a skeleton out of a GitHub issue
5478;if i wanted to make a server whose purpose is to request a websites raw html take the parts of the html needed (the word count description of and link to all articles on it) and show the resaults on a webpage would you recomand golang?
5479;sure
5480;wouldn\'t be it much more desired to format a meter representation of an audio stream appwise before even implementing channel strip using anything outside the scope of my code?
5481;that's called crawling btw
5482;@museyoucoulduse you could go that way yeah
5483;although the external libraries does not know about my meter representation so what\'s then?
5484;I hate that part of coding  that's called planning and designing
5485;You write your own
5486;or make a glue code is that the right term?
5487;convert output of one library to fit in my interface
5488;and they are written in c++
5489;that's quite hard
5490;Mum I'm going to climb on Mount Everest  Don't worry child you're not the first...
5491;Thank's for help. Have a nice day üôÇ
5492;hey yall I'm trying to specify a port in a `GET` request using net/http similar to something like `curl 127.0.0.1:8080`. Can anyone point me in the right direction for doing this?
5493;https://golang.org/pkg/net/http/
5494;oh
5495;i mean you gotta be more specific about where you're stuck
5496;"sure it seems like `127.0.0.1:8080` isn\'t valid to pass into the standard `Get` function. I get the error:` parse 127.0.0.1:8080"": first path segment in URL cannot contain colon`"
5497;I've looked into using the Request struct and just building it myself using http.Client but i ran into the same issue
5498;try `http://localhost:8080`
5499;ü§¶ that fixed it
5500;thank you deezy !
5501;https://i.imgur.com/GPqaZ5R.png tf this piece of code gets detected as Behavior:Win32/DefenseEvasion.UM!ml
5502;wut
5503;oh
5504;that's hilarious
5505;yea lmao
5506;https://i.imgur.com/ew4Isf9.png
5507;hurr durr http request bad
5508;litterly i delete that code
5509;and it runs fine no virus detection or anything
5510;big brain microsoft
5511;https://i.imgur.com/2z01AjV.png
5512;autisim
5513;litterly just remove it and it works tf
5514;i just comment out the function call and it works defender is on some crack
5515;Windows be like
5516;I haven't even dealt with an antivirus in years
5517;yeah i haven't used one in like a decade
5518;is there any other get package?
5519;is there something similar to pm2 for go that i can use to run my rest api?
5520;someone recommended supervisor but it looks a bit confusing
5521;use systemd
5522;supervisor bloat
5523;pm2 bloat
5524;use what's already there
5525;@Bart there's fasthttp
5526;Though I really don't think Go is to blame here
5527;used https://github.com/gojek/heimdall
5528;and no more issues with defender
5529;Is anyone aware of a library that i'm able to ask it to execute a function... and have it execute that function for example 5 times waiting for 2 seconds inbetween?
5530;and if it's exhausted the number of iterations it will return an error
5531;you can write that sort of thing yourself sounds easy enough
5532;Yeah...
5533;doing just that üôÇ
5534;:thumbsupblob:
5535;what is the best way to get the memory address of the current password autofill dictionary in google Chrome in go
5536;:KM_Dorime: this is a joke question
5537;wait i had a thought
5538;@Bart > https://i.imgur.com/ew4Isf9.pngCNC is short for Command and Conquer in malware domain especially for botnets. That might be the reason that the antimalware is detecting it as a malware because it normally checks strings in your executable as a common heuristic.
5539;wow that'd be so weird
5540;I use martini renderer
5541;how to make it pass more than one variable?
5542;"```gopackage mainimport github.com/gomartini/martini""import github.com/martinicontrib/render""func main() { m := martini.Classic() m.Use(render.Renderer()) m.Get(""/ func(r render.Render) { type ThingsToRender struct { name string age string } r.HTML(200 ThingsToRender{name:\'EEOO\ age:""900""}) }) m.Run()}```"
5543;is there a way to bypass (on windows) The process cannot access the file because it is being used by another process
5544;Im making a multithreaded app and the configuration file is leading to issues due to other apps that i made accessing it at the same time
5545;Hi Gophers! How does one make a Function execution always take the same time? Usecase: Mitigate userenumeration via timing attacks against a web API. It should make the execution time always the worst case runtime of a function.
5546;Go function execution times are always going to vary a little
5547;And execution time is also obviously different on different hardware
5548;Also unless you're running you system in a realtime mode pretty much any function in any language will take variable time
5549;Depending on how the system is scheduling processes and threads
5550;hello how to decode `\\u002F`like to `/` ?
5551;https://golang.org/pkg/strconv/#Unquote
5552;That should only be a problem with crypto shouldn't it?
5553;@Doad I have run it on Example
5554;```v mb t err := strconv.UnquoteChar(`https:\\u002F\\u002F` \\u002F')```
5555;Result:```value: hmultibyte: falsetail: ttps:\\u002F\\u002F```
5556;It like fail ...
5557;Is my code error?
5558;`https:\\u002F\\u002F` isn't a char
5559;it's a string
5560;that you quoted like a char but it's very wrong. You probably just analyze the first char `h` and consider therest as tail
5561;@c26c7200 look at the example in the docs
5562;It explicitly says you cannot use backticks for multiple characters
5563;You have to double quote the string
5564;oh it is success. thinks@Monique @Doad
5565;Backticks will only use a single character
5566;Yes I forget it ..
5567;"Can you guys see what is wrong here:```go if err := user.Validate(); err != nil { log.Printf(""unable to create user %v err) render.Status(r http.StatusBadRequest) fmt.Println(json.H{""errors"": err}) render.JSON(w r json.H{""errors"": err}) return } pass err := bcrypt.GenerateFromPassword([]byte(user.Password) bcrypt.DefaultCost) user.Password = string(pass) fmt.Println(user.Password) newUser err := res.repository.Create(ctx user) if err != nil { log.Printf(""unable to create user %v err) render.Status(r http.StatusBadRequest) fmt.Println(json.H{""errors"": err}) render.JSON(w r json.H{""errors"": err}) return }```The user.Validate error comes correctly but the res.repository.Create(ctx user) error always comes as {}"
5568;The print is correct map[errors:email already exists: adfgdfgdsrgn@gmail.com] on both of them but the output as JSON is not
5569;"And here is the part which generates the error:```go err = r.dbClient.GetContext(ctx &existingUser checkUserQuery args...) if err == nil { fmt.Println(""test err"") return entity.User{} fmt.Errorf(""email already exists: %v existingUser.Email) }```"
5570;so `res.repository.Create(ctx user)` isn't returning an error when it should?
5571;or just the JSON you're making is wrong?
5572;The error is triggered correctly but it should return a json `√®rrors: {Email is already in use...}`
5573;But it just returns `errors: {}`
5574;Earlier error works:
5575;what JSON package is this?
5576;This isn't the stdlib package
5577;None
5578;It's just this small function which I created:```go// H is a shortcut for map[string]interface{}type H map[string]interface{}```
5579;what json package is this?
5580;oh
5581;"```golangpackage mainimport ( github.com/gomartini/martini"")import github.com/martinicontrib/render""func main(){ m := martini.Classic() m.Use(render.Renderer()) m.Get(""/ func(r render.Render) { r.HTML(200 index.htpl Hi"") }) m.Run()}```How to pass > 1 values to the template?"
5582;Struct
5583;Map
5584;Array
5585;Take your pick
5586;it seems doesn't work
5587;an error is going to get converted to json
5588;try taking the string
5589;> it seems doesn't workThat tells me nothing with which i can help you
5590;@Doad That works
5591;Why? And thanks üëç
5592;it's an interface type
5593;not a concrete type
5594;errors _are_ interfaces
5595;"`fmt.Println(json.H{""errors"": err})`Yet using above it prints out correctly?"
5596;because the `fmt` package can handle any type
5597;json has structural requirements
5598;Ahh ofc. So it's unable to parse it?
5599;I mean what would it even look like in JSON
5600;there is no analog
5601;You have to explicitely say you're using the string from the error
5602;Yeah I understand now. Thanks mate
5603;the way call the value in the template is by use `{{ . }}`
5604;so how do i call an array value there?
5605;`.[0]`?
5606;`(.)[0]`?
5607;Look at the docs
5608;Its explained there
5609;where?
5610;None
5611;@Str≈ìm can i know where i can see the docs?
5612;https://pkg.go.dev/github.com/martinicontrib/render?tab=doc
5613;same place you find docs for all Go packages üôÇ
5614;ohh
5615;thank you
5616;Im assuming it also uses template/html under the hood
5617;ohh
5618;i get how to access it
5619;i use map string/string
5620;weird question maybe but has someone tried both sentry and bugsnag with golang?
5621;and what has worked better? We are currently migrating a couple of queue consumers and we are wondering with which of the two we should go with if any of the two.
5622;hey guys if I wanted to set default fields (https://github.com/sirupsen/logrus#defaultfields) based on http request headers would it be a good idea to write my own middleware? If so how would I grab the `requestLogger` from within the handler?
5623;"I basically don\'t want to have to write `requestLogger := log.WithFields(log.Fields{""request_id"": request_id user_ip"": user_ip})` at the top of every handler."
5624;I feel like there must be a clever way to use context to sort this
5625;the easy way is to make the middleware a method on a struct
5626;which has that logger as a member
5627;Middleware
5628;have you got an example sorry?
5629;not quite sure what you mean
5630;how would I grab the logger?
5631;you have some nonzero number of http handlers
5632;```gotype Handler struct { Logger logrus.Logger SomethingElse UsefulSHit DB db.Conn}func (h Handler) WhateverMiddlewware(whatever whatever) { h.Logger.DoShit()}func main() { h := Handler{//fill it with the things you need here} r := whateverRouter() r.Use(h.WhateverMiddleWare)}```
5633;do the same with regular http handlers too
5634;congrats
5635;now your handlers can have access to arbitrary shared state
5636;so handler is also:```gofunc (h Handler) WhateverHandler(whatever whatever) { h.Logger.DoShit()}```
5637;sure
5638;okay
5639;thanks!
5640;the point is by making all of these methods you get a magical built in way to inject whatever you need into any handler/middleware that needs it
5641;yeah nice
5642;"so I did this:```gofunc (s Server) LogingMiddleware(next http.Handler) http.Handler { log.SetReportCaller(true) log.SetFormatter(&log.JSONFormatter{}) log.SetOutput(os.Stdout) log.SetLevel(log.TraceLevel) s.Logger = log.WithFields(log.Fields{ request_id"": os.Getenv(""XB3Traceid""), commit_hash"": os.Getenv(""COMMIT_HASH""), }) return http.HandlerFunc(func(w http.ResponseWriter r http.Request) { next.ServeHTTP(w r) })}```"
5643;that...should do it
5644;sorry for the newb question but how come this won't overite another handlers `s.Logger`?
5645;it will
5646;they're all
5647;oh
5648;it\'s the one instance of the server struct
5649;so if there are two requests at the same time?
5650;good question
5651;won't one use the other
5652;any sollution üôÇ
5653;well
5654;you didn't even confirm that it's a problem yet
5655;which is the first step to fixing any problem
5656;haha true
5657;not sure how to confirm though
5658;shouldn't I be doing something with `http.Request`'s context
5659;then I know it won't be a problem
5660;hmm
5661;i mean yeah you could use the middleware to set a value in the Context
5662;how would one go about that?
5663;I quite like your sollution though
5664;but pretty sure it will cause some issues
5665;it is like connecting to a different database in the middleware (probs a really bad idea)
5666;I think the best idea is to just create my own log function and pass `r` to it and get the header from there?
5667;hm
5668;maybe
5669;```gofunc RequestContextEntry(r http.Request) logrus.Entry { return logrus.WithFields()//etc etc}```
5670;that's a pretty good middle ground
5671;"I just did this:```gofunc _log(r http.Request level log.Level args ...interface{}) { log.WithFields(log.Fields{ request_id"": r.Header.Get(""XB3Traceid""), commit_hash"": os.Getenv(""COMMIT_HASH"")[:6], }).Log(level args)  if level == log.ErrorLevel { // log to sentry if hub := sentry.GetHubFromContext(r.Context()); hub != nil { hub.WithScope(func(scope sentry.Scope) { hub.CaptureMessage(fmt.Sprint(args...)) }) } }}func LogInfo(r http.Request args ...interface{}) { _log(r log.InfoLevel args)}func LogDebug(r http.Request args ...interface{}) { _log(r log.DebugLevel args)}func LogWarn(r http.Request args ...interface{}) { _log(r log.WarnLevel args)}func LogError(r http.Request err error) { _log(r log.ErrorLevel err.Error())}```"
5672;not sure why I don't just have the level as an arg üòõ
5673;"```gofunc Log(r http.Request level log.Level args ...interface{}) { log.WithFields(log.Fields{ request_id"": r.Header.Get(""XB3Traceid""), commit_hash"": os.Getenv(""COMMIT_HASH"")[:6], }).Log(level args) if level == log.ErrorLevel { // log to sentry if hub := sentry.GetHubFromContext(r.Context()); hub != nil { hub.WithScope(func(scope sentry.Scope) { hub.CaptureMessage(fmt.Sprint(args...)) }) } }}```"
5674;Doesn't Sentry love error traces itself?
5675;like hub.CaptureError(...)
5676;You could always just pass err to _log instead of getting the message
5677;and assume it's an error
5678;"or type check it if you want (`if err ok := args[0].(error); ok {`)"
5679;hi @Madxmike As you suggested I switched my create user function to a restful api call. So I know will catch POST url/user and handle it like I did with the websocket. But again when sending too bigimages (everything ~ >= 200kb) there will be no logging of what the server gets and the service will not work anymore until I restart the go server once. How should I approach this?
5680;"```js const handleCreate = (creationData) => { console.log(creationData); axios.post( `${process.env.REACT_APP_API_ROOT_URL}/user`, creationData, { headers: { ContentType': application/json', }, } ); toast.success('Player created.'); refetch(); };```This is the client sending"
5681;"```gotype user struct { Name string `json:""name""` Nickname string `json:""nickname""` ProfileImg string `json:""profileImg""` ImageName string `json:""imageName""`}// CreateUser will handle the Post request to create a user// including his profile Imgfunc CreateUser() gin.HandlerFunc { return func(c gin.Context) { var user user if err := c.BindJSON(&user); err != nil { logger.Errorf(""Unable to get request body when creating player: %+v err) } logger.Infof(""User data is: %+v user) }}```This is the server handling"
5682;"Again choosing a 1x1px file with my user I\'ll get this on console:```[16:27:43][MAIN] : time=""20200806T16:27:43+02:00 level=info msg=""User data is: {Name:test Nickname:test2 ProfileImg:data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9Ti0UqHewg4pChOlkQFXHUKhShQqgVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi5Oik6CIl/i8ptIjx4Lgf7+497t4BQrPKNKtnHNB028ykkmIuvyr2viKMECKIIiozy5iTpDR8x9c9Any9S/As/3N/jn61YDEgIBLPMsO0iTeIpzdtg/M+cYyVZZX4nHjMpAsSP3Jd8fiNc8llgWfGzGxmnjhGLJa6WOliVjY14iniuKrplC/kPFY5b3HWqnXWvid/YaSgryxzneYwUljEEiSIUFBHBVXYSNCqk2IhQ/tJH/+Q65fIpZCrAkaOBdSgQXb94H/wu1urODnhJUWSQOjFcT5GgN5doNVwnO9jx2mdAMFn4Erv+GtNYOaT9EZHix8B0W3g4rqjKXvA5Q4w+GTIpuxKQZpCsQi8n9E35YGBW6BvzeutvY/TByBLXaVvgINDYLRE2es+7w539/bvmXZ/P/OXcnQjwXIyAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5AgFDA8w7vSdwAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAMSURBVAjXY2BgYAAAAAQAASc0JwoAAAAASUVORK5CYII= ImageName:1px.png}""```"
5683;Choosing a bigger image like a picture of gopherize me (202.8kb) there will just be nothing in my console then
5684;does gin have a logging middleware
5685;it should
5686;Also when trying to delete or create a user with that small image nothing is working anymore until the server is restarted. So this might neither relate to websocket nor to gin?
5687;that says when a endpoint is hit
5688;It does indeed
5689;does it say the end point is being hit
5690;It sure has. Just need to figure how to implement
5691;okay
5692;that will atleast let you know where the problem is
5693;But besides that I love the way that reduces the need of the websocket
5694;if the endpoint isnt being called at all then its not going to parse anything
5695;Well it could be some size resitrictions at the frondend react right?
5696;So that it will not send bigger packets over the network?
5697;idk
5698;its just best to identify where the problem is occuring first
5699;I might have to hack a little html form to test that without react then
5700;it may need to be `multipart/formdata`
5701;instead of json for the content type
5702;but i dont know enough to give a good answer
5703;Please need help I have two port runnin on one docker container and I want to expose one with the dickerfile
5704;okay?
5705;do so
5706;https://docs.docker.com/engine/reference/builder/#expose
5707;well my logger middelware was already applied. I applied it like in the docs now I see every request twice ^^
5708;So I might safely suggest that the request is not leaving frontend then.
5709;I can see the request leaving the client in dev tools though
5710;so till no clue where or why it get's lost
5711;also you are not catching the post promise
5712;might that be a `gin` problem?
5713;No I do not as I am not returning anything by now
5714;I know that but thanks for that
5715;Well I'll have to transfer to train now. More debugging when on my way home then üòõ
5716;See you around
5717;ok
5718;hey guys how can i make a file delete itself on windows?
5719;im making an uninstaller on windows and i need it to do so
5720;```gofunc (v compareVariables) resetTwo(){ v.BowHigh = v.KeelHigh v.HighChanged = true v.BowFinished = false v.BowLow = 10000 v.VolumeGo = false v.CheckFinalStages = false v.ContinueChecking = false v.KeelHigh = 0  v.FirstCheck = false v.SecondCheck = false v.FirstStage = false v.SecondStage = false //v.CheckTime = true v.McginleyList = nil v.KeelMcginleyList = nil v.CancelWatch = false v.OnWatchTime =  v.CheckFrequency = false v.Frequency = 0}```
5721;is this mehtod executed sequentially?
5722;yes?
5723;like meaning v.keelhigh will never be rset to 0 before it is set to bowhigh
5724;yup
5725;:0
5726;üôÇ
5727;great thanks!
5728;no prob
5729;Wouldn't it be faster to just create a new struct and set self to that new struct?
5730;Doesn't matter at the end of the day and depends on your struct but might be a bit redundant.
5731;im only resetting a couple varibles in the struct
5732;so a method seemed cleaner at the time
5733;Then that's fair üòÅ
5734;So back on track (like acutally on track cause I am in a train right now)
5735;@Madxmike I will now hack a quick html markup to do a json post via form inputs to test if it is related to my frontend running react.js.
5736;goconvey is pretty neat
5737;would be nice if it showed what tests were running in the web ui but it's still neat
5738;rm goconvey
5739;been using it but still don't like it
5740;ü§∑\u200d‚ôÇÔ∏è
5741;well only the comparators
5742;it's just convenient for normal tests tbh
5743;until you do `So(protoMessage ShouldResemble otherstuff)` and burns
5744;Well actually I do not know how to hacky send json requests from a html file
5745;Well nevermind found a way to at least send text
5746;Now comes the fun part with the profile pic
5747;so this is a cgo quest...
5748;question
5749;The cgo i have is loading a dll from the exe folder
5750;i dont want this and i want it to load it from a temp folder. so that the code can extract the dll first before running
5751;https://cdn.merith.tk/Workspace/gowebveiwtests/webview/webview.go
5752;"```package webview/#cgo linux openbsd freebsd CXXFLAGS: DWEBVIEW_GTK std=c++11#cgo linux openbsd freebsd pkgconfig: gtk+3.0 webkit2gtk4.0#cgo darwin CXXFLAGS: DWEBVIEW_COCOA std=c++11#cgo darwin LDFLAGS: framework WebKit#cgo windows CXXFLAGS: std=c++11#cgo windows,amd64 LDFLAGS: L./dll/x64 lwebview lWebView2Loader#cgo windows,386 LDFLAGS: L./dll/x86 lwebview lWebView2Loader#define WEBVIEW_HEADER#include webview.h""#include <stdlib.h>#include <stdint.h>extern void _webviewDispatchGoCallback(void );static inline void _webview_dispatch_cb(webview_t w void arg) { _webviewDispatchGoCallback(arg);}static inline void CgoWebViewDispatch(webview_t w uintptr_t arg) { webview_dispatch(w _webview_dispatch_cb (void )arg);}struct binding_context { webview_t w; uintptr_t index;};extern void _webviewBindingGoCallback(webview_t char  char  uintptr_t);static inline void _webview_binding_cb(const char id const char req void arg) { struct binding_context ctx = (struct binding_context ) arg; _webviewBindingGoCallback(ctx>w (char )id (char )req ctx>index);}static inline void CgoWebViewBind(webview_t w const char name uintptr_t index) { struct binding_context ctx = calloc(1 sizeof(struct binding_context)); ctx>w = w; ctx>index = index; webview_bind(w name _webview_binding_cb (void )ctx);}/```"
5753;note. i am probably looking in the wrong area for this
5754;https://github.com/webview/webview
5755;can't you static link that?
5756;I dont know... im on windows
5757;i have never touched C before
5758;aside from Suckless Terminal modding
5759;if gtk does have that you probably can link some libgtk.a file somewhere
5760;Well i dont know at all what i am doing
5761;i am fine with using another library if needed
5762;hey @Madxmike I now think to know it has to be golang backend
5763;I hacked a little html file with javascrip and submit the data from there like the frontend does
5764;Same behaviour again
5765;little file all good file around 260kb backend stops working
5766;How can I debug go more when I already have debugging going?
5767;I cannot wrap my head around what is happening
5768;I do in fact notice that with the 1px file the dev tools shows timing for the little image whereas for the big image there is written `CAUTION: request is not finished yet`
5769;so maybe the request is stuck inbetween. Like go actually accepted the request but does not finish it.
5770;This would explain why subsequent request will not be handled anymore and I have to restart the service
5771;context of that?
5772;I try to transfer an image to my backend api written in go
5773;I do so by reading it as base64 and transfering at as json
5774;I have this `connection err := dialConn.Write([]byte(payload))`
5775;"```[18:18:56][MAIN] : time=""20200806T18:18:56+02:00 level=info msg=""User data is: {Name:test Nickname:test2 ProfileImg:data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAIAAAACUFjqAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bS4tUFOwg4pChdrIgVcRRq1CECqFWaNXB5NIvaGJIUlwcBdeCgx+LVQcXZ10dXAVB8APEydFJ0UVK/F9SaBHjwXE/3t173L0D/M0aU82ecUDVLCObTgn5wooQekUYQQwgjqTETH1WFDPwHF/38PH1LsGzvM/9OfqUoskAn0A8w3TDIl4nntq0dM77xFFWkRTic+Ixgy5I/Mh12eU3zmWH/TwzauSyc8RRYqHcxXIXs4qhEk8SxxRVo3x/3mWF8xZntVZn7XvyF0aK2vIS12mOII0FLEKEABl1VFGDhQStGikmsrSf8vAPO36RXDK5qmDkmMcGVEiOH/wPfndrliaSblIkBQRfbPtjFAjtAq2GbX8f23brBAg8A1dax7/RBKY/SW90tNgR0L8NXFx3NHkPuNwBhp50yZAcKUDTXyoB72f0TQVg8BboXXV7a+/j9AHIUVeZG+DgEIiXKXvN493h7t7+PdPu7weOKnKybis7SAAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+QIBRAnEnP1KJoAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAADUlEQVQY02NgGAWkAwABNgABGtWNFwAAAABJRU5ErkJggg== ImageName:}""```"
5776;and go isn't behaving?
5777;it just silently breaks if I choose an image bigger than around 250kb
5778;hi guysI have this `connection err := dialConn.Write([]byte(payload))`but I want only the error
5779;And I cannot find out why
5780;First I thought my react.js frontend will be the problem
5781;@JohnnyTheSmith have you tried writing directly without json?
5782;do users and stuff in headers perhaps
5783;because then you can stream better rather than parse
5784;Like how do I write directly?
5785;Frontendside the form is a multipart/formdata
5786;so I have e.target.files[0] for referencing the file object
5787;are you sending via js? or a form?
5788;as well as its name and mimetype
5789;hold it I will show
5790;@minish it would be _ err := dialConn.Write(stuff) but yours doesn't look right connection err := conn.Write?
5791;"```js const handleCreate = (creationData) => { console.log(creationData); axios.post( `${process.env.REACT_APP_API_ROOT_URL}/user`, creationData, { headers: { ContentType': application/json', }, } ); toast.success('Player created.'); refetch(); };```"
5792;yes
5793;but doesn't work
5794;I have a error
5795;@stdio this is the handler. Now to how the data is created
5796;"```js const handleSubmit = (e) => { e.preventDefault(); let creationData = { name: player.name, nickname: player.nickname, }; player.profileImg ? (creationData = { ...creationData, profileImg: player.profileImg, imageName: player.filename, }) : (creationData = { ...creationData, profileImg: null, imageName: null, }); props.onSubmit(creationData);```"
5797;@stdio no new variables on left side of :=
5798;it comes from state.
5799;the `player.profileImg` will hold a file object from the multipart/formdata form
5800;that doesn't look multipart
5801;well that is react
5802;@minish so do with _ err = .Write
5803;okay take another example. I wrote a little html and js to replicate this function of my backend for better understanding the error
5804;the axios.post is sending as application/json
5805;the full request not the part
5806;It does yes
5807;ok thanks
5808;You think I should then send as multipart/formdata?
5809;I would need to change my filehandler then
5810;no better without multipart I would say
5811;because the filehandler is transfering the image object to base64 on file change
5812;Like how actually
5813;but the thing is do you need it to be json?
5814;At this point it is pure write code for me cause I basically do not understand it
5815;No I dont
5816;and how's the go part?
5817;If there is a way to post the form data to an golang endpoint and retrieve it I am just fine
5818;k starting from there
5819;so im back with more redis clone woos im designing my client's API when you do a Get() command should I just return an interface or do I make a version for each type (e.g GetString GetInt GetMap)?
5820;"```gotype user struct { Name string `json:""name""` Nickname string `json:""nickname""` ProfileImg string `json:""profileImg""` ImageName string `json:""imageName""`}// CreateUser will handle the Post request to create a user// including his profile Imgfunc CreateUser() gin.HandlerFunc { return func(c gin.Context) { var user user if err := c.BindJSON(&user); err != nil { logger.Errorf(""Unable to get request body when creating player: %+v err) } logger.Infof(""User data is: %+v user) }}```"
5821;cant think of a good way of handling this
5822;keep in mind I was opting to read it in json therefore the code is written that way
5823;usually for bigger info like files or images I wouldn't use json
5824;although it could still be sent in base64
5825;okay so how do I do it. I am willing to learn
5826;is the data a file from a form? or something like canvas?
5827;And I am willing to rewrite both backend and frontend until I follow a somewhat called best practice
5828;no it is a upload form field
5829;"```js <input accept=""image/"" name=""file"" onChange={handleFileChange} style={{ display: \'none\ }} id=""profileImg"" type=""file"" />```"
5830;Sorry btw if my connection is interrupted now and then I am on a train right now
5831;what is your handleFileChange function?
5832;"```js const handleFileChange = (e) => { const profileImg = e.target.files[0]; const previewImg = URL.createObjectURL(e.target.files[0]); setPlayer({...player previewImg}); let reader = new FileReader(); reader.onload = () => { setPlayer({ ...player profileImg: reader.result filename: profileImg.name }); }; reader.readAsDataURL(profileImg); };```"
5833;Where do you send the actual request?
5834;again keep in mind I was optiing for transfering as json. So will have to completly rewrite that too
5835;"```js const handleCreate = (creationData) => { console.log(creationData); axios.post( `${process.env.REACT_APP_API_ROOT_URL}/user`, creationData, { headers: { ContentType': application/json', }, } ); toast.success('Player created.'); refetch(); };```"
5836;what is creationData? is that application/json?
5837;"```js const handleSubmit = (e) => { e.preventDefault(); let creationData = { name: player.name, nickname: player.nickname, }; player.profileImg ? (creationData = { ...creationData, profileImg: player.profileImg, imageName: player.filename, }) : (creationData = { ...creationData, profileImg: null, imageName: null, }); props.onSubmit(creationData); setPlayer({ name:  nickname:  profileImg: null, previewImg: null, }); };```"
5838;creation data comes from react state
5839;where is the file actually being sent? I still haven't seen where the images is pushed
5840;yes you have. In the axios.post request
5841;Oh sorry. Didn't see the profileImg prop in the handleSubmit
5842;That is the point @stdio was pointing out. He said it would be better to rewrite the frontend code to send it as something else directly instead of serializing as json
5843;And I would if I knew how
5844;The question is how do I send a file object from react state using axios and receive it in golang backend handler?
5845;Alright so what I would do is create a presigned URL to go to some sort of storage (s3 or gcs) and just pass the object key around
5846;If I omit the file reader foo and just set the profileImg the actual image object I have this in state
5847;the object being the image file name.. in s3 they are called objects
5848;well you speaking chinese to me üòÑ
5849;The images needs to be transfered to the server and stored there
5850;Or if you are storing everything on your server (you could def do this) just create one handler that is dedicated to profile image uploads
5851;Okay so you say I split up the creation of the user and upload image afterwards
5852;Yes
5853;yeah does this actually have to happen exactly at the same time
5854;do you ACUTAL literally NEED an image for a user
5855;will anything crash or panic without it?
5856;this will be not that easy as I am creating a user object in a database returning a user id. Afterwards I am creating an image object in another table and hook it up with the players id
5857;that is the point that I was going to make
5858;that was the reason why I sent everything together
5859;most sites I've seen have some kind of upload profile different than the info form
5860;Yes I want user to be able to upload an image which is later on shown at the scoreboard above or on the side of his name
5861;so in a signup form it would be possible to create some kind of browser session track session upload image related to session and on done bind everything to that user or something
5862;Well I could implement an upload image button after a user is created. So the react frontend knows the users id at that time
5863;or by steps first form creates users sends to server validates create then upload images add extra info
5864;Well but then again I would need to redesign my frontend as it is showing a players card preview as you type in your data
5865;if you weren't able to create the user you wouldn't waste any bandwidth uploading stuff
5866;even if selecting an image it will preview it
5867;well I could split up right? First axios post will create user and I will have to have the users id in response from golang to react frontend#
5868;with that response I then can upload the image right?
5869;now a user on 2G connection signs up uploads everything 5 minutes later it says username already in use üòÆ
5870;this will be all local in wifi thoug
5871;no public web app
5872;well but I think I now see a way to do that. Let me try split that up into two parts
5873;how would I upload an image then? say I create the user in db by providing username and nickname
5874;"the return will be like ```json{ playerID: 1""}```right?"
5875;so I use ```js....then(res => { something with res.data axios.post(url image)}```
5876;?
5877;pls async/await
5878;well yes ^^
5879;Oh I see clear now
5880;Endpoint has to be something like `/user/:id/image`
5881;ye something that that and it would be a post
5882;so the data part of the request will only be the image then and not mixed again right?
5883;yea
5884;"```gofunc uploadHandler(w http.ResponseWriter rhttp.Request) { defer r.Body.Close() fname := fmt.Sprintf(""user_iamges/file_for_user%s.jpg"",r.Header(""userid"")) f,err := os.Open(fname) // handle err defer f.Close() err = io.Copy(f,r.Body) // handle err fmt.Fprintf(w,""Well done!"")}```"
5885;something like that
5886;r.Header.Get()
5887;^
5888;well okay I can see that. So if I post a FileObject as post body which ContentType do I have to use and will this transfer to an actual file at the backend?
5889;I would have to escape filename though and handle false mimetypes
5890;also I am opting to create a uuidv4 filename instead of the real name
5891;image/x
5892;multipart is streamable too so not that bad if you want full form
5893;image/jpg image/jpeg image/png etc
5894;I would need to read that out of the file object then
5895;but json kind of puts everything in mem
5896;well okay I got it. I think from here I can try and redesign. I'll test and if there is a problem again I am really glad to have such a helpful nice community. Thanks again really apreciated
5897;@stdio `io.Copy` returns `written int64 and error`
5898;just _ err then
5899;so your code will not work. I see if I can find a way around
5900;thanks
5901;is in gin context `c.Request.Body` holding the data I am looking for?
5902;btw no need to close a request's body in the handler
5903;Go will close it by itself
5904;I didn't when designing my function but thanks
5905;so keep your fingers crossed guys
5906;"`[19:13:51][MAIN] : time=""20200806T19:13:51+02:00 level=error msg=""open test.png: no such file or directory""`"
5907;almost
5908;https://golang.org/pkg/os/#OpenFile
5909;"well `os.Open(""test.png"")` seams not to work"
5910;check the docs fam
5911;os.Create probably
5912;"```Open opens the named file for reading. If successful methods on the returned file can be used for reading; the associated file descriptor has mode O_RDONLY. If there is an error it will be of type PathError.```"
5913;I was about to google that ^^
5914;that was pseudo go code
5915;Yeah I knew as a go pro I am ^^
5916;I did it!
5917;the file was transferd
5918;Man that feels good
5919;Now I have to actually implement the creation and handle filename and directories right but that is really great
5920;So how do I handle a upload folder later in my build. I would love to have it right in the folder where the build executable is. Together with the database file
5921;I also want to precreate 10 static images for if someone is not choosing an image he will be assigned a random one
5922;So in react there is a public folder which will be copied over to the build folder accordingly when you run `npm build` or `yarn build`
5923;Does golang do this too in some way?
5924;create files with random hashes or something and update some kind of profileURL in user
5925;not exacly golang only builds the binary
5926;give em UUIDs
5927;boom
5928;but then the binary it self can handle paths where ever it is
5929;yeah I was plannign on using uuidv4
5930;there is no release thing on go just go build
5931;I use snowflakes lul
5932;okay so I would need to have that upload folder (stub) copied over to build folder and kept in sync by hand (bash rsync ..)
5933;None
5934;snowflake good too
5935;what does that do in particular? just in a few words√ü
5936;bwmarrin ü§î
5937;> I also want to precreate 10 static images for if someone is not choosing an image he will be assigned a random oneyou probably want to use something to pack those assets at compile time
5938;and unbundle them on runtime (or read them straight from memory on demand) if needed
5939;e.g. in the database your user's avatar column could be NULL
5940;in which you'll handle that and return a special image
5941;you can handle this in either the frontend or backend too
5942;Discord chooses to handle this in frontend
5943;@stdio yeah I use his package
5944;I will too
5945;there are a few quirks in the pkg but eh it's good
5946;if player state profileImg is null on creation submit I will hit an axios route called /fakeImage/
5947;then one random out of ten will be chosen and written to db with playerID
5948;So I get that part
5949;can probably do that in backend without hitting another route but sure
5950;I am just looking for a nice way to one hit `build` everything together at long last
5951;use a makefile
5952;Yeah in backend would be possible too
5953;"<img src=""url onerror=""this.src=\'fallback\'"">"
5954;if on user creation the image object is null one will be chosen randomly
5955;eww js
5956;for a project that uses pkger the makefile would probably do `pkger && go build`
5957;Go static assets only come as early as 1.15 iirc
5958;there's a proposal for it
5959;so pkger will handle like copying files around and then go build will do its thing
5960;1.15 static assets? ü§î
5961;yeah
5962;https://github.com/golang/go/issues/35950
5963;https://go.googlesource.com/proposal/+/master/design/draftembed.md
5964;that was approved?
5965;> It is worth noting that as with all new API this functionality cannot be adopted by a Go project until all developers building the project have updated to the version of Go that supports the API. This may be a particularly important concern for authors of libraries. If this functionality ships in Go 1.15 library authors may wish to wait to adopt it until they are confident that all their users have updated to Go 1.15.
5966;i'm not sure actually
5967;but rsc wrote it
5968;as he said there's many tools around it
5969;ii know
5970;pkger is one
5971;Oh hold on
5972;I'm pointing this out because you need an extra script if you want a single command as of right now
5973;all the way until this becomes a thing
5974;looking at the page I think you ight be thinking I want to embed those pictures in the binary
5975;Thats not the case
5976;I think that's the only way you could easily do what you want
5977;See I have a monorepo setup and wanting to deploy the app (meaning frontend react and backend go) by just executing one file
5978;<https://go.googlesource.com/proposal/+/master/design/draftembed.md> interesting
5979;yes so you pack the assets into the binary
5980;then you deploy the binary
5981;your systemd service file would just execute the binary without any working directories
5982;in other words no source files
5983;since Go is a compiled language you don't want to execute it similarly to npm and nodejs
5984;ideally something like this will be the result```| root||uploads||images.png (10 times)||frontendcode|index.html (and all the react stuff)| server.exe (or elf or dmg)| gopherboard.db```
5985;oh okay so you say I want to package everything up then
5986;well you still need a folder for uploads
5987;but how do I then handle additional pictures beeing uploaded. And the database created on first runtime. I will have to store those too
5988;just make them
5989;create the folder at runtime using os.MkdirAll
5990;Well that would be a thing to do yes
5991;have a flag or env var to configure that if needed
5992;So you are telling me I could in fact embed my react frontend into the binary and server it with a gin route?!
5993;And when running the executable there will be the api and the frontend running all at once!
5994;I was planning on using a config.yml though
5995;yes that is the case
5996;Could be env var (but not a big fan of it)
5997;Dude! That is awesome. I definately have to look into this
5998;there should be env vars everywhere!
5999;yea env vars > config file imo
6000;But that is not enduser friendly though
6001;docker like those
6002;i wouldn\'t really care about enduser friendly for a backend deployment process tbh
6003;better than having a domain language file for every app that you use
6004;oh docker though. Not really enduser friendly too
6005;I only care about making the deployment process as simple as possible
6006;and env vars are very simple
6007;though not everything maps well into env vars
6008;so it's not always applicable
6009;well I want nontechnical user to be able to use my app as well
6010;So I was hoping for a one click deployment
6011;eh that's fine ig
6012;ah enduser deploys
6013;yaml is kinda meh though
6014;I personally prefer TOML
6015;what is better about toml?
6016;valid json is valid yaml btw
6017;TOML doesn't have a ridiculously long specs sheet unlike YAML
6018;also not indentation based
6019;well I see
6020;so not that easy to screw up then
6021;```yamlyaml: someid: 123```fails unmarshal a string ü§î
6022;lmao most of my CI deployments in yml are actually just straight up JSON :kek:
6023;it's harder to screw up
6024;windows like .ini's tho not sure now
6025;So train is ending in a minute or too and so is my batter (11% left). Guys have a nice evening and thanks again for all the help. Beeing in this community for about few days really already feels like family
6026;I'll contribute as soon as I reach a golang pro level üòÑ
6027;See you around
6028;> I personally prefer TOML@_diamondburned_ me too üòÑ
6029;oh yeah ini is a slightly smaller toml
6030;it's a good choice too imo
6031;also yeah np
6032;TOML is more feature rich but ini/toml are both just clean and easier to work with in general imo
6033;^
6034;there's also viper
6035;is anyone familiar with heroku and know what's the bare minimum to deploy an app
6036;because i saw this https://github.com/heroku/gogettingstarted but I need someone to explain to me why i need a procfile makefile heroku.yml and a dockerfile
6037;probably because that's what Heroku chooses so you'll have to deal with it
6038;no i don't understand what each file is actually doing
6039;> why i need those thingsbecause tha'ts how heroku knows how to build and deploy your code
6040;https://devcenter.heroku.com/articles/procfile
6041;any idea why discord has a green line?
6042;doucmentation
6043;is your friend
6044;it's gone now hmmm
6045;yeah the procfile is pretty straightforward
6046;oh an update's ready I'm smart
6047;these things aren't magically summoned from thin air they're extant concepts with names and documentation
6048;the thing is i'm used to docker and whatnot but the makefile and heroku.yml make no sense to me
6049;that's fine
6050;they have documentation too
6051;https://www.gnu.org/software/make/manual/make.html
6052;https://devcenter.heroku.com/articles/builddockerimagesherokuyml
6053;oh i was looking for makefile documentation specific to heroku
6054;that's where i was going wrong
6055;thanks
6056;hey guys where you recommend to deploy a golang api with postgresql db. I was thinking on heroku or digital ocean
6057;sure those are good options
6058;aws google cloud azure lots of choices
6059;depends on your price points and the features you want
6060;actually i loathe heroku but that's
6061;a whole thing
6062;heroku is really just a layer on top of heroku so that is p cool
6063;:thonk:
6064;:thinksmart:
6065;Hey Guys. I have been developing web servers and apis in Node.js(Express) for some time and now I am planning to build up my expertise in Go. I have come across few frameworks like Martini Gin and Gorilla for web and api but would like to know which one should I focus on?
6066;Any suggestions?
6067;start with the standard library
6068;gochi is a popular option once you need more functionality
6069;I have been practicing the net/http library for some and wanted to see what frameworks could offer me
6070;some time
6071;the standard library establishes the patterns/interfaces that everything else revolves around
6072;and then
6073;yeah
6074;it's mostly personal taste
6075;Seems like go chi has middleware support as well
6076;Thanks. I will look into it.
6077;i like it
6078;it's straightforward
6079;every time I run `go get u v ./...` it lists a number of deps```go: github.com/jackc/chunkreader/v2 upgrade => v2.0.1go: github.com/jackc/pgconn upgrade => v1.6.4go: github.com/jackc/pgproto3/v2 upgrade => v2.0.4go: golang.org/x/crypto upgrade => v0.0.020200728195943123391ffb6dego: github.com/mattn/gocolorable upgrade => v0.1.7go: golang.org/x/sys upgrade => v0.0.0202008061255475acd03effb82go: golang.org/x/text upgrade => v0.3.3go: github.com/jackc/pgtype upgrade => v1.4.2go: golang.org/x/xerrors upgrade => v0.0.0202008041841015ec99f83aff1go: github.com/jackc/pgservicefile upgrade => v0.0.0202007140032502b9c44734f2bgo: github.com/gorilla/websocket upgrade => v1.4.2go: github.com/mattn/goisatty upgrade => v0.0.12go: github.com/jackc/pgx/v4 upgrade => v4.8.1```and it appears to upgrade them? so why are they all listed every time?
6080;but when there's actually a new version of something it follows up with a `downloading` line
6081;so I guess that's just listing what the newest versions are and then sees that they're already downloaded?
6082;u is the upgrade flag üòÑ
6083;^
6084;I know lol
6085;there's rarely ever a good reason to use u tbh
6086;just seemed odd that it listed everything every time
6087;it has to check them
6088;because you explicitly request it to
6089;yeah because they're probably pushing new minor tags all the time
6090;It checks that they are the latest version
6091;how do i make a button change a variable inside a Go HTML template
6092;How to properly pass dependencies to http handlers? Since they accept only r/w? Or should the handler accept dependencies and return the http handler func from itself? ü§î
6093;I personally use a deps struct to attach my handler to
6094;this allows me to pass interfaces to my handler and allows for proper testing of them
6095;Otherwise you could use closures but I am unsure how common this pattern is in go
6096;That sounds smart. ü§î
6097;Yup. Amazing. Thanks! üòÑ
6098;np :partygopher:
6099;@czechuuu you cant without JavaScript
6100;Html templates arent dynamic
6101;Theyre rendered once into raw html
6102;oh
6103;Welcome to web dev
6104;Its JavaScript everywhere
6105;eh
6106;i was hoping i could use go to get away from js
6107;but its haunting me
6108;"wait it\'s all javascript?""""always was. well no it didn\'t really start becoming prevalent until 2000 or so with the \'web 2.0\ thing. and it didn\'t become pervasive until much later than that either. and now people are simultaneously trying to move away from js on the web and to push js into backend and desktop domains."
6109;:kek:
6110;developers are dumb
6111;write your frontend in wasm and the backend in node
6112;node is still js no?
6113;yeah that's the joke
6114;yes but wasm isn't
6115;oh i got whooshed
6116;> becoming prevalent until 2000tbf there were like... 7 people using the internet then
6117;is std flag good enough or you'd recommend something like https://github.com/akamensky/argparse ?
6118;i go from stdlib flag to spf13's viper
6119;when i need more features
6120;@czechuuu ok but the real question is what are you trying to accomplish by changing the variable
6121;because yours sounds like an XY question
6122;i want a value in a table change
6123;i already found a js solution for this
6124;"`<button type=""button onClick=""document.getElementById(\'monday\').innerHTML= \'John\';"">John</button>`"
6125;yeah you'll need JS LOL
6126;well
6127;oh so the change goes after a human interaction?
6128;use a form and POST then
6129;why would i need a form
6130;to send a post request?
6131;unless you want to break everything HTML and use a href
6132;what post request can i send
6133;to the database?
6134;to the server that renders the template
6135;how do i do that
6136;i dont understand what youre saying
6137;bruh
6138;how are you rendering templates right now
6139;"```gofunc Bread_handler(w http.ResponseWriter r http.Request) { p := Bread{//data } t _ := template.ParseFiles(""bread_template.html"") t.Execute(w p)}```"
6140;what value is this changing to
6141;is it rendered from the database?
6142;no
6143;i have a table
6144;and i have two buttons to change the value of the table to either A or B
6145;of the cell of the table
6146;precisely
6147;and where is the initial data stored
6148;in struct Bread
6149;i want to use a database at later stage
6150;you'd need a persistent state now for the form
6151;in other words you need a database now
6152;but im just starting with go so i didnt do that yet
6153;in fact I'd probably start with the database first
6154;before any of the frontend stuff
6155;what database is advised for go?
6156;postgresql?
6157;pg works sure
6158;anything that fits the job
6159;there's not really a preference by the language
6160;but go is strongly typed so using something that is also strongly typed is benificial.
6161;is pg strongly typed?
6162;or is mongodb?
6163;depends on the driver
6164;mongo isn't strongly typed tbh
6165;I'm guessing he meant SQLs in general as they have a strong schema that can be mapped to Go structs
6166;while Mongo has less of that
6167;Mongo and go is kind of difficult to deal with (I do it right now just because it would require a huge migration otherwise).
6168;rip
6169;using sql with structs just feels wack
6170;like most of the time I feel like I'm just guessing what types it'll be okay with
6171;maybe that's just a pgx issue?
6172;usually documentations should tell you about that
6173;pgx docs are weird and fragmented across multiple libs
6174;fun
6175;yee
6176;usually I only need to check database/sql for type docs
6177;using a jsonbased db just feels inherently right with go bcus it's got such a strong json impl
6178;but they tend to b slower
6179;yeah but json itself is not typesafer
6180;lol
6181;there's no strong schema
6182;true
6183;should i add pg installation folder to `PATH` so i can conveniently run createdbfrom anywhere?
6184;it'd be neat to just use gostyle type/value declarations as a data format
6185;and just like register native type names via reflection
6186;pg is a service bruh
6187;you're supposed to have it running persistently
6188;i like go from sql generators
6189;hmm what if i use systemd sockets to make postgres only run on demand
6190;like sqlc and xo
6191;"smth like```godecoder.Register(""string )decoder.Schema(`struct { Data string}`)decoder.Decode(`{ Data: foo"",}`)```"
6192;at that point you shouldn't even use that format
6193;use something with an actual schema
6194;hmm
6195;I'm just trying to conceptualize a strictly typed jsonlike format
6196;there's one like that
6197;but it's a dead format
6198;I'd use BARE
6199;msgp kinda based
6200;"```C:\\Users\\user>createdbPassword:Password:createdb: error: could not connect to database template1: FATAL: password authentication failed for user user""```"
6201;how do i use createdb
6202;what passwd do i input here>
6203;?
6204;"```FATAL: password authentication failed for user user""```"
6205;so
6206;ah yes good ol default postgres
6207;is your username `user`
6208;one of the things i hate the most about postgres
6209;no i changed it
6210;welp
6211;that might be a problem then
6212;Hey someone know if there is something like Neon but for Go?
6213;https://github.com/neonbindings/neon
6214;don't you think?
6215;then set the username in `createdb` flags
6216;bruhhhh
6217;that sounds hacky
6218;It translate Rust code to NodeJS modules and can be called into JS.
6219;yeah that's terrifying
6220;hmm
6221;there is gopherjs iirc
6222;I mean does node not have native modules?
6223;which translates Go to JS
6224;but I was actually thinking about that one C++ to NodeJS thing
6225;which is officially supported
6226;emscripten or whatever
6227;https://nodejs.org/api/napi.html
6228;so i have a function that loops through a slice to calculate the over all value a struct int
6229;epic AND cool
6230;```type Struct ur_mom { gitgud int}Slice = make(ur_mom 90)for every poo in Slice { add poo to overall}print overall```
6231;this isnt working for some global local variable type crap
6232;what the hell is this language
6233;just some psuedo code
6234;but my program is in go
6235;why isn't it working
6236;so then i tried to make overall global
6237;the for loop isnt adding anything to the variable overall
6238;i looked it up so i just assumed i make it global but that didnt work
6239;probably shadowed it in the function argument
6240;Can you show us actual code instead of the memery you sent?
6241;just make the function return a new integer
6242;then add it
6243;its a for loop
6244;You've got something that doesn't work so you an just show us
6245;can i send u the full program?
6246;on pastebin
6247;Just your loop stuff should be fine
6248;https://pastebin.com/iNVsLNLz
6249;i stand firmly by my statement that discord should raise the age limit to 17+
6250;to bad
6251;to bad? to where?
6252;the power function doesnt work
6253;> to bad? to where?nice owned
6254;and neither does the ddos function
6255;you need []Bot
6256;no that works
6257;the power value doesnt get edited
6258;i fucking know
6259;because of that
6260;i can loop through the bots just fine
6261;you have to either do []Bot or set the variable again
6262;why?
6263;because that's how it works
6264;the power variable is the one not working
6265;Your global `power` is only ever set to 0
6266;because range creates a copy of the bot element
6267;and you're changing the copy
6268;im not trying to change the bot slice
6269;i want to change the power variable
6270;:mike:
6271;you. are. not. setting. the. power. variable.
6272;but it is set to 0 after the calculating is done
6273;i have no fucking idea
6274;I ONLY WANT TO EDIT THE POWER VARIABLE!!!
6275;I DONT CARE ABOUT THE SLICE!!
6276;but youre not doing that
6277;point to where the power variable is supposed to be edited
6278;None
6279;only power = 0 in your code
6280;wait im retarded i forgot to that += adds to the left side
6281;sorry
6282;you never _actually_ set it
6283;the penny has dropped
6284;"why is my variable always 0""""because youre only ever setting it to 0"
6285;:pikachushocked:
6286;oh thats why u thought i was changing the bot slice
6287;:/
6288;If we are telling you what is wrong at least have the decency to look at
6289;> I ONLY WANT TO EDIT THE POWER VARIABLE!!!reminder that we are the dumb ones here
6290;had to repeat it 3 times
6291;Thank you for your time.
6292;you're welcome
6293;your welcome?
6294;ig i'm dumb too
6295;it's you're
6296;No my welcome
6297;congrats
6298;```func calculatePower() { var power int for _ bot := range bots { power += bot.Bandwidth } return power}```
6299;im getting an error that power is nil
6300;nah seems like the error is you're not returning anything in the func sig
6301;you cant return a value from a function thats declared to not return anything
6302;hey guys when using something like gcm for cryptographic ciphers with go
6303;do we send the nonce alongside the cipher text?
6304;set calculatePower to return an int
6305;how does the decipherer get the nonce?
6306;ohhhhhh
6307;I think it is part of the block for GCM
6308;the example here has the nonce with it.. ü§î https://golang.org/src/crypto/cipher/example_test.go
6309;Ah right you need to to know the IV when decrypting so you have to store that as well as the key
6310;GCM is the one with the counter. the IV is the seed for the counter
6311;man why is this all so complicated :facepalm: i just wanted to make a cool concept and now i need to do all this extra stuff
6312;encryption is hard
6313;yeah
6314;secure crypto is hard
6315;"do you have a minute or two? my code using `gosocket.io` ```server.OnEvent(""/chat msg func(s socketio.Conn msg string) string { s.SetContext(msg) var broadcast socketio.Broadcast broadcast.SendAll(""reply nil) s.Emit(""lel broadcast) return recv  + msg })``` I\'m trying to broadcast but I\'m not sure how"
6316;I have a server that echo messages from clients to clients I want to make a real chat sending broadcast message to all connected clients
6317;bruh socket.io
6318;@_diamondburned_ ?
6319;oh that should work let me check
6320;"so i've seen a lot of suggestions like these both on reddit youtube comments talks etc but i've honestly never seen anyone do this in a rest api for example can anyone give me a repo or smth that does actually use this? imo why i've never seen it and done it myself is because it'd get extremely verbose and annoying to define an interface and for every action that can be done against your database; the idea of `fn :: Int > User` is really good and simple in functional languages but no clue whether go is a good fit about this"
6321;like does that mean i'd have to have 6 interfaces for this?
6322;It's not about defining interfaces for every action that can be done‚Äîit's about defining interfaces for actions that are done. That's the point: the user specifies the requirements and what they need.
6323;hm
6324;ok then assuming someone's following this package layout https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1 or something similar
6325;where should one have the interfaces for those actions?
6326;but also wouldn't the same issue appear again?
6327;it'd just be defined in your say http/rest package
6328;you'd have `type UserGetterByID interface` `type UserSaver interface` `type UserGetterByEmail interface` `type UserDeleter interface`
6329;etc
6330;like this would make hellva alot of sense if you had like types for the fns instead instead of interfaces
6331;just like in functional programming
6332;which you _can_ do here too
6333;but i haven't seen anyone do it
6334;```gofunc UserHandler(userGetter func(int) User) http.Handler {}```
6335;etc
6336;"Notice the paragraph right above the second code block: It\'s much nicer for me to describe my requirements"". That might seem innocuous but that\'s indicating that the user is describing their precise requirements."
6337;https://twitter.com/davecheney/status/942593128355192832
6338;on that reddit comment they're basically saying that the less your interface has the easier it is to mock
6339;well
6340;that's one of the pros
6341;yes yes i get what they are trying to say
6342;i get that it might make a lot of sense for libraries and etc but for a typical rest api or something else idk
6343;can anyone enlighten me and give me an example that does that
6344;i'm p sure you basically just make the interface in the consumer (could be a http route) something like `interface { GetUser(userID int64) (thing.User error) }` for a http get user route
6345;yes
6346;but as i said wouldn't that get so troublesome and verbose to write at some point
6347;like in the example of my code
6348;i'd have to have 6 interfaces
6349;i can't see this being done in larger apps either
6350;where those 6 might become 12
6351;or whatever
6352;so what im asking isis this really all just in theory and people never do it
6353;(strictly takling about rest apis / things of that nature not libraries)
6354;wdym verbose
6355;i don't see how it'd become verbose
6356;6 small interfaces isn't a lot at all
6357;and it makes things much easier to test
6358;of course if you don't care for all this and just want the shortest code possible then you can just jank everything together by giving the routes the database directly and mix that together
6359;but it's not ideal
6360;```go// MainQueue helps to push tasks to main thread from// other threadstype MainQueue struct { sync.Mutex tasks []func()}// Post posts task to queuefunc (m MainQueue) Post(task func()) { m.Lock() m.tasks = append(m.tasks task) m.Unlock()}// Run runs all tasks and dispose themfunc (m MainQueue) Run() { for _ t := range m.tasks { t() } m.Dispose()}// Dispose clears the queuefunc (m MainQueue) Dispose() { m.Lock() m.tasks = []func(){} m.Unlock()}``` is this thread safe?
6361;```m.Lock()tasks := m.tasksm.Unlock()```Use that at the beginning of `Run()` and use `range tasks` instead of `range m.tasks`
6362;~~dont think that makes it thread safe~~
6363;well its still pointing to same array
6364;or is it?
6365;irrelevant
6366;the slice header remains
6367;whats the header if there is simple explanation i ll google it otherwise
6368;if someone calls Post or Dispose midRun Run will still operate on the slice that was at the time that Run was invoked
6369;slice header is the slice
6370;3 fields: len  cap and pointer to array
6371;oh i see now
6372;tnx
6373;slice is just accespoint
6374;just an fyi
6375;even if you copy everything in that slice then unlock it still won't be threadsafe
6376;it might technically be threadsafe but there would still be a data race
6377;in that if the functions are taking a long time to run (with the mutex unlocked) another thread may call Post and add its task inside
6378;then when Run's functions are done it'll dispose of both the old and new task without ever executing that task
6379;hi how do I get a subslice? for example items 59 of a slice
6380;`slice[5:10]`
6381;https://tour.golang.org/moretypes/7 btw
6382;yeah this is covered on like page one of the tour
6383;lol
6384;for slices
6385;i clearly missed some basic things
6386;protip: you will reread the go tour several hundred times
6387;over the course of several years
6388;i have
6389;so
6390;get started
6391;i should probably read it for the first time eventually :lmao:
6392;i did read go by example a few months ago
6393;that's another good resource
6394;but the tour is more comprehensive
6395;alright
6396;less in depth and pretty but iit covers all the features
6397;```gofunc (m MainQueue) Run() { m.Lock() tasks := m.tasks m.tasks = []func(){} m.Unlock() for _ t := range tasks { t() }}``` i lackly noticed something is wrong and this fixes it perfectly
6398;what can I write for this?
6399;None
6400;what do you mean
6401;in input err := ()
6402;i mean
6403;what do you want to do
6404;you didn't explain that part
6405;assign bool to input
6406;i mean that's confusing
6407;consider your switch cases seem to indicate you want input to be a string
6408;I want to enter only a to z
6409;not numbers or anything else
6410;but when I do this code it said wrong too
6411;"regexp.MatchString(""[az] input)"
6412;Can you...show us more
6413;what do you mean code it said wrong
6414;Dont forget the newline
6415;undefined
6416;What
6417;undefined: regexp.InputString
6418;me noob so sorry
6419;Whats...InputString
6420;Have you even done the tour
6421;?go tour
6422;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
6423;yeah
6424;Please do this
6425;It seems you dont understand Go well enough yet
6426;yea that code looks like JS bruh
6427;can I ask for architectural advice
6428;if I have two binaries being built with dependency on a shared library should I give them separate modules or have two main files in /cmd/<name>?
6429;Does anyone use API Gateway Proxy Integration with awslambdago I need it for the request headers (specifically XForwardedFor) but I also need to be able to pull out the JSON payload
6430;I know that both would work but which would be a better practice
6431;the latter is simpler
6432;so
6433;actually
6434;i guess it depends
6435;microservices
6436;do you need to version these two binaries separately
6437;https://github.com/aws/awslambdago/blob/master/events/apigw.go#L6
6438;I need to build dockerfiles from these two binaries
6439;That's the struct I'm going to be parsing
6440;the Body element is a string
6441;but if I pass in a request payload as
6442;```json{ message': helloworld'}```
6443;how am I going to slice that apart into something like a string
6444;also is there a way for a module to import another module in a monorepo
6445;"```gofunc Handler(ctx context.Context request events.APIGatewayProxyRequest) (Response error) { var buf bytes.Buffer user_ip := request.Headers[""XForwardedFor""] truncated_ip := strings.Split(user_ip )[0] fmt.Println(""The request Body element contains the following:"") fmt.Println(request.Body) fmt.Println(user_ip) body err := json.Marshal(map[string]interface{}{ message"": truncated_ip, }) if err != nil { return Response{StatusCode: 404} err } json.HTMLEscape(&buf body) resp := Response{ StatusCode: 200, IsBase64Encoded: false, Body: buf.String(), Headers: map[string]string{ ContentType"": application/json"", XMyCompanyFuncReply"": hellohandler"", }, } return resp nil}func main() { lambda.Start(Handler)```"
6446;That's what I'm working with so far but request.Body is nil even when I pass in JSON as a payload
6447;Hey guys do you know how I can quickly remove the first element from an array?
6448;is there like some quick function I can use in golang?
6449;?go slices
6450;Slice usage and internals <https://blog.golang.org/goslicesusageandinternals>  Sgt_Tailor
6451;damn it that's not it
6452;https://github.com/golang/go/wiki/SliceTricks
6453;does this apply to arrays too?
6454;arrays are immutable or something
6455;no arrays have a fixed size
6456;size is part of their type
6457;so does strings.split
6458;idk man
6459;create an array or a slice?
6460;play.golang.org
6461;try stuff
6462;use slices
6463;well
6464;`[]int` is a slice of int. `[1]int` is an array
6465;that's the difference
6466;arrays have a prespecified length
6467;slice is basically array but resizable
6468;if you don't see a length it's a slice
6469;oh okay then got it
6470;@cloud_gopher are you sure what you're seeing is the body? If you're seeing `nil` it's not the body‚Äîthe body on that type is a `string`.
6471;so how would I be managing my microservices
6472;with a single go mod or with multiple?
6473;probably multiple repos
6474;cause you are probably going to want to version each one separately
6475;probably
6476;but what if I have some shared packages?
6477;then that'd be another package
6478;@Carson  20200806T19:15:05.66807:00START RequestId: f591e3a39bbd461eae834cbef51baaac Version: $LATEST20200806T19:15:05.66807:00The request Body element contains the following:20200806T19:15:05.66907:00END RequestId: f591e3a39bbd461eae834cbef51baaac20200806T19:15:05.66907:00REPORT RequestId: f591e3a39bbd461eae834cbef51baaac Duration: 1.27 ms Billed Duration: 100 ms Memory Size: 1024 MB Max Memory Used: 34 MB Init Duration: 71.68 ms20200806T19:16:26.44507:00START RequestId: 3fbd5bdf341b42f2aab13a21a754b884 Version: $LATEST20200806T19:16:26.44907:00The request Body element contains the following:20200806T19:16:26.44907:0024.16.207.40 64.252.141.7920200806T19:16:26.44907:00END RequestId: 3fbd5bdf341b42f2aab13a21a754b88420200806T19:16:26.44907:00REPORT RequestId: 3fbd5bdf341b42f2aab13a21a754b884 Duration: 0.59 ms Billed Duration: 100 ms Memory Size: 1024 MB Max Memory Used: 35 MB
6479;hey guys I was reading slice tricks
6480;imported by whatever needs it
6481;``` x a = a[0] a[1:]```
6482;how can I import a private local package
6483;So it's either nil or none
6484;what is a?
6485;that has a fixed relative path
6486;I get that x is the new sluce
6487;slice
6488;is a like the old slice?
6489;I'm confused lmao
6490;in this example
6491;x is the first element
6492;ohhhh
6493;a is the slice after the first element to everything else
6494;got it thanks
6495;so how do I add another module in a monorepo to a gomod file?
6496;@cloud_gopher at this point it's hard to say the body isn't being set somewhere in the flow which could mean something internally to the lambda library or it could be as simple as the client not correctly sending the body
6497;Systematically work through each interaction make sure that you're getting what you expect at each point
6498;( add more logging )
6499;@CactusBlue the private local package you can require in your mod like normal and then use a replace directive to point it to the local version
6500;atlernatively you can just self host the package
6501;run a gitlab/gitea instance on your intranet OR require ssh keys for checkout
6502;badabing badaboom
6503;`go get` just uses raw git under the hood. so any time you ask how can i do X with my package it\'s just a git repo
6504;however you authenticate/protect your repos is no different than any other language
6505;Hey guys I'm trying to create a recursive function that takes in an array of int strings and I want to get the sum of all their squares
6506;```func sumSquares(arr []string) float64 { if len(arr) == 0 { return 0 } firstNumber _ := strconv.Atoi(arr[0]) if firstNumber < 0 { return math.Sqrt(float64(firstNumber)) + sumSquares(arr[1:]) } else { return sumSquares(arr[1:]) }}```
6507;the issue I'm facing is how do I print this?
6508;in the end?
6509;and I also check if it's positive
6510;:thonk:
6511;i mean
6512;at some point
6513;you call sumSquares() the first time
6514;so
6515;that's where the return value is
6516;ah yea
6517;lemme try that
6518;also I think it would make a lot more since to parse the strings to ints first
6519;and then just pass int a slice of valid ints
6520;because right now you dont actually know if any of those strings are valid in that function
6521;ahahaha
6522;also yes
6523;that'd be ideal
6524;```goints := make([]int 0 len(arr))for i := range arr { v err := strconv.Atoi(arr[i])  if err == nil { ints = append(ints v) }}sum := sumSquared(ints)```
6525;so basically my input is like that
6526;"```reader := bufio.NewReader(os.Stdin) fmt.Println(""How many integers are their gonna be?"") numberIntegers _ := reader.ReadString(\'\\') fmt.Println(""List out all the integers"") numbersInput _ := reader.ReadString(\'\\') numberArr := strings.Split(numbersInput  )```"
6527;sure
6528;i know
6529;but its the principle of it
6530;how can I directly parse it into ints?
6531;your function doesnt know and will not function correctly
6532;also keep in mind
6533;I'm not allowed to use any kind of for loops
6534;why
6535;due to this being a coding challenge lmao
6536;what a stupid challenge
6537;1 sec
6538;tell that to companies bro üòÑ
6539;ahahahahaha
6540;so lets say you get these inputs
6541;`4 5 6.4 A \\314`
6542;how does your code function
6543;well I should assume it will always be valid integers
6544;i would too
6545;but still
6546;I can simply do some type checking I guess
6547;inside my sumOfSquare function
6548;i think the simplest solution since this is a dumb challege
6549;Answer: it is a JSON string.
6550;is to check that atoi function error
6551;Now  to figure out how to parse it.
6552;and if there is an error just panic
6553;because the whole thing is borked
6554;because you have invalid input
6555;because anything but valid ints is UB
6556;yea
6557;I realised I got a logic error in suming squares lmao
6558;why does arr[1:0]
6559;nevermind
6560;because you can't index backwards
6561;s[x:y] must always have x<=y
6562;is this like a question for a interview
6563;or a shitty code golf challenge
6564;code golf might be fun with it
6565;go is a poor code golf language though unfortunately
6566;yea it is I don't know but the tech stack for the company does not include go
6567;it's more like php
6568;but every backend developer interview is giving me go coding challenges and it's a pain in the ass
6569;Another interesting question  if I have a type like this that returns interface{}
6570;https://golang.org/pkg/crypto/x509/#ParsePKIXPublicKey
6571;and I want to use it to encrypt something with say rsa.EncryptPKCS1v15
6572;how do I make the types match
6573;because that function can return any of three values represented by a generic interface
6574;The Python way is to not care
6575;yeah python's kinda bad
6576;the go way is to find out what you have
6577;```goswitch thing.(type) { case string: // do stuff case whatever.SomeType: // do stuff}```
6578;Ok  but that doesn't help me because when I do this:
6579;``` pub err := x509.ParsePKIXPublicKey(block.Bytes)```
6580;I can't use it in a multiple value assignment
6581;because I already stated that I was going to return rsa.PublicKey
6582;"```gofunc marshal_key(input_key string) (pub rsa.PublicKey err error) { var pubPEM string = input_key block _ := pem.Decode([]byte(pubPEM)) if block == nil { panic(""Failed to decode key"") } pub err := x509.ParsePKIXPublicKey(block.Bytes)}```"
6583;Otherwise I have to continue type checking all the way up
6584;(If I don't use a multiple assignment it also throws saying that I need to use both values)
6585;hi what am i doing wrong here? ```go reaction := bc.WaitFor(ctx func(v interface{}) bool { if v == nil { return false } r ok := v.(gateway.MessageReactionAddEvent) // ... do stuff```Error: `panic: interface conversion: interface {} is nil not gateway.MessageReactionAddEvent`
6586;i also tried without the `&`
6587;`if v == nil`
6588;not `&v`
6589;`&v` is never nil
6590;i did that
6591;still errors
6592;you are probably doing v.(type) again somewhere?
6593;no
6594;that's quite literally the only place in my whole app i use the variable `v` and `gateway.MessageReactionAddEvent`
6595;also that nil comparison
6596;i originally (and currently) have it without `&`
6597;edited
6598;sometimes ppl confuse `nil` with `(gateway.MessageReactionEvent)(nil)`
6599;ets say i have a string that is composed like this: `10d4m9s`how would i parse to 10 days 4 minutes and 9 seconds? Dont know what would be the most efficient tactic.(yes it can't have spaces)
6600;where does the panic point to
6601;@hhhapz loop
6602;wdym can't have spaces
6603;the panic points to `r ok := v.(gateway.MessageReactionAddEvent)`
6604;so lioke it cant be `10d 9m 4s` etc.
6605;single word
6606;"```govar days minutes seconds intfor _ word := range strings.Fields(input) { switch word { case days"": case minutes"": case seconds"": case and"": continue default: return nil fmt.Errorf(""Unknown token %q word) }}```"
6607;wait
6608;yeah i don't think it points there bud
6609;ok i'm dumb and can't read my own code
6610;fuck
6611;"@_diamondburned_ the opposite; it cant have spaces (which is what fields splits on if im reading the docs correctly)"
6612;wat
6613;your string has spaces though
6614;oh
6615;i was giving an example of what it cant be üòÇ
6616;i looked the wrong string
6617;use time.ParseDuration
6618;wait
6619;yeah i was thinking of that it only goes up to an hour tho üò¶
6620;i don't think it supports days
6621;yeah
6622;i used a library but i forgot about it
6623;so meh
6624;maybe convert to char array and do manual parsing?
6625;i wouldn't
6626;or trry to clone the parseduration and add my own struff
6627;√∫e https://golang.org/pkg/text/scanner/
6628;use
6629;hmm i have no clue how to use that package... seems like a fun ride üòî
6630;hello Is there any package for golang like beautifulsoup in python for parsing html with special tag? i mean like in beautifulsoup you say just list for me H1 tags and i want to know is there any package for golang to do that?
6631;how can I round up using division?
6632;use math.Ceil
6633;@Deleted User if you remove the &v to v == nil the error is different isn't it?
6634;I'm guessing that is something related to <https://play.golang.org/p/wEE9YpcP_M>
6635;nil != (int)(nil) in an interface
6636;no i'm fucking dumb and was reading the wrong part of my code :meowfacepalm:
6637;ah ü§∑\u200d‚ôÇÔ∏è
6638;either way that function still fails if v is nill
6639;do below if r == nil { return false }
6640;alright
6641;@keyk yes
6642;i forgot the name tho gimme a min
6643;goquery
6644;@_diamondburned_ Thank you man.
6645;https://github.com/PuerkitoBio/goquery
6646;yea np
6647;üôè
6648;@hhhapz it's pretty magical once you get it working
6649;trust me
6650;but you can always take the easy way out and use regex :^)
6651;`(\\d+d)?(\\d+m)?(\\d+s)?`
6652;https://regex101.com/r/1QOj8N/1
6653;@_diamondburned_ honestly i just yoinked the parsedate code
6654;it stored the characters to their timestamps in a map
6655;i just changed it
6656;parseduration
6657;kek
6658;lame
6659;the worst way tbh :pEnSiVe:
6660;what are you gonna do officer? DETAIN me?
6661;LoL
6662;nothing
6663;cba
6664;I'll just possibly sneer at it every time I see it /s
6665;what am I doing wrong? `int(math.Ceil(float64(len(p.Items) / countInPage)))` returns 1 when there are 6 items and count is 5
6666;oh
6667;i needed to float64 each individual item
6668;Anyone here use testify?Is there a way to run a specific test? I've seen people use `m` or `testify.m` but nothing works for me as it just complains about an undefined flag being provided.```flag provided but not defined: m```or ```flag provided but not defined: testify.m```I've seen people in the comments to this question suggest it's possible.https://stackoverflow.com/questions/40433788/canirunasingletestinasuite
6669;greetings all i would like to learn golang and i have some questions1. do i need to have a computer science knowledge to learn it appropriately ?2. what's exactly the use cases that fit well with golang ?3. should i learn kubernetes before jumping into golang ?thanks
6670;1. not necessarily depends on whether or not it's formal or informal CS you're talking about2. serverside stuff or things that can utilize Go's concurrency stuff3. no why?
6671;well after researching about golang most of the posts is about kubernetes so i thought i have to learn it before jumping into golang
6672;nah k8s is talked about a lot because it's written in Go and it's used by a lot of people to manage their service deployments
6673;worth mentioning k8s isn't the only solution for that either
6674;but it's not related to go
6675;alright thanks
6676;is there good tutorials/channels that you recommend for beginners ?
6677;yeah
6678;the Go Tour
6679;?go learn
6680;Gopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Go by Example <https://gobyexample.com/>  SkippyA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  Skippy
6681;> A Tour of Go https://tour.golang.org/welcome/1  Skippy
6682;Let me rephrase my question... is there a way to run individual test methods within a package from `go test`?
6683;`go test run TestThing`
6684;That's to run all the methods in a package?
6685;thank you @_diamondburned_
6686;yea np
6687;@armadon no that's to run an individual test fn
6688;to run all tests in a pacakge do `go test ./path/to/pkg`
6689;gotcha :)This is quite odd...
6690;I can see that this is what VSCode invokes and it works```go test run ^TestIntegrationSuite$ testify.m ^(TestMethod)```From the command line it shouts at me```zsh: no matches found: ^(TestMethod)$```
6691;try quotation marks
6692;honestly i'm not sure about badger
6693;i feel that creating my own db abstraction is gonna be damaging
6694;it's either kv or sql
6695;it would be difficult to take advantage of either's optimizations if they're abstracted away
6696;and it's bulky to maintain anyway
6697;badger is kv
6698;yes ik
6699;sql is already easily swappable with `database/sql` right?
6700;not really
6701;the schemas and queries you write will probably be specific to one sql server anyway
6702;but there's tools for migration
6703;i suppose yeah
6704;not really to do w/ being swappable though
6705;yes
6706;but i don't have to worry about an abstraction
6707;i feel like the `DB` interface would just bloat up and start including dbspecific stuff and that would be counterproductive
6708;I want to allow users to make simple scripts with a custom format very much how she Discord bots have custom commands. Does anyone know how one would parse this?
6709;maybe use lua?
6710;if you want scripty stuff
6711;otherwise there are libraries that allow you to make very custom commands
6712;https://github.com/yuin/gopherlua
6713;https://github.com/alecthomas/participle
6714;> i feel like the DB interface would just bloat up and start including dbspecific stuff and that would be counterproductivewouldn't be a problem w/ good design but def start out w/ something simple first
6715;once you have an idea of how things will be structured then you start refactoring
6716;"in a type switch is there a way to check if something is a struct or a built in type? im not even sure if what im saying makes sense but somehting like```gofunc printType(data interface{}) { switch data.(type) { case int:  fmt.Println(""it\'s an int"") case struct: fmt.Println(""it\ a struct"") default: }}```"
6717;but thinking about it I dont think it'll do much
6718;you can't without reflection
6719;fug
6720;should I just make it not possible to send structs
6721;why would you wanna cache a struct anyway
6722;could just marshal it into json and pretend there's no reflection
6723;like most Go code out there
6724;Hi!Can somebody help me to build the following Go locally? (OS: ubuntu 20.04)https://github.com/google/nelcollectorThe project has two folders: cmd/nelcollector pkgI tried so far:1.`go build`2.```  go get t ./...  go get golang.org/x/lint/golint```but I get all kind of errors related to missing packages and incorrectly set up gopath.I think I need to make so `GOPATH` related setup. But it is unclear to me how this should work...
6725;The project seems to follow the `golangstandards/projectlayout`
6726;in $GOPATH
6727;$ go get github.com/google/nelcollector$ cd nelcollector/cmd/nelcollector/$ go get$ go build$ file nelcollectornelcollector: ELF 64bit LSB executable x8664 version 1 (SYSV) dynamically linked interpreter /lib64/ldlinuxx8664.so.2 Go BuildID=c5f0mL7ZhKoSVjA7LY9/c6ToTGj53QEGbVbxqFWn/o7ixxaTPH1IJmYcyqFr8/rY7RiuMEQBs4ENhy4JNL not stripped
6728;@misterturtle  it worked. Thanks!Just one observation. The 2nd command should: ```cd src/github.com/google/nelcollector/cmd/nelcollector/```
6729;When I said in $GOPATH it wasn\'t very clear my bad. Should have included the full path üôÇ
6730;and also yeah I didn't include the full path for the cd also my bad üòâ
6731;It's ok. I figured it out üôÇ
6732;good stuff
6733;Hey guys do you have experience in creating Windows services? I\'ve used this library https://github.com/kardianos/service. The example works great. I added the lib in my project and it didn\'t start. It immediately fails with A timeout was reached (30000 milliseconds) while waiting for the MyService service to connect. error. The app writes no logs. Do you know how to debug it?
6734;can i make a go function run when you press a button
6735;in a web app
6736;Probably With some JavaScript
6737;Or a form
6738;I'm currently using a struct to provide a database logging facilities and resources to goroutines. Should i use context instead?
6739;No
6740;hey guys
6741;I started learning concurrency patterns in Go
6742;https://stackoverflow.com/questions/52231161/passgofunctiontohtmljsbuttononclickresponse
6743;and ran into a problem
6744;according to SO i can rungo code on a button press
6745;```gofunc (a ArtPost) fetchPixivPosts() ([]ugoira.PixivPost error) { var ( errChan = make(chan error) postChan = make(chan ugoira.PixivPost) wg = &sync.WaitGroup{} ) wg.Add(len(a.PixivMatches)) for id := range a.PixivMatches { go func(id string wg sync.WaitGroup) { defer wg.Done() px err := ugoira.GetPixivPost(id) if err != nil { errChan < err } postChan < px }(id wg) } go func() { wg.Wait() close(errChan) }() for err := range errChan { return nil err } posts := make([]ugoira.PixivPost 0) for post := range postChan { posts = append(posts post) } return posts nil}```
6746;@Str≈ìm why not?
6747;passing wg directly into a goroutine was something I thought would fix an issue but I guess it's useless.
6748;basically the code above never closes errChan and I don't understand why
6749;why using html templates doesnt load CSS and JS?
6750;as in...
6751;where
6752;"```html<head> <link rel=""stylesheet href=""styles.css""> <script type=""text/javascript src=""scripts.js""></script></head>```"
6753;it's your browser
6754;is it?
6755;are the files specified actually available
6756;@skuz because logic critical things shouldnt be in a type unsafe container
6757;if you serve a styles.css file in your public folder it should work.
6758;if i just run the template.html file it works
6759;@Str≈ìm so just stick with a struct?
6760;@czechuuu no that SO post doesnt say you can run Go code on button prees
6761;@skuz sure thats valid
6762;k
6763;could you guys help with my concurrency problem I'm seriously at loss :(
6764;database/sql dictates that i need a ctx in there
6765;should i just put one in the struct?
6766;Thats for cancellation purposes if you so wish
6767;And should be on a per query or per request basis
6768;@VTGare can you post all of your question at once its scattered and difficult to look at
6769;"> Do not store Contexts inside a struct type; instead pass a Context explicitly to each function that needs it. The Context should be the first parameter typically named ctx:"
6770;@VTGare the defer wg.Done runs when the functions return. But they never return because theyre blocked trying to send into postChan
6771;Unbuffered channels block on send and receive
6772;when i launch the goroutine i should pass a context to it so i can cancel it?
6773;so should I just add ``return``?
6774;You cant cancel a goroutine simply by passing a context
6775;@VTGare no your functions arent returning i said
6776;they need to check `ctx.Done()` right
6777;Yes
6778;that's insightful but I still don't quite understand how to fix it
6779;oh should I buffer channels
6780;Thats a possibility
6781;Yeah easiest solution here is to buffer your channels so it doesn't block.
6782;And you can read off the buffer in the end bit
6783;you also can't iterate over a channel like that
6784;Yeah now it successfully closes the channel after buffering channels. Thanks guys
6785;Great
6786;> you also can't iterate over a channel like thatü§î would like to hear more
6787;You're trying to read off the buffer right?
6788;right
6789;Oh nvm range will work fine
6790;Carry on üòÅ
6791;thanks a lot it all works
6792;@czechuuu You've read the SO question not the answer
6793;11/10 would recommend
6794;Trustpilot
6795;When uploading a file via POST to my golang server I can now write it to disk. It will be within the gin context c.Request.Body. But how would I extract the given Filename from that?
6796;"```go// HandleUserImage will handle the upload of a profileImg for a userfunc HandleUserImage() gin.HandlerFunc { return func(c gin.Context) { file := c.Request.Body fname := file.name # < This cannot work as file is of type io.ReadCloser and has no field or method name f err := os.Create(fname) if err != nil { logger.Error(err) } defer f.Close() if _ err := io.Copy(f file); err != nil { logger.Error(err) } c.String(http.StatusOK Image uploaded successfully"") }}```"
6797;Multi part form probably
6798;Depending on how you post the data
6799;```js await axios .post( `${process.env.REACT_APP_API_ROOT_URL}/user/${playerID}/image`, image, { headers: { ContentType': mimetype, }, } )```
6800;image is a file object
6801;coming from a form field beeing input type=file
6802;dont think theres a name there if you do it that way
6803;oh just forget about it
6804;I am dump ^^ planned on using uuidv4 anyways
6805;maybe time for weekend already
6806;üòõ
6807;I was trying to get some way to
6808;Make a lot of golang codes to register in an Array
6809;i did something like
6810;src test test.go other.gomain.go
6811;main.go have something like
6812;"```gopackage mainimport ( ./src/test"")func main(){ test.Start()}```"
6813;This start function is just to compile the unused file
6814;in test.go i have
6815;"```gopackage testimport ( fmt"")func init(){ fmt.Println(""It will be registered 1"")}func Start(){ fmt.Println(""It started lul"") }```"
6816;and other.go have a similar code
6817;so.... for every file inside `test`
6818;i'll use init to register it to an array
6819;should i do that lul?
6820;you can _ import
6821;"```goimport ( _ mymodule/mypackage"")```"
6822;oh
6823;"also ` ./src/test""` dont use relative imports"
6824;> you can _ import@Str≈ìm If I understand correctly I think he's trying to get code in separate .go files in the module to have their functions stored in an array to call at runtime. If you import _ how are the separate functions from the test/.go files regsitered in the main program?
6825;does someone know how to debug with build tags in vscode?
6826;you could use init() from the module but you have no reference to the main program to register anything.
6827;by _ importing the init functions of the \\_ imported packages are run at runtime
6828;but I think he's trying to store references to the functions to call later
6829;yes in an array which they add to in the init functions
6830;>i'll use init to register it to an array
6831;Sorry I still don't quite get it. If the init() is running when the test package is initialized how does the main program then reference the array? It can't be returned to the main program. If the idea is to build up an array in the main program and then range over it and execute each function I'm not sure I understand how it would work
6832;the array can be in a different shared package
6833;excellent point
6834;And you can have multiple init() per package?
6835;Ah yeah I see you can
6836;Previously I'd thought the only real way to do this would be with plugins which then aren't buildable on Windows
6837;I dunno if i should use a LOT of init()
6838;cause i\'ll use one for each command that i create.
6839;just to initialize an array
6840;Thanks for walking me through it @Str≈ìm
6841;üëå
6842;None
6843;these are the files that i created
6844;```gopackage registervar Arr []int = make([]int 0)```
6845;"main.go```gopackage mainimport ( fmt"" ./src/register"" _ ./src/commands"")func main(){ register.Arr = append(register.Arr,3) fmt.Println(register.Arr)}```"
6846;"other.go ( that is similar to teste.go )```gopackage commandsimport ( ../register"" fmt"")func init(){ register.Arr = append(register.Arr,1) fmt.Println(""Init1"")}```"
6847;crazy names i know
6848;but it's only for testing
6849;None
6850;This is the output
6851;@Str≈ìm @Chiyoku Is this the kind of thing we were talking about https://github.com/knodesec/initfuncarrays
6852;yes
6853;I made the repo before deciding to use interfaces instead but same difference
6854;Thanks again it's actual a nice little solution for another problem I was having
6855;Is there a simple way in go to convert base numbers to another base. for example base 10 to base 25
6856;well
6857;here's the thing
6858;a number is a number
6859;35 in hexadecimal is still 35
6860;https://golang.org/pkg/fmt/
6861;anyways i'm almost certain what you want is the fmt verbs for printing integers out in various bases
6862;Awesome I will take a look at that. Thank you.
6863;just remember that the base is just a way of representing a number
6864;the same way that uh
6865;you know dogs. you can say dog perro etc etc in different languages
6866;it's all the same underlying concept
6867;just different representations
6868;35 in hexadecimal is still 35 wait am i missing something or is that incorrect
6869;do you mean to say 35 ( in hex) is the still 35 (in b10)?
6870;because 35 in hex is 53... no?
6871;Their point is (the hexadecimal representation of 35) is still 35
6872;ah
6873;well yea that makes sense
6874;base perro encoded
6875;understanding the distinction of different representations of a base concept is applicable to a lot of other stuff
6876;does go have some sort of `int++` literal?
6877;Wdym
6878;yes theres `++`
6879;ah it just does not work when specifying an array index tyvm
6880;Yeah it‚Äôs purely a statement rather than an expression like other languages
6881;It increments but it doesn‚Äôt evaluate to anything
6882;gotcha. Then I'll just have to seperate that
6883;it seems binary.xEndian.Put functions only have uint variants how would you convert a signed int into bytes ü§î
6884;`binary.LittleEndian.PutUint64(uint64(yourInt))`
6885;oh
6886;and i assume I can get my int back
6887;yep conversions between signed and unsigned integer types of the same size are completely lossless
6888;the default int type is 32 right?
6889;no
6890;depends on the target architecture
6891;for most commonly used targets it's 64 bits
6892;oh
6893;for wasm arm mips32 and some others it's 32
6894;Even for arm64 ?
6895;nope arm64 is different from arm
6896;for arm64 int is 64 bits
6897;Hello guys can u send me package for generate pdf to HTML?
6898;HTML to pdf
6899;Isn‚Äôt that what dreamweaver does?
6900;Oh other way around
6901;Looks like there are a bunch of packages if you search on google
6902;Dreamweaver ü§¢
6903;https://github.com/thecodingmachine/gotenberg
6904;@OlegSika
6905;Thank you
6906;Dockerpowered
6907;I'm gonna guess it shells out to Pandoc
6908;Hehe
6909;https://groups.google.com/forum/m/#!msg/golangannounce/G3atWQdoyvw/03XzzSXgAAAJ
6910;go 1.15rc2 released
6911;> The compiler's json optimization logging now reports large (>= 128 byte) copies and includes explanations of escape analysis decisions.
6912;ü§®
6913;> The new method Map.LoadAndDelete atomically deletes a key and returns the previous value if present.ayy finally
6914;> The new method Ticker.Reset supports changing the duration of a ticker.
6915;:cereal:
6916;pretty good
6917;pog
6918;I've always wanted that instead of the horrible song and dance
6919;lol same
6920;also did you guys see https://github.com/goccy/gojson ?
6921;https://github.com/goccy/goreflect
6922;pretty cool stuff
6923;time to use this in production yeet
6924;Identical api?
6925;yeah
6926;also how new is this?
6927;last week or two
6928;damn
6929;also this dude made so many cool things
6930;https://github.com/goccy/gojit
6931;ü•¥
6932;I started learning Golang 2 hrs ago what else can I do with it apart from making servers?
6933;almost anything you wish
6934;to varying degrees of success and ease
6935;oh thanks. really liking the language was very happy that there is a compile time error if I haven't used the particular variable
6936;if you wish to help me with some cool Go project {ideas} I will also search it in the repos.
6937;anyone knows payments projects for learning? want to know how it works
6938;handling money isn't really a practice project
6939;also how it works is uh
6940;vague
6941;just use floats
6942;:kkk_clueless:
6943;financial tech is very complicated
6944;yeah because I don't have better picture on it so only a vague notion
6945;?go float
6946;Don't use floats for currency <https://www.youtube.com/watch?v=PZRI1IfStY0>  Sgt_Tailor
6947;Please
6948;Watch that
6949;well that's important too
6950;"but like how does money changing hands work in 2020 is like asking how do airplanes work"". you CAN say they move fast enough to not fall down or you can explain how turbojets and derive benoulli\'s equations from scratch"
6951;you'll want to understand basic networking
6952;http tcp/ip
6953;tls basic encryption concepts json probably xml
6954;for SOAP shit
6955;banks are old as heck
6956;Couple of big payment providers strung together using duckt tape
6957;ancient dinosaur shit
6958;Id imagine proprietary backend legacy services connected by standards that probably aren't public
6959;yep
6960;Bunch of protocols. SEPA payments direct debit and the lost goes on
6961;as a civilian you're basically going to use Stripe
6962;and use the stripe api
6963;so
6964;again the parameters of how it works are still unclear. do you want to know how banks work? or how can i take money from someone
6965;so I guess I was trying to ask how do you build a toy stripe if that makes sense
6966;oh
6967;i mean as long as you don't intend to actually interact with any real money you could do that
6968;actual payment processing costs money
6969;You could take any example API tutorial video or example and replace the methods with bank orientated functions
6970;Can confirm moving money costs money. You usually don't directly pay for that because it has been calculated into the fees
6971;ok let me regress .. what are some midsize backend projects for starters?
6972;I'll move to payment maybe after I get the basics
6973;I tend to find it works better if you have a problem to solve instead of forcing a project for the sake of it is there anything you do that could be made easier with some web service?
6974;Bear in mind a web application could wrap any functionality to provide a cross platform interface
6975;yeah i mean
6976;it's all backend
6977;write an address book app
6978;or
6979;a choose your own adventure game
6980;I was more thinking.. say I use KeePass I could write a web app frontend for it
6981;sure that's fun too
6982;But obviously @func we csnt tell you what project would be right for you
6983;@deezy I actually started a devops project based off KeePass using tags in comments to run commands across an estate it's super dangerous :D
6984;man
6985;sounds like you just want like
6986;vault/consul
6987;Oh I know there are solutions but this is just more to practice Go
6988;Plus sometimes your limited by corporate policy
6989;You dont work in infrastructure but could you get the last update time for each of these 70 odd linux boxes here\'s the KeePass ... sure thing boss üò©
6990;is this legit?
6991;seems legit
6992;check the DKIM on the email
6993;Looks legit as it looks like gmail and it didn't insta flag it as spam from a google.com email I'd google the domain and see if it's the right domain and all
6994;it appears to be the right domain
6995;Yup looks like a legit merch store
6996;yeah looks like the right one but it's still rare to me to get that email
6997;haha
6998;> check the DKIM on the email@Str≈ìm how can i do this?
6999;depends on the client
7000;idk with gmail
7001;seens legit i guess o.o I'll take the risk
7002;How can i wait for CONTROL+C
7003;in windows?
7004;i think that the Interrupt is not working.. cause it's for linux
7005;it should just be os.Interrupt for both OS
7006;unless Cc doesn't send that on Windows
7007;haha yes https://stackoverflow.com/questions/813086/canisendactrlcsiginttoanapplicationonwindows
7008;hi im getting an error when posting n sending a webhook
7009;webhook send error: request failed: Post https://discord.com/api/v6/webhooks/738474132282540202/JPGpWHV6vWxb02_sxEQV0nd9IY7NToFC9xccRodJIl7sUUIFHPLXDJeBuO1aXWesHLL?: io: read/write on closed pipe
7010;im using this funciton to send
7011;"```gofunc (self WebhookSender) SendEmbed(color uint32 description string) error { webhookURL := regexp.MustCompile(`https://discord.com/api/webhooks/(\\d+)/(\\S+)`) matches := webhookURL.FindStringSubmatch(self.WebhookURL) if len(matches) != 3 { return errors.New(""Invalid URL format"") } w err := discord.ParseSnowflake(matches[1]) if err != nil { return err } c := api.NewClient("""") _ err = c.ExecuteWebhook(w matches[2] false api.ExecuteWebhookData{ Username: self.Username, AvatarURL: self.AvatarURL, Embeds: []discord.Embed{ discord.Embed{ Description: description, Color: discord.Color(color), }, }, }) if err != nil { return err } return nil}```"
7012;looks like you're using my library
7013;if you update to v1 there's a separate webhook package you could use
7014;:hugged:
7015;still unsure why that error happens tho
7016;small world!
7017;yea not to sure myself
7018;my only assumptions is im trying to send to the saem webhook path at the same time
7019;from diff goroutines
7020;dk if that would cause that error tho
7021;that should be fine
7022;github.com/diamondburned:
7023;u!!!
7024;well if any possibilities that come to mind that could possibly cuase this im always open to help
7025;also please dont do regex like that
7026;reuse regex
7027;dont make a new one over n over
7028;^
7029;will do thank u!
7030;yea np
7031;ok go reflect is super cool @_diamondburned_
7032;yeah
7033;I'll use that for my Discord lib soon
7034;I'm assuming yaml and json are both using it too
7035;for their impls
7036;:kek:
7037;(their own goyaml/gojson implementations of course)
7038;yea gojson does
7039;Hey i am done with the go tour,anyone know where i can learn Go good?
7040;?go learn
7041;Gopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Go by Example <https://gobyexample.com/>  SkippyA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  Skippy
7042;so im running into a weird bug that I can't seem to figure out
7043;whats that
7044;@Moh
7045;"so I got this running as a goroutine```gofunc (c ConnectionManager) listen() { for { packet := < c.Conn.ReceiveQueue receiver := c.Messages[packet.RequestID] receiver < packet c.RecievedPacket(packet.RequestID) }}```and these two functions run later```gofunc (c TCPClientInstance) Set(key string value interface{}) (err error) { packet err := composePacket(key value); if err != nil { return err } var resultChan chan network.Packet c.Conn.SendPacket(packet &resultChan) result := < resultChan if result.Operation != OK { return errors.New(string(result.Data)) } return nil}func (c ConnectionManager) SendPacket(packet network.Packet reciever chan network.Packet) { id := packet.RequestID c.Messages[id] = reciever c.Conn.SendQueue < packet}```"
7046;it's stuck at the `reciever < packet` step
7047;It's trying to write to a channel but nobody is listening
7048;yea but this part here should be running on a seperate goroutine ` result := < resultChan`
7049;and `resultChan` is the same channel as `receiver`?
7050;i've made sure that the line right above the send and receive run
7051;Not sure what your `SendPacket` method does is that a package you've imported or something internal within your code?
7052;and yea printed the pointer and got the same address so it should be the same channel
7053;Oh okay then you're fine
7054;send packet is the last function in the code snippet above
7055;:Facepalm: Oh sorry
7056;the code is a mess right now
7057;im ganna try making the channel buffered tho Idk if that makes a difference
7058;Fwiw `resultChan` is nil
7059;You might want to do `resultChan := make(chan network.Packet)`
7060;I'm still trying to get an idea of what your code does.
7061;ok yea that was it
7062;it's weird how you can send messages to nil channels
7063;Well you can't üòÑ
7064;that's why your code broke
7065;i mean it doesn't error out
7066;Anyways in general `var ...` is going to create some object w/ a nil value (so `var foo int` makes `foo` with a value of 0) or whatever is nil for the respective type
7067;You actually need to use the make keyword to create the channel
7068;similar thing for maps `var kv map[string]string` isn't the same as `kv := make(map[string]string)`
7069;for maps you can also do `kv := map[string]string{}`
7070;SendPacket is supposed to later on add the channel in a concurrently safe way to the map because the protocol is async it just sends and recieves as soon as you can
7071;üëç
7072;So your issue is fixed yea?
7073;ye thanks
7074;great
7075;any yt/twitch channel programming in golang you would recommend?
7076;https://www.twitch.tv/mdlayher
7077;francesc something forgot his name
7078;<https://www.youtube.com/channel/UC_BzFbxG2za3bp5NRRRXJSw>
7079;is it normal to not leave many comments in Go outside of on top of the functions to show what it does
7080;everything just seems self explanatory
7081;:stare:
7082;that's fine
7083;yes best comment is no comment because of selfexplantory code
7084;yeah ive written like over 20k lines in this project and i am lacking in comments
7085;:BCS_PepeLaugh:
7086;the only time you need to comment (imo) within a block is if there's something to do some issue or if there's some confusing logic you might want to remind yourself about
7087;yeah thats the only time i put lots of comments
7088;It's always nice to have comments on exported methods explaining more about them especially if it is a package other people are going to be using. It also can make code easier to understand. Most of the time you might not need them but it is a good habit to get into
7089;in any language outside of Go i would put way more comments
7090;like rust
7091;:BCS_PepeLaugh:
7092;Yeah Matthew Riku was asking about other than on top of the exported object headers
7093;Also get into the habit of reading comments from the stdlib. Then you will find things out like `os.Chown` will update ownership on symlink targets üôÉ
7094;documentation is your friend
7095;I regularly comment tbh
7096;selfdocumenting is a huge pitfall because you the programmer will have a skewed and biased knowledge of it
7097;also reading comments just requires less brain power
7098;i dont trust myself to remember anything past the same day
7099;mood
7100;otoh comment lies but code doesn't
7101;It's contextual really. Sometimes I have functions with no comments others have every subsection annotated with a multiline comment.
7102;code does lie
7103;the entire go runtime is a huge lie tbh
7104;I'm trying to marshal an array of structs into a JSON file. It's very painless to do so but I can't get the output JSON file looking nice. It has this one space around the text that's really bugging me
7105;None
7106;This is my code
7107;None
7108;no matter how I change the values in `json.MarshalIndent()` I can't get it looking nice
7109;I just want two space indents
7110;did you check the example?
7111;yes the example code that I got this from did `file err := json.MarshalIndent(processes   )` but their output is different to my output
7112;the output in the example doesn't have the one character spacing that mine does
7113;`  ` should\'ve worked afaik
7114;well make it 2
7115;None
7116;None
7117;There's still that weird padding
7118;okay so it might just be a vim thing because it doesn't show up when I use a different text editor
7119;None
7120;Hey guys so I have a recursive function that takes in an array of integers and simply sums the squares of the integers
7121;"```func sumSquares(arr []string) float64 { if len(arr) == 0 { return 0 } firstNumber _ := strconv.Atoi(arr[0]) fmt.Println(""The array is:  arr) fmt.Println(""First number is:  firstNumber) if firstNumber < 0 { return math.Sqrt(float64(firstNumber)) + sumSquares(arr[1:]) } else { return sumSquares(arr[1:]) }}```"
7122;the issue I am facing is when the array size is 1 the number is always 0
7123;for example if arr = [3]
7124;and I do arr[0]
7125;it comes out as 0
7126;why is that?
7127;this is the result from console
7128;I'm assuming it has something to do with `if firstNumber < 0`
7129;idk why but something about that doesn't feel right
7130;but isn't that simply the size of the array?
7131;"I basically copied your function line for line:```gopackage mainimport ( fmt"" strconv"" math"")func main() { nums := make([]string 4) nums[0] = 3"" nums[1] = 4"" nums[2] = 2"" nums[3] = 2"" fmt.Println(""This is the sum of the squares:  sumSquares(nums))}func sumSquares(arr []string) float64 { if len(arr) == 0 { return 0 }  firstNumber _ := strconv.Atoi(arr[0]) fmt.Println(""The array is:  arr) fmt.Println(""First number is:  firstNumber)  if firstNumber < 0 { return math.Sqrt(float64(firstNumber)) + sumSquares(arr[1:]) } else { return sumSquares(arr[1:]) }}```And got this output:```The array is: [3 4 2 2]First number is: 3The array is: [4 2 2]First number is: 4The array is: [2 2]First number is: 2The array is: [2]First number is: 2This is the sum of the squares: 0```"
7132;so I'm not sure what issues you getting. Also if you want to find the sum of square roots there's a far simpler way to do it
7133;```gofunc sumSquares(arr []string) float64 { ret := float64(0) if len(arr) > 0 { for _ str := range arr { num _ := strconv.ParseFloat(str 64) ret == math.Sqrt(num) } } return ret}```
7134;@Prexxla you're not summing them
7135;Why are you just returning sumSquares(arr[1:])
7136;You need to add them to get the sum
7137;@Str≈ìm I shouldn't add negative integers
7138;Then you have your if statement the wrong way
7139;Shouldnt it be if firstNumber > 0 sum them
7140;how so?
7141;ah yes
7142;I noticed that
7143;thanks
7144;I'm curious as to why you're using recursion for a task as simple as this
7145;No ones ever felt smart writing a for loop
7146;true but it's less code more efficient and imo easier to read
7147;> I'm curious as to why you're using recursion for a task as simple as this@TimeLoad looks like a school assignment to me. Maybe that's why.
7148;I dont think its less code
7149;You left out a lot of things
7150;@Prexxla do you want to add squares or square roots?
7151;```gofunc sumSquares(arr []string) float64 { if len(arr) == 0 { return 0 }  num _ := strconv.ParseFloat(arr[0] 64) return math.Sqrt(num) + sumSquares(arr[1:])}```
7152;If going off the edge cases that you handled in your iterative version
7153;```gofunc sumSquares(arr []string) float64 { ret := float64(0) if len(arr) > 0 { ret _ := strconv.ParseFloat(arr[0] 64) ret = math.Sqrt(ret) + sumSquares(arr[1:]) } return ret}```
7154;oh you already posted a version. Basically same thing just different coding style
7155;my version is 2 lines longer than my nonrecursive version but I still prefer the nonrecursive version
7156;"```go setupLog.Info(""starting manager"") stopCh := ctrl.SetupSignalHandler() if err := mgr.Start(stopCh); err != nil { setupLog.Error(err problem running manager"") os.Exit(1) }```The above snippet is from my `main`. The `Start` function remains in a blocked state when started OK or returns `err` when there is a failure. How can I move this to a goroutine but still check deterministally for `err` in my main thread?"
7157;Create a channel of type error in the main thread create this goroutine and send the error into that channel block your main thread until you receive an error and check if the error is nil or not.
7158;That's still blocking though
7159;@aditya indeed still blocking. I was thinking first of using `select` in the main thread but due to timing I guess I might miss a possible `err` case right?
7160;[NEW TO GO]I have installed go successfully how to check if it is installed correctly ?
7161;try to compile a hello world program
7162;Through command line ?
7163;Do i need an IDE ?
7164;`go info`
7165;Ohhk thanks
7166;@Ringo No because channels won't drop messages someone sending a channel would need someone on the other side listening before your goroutine would continue.
7167;I might have to set the path does it get automatically set while installation
7168;"yes through the command line. Write this into a file (let\'s say `main.go`)```gopackage mainimport fmt""func main() { fmt.Println(""Hello world"")}```and then in commandline type `go build main.go`"
7169;All right
7170;it should automatically get set during install
7171;and yes you can use a select statement and do some work until you get a message from the channel
7172;And you can also implement a timeout using context
7173;@aditya so if I would poll a few times using select on the `errCh` I might still get the message and act accordingly then?
7174;Well not might you will.
7175;I have another question for you
7176;Do you just intend to close your program?
7177;When you have an error.
7178;Probably yes.
7179;Still have to think through all the error handling retries etc.
7180;@Str≈ìm I am just doing a coding interview and they told me to do this in golang without using any loops lmao
7181;:kkk_CEREAL:
7182;Is this for an internship or something :robpike:
7183;https://play.golang.org/p/KS3MwEPjkO @Ringo
7184;TIL go lets you kill the process from a goroutine
7185;Main reason now to ask to move this into a goroutine is that I need to start a second (blocking) client connection. The `mgr` above is a Kubernetes `Manager` interface from the `operatorsdk`. When I receive a message from Kubernetes I need to inform the other subsystem via the second client.
7186;That's fair.
7187;so os.Exit from your goroutine is one option
7188;@Str≈ìm yea it's for an internship
7189;Log.Fatal
7190;Does the same
7191;Log and then exits
7192;@Prexxla you sure you should be asking for help for interview questions üëÄ
7193;Googling and asking the community is all part of a software developer's job
7194;@Str≈ìm I understand the logic lmao I just don't know golang
7195;I started learning it like 2 days ago
7196;The `os.Exit` part probably will be consolidated for both clients at main level.
7197;None
7198;It did not print tho
7199;You didnt run it
7200;You only compiled it
7201;Ohhh
7202;^
7203;`./main.exe`
7204;Ohhh
7205;Or just go run main.go
7206;go run .
7207;which builds and executes in one go
7208;I don't tend to use it because of the kind of software I build forgot about that option
7209;What if i run this main executable file directly ?
7210;That's fine too
7211;All right
7212;`go run` just builds your code and throws it into `/tmp/` or your OS equivalent btw
7213;What is the purpose of creating an executable file tho ? to be able to ship it
7214;yeah
7215;Well Go is a compiled language. You have to compile it before you can ever run it.
7216;Aah yeah
7217;Because resolving dependencies n co at runtime is for the sadists at python and nodejs that love couldnt find module xyz at runtike
7218;I create executables because I work a lot within VMs. So I write and compile the executable on my host machine and then execute it in my VM
7219;:kkk_chad:
7220;üò§ lol stroem
7221;haha yeah i am coming from js background üòõ
7222;going from a scripting language to a compiled language will be quite the jump
7223;Yeah i believe
7224;mixing runtime and comptime is like mixing oil and water üò≠
7225;Hahah
7226;I come from a C/C++/C# background so making the jump to Go was pleasant
7227;It's not much of a jump imo
7228;Yeah indeed i hardly used any compiled language
7229;It's not like compiling takes more than 0.1 sec usually
7230;Go is probably the least compiled compiled language there is
7231;If i just do go run would that compile the code and run it ?
7232;Yes
7233;I typically compare its syntax to JS
7234;yeah imo there's no jump solely because go is a compiled language? you just get added benefit of having your code checked for errors in comptime rather than runtime no difference otherwise
7235;It compiles and then is ran
7236;(well there are differences with it being compiled but those are abstracted)
7237;You just can't ship it
7238;> `go run` just builds/compiles your code and throws it into `/tmp/` or your OS equivalent btw
7239;@TeeSean
7240;It's just for testing
7241;Don't do go run in prod
7242;Your prod shouldn't have your code in the first place
7243;> Go is probably the least compiled compiled language there is@TimeLoad what
7244;:blobwaitwhat:
7245;Yeah what
7246;I didn't even see that message
7247;I meant the syntax feels more like a cross of JS/Python than C++
7248;Its almost identical to C syntax
7249;So unless youre gonna say C is barely a compiled language
7250;okay I just realised math.sqrt is square root
7251;Lol
7252;god damn it is there a function for square
7253;or I have to create my own
7254;math.Pow
7255;Or just
7256;xx
7257;I was really confused why my numbes were wrong haha
7258;I wouldn't say it's almost identical to C. A few key things like being able to do `num := 2` and it automatically does the typing for you and I love `for i val := range arr`
7259;that's called inferencing and c does it too lol
7260;Hence almost
7261;:kkk_hmm:
7262;"Major diff are ; and while loops"
7263;That being said
7264;For me at least
7265;Syntax has nothing to do with how compiled it is or not
7266;"C is less compiled than Go because Go adds more during compilation time because it also does inferencing. ;)"
7267;also for the newbies here you're going to love how Go handles private vs. public functions. Confused the hell out of me the first time I read about it
7268;again I didn't mean what go is like under the hood I was referring to syntax. To me Go's syntax more closely resembles a scripting language rather than C/C++
7269;go has a very simple and elegant package system that came from a very broken system a few years ago lol
7270;but it's better now üòÅ
7271;yeah I've been using Go for a few years definitely seen the improvements
7272;I also don't know if I'm remembering correctly but I remember a time where Go executables were really slow because of the builtin runtime
7273;I feel like my Go programs are a lot quicker and more responsive now
7274;2 years ago I was trying to choose between go and node.js. I didn't like go's package manager and started working on npm. Now I am back on Go because of the new module system.
7275;I absolutely love these blog posts https://blog.golang.org/usinggomodules
7276;go packages were really truly all over the place until go mods
7277;I would say managing packages for your own code is handled way better than node now.
7278;I am still confused sometimes what to choose: Node or Go ? lol then i thought why not try to understand go first. üòÑ
7279;@TeeSean node is good for exploration because the base syntax is same for frontend backend and mobile apps. Go is better for raw performance.
7280;Imo if you're willing to learn it I like everything about Go more than JS.
7281;(Node and Deno inclusive)
7282;how is Go for production backend websites? Never heard of someone using Go as the web server for proper production business websites
7283;Pretty widespread use
7284;Lotta big big companies use Go for production backend services
7285;I switched to go from node for server side and starting searching for modules that can help me full fill requirements only to find that most of my requirements can be fulfilled using the standard library.
7286;Most if not all of the FANG
7287;Caddy is built in Go btw.
7288;Discord used it for a while
7289;Discord uses it
7290;Docker Kubernetes consul and almost all Hashicorp tools are written in go
7291;Didn't they fully switch to rust ?
7292;lol they make one blog post and everyone is like ahhh go sucks even though they were using an outdated version of go
7293;For one thing @Karitham
7294;No they switched to Rust for their read presences
7295;which is an LRU cache
7296;Oh lol rust shillers got me
7297;rust gang rust gang
7298;for microservices yeah I can understand using Go. I\'ve just never seen a job posting that included Go and Backend web developer in one job
7299;Google
7300;You aint been looking then
7301;(and FAANG)
7302;Yeah they ran into GC issues in their cache service. But didn't make a stellar attempt to fix it. Old version of go and not a tremendous amount of debugging
7303;They used 1.9 when 1.10 was out :/
7304;most backend web developer jobs I see are looking for React/Angular/Vue
7305;And 1.10 fixed the GC.
7306;> most backend web developer jobs I see are looking for React/Angular/VueTheyre not back end
7307;not that much was broken but optimizations were made iirc
7308;:robpike:
7309;@TimeLoad lol
7310;You sure youre not looking at frontend
7311;Lol those are front end libraries and frameworks
7312;That isn't backend though. Most jobs for backend are Java or PHP here with go gaining traction
7313;@Str≈ìm I was looking for backend jobs. They require go plus front end frameworks as well. Mostly HRs post these jobs and they have no idea about the difference between front end and back end
7314;PHP ü§¢
7315;I hate PHP too
7316;we had to learn it in school
7317;ghost that's full stack
7318;@ghost0x07 thats why you bs your way through it
7319;it was our school's introduction to programming
7320;I know. That's why its fun :p
7321;Or look for purely back end
7322;most of the quant funds in the world unfortunately use java for their backend which is unfortunate
7323;I love sveltjs for front end. But apparently there are no jobs for it.
7324;We do arduino for embeded system in school and it's cool
7325;I want to do go tho
7326;go can't do embedded
7327;Needs syscalls
7328;TinyGo
7329;true
7330;SysCall me before you go go go
7331;It's been a few years
7332;Not going in depth into the PHP bad discussion but php 7.x is pretty good. As long as you're not touching WordPress or something xD
7333;syscalls is like 50% of my go code
7334;if not more
7335;fun times reimplementing Windows API wrappers
7336;Laravel felt good to use too especially with their Homestead distro.
7337;Go can do syscalls just fine though. Windows api is just hard to work with without the libraries you have in c++
7338;what is the best way of having path variables in the net/http package without gorilla/mux. So if I had some JSON with id: 1 and id: 2 but I only wanted to get id:1
7339;"so in gorilla/mux you can do this `http.HandleFunc(""/json/{id} func)`"
7340;Get the url string> extract the variable position> store it
7341;split>extract
7342;@aditya they were also using a garbage collected language for a service that knew exactly when it had to save and delete items and had to do it quickly
7343;altho from my googling there are ways to keep things out of the GC's reach
7344;e.g a map[int]int wouldn't be checked by the GC so you can shove that with a lot of entries and not be affected when the next garbage truck arrives
7345;"Heyyy what\'s the proper way to return array of cars from database?```gofunc (provider PsqlCarsProvider) GetCars() ([]domain_models.Car error) { var Car domain_models.Car Cars := make([]domain_models.Car 0 2) // var Brand domain_models.Brand if result := provider.DB.Find(&Car); result.Error != nil { err := errors.New(""Weird error"") return nil err } fmt.Println(""Cars provider &Car) Cars[0] = Car fmt.Println(Cars) return &Cars nil}```"
7346;I tried different things but idk how to return this array of structs
7347;Don't return a pointer to a slice
7348;ok
7349;"I would wrap the error using fmt.Errorf(""unable to fetch car: %w err)"
7350;> @aditya they were also using a garbage collected language for a service that knew exactly when it had to save and delete items and had to do it quicklyLong story short Discord didn't actually debug their Go code and just blamed the language.
7351;That way you can see that actually went wrong instead of a generic error
7352;I just found out about Errorf
7353;thanks pot head
7354;LRU Caches suffer pretty bad if you're having the language's GC handle any of the data and you can properly build a cache like that w/o running into Discord's problems.
7355;@Sgt_Tailor sure but this error is just there right now sitting for nothing I'm trying to return array and I can only return one item
7356;instead of all from database
7357;so I'm curious is creating seperate array for this and using for to throw items into this array is a good idea
7358;or maybe there is more simple way
7359;That is probably the only way depending on the type DB is and what it returns
7360;hm
7361;ok
7362;I will try
7363;What DB lib are you using
7364;gorm with postgres
7365;Find accepts a slice pointer I think
7366;So that should populate it with cars
7367;```govar cars []Carerr := DB.Find(&cars).Error```
7368;that should populate cars with all relevant rows
7369;```Car is not a type```
7370;well üôÇ i dont know what your types are
7371;you already have this
7372;```goCars := make([]domain_models.Car 0 2)```
7373;just use this
7374;"```func (provider PsqlCarsProvider) GetCars() ([]domain_models.Car error) { var Cars []domain_models.Car // var Brand domain_models.Brand if result := provider.DB.Find(&Cars); result.Error != nil { err := errors.New(""Weird error"") return nil err } fmt.Println(""Cars provider &Cars) return Cars nil}```"
7375;Oh no
7376;Underscore
7377;ok I changed it like that maybe it will work this way
7378;oh yeah youre using an underscore as a variable name lol ü§£
7379;@Str≈ìm ya I have 10000 warnings about underscore
7380;this is not mine code
7381;its from old project with my friend
7382;and he did it
7383;Not even as a variable but a package name
7384;I'm trying to understand that and build something with this
7385;is it bad? lol
7386;Meh it's very unconventional
7387;anyways the code you pasted should be fine
7388;Most linters will complain. It will compile though
7389;ok
7390;"em one more question I have cars view ```gotype Car struct { Model string `json:""model""` // ex. Model 3 Zoe Seats string `json:""seats""` // ex. 46 5 ProductionYears string `gorm:""size:255;not null""` // ex. 2002 20062011 CategoryId uint // ex. Sedan Hatchback BrandId uint AdminId uint}type CarsView struct { Cars []Car}```and I\'m trying to put cars into CarsView{}```gofunc (g GetCarsHandler) Handle(query application_cars_query.Query) (error application_cars_view.View) { // carQuery := query.(application_cars_query.GetCarQuery) cars err := g.CarsProvider.GetCars() fmt.Println(cars) if err != nil { return errors.New(""Weird error"") nil } fmt.Println(""Car  cars) //if car.ID == 0 { // return errors.New(""Car not found"") nil //} return nil application_cars_view.CarsView{}}```"
7391;but just using ``eturn nil application_cars_view.CarsView{cars}`` throws error that ```cannot use cars (type []domain_models.Car) as type []application_cars_view.Car in field value```
7392;oh wait
7393;or not I have no clue how to fix this
7394;should it be Cars []Car in CarsView or what
7395;No. They are completely different types
7396;View.car and model.car
7397;hm so if i want to return this view car I have to use it instead of model.car right?
7398;"```gopackage application_cars_viewimport ( encoding/json"" domain_models github.com/seekev/backend/domain/models"")type CarsView struct { Cars []domain_models.Car}func (carsView CarsView) ToJson() string { serialized _ := json.Marshal(CarsView{}) return (string(serialized))}```"
7399;A type conversion might work if the types are compatible. But I would advise against multiple car types like this
7400;Could abstract it an interface I guess
7401;one thing that I dont understand is
7402;`type CarsView []domain_models.Car` might be better here btw?
7403;my friend did something like views so he can return only things that he wants user to see in this endpoint
7404;MVC doesn't work great in Go if you have duplicate types
7405;I've got ioc
7406;```cannot use cars (type []domain_models.Car) as type domain_models.Car in array or slice literal```that's what I get by using type `CarsView []domain_models.Car`
7407;show code
7408;"```gopackage application_cars_viewimport ( encoding/json"" domain_models github.com/seekev/backend/domain/models"")type CarsView []domain_models.Carfunc (carsView CarsView) ToJson() string { serialized _ := json.Marshal(CarsView{}) return (string(serialized))}```"
7409;"```go}func (g GetCarsHandler) Handle(query application_cars_query.Query) (error application_cars_view.View) { // carQuery := query.(application_cars_query.GetCarQuery) cars err := g.CarsProvider.GetCars() fmt.Println(cars) if err != nil { return errors.New(""Weird error"") nil } fmt.Println(""Car  cars) //if car.ID == 0 { // return errors.New(""Car not found"") nil //} return nil application_cars_view.CarsView{cars}}```"
7410;Oh I see.
7411;You wouldn't instantiate it like that
7412;yeah you can just return `cars`
7413;``application_cars_view.CarsView`` is of type `[]domain_models.Car`
7414;and `cars` is of type `[]domain_models.Car`
7415;If you're still passing around a pointer to the slice (which I don't think you should do) then you would need to dereference it but yeah.
7416;hm
7417;I removed pointers
7418;and i just can't return `cars` ```cannot use cars (type []domain_models.Car) as type application_cars_view.View in return argument: []domain_models.Car does not implement application_cars_view.View (missing ToJson method)```
7419;I keep losing willingness to use the way that he did all of this
7420;Whoever wrote this code doesn't know what they're doing but w/e.
7421;I'm completly new to go and I'm kind of struggling to understand all of this
7422;Yeah I understand your frustration don't worry.
7423;I think it was suppose to kind of use ios and some kind of inversion
7424;to make testing easier?
7425;Also side note your function header is annoying me :D```gofunc (g GetCarsHandler) Handle(query application_cars_query.Query) (error application_cars_view.View) {}```You should return the actual value of your function before your error so:```gofunc (g GetCarsHandler) Handle(query application_cars_query.Query) (application_cars_view.View error) {}```
7426;Just conventionally speaking.
7427;Anyways that's not a huge issue.
7428;I was always doing error as second
7429;but I copied this handle from his
7430;and he doesn't know how to write Go code üòÑ
7431;In regards to your errors you can revert your code back to using a struct I forgot you are making methods on it and I'm not sure how those are working w/o using interfaces.
7432;"```gopackage application_cars_viewimport ( encoding/json"" domain_models github.com/seekev/backend/domain/models"")type CarsView struct { Cars []domain_models.Car}func (carsView CarsView) ToJson() string { serialized _ := json.Marshal(CarsView{}) return (string(serialized))}```"
7433;And then in your `Handle()` function
7434;```goreturn nil application_cars_view.CarsView{Cars: cars}```
7435;ohh now it's working
7436;With those changes?
7437;yop
7438;Also to note:
7439;‚ù§Ô∏è thanks
7440;```gofunc (carsView CarsView) ToJson() string { serialized _ := json.Marshal(CarsView{}) return (string(serialized))}``` Be careful with this code.
7441;If you are ever planning to use one of those methods to modify the receiver (which is an object of type CarsView in this case) using a value receiver won't let you do that.
7442;hm
7443;is there any good resources about building apis with golang?
7444;Value receivers are safer for concurrency but also just less optimized because you're copying the struct each time for something like `ToJson()` it doesn't matter so it's concurrencysafe so might as well not copy the object üòÑ
7445;I tried to build it the way he did this because I thought this is the right way
7446;(read this is if you're curious: <https://flaviocopes.com/golangmethodsreceivers/>)
7447;this is a HTTP API yea?
7448;as I understood he have kind of big experience with go
7449;yes
7450;> as I understood he have kind of big experience with goI highly doubt that no offense to him üôÇ
7451;heh
7452;mostly I was working on frontend and few months ago I build an api with nodejs bla bla but very simple mvc
7453;This is a lot of over complication to be honest all you're doing is getting some rows from a psql database and returning it not sure why it takes so many different methods/structs/packages to do so this all is a huge mess.
7454;and as this is a project that I want to scale I tried doing his way as he said that will be much easier to maintain in future
7455;So the person you're getting this code from might be:(1) Stupid(2) Has some different purpose for having this extreme overcomplication
7456;ya I'm lost in all of this
7457;this is all those cqrs etc
7458;CQRS isn't this complicated lol üòÑ
7459;There's a lot of unneccesary steps you're taking.
7460;Do you have some examples with go?
7461;You shouldn't be worried about scaling until you know what you're doing on a lower level first.
7462;For CQRS? Or just APIs in general?
7463;Api and cqrs
7464;Not sure why I even asked I have neither lol  you can Google and look around from my understanding CQRS might be a bit over the top for you for now.
7465;First understand how to work with a simple HTTP router and then go from there
7466;I tried but I was not able to find anything useful enough
7467;You can do a lot with that and you can still scale.
7468;Hm
7469;So just simple function for every route?
7470;Instead of queries views etc?
7471;Yeah and you can have those functions as complex as you want them to be.
7472;Since you're new to go as you said you can save yourself the confusion and start with just a simple router that leads to a function
7473;that pulls some data from a database and returns it to the user in some nice format
7474;Hm
7475;and then you can go and implement middleware caching etc etc etc.
7476;more complicated things
7477;it's pretty easy to use and that's a lot more straightforward
7478;Ok
7479;Thanks a lot I think I will do this as you said.
7480;For the sake of your sanity üòÑ
7481;If you ever need help with your complex codebase we're here to help for sure but I think simplifying this to what you need would be smarter.
7482;I used his way becaus of my plan that someone else might be working with it also haha but I\'m going too far without code first
7483;üëç
7484;:gopher:
7485;If you're going to have someone collaborate w/ you I would be surprised if an intermediate Go dev can't figure out a simple router API :p
7486;Heh your right
7487;Anyways I'm gonna go make a latte üòÑ
7488;üòÑ
7489;Feel free to ping me if you ever need guidance/help with this
7490;Sure
7491;why does using go mod with `go get` by defualt put dependencies as indirect?
7492;It doesn't
7493;Indirect is caused by you not using the dependency
7494;Import it and run go mod tiny
7495;üëç
7496;how can i avoid
7497;downloading absurd res images
7498;with net/http?
7499;depends on why you're doing it in the first place
7500;and how you're doing it
7501;"```go response err := http.Get(url) if err != nil { fmt.Println(""Went wrong!"") } defer response.Body.Close() img err := png.Decode(response.Body)```"
7502;most well behaved services will offer some preset selection of resolutions
7503;yeah but
7504;in this case
7505;the user can put the
7506;image url
7507;so i have to verify for the size i think
7508;best you can do is send a HEAD request
7509;which should indicate the size of the return payload
7510;hey what would you recommend as an audio library for a golang DAW project? It can be C library which there are many of but still I'm just starting out...
7511;I'm looking right now at https://github.com/andrewrk/libsoundio did someone has been working with it? Or better can you give me a good advice on porting it to `Go`?
7512;> which should indicate the size of the return payloadinb4 poorly built image servers not returning a proper content type
7513;yeah
7514;well behaved software is a rare treat
7515;if I want to rebuild a project from a go.mod file and source code what is the command
7516;eg git clone repo
7517;cd into project directory
7518;then what?
7519;go build stuff
7520;i don't think you can bootstrap it from the go.mod
7521;as in ```bashgo build```
7522;i think you need the repo
7523;or at least the go source code
7524;right  but surely there's automation that will pull in all my dependencies from their sources in the go.mod?
7525;to be fair `go get` does all that
7526;yes
7527;the tooling already does that
7528;go build will pull deps
7529;That's what I was looking for thanks
7530;is it ever okay to use the blank identifier in production code?
7531;like in a for loop
7532;sure
7533;if you don't need the thing ignore it
7534;you have to
7535;if you don't use it
7536;`_` is not an artifact or exception it's a perfectly legitimate language feature
7537;deezy okay thanks üôÇ
7538;It's using it on error values that is usually frowned upon
7539;yeah don't ignore errors
7540;What I don't know can't hurt me
7541;but ignoring things is fine in general
7542;your code can't break if you just ignore errors
7543;your code can't break if there's no code
7544;Ignore error
7545;PANIC
7546;2 lines later
7547;Because you are calling a method on nil
7548;seems like
7549;100% code coverage
7550;panicking is defined behavior :^)
7551;just let it crash
7552;smh just recover
7553;Hi
7554;Have some question about go func()
7555;I was following the go your exercises
7556;And came across web crawled
7557;Crawler
7558;Strange that go func() and go func(url string does not work the same in that task gonna share the code
7559;https://www.github.com/skoba15/goforGo/tree/master/webCrawler.go
7560;Here on line 49
7561;https://github.com/golang/go/wiki/CommonMistakes#usinggoroutinesonloopiteratorvariables
7562;If I write go func() instead of go func(u string) it does not work I don\'t t understand why?
7563;read here
7564;because `}(u)` at the end
7565;which passes u as an argument to the newly created function
7566;do you know how do I talk with Core Audio https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/CoreAudioOverview/WhatisCoreAudio/WhatisCoreAudio.html#//apple_ref/doc/uid/TP40003577CH3SW1 or with the others audio drivers in other OS from Go of course
7567;Thanks a lot
7568;Seems like I need more understanding of closure functions
7569;What is the best way to go on my studies on go?
7570;I finished the tour
7571;read every page you can find on golang.org : )
7572;But I feel like I need much more understanding of things
7573;Maybe some book
7574;Introductory one
7575;use portaudio which abstracts over coreaudio and other platforms
7576;or just directly call coreaudio stuff if you want to not support other platforms
7577;> What is the best way to go on my studies on go?honestly just
7578;do projects
7579;lol
7580;you learn when you use it
7581;> you learn when you use it@_diamondburned_ can you suggest some good projects or examples on GitHub I can learn useful things
7582;make something youre interested in
7583;find something for you instead of getting us to tell you what to make
7584;I planned to implement some network protocols
7585;hi. I want to install https://github.com/sensepost/gowitness this. but when I try go get u https://github.com/sensepost/gowitness it just take my control from bash and I think It does nothing because I waited like 10 minutes and nothing happend.
7586;if anyone could help me or know how to fix this tell me please.
7587;did you try with v
7588;no
7589;v = verbose?
7590;yes
7591;yea make what you want
7592;go nuts
7593;@Str≈ìm thanks dude. IDK why but seems verbosity fixed that. LoL
7594;maybe your network is just that slow lol
7595;no It just finished with verbosity in like 5 sec.
7596;I don't think the problem was internet speed.
7597;but anyway it's fixed. thanks.
7598;@_diamondburned_ how do I call anything from Core Audio directly from Go?
7599;I seem to don't understand the concept...
7600;btw portaudio is not maintained
7601;Does an interface have to satisfy all prerequisites of any are determined? Example: ```golangtype Logger interface {Console log.LoggerError log.Logger}type MyLogger struct {Console log.LoggerInfo log.LoggerError log.LoggerName string}```Could I satisfy the requirements of the logger interface with the MyLogger structure?
7602;an interface defines behavior
7603;yes that satisfies the Logger interface
7604;so make sure your type implements all the methods
7605;Interface defines methods
7606;but once it becomes a Logger (such as passing it into a func that takes a Logger) it will of course only have access to the methods defined by Logger
7607;Not fields
7608;oh my god I misread that
7609;So I cannot require it to posses certain components like I have above?
7610;No
7611;Hmm. Is there any way to do something like that in Golang?
7612;they need to be methods like building a sentry said. IDK how I saw them as methods lol
7613;Struct embedding
7614;Dont mistake it for inheritance
7615;Going for a Google session on struct embedding will return in a bit
7616;Thats what i love to hear
7617;So from what I understand so far you cannot have duplicate fields in embedded structs which makes sense. So for this to work I'd need to do some more struct embedding to other structs to accomplish this?```golangtype Console struct { log.Logger}type LogError struct { log.Logger}type Logger struct { Console LogError}```And then for all intents and purposes I have accomplished the same goal as I had in mind for the interfaces it seems?
7618;Actually disregard... that's a bad idea
7619;That will still be duplicate
7620;Yeah I noticed. When I ran it through I realized that all the methods would still be the same so there'd be no way to differentiate the error logger vs the info logger
7621;I was trying to do this in a way that I could easily reuse it in another project by just harnessing one variable (and to avoid repeating imports) but I think the best way would be to just come from another approach for some of the code I put in earlier
7622;I'm trying to split up an app into sub modules that I import is there a way to use data structs without re declaring them every time
7623;```golangtype User struct { UserID int Email string  Age int  Name string  Username string Password string //hash Reputation int AuthKey string Attributes userAttributes}```
7624;```gotype userAttributes struct { LocalArea string FollowingAreas []string}```
7625;^ without re declaring these in every file
7626;Import them instead
7627;:kkk_fellas:
7628;Hello all
7629;didn't know you could do that thanks lol
7630;hi @Kaz
7631;I I was hoping for a little help with someone I was working on.
7632;I am not sure if I am in the right channel
7633;Ask away
7634;Cant receive help if one doesnt ask
7635;I was hoping to get a little help with goColly
7636;I am trying to learn the gocolly
7637;and I am trying to scrape the name of of posts on a site
7638;https://www.capitalautoauction.com/inventory
7639;is the website I am trying to scrape
7640;what are you trying to grab
7641;None of the example really worked for me
7642;I am just trying to grag the names
7643;If I have an example then I can take that and apply it to the others examples
7644;You could use goquery simple and easy
7645;"doc.Find("".card__title"")"
7646;"```go c := colly.NewCollector() var href []string c.OnHTML(""a[href] func(e colly.HTMLElement) { link := e.Attr(""href"") // append link title href = append(href e.Text) }) c.Visit(""https://www.capitalautoauction.com/inventory"")``` would this work ?"
7647;Should probably match the card title elements
7648;yeah
7649;that will get all href
7650;your suggestion was way better üòÇ
7651;audio // video is nothing in go
7652;I have actually never heard of go query
7653;it's like jQuery but in Go
7654;Same thing as colly but slightly different it seems
7655;https://github.com/PuerkitoBio/goquery
7656;Goquery so good
7657;I\'m guessing you could change the OnHTML to div.card__title
7658;and then get the text still
7659;and it'd probably work
7660;goquery is great ye
7661;I am going to try that method.
7662;it looks like gofmt will append an empty line at the end of of file if not present any particular reason?
7663;https://stackoverflow.com/questions/2287967/whyisitrecommendedtohaveemptylineintheendofasourcefile
7664;you just answered your own question lol
7665;accepted answer is legacy?
7666;hysterical raisins is the answer to many many questions
7667;but go control all the running tools no? so that's a little weird to me
7668;line feeds carriage returns have a strong legacy
7669;we still can't escape printers üôÉ
7670;well here's the thing
7671;let's say you're writing something that wants to read lines from a file
7672;so you read one line after the other
7673;how do you separate them?
7674;how do you say i have read a full line of data
7675;EOF?
7676;no
7677;line
7678;what separates lines from each other
7679;carriage return \ etc
7680;right
7681;so there\'s markers that indicate the beginnings/ends of the data you care about
7682;now let's go back to our thought experiment
7683;you\'re reading these lines and using each subsequent newline character to section of that piece of data into its own line
7684;"now you\'ve reached a line and the data you get is `""func main()""` and then stops"
7685;what does that mean
7686;you don't know because you haven't encountered your delimiter
7687;so a poorly behaved consumer might just shit the bed
7688;it is pretty much legacy
7689;just like how 80 col limit is a good idea
7690;it's a choice whether you ignore the line when you hit EOF I get that legacy tools have it just that go can control it since it control go run/build etc.
7691;the style didn't originate from Go
7692;yeah it\'s literally just there\'s a chance some business critical 40 year old infrastructure might choke on it thing
7693;just like how most of Go's APIs aren't made up
7694;it's made and improved from old APIs
7695;yeah this isn't a go thing
7696;this is programming with files
7697;for the past 60 years
7698;technical debt is a bitch
7699;I still cat files
7700;So files ending in \ helps me
7701;if you want to rewrite all the gnuutils glibc every piece of legacy code
7702;just so you can have a file not end with a blank line
7703;have at it
7704;I don't think the discussion is about a black line
7705;The fundamental question is whether lines are \ separated or \ terminated
7706;oh it's definitely about the traditional trailing newline
7707;and why the convention happened
7708;oh i see
7709;you're not WRONG
7710;And I think \ terminated is better even today
7711;Again see cat
7712;but we could bikeshed about why these broken things are broken all day long
7713;yeah i like it
7714;Not that it matters much
7715;exactly
7716;It is what it is
7717;yeah it escalates into bikeshedding pretty quick lol
7718;not trying to discourage curiosity
7719;it's a funny artifact of compsci history
7720;it also matters so very very little
7721;what's the difference between \ separated and \ terminated
7722;"TL;DR: we have a trailing newline because `ed` can't generate files without it üôÇ"
7723;fuckin ed
7724;> what's the difference between \ separated and \ terminated@func How many lines are in `text\more text\`?
7725;Two or three?
7726;I see
7727;My brain goes with 3 but mainly because the character is called new line not line end
7728;So \ prefixed
7729;Not terminated or separated
7730;well no
7731;because files don't start with \
7732;unless we want to start a new convention
7733;Because how would you have text not on a line
7734;3
7735;def 3
7736;ye again ed disagrees
7737;lol ed
7738;so we're stuck with that
7739;I know one person who knows Ed and he's as weird of a guy as you could possibly imagine an Ed user
7740;"`a,b,` three csv fields. `a;b;` two expressions. arbitrary tbh"
7741;Pascal had semicolon separating expressions iirc
7742;that's different though
7743;Well you have different standards written by different people at different times through out history
7744;imagine the industry being hold back by a tool invented ~50 years old
7745;how is it held back
7746;line count != expr count != column count
7747;:kek:
7748;joke
7749;they're all different things used in different scenarios
7750;It's not surprising there are inconsistencies
7751;it's surprising anything goddamn works at all
7752;frankly
7753;> I know one person who knows Ed and he's as weird of a guy as you could possibly imagine an Ed user@_diamondburned_ I know ed
7754;So I'm not really sure what point you're trying to make
7755;used it for a while
7756;very therapeutic
7757;guy I'm talking about only uses ed
7758;for everything
7759;i used to for a bit yeah
7760;> very therapeuticuhhh maybe for a fucking Cenobite
7761;not very productive
7762;he still uses it now
7763;sure i get him in a way
7764;not a bad editor
7765;Languages cant even agree on what index an array starts at lol
7766;tbh I used to see ppl who use emacs for everything the similar way
7767;maybe still do dunno ü§î
7768;that's even more so
7769;I doubt you can send mail from ed
7770;not with that attitude
7771;well tehnically you can. via `!`
7772;Maybe switching to ed as your shell can become a thing
7773;pervert
7774;why can't you lol
7775;make something that sends emails through fifos
7776;that's what i was thinking
7777;there's gotta be a way to set up a file such that writing to it just punts it straight into a tcp pipe
7778;yeah
7779;I made a Discord client that's file based before after all
7780;@deezy you just invented sockets
7781;üòÖ
7782;sometimes it's fun to derive things from first principles
7783;"```func main() { router := mux.NewRouter() router.HandleFunc(""/home homeHandler).Methods(""Get"") http.ListenAndServe("":5000 router)}func homeHandler(w http.ResponseWriter r http.Request) { type person struct { firstName string lastName string } w.Header().Set(""ContentType application/json"") testResponse := person{firstName: John lastName: Smith""} json.NewEncoder(w).Encode(testResponse)}```apologies for the rookie question but can someone tell me why this snippet is returning `{}` when i hit the `/home` endpoint?"
7784;Struct fields are unexported
7785;thanks capitalizing the struct fields made it work. I guess i was expecting some kind of error instead of `{}`
7786;Well there shouldn't be an error? It's valid to have the struct fields being unexported
7787;as it serves a purpose for other applications but in this case you want them to be exported.
7788;Since there were no exported fields `{}` is the expected result
7789;Oh for sure I just don't understand enough about Go to have made a correct assumption about what was being returned. What you guys said definitely makes sense in hindsight
7790;Great! üòÑ
7791;"```gofunc handleRequests() { r := chi.NewRouter() r.Get(""/ baseURL) r.Route(""/post func(r chi.Router) { r.Get(""/{PostID} requestPost) }) r.Route(""/account func(r chi.Router) { r.Post(""/signup auth.Signup(db)) // < here r.Post(""/login login) r.Post(""/testJWT ValidateJWT) }) log.Fatal(http.ListenAndServe("":80 r))}```I want to pass in db to auth.Signup I thought i need to use something like```gofunc makeHandler(db sql.DB) func(h http.HandleFunc) {```but I\'m not so sure how to exactly make this work"
7792;Use a database global object
7793;yeah but auth.Signup is imported
7794;Oh fair.
7795;Use an anonymous function that makes a call to `auth.Signup`
7796;"```gorouter.Post(""/login func (w http.ResponseWriter r http.Request) { auth.Signup(w r db)})```"
7797;not sure what the function header should be
7798;because I'm not familiar with Chi
7799;vscode go plugin doesn't support .tmpl syntax highlighting what plugin do you use for tmpl?
7800;Have you tried googling it?
7801;https://marketplace.visualstudio.com/items?itemName=casualjim.gotemplate
7802;there are many
7803;just curious about opinions here
7804;The one I linked is linked in multiple vscodego issues
7805;https://github.com/microsoft/vscodego/issues/228
7806;> Use an anonymous function that makes a call to `auth.Signup`Thanks don't know why I didn't think of that
7807;Glad I could help!
7808;file extensions don't matter btw
7809;I just use .html for my templates
7810;None
7811;does it parse correctly with html? I thought this template thing is go specific?
7812;hmm most should work except {{...}}
7813;it is but for the sake of syntax highlighting you can just use .html
7814;Extensions are just a hint for something like this
7815;^
7816;extensions are just hints for everything lul
7817;applications that rely on file extensions for anything nontrivial are bad
7818;that means the file extensions don't affect anything regarding parsing
7819;hell you can name it .exe
7820;Also if u're using vscode you can just cha'ge syntax highlight in the bottom bar in like 1 click
7821;Idk about goland for :vim: it must not be too hard too
7822;yea vim is like `:set ft=html` iirc
7823;"you can configure file association in vscode with``` files.associations"": { .tmpl"": html"" },```"
7824;yea do that then
7825;"I\'m getting an error that says json: cannot unmarshal object into Go struct field CoinMarketData.data of type string"". So obviously it has something to do with how my structs are setup. I\'m not sure what is wrong with them or how to fix. https://hastebin.com/gadurupoci.cpp"
7826;can't unmarshal into unexported (lowercase) fields
7827;they're all exported though
7828;how do i return a pointer to a struct in a map?
7829;this is wrong
7830;"```go// CoinMarketData type CoinMarketData struct { //Status string `json:""status""` Data []string `json:""data""`}```"
7831;it's supposed to be `[]Data`
7832;not `[]string`
7833;> cannot unmarshal object into Go struct field CoinMarketData.data of type string
7834;@DangerosoDavo I don't think you can
7835;right
7836;"if `&m[""key""]` doesn\'t work then you prob can\'t"
7837;I remember this being an issue on GitHub
7838;accessing a map always returns a copy of the value stored iirc
7839;so unless you are already storing pointers you cant
7840;generally you can do `&slice[i]` but I think there's an exception to maps
7841;i honestly can't rmember
7842;map values are not addressable no
7843;maps need to be able to arbitrarily move their elements e.g. when resizing and being able to obtain arbitrary pointers to them makes that extraordinarily more complicated or more expensive
7844;as well as providing a window into runtime internals
7845;figured
7846;just do map[]T ig
7847;> there's gotta be a way to set up a file such that writing to it just punts it straight into a tcp pipe@deezy /dev/tcp/Google.com/80
7848;there's that plan9 flavor we've been missing
7849;i will never stop dunking on plan9 as a meme OS but also it has some really rock solid ideas
7850;That path exists btw
7851;oh no shit?
7852;In most shells anyways
7853;Not sure if it is in Linux itself but it is how I open sockets in AWK as well
7854;hmmm
7855;i'm not familiar with that
7856;It is a shell builtin. Bash and other shells have it
7857;The tcp module of AWK mimics it
7858;```exec 3<>/dev/tcp/www.google.com/80 echo e GET / HTTP/1.1\\r\host: http://www.google.com\\r\Connection: close\\r\\\r\ >&3 cat <&3```
7859;Try that @deezy
7860;christ
7861;Missing some newlines in that snippet
7862;nah i get you
7863;Before echo and cat you need one
7864;I'm advising you not to browse the web that way but it is a nice way to make an IRC bot
7865;Which is what my AWK thing was
7866;hmmm
7867;hmmm
7868;I am have been trying to work with gocolly
7869;I am just not understanding what I am doing wrong
7870;that's okay
7871;prgoramming is hard
7872;Hi I am facing some issue with incrementing struct values```func SysTotalIncr(id uint16) { evTcData := &eventTcData evTcData.mu.Lock() v := evTcData.count[id] v.total++ evTcData.mu.Unlock()}```Thanks
7873;you didnt actually say what your issue is
7874;Ohh.. Sorry.. ```type EventTcCount struct { failures uint64 total uint64}type EventTcData struct { count map[uint16] EventTcCount mu sync.RWMutex}```When I am incrementing the the value of `EventTcCount` its is not working as expected. Something I am doing wrong.Please have a look into the mapstruct.go.
7875;Yeah
7876;V is a copy of the data
7877;Not a pointer to it
7878;The data stored in the map and in v are not the same
7879;^
7880;you have to either set it again to the map or use a map to pointers
7881;Can you just do evTcData.count[id].total++ and have it work?
7882;I forget if that‚Äôs allowed
7883;Probably not
7884;Yes it is not allowed` cannot assign to struct field evTcData.count[id].total in map`
7885;That‚Äôs what I thought
7886;> you have to either set it again to the map or use a map to pointers@_diamondburned_ Yup I will try next `evTcData.count = make(map[uint16] EventTcCount)` to pointer `evTcData.count = make(map[uint16] EventTcCount)`
7887;Seems a bit excessive to make that a pointer
7888;But you do you
7889;yea
7890;it's just a pair of u64
7891;so like 16 bytes
7892;do you mean the pointer address will be 16 bytes ??
7893;I‚Äôm more worried about value scheme antics vs pointer schematics
7894;Just more prone to bugs if you don‚Äôt understand why you are doing it
7895;okay dude will keep in mind
7896;"also 16 bytes is a p nice size for caching; it's harder for the CPU to cache if you use pointers"
7897;also the value might be on the heap when it doesn't need to be
7898;also more jumping
7899;also a pointer itself is 8 bytes on 64bit systems
7900;that's like a 1/3rd size overhead for each item
7901;this is incredibly nitpicky so whatever
7902;but yea you don't need a pointer
7903;@_diamondburned_ I agree but without pointer I could not able to increment the values of count.
7904;You just reassign the changed value to the map
7905;^
7906;> You just reassign the changed value to the map@Madxmike Okay ...
7907;From what I can tell by this design you will only ever change this value for 2 reasons
7908;Incrementing failures
7909;Or incrementing total
7910;That‚Äôs such a very small surface area that just plopping two map reassignments wi be fine
7911;It will be a lot clearer also
7912;Usually when I see someone storing a pointer in a structure like a map or slice it makes me question why they are doing that
7913;Because 8/10 times there is a good reason to be storing it as a pointer
7914;And you need to know that reason before you explode everything
7915;^^^^^^^^^^^^
7916;1/10 times they were just really overthinking it and the last 1/10 times they just put pointers into everything because it was easier lol
7917;TIL you can use iota this way interesting```goconst ( a = 1 << iota b c)fmt.Println(a b c) // 1 2 4```
7918;yea this is used pretty widely too
7919;useful for flags/bitmasks `a|b` `a|b|c` etc.
7920;yeah that's kinda the point of iota
7921;an incrementally increasing value that you can apply expressions to
7922;what is that
7923;tuple?
7924;tuple but strange way
7925;?
7926;HOW DO I MAKE GO SEGFAULT ON PURPOSE
7927;:KM_Dorime:
7928;prefferably without unsafe package
7929;IDK
7930;can you dereference a nil pointer?
7931;^
7932;```govar v int_ = v```
7933;why the hell would you want that though
7934;@_diamondburned_ are u using nix pal?
7935;yeah?
7936;ma men
7937;guys I'm having this issue where I got an array of integer strings I got to parse them to ints.
7938;"```fmt.Println(""Starting a new"") fmt.Println(""The length of the array is:  len(arr)) if len(arr) == 0 { return 0 } firstNumber _ := strconv.ParseInt(arr[0] 10 64) fmt.Println(""The array is:  arr) fmt.Println(""The first unparsed number is:  arr[0]) fmt.Println(""First parsed number is:  firstNumber) fmt.Println(""Square number is:  square(firstNumber)) if firstNumber > 0 { return square(firstNumber) + sumSquares(arr[1:]) } else { return 0 + sumSquares(arr[1:]) }```"
7939;the issue is that when the array is of size one
7940;firstNumber is always 0
7941;even though the arr[0] is a proper number
7942;```List out all the integers1 1 13 233This is the number of integers: 4Starting a newThe length of the array is: 4The array is: [1 1 13 233]The first unparsed number is: 1First parsed number is: 1Square number is: 1Starting a newThe length of the array is: 3The array is: [1 13 233]The first unparsed number is: 1First parsed number is: 1Square number is: 1Starting a newThe length of the array is: 2The array is: [13 233]The first unparsed number is: 13First parsed number is: 13Square number is: 169Starting a newThe length of the array is: 1The array is: [233]The first unparsed number is: 233First parsed number is: 0Square number is: 0Starting a newThe length of the array is: 0This is the sum of the squares: 170```
7943;this is the result of the output
7944;when the arr is [233]
7945;parsed number is 0???
7946;Consider checking the errors
7947;ParseInt returns an error for a reason
7948;is it me or the golang community is surprisingly hostile
7949;towards beginners/people questioning the language
7950;seems to be just you
7951;¬Ø\\_(„ÉÑ)_/¬Ø
7952;its a rhetorical question but yeah
7953;just browsing through reddit and this place is kinda iffy
7954;#offtopic can be wild at times. #golang is always trying to help. If at any point it feels hostile you can ping the Mod team
7955;@![Wys] Juzi never take reddit at face value lol
7956;Should always take the entire site with a heap of salt
7957;There are always language elitists to be fair for any language.
7958;I wouldn't say it's more or less prevelant within the Go community.
7959;And this server is a great community tbh everyone is very nice so I doubt you'll be treated poorly as a beginner in here.
7960;I personally think it's a pretty friendly community
7961;I think it's because there aren't many go developers and it's gaining popularity pretty fast
7962;it's a similar situation to js framework vue js
7963;how the community works I guess
7964;I got this problem where
7965;``` numbersInput _ := reader.ReadString('\')```
7966;this line reads \ at the end?
7967;and I keep getting this error while trying to parse int
7968;"```strconv.ParseInt: parsing 14\"": invalid syntax```"
7969;It will read including the newline
7970;how do I make it not read the newline?
7971;ReadString reads until the first occurrence of delim in the input returning a string containing the data up to and including the delimiter.
7972;You can use read line instead
7973;https://golang.org/pkg/bufio/#Reader.ReadLine
7974;alright Ima check it out
7975;Can anyone recommend a selfupdater package? The ones I found are almost all really old and don't look updated or active.
7976;>The ones I found are almost all really old and don't look updated or active.doesnt mean they dont work
7977;anyone who messed with google cloud functions in go + firebase here
7978;if so would you mind sharing maybe a few snippets of your code
7979;ik a guy who has
7980;sec
7981;https://github.com/PixelogicDev/gruveebackend
7982;he has a discord server too
7983;@mojo
7984;ah nice
7985;thank you fr3fou
7986;> is it me or the golang community is surprisingly hostile
7987;I think this is true of a lot of tech communities
7988;I think a lot of people who never learned social skills or how to be polite are attracted to technology
7989;Not that those are the only ppl into tech :P
7990;I don't think it is very bad here tho
7991;The few times I've posted to the go subreddit has been pretty positive
7992;Having been doing this for 20 years I can assure that aggression is NOT unilateral
7993;i\'ve seen just as many new people just looking for help being toxic as old heads being pedantic assholes
7994;So I just learned that there is no out of the box way to include static resources in go modules. Do library devs with this need just use gobindata before pushing to a repository so that users can go get the library?
7995;well here's the thing
7996;"if you're asking a user to run `go get` you're not asking them to do any more work than `git clone; go build/install`"
7997;theres uhhh
7998;so you aren't really saving anyone any effort
7999;Packr? I think
8000;you're just making your own code more complex
8001;But iirc 1.15 is coming with static asset bundling
8002;Owo
8003;yeah go get is just cloning a git repo
8004;right
8005;so like
8006;they still have to install go and git
8007;this isn't really changing the technical skill or amount of effort required to build your stuff
8008;Oh no I meant developers as users
8009;And you could always write a bash script
8010;If you really want to standardize the flow
8011;Let\'s say I\'m using a serialization module that needs some static resources to function at runtime does the repo from which my go get pulls the module have to contain the static resources as a go source code file?
8012;sure to build the binary you'd need all its imports/dependencies
8013;So in go 1.15 potentially there might be a standard way to include resources without having to include them as go files?
8014;there's something about embedded content coming up
8015;Theyre bundled into the binary
8016;i hate it
8017;Why lol
8018;a couple reasons. like i said a minute ago doing this is typically an attempted crutch to fix help i don\'t understand how to distribute software properly more than help i have a specific technical problem whose only correct solution is statically embedded assets
8019;also if an app is using files i want them on the filesystem
8020;as a sys admin and as someone who mods the fuck out of their system
8021;the lack of visibility/control over these files would bother me
8022;wait like meaning an image or something embeded into the binary??
8023;whatever you want
8024;it could be jpgs
8025;it could be html templates
8026;just arbitrary data
8027;idk what the benefit of that is over having discreet files
8028;these static assets also mean a COMPLETE rebuild is required if i DO end up changing the static assets
8029;which is super trivial in go
8030;but also not necessary in the first place
8031;if you just use the ding dang fs
8032;Any tips on where I could follow up on the proposals?
8033;anyways i'm not trashing anyone specifically here
8034;github issue tracker
8035;is where proposals live
8036;I'm just saying that I've yet to see a truly airtight argument for static assets
8037;Not once in my life
8038;Alright thanks I guess I'm too used to the java world where everything lives on its own distant island üòÖ
8039;oh no
8040;go is a real language
8041;@deezy embedding tzdata is neat though :D
8042;see that's a legit use case
8043;Running into errors because the image you run the application on doesn't provide any is frustrating
8044;that isn't something that anyone's ever going to want to change/customize
8045;those are pretty static as far as i'm aware
8046;Is there any reason that would be a static asset as opposed to data available inside a module?
8047;Hard coded in a .go file for example
8048;i don't know what those files actually contain
8049;but they're traditionally exposed in like
8050;`/etc/locale/timezones` by an OS/upstream managed package
8051;as files
8052;in the C tradition
8053;so you didn't have to embed/link them directly in your binaries
8054;O deezy bestow upon me your knowledge
8055;that's my secret comrade
8056;i have no knowledge
8057;i'm just very good at selling opinions
8058;If that static asset was going to be loaded and parsed at runtime I guess in just curious about why it wouldn't just be hard coded in a .go file into what ever access method is going to be used
8059;that's what i'm saying
8060;the go ecosystem continues the tradition
8061;any real os will offer a timezones package
8062;it's not baked in to Go because it wasn't baked into C
8063;If it's like image data etc I've always gone with separate asset repos for the exact reason you mentioned in terms of having appropriate devops to manage the resources across the deployment
8064;and the way C was used has had reverberations through every single thing you touch
8065;> i'm just very good at selling opinions@deezy schmood :KEKW:
8066;Because you don't need tzdata most of the time
8067;right
8068;Timezones do occasionally change so having the OS provide them and keeping them up to date is preferred
8069;So because of the way C is oses give you timezone files. because oses give you timezone files go doesn't embed them in the standard library
8070;it's a pretty simple chain of events
8071;Also means there is one location of tzdata for all applications
8072;It is 5mb or something
8073;and tzdata DOES get updated
8074;with some nonzero frequency
8075;it's much better to just have the one OS package that can be derived from some trusted source
8076;instead of making every programming language have to push a release
8077;Countries switching zones or crossing the 24h line
8078;Or abandoning daylight saving
8079;I guess part of what you might be missing is the sheer amount of work that has to go into publishing a change to a language's standard library
8080;The regression testing the new testing matrixes upon matrixes
8081;so like yes you CAN just embed these in a stdlib package
8082;but what if they change? and because of where your development workflow is you can't just PUSH OUT just this. you have to wait for the other things to be wrapped up and tested too
8083;now you have an entire language ecosystem that's got canonically incorrect tzdata
8084;until you can safely push an update
8085;you wanna keep your standard library as slim as possible in general
8086;Stdlib won't change for the tzdata btw
8087;OS will be preferred
8088;i guess you could do a fallback
8089;Baked data as fallback
8090;yeah
8091;You have to explicitly turn on the baking
8092;Either by env variables during compile time or an import with side effects
8093;I think turtle is already afk üëÄ
8094;just let us bikeshed
8095;the world is burning
8096;So about generics
8097;Did you know Java generics are turing complete
8098;the one thing i'm hype about generics for
8099;is map/filter/reduce
8100;Hot
8101;Proper abstract data types
8102;Less interface{}
8103;fr
8104;So much less interface {}
8105;so many interfaces are gonna get nicer
8106;And generic functional patterns
8107;Like map reduce etc
8108;it's pretty fuckin cool
8109;Go become rust
8110;When rebuilding an executable and the old is still running it creates an .exe~ file. Does that get automatically removed eventually?
8111;nope
8112;you're responsible for your own build artifacts
8113;go build will overwrite an existing file if you tell it to
8114;but you still have to tell it to
8115;Is it not a windows feature?
8116;not a clue
8117;windows does all sorts of specific weird shit
8118;i have a hard rule against targeting windows
8119;I guess I can just test out what happens when writing to the current executable lol
8120;Is generics likely to bring an increase in more optimised algorithms? I'm not a programmer by trade so it's still a little far from my wheelhouse but from what I understand it would be possible to write sorting algorithms for arbitrary types.
8121;not really no
8122;generics don't have anything to do with algorithms
8123;or optimization
8124;it just makes it easier to have flexible code while maintaining type safety
8125;As an example though you could write a sorting algorithm using generics that would be usable with custom types?
8126;yes but the sorting isn't any different
8127;it's still bubble sort or timsort
8128;or bogosort
8129;it's just that you can shove arbitrary types into it
8130;without losing type safety
8131;it\'s important to understand the difference between function and algorithm here
8132;a function is actual real code
8133;So as a novice programmer who is less likely to want to implement a complex sorting algorithm it's more likely i could find a particular algorithm written with generics that I could use?
8134;an algorithm is a concept
8135;a recipe
8136;the standard library uses industry standard options sure
8137;And I use sorting as an example here but it could be anything else
8138;when generics become available the standard library will use them
8139;i mean
8140;is it more likely that i\'ll find something written with generics after generics are released?
8141;yeah
8142;of course
8143;I'm just trying to understand how generics would impact my usage of the language I've never been heavily involved in a language that uses them and I've never been a professional programmer by any means
8144;you'll see less `interface{}`
8145;but odds are
8146;if you don't know how it'll make a difference
8147;it probably won't
8148;It‚Äôs just one of those things that‚Äôs kinda cool for 98% of things
8149;But for that 2% it makes everything a lot better
8150;Its something I will definitely look at getting to grips with as if it will make my life easier when kludging together quick projects then I'd like to make use of it
8151;it won't change anything unless you're writing data/container types
8152;or like generic map/filter/reduce functions
8153;if you're just consuming code you won't see them
8154;or you will but it'll be all transparent to you
8155;When running a binary on Linux it gets read into memory. When rebuilding the application the old one gets removed when it exits
8156;My projects are slowly getting more ambitious I just wish I could get time at work to put towards them
8157;Fun fact: if you accidentally remove the binary or a running application you can extract it from memory again
8158;Using lsof and some other commands
8159;neat
8160;linux is good
8161;@Sgt_Tailor I do forensics I haven't had ti do it myself but a few colleagues have done this on engagements
8162;what sort of forensics
8163;PFI at the moment
8164;But company does other security (nonpolice) related forensics
8165;We do quite a bit of CSIR work
8166;Pfi is forensics for PCI so card data breaches
8167;yeah i had to google it
8168;neato
8169;Yeah it's a lot of fun although a lot of admin overhead
8170;No more so than other branches of computer forensics but it's just not the fun side of the job
8171;i don't handle oversight well
8172;Hey guys I have a question about setting up Go on Ubuntu using VSCode
8173;When I try to set up the additional tools I get an error Cannot install Go tools. Set either go.path or go.toolsGopath in settings.
8174;and I've tried looking everywhere to fix it but I cannot find a solution
8175;well
8176;did you set those variables?
8177;No I didn't because I can't find where I am supposed to set them
8178;https://code.visualstudio.com/docs/getstarted/settings
8179;https://marketplace.visualstudio.com/items?itemName=golang.gohttps://code.visualstudio.com/docs/languages/go
8180;the documentation has installation instructions troubleshooting instructions
8181;lots of useful stuff
8182;I'm assuming the issue is that go.path is not set in my VSCode settings.json
8183;that's literally what the error says yes
8184;> Set either go.path or go.toolsGopath in settings.
8185;did you set GOPATH
8186;in the go env?
8187;you probably want to set it for your whole environment
8188;globally either via your bashrc or windows whatevers
8189;and then also set it in vscode
8190;Ok
8191;i bit the bullet and bought goland
8192;:vim: for life
8193;I still think it's too expensive for my uses I still mostly knock things together in vim and use vscode on bigger projects
8194;yeah i need it for a larger project was quite the improvement
8195;runtime debugging and evaluation
8196;Vscode does that as well. Goland is more of an out of the box experience
8197;vscode sometimes just bugs out on me
8198;its pretty unstable
8199;to me
8200;at least
8201;There's a command to reload gopls
8202;I don't know what I am not getting here but I can't figure it out
8203;I liked the debugging of sub routines with tags in goland
8204;@JacobsM1 does the cmd line work for u at least
8205;Yeah
8206;go run main.go or whatever
8207;Yeah the extra tools are helpful though
8208;i guess you'll have to check the vscode console
8209;¬Ø\\_(„ÉÑ)_/¬Ø
8210;Whats the problem
8211;When I try to set up the additional tools I get an error Cannot install Go tools. Set either go.path or go.toolsGopath in settings.
8212;on ubuntu using VSCode
8213;And you've edited the settings json and added your GOPATH?
8214;Ok so set those
8215;You on windows?
8216;No ubuntu
8217;No I was having trouble locating the settings.json
8218;It's under one of the menus edit preferences or file preferences
8219;Therrs an option for user settings
8220;On the file system I assume it's under $HOME but on mobile and babysitting so cant check
8221;Yeah I found out how to do it
8222;hello when declaring a variable/object/const whatever and the name of the thing contains a notion that is usually abbreviated with capital letters like API or RPC or UDP etc how do you name it? do you make the abreviation cammel case as well or leave it as is? like `MyAPIServer` vs `MyApiServer`
8223;I just had to switch from UI to json editting by default in VSCode
8224;API/ID over Api/Id
8225;is the convention
8226;good thanks
8227;go vet and gofmt will yell at you
8228;Are people willing to do critiques / code reviews on small projects? I have something in development at the moment it's not ready to be looked at yet but I'd appreciate feedback when it is
8229;Its 3 or 4 files but it'll be wrapped in a web api so want to see if its sensible before its wrapped up
8230;Finally figured it out thank you guys
8231;@misterturtle fire away
8232;now some of the tools are failing to install
8233;sounds like progress
8234;some of them suceeded though so definitely progress
8235;@misterturtle #showmewhatyougot üòÑ
8236;Oh cool I'll post it In that channel when its had a bit more work
8237;yeah readline does it
8238;no clue how
8239;https://golang.org/pkg/bufio/ might be relevant
8240;Will readline retrieve the input w/o user interaction though?
8241;it seems like you'd need to read the raw TTY there are a few examples on SO but it may start causing crossplatform issues
8242;well readline lets you do stuff like ctrlr
8243;which reads input without a carriage return
8244;or newline or whatever
8245;but yes
8246;you'd have to grab a lower level device than just os.Stdin
8247;hi
8248;im new how do i start learning?
8249;?go tour
8250;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
8251;?go learn
8252;Gopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Go by Example <https://gobyexample.com/>  SkippyA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  Skippy
8253;@Deleted User https://stackoverflow.com/a/57397469 that worked for me
8254;need to add fmt to the imports and q will quit
8255;Hi there commnity I was following this tutorial: https://dev.to/koddr/theeasiestwaytoembedstaticfilesintoabinaryfileinyourgolangappnoexternaldependencies43pc and trying to integrate my react app build and some static images into a golang binary. But when doing `go generate` the `blob.go` file was empty.. So I was wondering what is your favourite way of embeding and referencing static files into a golang binary?
8256;@deezy :^)
8257;don't look at me
8258;Packr was decent the last time I tried it
8259;I tried the successor and did not understand what to do. even by reading the documentation
8260;Lol it's funny this comes up again so quickly!
8261;The readme and godoc is really clear
8262;The toturial you linked is blatently wrong BTW
8263;> I highlight the following:> It's\xa0safe. Files which added to a binary are impossible (or extremely\xa0difficult) to extract back.
8264;It is literally one command to extract strings from a binary
8265;yeah that is so hilariously incorrect
8266;`strings <your binary>`
8267;Boom strings extracted
8268;@JohnnyTheSmith pkger
8269;If it works
8270;you pretty much run a single command with no arguments and it just works
8271;if it still works
8272;I'd love to know why the author thought the packed files would be impossible to extract
8273;well I am not contemplating if it is secure or not. As a penetration tester I definately know how wrong the author is about how secure it is ^^
8274;Ah I'm a pentester too :)
8275;But I find the way he is doing it very near to the go std libraries which is great
8276;üòÑ
8277;Well we should start an offsec sub discord then üòÑ
8278;Go seams to be great for tooling in situations like red teaming and such
8279;if so then I'd recommend hajime's tool
8280;I\'m in the infosec and programming but it ends up being how do I hack insta accoubts 90% of the time
8281;https://github.com/hajimehoshi/file2byteslice
8282;well this is at least higher level than kali subreddit
8283;Anything you embed in binaries will be extracted
8284;The tools are so simple to do so
8285;The last go red team tool I made went down a treat it was a ssh reverse dynamic socks5 proxy from a popped box to avoid IP restrictions accessing cloud services
8286;I use packr these days
8287;Was on an AWS box which ssh version didn't support reverse dynamic port forwarding
8288;okay I think I will look into pkger
8289;I tried using it and did not understand how
8290;Go made it so simple to plug the ssh package into a socks5 package and pipe the sockets together
8291;Well there are tools like chisel which are great for tunneling either. Chisel is also written in Go iirc
8292;It was so simple to knock together though that I didn't even need to look at any premade solution
8293;for pkger you have to use pkger.Open followed by a string
8294;It can't be a variable
8295;Literally took an hour and I'm a novice programmer
8296;If you want a variable to be used then the string to be set into the variable must be wrapped by pkger.Include
8297;but after all that everything should just be `pkger && go run .`
8298;can machine learning be done in go?
8299;sure but why?
8300;cuz
8301;lol
8302;you can do anything in go
8303;binding to c libraries is going to suck a lot
8304;so
8305;@_diamondburned_ so I ran pkger
8306;youd probably want to experiment and generate your model using something like Python which uses C anyways... and then import that model into Go if you want to use it there
8307;well,i mean is there any premade thingies for it
8308;yeah if you count rewriting the runtime as well in order to make an OS
8309;Hehe chisel looks to do be very similar to what I came up with
8310;then it will generate the pkger.go in my module root
8311;like i found this https://www.tensorflow.org/install/lang_go
8312;whatever you find googling golang <topic> is what we\'re gonna recommend
8313;cause that's all we're gonna do
8314;yeah TF has Go bindings but still why
8315;sure you can use tensor flow from go
8316;cuz it seems cool
8317;well how do I actually include static content then?
8318;you use the tools just use them right
8319;the pkged.go is like empty after running pkger
8320;they work
8321;what are some common uses for go?
8322;lots of things
8323;thats like asking
8324;what are some common uses for cars
8325;Go is really great for backend webservers that's a pretty big use case.
8326;@JohnnyTheSmith as I said pkger.Open or pkger.Include in your code
8327;@deezy cars drive you go around
8328;what are you gonna fly with it
8329;well then i'd say driving to get places quickly
8330;oh well okay there is no cli tool used but code inside my code
8331;sounds reasonable
8332;what are some common use cases for programming languages
8333;> well then i'd say driving to get places quickly@Theodore what about driving for pleasure?
8334;right but get to places is
8335;nothing
8336;well the first part
8337;i mean it's true but it doesn't add any valuable info
8338;What about collectors?
8339;ayyy
8340;yeah exactly
8341;sometimes people don't use cars for driving. they fix them up and resell or store them
8342;anyways
8343;tru
8344;go is a programming language
8345;it is used for everything programming languages are
8346;it can do progamming language things
8347;which is writing software
8348;it's hard to get more specific than that without a more specific question
8349;Point being theres lots of uses for them (and go). Go is used a lot in interconnected micro services web servers but can be leveraged for anything a programming language can do (read: anything you want)
8350;like app development
8351;GUI apps
8352;to varying degrees of success
8353;o
8354;üôÇ
8355;does Go have a formatter tool like how rust does (in rust you'd do ```cargo fmt ```)
8356;yes gofmt
8357;Yea go has go fmt
8358;`go fmt`
8359;its one standard
8360;conform or else
8361;a beautiful thing
8362;üôÇ
8363;yeah but this happens
8364;It does make reading random packages very easy
8365;That's definitely one thing I really enjoy about the language
8366;it doesnt even let me copy
8367;so @_diamondburned_ I try to serve a simple index.html with my gin router for testing purposes.
8368;But `pkger.Open()` will return a `pkger.File` which I am not able to serve directly right?
8369;How do I parse it?
8370;tmpl.Execute?
8371;it's almost certainly an io.Reader
8372;might be time to learn about `io` and common interfaces
8373;That's another thing I love about the language
8374;you can make a http.FileServer with pkger.Dir
8375;read the README please
8376;there are examples for that
8377;and yeah io.Copy works too
8378;you just have to set the ContentType header
8379;> it doesnt even let me copy@Theodore ?
8380;okay but will I be able to return a http.Server in a gin.HandlerFunc as a return?
8381;And the Readme does not have a section where it tells me how to serve the file or did I not recognise the right paragraph?
8382;"```python hasItBeenRun = False"" try: with open(\'hasItBeenRun.txt\ \'r\') as f: hasItBeenRun = f.read() except Exception: pass```"
8383;None
8384;Does anyone know how you would do this without try and except
8385;:Thonk:
8386;Golang is kind of weird
8387;You could just use ReadFile instead of ReadAll
8388;Why are you doing log.Fatal
8389;But also claiming to return an error
8390;yeah
8391;I am new to Golang xD Sorry about that
8392;Theres a couple issues with the code but what are you struggling to do?
8393;Other than that youve basically already done it without exceptions
8394;I am wondering what would be the best way to like have a default value if the file doesn't exist
8395;The try except just ignores errors reading thr file which your code almost does already
8396;Sort of like what I did with my python code
8397;check if there was an error
8398;Your log.fatal will just kill the app (as its designed to do)
8399;if yes set a default value
8400;Ok thank you for the help
8401;I guess I will remove the log fatals and yeah
8402;dont forget to close the file
8403;You could return the error and then check for errors in your addToStartup function
8404;you should
8405;you will
8406;good üòÑ
8407;Go honestly seems like a pretty sick language
8408;youre god damn right
8409;its fantastic
8410;"It allows me as a shit programmer to do things than non go programmers find impressive. That speaks more.about Go than it does my abilities ;)"
8411;go makes it very easy to do things with relatively little skill that would require huge amounts of knowledge and man hours to achieve in others
8412;thats why i do rust
8413;to make myself feel smart again
8414;:kek:
8415;There a bit of a joke in the office that I'm slowly converting people to go but tbh I just write things I find useful and other people see how simple it is and want to get involved
8416;I am just rewriting some code I wrote in Python in Golang. As it is a good excuse to learn go (As I wanted to learn Go anyways) Also it really isn't worth the time to write it in C++ as it is a one off project most likely
8417;i love rewriting simple python projects in go and easily doing it more efficiently and usually in less lines
8418;"```godoc.Find(""h3.r a"").Each(func(i int s goquery.Selection) {\xa0\xa0\xa0\xa0str exists := s.Attr(""href"")\xa0\xa0\xa0\xa0if exists {\xa0\xa0\xa0\xa0\xa0\xa0u err := url.Parse(str)\xa0\xa0\xa0\xa0\xa0\xa0checkError(err)\xa0\xa0\xa0\xa0\xa0\xa0m _ := url.ParseQuery(u.RawQuery)\xa0\xa0\xa0\xa0\xa0\xa0fmt.Println(""\\033[1;35m""+s.Text()+""\\033[0m m[""q""][0])\xa0\xa0\xa0\xa0} else {\xa0\xa0\xa0\xa0\xa0\xa0\xa0fmt.Println(s.Text())\xa0\xa0\xa0\xa0}\xa0\xa0})```what is the `i int` (declared in the function)"
8419;https://gist.github.com/ammoses89/7655322
8420;Did you read the documentation
8421;Found it there
8422;Yeah üòÖ
8423;Link
8424;None
8425;I don't see what what that int is
8426;Is it the index value?
8427;well
8428;the docs say so
8429;Last sentence
8430;Called with index and selection
8431;Those refer to the function parameter
8432;I being the index
8433;also contextually
8434;you have a function called Each
8435;which does something with each member of a group of things. and an associated function that takes an integer and a parameter
8436;"```go vbstext := \'Set oShell = CreateObject (""Wscript.Shell"")\Dim strArgs\strArgs = cmd /c %s""\oShell.Run strArgs 0 false\\'```"
8437;Wait what is a rune
8438;a character
8439;https://blog.golang.org/strings
8440;?go utf
8441;Shit didn't add it again
8442;https://play.golang.org/p/QPJxxyrjpzE
8443;```go var d string switch data.(type) { case string: d = data```I have already established that data is a string. How do I now set it to d?
8444;Doesn't that already work?
8445;(data is an `interface{}`)
8446;Type switch smart
8447;No it complains that I can't assign an interface{} to string
8448;I swear I have done that before
8449;Type switch is smart
8450;Was fiddling around got it `d = data.(string)`
8451;https://play.golang.org/p/h0RCvkkOd3K
8452;There
8453;As per https://tour.golang.org/methods/16
8454;That way you don't need the manual cast @lieuwe_berg
8455;Thanks but it's only for string else I assume a struct so it's fine üëç
8456;Will do that in the future though
8457;Wow... I feel dumb for every conditional check I've ever made to check datatypes... Switching on types is the future.
8458;So wait if \'\ make something a rune how do you make strings with  in them
8459;Single quotes only allows you to create a single rune
8460;If you want to create a string use double quotes and escape the quotes or use backticks
8461;@Sgt_Tailor the type switch is really cool I didn't know you could do that
8462;Doesn't get used often. Only when encoding primitives. If I need to know the concrete type of something otherwise I am doing something wrong
8463;As we've got implicit interfaces
8464;I have a project that parses a fairly badly designed file format I can see that being really useful for iterating over the headers
8465;It has use cases for sure
8466;thank you Pot head for the help
8467;Np
8468;Trying to download the go tools on VSCode but keep getting the error ``cannot download $GOPATH must not be set to $GOROOT. For more details see: go help gopath``
8469;"```GOARCH=""amd64""GOBIN=""""GOEXE=""""GOHOSTARCH=""amd64""GOHOSTOS=""linux""GOOS=""linux""GOPATH=""/home/michael/go""GORACE=""""GOROOT=""/usr/local/go""GOTOOLDIR=""/usr/local/go/pkg/tool/linux_amd64""CC=""gcc""GOGCCFLAGS=""fPIC m64 pthread fmessagelength=0 fdebugprefixmap=/tmp/gobuild927554595=/tmp/gobuild gnorecordgccswitches""CXX=""g++""```"
8470;They definitely are not stored in the same place so I do not understand why I would get this error
8471;is there a way I can change the go http client header order?
8472;i know in the stdlib it's unordered because its a map
8473;is there really no way
8474;or library support
8475;for ordered headers
8476;probably not in the standard library
8477;because that's explicitly against spec
8478;wym explicity against spec
8479;can you explain that further?
8480;the http specification dictates that well behaved software doesn't care about header order.
8481;Http spec dictates header order must not matter
8482;So technically anything that DOES care about http header order is doing http wrong
8483;The go standard library is written to implement the specifications correctly
8484;I know it sucks that you do have to deal with poorly behaved software
8485;It isn't your fault and nobody's blaming you
8486;BUT
8487;the language designers wrote correct code
8488;because they're making a language that they wanted not to suck
8489;http order matters to me because of some server fingerprinting
8490;that i am trying to get past
8491;right
8492;yes that's an example of poorly behaving software
8493;pain
8494;Go will not excuse the shitness of whatever server youre dealing with
8495;There might be 3rd party http clients
8496;Worth a google
8497;oo do tell more
8498;I dont know of any
8499;But google is always at your disposal
8500;lots of people are trying to bypass fingerprinting
8501;all i see are propsals
8502;for header order in golang
8503;just google golang github http client or something
8504;and dig
8505;aii
8506;> The order in which header fields with differing field names are received is not significant. However it is good practice to send generalheader fields first followed by requestheader or response header fields and ending with the entityheader fields
8507;fasthttp probably
8508;:kek:
8509;fasthttp doesnt support http2 üò¶
8510;afaik
8511;fasthttp actually being useful
8512;is fasthttp actually faster
8513;yes
8514;why dont more people use it?
8515;because the API is not convenient
8516;oo
8517;just because it's faster doesn't necessarily make it better
8518;true
8519;do you need a http2 client?
8520;spaghetti code
8521;yeah
8522;http2 client that supports header order
8523;i have a transport tht deals with the clienthello tls fingerprinting
8524;try combining this https://godoc.org/golang.org/x/net/http2
8525;https://godoc.org/golang.org/x/net/http2#Transport
8526;stdlib doesnt support ordered headers üò≠
8527;oh
8528;well fasthttp has a http2 repo
8529;oh there you go
8530;but im not sure if it works
8531;https://github.com/fasthttp/http2
8532;oh
8533;under construction
8534;last commit 2019
8535;try it and see
8536;None
8537;yes I can read
8538;lol
8539;If you're a madman you create your own roundtripper and plug it into net/HTTP
8540;already created my own transport
8541;but i dont think the roundtripper deals with the header order?
8542;It is the thing that ultimately receives the header map and performs the request
8543;or headers at all
8544;oh
8545;or you can just reimplement part of http from scratch
8546;using low level libraries
8547;that was the orignal idea
8548;fork net/http
8549;but thats like a last resort kind of thing
8550;@Sgt_Tailor im new to networking is `http2.Transport` considered a rountripper?
8551;the `http.Client` accepts it as a round tripper
8552;No. I'm specifically referring to the round tripper interface. Transport is a different interface
8553;Check transport.go for more info
8554;https://godoc.org/github.com/gorilla/http/client#Client
8555;Gorilla
8556;:o
8557;whats gorillla
8558;oh
8559;its that other http client
8560;ü¶ç
8561;why did u link it?
8562;hold on
8563;they have list of headers
8564;yes
8565;` Headers []Header`
8566;> using low level libraries
8567;does this mean headers are ordered
8568;Phone just freezes when browsing the go source so you'll have to investigate yourself
8569;https://golang.org/src/net/http/transport.go
8570;see it for yourself: https://github.com/gorilla/http/blob/master/client/client.go#L98
8571;don't question me question the code
8572;@_diamondburned_ i love you so much
8573;‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è
8574;yw
8575;now i gotta figure out how to use origlla anduse my own transport
8576;also another note: can i customize the first few http2 pakcets that are being sent?
8577;if you go low level enough sure
8578;keep in mind that most of Go's code is written to cover 80% of use cases with 20% of the code
8579;80/20 rule
8580;i understand that my code is niche
8581;well my situation
8582;is very very niche
8583;im just following along an akamai whitepaper
8584;why is gorilla/http archived
8585;Doesnt say archived to me
8586;Just maintenance mode
8587;None
8588;its on their profile page
8589;Ah yes
8590;Feature complete maybe
8591;probably
8592;If I'm requesting data from a server but the response will depend on a piece of data I have (and must send with my request) is it still a GET request or would it be POST?
8593;GET
8594;Theres url or query params for a reason
8595;So I wouldn't send the data in the body?
8596;Depends
8597;Whats it look like
8598;It's just a single field
8599;"```json{""user"":""rm rf /""}```"
8600;Now do you really see any reason why that cant be a query param and should become a POST instead
8601;I realize that this would normally be done with params but I'm requesting a JWT so I didn't know if that would change anything
8602;Small brain forgive me
8603;yea generally you'd use GET with query params
8604;and POST with JSON or multipart form body
8605;Hello!Just wondering is there a onleliner or a enveutal way to factorize this?```gowords := strings.Split(string(text)  )var twoLettersText stringif len(words) == 1 { twoLettersText = strings.ToUpper(words[0][0:1]) + strings.ToLower(words[0][1:1])} else { twoLettersText = strings.ToUpper(words[0][0:1]) + strings.ToLower(words[1][0:1])}```This does: `Hello` > `He` `Hello world` > `HW`
8606;>one liners>GoPick one
8607;^
8608;this
8609;wanna know how to make it a oneliner?
8610;put it in a function
8611;haha
8612;`func shorten(text string) string`
8613;done
8614;that was serious btw
8615;üëè
8616;ok deal
8617;thanks üôÇ
8618;yeah np
8619;I'm trying to run a function from an array anyone know how I could do that I'm kinda stuck. thanks :)```go// Create the command type.type Command func(session discordgo.Session message discordgo.MessageCreate)// Array of noncallable commands.var nonCallableCommands []Commandfunc CommandHandler(session discordgo.Session message discordgo.MessageCreate) { // If message is from the bot exit. if message.Author.ID == session.State.User.ID {return} // Run noncallable commands. for x := range nonCallableCommands { nonCallableCommands[x] // How do I run this function? }}```
8620;`nonCallableCommands[x](session message)`
8621;or ```gofor _ fn := range nonCallableCommands { fn(session message)}```
8622;that's easy thanks
8623;I was stuck for like 10 min I feel stupid
8624;yea np
8625;hi how would i go about doing something once per day in go? and just sleeping the rest
8626;go { for range time.Tick(24  time.Hour) { stuff } }()
8627;cool :meowthumbsup:
8628;cloud functions reeeeeeee
8629;wat
8630;also if your code goes down in that 24 hour period you'll need to restart it and then subsequently have to wait another 24 hours
8631;http://gitlab.com/diamondburned/clocker
8632;> also if your code goes down in that 24 hour period you'll need to restart it and then subsequently have to wait another 24 hours@aditya yeah i know. i'm not worried about that
8633;then ur fine
8634;or do maths to calculate the offline time
8635;and sleep
8636;crontab
8637;^
8638;systemdtimer
8639;h
8640;>systemd
8641;yes.
8642;yeah something system level might be better lol
8643;i don't even have cron installed
8644;crontab or it's superior brother what diamond said :)
8645;systemd timer stronk
8646;i don't want to install cron in a container
8647;why do you even have a container
8648;because i don't want to install stuff on the host
8649;Is this part of a larger program
8650;no
8651;oh
8652;Or is this standalone
8653;what's wrong with a container diamond
8654;sorry i use nix i can't relate
8655;install cron in the container
8656;:robpike:
8657;no
8658;schedule the container in the host
8659;Why not
8660;idk
8661;i don't have a good reason not to
8662;:mikebsd:
8663;Are you taking the piss
8664;:bruh:
8665;does your container do anything
8666;other than this one task?
8667;no i'm just doing stuff like i want to do it because i want to do it that way lol
8668;nope
8669;okay use a system level timer to restart the container
8670;@aditya containers feel too overkill for me but Nix doesn't have the issue of needing to globally install stuff so I can't relate either
8671;it runs every day checking if it needs to renew my certificates
8672;bruh
8673;ohhhh
8674;crontab
8675;are you for real
8676;That's definitely a system level thing
8677;yea cron it
8678;container is super overkill for that
8679;it's 1 thing to install too
8680;like wtf
8681;if its cerbot it should automatically add to cron iirc
8682;^
8683;it's not certbot
8684;caddy (webserver) also autorenews
8685;okay then make a bash script
8686;anyway
8687;crontab mate
8688;and throw it in cron
8689;nix has `security.acme` which auto itself too
8690;traefik gang
8691;also this isn't really #golang anymore but yeah
8692;Must try caddy tho
8693;But seriously
8694;Stick this in cron
8695;caddy doesn't give me wildcards ü§∑
8696;but ye
8697;does it?
8698;wildcard SSL?
8699;i'll probably run a crontab
8700;Wildcards need DNS records
8701;yeah ^^
8702;For acmev2 only
8703;lol just set the records then
8704;certbot can do it but you can't automate that unless you hit your DNS API
8705;https://caddyserver.com/docs/automatichttps#wildcardcertificates
8706;Oh cool caddy has DNS provider auth
8707;That's overpowered
8708;I might switch
8709;Certbot does as well as does traefik
8710;Both use goacme iirc
8711;go bless acme
8712;god bless acme
8713;but you know same/same
8714;https://github.com/goacme/lego
8715;That thing
8716;"can someone help me w/ reading images that's binary encoded? the website describes the binary file to encode images like following:> The next 3072 bytes are the values of the pixels of the image. The first 1024 bytes are the red channel values the next 1024 the green and the final 1024 the blue. The values are stored in rowmajor order so the first 32 bytes are the red channel values of the first row of the image.and I have this code:```go // Read the red green then blue channel line by line. for ch := 0; ch < 3; ch++ { var l = 0 var ( // Start from: //  0 if red (ch = 0) //  1024 if green (ch = 1) //  2048 if blue (ch = 2) start = 1024  ch end = start + 1024 ) // Iterate over each line in 32pixels. for i := start; i < end; i += 32 { // Iterate over each pixel in the current line. for j := 0; j < 32; j++ { img.Pix[img.PixOffset(j l)+ch] = buf[i+j] } l++ } }```"
8717;it's supposed to give me a dog
8718;but this doesn't look like a dog at all
8719;can someone confirm my maf
8720;buf is the []byte 3072 len slice
8721;and img is image.NRGBA
8722;"got ```go var ( r = buf[10240 : 10241] g = buf[10241 : 10242] b = buf[10242 : 10243] y int ) for i := 0; i < 1024; i += 32 { for x := 0; x < 32; x++ { o := img.PixOffset(x y) img.Pix[o+0] = r[x+i] img.Pix[o+1] = g[x+i] img.Pix[o+2] = b[x+i] } y++ }``` now"
8723;same output
8724;ok here's what i got
8725;actual
8726;froge
8727;oh I got it
8728;yeah this is 100% my fault since the error ins't in the code i posted
8729;sry
8730;Hey guys how to print out an array without using for loops?
8731;each element to a new line?
8732;well
8733;let's break the question down
8734;how do i print every element in a list of things without looping over everything in the list
8735;yes is there any way to do that?
8736;axiomatically no
8737;so best I can do without for loops is recursion?
8738;recursion is looping just organized differently
8739;that's what i'm saying
8740;yea your right
8741;your question is can I do something to every member of a list without stepping through the list once for each member?
8742;yup that's a more specific version of the question
8743;and i'm not trying to like make you feel shitty
8744;nah it's all good
8745;fair nuff
8746;thanks man üòÑ
8747;just trying to narrow down exactly what you're looking for
8748;let me tell you a secret comrade
8749;it is all a big hack
8750;My condolences I do not personally know that much about traefik
8751;But you're in more or less the best place to ask
8752;short of like
8753;the ACTUAL traefik freenode channel
8754;yeah sometimes life is hard
8755;ultimately the bourgeoisie are the source of all our woes
8756;So wait does anyone know what storage types there are in go? Like lists dicts arrays vectors maps or something
8757;well dicts in python are maps
8758;You can Google go's types
8759;You'll get a more complete answer that way of all the primitives
8760;Thanks for the help
8761;but uh if you're just looking for built in data structures
8762;There's arrays and slices (arrays fixed length slices dynamic)
8763;And then there's maps
8764;and structs
8765;but yeah more complete answer on google
8766;Cool
8767;hi i changed the name of my github packagae and the name on go.mod but its giving me an error?
8768;`o [e json compiled=true test=true export=false deps=true find=false modfile=/tmp/go.996501844a2969d4bede9090b85f5839ef4313ac.982673431.mod  `
8769;this
8770;nvm i jsut clearned the /tmp folder
8771;alls good now
8772;Hey I am new to golang and am using a cms/api framework called ponzu. I have had success in the initial setup however I cannot seem to create a content type correctly.After running:`ponzu cen c post title:string``ponzu build && ponzu run`The build succeeds however visiting the admin page does not show my content type.
8773;why tho
8774;why CMS
8775;Because I want to use it as a backend for a personal site
8776;Can someone explain this function call? I'm having a hard time understanding the syntax ```func (v vault) Store(msg string) (token string err error) { t err := v.createOneTimeToken() return t nil}```
8777;Sure.
8778;So the function header first
8779;It's a function named `Store` with a string parameter named `msg`
8780;It returns a token (string) and an error
8781;That's the stuff you probably already knew
8782;Yup üôÇ
8783;The special part of the `(v vault)` which tells Go that this is a method for the type `vault`
8784;imagine you had some vault object called lockbox
8785;"you can run `lockbox.Store(""message"")`"
8786;and it will run this function
8787;`(v vault)` basically means this is a method on type the type vault and we\'re going to have `v` represent that vault
8788;What sort of docs/info could show some more examples if I were to search it? I was just browsing function types
8789;class methods kek
8790;They're just called methods
8791;https://gobyexample.com/methods
8792;so just check this out for example
8793;It doesn't seem like any of the things on that page have the same syntax
8794;Sorry just first time seeing it
8795;this?
8796;```gofunc (r rect) area() int {  return r.width  r.height }```
8797;this just doesn't take any function parameters though
8798;```func (v vault) (token string err error) {} ```
8799;And it only returns one type
8800;That's still pretty much that
8801;yeah? what were you looking for
8802;I thought you wanted to see more examples similar to what code you showed us
8803;Seems like i can think of `v` as `self` or `this`?
8804;yes but don't actually use self or this
8805;those are ambiguous names
8806;Hey there I suddenly get a weird error when running my go code. ```bashFATA[20200810T08:01:46+02:00] exit status 1: go: finding module for package github.com/patrickhener/domNG/servergo: downloading github.com/patrickhener/domNG v0.0.020200731185917f28087a2dec5can't load package: package github.com/patrickhener/domNG/server: github.com/patrickhener/domNG@v0.0.020200731185917f28087a2dec5: verifying module: github.com/patrickhener/domNG@v0.0.020200731185917f28087a2dec5: reading https://sum.golang.org/lookup/github.com/patrickhener/dom!n!g@v0.0.020200731185917f28087a2dec5: 410 Gone server response: not found: github.com/patrickhener/domNG@v0.0.020200731185917f28087a2dec5: invalid version: git fetch f origin refs/heads/:refs/heads/ refs/tags/:refs/tags/ in /tmp/gopath/pkg/mod/cache/vcs/abc1189b630039a5a498545be8947dcbfeae90eb634b1faf9f1591df34f6ef6a: exit status 128: fatal: could not read Username for https://github.com': terminal prompts disabled ```
8807;That wasn't there about 12 hours ago when running code and nothing really changed
8808;It is related to a file though I coded. If ommiting it the server works. But I do not get why
8809;are you using go run to run the application
8810;no I build and run the binary
8811;It has to do with pkger.Open though
8812;Here is the file which seams to breaking things:
8813;"```goimport ( net/http"" github.com/gingonic/gin"" github.com/markbates/pkger"" github.com/patrickhener/domNG/server/internal/logger"" github.com/patrickhener/domNG/server/internal/orm"" github.com/patrickhener/domNG/server/internal/utils"")func debug() gin.HandlerFunc { index err := pkger.Open(""/static/index.html"") if err != nil { logger.Fatal(err) } defer index.Close() // tmplContent err := ioutil.ReadAll(index) // if err != nil { // logger.Fatal(err) // } // tmplString := string(tmplContent) // tmpl tmplErr := template.New(""index"").Parse(tmplString) // if tmplErr != nil { // logger.Fatal(tmplErr) // } return func(c gin.Context) { // tmpl.Execute(c.Writer nil) c.String(http.StatusOK Test"") }}// Debug routesfunc Debug(cfg utils.Config r gin.Engine db orm.ORM) error { r.GET(""/debug/index debug()) return nil}```"
8814;If commenting the first line where I open static/index.html this will run
8815;It looks like an authorization error with github
8816;yeah but that is nearly impossible
8817;```bash‚ùØ git clone b gobackend git@github.com:patrickhener/domNG testCloning into test'...remote: Enumerating objects: 13 done.remote: Counting objects: 100% (13/13) done.remote: Compressing objects: 100% (13/13) done.remote: Total 26903 (delta 1) reused 6 (delta 0) packreused 26890Receiving objects: 100% (26903/26903) 83.73 MiB | 11.47 MiB/s done.Resolving deltas: 100% (7014/7014) done.```
8818;Also that github repo is private so I can't check the version is correct
8819;Also what does pkger has to do with me authorize against my own git repo
8820;well that is in fact true
8821;How may I check versioning?
8822;Make sure that commit hash it is referencing is in the repo
8823;"Thanks for the tip but why does this run then?:```goimport ( net/http"" github.com/gingonic/gin"" github.com/patrickhener/domNG/server/internal/orm"" github.com/patrickhener/domNG/server/internal/utils"")func debug() gin.HandlerFunc { // index err := pkger.Open(""/static/index.html"") // if err != nil { // logger.Fatal(err) // } // defer index.Close() // tmplContent err := ioutil.ReadAll(index) // if err != nil { // logger.Fatal(err) // } // tmplString := string(tmplContent) // tmpl tmplErr := template.New(""index"").Parse(tmplString) // if tmplErr != nil { // logger.Fatal(tmplErr) // } return func(c gin.Context) { // tmpl.Execute(c.Writer nil) c.String(http.StatusOK Test"") }}// Debug routesfunc Debug(cfg utils.Config r gin.Engine db orm.ORM) error { r.GET(""/debug/index debug()) return nil}```"
8824;"well only thing different to the above is the impport of ` github.com/patrickhener/domNG/server/internal/logger""`"
8825;so yes it might be something broken with my repo then I guess?
8826;Do you have a go.mod file?
8827;I do and a go.sum file
8828;Are there separate require statements for each of the `.../internal/` packages?
8829;no there is no requirement for this at all
8830;my golang code lives at github.com/patrickhener/domNG/server
8831;`module github.com/patrickhener/domNG/server` first line of my go.mod file
8832;What about in the sum file?
8833;the pattern `internal` is nowhere inside my sum file
8834;Ok then I'm not sure. I would check that the commit hash that the error is referencing acutally exists in the repo (if you force push it can remove commits from the repo) If it is there then I don't know.
8835;So I am looking for the commit `domNG v0.0.020200731185917f28087a2dec5` where the part after the dash is the commit hash right?
8836;After the last dash
8837;The middle part is a timestamp
8838;well this is really not in my `git log` history
8839;I am missing the commit hash
8840;How can this happen?
8841;And how do I fix this?
8842;Try `go get u` to update all of your dependencies
8843;`go get .: path /home/patrick/projects/domNGgobackend/server is not a package in module rooted at /home/patrick/projects/domNGgobackend/server`
8844;I am afraid I still do not understand modules. Thought I got how they work
8845;Appears to me I am not.
8846;I'm still learning myself...
8847;maybe `go get u github.com/patrickhener/domNG/server/internal/logger`
8848;nope that didn't work either
8849;Then I'm not sure sorry
8850;well I'll be damned. Breaking overnight without doing anything (at least with knowing) That sucks balls.
8851;And now on to a painful 8h debug session just to be able to write code again
8852;I hate my life
8853;Can I just delete my mod file and then do `mod init ...` `mod tidy`?
8854;WEll nope didn't help anything
8855;I guess I start over creating a new git repo and ditch the old for it is irreparable?
8856;"```gopackage routesimport ( net/http"" github.com/gingonic/gin"" github.com/patrickhener/domNG/server/internal/logger"" github.com/patrickhener/domNG/server/internal/orm"" github.com/patrickhener/domNG/server/internal/utils"")func debug() gin.HandlerFunc { // index err := pkger.Open(""/static/index.html"") // if err != nil { // logger.Fatal(err) // } // defer index.Close() // tmplContent err := ioutil.ReadAll(index) // if err != nil { // logger.Fatal(err) // } // tmplString := string(tmplContent) // tmpl tmplErr := template.New(""index"").Parse(tmplString) // if tmplErr != nil { // logger.Fatal(tmplErr) // } return func(c gin.Context) { logger.Info(""Debug route"") c.String(http.StatusOK Test"") // tmpl.Execute(c.Writer nil) }}// Debug routesfunc Debug(cfg utils.Config r gin.Engine db orm.ORM) error { r.GET(""/debug/index debug()) return nil}```It is even stranger cause this above works. Using `logger` works but pkger might be the problem after all and the error message might be wrong completely?"
8857;I might turn slightly insane by now
8858;@JohnnyTheSmith it is a private repo and your credentials expired
8859;No actually not ^^
8860;I did resolve this
8861;I used pkger wrong
8862;If you pkger.Open something you need to run `pkger` before building
8863;So that was the issue^^
8864;I mean yes. That is pretty clear in the documentation
8865;It came not clear to me though
8866;Neither did it to someone I was talking to in slack channel ^^
8867;What was the original error btw?
8868;> Usage> $ pkger> The result will be a\xa0pkged.go\xa0file in the\xa0root\xa0of the module with the embedded information and the package name of the module
8869;```bashFATA[20200810T08:01:46+02:00] exit status 1: go: finding module for package github.com/patrickhener/domNG/servergo: downloading github.com/patrickhener/domNG v0.0.020200731185917f28087a2dec5can't load package: package github.com/patrickhener/domNG/server: github.com/patrickhener/domNG@v0.0.020200731185917f28087a2dec5: verifying module: github.com/patrickhener/domNG@v0.0.020200731185917f28087a2dec5: reading https://sum.golang.org/lookup/github.com/patrickhener/dom!n!g@v0.0.020200731185917f28087a2dec5: 410 Gone server response: not found: github.com/patrickhener/domNG@v0.0.020200731185917f28087a2dec5: invalid version: git fetch f origin refs/heads/:refs/heads/ refs/tags/:refs/tags/ in /tmp/gopath/pkg/mod/cache/vcs/abc1189b630039a5a498545be8947dcbfeae90eb634b1faf9f1591df34f6ef6a: exit status 128: fatal: could not read Username for https://github.com': terminal prompts disabled ```
8870;this error will be thrown if you do not use pkger right
8871;Sounds totally related to pkger when reading the error right?
8872;Not sure what you ran to trigger that
8873;`.build/server` after building the project. But that does not matter anymore. I learned what was wrong. So TIL how to use pkger right
8874;üëç
8875;Glad you figured it out
8876;Thanks üòÑ
8877;You got that error while running the application?
8878;yes at runtime üòÑ
8879;At that point you know it was packr.Open causing an error
8880;looks like you're trying to use some private git repository?
8881;https://github.com/patrickhener/domNG
8882;It is already resolved
8883;ah okay
8884;Well thanks @hhhapz for beeing enthusiastic
8885;It needs people like you eager to resolve issues for dumb people like me üòõ
8886;nah im just waiting for my code to compile
8887;so i go on discord and waste my time
8888;so now I only need to figure how to combine pkger with realize üò©
8889;cause when I do a pre build hook in realize with `pkger` the pkged.go will change resulting in in infinite loop of realize
8890;why not just use a zip?
8891;why embed static files?
8892;and keep the files in the same folder as the executable
8893;cause I want to embed my react frontend and some static images to my binary
8894;genuinely curious but what's the advantage of doing that over just keeping it seperate
8895;convinience?
8896;usability for non technical enduser
8897;I can just release a single binary and everyone will be able to just double click that
8898;https://github.com/plentico/plenti
8899;Niceeee
8900;I'm not sure where to share so I'll share it in here.
8901;@SG1asgard is that yours?
8902;No I just found out about it.
8903;Freaking awesome!
8904;ah
8905;im meaning to try svelte
8906;how is it?
8907;I don't know yet need to test it but the instance I found it I felt compelled to share it in here
8908;üòÑ
8909;Maybe you guys have a list where that can be posted for others to know about it?
8910;well svelte is really niche
8911;and theres tons of ncie tools out there kind of difficult to say what a got place for it is
8912;maybe like awesomego and awesomesvelte?
8913;Go and HUGO can do pretty much all but it is an interesting alternative when one wants to develop with JS front end.
8914;I think Svelte is really good
8915;"not sure how it's niche; it basically does all of what your average web framework does"
8916;but it just feels nicer overall
8917;more HTML oriented and doesn't feel like writing JS for HTML at all
8918;Agree
8919;I like Vue.js Haven't tried Svelte
8920;now i'm just waiting for svelte on deno
8921;So new interesting things indeed.
8922;How heavy is svelte compared to vue
8923;#offtopic
8924;Svelte eliminates the shadow DOM crap
8925;it is a lot faster a lot smaller
8926;I started to make a `Pet a Cat ` app with Svelte üòÑ
8927;What I am doing in Vue in 1h I can do in Svelte in 20 minutes
8928;I call that amazing...
8929;https://github.com/sg1asgard/sveltepetacat
8930;Work in progress though...
8931;¬Ø\\_(„ÉÑ)_/¬Ø
8932;> so now I only need to figure how to combine pkger with realize üò©Well I dirty patched it from his code like this: ```go // file check if fcheck { _ file := filepath.Split(path) if file == pkged.go { return false } fi err := os.Stat(path) if err != nil || fi.Mode()&os.ModeSymlink != 0 || !fi.IsDir() && ext(path) ==  || fi.Size() <= 0 { return false } } return true```
8933;might not be the best solution but workiung for my project now üòõ
8934;yikes
8935;@JohnnyTheSmith Mmm I do not know GO well as I am a beginner with but shouldn't you use `===` instead `==` thus checking the type as well not only the values?
8936;Unless you actually check for `null` and `undefined` ?!
8937;you can't do that
8938;please correct me if I am wrong
8939;@Karitham So how do you check if the type is correct as well?
8940;The compiler checks type
8941;Go is strongly typed unlike JavaScript
8942;yeah this is Go
8943;operand === doesn't exist
8944;just being slightly clueless at types will just not run lol
8945;you essentially cannot use the incorrect type
8946;How do I annotate code in discord chat?
8947;Triple tildes?
8948;yeah
8949;Yeah
8950;Wrap the code with that
8951;\\`\\`\\`<name of language>code here \\`\\`\\`
8952;most languages dont need ===
8953;except one
8954;lmao
8955;js and php
8956;okay a few
8957;=== only exists in languages that hate you
8958;life is hard
8959;"So I am new to go and I am trying to implement a simple web server which serves static files.```gofunc main() { mux := http.NewServeMux() wd _ := os.Getwd() mux.Handle(""/ http.FileServer(http.Dir(wd+`\\public`))) http.ListenAndServe("":8080 mux)}```I have this code and I want to handle 404 errors with a custom template. Is there any way to do it with the standard `net/http` package?"
8960;"Most of the `net/http` source code has blocks like this```goif err != nil { msg code := toHTTPError(err) Error(w msg code) return }```With Error function```gofunc Error(w ResponseWriter error string code int) { w.Header().Set(""ContentType text/plain; charset=utf8"") w.Header().Set(""XContentTypeOptions nosniff"") w.WriteHeader(code) fmt.Fprintln(w error)}```I am assuming the answer would be no but I might be missing something."
8961;@SG1asgard you do understand what a statically typed language is right?
8962;Coming from JS and still wrapping my head around it.
8963;Yea i could tell
8964;No such thing as undefined here
8965;And types are known at compile time
8966;Imagine typescript
8967;pretty much what TS does for me I guess
8968;If I hava an image as []byte slice how do I serve this in gin handler? I so far tried Parsing it into template which will not work for any image
8969;yes typescript is a statically typed language
8970;@JohnnyTheSmith ServeContent and bytes reader
8971;yeah you have to think about this
8972;first off it may be useful to use your browser's debug tools and see how other websites serve images
8973;@_diamondburned_ Gin context has no Method ServeContent. Am I doing this wrong?
8974;@ghost0x07 you can make your own handler over fs that calls fs
8975;there might be important headers or other data that you need to send
8976;hint hint hint
8977;or use go chi
8978;gochi gang
8979;that one has a custom not found handler
8980;Well I retrieve that byte array from pkger.Open
8981;and read it in with ioutil.ReadAll
8982;@JohnnyTheSmith http.ServeContent
8983;oh wtf
8984;use pkger.Dir then
8985;oh okay well.
8986;> @ghost0x07 you can make your own handler over fs that calls fs@_diamondburned_ Okay. That means I do need a framework if I want a easy way out.
8987;Thanks
8988;nah chi doesn't really count as a framework
8989;it's a library more than a framework
8990;Ah I see.
8991;so once you take note of the headers
8992;you have to think about this
8993;how are images most commonly embedded in a web page
8994;Greetings everyone.
8995;protip: it does NOT involve embedding the raw bytes of the image directly into the html document
8996;most common would be an `<img>` tag lol
8997;yeah the most important is ContentType
8998;you almost always cannot miss it
8999;Why does doing the easiest things take that long
9000;because you didn't do it right
9001;because accomplishing things requires doing work
9002;instead of using pkger.Dir you decided to do ???
9003;I promise you it will take me another 8+h to figure out how to just server a pkged directory at a gin route
9004;and also you're going out of your way to make it harder
9005;with this pkger shit
9006;"I am stuck at installing packages with Go. After enabling GO111MODULES=""on I am unable to install packages. Getting error in pkg/mod directory with rename permission denied."
9007;the hell? There's literally a helper function deezy
9008;it's in the damn readme
9009;Could someone please help?
9010;what more do you want
9011;Do we read the same readme?
9012;Error: ```go get github.com/micro/micro/v2: rename /home/myuser/go/pkg/mod/github.com/micro/micro/v2@v2.9.3.tmp730624357 /home/m/go/pkg/mod/github.com/micro/micro/v2@v2.9.3: permission denied```
9013;> /home/myuser/go/pkg/mod/github.com/micro/micro/v2@v2.9.3.tmp730624357
9014;hmmm
9015;"`pkger.Dir(""<path>"")  Embeds all files under the specified path.` This is the only thing in the readme telling me to use it"
9016;something smells funny there
9017;but how I use it is not there
9018;I have given 777 permission to the whole `go` directory.
9019;well
9020;```/home/myuser/go/pkg/mod/github.com/micro/micro/v2@v2.9.3.tmp730624357 ```
9021;look really carefully at that path
9022;something doesn't seem quite right
9023;What am I missing there? I am not able to figure it out. This is only happening if I enable the GO111MODULES
9024;well
9025;`/home/myuser` sure seems like a placeholder
9026;and not a real user
9027;I created that user.
9028;oh
9029;with that name
9030;> and also you're going out of your way to make it harder@deezy So how would you embed static files within the binary?
9031;i wouldn't
9032;but i've already spoken at great length about this
9033;"yeah that is a pretty good answer to a specific question. Imagine you are at medical school and want to know how to treat burn wounds and the teacher will just say: I wouldn\'t"". great right?"
9034;well nevermind.
9035;:kek:
9036;Nice false dichotomy
9037;Anyways
9038;```$ go get v golang.org/x/tools/gopls@latest ‚èégo: downloading golang.org/x/tools/gopls v0.4.4go: downloading golang.org/x/tools v0.0.0202008090128406f4f008689dago get golang.org/x/tools/gopls@latest: rename /home/myuser/go/pkg/mod/golang.org/x/tools/gopls@v0.4.4.tmp500234064 /home/myuser/go/pkg/mod/golang.org/x/tools/gopls@v0.4.4: permission denied```
9039;It is failing for everything.
9040;that is strange
9041;tbqh i'd just rm rf the whole bitch
9042;and start from scratch
9043;but also
9044;what go version are you even on
9045;why are you setting that env var
9046;that hasn't been needed for like 2 years
9047;my go version is 1.14.4
9048;yeah you don't need that env var anymore
9049;modules are on by default
9050;This is what happens if I unset that env.
9051;```$ go get v u github.com/micro/micro/v2github.com/micro/micro (download)package github.com/micro/micro/v2: cannot find package github.com/micro/micro/v2 in any of: /usr/local/go/src/github.com/micro/micro/v2 (from $GOROOT) /home/myuser/go/src/github.com/micro/micro/v2 (from $GOPATH)```
9052;"A better analogy would be asking how would you build a table with pine and wood glue"". I wouldn\'t. I\'d use a much harder wood and probably nails/screws."
9053;okay @deezy so how would YOU make sure the static pictures are in the right place when someone downloads the application? And how would you serve them then?
9054;https://golang.org/pkg/net/http/#ServeContent
9055;as images
9056;via urls
9057;But this will not integrate in gin right?
9058;Should check the gin godoc
9059;See if the types are compatible
9060;https://github.com/gingonic/contrib/ might be something good in here
9061;https://github.com/gincontrib/static seems to have relevant stuff for serving static content
9062;Well I think I hit a wall. I am starting over. Overthinking the usage of gin and static files. Maybe I'll ditch go for python again as I not seem to be able to manage gaining speed writing in go
9063;well just a quick sample
9064;"``` r.Use(static.Serve(""/ static.LocalFile(""/tmp false)))```"
9065;that's all you have to do to serve your images
9066;if you ditch pkger
9067;Yeah I get that
9068;But then again I need to package a image directory holding this images by hand when doing a release
9069;right?
9070;no?
9071;idk
9072;i don't know what your images are
9073;unless you're drawing them by hand every time though
9074;I have to take care of that a folder containing images will be next to my server binary
9075;you could probably automate the builds
9076;that is what I mean
9077;uh
9078;yeah dude
9079;just deploy a tar file
9080;Just toss the images in a docker container with your binary
9081;or a docker image
9082;Completely automatic
9083;how do i put multiple files on another computer is an extremely well explored problem space
9084;> you could probably automate the buildsYou should be automating deploys regardless
9085;one step at a time
9086;once you have a build/deploy process that works manually then you can refine and automate
9087;> I have to take care of that a folder containing images will be next to my server binaryThis becomes a non issue under automation
9088;As it should be done
9089;I dont even think saying i might mess it up is a good enough excuse against not embedding
9090;If you automate it you reduce the human factor the biggest cause of errors
9091;I think the wall of text gets the point through lol
9092;üôÇ
9093;yeah dead horse etc
9094;like i said we gotta focus on specific achievable goals
9095;it's all well and good for us to bikeshed about CI pipelines
9096;Does gochi not have a website or `Getting Started Docs`?
9097;it does
9098;the github readme the godoc and the examples directory
9099;that's uh
9100;gonna be pretty normal for go
9101;try to...manage your expectations so to speak
9102;Alright. Coming from a js background I am very accustomed to finding beautiful websites and docs
9103;In time you'll find godocs beautiful
9104;Simple and clear
9105;They are simple and clear
9106;Some might have nice websites
9107;Most just have a quick getting started on the GitHub readme
9108;Maybe an examples folder
9109;And then theres the godoc which shows all the functions and types available to you
9110;I follow a script kiddie approach where I find a tutorial for just works scenario and then dive deep into the official documentations
9111;> Most just have a quick getting started on the GitHub readmeThen this part should get you started
9112;Should probably advance your approach to software development üòâ
9113;None
9114;I am already on the docs.
9115;Dunno if you need a whole lot more to get started with gochi :p
9116;Yeah that's basically gochi right there lol
9117;that's kinda the thing with go code
9118;the type system makes shit
9119;really unambiguous
9120;> Should probably advance your approach to software development üòâ@Doad Can you elaborate? I come from a SecOps background where I do not code for my professional work. I am just coding as a hobby.
9121;The thing you're importing will have an entry point some Start() or NewApp() or Run()
9122;which will accept some parameters
9123;whose types are explicitly documented
9124;and you just
9125;go down the chain
9126;super e z
9127;@ghost0x07 I mean by being able to solve the problem yourself instead of finding a solution for you
9128;Got it!
9129;I almost do not have the courage to ask anymore whatsoever but serving the uploads folder went good. Serving the spa folder within the root / will just give me 404 page not found. Why is that?
9130;Youre in secops so you have the skills id assume
9131;@JohnnyTheSmith can you show your code?
9132;I just try to get a just works code and then list out some features I would want to see in it. Then I go inside the documentation and try to implement those features.
9133;Now its a matter of learning how to apply those to coding
9134;> I just try to get a just works code and then list out some features I would want to see in it. Then I go inside the documentation and try to implement those features.Yea this is what the readme and examples folders are generally for
9135;@JohnnyTheSmith and the endpoint you're trying to hit?
9136;"```go // Run web server func Run(serverconf utils.Config orm orm.ORM) { r := gin.Default() r.Use(cors.New(cors.Config{ AllowAllOrigins: true, AllowMethods: []string{""GET POST DELETE PUT PATCH OPTIONS""}, AllowHeaders: []string{""Origin ContentType""}, ExposeHeaders: []string{""ContentLenght""}, AllowCredentials: true, MaxAge: 12  time.Hour, })) r.Use(static.Serve(""/ static.LocalFile(""/static/spa true))) r.Use(static.Serve(""/uploads static.LocalFile(""/uploads false))) // Routes and Handlers if err := RegisterRoutes(serverconf r orm); err != nil { logger.Fatalf(""Error registering routes: %s err) } // Inform the user where the server is listening logger.Info(""Running @  + serverconf.ListenEndpoint()) // Print out and exit(1) to the OS if the server cannot run logger.Fatal(r.Run(serverconf.ListenEndpoint())) }```"
9137;I try hitting / and want to server a react app build
9138;Gotcha
9139;with uploads I will get the images just fine
9140;but for main root / this is not working
9141;I was also reading a tutorial which provided exactly this code
9142;Hmm
9143;Looks like that should work by the docs
9144;The path is correct?
9145;Relative to the working dir?
9146;yes
9147;I haven't used gin give me a moment to check some docs
9148;I am registering other routes though. Might that be the problem?
9149;I don't think so
9150;You should be able to register multiple routes
9151;Does that folder have an index file?
9152;yes index.html
9153;Hmm
9154;Can you access resources if you set indexing to false?
9155;Can you access resources if you change the path?
9156;Try serving uploads at / and see if that works
9157;Haven't used gin so might as well try a few things
9158;^ start as simple as possible. serve only images on `/`
9159;then try serving them at /img or whatever
9160;then start adding other routes
9161;increase the complexity little by little
9162;I can serve images (with directory listing) at /
9163;well now it servers just well
9164;I moved from static/spa to /client
9165;maybe the serve function doesn't like subdirectories?
9166;Oh well and now there is this problem üòõ
9167;In a spa I hav routing going on but when it actually tries to route it will fail cause /game or /user for example isn't there
9168;so I will need to replicate my client router and mirror it to be my server router as well everytime pointing at the client directory
9169;is there a wildcard I can use?
9170;https://github.com/gingonic/gin#parametersinpath
9171;nope `/action` does not work neither does asterik on it's own
9172;wdym
9173;How are you using it?
9174;"` r.Use(static.Serve(""/action static.LocalFile(""./client true)))`"
9175;"or ` r.Use(static.Serve(""/ static.LocalFile(""./client true)))`"
9176;Both not serving what it was supposed to
9177;This isn't for `static`
9178;Oh indeed it is not ^^
9179;ü§¶\u200d‚ôÇÔ∏è
9180;Serve statically from the route handler
9181;gin is weird
9182;gochi gang
9183;gin also doesn't seem to interop with `net/http`
9184;So you say it is better to migrade to gochi maybe as long as there is still the chance to
9185;i'd say yeah
9186;Well that wildcard will break every other route though...
9187;```go[GINdebug] GET /action > github.com/patrickhener/domNG/server/internal/handlers.SPA.func1 (5 handlers)[GINdebug] GET /ws > github.com/patrickhener/domNG/server/internal/handlers/socket.ServeWS.func1 (5 handlers)panic: /ws in new path /ws conflicts with existing wildcard /action in existing prefix /action'```
9188;so okay then it's time to start over again one more time (surely not the last time) and do it again...
9189;Did I already say I hate my life?
9190;programming is hard
9191;You can use regex matching for a route
9192;So you can match to certain routes
9193;@deezy It worked. I removed the pkg directory from VS code workspace.
9194;Thank you for help. @deezy
9195;when in doubt rm rf and start tf over
9196;ancient wisdom
9197;Refer: https://stackoverflow.com/questions/58096783/visualstudiocodecantinstallthegotools
9198;I haven't deleted it. I just removed it from open folder in MS VS Code workspace.
9199;Well now to relearn how to server static content with gochi then
9200;"Shouldn\'t that work?```gofunc doit(w http.ResponseWriter r http.Request) { http.ServeFile(w r /uploads"")}func Run(serverconf utils.Config orm orm.ORM) { r := chi.NewRouter() r.Use(middleware.Logger) r.Get(""/ func(w http.ResponseWriter r http.Request) { w.Write([]byte(""ok"")) }) r.Get(""/uploads doit) // Inform the user where the server is listening logger.Info(""Running @  + serverconf.ListenEndpoint()) // Print out and exit(1) to the OS if the server cannot run logger.Fatal(http.ListenAndServe(serverconf.ListenEndpoint() r))}```"
9201;cause it doesn't
9202;oh I am so fed up with this shit
9203;```Gofs := http.FileServer(http.Dir(myPath))fs.ServeHTTP(w r)```
9204;or something like that
9205;I am usin gochi now
9206;yes
9207;gochi is just a router
9208;not the server
9209;So I define routes with r.Get right?
9210;it is 100% compatible with `net/http`
9211;yes
9212;"```Gofunc doit(w http.ResponseWriter r http.Request) { fs := http.FileServer(http.Dir(""/uploads"")) fs.ServeHTTP(w r)}```"
9213;pretty sure this should work
9214;it does not
9215;"```go r.Get(""/uploads func(w http.ResponseWriter r http.Request) { fs := http.FileServer(http.Dir(""/uploads"")) fs.ServeHTTP(w r) })```"
9216;404 page not found
9217;how so
9218;okay
9219;so start simple
9220;try just returning a 200 response
9221;how
9222;just like your other route
9223;`/`
9224;with w.Write
9225;sure
9226;you don't really even need to write anything
9227;default response is 200
9228;okay that is working
9229;w.Write(...) will give me my return string as in /
9230;huh
9231;oh yes
9232;that's how you write bytes as a response
9233;sure
9234;but how do I server static files
9235;pretty sure what I posted above should work
9236;404 makes no sense
9237;It does not
9238;where does the upload folder need to be?
9239;Might this be a relative path problem?
9240;You just have to reference it correctly
9241;"```Gofs := http.FileServer(http.Dir(""./static""))http.Handle(""/ fs)```"
9242;I did try ./uploads
9243;that references a local folder `static`
9244;no success either
9245;Do you have files in your folder?
9246;where is your folder? root?
9247;```go.‚îú‚îÄ‚îÄ build‚îú‚îÄ‚îÄ client‚îú‚îÄ‚îÄ cmd‚îú‚îÄ‚îÄ config.yml‚îú‚îÄ‚îÄ go.mod‚îú‚îÄ‚îÄ gopherboard.db‚îú‚îÄ‚îÄ go.sum‚îú‚îÄ‚îÄ gqlgen.yml‚îú‚îÄ‚îÄ internal‚îú‚îÄ‚îÄ Makefile‚îú‚îÄ‚îÄ scripts‚îî‚îÄ‚îÄ uploads```
9248;Also yeah you have to find it relative to where you run the binary from.
9249;binary runs in build folder and the entry code resides in cmd > server > main.go
9250;so the folder is `../uploads` relative to your bin
9251;I tried `../uploads` and `../../uploads` right now
9252;neither worked
9253;"Hi there how do I load html files with a specific extension using gin? `r.LoadHTMLGlob(paths.Theme() + /.tmpl"")` were `paths.Theme()` is an absolute path I would like to load all the .tmpl files under that regardless of directory depth?I load it like so: `g.HTML(http.StatusOK /templates/test.tmpl gin.H{})` but get`html/template: /templates/test.tmpl is undefined`"
9254;@JohnnyTheSmith how are you running the bin?
9255;and where do you issue the command from
9256;Run pwd inside your go code to see where you are located during runtime
9257;shouldn't need to do that
9258;you should just...know lol
9259;(yeah i know but special circumstance)
9260;so here's what i do
9261;avoid relative paths entirely
9262;"```bash‚ùØ pwd/home/patrick/projects/domNG/server‚ùØ go build o build ./...# github.com/mattn/gosqlite3sqlite3binding.c: In function ‚Äòsqlite3SelectNew‚Äô:sqlite3binding.c:129019:10: warning: function may return address of local variable [Wreturnlocaladdr]129019 | return pNew; | ^~~~sqlite3binding.c:128979:10: note: declared here128979 | Select standin; | ^~~~~~~‚ùØ ./build/serverINFO[20200810T13:48:06+02:00] [ORM] Database connection initialized. INFO[20200810T13:48:06+02:00] Running @ :5000 2020/08/10 13:48:09 GET http://localhost:5000/uploads/na.png HTTP/1.1 from [::1]:44834  404 19B in 24.935¬µs```"
9263;get the cwd with like os.GetCwd or whatever
9264;use filepath.Join()
9265;get an absolute path to the thing you care about
9266;makes troubleshooting a lot more straightforward
9267;none of this oh but where does the executable think it is
9268;you can still figure out where you are at runtime but as soon as you do treat everything as absolute paths
9269;"```go// Run web serverfunc Run(serverconf utils.Config orm orm.ORM) { cwd err := os.Getwd() if err != nil { logger.Fatal(""Unable to get current working directory"") } r := chi.NewRouter() r.Use(cors.Handler(cors.Options{ AllowedOrigins: []string{""""}, AllowedMethods: []string{""GET POST DELETE PUT PATCH OPTIONS""}, AllowedHeaders: []string{""Origin ContentType""}, ExposedHeaders: []string{""ContentLenght""}, AllowCredentials: true, MaxAge: int(12  time.Hour), })) r.Use(middleware.Logger) r.Get(""/ func(w http.ResponseWriter r http.Request) { w.Write([]byte(""ok"")) }) uploadsFolder := filepath.Join(cwd uploads"") r.Get(""/uploads func(w http.ResponseWriter r http.Request) { fs := http.FileServer(http.Dir(uploadsFolder)) fs.ServeHTTP(w r) }) // Inform the user where the server is listening logger.Info(""Running @  + serverconf.ListenEndpoint()) // Print out and exit(1) to the OS if the server cannot run logger.Fatal(http.ListenAndServe(serverconf.ListenEndpoint() r))}```"
9270;404 page not found
9271;`/home/patrick/projects/domNG/server/uploads` this will be printed out when logging the `uploadsFolder` variable
9272;uhm you're looking for `/uploads/uploads` afaik
9273;So yes @deezy good idea but not working eihter
9274;am I?
9275;maybe? idk add more logging. print out the paths you're working with and see if they're what you think they should be
9276;like
9277;your code is broken
9278;"but you have this ` uploadsFolder := filepath.Join(cwd uploads"")`"
9279;yeah that's why I wanted you to print your working directory
9280;and you're not even checking if that's what you think it is
9281;I did and it is
9282;still not working
9283;okay well your code didn't show it so
9284;Sorry I ommited for readability
9285;"`http.Handle(""/uploads/ http.StripPrefix(""/uploads/ fs))`"
9286;"```go// Run web serverfunc Run(serverconf utils.Config orm orm.ORM) { cwd err := os.Getwd() if err != nil { logger.Fatal(""Unable to get current working directory"") } logger.Infof(""Current Working directory is: %+v cwd) // // Mirror the router config from reactrouterdom // // r.Use(static.Serve(""/action static.LocalFile(""./client true))) // // r.Use(static.Serve(""/game static.LocalFile(""./client true))) // // r.Use(static.Serve(""/player static.LocalFile(""./client true))) // r.Use(static.Serve(""/uploads static.LocalFile(""./uploads false))) // // Routes and Handlers // if err := RegisterRoutes(serverconf r orm); err != nil { // logger.Fatalf(""Error registering routes: %s err) // } r := chi.NewRouter() r.Use(cors.Handler(cors.Options{ AllowedOrigins: []string{""""}, AllowedMethods: []string{""GET POST DELETE PUT PATCH OPTIONS""}, AllowedHeaders: []string{""Origin ContentType""}, ExposedHeaders: []string{""ContentLenght""}, AllowCredentials: true, MaxAge: int(12  time.Hour), })) r.Use(middleware.Logger) r.Get(""/ func(w http.ResponseWriter r http.Request) { w.Write([]byte(""ok"")) }) uploadsFolder := filepath.Join(cwd uploads"") logger.Infof(""Upload folder is: %+v uploadsFolder) r.Get(""/uploads func(w http.ResponseWriter r http.Request) { fs := http.FileServer(http.Dir(uploadsFolder)) fs.ServeHTTP(w r) }) // Inform the user where the server is listening logger.Info(""Running @  + serverconf.ListenEndpoint()) // Print out and exit(1) to the OS if the server cannot run logger.Fatal(http.ListenAndServe(serverconf.ListenEndpoint() r))}```"
9287;this is the complete code (with leftover gin artefacts)
9288;I'll get this when running the build:
9289;```goINFO[20200810T13:54:27+02:00] [ORM] Database connection initialized. INFO[20200810T13:54:27+02:00] Current Working directory is: /home/patrick/projects/domNG/server INFO[20200810T13:54:27+02:00] Upload folder is: /home/patrick/projects/domNG/server/uploads INFO[20200810T13:54:27+02:00] Running @ :5000 ```
9290;okay good your upload path is correct but your router is still messing with you
9291;Well it's intended behavior but yeah
9292;"> `http.Handle(""/uploads/ http.StripPrefix(""/uploads/ fs))`"
9293;And when browsing to http://localhost:5000/uploads/na.png page will give me 404 not found and console will say:```go2020/08/10 13:55:28 GET http://localhost:5000/uploads/na.png HTTP/1.1 from [::1]:48212  404 19B in 25.463¬µs```
9294;http.StripPrefix
9295;where do I put it?
9296;most likely the http.FileServer is trying to find the file /uploads/na.png while inside the /uploads
9297;^
9298;so /uploads/uploads/na.png
9299;okay I understand this
9300;https://stackoverflow.com/questions/27945310/whydoineedtousehttpstripprefixtoaccessmystaticfiles
9301;Johnny put it on your handlefunc
9302;First line inbetween or at the end?
9303;I tried all 3 positions neither work
9304;http.StripPrefix is a handler that wraps your current handler
9305;so put in around your second parameter in r.Get
9306;I believe
9307;"```gor.Get(""/uploads func(w http.ResponseWriter r http.Request) { fs = http.StripPrefix(""/uploads/"",http.FileServer(http.Dir(uploadsFolder))) fs.ServeHTTP(w r) })```"
9308;that r.Get probably accepts an handler too
9309;@stdio not working either
9310;"```gor.Get(""/uploads http.StripPrefix (""/uploads func (w... h...) {}))```"
9311;"```gor.Get(""/uploads http.StripPrefix(""/uploads/"",http.FileServer(http.Dir(uploadsFolder))))```"
9312;Oh yeah what stdio said works too
9313;k add some logging there and see the incoming and all that
9314;gettin lispy in here
9315;"`internal/server/main.go:55:36: cannot use http.StripPrefix(""/uploads/ http.FileServer(http.Dir(uploadsFolder))) (type http.Handler) as type http.HandlerFunc in argument to r.Get: need type assertion`"
9316;"r.Get(""/uploads http.StripPrefix(""/uploads/"",http.FileServer(http.Dir(uploadsFolder))).ServeHTTP) then"
9317;nope
9318;404 page not found
9319;I give in I think
9320;"logger.Infof(""Upload folder is: %+v uploadsFolder) what did this print?"
9321;That is another half day making only backwards progression not forward
9322;```INFO[20200810T14:01:52+02:00] [ORM] Database connection initialized. INFO[20200810T14:01:52+02:00] Current Working directory is: /home/patrick/projects/domNG/server INFO[20200810T14:01:52+02:00] Upload folder is: /home/patrick/projects/domNG/server/uploads INFO[20200810T14:01:52+02:00] Running @ :5000 2020/08/10 14:01:53 GET http://localhost:5000/uploads/na.png HTTP/1.1 from [::1]:51524  404 19B in 6.635¬µs```
9323;this seems like lightyears further than you were yesterday
9324;Back in time you mean
9325;It's okay you're learning valuable experience towards how to troubleshoot faulty code.
9326;lightyears back in time
9327;ahh if only time's arrow could truly be reversed
9328;I don't want to be one of those but in python it would all be done by now
9329;ultimately as I don't get gin properly I would print r.URL() inside of the handler to check it out
9330;gin or whatever that is
9331;its chi
9332;it's gochi
9333;I was convinced in changing to gochi
9334;"In gin how do I have a master html file  layout.html and use the same layout for multiple templates?`g.HTML(http.StatusOK layout gin.H{})`Im loading them like this:`r.LoadHTMLGlob(paths.Theme() + //.tmpl"")`"
9335;I am kind of tired to read tutorials of the same topic like 10 of them doing it exactly the way it is supposed to and resulting in non working code
9336;Johnny try to print out your URL within your function handler
9337;then you geys recommend again to do what I already read and did and still not working
9338;https://github.com/gochi/chi/blob/master/_examples/fileserver/main.go
9339;Did you look at the examples
9340;you have to be sadistic to code in go
9341;Uhm no
9342;I don't know if I am sadistic enough
9343;That fileserver example I already found and tried
9344;Hm this is older than i know
9345;Lemme see if ive a better example
9346;This problem you're facing is not a Go issue it's a lack of understanding troubleshooting which is okay it's a very valuable skill so struggling is learning.
9347;"> In gin how do I have a master html file  layout.html and use the same layout for multiple templates?> `g.HTML(http.StatusOK layout gin.H{})`> Im loading them like this:> `r.LoadHTMLGlob(paths.Theme() + //.tmpl"")`Any ideas?"
9348;I might as well jump out my roof window (3. floor) by know or bash in my equipment woth thousands of euro. Cannot decide yet
9349;Maybe throw the equipment out of the window will be the most efficient and less harmful method
9350;"```gofs := http.FileServer(http.Dir(uploadPath))http.Handle(""/ fs)```"
9351;First just try this.
9352;that level of frustration is also normal
9353;Basic example using root url.
9354;None
9355;Sorry for screenshot
9356;This is what i had before that worked just fine
9357;Lets eliminate points of error one by one to figure out what went wrong
9358;try what i have
9359;StripPrefix is for the url prefix
9360;also does the last slash affect anything?
9361;Dunno
9362;url comes /uploads/stuff.jpg http.FileServer wants stuff.jpg
9363;@JohnnyTheSmith try this though
9364;He has
9365;> Any ideas? ??? Anyone have experience with this? Would appriciate the help
9366;if you prefix /uploads only it will pass to FileServer /stuff.jpg
9367;you gotta wait more than 3 minutes fam
9368;@Ainsley you might get better luck asking once this convo is over
9369;neediness is not endearing
9370;nor is forcing your way into an ongoing conversation
9371;@aditya probably
9372;if that's go html templates you probably can create a master template with {{ .innerTemplate}} and pass it
9373;@Ainsley go ahead I will try a few more things
9374;@JohnnyTheSmith did you see mine
9375;Johnny the end slash might be important
9376;I'm not sure
9377;someone using instrumentedsql ? ``` loggerSql := instrumentedsql.LoggerFunc(func(ctx context.Context msg string keyvals ...interface{}) { // how to access keyvals.duration ?```I dunno how to access duration from the interface
9378;Find which one has the key duration i guess
9379;Never seen this before
9380;I see no one with duration key
9381;Send godoc of what library this is
9382;Show what you see
9383;https://godoc.org/github.com/lunaduclos/instrumentedsql
9384;Whats in keyvals
9385;@Str≈ìm yours will result in the application not buildable
9386;"`internal/server/main.go:56:37: cannot use http.StripPrefix(""/uploads/ http.FileServer(http.Dir(uploadsFolder))) (type http.Handler) as type http.HandlerFunc in argument to r.Get: need type assertion`"
9387;Show the line of code
9388;"` r.Get(""/uploads/ http.StripPrefix(""/uploads/ http.FileServer(http.Dir(uploadsFolder))))`"
9389;Did you look at my code mate
9390;Does it have r.Get
9391;```r.Log(r.ctx OpSQLRowsNext err err duration time.Since(start))``````func (f LoggerFunc) Log(ctx context.Context msg string keyvals ...interface{}) {```
9392;@srm try printing keyvals and showing it
9393;Will give you an better idea
9394;okay using r.Mount will finally work
9395;```(EXTRA string=sqltxcommit []interface {}=[err <nil> duration 127.526¬µs])```
9396;thanks @Str≈ìm
9397;use handle not get
9398;"@srm you can loop through keyvals until you find one element of type string and of value duration"". The next one will be the duration"
9399;r.Handle will not work
9400;@aditya no Mount
9401;Not Handle
9402;r.Mount does
9403;My code shows Mount :robpike: pls use my code
9404;It does work
9405;yes
9406;yeah sorry whoops
9407;why does it work ü§î
9408;Does it serve the files properly?
9409;It does
9410;strum is chi gang! he knows
9411;I demand Uber Gopher Herder role
9412;Now I have to figure how to server wildcard at / to my single page application folder
9413;That is already wildcard
9414;:thinkingo:
9415;ok @Str≈ìm thanks
9416;Okay but I have to do it for / again to another folder
9417;You can change the folder served you know
9418;And then if that works I nevertheless have to server an /api endpoint which should not be redirected to that said wildcrad
9419;you don't need prefix in / just fileserve
9420;"```go spaFolder := filepath.Join(cwd client"") r.Mount(""/ http.StripPrefix(""/client/ http.FileServer(http.Dir(spaFolder))))```"
9421;this will not give me my react app index.html
9422;that one is the other way arround
9423;"r.Mount(""/ http.FileServer(http.Dir(spaFolder)))"
9424;assuming spaFolder already have the /client/
9425;okay this will work for index
9426;but not for when I use my spa Router /game
9427;this will not redirect to / in backend
9428;see this is the problem
9429;I was there about 1,5h ago with gin where I was told to use gochi
9430;Now I am here again. Same problem
9431;Yes welcome to the web. Youre gonna have to learn how to structure your endpoints
9432;This is unavoidable
9433;okay and how do I resolve?
9434;Grouping
9435;Learning
9436;I need to route everything meaning / to that spaFolder
9437;I dont have time to go through this entire thing
9438;exept /uploads/ and /api/
9439;Okay then structure your endpoints that way
9440;I dont see where the problem is here
9441;0 knowledge on how to
9442;"i want this prefix to go here and that prefix to go there""Then add the handlers to make it do that"
9443;"So does that mean I have to repeat this line : ` r.Mount(""/ http.FileServer(http.Dir(spaFolder)))` for every route I have in frontend?"
9444;<https://stackoverflow.com/questions/27945310/whydoineedtousehttpstripprefixtoaccessmystaticfiles> read that properly too
9445;Only for the prefixes than need to go elsewhere
9446;"```go r.Mount(""/ http.FileServer(http.Dir(spaFolder))) r.Mount(""/game http.FileServer(http.Dir(spaFolder))) r.Mount(""/player http.FileServer(http.Dir(spaFolder))) r.Mount(""/settings http.FileServer(http.Dir(spaFolder))) r.Mount(""/credits http.FileServer(http.Dir(spaFolder)))```"
9447;You define endpoint prefixes my friend
9448;is game inside spaFolder?
9449;I think chi choses the most specific route
9450;no it is a single page application
9451;it will route internally
9452;react.js reactrouterdom
9453;so you want a catchall index.html
9454;whatever goes to /game needs to go to index.html
9455;exactly except /uploads/ and /api/
9456;I would create a route that if there is a 404 redirect to index.html
9457;Oh interesting
9458;that might solve the problem
9459;so I google for gochi custom 404 handler then
9460;so if file is found it would just serve (like /uploads)
9461;if not it would serve index.html and spa would deal with it
9462;"```go spaFolder := filepath.Join(cwd client"") r.Mount(""/ http.FileServer(http.Dir(spaFolder))) r.Mount(""/game http.FileServer(http.Dir(spaFolder))) r.Mount(""/player http.FileServer(http.Dir(spaFolder))) r.Mount(""/settings http.FileServer(http.Dir(spaFolder))) r.Mount(""/credits http.FileServer(http.Dir(spaFolder))) r.Mount(""/scoreboard http.FileServer(http.Dir(spaFolder))) r.Mount(""/controller http.FileServer(http.Dir(spaFolder)))```Tried this real quick. This will not work"
9463;Whaddya mean
9464;You need to give us some info on what will not work means
9465;there is http.ServeFile
9466;well when broswing to any other than / the page will not be shown
9467;Help us to help you else youre making helping you very difficult
9468;what's the best way to read line's from a tcp connection
9469;I cannot manage to get it working. But I guess you guys have to be at least as fed up from answering my questions as I am fed up coding in go
9470;"```gor.NotFound(func(w.. r..,) { http.ServeFile(w,r paths.Join(spaFolder,""index.html"")))```"
9471;still maintain the / fileServer for assets
9472;That is not working. Sorry
9473;404 page not found
9474;"```gofunc Run(serverconf utils.Config orm orm.ORM) { cwd err := os.Getwd() if err != nil { logger.Fatal(""Unable to get current working directory"") } // // Mirror the router config from reactrouterdom // // r.Use(static.Serve(""/action static.LocalFile(""./client true))) // // r.Use(static.Serve(""/game static.LocalFile(""./client true))) // // r.Use(static.Serve(""/player static.LocalFile(""./client true))) // r.Use(static.Serve(""/uploads static.LocalFile(""./uploads false))) // // Routes and Handlers // if err := RegisterRoutes(serverconf r orm); err != nil { // logger.Fatalf(""Error registering routes: %s err) // } r := chi.NewRouter() r.Use(cors.Handler(cors.Options{ AllowedOrigins: []string{""""}, AllowedMethods: []string{""GET POST DELETE PUT PATCH OPTIONS""}, AllowedHeaders: []string{""Origin ContentType""}, ExposedHeaders: []string{""ContentLenght""}, AllowCredentials: true, MaxAge: int(12  time.Hour), })) r.Use(middleware.Logger) // r.Get(""/ func(w http.ResponseWriter r http.Request) { // w.Write([]byte(""ok"")) // }) spaFolder := filepath.Join(cwd client"") r.Mount(""/ http.FileServer(http.Dir(spaFolder))) uploadsFolder := filepath.Join(cwd uploads"") r.Mount(""/uploads/ http.StripPrefix(""/uploads/ http.FileServer(http.Dir(uploadsFolder)))) r.NotFound(func(w http.ResponseWriter r http.Request) { http.ServeFile(w r filepath.Join(spaFolder index.html"")) }) // Inform the user where the server is listening logger.Info(""Running @  + serverconf.ListenEndpoint()) // Print out and exit(1) to the OS if the server cannot run logger.Fatal(http.ListenAndServe(serverconf.ListenEndpoint() r))}```"
9475;```go2020/08/10 14:34:38 GET http://localhost:5000/game HTTP/1.1 from [::1]:39278  404 19B in 53.083¬µs2020/08/10 14:34:38 GET http://localhost:5000/favicon.ico HTTP/1.1 from [::1]:39278  200 3774B in 3.123885ms```
9476;does it reach on NotFound?
9477;does not look like it does
9478;"I inserted a logger.Info("""") is not written to console"
9479;I am trying to write small helper to apply Pagination for ES (olivere)Both SearchService and GetService has method Size(int size) but return different struct (SearchService or GetService)How can I create method which accept this two struct ? (I dont care what they return)  I‚Äôve tried with empty interface{}but got errorhave Size(int) searchSvcwant Size(int) interface {}https://play.golang.org/p/d_w0oIGSvbWCould you please give me any tips how can I achieve it ?
9480;well it can be most likely because header still 404?
9481;well I mean  did not reach there
9482;well then I will just cut it here and see if I can manage to get my /api/ routes working again
9483;I highly doubt it though
9484;just threw together a little linkedlistish handler system if anyone wants to take a look at it :0https://play.golang.org/p/Eejgs1yVU2H
9485;ServeFile has something with /index.html ü§î
9486;well and translating all my other route handlers is also a pain in the ass as I supposed it to be
9487;That is not working either
9488;@mimol the methods have to match exactly
9489;So all my /api/ routes are not working
9490;Take this for example
9491;"```go// Game routesfunc Game(cfg utils.Config r chi.Mux db orm.ORM) error { r.Post(""/api/game/:id/reset handlers.ResetGame()) r.Get(""/api/game/:id/state handlers.GameState(db)) return nil}```"
9492;and here are the handlers
9493;"```go// ResetGame will handle the request to reset a gamefunc ResetGame() http.HandlerFunc { return func(w http.ResponseWriter r http.Request) { logger.Error(""Not implemented yet"") w.Write([]byte(""Not yet implemented"")) }}```"
9494;@mimol which means from what youve shown you cant make a chaining wrapper like that
9495;"```go// GameState will handle the request to retrieve the games statefunc GameState(orm orm.ORM) http.HandlerFunc { return func(w http.ResponseWriter r http.Request) { body err := ioutil.ReadAll(r.Body) if err != nil { logger.Errorf(""Error reading request body: %+v err) } logger.Info(body) w.Write([]byte(""Not yet implemented""))  }```"
9496;not working  404
9497;so there is no easy way to achieve it ?
9498;(other than building complete wrapper)
9499;Correct
9500;Does it even need a wrapper? Olivere was pretty abstract last i remember
9501;So the chi router seams to be way more complicated than gin then
9502;no it doest but I would tought this Pagination.Apply could be nice
9503;I cannot get the easiest routes to work
9504;Its definitely not way more complicated
9505;:robpike:
9506;perhaps that's a you problem :P
9507;no offense of course just maybe it doesn't click as easily as gin
9508;well why does it not route than
9509;Yea your lack of understanding of how to do this is the issue
9510;Whaddya mean not routing
9511;So is my code above all that wrong that I not even can get a simple not yet implemented message going?
9512;Do you read the code snippets I am pasting?
9513;I dont see you adding the routes anywhere
9514;"```go// Run web serverfunc Run(serverconf utils.Config orm orm.ORM) { cwd err := os.Getwd() if err != nil { logger.Fatal(""Unable to get current working directory"") } r := chi.NewRouter() r.Use(cors.Handler(cors.Options{ AllowedOrigins: []string{""""}, AllowedMethods: []string{""GET POST DELETE PUT PATCH OPTIONS""}, AllowedHeaders: []string{""Origin ContentType""}, ExposedHeaders: []string{""ContentLenght""}, AllowCredentials: true, MaxAge: int(12  time.Hour), })) r.Use(middleware.Logger)  uploadsFolder := filepath.Join(cwd uploads"") r.Mount(""/uploads/ http.StripPrefix(""/uploads/ http.FileServer(http.Dir(uploadsFolder)))) // Routes and Handlers if err := RegisterRoutes(serverconf r orm); err != nil { logger.Fatalf(""Error registering routes: %s err) } // Inform the user where the server is listening logger.Info(""Running @  + serverconf.ListenEndpoint()) // Print out and exit(1) to the OS if the server cannot run logger.Fatal(http.ListenAndServe(serverconf.ListenEndpoint() r))}```"
9515;The RegisterRoutes function is as follwos:
9516;"```gofunc RegisterRoutes(cfg utils.Config r chi.Mux orm orm.ORM) (err error) {  // Game routes if err = routes.Game(cfg r orm); err != nil { return err } return err}```"
9517;Can you please delete the comments part
9518;Its already hard enough to read on mobile as is
9519;Theyre not making my life any easier
9520;Thanks
9521;Ok so what endpoint is returning 404
9522;every endpoint except /uploads
9523;Got any logs that show 404?
9524;I stopped working on the general / route
9525;as this will not work anyways
9526;`2020/08/10 14:59:32 GET http://localhost:5000/api/game/1/state HTTP/1.1 from [::1]:51332  404 19B in 17.263¬µs`
9527;This should return `func GameState(orm orm.ORM) http.HandlerFunc {` instead
9528;For my understanding
9529;"```gowalkFunc := func(method string route string handler http.Handler middlewares ...func(http.Handler) http.Handler) error {\t\troute = strings.Replace(route // / 1)\t\tfmt.Printf(""%s %s\ method route)\t\treturn nil\t}\tif err := chi.Walk(r walkFunc); err != nil {\t\tfmt.Printf(""Logging err: %s\ err.Error())\t}```"
9530;Bad spacing but can you include this just before ListenAndServe
9531;It'll show you all the routes
9532;```[OK] Binary server was created!INFO[20200810T15:01:56+02:00] [ORM] Database connection initialized. INFO[20200810T15:01:56+02:00] Running @ :5000 POST /api/game/:id/resetGET /api/game/:id/statePATCH /uploads/OPTIONS /uploads/PUT /uploads/DELETE /uploads/CONNECT /uploads/GET /uploads/HEAD /uploads/POST /uploads/TRACE /uploads/```
9533;I see I would have to trim on the allowed methods to /uploads/
9534;But the routes are in there
9535;Oh wait a sec
9536;I think :id matches the literal :id in chi
9537;it is `:id` ?
9538;Lemme check
9539;Replace :id with {id}
9540;Problem solved
9541;bruh
9542;:id is a gin thing
9543;now it matches
9544;> chi is harder than gin> is trying to use gin features in chi:robpike:
9545;:tosmurt:
9546;damn that was hard to find at least for me
9547;Its ok
9548;big brain
9549;Youve learned something now
9550;So amnd how do I retrieve the id then in the request?
9551;something with url.query right?
9552;where should i store sqlite dbs?
9553;`.local/share` `.cache`?
9554;@JohnnyTheSmith see `chi.URLParam`
9555;"chi.URLParam(r thing"") iirc"
9556;@skuz for?
9557;an activity monitor
9558;probably peruser
9559;`.cache` is generally regarded as ephemeral
9560;yeah
9561;.local/share is not available from go
9562;`.local/share/<app>` or `.config/<app>` should be fine
9563;unlike usercachedir
9564;wdym not available from go
9565;you can't get it from `os`
9566;so you'd have to choose something custom for windows and other stff
9567;`.config/<app>` would be UserConfigDir use that
9568;https://pkg.go.dev/os?tab=doc#UserConfigDir
9569;defaults to `~/.config` `~/Library/Application Support` and `%AppData%` on Unix Mac and Windows (respectively)
9570;and `$home/lib` on plan9 if that's something u care about lol
9571;well little success here. At least I can retrieve the game State again using the api
9572;On to way more of this madness tomorrow I guess
9573;Is there a method of http request to parse json?
9574;json from what? post body? just open a decoder on the body
9575;https://pkg.go.dev/encoding/json?tab=doc#NewDecoder
9576;well sqlite doesn't support plan 9 i think so i guess ndb would be better
9577;"is there any repsonse I can give back and concatenate variables like: `w.Write([]byte(""Deleted user: %+v userID))`"
9578;but not with w.Write obviously
9579;`fmt.Fprintf`?
9580;I want to give this back to the client as a http response
9581;eg `fmt.Fprintf(w Deleted user: %+v userID)`
9582;If I understand fmt.Printg right it will only print to console right?
9583;no
9584;note the Fprintf
9585;printf is just fprintf to stdout
9586;that prints to a file (or generally any writer)
9587;sprintf goes to string
9588;okay then I will have to construct all the response strings myself with ftm.Sprintf
9589;gin user the c.String(..) method to do this
9590;that was a little cleaner I think
9591;:thinkingo: why not use Fprintf tho
9592;using Sprintf > []byte > write seems excessive
9593;just use Fprintf
9594;oh I see
9595;Fprintf does write to a responsewriter
9596;yes exactly
9597;> `func Fprintf(w io.Writer format string a ...interface{}) (n int err error)`docs are helpful :^)
9598;that is working just fine thanks
9599;no prob glad I could help
9600;I know this would be hacky but could I use `runtime.Caller` to determine if something was called from an `init()`?
9601;:thonk:
9602;that is an incredibly weird question
9603;why do you need to know?
9604;‚ú® magic ‚ú®
9605;trying to make a tag to disable automatically registering plugins from an `init()`
9606;my condolences
9607;lol
9608;obviously runtime.Caller gives you the call stack
9609;you're at the point where you just have to write the code
9610;```0: 4796239 /tmp/sandbox973218965/prog.go:9 true1: 4796742 /tmp/sandbox973218965/prog.go:18 true2: 4396405 /usr/local/gofaketime/src/runtime/proc.go:203 true3: 4569984 /usr/local/gofaketime/src/runtime/asm_amd64.s:1373 true```neat that it goes all the way back into the asms
9611;i'm sure init would should up
9612;well that doesn't seem to give function names
9613;runtime.Callers should have function names
9614;good question
9615;Any suggsetions on cors?
9616;i missed the question
9617;`has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No AccessControlAllowOrigin header is present on the requested resource.`
9618;sure
9619;sounds like you need to set AccessControlAllowOrigin
9620;since that's what the error says
9621;"```go r.Use(cors.Handler(cors.Options{ AllowedOrigins: []string{""""}, AllowedMethods: []string{""GET POST PUT DELETE OPTIONS""}, AllowedHeaders: []string{""Accept ContentType""}, ExposedHeaders: []string{""ContentLenght AccessControlAllowOrigin Link""}, AllowCredentials: true, MaxAge: int(12  time.Hour), }))```"
9622;hmmm
9623;https://developer.mozilla.org/enUS/docs/Web/HTTP/Headers/AccessControlAllowOrigin
9624;oh also typo
9625;`ContentLenght`
9626;anyways
9627;looks like the ACAO header requires parameters?
9628;it can't just be present i guess
9629;I tried using this example but still not working: https://github.com/gochi/cors/blob/master/_example/main.go
9630;I changed if origin == to
9631;https://github.com/gochi/cors/blob/master/_example/main.go
9632;oh haha
9633;got it to work
9634;I return true in the function nontheless
9635;then it will work it seams
9636;@deezy I think this is reasonably cursed lol https://play.golang.org/p/3W6frJFlkbd
9637;thanks i hate it
9638;Now make it scan the whole stack
9639;you're welcome I hate it too
9640;@Str≈ìm good idea actually
9641;can somebody help me out with some templating stuff? specifically accessing components on a map
9642;"example `{{if index .installComponents Core""}}`"
9643;index sounds like slices not maps
9644;but they may have condensed the two together
9645;do the docs actually say index should work with maps?
9646;installComponents is an instance of struct like so ```gotype options struct { eventName string installComponents map[string]bool}```
9647;oh that's also your problem
9648;stackoverflow said that it should be able to
9649;lowercase names
9650;ah
9651;cheers
9652;you're ignoring errors too
9653;or you would've seen that
9654;> Now make it scan the whole stack@Str≈ìm done https://play.golang.org/p/3Qlhecp8Wlp
9655;i'm following this certain `select` example https://gobyexample.com/selectfor me it takes like 3.314seconds instead of 2sis it like a hardware limitation or such? i'm using ubuntu on wsl thoalso i don't understand why is there a need for a `for` loop over there
9656;show your actual code
9657;there's about ninety trillion possible factors
9658;if you're doing `go run whatever.go` then your code is being recompiled every time. that COULD be slow if you have a slow computer or a slow hard drive or
9659;it's the same as above i did a copy paste
9660;i mean
9661;Its a for loop because theres 2 timers
9662;oh
9663;Its that simple
9664;i'm doing `go run` yes
9665;How are you timing
9666;also
9667;`time go run select.go` probably :^)
9668;that example literally sleeps for two seconds minimum
9669;```greyhound@DESKTOP1PR0AHO:~/personal/learn_go$ time ./select received onereceived tworeal 0m2.034suser 0m0.000ssys 0m0.031s```yeah now it works legit
9670;so 2 WHOLE seconds of that is strictly accounted for
9671;yeah
9672;you just got a slow HD or something
9673;or a celeron :^)
9674;Or maybe wsl bad
9675;:^)
9676;or all of the above :^)
9677;On powershell there's Measurecommand or something to time the run
9678;also @tenshi is that a mona lisastyle 1pm :thinkingo:
9679;oh my dp
9680;it is saitama
9681;but yeah mona lisa style
9682;nice
9683;1pm  one punch man.i just got it
9684;yeah lol sorry
9685;opm
9686;yeah
9687;1300 :^)
9688;also yo sentry. you said it's awaiting twice. since one case gets satisfied in the first time we loop and get the second one?
9689;@Str≈ìm
9690;Yes
9691;One sleeps for 1s other sleeps for 2s
9692;okay thank you very much.
9693;hi everyone so I got a pretty noobish question so I just learned about mutexes and how they can help maintaining a variable across different goroutines but I came across a project and It seems like the function was using mutex but It's not ran using the go keyword (not a separate goroutine I think) so what's all this about? do I understand something wrong? what was the point of the mutex if It's not in a separate goroutine?here is the project article that I was talking about: https://medium.com/@nqbao/writingachatserveringo3b61ccc2a8edthanks!
9694;there's a lot of code in there
9695;can you be more specific
9696;oh right sorry about that
9697;None
9698;so I'm trying to understand the accept and remove function
9699;which is used here
9700;Each client connection is its own goroutine
9701;None
9702;None
9703;ah I get it
9704;I was under the assumption that you only need mutexes on the function that starts the goroutine
9705;so you basically needs it whenever It's called from any goroutines to synchronize the variable? Is that right?
9706;Basically
9707;if an item is being accessed from multiple routines and it's not thread safe you need a mutex
9708;with `errors.Unwrap` is the convention to return `e` or `nil` here?```gofunc (e Err) Unwrap() error { return / ? /}```
9709;(when there's no underlying error)
9710;I'd assume it's `nil`
9711;> if an item is being accessed from multiple routines and it's not thread safe you need a mutex@Moh gotcha this is the simplest explanation I could understand thanks!
9712;"I don\'t really get `context.Background()` where is it initiated? For example I get that you can add to a context like: `ctx := context.WithValue(r.Context() request_id nextRequestID())` and get from a context like: `r.Context().Value(""request_id"")` where `r` is a `http.Request`. But that is per request is `context.Background()` just a global thing?"
9713;https://golang.org/pkg/context/#Background> Background returns a nonnil empty Context. It is never canceled has no values and has no deadline. It is typically used by the main function initialization and tests and as the toplevel Context for incoming requests.
9714;it's an empty context
9715;nothing more
9716;ahh okay so it is initialised there an and then
9717;so for example... `func (c Client) RemoveObject(ctx context.Context` if a user is passing `context.Background()` they are effectively saying not bothered about what this process is up to. But if they passed in a reference i.e `ctx := context.Background()` they could then add timeouts and stuff?
9718;i don't think you can change contexts retroactively
9719;if they don't care they would use Background(). If they did they'd use an existing context or use WithDeadline()/whatever
9720;okay sweet makes sense
9721;what is the point of using `ioutil.TempFile` if I am going to have to remove the file myself anyway?
9722;not having to create the file by hand?
9723;is that not enough value?
9724;platform independent access to temporary files is nice
9725;i dont get it
9726;what is the difference between that and just `os.Create`
9727;okay here's a question
9728;where do you make tempfiles on windows?
9729;where do you make them on linux?
9730;what about even goofier distros i'm not aware of
9731;hm
9732;now you have to write code taht checks which OS you're on
9733;guesses what an apporpriate location might be
9734;so are tempfiles just files that get removed by the OS on restart?
9735;TempFile removes that responsibility from you
9736;uh
9737;there's no universal rule about what temp files are or how they're handled
9738;but it\'s tradition to have a place to put files you don\'t care about losing somewhere on your OS
9739;ah ok
9740;but if I do something like
9741;"`ioutil.TempFile("". example"")`"
9742;then would there really be any difference
9743;nvm I guess it is just for making the code more readable
9744;It expresses intent
9745;sure
9746;and not readability
9747;it's about
9748;i don\'t want to write code that checks what OS i\'m on and does special shit
9749;more indentation means more bugs
9750;>It expresses intentyes what i meant
9751;every if {} for{} etc
9752;is more room for bugs
9753;">""i don\'t want to write code that checks what OS i\'m on and does special shit isn\'t that what all the other standard library functions in go do anyway"
9754;yeah
9755;that's the point
9756;like os.Create is also platform independent
9757;the standard library gives you a platform independent API
9758;thus TempFile
9759;yep
9760;okay thank you
9761;is the bytes.Reader/Writer type buffered?
9762;they are buffers
9763;which is why there is no bytes.Writer it's bytes.Buffer
9764;but bytes.Buffer allows for reading as well no?
9765;yes
9766;cool
9767;thanks
9768;"I\'m looking at using golang for a personal webdev project becuase it seems like a good combination of optimized for low resource usage so I can run it on cheap DigitalOcean instances and tooling and ecosystem that won\'t drive me batty"". I was going to do serverrendered HTML since most of the site isn\'t that interactive bu it seems like most of the go webdev scene is tailored towards rendering JSON really really quickly. If I\'m looking to get something built with as little friction as possible am I going to be happier building a JSON backend and using a JS framework for the front end?"
9769;does the stdlib stuff like html/template not meet your needs?
9770;Not so much that it doesn‚Äôt meet my needs it just seems like serverrendered HTML has gotten more complicated than JSON.
9771;is `hugo` enough?
9772;can anyone take a look at my minimax algorithm and tell me what's wrong? https://github.com/fr3fou/tictactoeai/blob/master/ai.go
9773;if I have functions in functions.go and I want to access them in main.go how would I include them in main.go?
9774;they're available everywhere in the same package
9775;ah okay I have to export them? (cap first letter)
9776;the only things that live in file scope are imports everything else you define is in package scope
9777;if they're in the same package they don't need to be exported
9778;exporting is a packagelevel concept
9779;I see
9780;If I have a list of urls that I want to make constants (API endpoints) do they have to be in the same file that I want to use them in?
9781;no
9782;the only things that live in file scope are imports
9783;which file is otherwise totally irrelevant
9784;okay gotcha
9785;Hugo looks very nifty. But it‚Äôs not really a static site  it‚Äôs just that the most frequentlyaccessed pages aren‚Äôt going to get updated that often
9786;It‚Äôs one of those things where it needs to be interactive for a few users and the majority of the traffic is viewing their results
9787;in that case using json might be preferred since it's data that other people might want to access easily
9788;That‚Äôs a good point
9789;templates are good for rendering stuff like blog posts or smth
9790;json is better for transferring variable amounts of data and handling the rendering clientside
9791;either way would work really it's yr choice
9792;Yeah it‚Äôs definitely more structured data than blog posts
9793;This is probably an even worse question to ask but is there any reason to pick any of the frameworks over any other? Or should I pick the one whose API makes the most sense to me?
9794;or maybe even look at php?
9795;Could you maybe elaborate on what kind of content is going to be dynamic and how these users are going to modify it?
9796;yikes go is supposed to be better than php at this stuff xD
9797;you actually need a framework in PHP because pure PHP itself is bad
9798;but that's not the case with Go
9799;"Hello when I add this code into my proto file``` // @inject_tag: pg:""type:timestamptz,default:now()"" google.protobuf.Timestamp created_at = 20;```when I load my entity from the database I get the following error:```json: cannot unmarshal number into Go value of type timestamppb.Timestamp```Thank you for your help I I don\'t know how/where I can solve this issue ?"
9800;php itself is fine the problem is all the old shitty code that is available on the internet and the fact that people copy it
9801;and some of the popular frameworks for php are very capable e.g. laravel
9802;uh how do i change the console title in go?
9803;(on windows)
9804;Did the results on Google not work? Serious question i know they work on linux
9805;https://docs.microsoft.com/enus/windows/console/setconsoletitle :kek:
9806;yeah they didnt
9807;i found a way to do it on linux
9808;yeah that link doesnt help kek
9809;"neither does doesn\'t work"". if your question is actually I did my research tested some code and it\'s not working"
9810;it's better to lead with that than
9811;hey i know nothing and have tried nothing give me answers
9812;"yeah i tested the \\033]0; \\007 thing"
9813;but appearently it only works on linux
9814;yeah that's bash
9815;you have to make syscalls to do this in windows
9816;because it's windows :kek:
9817;Normally what we do
9818;Is we create our own title bar
9819;And hide the original
9820;So yeah fuck windows
9821;people that say things like this usually don‚Äôt know anything about windows ÔºöÔºâ
9822;:kek:
9823;I know it's the only OS that's shown me ads out of the box lol
9824;man windows is pretty fuckin bad when you start trying to do anything you give a shit about
9825;Windows is a weird one
9826;Feels like an OS made by OEMs for OEMs if that makes any sense
9827;"how do i set the title i\'ve done```golangvar ( modkernel32 = syscall.NewLazyDLL(""kernel32.dll"") procSetConsoleTitleW = modkernel32.NewProc(""SetConsoleTitleW""))``` but i dont know how to actually set the title"
9828;well
9829;let's think about this
9830;first off
9831;https://docs.microsoft.com/enus/windows/console/setconsoletitle
9832;this is a function call yes?
9833;yeah
9834;so that means you'd pass it some number of arguments
9835;now
9836;what do you think that might look like?
9837;what do you think a reasonable guess would be for the title bar of a window
9838;@cal if that's the case why don't you help
9839;the title
9840;no i mean in terms of code
9841;you have to call a function
9842;and you have to pass it something
9843;Fuck windows. All my homies hate windows
9844;what type do you think might adequately represent the contents of a window\'s title bar
9845;uh
9846;string
9847;None
9848;exactly
9849;ofc you're making syscalls which may require c strings and pointers and shit
9850;that's a nightmare i know nothing about
9851;is the function in here?
9852;https://godoc.org/golang.org/x/sys/windows
9853;I can't load the page because it's so big
9854;ctrl+fing only shows setconsolemode
9855;what about this package https://github.com/elastic/gowindows
9856;luckily because windows isn't a trash heap accumulated by hundreds of different oneoff patches to serve individuals personal needs if there's a missing syscall you can just load the relevant system dll and call it that way in pure go
9857;sorry i had to see whether i could successfully type windows isn\'t a trash heap
9858;that's what they did i think
9859;"```var ( modkernel32 = syscall.NewLazyDLL(""kernel32.dll"") procSetConsoleTitleW = modkernel32.NewProc(""SetConsoleTitleW""))```"
9860;yeah
9861;i just don't know how the function signature resolves
9862;"but it should just be foo(""whatever"")"
9863;i think
9864;yep it's really easy to do these types of things on windows which is why things like ebiten can be cgofree on windows but not on other platforms
9865;fascinating
9866;i'm impressed that go was able to make it that easy
9867;that‚Äôs not true
9868;nothing in that repo either :thinkingo:
9869;so far he still can't do it yet
9870;and you can completely make UI cgo free on Linux
9871;you just can't rely on libraries with preexisting abstractions like OpenGL
9872;> you just can't rely on libraries ~~with preexisting abstractions like OpenGL~~@_diamondburned_ ftfy
9873;I don't think anybody is trying though because it's just not worth the time
9874;you can though
9875;you can't dynlink without cgo on linux
9876;xgb
9877;not to mention specifically for this case all he has to do on Linux would be to print to the console
9878;which is much easier
9879;I honestly don't know what you're even on about anymore tbh
9880;go does not provide a syscall for dynamically loading shared libraries on linux because it is impossible to make it work in the general case
9881;you must use cgo to do it
9882;there is no alternative
9883;so uh
9884;but loading shared libraries literally have nothing to do with Ebiten requiring cgo
9885;again people use cgo because it's easier
9886;it's not impossible at all
9887;@__fastcall do you have to call a lot of windows api functions or are you only trying to set the window title
9888;im only trying to set the windows title
9889;the rest of it is using discordgo
9890;so
9891;if you‚Äôre willing to get your hands dirty you may have to do something to the string you pass to that set title function in order to make it a valid c string
9892;i don‚Äôt remember to tell you the truth
9893;> go does not provide a syscall for dynamically loading shared libraries on linux because it is impossible to make it work in the general case@zephyrtronium curious if youve a link
9894;https://github.com/golang/go/issues/18296
9895;but then if memory serves you have to pass it as an unsafe pointer so that it doesn‚Äôt get messed with by go internally
9896;and that should be enough
9897;from what I've read `_UNICODE` can do either ASCII or UTF16
9898;so I'm trying to see if Go has _UNICODE for either
9899;probably former would make more sense
9900;you can also probably do something like `system` in c to set the title but that‚Äòs gross
9901;https://softwareengineering.stackexchange.com/questions/194764/whatislpctstr
9902;oh nvm i see SetConsoleTitleW
9903;if he‚Äôs calling the W it‚Äôs 16
9904;yeah
9905;you'dp robably want SetConsoleTitleA
9906;yes
9907;i agree with that
9908;you can reference this too https://medium.com/@justen.walker/breakingalltherulesusinggotocallwindowsapi2cbfd8c79724
9909;if you actually have to do real windows api work in go you might be better off choosing another language tbh
9910;oh yeah this again
9911;it‚Äôs kinda trashy for windows specific things
9912;:kek:
9913;windows
9914;and the sys call interface is gross
9915;"the only windows api thing i gotta do is set the title ;;"
9916;@deezy i don‚Äôt think you know anything about windows :)
9917;damn deezy
9918;you just got rekt bud
9919;is there an easy way to remove flags and arguments to those flags from the `os.Args` slice?
9920;you can think whatever you like
9921;@cal I don\'t think calling people out and saying they don\'t know anything about anything is rude and gets nobody anywhere
9922;definitely not gonna change my opinion on windows
9923;cause i've used it
9924;i've lived the nightmare
9925;"```govar ( modkernel32 = syscall.NewLazyDLL(""kernel32.dll"") procSetConsoleTitleA = modkernel32.NewProc(""SetConsoleTitleA""))title := this is a title\\x00""ptr := &title[0]r1 _ err := procSetConsoleTitleA.Call( uintptr(unsafe.Pointer(&title[0])),)if err != syscall.Errno(0) { return 0 err}return syscall.Handle(r1) nil```"
9926;@__fastcall try that
9927;fixed
9928;fixed again lol
9929;fuck
9930;fixed again again
9931;aight
9932;> if err != syscall.Errno(0) {gives me a syntax error: nondeclaration statement outside function body
9933;"i changed the other ones so they would work but not sure to to fix this one```golangvar title = this is a title\\x00""var ptr = &title[0]var r1 _ err = procSetConsoleTitleA.Call( uintptr(unsafe.Pointer(&title[0])),)if err != syscall.Errno(0) { return 0 err}return syscall.Handle(r1) nil```"
9934;the idea was to have all of it in a function
9935;hence `return`
9936;oooo
9937;oops
9938;yeah i copypasted it xd
9939;cannot take the address of title[0]
9940;ü§î
9941;>is there an easy way to remove flags and arguments to those flags from the os.Args slice?follow up: I am trying to write a program which takes a command and some arguments for that command to perform on from the command line. so normally what I would do is switch over `os.Args[1]` (because that is where I expect the command argument to be) but the problem is that the user can also pass in some flags which would change where the command argument appears in the slice so what is the best way to figure out the index where the flag arguments end?
9942;use flags.Args()
9943;"> cannot take the address of title[0]@__fastcall try `title := []byte(""this is a title\\x00"")` instead"
9944;the flags package literally has a function for anything passed in that isn\'t an explicitly recognized flag
9945;i could have sworn there were functions in x/sys/windows for doing string <> cstring/wcstring conversions but i can't find them
9946;https://golang.org/pkg/flag/#Args
9947;too many arguments to return have (number error) want ()
9948;the standard library is your friend!
9949;too many arguments to return have (syscall.Handle nil) want ()
9950;that means you're doing `return something,somethingElse` when the function doesn't have return types
9951;oh yeah nvm
9952;@deezy does `flag.Args()` contain the name of the program as its first argument?
9953;try it and see
9954;if it does it'd be easy to work around that
9955;once you let `flag` extract the actual flags
9956;yeah I tested it doesn't
9957;thanks
9958;yeah flag is great
9959;"```gofunc setTitle() {var ( modkernel32 = syscall.NewLazyDLL(""kernel32.dll"") procSetConsoleTitleA = modkernel32.NewProc(""SetConsoleTitleA""))title := []byte(""this is a title\\x00"")ptr := &title[0]r1 _ err := procSetConsoleTitleA.Call( uintptr(unsafe.Pointer(&title[0])),)if err != syscall.Errno(0) { return 0 err}return syscall.Handle(r1) nil}```wait where am i going wrongtoo many arguments to return have (syscall.Handle nil) want ()gotoo many arguments to return have (number error) want ()"
9960;> that means you're doing return something,somethingElse when the function doesn't have return typesidk what that means uh
9961;` return 0 err`
9962;this
9963;you are returning things
9964;`func setTitle() {` specifies a function named `setTitle` with no arguments and no return values
9965;in a function where there are no return values
9966;I am starting vscode as a new process and running it and waiting for it finish before moving on however when I already have vscode open before running the program it just opens the file that I am passing as an argument to vscode in a newtab in the already existing process and the program doesn't wait for vscode to finish. Is this expected behaviour?
9967;i believe so yes
9968;but what is happening?
9969;why is it not waiting for vscode to finish?
9970;do I need to use locks with channels if there is a chance two goroutines may send or receive on the same channel etc
9971;channels have internal locks
9972;only one read/write can happen at any one time
9973;channels are made for concurrent communication
9974;@ikieMee8 for what?
9975;ohh so I do not need to implement anything myself in terms of lock's nice
9976;@Deleted User it handsoff to the other process i guess
9977;and then the one you spawned exists
9978;so technically it did wait for vscode to finish
9979;is there way to avoid this?
9980;keep it from passing it to the other process?
9981;nvm Ill just look this up myself
9982;thanks
9983;try `code n`
9984;the help says that forces a new window although not sure whether that will also mean a new process
9985;hmm no it keeps it in the same process
9986;trying to do `go get golang.org/d/go1.14.7` works successfully but I can't run `go1.14.7 download` I'm using the fish shell is this a problem with it?
9987;ah nvm I can install it from apt using the `ppa:longsleep/golangbackports` repository
9988;hey guys
9989;"```gorightclick.NewButton(""Save As func(g Globals w Window a Attachment) { v ok := a.(ImageViewer) fmt.Println(v ok) if ok { path err := dialog.File().Filter(""Image (png) png"").Title(""Save Image"").Save() if !strings.HasSuffix(path .png"") { path += .png"" } if err == nil { rl.ExportImage(rl.GetTextureData(v.Texture) path) v.Path = path v.Saved = true } } })```"
9990;I'm trying to convert an interface to a different type
9991;any idea as to what i'm doing wrong? it seems to always be false when i try a.(ImageViewer)
9992;Attachment is the interface and ImageViewer is a struct that implements the interface
9993;matches the interface?
9994;well it's not a `ImageViewer`
9995;like fits it's functions and what not
9996;asserting to a struct has to be the exact underlying struct
9997;not another struct that implements the interface
9998;ah okay any idea how i can see if it the struct implements the interface?
9999;maybe you'd be better off extending attachment and asserting to another interface
10000;All ImageViewers are Attachments but not all Attachments are ImageViewers
10001;yeah i'm trying to check if the attachment is an imageviewer
10002;so i can access imageviewer specific things
10003;well that's what that does
10004;`var x ImageViewer = (ImageViewerImpl)(nil)`
10005;also switch `if ok {` to `if !ok {` and move everything out of it
10006;no need for all that indentation
10007;hm okay i'm still a bit lost though
10008;taking what sentry said would it be something like this?`var x ImageViewer = (Attachment)(nil)`
10009;and just checking is x is nil?
10010;since i need imageviewer to be a pointer
10011;ImageViewer is an interface no?
10012;then it doesnt need to be a pointer
10013;nono imageviewer is the struct
10014;aaah
10015;attachment is the interface
10016;`var x Attachment = (ImageViewer)(nil)`
10017;this is how you make sure it implements Attachment
10018;okay but what about changing the variable from attachment to that type once i check if it implements it?
10019;you can\'t just change it magically
10020;if Attachment's underlying type isn't ImageViewer then that's that
10021;hm would i be able to create a new variable from that?
10022;`var v struct = interface{}.(struct)`
10023;like this but with actual variables
10024;Yes it'll just panic if the struct's not the underlying type
10025;```v := x.(ImageViewer)```
10026;will the generics act like C++ templates or Java/C# generics?
10027;probably neither
10028;i would say neither because go doesnt have inheritance
10029;the proposal is pretty detailed
10030;unless you wanna detail what you mean by either
10031;and it's very specific about its type theory
10032;generics will be...parametric typing
10033;i believe is the technical term
10034;Ah I see
10035;That's very cool
10036;so not templates or macros
10037;or anything like that
10038;it's go it's going to be deliberately painfully minimal
10039;I tried to read a lot about generics but I don't understand the point
10040;imagine this
10041;write me a function that will apply a function to a slice of values and return another slice while maintaining type safety
10042;can't use interface{}
10043;Oh
10044;yeah
10045;type safety
10046;is the main thing
10047;So it's useful if you're trying to handle different types at the same time and trying to keep type safety
10048;yep
10049;it\'ll let you write generic container types
10050;and functions that don't necessarily care what they're operating on so long as it's consistent
10051;I always passed multiple argument structs and checked if one was empty
10052;Your question made it so clear
10053;I spent an hour trying to figure out the point
10054;map() is one of the use cases i'm excited for
10055;functional programming is great
10056;a well designed program decomposes into a series of map() calls
10057;```rustenum Result<T E> { Ok(T), Err(E),}```
10058;T and E are generic types
10059;it doesnt care what T or E are
10060;wait are we getting that too?
10061;enums would be hot
10062;"but if you have an `Ok(""text"".to_string())` you know that the T is of type String"
10063;nah this is rust example
10064;aw beans
10065;> enums would be hot@deezy agreed
10066;i was excited to see the end of `(Thing error)`
10067;i really want discriminate unions but they cant decide on what the default value should be üôÑ
10068;i think that was the main issue
10069;interesting
10070;https://github.com/golang/go/issues/19412
10071;thats a good point
10072;what IS the zero value
10073;I'd say the zero of the first listed type
10074;:kek:
10075;duh
10076;so simple
10077;or nil I guess
10078;if they're interfaceish
10079;i don't like nil because that implies intrinsic pointer semantics
10080;which i'd like to avoid if possible?
10081;i like just
10082;hmm true
10083;first value listed
10084;yeah that just works
10085;100% predictable and deterministic
10086;static analysis friendly
10087;definitely not nil for it
10088;so if we had say a type like this:```gotype Result[type T] T | error```then```govar res Result[int]```would be `0`
10089;using the syntax from the proposal
10090;thing is you kinda have to make assumptions
10091;if you have a `var res Result[int]` and you do `res = 5` you know it's gonna be making an int
10092;but if you have `var res Result[interface{}]` and you do `res = (error)(nil)` it's gonna assign to the `interface{}` and not the `error`
10093;maybe it should work in order of interface specificity?
10094;er wait scratch that you're ensuring the value is an `error` with `(error)(nil)`
10095;and to ensure `interface{}` you would do `interface{}(nil)`
10096;substituting nil for whatever your value is if you have one
10097;if the value is typed then match exactly that type
10098;if it's untyped either use the first or use the most specific I'm not sure on that one
10099;first makes more sense I think
10100;yeah because `Result[interface{}](nil)` should be an `interface{}`
10101;> a well designed program decomposes into a series of map() callsCompletely agree functional programming goes a very long way and `maps` are very cool
10102;ah yes
10103;map deez nuts onto your face
10104;:kkk_polskidab:
10105;reminds me of the magical hell that is python oneliners  it's like 90% lambdas and inline loops
10106;me in rust rn
10107;it's lambdas aren't even good
10108;true I'm just saying conceptually
10109;but yea
10110;it would make json more typesafe like rust which is nice```gotype Number int | int32 | int64 / ...etc /type Value nil | bool | Number | string | []Value | map[string]Value```
10111;oh man that syntax spanned multiple lines looks so bad
10112;0/10 would `type Value union`
10113;yeah true
10114;I like `union` better too
10115;```gotype Value union { bool Number string []Value map[string]Value}```
10116;or sth
10117;yeah exactly
10118;you forgot `nil` but yeah
10119;open an issue time
10120;i don't like how they have nil tbh
10121;hm
10122;how else would you handle that? a `(Value)(nil)`?
10123;my brain hurts trying to think about union pointers
10124;i don't want nils is what I mean
10125;having to handle nils when I don't need to is meh
10126;been writing APIs that return both value and error recently
10127;since there's just not a need for pointer there
10128;The lack of null is one of the most fun parts of rust
10129;It‚Äôs really hard to get there from where go is right now though. You need a proper pattern matcher
10130;do I?
10131;I mean comptime `switch v.(type)` would be great
10132;how do you write a buffer to stdout?
10133;do you call read() repeatedly?
10134;is there an ioutil function?
10135;I feel like every time a Go discussion regarding Go 2 features happens people would always try and compare it to Rust and it would end up being a featurecreep fest
10136;@skuz bytes.Buffer?
10137;yes
10138;`buf.WriteTo(os.Stdout)`
10139;`os.Stdout.Write(buf.Bytes())`
10140;`io.Copy(os.Stdout &buf)`
10141;ok
10142;"consider:```gotype Foo[type T] Tfunc Bar[type T](v T) { fmt.Println(v)}v := Foo[string](nil)switch v.(type) {case Foo[int]: fmt.Println(""int v.(int))case Foo[T]: Bar[T](v.(T))}```"
10143;The thing is that works if the compiler yells at you for missing a possibility in your switch
10144;And that‚Äôs patternmatching üôÇ
10145;you get `T` passed down in the `case Foo[T]` similar to how `T` is available throughout a generic function definition
10146;is it bad to have go.mod or go.sum files on public githubs?
10147;I assume not for go.mod
10148;but not sure for go.sum
10149;Should push both
10150;it's good to have both
10151;Yeah commit both
10152;go.mod is for version locking go.sum is for checksums of go.mod deps
10153;okay so the functions and constants I'm trying to call in main.go are in other files in package scope. VSCode doesn't complain about missing them but when I run the program I get undefined
10154;^prob a newb question/issue
10155;ahh I see now. I have to supply all the files as arguments to go run
10156;yea
10157;the compiler will take you literally
10158;if you say `go run main.go`
10159;it will ONLY pull in main.go
10160;supply the directory instead
10161;`go run .`
10162;`go run .go` will not work if the glob includes tests
10163;right okay cool
10164;yeah a kind of unfortunate stumbling block
10165;everyone gets bitten by it at some point
10166;and then learns to get around it
10167;yeah I think I'm getting use to the concept of scopes etc in Golang
10168;the funny thing about go is how aggressively simple it is
10169;you\'re going to frequently find yourself thinking oh i need to do a new thing. that surely means there\'s a new syntax rule or keyword or pattern to learn
10170;and you're pretty much always gonna be wrong
10171;hey it's me again \\:P I've just tried to move my project to a better directory structure and am getting this build error anyone encountered it before? `build github.com/ractf/install/cmd: cannot load cmd/install/install: package cmd/install/install is not in GOROOT (/usr/lib/go1.13/src/cmd/install/install)`Full Source Code: https://github.com/ractf/install
10172;honestly go's filebased scoping is exactly what I've always wanted
10173;very few other languages work exactly like this and it's perfect for me
10174;yeah I like it
10175;a lot less struggling with imports
10176;what is concurrent and why is go apparently good at it?
10177;here's a good video on it
10178;https://youtu.be/LvgVSSpwND8
10179;thx
10180;it appears programming languages haven't agreed on operator precedence :robpike: python```python>>> 2 + 2 >> 12```go```gofmt.Println(2 + 2 >> 1) // 3```
10181;?go concurrency
10182;Kavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_TailorUnderstanding channels <https://www.youtube.com/watch?v=KBZlN0izeiY>  Sgt_TailorRob Pike  Concurrency Is Not Parallelism <https://www.youtube.com/watch?v=cN_DpYBzKso>  Skippy
10183;re: concurrency
10184;`fmt.Println(2 + 2>>1)`
10185;use a formatter
10186;or parentheses
10187;or both
10188;I am creating a temporary file which I then open inside some editor however the editor doesn't allow me to save the file because it is own by another process. How can I work around this?
10189;that's a weird editor
10190;Hey I am new to golang and am using a cms/api framework called ponzu. I have had success in the initial setup however I cannot seem to create a content type correctly.After running:`ponzu gen conten post title:string``ponzu build && ponzu run`The build succeeds however visiting the admin page does not show my content type.
10191;>that's a weird editori don't think it is a problem of the editor
10192;the OS just won't allow it
10193;do I have to use something like shared memory for this to work?
10194;I don't think I was clear enough: inside of my program I create a temporary file and then I start a new process to edit that file. But I can't edit that file because of the error I get above
10195;what's `^` in `fmt.Println(^1) // 2`?
10196;first time saw it as unary operator (xor as binary operator)
10197;It's a simple bitwise complement what you might see as `~` in other languages
10198;thanks found it here https://golang.org/ref/spec#Arithmetic_operators> ^x bitwise complement is m ^ x with m = all bits set to 1 for unsigned x> and m = 1 for signed x
10199;@Deleted User just windows things
10200;you probably want to close the file handle you have before launching the subprocess
10201;ü§¶\u200d‚ôÇÔ∏è
10202;thanks
10203;bruh
10204;I thought he uses ioutil's
10205;wait so two processes can't have the same files open in windows
10206;yes
10207;:thonk:
10208;at least not if you don't set the file sharing flags
10209;https://docs.microsoft.com/dede/windows/win32/api/fileapi/nffileapicreatefilea
10210;what do the `A`s at the end of winapi functions mean
10211;also thanks
10212;it means it takes char[]
10213;as opposed to the `W` that takes wchar_t[]
10214;https://docs.microsoft.com/enus/windows/win32/intl/unicodeinthewindowsapi
10215;ah ok thanks
10216;wait if i have a file opened and perform a write system call on it does it write the changes to disk? nvm
10217;so
10218;`defer rows.Close()`
10219;thows invalid memory address
10220;the whole point is to just close the rows just in case
10221;:KM_Dorime: how do i not error on that
10222;and just ignore the fact that there was a nil pointer if there was
10223;i dont care if there was im handling for if there isnt
10224;well
10225;invalid memory address means that `rows` is nil
10226;which means something went wrong
10227;that you ignored
10228;no it doesnt
10229;its good if rows is nil
10230;im handling for if it isnt nil
10231;it
10232;really isn't
10233;just in case
10234;you aren't
10235;wym
10236;let's take a step back
10237;copy and paste the exact error message you get
10238;i understand
10239;just do that
10240;yes i understand that go will error if a nil pointer is not handled
10241;how do i go around that
10242;no i mean
10243;paste the error
10244;the exact actual error
10245;im not sure you are understanding the simplicity of this issue
10246;i could say the same
10247;i don't have to try to help you if you aren't interested in cooperating
10248;i really do want to help
10249;```GO```
10250;but
10251;right i KNOW why this error is happening
10252;im not a begginer anymore
10253;```2020/08/10 19:52:23 http: panic serving 127.0.0.1:49318: runtime error: invalid memory address or nil pointer dereference```
10254;okay
10255;my question is if i can just avoid go from caring about the nil pointer
10256;:KM_Dorime: i do not care there is a nil pointer i wanna keep it clean `if err != nil` i dont want
10257;i mean
10258;i just wanna place rows.Close there and not care about any possible error
10259;the whole problem is
10260;you have a nil pointer
10261;so you can\'t say  idon\'t care if i have one
10262;im not using the nil pointer anywhere
10263;but you are
10264;because you're getting that panic
10265;that's literally what that panic means
10266;:KM_Dorime: im just gonna make a wrapper func that accepts rows
10267;hi
10268;why would you put a github folder then your username then the program name under the src folder
10269;it seems like a waste
10270;because that's how dependencies work
10271;they're generally hosted somewhere on the internet
10272;no i mean
10273;its not on the internet tho
10274;sometimes no
10275;but 99% of the time yes
10276;im watching a go tutorial and he has it set up as /code/github.com/hisusername/appname/gofile.go
10277;yes that's old
10278;?go modules
10279;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
10280;in vscode
10281;because GOPATH
10282;and he got a bin and pkg folder
10283;but the methodology of import paths doesn't change
10284;?go structure
10285;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
10286;okay so these are a lot of different concepts
10287;uhh
10288;i just have mine as a folder then main.go
10289;yes and if you use modules you're fine
10290;ah
10291;modules and go v1.11+
10292;i think
10293;maybe 1.12+
10294;ah
10295;is there something like rusts cargo new'? like it will create a folder and a main.rs file like made with the correct file names and stuff does go have that?
10296;?go mod
10297;Using go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
10298;strongly recommend reading the documentation
10299;it super duper covers what you need to know
10300;I understand not a thing it says
10301;:KM_Dorime: ```GO// RClose : close rows ignore all errorsfunc RClose(rows sql.Rows) { err := rows.Close() if err != nil { return }}```
10302;unneccesary complication
10303;None
10304;idk man
10305;sql driver should not return error on rows.close and just not care(complaining about the lib lmao)
10306;it literally
10307;walks you through it
10308;step by step
10309;lmao
10310;if there is a specific step you do not understand
10311;we can try to work on that
10312;but
10313;yeah but idk what its doing
10314;ill do it tho
10315;In theo\'s mind rn how do i promise.resolve in Go
10316;hey riku
10317;no nevermind
10318;i mean
10319;that code doesn't do anything
10320;so
10321;of course it looks bad
10322;you check for an error and if there is an error you do nothing
10323;oh lmao
10324;i could just _
10325;i mean
10326;i had a brainded moment
10327;you should probably
10328;not
10329;ignore errors
10330;the point of that is just
10331;ok so rows.Next should close the connection once it reaches the end
10332;but just in case it doesnt for whatever reason
10333;or .scan errors out
10334;i wanna be able to defer the row close
10335;so it closes the db connection and sends it back to pool or whatever
10336;i dont care if it errors out the error doesnt mean much to me.in fact the only time that error can happen is if the rows have already been closed
10337;im just handling for the small amount of cases where they dont close
10338;any better idea on how to do this
10339;:KM_Dorime:
10340;yeah when it says creating a new module i get completely lost
10341;just do `go mod init modname`
10342;like i dont know what its doing
10343;modname can be whatever you want the program to be
10344;why not just consider closing the rows and scanning inseparable
10345;and not try to split the two behaviors
10346;since that's the contract of the API
10347;just defer
10348;wait can you access the rows after you close them?
10349;:stare:
10350;as in what are you doing where you need this obscure behavior
10351;im not sure you can access rows once you close them
10352;idk what you're doing
10353;you can't but you should be scanning them out anyway
10354;not sure i understand
10355;I'm not sure what you're doing: why can't you just close every time?
10356;what situation can you not do that in
10357;```GOerr := rows.Scan(&file) if err != nil { return nil err }```
10358;this might be poor code writing
10359;:stare:
10360;ok this makes no sense i made a .mod file but it doesnt explain what it does
10361;okay then close the rows outside the loop right? unless there's something else here that I'm missing
10362;that returns the whole function
10363;returning before the rows.Next loop would make rows.Next nil
10364;oh
10365;like it is just saying to do stuff and saying stuff i do not understand at all in return
10366;and doing it after wouldnt close the conn
10367;yes sorry just do `defer rows.Close()`
10368;and ignore the error
10369;yeah just defer
10370;i did that
10371;nil pointer
10372;:stare:
10373;defer after err check on Query
10374;yes that
10375;wym
10376;sorry i thought you were doing something else more mysterious
10377;`defer _ = rows.Close()`?
10378;```gor err := d.Query()if err != nil { return nil err }defer r.Close()```
10379;I want to use golang for a desktop app to take advantage of concurrency. Should I just use electron for ui or is there a good gui package for go?
10380;how complex is the app?
10381;you can always go electron all the time if you don't care about poor performance
10382;Just making a video editor
10383;bruh
10384;Wut
10385;:5_bugcatstare:
10386;ah yes just making a video editor
10387;good luck
10388;video editor in Go
10389;A lite one
10390;probably harder than C++ for gui
10391;:KEKWlaugh:
10392;video editor in any language is going to be pretty hard
10393;javascript maybe easier
10394;though i don't know how you could use go's concurrency on this
10395;because cairo and other libs
10396;Hm
10397;js just uses the browser's api lol
10398;which may or may not be better
10399;photo editor in Go is actually easy
10400;canvas API for Go
10401;:KM_Dorime:
10402;if you need lower level access than what JS player APIs provide then it'll be hard
10403;Should I just use qt and c++ then?
10404;sure
10405;you can use Qt in Go but eh
10406;I don't think Go's concurrency will help much
10407;Qt is disgusting to use in any language
10408;:stare:
10409;Qt creator make me go :CBPoof:
10410;that's true
10411;im going to cry if i see the mike wazowski emoji again
10412;QT is a disgrace
10413;https://discordapp.com/channels/118456055842734083/118456055842734083/742553011842318396also back to other thing @_diamondburned_ you arent deffering on any condition isnt it gonna error out if it DOES work :5_bugcatstare:
10414;and rows does close
10415;if an error is returned then the rows aren't opened in the first place
10416;@weenie :mikebsd:
10417;@_diamondburned_ :sobs:
10418;someone actually drew that btw
10419;right BUT rows.Next will close it on the last iteration
10420;mike sully faceswap but it's the freebsd logo
10421;which means deferring it will just error out if they close on last iter :5_bugcatstare:
10422;idk what you're talking about
10423;"```go // Only show users whose permissions are lower than the current user. q err := d.Queryx(` SELECT  FROM users WHERE permission < ? ORDER BY jointime ASC permission DESC LIMIT ? ?`, p countpage count, ) if err != nil { return smolboard.NoUsers errors.Wrap(err Failed to get users"") } defer q.Close() for q.Next() { var u smolboard.User if err := q.StructScan(&u); err != nil { return smolboard.NoUsers errors.Wrap(err Failed to scan user"") } list.Users = append(list.Users u.UserPart) } return list nil```"
10424;god i hate the go sql api it's so painful and weird
10425;on the last iteration of q.Next it would close the rows automatically
10426;:stare:
10427;why is that an issue
10428;double close is fine afaik
10429;i double close a lot
10430;nope
10431;how
10432;defer rows.Close last time gave me a nil pointer
10433;it says GOBIN not set what that mean
10434;> Close closes the Rows preventing further enumeration. If Next is called and returns false and there are no further result sets the Rows are closed automatically and it will suffice to check the result of Err. Close is idempotent and does not affect the result of Err.
10435;> Close is idempotent and does not affect the result of Err.
10436;give full code
10437;you can call it multiple times
10438;my code literally works all the time w/ passing tests
10439;wdym
10440;bruh it works now WHAT
10441;oh
10442;:stare:
10443;wtf
10444;where's my emoji picker
10445;:mikebsd:
10446;ok it's back
10447;``` ‚ù§ ‚ñ∂ go test coverprofile /dev/null ./server/dbok github.com/diamondburned/smolboard/server/db 24.628s coverage: 75.2% of statements```
10448;wait im so confused in this video im watching he has a src/github.com thing and when he went out of the folder there was supposed to be a github.com/ whatever folder that has all his projects in it i am so confuz
10449;```GO defer rows.Close() if err != nil { return nil err }```the order matters even tho err never errored out this time
10450;huh
10451;dude
10452;i literally told you to defer after the err check
10453;:facepalm:
10454;i didnt realize that mattered since i already know that error was nil in that query
10455;i verified it worked so i didnt think that mattered
10456;also i should probably switch to community Oracle or Postgres since i should be using connection pooling for my Bot considering how many queries its gonna have most likely
10457;ü•¥
10458;MySQL known to be shit with pools
10459;sure
10460;i wouldn't recommend oracle
10461;because it's oracle
10462;:BCS_PepeLaugh: i get free license because my dad works at a bank as a dev that uses them
10463;he has a non support but still enterprise key
10464;dont think i care about procedures tho so ill prob use postgres
10465;doesn't pg also have that
10466;it does but oracle is heavier
10467;how is that better bruh
10468;actually not sure which one is lighter of a db
10469;i've never used anything good from oracle so i'd say pg
10470;i know maria is lighter than pg
10471;aite
10472;actually which one is probably faster with thousands of queries per second is another factor
10473;but pg works for people so it will prob work for me
10474;:stare:
10475;it probably doesn't matter for a discord bot
10476;:mikebsd:
10477;yeah lol
10478;sqlite go brr
10479;I know i just scale up beforehand
10480;cough cough https://dqlite.io/ cou ghfsdhghsg
10481;am building BIG multipurpose multifeature bot with minigame
10482;so
10483;:5_bugcatstare:
10484;IF it gets popular i wanna be prepared
10485;for max performance
10486;nothing is ever as easy as it looks
10487;:stare: making a discord bot in Go is way easier than it looks
10488;its hard for the first few days and then its all just self explanatory and my brain can output code that i will write down and it will just work most of the time first try
10489;that might just be on Go being Go because this is the language where that happens alot
10490;actually connection pooling was easier than it looked after looking at it in Go sql driver
10491;i thought i would have to write my own implementation but this just does it for you
10492;:BCS_PepeLaugh:
10493;> actually not sure which one is lighter of a db@Riku just check with these  BoltDB LevelDB LmDB
10494;those aren't sql bruh
10495;though bbolt (with a double b) and badger are pretty nice
10496;:KM_Dorime: id prefer to have sql and id prefer to have a seperate database server which is backed up every 2 days or a week to an offsite S3 container
10497;badger has been a bad time for me
10498;i don't know why
10499;bruh
10500;i wrote my own db abstraction and just used that
10501;so i never import any badger in my code
10502;it gives me back invalid memory one time ate all my cpu refused to compact the log on disk
10503;https://godoc.org/gitlab.com/diamondburned/nixie/db
10504;oh wtf
10505;i don't know what happened or if i was doing something wrong
10506;but it was not a good time
10507;wait i think it ate all my ram once but that hasn't happened after a semirewrite
10508;lol
10509;did you try bbolt?
10510;not a good time!!
10511;no but I've heard good things about it
10512;there's also a keyvalue database ORM lol
10513;but it's eh
10514;i used badger because I had this sequential log and it seemed like a good use case
10515;too much abstracting
10516;but the implementation is apparently sketchy
10517;interesting
10518;maybe it's better now
10519;:KM_Dorime: should i use ORM alot of my stuff has alot of obscure sql stuff like NOT IN array impls and a bunch of stuff with left and inner joins and stuff
10520;its more advanced queries than just getting one piece of data from a table
10521;would orm with with that?
10522;i wouldn't recommend it
10523;there's no really good orms in go
10524;yeah
10525;they're all kind of funny
10526;you could try sqlc for pgsql though
10527;it generates go code from sql
10528;hmm
10529;like dumb crud code
10530;ill probably just stick with straight sql i write myself
10531;:BCS_PepeLaugh:
10532;not in and joins are probably not that obscure
10533;that said
10534;yea i just use sqlx
10535;i wrote a small abstraction over it that uses transactions
10536;sqlx better than the gosql driver?
10537;the obscure shit is like windowing queries
10538;sqlx wraps on stdlib database/sql
10539;yeah i use that one
10540;it gives you stuff like StructScan
10541;"```go for q.Next() { var u smolboard.User if err := q.StructScan(&u); err != nil { return smolboard.NoUsers errors.Wrap(err Failed to scan user"") } list.Users = append(list.Users u.UserPart) }```"
10542;:stare:
10543;"```gotype UserPart struct { Username string `db:""username json:""username""` JoinTime int64 `db:""jointime json:""join_time""` Permission Permission `db:""permission json:""permission""`}type User struct { UserPart Passhash []byte `db:""passhash""`}```"
10544;huh
10545;aite
10546;this looks nice
10547;ima use it
10548;:BCS_PepeLaugh:
10549;looks ALOT easier
10550;there's also sqlx.In
10551;what does that do
10552;generates IN queries from slices
10553;:catahhhhhhhhhhhh: hmm
10554;i feel like if i used sqlx my database/middleware.go file would be like 200 lines shorter
10555;:KEKWlaugh:
10556;:kekd:
10557;bruh
10558;talking of database middlewares
10559;this is really nice
10560;```gofunc (m Middleware) auth(h Handler c http.Cookie w http.ResponseWriter r http.Request) { var v interface{} var s smolboard.Session err := m.db.Acquire(r.Context() c.Value, func(tx db.Transaction) (err error) { // Call the given handler with the transaction. v err = h(Request{r w &m.up tx}) s = tx.Session return }, )```
10561;basically start a transaction on each request (that needs one) lolmao
10562;:catahhhhhhhhhhhh: or you could just use postgres and enable the option for every query to be stored in a transaction log
10563;bakoop
10564;my middleware not much of a middleware i just dont wanna grant individual things access to the db object directly
10565;much rather abstract that
10566;also makes shit cleaner
10567;nah i just want each method that changes the db to be in a transaction
10568;so if a request fails everything gets an easy rollback
10569;ah
10570;also calling multiple stuff won't subtly cause a data race
10571;OH i just realized what you are trying to do
10572;also iirc sqlite autoupgrades the tx if needed
10573;that is smart
10574;:5_bugcatstare:
10575;https://godoc.org/github.com/diamondburned/smolboard/server/db
10576;None
10577;that's not really the problem I wanted to fix but ok
10578;in fact each route of mine just calls a single transaction method
10579;so no that would solve absolutely nothing
10580;(Sorry was talking about something I was talking about hours ago. I'll come back when I'm not in the middle of another conversation)
10581;oh
10582;link it when you're back
10583;"how should I debug errors like cannot unmarshal json into struct field...""? I\'d like to find out with field is causing the error"
10584;it says which field right after
10585;yes but it doesn't go deeper into the structs
10586;println
10587;Hey whats the diffrence between
10588;os.exit 1 2 3 4 0
10589;https://golang.org/pkg/os/#Exit and https://en.m.wikipedia.org/wiki/Exit_status
10590;Inside a normal it statement say :```if 5 != 2 { Do something...}```Does the compiler is making two defferent temp. variables to compute the if statement or it just doesn't make any in space complexity ?
10591;And in the case of :```if x= 5 { Do something....}```Does it making a single temp. variable ?
10592;what the heck is if = 5
10593;X
10594;Sorry
10595;where's X
10596;and `if 5 != 2` gets optimized out
10597;because it's a constant false
10598;err
10599;constant true
10600;my bad
10601;> constant trueYeah
10602;Is it making any temp variables in any of the cases
10603;?
10604;no?
10605;why are you asking?
10606;"and what do you mean by making a variable""?"
10607;what do you expect making a variable to do?
10608;make a copy of the value?
10609;Let me give a example
10610;Wait
10611;basically i'm asking why it matters
10612;Say if a make a if statement with 6 different comparisons in it AndI make a if statement with a single comparison Will there be any difference at anything between them
10613;I am talking about speed or time complexity
10614;i know i'm asking why it matters
10615;what are you trying to do
10616;because in the low level what you just said doesn't really make sense
10617;also if you have to make an if statement then that's that
10618;> because in the low level what you just said doesn't really make senseOhk
10619;there's not really an alternative to an if statement
10620;Why that matters is ...
10621;Technically switch case
10622;But yes
10623;switch cases just boil down to about the same thing
10624;Yea
10625;If i loop over say a 1000 time in a iterable and checking two statements in a if each time i am iterating over it and i somehow got rid of a single statement would it any less space ?? Or it will be just the same
10626;oh it's the usual premature optimization
10627;why don't we find out
10628;> why don't we find outHow
10629;godbolt is how
10630;look at the assembly output
10631;ü§î
10632;Didn't quite get it üòî
10633;here's Go: https://godbolt.org/z/Ta1qGx
10634;https://tryitands.ee .
10635;Ok I'll look it up
10636;oh C code is wrong
10637;hold on
10638;https://godbolt.org/z/8bvMzn
10639;Go: ``` movq .Y(SB) CX cmpq .X(SB) CX jge main_pc34```
10640;C: ``` mov edx DWORD PTR [rbp8] mov eax DWORD PTR [rbp12] cmp edx eax jge .L3```
10641;so they're roughly the same
10642;whatever behavior Go has C also has
10643;ü§î
10644;Ok so you are saying that whatever i am asking it doesn't make any sense to the compiler ü•¥ ü•¥
10645;not necessarily
10646;all I'm saying is it doesn't matter what the answer is because
10647;"1. C does it; most other languages do something similar (save for bash or sth)"
10648;2. there isn't an alternative to `if` statements that would make a difference regarding what you say
10649;3. even if there are somehow allocations keep in mind that the stack exists
10650;"stack allocations are cheap; heap allocations are expensive"
10651;but this is going kinda offtopic
10652;Hmm ok i got what your trying to say no probs
10653;Thanks
10654;Youre worrying about whats probably a non issue @Mr.Makra
10655;Have you measured that it's an issue? If not dont worry about it yet
10656;I am just trying to figure out what its like in the very low level of the language @Str≈ìm
10657;That's fair enough
10658;And weather its any difference if i add more and more if statements if it gonna make any difference at all
10659;@Str≈ìm
10660;godbolt would be of great help then
10661;the answer to all your low level concerns
10662;is to just look at the asm output
10663;Hello gophers :).
10664;C is pretty good.
10665;> godbolt would be of great help thenYeah I'll dig deep into that in my pc @_diamondburned_
10666;Ok so the text on the right side I guess it uses that to compile the C code? I don't really understand this but that is my guess.
10667;Are you doing CGO?
10668;Nah I just clicked the link diamond sent.
10669;Go doesnt compile to C
10670;Seems to be C I don't think it's CGO.
10671;Yes I know.
10672;Include<stdio.h>
10673;Dah...
10674;Oh diamond linked C
10675;:facepalm:
10676;:micdrop:
10677;:GWcodezC:
10678;I think it is assembly code on the right side.
10679;I was comparing C and Go's asm output
10680;I need a revery proxy which use different certs for specific `tls.ClientHelloInfo.ServerName`.Hello Community I have some trouble with client certificates.I used github.com/julienschmidt/httprouter and than set the funcs in the `http.DefaultTransport` but these func didn\'t get called. (The only allow conenctions with client certificates)`&tls.Config.GetConfigForClient``&tls.Config.GetClientCertificate`https://gist.github.com/dhcgn/6d6d0a4e5450626676e20f6f4be78af4Some help would be appreciated üòâ
10681;@superloach https://play.golang.org/p/L3ptRHRyLlf
10682;Sad detection
10683;"```Gofunc (m Database) GetFilesAdmin(endp query string verified bool) ([]string error) { qstr := SELECT file FROM uploads WHERE verified = ?"" if query !=  { qstr += AND file LIKE \'%?%\'"" } rows err := m.db.Query(""SELECT file FROM uploads WHERE verified = ? verified query)```"
10684;this is technically a sql question
10685;but this will work right?
10686;can i put any amount of args in there even if there arent enough
10687;:stare:
10688;Try it it might work. If not then you will know where the error is and how to fix it.
10689;Hey guys has anyone used the opentelemetrygo library?
10690;"I have written this middleware:```gofunc Middleware(next http.Handler) http.Handler { return http.HandlerFunc(func(w http.ResponseWriter r http.Request) { ctx := propagation.ExtractHTTP(r.Context() Propagator r.Header) ctx span := global.Tracer("""").Start(ctx fmt.Sprintf(""%s %s r.Method r.URL.Path)) propagation.InjectHTTP(ctx propagation.New(propagation.WithInjectors(trace.B3{})) r.Header) next.ServeHTTP(w r) span.End() })}```And then within handlers I have for example:```go r.HandleFunc(""/trace func(w http.ResponseWriter r http.Request) { ctx := propagation.ExtractHTTP(r.Context() tracer.Propagator r.Header) _ span := global.Tracer("""").Start(ctx sub trace"") _ _ = w.Write([]byte(fmt.Sprintf(""%v r.Header))) span.End() })```"
10691;I feel like the injecting from within the middleware and extracting from the handler is a bit overkill? and there is probably a better way to share the context?
10692;using `r.Context()`
10693;does anybody use anything else than encoding/json in go?
10694;let's ignore jsonpb/protojson for now (those need proto.Message structs not interface{})
10695;accepts quoted/unquoted numbers for int64/uint64 types, encodes int64/uint64 as strings for JS consumption?
10696;Gob
10697;Ikeapack
10698;i'd still like to use json as the output format sorry for not being clear üôÇ
10699;seems both are aimed at some sort of binary encoding
10700;So you want a JSON encoder not using encoding/JSON?
10701;yeah sort of like what protojson is but not with a proto.Message
10702;Seems like a very odd requirement
10703;seems like common honestly JS has 53 bit percision ints and without fucking things up too much you'd like to encode them as strings
10704;but encoding/json is strict about decoding those
10705;so even if you tag hint with `,string` it will always only decode quoted literals then
10706;even PHP manages to have a compatible int64 type
10707;but JS is a bunch of clowns
10708;Can just create a custom type
10709;Quick question  `cacheRequest.logger = requestLogger` does this actually copy `requestLogger` byte by byte? or does it simply unwrap the nullable value?
10710;And implement Marshaler and Unmarshaler
10711;@Sgt_Tailor which unfortunately means i have to use that type end to end instead of the built in int64/uint64 gets messy when it comes to calculation and protobufs also don't have type aliases
10712;I can't just write `jsonInt64` type as a proto3 alias type to `int64` i think
10713;If you're using proto anyways why do you care about the JSON? You can create an alias in Go I guess
10714;Either way you're in a weird spot
10715;I use protos for internal APIs but I have a REST bridge to them. While I can use protojson to encode/decode JSON payloads in this case sometimes I need to encapsulate multiple API calls into one response which isn't a proto.Message anymore
10716;and specifically protojson is exactly that a loose decoder for quoted/unquoted numbers and a strict quoted encoder for int64/uint64 values
10717;basically I'd need protojson with an interface{} param üòÑ
10718;either that or I'll start using strings as ID types
10719;which is terrible and inefficient of course
10720;https://godoc.org/google.golang.org/protobuf/encoding/protojson
10721;this one yeah
10722;can't produce proto.Message üôÇ
10723;encoder.go: ```go case pref.Int64Kind pref.Sint64Kind pref.Uint64Kind, pref.Sfixed64Kind pref.Fixed64Kind: // 64bit integers are written out as JSON string. e.WriteString(val.String())```
10724;You wanted strings right?
10725;and the decoder similarly has an unmarshalInt for json.String
10726;yes
10727;basically this: https://play.golang.org/p/czaVZuQYM4
10728;but using built in types üò¶
10729;Doesn't the Marshal function I linked do that.
10730;it does not it takes a proto.Message which is practically unsatisfiable.
10731;needs an interface{} there
10732;basically I'd have to generate every struct ever from .proto files
10733;or at least those who get json encoded in any form
10734;I'd rather just use a different json package instead of adding more generated code
10735;fun fact I could even use `json.Number` as the type (which can read from quoted strings) but it doesn't throw an error on decode and you need to invoke a function call to get (int64 err) out of it again complicating the code too much
10736;> Sad detection@Sgt_Tailor wdym?
10737;that works exactly as intended
10738;er wait that's not the one that goes through the whole stack how is that working
10739;oh nvm it's not working
10740;there was a version a bit later that actually went through the whole stack and probably would've found that
10741;https://play.golang.org/p/3Qlhecp8Wlp
10742;ah I see it doesn't
10743;https://play.golang.org/p/E1vW5NMIkaH easy fix I don't think anything other than `init`s will contain `.init.`
10744;`init` package?
10745;shouldn't have the leading `.`
10746;anyone know a good demo of generating an image in go? I distinctly recall a playground being able to output image data but I can't for the life of me locate it
10747;Is that so? Then why does this panic https://play.golang.org/p/4seEseCQAQi ?
10748;(idk anything about this btw feel free to ignore me)
10749;well uh you're checking for `.main.`
10750;Well yeah
10751;But not in the main function
10752;the main function is `main.main`
10753;Oh it's negated
10754;Nevermind yeah
10755;I'm an idiot
10756;the full stack from `main.main` is ```main.mainruntime.mainruntime.goexit```
10757;ah no worries!
10758;on the other hand an anonymous goroutine in `init` looks like this```main.init.0.func1runtime.goexit```
10759;which has me fairly convinced that checking for `.init.` is sufficient
10760;Glad to be of service
10761;ü¶Ü
10762;quack
10763;"I use Traefik 2.0 and two docker containers to host one API (rest api) and one container to host a Next.JS application. When I hit tonyandre.co/api/v1/posts it returns 200 and the posts in my database with a latency of 2. But when I use getInitialProps and try to fetch at the same endpoint from tonyandre.co it returns 500 internal server error because of fetch error reason: connect ETIMEDOUT. Does anyone know why and have a clue how I can fix this?Web labels:```labels:  traefik.enable=true""  traefik.http.routers.tonyandre_web.rule=Host(`tonyandre.co`)""  traefik.http.routers.tonyandre_web.priority=1""  traefik.http.routers.tonyandre_web.tls.certresolver=le""  traefik.http.routers.tonyandre_web.entrypoints=websecure""  traefik.http.middlewares.tonyandre_web.headers.sslHost=tonyandre.co""  traefik.http.services.tonyandre_web.loadbalancer.server.port=3000""```API Labels:```labels:  traefik.enable=true""  traefik.http.routers.tonyandre_api.rule=Host(`tonyandre.co`) && PathPrefix(`/api`)""  traefik.http.routers.tonyandre_api.priority=2""  traefik.http.routers.tonyandre_api.tls.certresolver=le""  traefik.http.routers.tonyandre_api.entrypoints=websecure""  traefik.http.middlewares.tonyandre_api.headers.sslHost=tonyandre.co""  traefik.http.services.tonyandre_api.loadbalancer.server.port=4000""```"
10764;Seems more #offtopic but lets have a look
10765;Oh sorry about that @Str≈ìm üòÆ I can delete it ofc
10766;No problem
10767;Can you show the network tab in chrome pls
10768;So i can see the successful requests and the failed ones
10769;Yeah sure .. I just have to build the containers again üôÇ 2 sec
10770;If you go to https://tonyandre.co and https://tonyandre.co/api/v1/posts now it's up
10771;easier so you get what you need
10772;Am on mobile lol
10773;oh
10774;okok
10775;https://gyazo.com/a4211becac737f3a199f1ffe24e7b1c4 from the successful one.. the other one is still pending üòâ
10776;https://gyazo.com/2b6f52b8eef4423f139cc07db44c0fbd from the timedout
10777;and error message from the logs: FetchError: request to https://tonyandre.co/api/v1/posts failed reason: connect ETIMEDOUT 217.170.205.96:443
10778;Frontend log?
10779;yes
10780;Anything in traefik?
10781;2sec
10782;Dump the entire thing to hastebin
10783;With accesslogs enabled
10784;Yeah I need to enable that
10785;anything else than accesslog I should enable?
10786;Dont think so
10787;Oh how are you serving the nextjs stuff?
10788;I am using a docker container to serve the nextjs with Traefik as the reverse proxy
10789;Is npm or nginx running in the nextjs container?
10790;Im confused your screenshots show the api works but / doesnt
10791;Yeah the api works like a charm but when fetching from my NextJS application it gets timedout. I was just curious if I've configured the Traefik configuration wrong üòÆ
10792;So if hitting api directly its fine but from nextjs it isnt? :fellas:
10793;Yes üòõ
10794;And I am no frontend guy so this is me diving in a space I just do not like üòõ If I just could write everything in Go and be done with it I would be so much happier than all these npm packages and things üòõ
10795;Lul
10796;Ill have a look what the logs say once you have em
10797;yeah recreating the traefik container now and we should be good to go üòõ
10798;where do i set my gopath
10799;depends on what you're using
10800;your shell profile or some windows gui generally speaking
10801;@Str≈ìm just waiting for the request to time out üòõ
10802;Not much there I believe .. but here it is: https://hastebin.com/idazeralat.nginx
10803;removed my public IP that's all üôÇ
10804;I'm starting to believe that I need to see someone with an expertise in node/react/next because I can't see that this is a problem with Traefik or the API it self .. because the API works like a charm
10805;What has this ip 172.21.0.8
10806;@IRATEEE
10807;2sec
10808;That's the frontend
10809;Whats .3 and .9
10810;3 is a Wordpress blog I am hosting for someone and 9 is the api
10811;frontend is listening on 3000?
10812;yes and that\'s why I have traefik.http.services.tonyandre_web.loadbalancer.server.port=3000 on the traefik labels
10813;Weird that other stuff is working fine at that container
10814;Anything funky in that containers logs?
10815;this is the logs from that container: https://hastebin.com/vixunegolu.cs
10816;200 GET from /api/v1/posts are when you GET directly to the api
10817;the FetchError is when the frontend tries to GET üòÆ
10818;What is nextjs? Isnt it just another frontend framework?
10819;Or why is there npm running
10820;Why is the frontends container tryna make a request to the api :fellas:
10821;Isnt the browser supposed to make the request to the api?
10822;It's because the inital request is done by the server because it's basicly React with SSR. The rest of the requests would be done by the browser like it's done with React
10823;Aha
10824;And the ssr container can't request the api for some reason
10825;funkeh
10826;yeah üòÆ üòõ
10827;What happens if you exec into that container
10828;And curl the api
10829;good shout. I will try üòõ
10830;hi
10831;How can I get the response history in a redirect in net/http?
10832;or how can I check the response for every redirect
10833;This is strange @Str≈ìm .. same problem there.. it\'s like it cannot access the api from within the container```/src # curl https://tonyandre.co/api/v1/postscurl: (28) Failed to connect to tonyandre.co port 443: Operation timed out/src # curl tonyandre_api:4000/api/v1/posts[]/src #```The [] shows that it works
10834;is dig installed
10835;Whats a curl outside the container look like
10836;ping and traceroute time
10837;```powahusah1@tonyand:~/tonyandre.co$ curl https://tonyandre.co/api/v1/posts[]powahusah1@tonyand:~/tonyandre.co$```
10838;works like a charm
10839;outside the container
10840;"Hi there again I am trying to figure how to use gochi router to build up my routes. But somehow it is not behaving like I thought it would:```go router := chi.NewRouter() router.Use( some middleware here )  router.Route(""/ func(r chi.Router) { r.Mount(""/uploads/ http.StripPrefix(""/uploads/ http.FileServer(http.Dir(uploadsFolder)))) }) router.Route(""/api func(r chi.Router) { r.Get(""/ func(w http.ResponseWriter r http.Request) { w.Write([]byte(""ok"")) }) router.Route(""/ping func(r chi.Router) { r.Get(""/ handlers.Ping()) }) router.Route(""/user func(r chi.Router) { router.Post(""/ handlers.CreateUser()) }) }) return router```I would think I get something like:```goPOST /api/userGET /api/GET /api/ping /uploads/```But what I will get is:```goPOST /GET /api/GET /ping/PUT /uploads/CONNECT /uploads/DELETE /uploads/GET /uploads/TRACE /uploads/HEAD /uploads/POST /uploads/OPTIONS /uploads/PATCH /uploads/```So it looks like it will not group below api. Why is that?"
10841;@minish look at `http.Client.CheckRedirect`
10842;I need the response
10843;@JohnnyTheSmith inside router.Route you wanna reference r.Route not router
10844;Youre applying it to the top level router instead
10845;okay got that
10846;@Str≈ìm dig was not installed.. I installed bindtools which has the dig package this is alpine linux and still nothing üò¶
10847;typo it was. But if changing it to r. it will result in route `POST /user/` and not `POST /api/user` as i would suggest
10848;@JohnnyTheSmith show updated code
10849;@IRATEEE whats dig return for the domain?
10850;"```go // General routes router.Mount(""/uploads/ http.StripPrefix(""/uploads/ http.FileServer(http.Dir(uploadsFolder)))) router.Route(""/api func(r chi.Router) { r.Get(""/ func(w http.ResponseWriter r http.Request) { w.Write([]byte(""ok"")) }) router.Route(""/ping func(r chi.Router) { r.Get(""/ handlers.Ping()) }) router.Route(""/user func(r chi.Router) { r.Post(""/ handlers.CreateUser()) }) })```"
10851;You didnt fix it
10852;Look at everything inside the /api closure
10853;gives me this:```goGET /api/GET /ping/DELETE /uploads/POST /uploads/GET /uploads/TRACE /uploads/HEAD /uploads/OPTIONS /uploads/PATCH /uploads/CONNECT /uploads/PUT /uploads/POST /user/```
10854;Youre still referencing router
10855;Not r
10856;@minish https://golang.org/pkg/net/http/#Request.Response
10857;oh there !
10858;me dumb üò´
10859;üòã
10860;aaaah there we go
10861;thank you
10862;@Carson I need the response for every redirects
10863;like a redirects history
10864;`CheckRedirect` will be called for every redirect
10865;yes but I need the response
10866;And at the end its `via` parameter will contain every request that was made
10867;Look at what I just linked you
10868;:p
10869;CheckRedirect give the request
10870;Again: look at what I just linked
10871;Pro tip: read the documentation of what he linked
10872;Theres text there with useful information
10873;I do not understand
10874;`via` contains a list of requests
10875;Did you read what was linked
10876;The `Request` type contains a `Response` field. As the documentation notes that‚Äôs explicitly there for the purpose of looking at the response that caused the redirect request.
10877;```/ Response is the redirect response which caused this request // to be created. This field is only populated during client // redirects.```
10878;@Carson sorry
10879;https://golang.org/pkg/net/http/#Request.Response
10880;it move the page on top
10881;so I couldn't see the right part
10882;thanks
10883;Ok so I fixed it @Str≈ìm üôÇ Thank you so much for the help and patience though!
10884;I started thinking about how Docker containers works and they are not engineered to talk from one container to the host .. so that's the reason I could not curl from inside the container nor could the NextJs server fetch from the api  when using the domain. When I use the container hostname from all the interactions handled by the server it works and I can use the public url from all interactions handled by the browser üôÇ
10885;yeah internally you should only be using hostnames
10886;and docker will network things for you
10887;internal to the docker hosted applications that is
10888;Starting to get the hang of gochi and it's router. This is 1000 times better than gin
10889;chi is quite good
10890;Yeah but I thought by using the public URL it would be fine. But I was wrong üôÇ
10891;especially once you slow down and read
10892;Well at last I still have to figure how to server my spa react app through this webserver at /
10893;"I've been using chi a lot as well @JohnnyTheSmith; it's really good üôÇ But I found gofiber which is really close to express (I come from TypeScript) and it's blazing fast as well üòõ"
10894;so gofiber vs gochi?
10895;Thought public url would be fine too
10896;Doesnt sound right that it doesnt work
10897;For me.. I love the golang feeling of chi but it's easier for me to write using gofiber since it's almost identical to express üòâ
10898;After all you can ping google etc
10899;Yes I can ping everything but not the host :p
10900;Would've thought itd resolve to the hosts public IP and then it would work
10901;Tbh it should work
10902;Yeah because now I have another issue.. when I redirect to / it tries to fetch from the api again using my local hostname and I get An unexpected error has occurred.
10903;I mean.. wtf is this? :p
10904;It shouldn't be like this to be fair
10905;I can curl every domain in the world except my own from inside the container
10906;graphql server: Good idea? Bad idea? It looks like there are a bunch of options  is one clearly better or worse than the others? Or should I just pick the one that looks the most straightforward to me?
10907;@ImprobableSpork there are pros and cons with GraphQL apis and REST apis. If you can write a really good REST API I'd say it's going to perform even better than GraphQL üôÇ I love GraphQL but I love the performance of my REST apis üôÇ
10908;All the routing is just fine but does anyone know how to catch a route and redirect it back to / ?
10909;Oh we're using graphql successfully at work and I'm well aware of the pros and cons üôÇ I feel like for my project graphql is going to be a better API and if it gets big enough for the performance to be an issue I'll convert the hot spots to REST endpoints
10910;I'm curious about gospecific options because I really do not enjoy writing serverside code in JavaScript
10911;I'm trying to wrap my head around using `database/sql` particularly with `github.com/lib/pq`
10912;for concurrent usage I need to open multiple connections that makes sense
10913;but should I use `sql.Open` each time or `(sql.DB).Conn`?
10914;what's the point of graphql in a world that already has protobuf grpc and capnproto
10915;I missed it
10916;But go chi gang
10917;@ImprobableSpork for me the point where I just threw GraphQL a side was that I couldn't access the http writer within the resolvers which made it harder for me to have everything inside my GraphQL server (cookie handling for login jwt handling +++) .. I had to write new endpoints for logging in ++ which just made me write my whole API using REST üôÇ
10918;So .. personal preference I guess üôÇ Depends on how you want ur application to be written
10919;@superloach pretty sure it connection pools
10920;right right
10921;@sssilver most of the things you listed aren't comparable lol
10922;protobuf is just a serialization format
10923;I think capnproto too
10924;but then to get a `pq.Listener` I have to use a connection string again
10925;gRPC is remote procedure call
10926;no capnproto is a full blown RPC
10927;and that feels weird why can't I get one of those off a `sql.DB`
10928;Still just rpc
10929;@sssilver graphQL is still HTTP
10930;you can use capnproto and gRPC over HTTP no problem
10931;think of it as SQL for APIs
10932;Graphql lets you avoid over and underfetching as youd get with rpc/rest
10933;And reduces the amount of round trips needed
10934;Imagine you had users and posts and friends. With rest youd do a request for a user and then for their posts and then for their friends
10935;with RPC/REST HTTP you setup specific routes for specific data graphql let's you in theory set one route and just send queries to do what you want afaik anyway
10936;And you may get more fields and compute more on the backend than is needed for a particular page
10937;With graphql you can request everything at once and it done properly only compute what needs to be fetched
10938;it really is just SQL for APIs
10939;eg if returning post content is an expensive operation but you dont need post content you dont request the content field with graphql and get to avoid that computation
10940;But you can also write ur REST api to just give u specific data as well
10941;üòÑ
10942;while you can add options to routes to do that and just create options/routes for all the conditions for your data this approach doesn't scale
10943;the more api end points and conditional fetching you have the more a pain of the ass it is to maintain it all
10944;@IRATEEE if you wanna specify fields in query params or something sure
10945;Ive found that becomes very ugly very fast as the data shape becomes non trivial
10946;Yeah but I am on the GraphQL wagon but it's also overkill when it comes to small projects üôÇ
10947;graphQL offers all that capabilities out of the box for you it excels at APIs with a lot of different types of data requests personally haven't had a project that needed graphql yet
10948;the query style is just yuck
10949;"```go spaPath := http.Dir(spaFolder) fs := http.StripPrefix(""/ http.FileServer(spaPath)) router.Get(""/ http.HandlerFunc(func(w http.ResponseWriter r http.Request) { _ err := os.Stat(fmt.Sprintf(""%s spaFolder) + r.RequestURI) if os.IsNotExist(err) { logger.Error(""Hitting the condition"") } else { fs.ServeHTTP(w r) } }))```I have this code bit. Whenever I browse to something not im my client release folder I can see the logger logging the Text Hitting the condition"". How would I redirect the request to / instead of let\'s say /game which is not existing?"
10950;reminds me of callback hell days
10951;I know I can use `pq.NewListener` with a conn string to get a `pq.Listener` but would it not be possible to get that from an `sql.DB`? I'd like to avoid keeping the conn string in my database abstraction
10952;But this actually confuses me a lot because you are really talking about GraphQL like it's the only true thing to use but u don't use it? üòõ haha
10953;GraphQL is nice when you've got outside API users and you aren't entirely sure what their queries are going to look like
10954;capnproto is really intriguing to me but doesn't it use HTTP/2? Makes it hard to use for a browser front end.
10955;hey I've tried to move my project to go's standard directory structure and am getting this build error anyone encountered it before? Using this command to build: `go build ./...` and getting `build github.com/ractf/install/cmd: cannot load cmd/install/install: package cmd/install/install is not in GOROOT (/usr/lib/go1.13/src/cmd/install/install)`(Full Source Code: <https://github.com/ractf/install>)
10956;I think you have to use relative paths I read it online somewhere where they also used monorepos
10957;"you are importing `""github.com/ractf/install/cmd/install/install""`"
10958;"the path should be `""github.com/ractf/install/cmd/install/""`"
10959;right then it doesn't build though
10960;unless it's building to somewhere i can't see ü§î
10961;<https://github.com/golang/go/issues/27056>
10962;the build command just appears to exit for some reason when i change it to the proper path
10963;even with v there's no feedback
10964;`tree d`?
10965;None
10966;hmm
10967;I'd assume `./cmd/install` is a `main` package yes
10968;ja
10969;well
10970;no
10971;cmd/main.go is a main package
10972;well that's not standard
10973;main packages go in `./cmd/<executable name>`
10974;also you're trying to import `cmd/install/install` which I don't quite understand
10975;Why the ./... btw? Just go build should suffice
10976;`go build` or `go build .` from the project root won't go down to `./cmd` and `./cmd/install`
10977;Not sure how go handles the recursion there
10978;Go build <path>
10979;anyway it appears that `./cmd/install` is a dependency for `./cmd`? which is weird just put it all in `./cmd/install` as a main package or put internal stuff in the package root or a `./internal/` package
10980;alright cheers
10981;yeah converting it to a main package fixed it
10982;thanks \\:D
10983;no prob :)
10984;Why this isn't working?
10985;v is passed as variadic after all
10986;you cannot variadic if there is another argument like that
10987;at most `append([]interface{}{dt.Format(dtFormat)} v...)`
10988;@stdio That's not it fprintf has the signature: `(w io.Writer format string a ...interface{})` so what he's doing is correct.
10989;https://play.golang.org/p/4XVKrk5UG_i
10990;I'm not sure why he's getting an error though.
10991;and he has string + format another thing and variadic
10992;Since it works just fine.
10993;oooh
10994;right
10995;there are 4 arguments
10996;Fair.
10997;`v...` is not exactly spreading stuff but rather passing an array to a variadic i guess
10998;it reuses the `v` slice
10999;which can have some surprising behavior if you don't play nice
11000;i made a playground example a while back
11001;so @Shanduur ```gofmt.Fprintf(os.Stderr [%v] INFO  +format append([]interface{}{dt.Format(dtFormat)},v...)...)```
11002;sounds ugly
11003;just put everything that needs to be in Fprintf arg in an []interface{} and pass the array as ...ü§∑\u200d‚ôÇÔ∏è
11004;can always make a helper function if it's too ugly
11005;<https://play.golang.org/p/ig8JVT2BsQW> was the example
11006;```go//fmt.Fprintf(os.Stderr [%v] INFO %s +format dt.Format(dtFormat) fmt.Sprint(v...))fmt.Fprintf(os.Stderr [%v] INFO %s dt.Format(dtFormat) fmt.Sprint(format v...))```
11007;"Hey so i am making a tool to help multi dev environments so it can run as one server easilyit will use JSON like so```json{ //Unstructued can be anything but this format merithtk : { user : MerithTK"", email"": email@gmail.com"" }}```"
11008;and there can be multiple entries
11009;sounds like a map
11010;Yeah except i have no clue how to do that... again
11011;I thought my launcher had this but it doesnthttps://github.com/MerithTK/PersonalProjects/tree/master/Launcher
11012;it has a map for one value
11013;https://gobyexample.com/json yep there's an example specifically for maps
11014;an array of strings but thats it
11015;thanks will look
11016;Doesnt help the mother was off on a twenty minute tanget about a harry potter fanfiction she reads
11017;okay i fucking hate having to use external configs in go
11018;"What about this one?```gofunc SetLogFile(path string) { var err error outFile err = os.OpenFile(path os.O_APPEND 0666) if err != nil { outFile = os.Stderr Errorf(""%v\ err) }}func Messagef(format string v ...interface{}) { if logLevel <= INFO { _ _ = fmt.Fprintf(outFile getHeader(INFO)+format v...) }}```Why am I unable to write to that file although I can write to `os.Stderr`?"
11019;what's the error say
11020;There is no error.
11021;that's almost certainly not true
11022;It looks like it is writteing but file is not filled by anything
11023;https://golang.org/pkg/fmt/#Fprint
11024;`func Fprint(w io.Writer a ...interface{}) (n int err error)`
11025;hmmm
11026;` _ _ = fmt.Fprintf(outFile getHeader(INFO)+format v...)`
11027;hmmmm
11028;i'd strongly recommend checking all errors
11029;2020/08/11 19:37:33 write log.txt: bad file descriptor
11030;Ok got it. needed `|os.O_WRONLY`
11031;remember errors are your friend!
11032;embrace them
11033;Thank you!
11034;it\'s really easy to say oh there\'s no possible way this would ever fail
11035;but if god decides you rolled a 1 that day you'd never know that it DID break
11036;until something further down the line breaks even worse
11037;@Merith why? You're json. All you have to do is create a struct open the file for reading and call unmarshal
11038;That is what 4 lines of code?
11039;its getting the formatting and reading the UNFORMATTED json
11040;i want the json to flow like this```> Username > name > email> Username 2 > name > email```
11041;with an unending list of `Username`
11042;this tool will help prevent people from fucking up others repos because of them setting their `global` git configs
11043;for user/email
11044;I would try and use toml but no clue how to do that
11045;it'll end up being exactly the same
11046;structs with tags
11047;Marshal/Unmarshal
11048;the API is 1:1
11049;it's helpful to use named types here
11050;so to start off
11051;you have zero or more usernames here
11052;a list of usernames
11053;what type in Go might represent that?
11054;how do i get a multipart with an unnamed field or form
11055;i know its sending multipart data tho
11056;:stare:
11057;http in go btw
11058;Request has a function for it
11059;ParseForm or something like that
11060;ParseMultipartForm
11061;Which will populate the form in the request
11062;https://pkg.go.dev/net/http?tab=doc#Request.ParseMultipartForm
11063;found it
11064;it populates form and postform
11065;none of those return multipart.File tho
11066;:stare:
11067;You can use mime/multipart to parse the body as well
11068;how
11069;r.Parseform only provides me with things that have access to url.Values
11070;not really the same as what r.FormFile returns but formfile requires a param
11071;Check the godoc of mime/multipart
11072;It has multiple examples
11073;You'll have to pass the the request body and the value of one of the headers
11074;https://golang.org/pkg/mime/multipart/#example_NewReader
11075;what reader would i pass thru tho
11076;:stare:
11077;not exactly putting multipart as body
11078;Already answered that
11079;ok fuck why is this library so like
11080;wonk
11081;i have a js uploader that wont let you select which form to use :stare:
11082;but is good in literally every other way
11083;The library is modular. Pretty easy to use and well documented
11084;im talking about the js library
11085;not multipart
11086;filepond
11087;Just check what it posts in your browser
11088;If it is anything decent it should just be a multipart message
11089;https://i.kawaii.sh/iuEP9xK.png
11090;:KM_Dorime:
11091;Hey look a multipart form with proper boundary
11092;i hate how this wont let me change the form name :stare:
11093;wait
11094;What name?
11095;whoever wrote these docs has a brain tumor :BCS_PepeLaugh: nowhere does it mention the element id equals the form name it uploads to
11096;Isn't that just how forms work?
11097;nono this is like a Vue form component
11098;you put that in a prop not the id= html standard
11099;Don't think the server has to care about it
11100;You'll read all file headers anyways
11101;"So i have come up with this```toml[Merith]name = merith.tk""email = email@gmail.com""[Kenku]name = Kenku""email= kenku@gmail.com""```"
11102;"https://xuri.me/tomltogo/ but this returns ```gotype AutoGenerated struct { Merith struct { Name string `toml:""name""` Email string `toml:""email""` } `toml:""Merith""` Kenku struct { Name string `toml:""name""` Email string `toml:""email""` } `toml:""Kenku""`}```"
11103;I need it to iterate over all names at the very least
11104;like all catagories
11105;Yeah that isn't how toml works
11106;Welp...
11107;shit
11108;Rtfm
11109;boi i have no clue how to approach this right now...
11110;Inside the square brackets put user
11111;That way you have a list of users in toml
11112;Which is explained in length in you guessed it
11113;The manual
11114;Okay
11115;Welp. point me to the manual then
11116;You've looked up toml right
11117;Wait found the github
11118;They have a spec
11119;https://github.com/tomllang/toml
11120;so... for subcatagory `user.UserName`
11121;Rip formatting
11122;yep
11123;the page i linked wont work if you have any indentation
11124;None
11125;There
11126;Yeah that is what i was looking at
11127;OK so what is the problem?
11128;with how i wanted to structure to have an list that can just be added onto of user/email pairs
11129;well
11130;i can give you a hint
11131;hints are good
11132;`map[string]User`
11133;is all you need
11134;uhm....
11135;i'll leave plugging the rest of the pieces together to you
11136;and
11137;"```gotype Config struct { Users []struct { Name string `toml:""name""` Email string `toml:""email""` } `toml:""users""`}```"
11138;Hmmm
11139;https://toml.io/en/v1.0.0rc.1#table
11140;Would you look at that
11141;A comprehensive spec sheet with examples and common mistakes
11142;`AND file LIKE %'||?||'%'`
11143;this does not work
11144;:KM_Dorime: trying to get LIKE query to work for MySQL in Go
11145;well
11146;the expression breaks down like this
11147;it does work
11148;but it doesnt care about the query
11149;the like parameter is completely ignored
11150;```AND file like %'?'%'```
11151;you did your string wrong
11152;```'%'||?||'%'```
11153;count your quotation marks
11154;see where they start and stop
11155;mmm i dont think so its supposed to be %bleh% in regular sql would use concatination but like
11156;:KM_Dorime: injection
11157;well actually
11158;i mean
11159;i don't know why you think || is concatenation
11160;and when i do it the way you said it gives me this error
11161;or even remotely what you need here
11162;right syntax to use near ?'% at line 1
11163;oh i found it on stackoverflow
11164;:KM_Dorime:
11165;for postrges which is not what im using but postgres basically copied mysql syntax so
11166;actually
11167;mysql has a concat function
11168;:stare:
11169;? || % worked for me w/ sqlite3
11170;yeah || is oracle syntax apparently
11171;postgres too
11172;but not mysql :shrug:
11173;`CONCAT('% ? %')`
11174;this worked
11175;mysql concat is a function over an operator
11176;bruh
11177;@Riku what would you do if emojis didnt exist
11178;just type them out
11179;mike
11180;bruh
11181;dog pray
11182;Also
11183;%xyz% is almost always a terrible idea and doesn't scale
11184;Guaranteed way to bring any db to its knees in any real world business scenario
11185;so how would you do it
11186;:5_bugcatstare:
11187;EC?
11188;Substring search? Elasticsearch
11189;Wtf is EC
11190;elastic search
11191;@Str≈ìm
11192;what is a good way to search through strings in mysql
11193;Best way is to not
11194;ES > Elasticsearch not EC
11195;ah
11196;so just dont do searches :stare:
11197;but what do i do if i do wanna do searches
11198;LIKE %ttext% or sumfin
11199;im doing that but didnt you just say it would kill performance
11200;Im going in circles here
11201;I already have the answer
11202;Use elasticsearch
11203;:robpike:
11204;ah
11205;:5_bugcatstare:
11206;aite
11207;For your scale (aka very small) you can probably get away with doing search in MySQL
11208;But i wouldnt recommend it if theres any plan to scale
11209;Especially if the text fields are large
11210;this service will have like probably 10100k total things in that table
11211;fields tiny
11212;:KM_Dorime:
11213;seems like word% is decently fast with indexing
11214;Prefix sure
11215;ok i'm good
11216;Theres a data structure thats super good for it
11217;Prefix trie
11218;:KM_Dorime: wish i could set databases to have one column in one table always in memory and caching so its easier on searches
11219;is that already how sql index the col?
11220;or do i tell it to or sth
11221;No idea
11222;bruh
11223;mike
11224;mike mode
11225;:mikebsd:
11226;hello
11227;i was called
11228;everyone run its the bsd goblin
11229;:run:
11230;that was a poorly executed joke i regret
11231;As long as you don't do wildcards on any other position than the end sql can still leverage indexes
11232;i think ill leave it as it is for now until it causes issues and ill remove the first wildcard
11233;https://usetheindexluke.com/sql/whereclause/searchingforranges/likeperformancetuning
11234;replacement hard drive from seagate came
11235;https://i.kawaii.sh/ltUemp.png
11236;:KM_Dorime: still somewhat upset that they sent a refurb one
11237;when my disk was like 5 months old
11238;Ewww
11239;Inconsistent naming scheme
11240;Kname wwn type + serial
11241;is there anyway I can only import certain things from packages as some really make my final binary bigger
11242;`import math/rand` as opposed to `import math` for example?
11243;not really
11244;If you don't use them then they wouldn't be included
11245;well I mean individual functions
11246;if you use a function from one package that whole package is included no ?
11247;for eg
11248;"```gopackage mainimport math/rand/Seed""func main() {}```"
11249;that is not valid I assume
11250;will that only link the seed function during the build  I doubt it .
11251;> if you use a function from one package that whole package is included no ?no?
11252;https://www.reddit.com/r/golang/comments/6vbh65/are_unused_functions_compiled/
11253;the linker does a good job of eliminating things that the program never uses
11254;https://golang.org/doc/go1.15
11255;can someone put this in #gonews
11256;It's released
11257;:monkaS:
11258;does anyone know why using type Something []struct when unmarshalling json works but type Something struct does not? it seems to get some data but not all of it
11259;also sorry if this isnt the help me channel but im dying
11260;one is a slice of struct
11261;the other is a struct
11262;big brain tyvm
11263;"You know... i wish `os.Args` would not spew and error if arg does not exist My tool is supposed to function like this```gogit.exe Username > reads users.json  > {""users"":[{""user"":""Merith"",""name"":""MerithTK"",""email"":""email@gmail.com""},]} > iterate over each array in users.json if Arg[1] == `json.users.user` > read information from that location in array > exec (git config user.name json.users[X].name && git config user.email json.users[X].email)```"
11264;"```gopackage mainimport ( encoding/json"" fmt"" os"")var ( config Config jsonFile = ` {""users"": [ { user"":""Merith"", name"":""MerithTK"", email"":""email@gmail.com"" } ] }`)type Config struct { Users []struct { User string `json:""user""` Name string `json:""name""` Email string `json:""email""` } `json:""users""`}func main() { fmt.Println(""hello world"") json.Unmarshal([]byte(jsonFile) &config) fmt.Println(config) if os.Args[1] ==  { fmt.Println(""NO ARGS"") }}```"
11265;you know I wish you would just use it properly
11266;use a len check
11267;^
11268;beat me to it
11269;So... len(os.Args) > 1 was what I was about to send :(
11270;or len(os.Args) == 1
11271;Hello!I woulk like to iterate over a map and get keys and indexes. Is it possible?
11272;`for key value := range m`
11273;er indexes? like a counter?
11274;@Roipoussiere maps are not ordered
11275;how... how the fuck did i forget about len...
11276;HOW THE FUCK
11277;So there is no index
11278;ok
11279;> how... how the fuck did i forget about len...@Merith thank you! haha indead I totally forgot it. üòÑ
11280;wait no I can't.
11281;because mas are not ordered
11282;üëÜ
11283;you can len a map
11284;just
11285;make a new int
11286;and increment it
11287;or make a slice of keys if you want ordered
11288;oooh! I got it!
11289;```goi := 0for key value := range myMap { fmt.Println(i key value) i++}```
11290;uhm...
11291;https://cdn.merith.tk/Workspace/gogit/main.go```PS Z:\\Workspace\\gogit> go run . Merith# gogit.\\main.go:48:30: conf.Users[i].User.Name undefined (type string has no field or method Name).\\main.go:48:55: conf.Users[i].User.Email undefined (type string has no field or method Email)```
11292;"```gotype config struct { Users []struct { User string `json:""user""` Name string `json:""name""` Email string `json:""email""` } `json:""users""`}```"
11293;oh
11294;i see the problem
11295;lol
11296;yep
11297;I got some work done on my 6/8bit image format earlier
11298;6bit because the alpha bits are inverted meaning that omitting them is fully opaque
11299;:Thonk:
11300;does that matter?
11301;if your format just has an identifying bit/byte for the image type then that doesn't really matter does it
11302;well I could do that
11303;idk how else you'd do it without the extra id bit/byte
11304;I'm saying `0b110000` is a fully opaque red if you're not using the alpha channel
11305;also because `color.Color` is premultiplied that doesn't mess up the other channels
11306;bruv
11307;> If panic is invoked with a value whose type is derived from any of: bool complex64 complex128 float32 float64 int int8 int16 int32 int64 string uint uint8 uint16 uint32 uint64 uintptr then the value will be printed instead of just its address. Previously this was only true for values of exactly these types.
11308;this is so overpowered
11309;nice
11310;oh i thought you're talking about representing the pixels as bytes
11311;@aditya you should use log.Panicln from the start tbh
11312;I mean I am each pixel is a uint8
11313;which doesn't have that problem
11314;so how would you differentiate between 6 and 8?
11315;you don't
11316;what
11317;just fill 0/255 in alpha then?
11318;6bit colors are valid 8bit colors
11319;yup
11320;because alpha is inverted so `00` is treated as fully opaque
11321;so what's the bonus?
11322;wdym
11323;is that it?
11324;pretty much yeah
11325;I'm planning on using it internally for lowres games
11326;the magic string is `\\x69IM8\` :P
11327;any builtin function for turning windows CRLF line endings into LF?
11328;i guess it would be a pretty easy thing to write myself anyway
11329;"`strings.ReplaceAll(s \\r\ \"")` :P"
11330;oh I guess that works
11331;thanks
11332;omg I just discovered the `replace` instruction in go.mo
11333;this is so good
11334;yep
11335;go is very good
11336;go is great üòç
11337;mmm failed tests```=== RUN TestCol8Modelalpha 00 col8_test.go:21: cr == 0000 != c.r == FFFFalpha 00 col8_test.go:21: cr == 0000 != c.r == FFFF col8_test.go:21: cr == 38E3 != c.r == AAAA col8_test.go:33: ca == 5555 != c.a == AAAA col8_test.go:21: cr == 1C71 != c.r == 5555alpha 11 col8_test.go:33: ca == FFFF != c.a == 0000alpha 00 col8_test.go:21: cr == 0000 != c.r == AAAAalpha 00 col8_test.go:21: cr == 0000 != c.r == AAAA col8_test.go:21: cr == AAAA != c.r == 71C6 col8_test.go:21: cr == 0000 != c.r == 38E3alpha 11 col8_test.go:33: ca == FFFF != c.a == 0000alpha 00 col8_test.go:21: cr == 0000 != c.r == 5555alpha 00 col8_test.go:21: cr == 0000 != c.r == 5555 col8_test.go:21: cr == 0000 != c.r == 38E3 col8_test.go:21: cr == 0000 != c.r == 1C71alpha 11 col8_test.go:33: ca == FFFF != c.a == 0000alpha 00alpha 00alpha 11 col8_test.go:33: ca == FFFF != c.a == 0000```
11338;I write code since 15 years and I started Go 2 weeks ago for a project and I never been so much satified by my code. At my beginner point of view Go just force me to write smart code.
11339;it's the aggressive simplicity :P
11340;can someone pls give me some advice regarding serving user specific image files?
11341;i'm new to go and was following along a course and went off on a tangent  to access files they must be part of FileServer but how to limit access to only those who has a session cookie and only to their specific images?
11342;either use a middleware
11343;or use a custom handler
11344;preferably custom handler
11345;you'd do the stuff you have to do then call http.ServeFile after all that
11346;ok so after an user logs in I can serve a dir?
11347;serve a file
11348;or dir
11349;Can someone explain to me why it's good to split up my db interface into multiple files for each object type?
11350;sure
11351;probably to make that one file not too long
11352;Eh I guess but then I have to use multiple interfaces
11353;and I have to add each one
11354;idk it feels wrong to me lol
11355;well
11356;look at the `io` package for inspiration
11357;that's pretty much peak interface usage
11358;you define very compact interfaces that capture very specific pieces of functionality
11359;and then you can just mush them together into something like ReadSeeker or SeekCloser
11360;Oh
11361;jesus
11362;if a function ONLY needs GetOne functionality it can say so
11363;I can just have a DB struct with all my interfaces
11364;btw it's generally better for the function that needs methods to declare its own interface
11365;but this mostly goes for libraries
11366;so if I have a bot that needs a db I should define the db in the bot package?
11367;I posted my current bot project in #showmewhatyougot btw
11368;sure?
11369;taht works yeah
11370;?go layout
11371;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
11372;@Deleted User check this out
11373;thanks
11374;ooh I like this
11375;he says to define it on the root package
11376;can that just be the main or is that bad?
11377;main should be in `cmd/<executable name>`
11378;at least that's the convention I've seen
11379;wait wdym
11380;oh
11381;I see
11382;root package isn't necessarily the root in repo it just means the root in that context
11383;so like
11384;``` github.com/diamondburned/smolboard  server  server.go < root  thinggohere/  main.go```
11385;for example
11386;Is there a way to use $GOPATH variable in a go.mod replace instruction?
11387;no but you can use a relative or absolute path
11388;My need is: I work on a peronal project that use a library I contribute to and I use my fork of the library before my pull requests are merged. Since there are other contributors in my project I don't want to use a local path in go.mod.
11389;`replace path => ../project`
11390;ok
11391;thanks
11392;yea np
11393;wait
11394;so if a struct has a bunch of interfaces
11395;it inherits those methods?
11396;interfaces are implicit
11397;structs do nothing except define methods
11398;so I can just do `struct.Method` instead of `struct.Interface.Method`
11399;there's no inheritance
11400;and you CAN embed types in each other
11401;but it won't work the way you think it will with interfaces
11402;this isn't like python where you define a base class with default implmentations
11403;but I can call the interface functions on from the struct directly right?
11404;what is your structure
11405;if you have an interface as a field inside the structure then you'd do `struct.Interface.Method`
11406;unless you embed it
11407;> `replace path => ../project`@_diamondburned_ or `./project` with a submodule üôÇ
11408;hm
11409;actually an interface can be defined to extend and existing one. And also you can test an interface to see if it implements an interface that has less methods that the one being tested has.
11410;```gotype A struct { B}type B interface { C() }```
11411;then you can do `(A{}).C()`
11412;which would crash but yeah
11413;@Roipoussiere sure
11414;so I have a Database struct that has all my model's service interfaces
11415;so for example the GuildService ```gotype GuildService interface { BeginTx() (tx sqlx.Tx err error) Commit(tx sqlx.Tx) error AddGuild(tx sqlx.Tx guild Guild) (insertID string err error) GetGuild(tx sqlx.Tx guildID string) (guild Guild err error) GetAllGuilds(tx sqlx.Tx) (guilds []Guild err error) UpdateGuild(tx sqlx.Tx guildID string newGuild Guild) (updateID string err error) RemoveGuild(tx sqlx.Tx guildID string) (removeID string err error) AddGuildPrefix(tx sqlx.Tx guildID string prefix string) (insertID int err error) GetGuildPrefixes(tx sqlx.Tx guildID string) (guildPrefixes []string err error) RemoveGuildPrefix(tx sqlx.Tx guildID string prefix string) (removeID int err error)}```
11416;bruh
11417;why not just do
11418;```gotype GuildService interface { BeginTx() (GuildTransaction error)}type GuildTransaction interface { Commit() error Rollback() error AddGuild(guild Guild) (insertID string err error) GetGuild(guildID string) (guild Guild err error) GetAllGuilds() (guilds []Guild err error) UpdateGuild(guildID newGuild Guild) (updateID string err error) RemoveGuild(guildID string) (removeID string err error) AddGuildPrefix(guildID string prefix string) (insertID int err error) GetGuildPrefixes(guildID string) (guildPrefixes []string err error) RemoveGuildPrefix(guildID prefix string) (removeID int err error)}```
11419;I am so confused
11420;Smaller interfaces are generally better
11421;wait as it is though can I do `Database.AddGuild()` or would I have to do `Database.GuildService.AddGuild()`
11422;"i don't know; how is your Database declared?"
11423;the former
11424;is it embedded?
11425;generally
11426;but that's assuming```gotype Database struct {}func (db Database) AddGuild(guild Guild) (insertID string err error) {}```
11427;that's how you match the interface
11428;that's it
11429;and then you just have a regular struct
11430;I think they're trying to have Database contain all the services
11431;idk
11432;waiting for repl
11433;yea I am trying to do that
11434;```gotype Database struct { GuildService HelpChannelService}```
11435;like this
11436;but with more
11437;sure
11438;yeah
11439;`database.AddGuild()`
11440;then Database would also implement GuildService automatically
11441;:thonk:
11442;i mean you CAN embed interfaces in concrete types
11443;but it doesn't expose any methods
11444;the reason I ask is because vscode autocompletes things like `b.Database.GetGuildPrefixes(tx m.GuildID)`
11445;https://play.golang.org/p/FKCYhlhUP4r
11446;b is the bot btw
11447;what's wrong with that? you have your bot which contains your database
11448;which has methods on it
11449;But the database is just a struct with all the service interfaces
11450;I just didn't know I could could the interface methods directly from it
11451;@Deleted User I would like to help you if you still have something to solve. If so then please state the problem for me? I cannot tell what it is.
11452;I guess the question is about how I expose my service methods
11453;basically two choices
11454;```gotype Bot struct { DB Database}b.DB.DBMethod()``````gotype Bot struct { Database}b.DBMethod()```
11455;Although im really confused now by the way dia told me to do the guildservice interface
11456;where Database is a concrete type
11457;not an interface
11458;In the second example that is.
11459;i didn't tell you to change things up a lot
11460;i just told you to split the transaction interface away
11461;so you don't have to pass the tx onto the first argument all the time
11462;okay folks
11463;One sec gotta tidy code
11464;"```gopackage mainimport ( bufio"" encoding/json"" fmt"" io/ioutil"" log"" os"" os/exec"" strings"")var ( conf config)type config struct { Users []struct { User string `json:""user""` Name string `json:""name""` Email string `json:""email""` } `json:""users""`}func main() { jsonFile err := ioutil.ReadFile(""users.json"") if err != nil { fmt.Print(err) } json.Unmarshal([]byte(jsonFile) &conf) if len(os.Args) > 1 { if len(os.Args) > 2 { fmt.Println(""Too many Arguments"") } findUser(os.Args[1]) } // err handling later}func findUser(username string) { for i := 0; i < len(conf.Users); i++ { if strings.ToLower(conf.Users[i].User) == strings.ToLower(username) { execute(conf.Users[i].Name conf.Users[i].Email) } }}func execute(user string email string) { fmt.Println(""USERNAME: user) fmt.Println(""EMAIL: email) confirm := authorize(""Does this appear correct?"") if confirm == true { _ err := exec.Command(""git config user.name user).Output() _ err2 := exec.Command(""git config user.email email).Output() if err != nil || err2 != nil { log.Fatal(err) } } else { fmt.Println(""not"") }}func authorize(s string) bool { reader := bufio.NewReader(os.Stdin) for { fmt.Printf(""%s [y/N]:  s) response err := reader.ReadString(\'\\') if err != nil { log.Fatal(err) } response = strings.ToLower(strings.TrimSpace(response)) if response == y || response == yes { return true } else { return false } }}```"
11465;how could i improve
11466;yes i need to add a statement if the user is not in the config i know that
11467;what else
11468;"oh this is the file its pulling from```json{""users"": [ { user"":""merith"", name"":""MerithTK"", email"":""merith.tk@email.com"" }, { user"":""kenku"", name"":""kenko"", email"":""kenko@email.com"" } ]}```"
11469;@Deleted User does this fit your need? https://play.golang.org/p/rlMKlRCeji
11470;you should use bufio.Scanner imo
11471;```govar scanner = bufio.NewScanner(os.Stdin)for scanner.Scan() { response := scanner.Text()```
11472;in findUser you can move `strings.ToLower(username) ` outside the loop
11473;do `username = strings.ToLower(username) `
11474;"```go if len(os.Args) > 1 { if len(os.Args) > 2 { fmt.Println(""Too many Arguments"") } findUser(os.Args[1]) }``` can be ```goif len(os.Args) != 2 { log.Fatalln(""Too many arguments"")}```"
11475;which btw
11476;you should use log. more often
11477;use fmt.Println for printing info use log.Println/log.Fatalln for errors/warns/debugs
11478;how would i use that bufio thing?
11479;the scanner part
11480;just like that
11481;drop in replacement?
11482;almost
11483;try it and see
11484;```# gogit.\\main.go:63:6: undefined: scanner.\\main.go:64:15: undefined: scanner.\\main.go:66:26: reader.ReadString undefined (type bufio.Scanner has no field or method ReadString).\\main.go:77:1: missing return at end of function```
11485;i see how i goffed
11486;for efficiency in the json hash the users by name and lookup using a map rather than serial searching a slice/array
11487;uhm
11488;wut
11489;this is just a small tool
11490;in that case ignore
11491;https://cdn.merith.tk/Workspace/gogit
11492;iirc
11493;ye that link
11494;Did recover change? Everything online says to do `r := recover()` but i'm getting linter errors saying recover() doesn't return anything
11495;Could you show one of those errors? If `recover` had changed (which it hasn't) your compiler would be telling you not your linter.
11496;"nah recover does return something; maybe it's not the type you're expecting"
11497;also yeah try compiling
11498;Oh wait
11499;I was trying to write a generic function using recover() that Id call defer at the beginning of each of my handlers.
11500;Apparently you can't do that?
11501;Because if I write an inline deffered function it lets me call recover()
11502;https://blog.golang.org/deferpanicandrecover
11503;> Recover is a builtin function that regains control of a panicking goroutine. Recover is only useful inside deferred functions. During normal execution a call to recover will return nil and have no other effect.
11504;Well now..
11505;OMG
11506;Its time to go to bed
11507;That's probably what your linter was telling you. üôÇ
11508;it kinda gives an empty new line
11509;and then redners the text
11510;The Generic Function I was writing I called recover()
11511;I'm srry all
11512;Everything works perfectly fine
11513;fixed it by moving my Println statement out of the loop
11514;None
11515;How do defered/recover functions work in functions with returns values?
11516;uhm
11517;i want it to be on the same line as the `Does this appear correct`
11518;returns the declared return variables with the values they had after the last deferred function executes. deferred functions can change the values of returned variables. Calling recover() does not change the return values
11519;so you don\'t have to pass the tx onto the first argument all the time wait so @_diamondburned_ doing it your way how do I get a transaction for multiple of those service functions?
11520;This is probably obvious but idk lol
11521;by calling whatever.NewTx() or whatever the method was called
11522;and then you call `tx.Get()` or `tx.Commit()`
11523;etc etc
11524;now you don't have to pass the trnasaction value in as an argument to these methods because they're methods on the transaction itself
11525;> doing it your way how do I get a transaction for multiple of those service functions?
11526;you can't really
11527;you need to do it the old way
11528;well
11529;yeah
11530;So there's no way to do it without having the tx as an argument?
11531;there is but it's probably not as good
11532;Ah
11533;though you wouldn't even need a struct w/ methods
11534;you only need tx and the arguments right?
11535;so you'd end up with an empty struct anyway
11536;hi again everyone so I tried to create a simple tcp server. the client can send message:string1 and the server will return it immediately if the client sent brc:string1 it will broadcast it to other client as well.here is the code: https://pastebin.com/471rNVcXso I don\'t have a lot of experience with go so I just try to make it work at this point can anyone point out any bad practice or something that might hinder the performance? thank you!
11537;@Elaine whats the error?
11538;hi @xXREDSTONEXx It works just fine I guess I was wondering if my goroutine usage is bad or not etc
11539;idk really im pretty bad at go tbh
11540;@Elaine use bufio.Scanner instead of Reader
11541;less lines
11542;also make the sacnner outside the loop
11543;```govar scanner = bufio.NewScanner(c)for scanner.Scan() { response := scanner.Text()```
11544;also this doesn't handle disconnections
11545;you'll need to do sth like
11546;```gogo func() { handleConnection(con tomain) userMu.Lock() delete(users ...) userMu.Unlock()}()```
11547;which means you'd probably want an ID for each connection
11548;so you can delete them reliably
11549;so use a map of conn
11550;this write may block for one conn: ```go select { case br := <tomain: for _ val := range users { val.Write([]byte(br)) } }```
11551;you should use a timeout
11552;or write them asynchronously
11553;Did you mean i should add a goroutine for each of the write then?
11554;iirc net.Listener has a write timeout
11555;> iirc net.Listener has a write timeout@_diamondburned_ I think Its the setWriteDeadline I\'ll try it with that then thanks!
11556;y yeah
11557;I think so
11558;nitpick time would y'all write```go!(image.Point{x y}.In(i.Rect))```or```go!(image.Point{x y}).In(i.Rect)```
11559;Former
11560;neither
11561;also that'll trigger a lint error afaik
11562;i write my go like i write matlab
11563;writing go giving me some ptsd tbh
11564;Wat
11565;result1 err = thing()result2 err = result1.thing2()result3 err = result2.thing3()
11566;wat
11567;shit strawman
11568;I dont even understand the point
11569;Is there some problem with `x err := function()` or is it just that you keep getting the next result from the last?
11570;The former i would assume
11571;Hi there anyone willing to lend me a hand with gochi and routing? I try to provide my react spa through my backend server but there will be other routes as well like /api /uploads /ws
11572;So far I have everything working except the react frontend by using this config:
11573;Where the corresponding `routes. ...` will look like this:
11574;Following a code snip from here: https://github.com/tutley/chiact/blob/master/main.go
11575;But everytime I am browsing to `/` javascript will give me an error: `Uncaught SyntaxError: Unexpected token <` and `Uncaught SyntaxError: Unexpected token <'`
11576;and that is perfectly right as th files `2.c4.....js` and `main. ..... .js` will be responded with the index.html which is wrong
11577;Thats a lot of code
11578;Pls upload to hastebin instead
11579;sorry for that I try to give as many information as possible
11580;"Hi I\'m executing wasm code in go but i\'m getting different results when I run in wasmer compared to the result of cargo runWhat is the mistake i\'m doing when i call in gowasmer?main.rs```rs#[no_mangle]pub extern C fn generate_vec(len: usize) > Vec<i32> { let mut res = Vec::with_capacity(len); let mut rng = rand::thread_rng(); for _ in 0..len { res.push(rng.gen::<i32>()); } res}fn main() { let generated_vec = generate_vec(10); println!(""{:?} generated_vec);}```main.go```go bytes _ := wasm.ReadBytes(""array.wasm"") instance _ := wasm.NewInstance(bytes) defer instance.Close() length := 10 randomresults _ := instance.Exports[""generate_vec""](length) if err != nil { fmt.Println(""error err) } inputPointers := randomresults.ToI32() // Write the subject into the memory. memory = instance.Memory.Data() fmt.Println(""response: memory[inputPointers:inputPointers+15])```Result from ` cargo run` ` [543959079 1949854423 1765062667 289802979 1475180849 1539349067 1470809471 1272695848 325084162 67481800]`result from go`error Failed to call the generate_vec exported function.response: [10 0 0 0 20 0 0 0 30 0 0 0 40 0 0] `"
11581;So I moved my code to a pastebin as suggested: https://pastebin.com/Ptdby09n
11582;So how would I catch all requests to `/` like `/game` `/controller` and so on BUT not `/api` `/ws` `/uploads` and redirect it to my files directory `./spa/...` and server the `index.html` and the corresponding content (static files)?
11583;Wait what do you want to go where?
11584;okay I want to server my websocket from /ws my api from /api and uploads as a FileServer from /uploads (/my/path/to/server/uploads/)
11585;that is working just fine
11586;now I want to add the ability to serve my react app from /
11587;it is in the folder /path/to/my/server/spa/
11588;a react app consists of a index.html which will include a big bundled javascript file as well as some css
11589;This is what the tree would look like in /spa ```bash‚ùØ tree.‚îú‚îÄ‚îÄ assetmanifest.json‚îú‚îÄ‚îÄ favicon.ico‚îú‚îÄ‚îÄ index.html‚îú‚îÄ‚îÄ manifest.json‚îú‚îÄ‚îÄ robots.txt‚îú‚îÄ‚îÄ static‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ css‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ 2.fb23ba15.chunk.css‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ 2.fb23ba15.chunk.css.map‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ js‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ 2.c4678b29.chunk.js‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ 2.c4678b29.chunk.js.LICENSE.txt‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ 2.c4678b29.chunk.js.map‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ main.8558a62e.chunk.js‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ main.8558a62e.chunk.js.map‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ runtimemain.32508c85.js‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ runtimemain.32508c85.js.map```
11590;I need to provide index.html at every route / except the ones I defined befor like /api and so on. Cause my react app itself uses what is called reactrouterdom
11591;What happens when you request one of those static files
11592;So it will handle request going to /scoreboard or /player for example and display another page than the start page for example
11593;I will be provided with the index.html
11594;I think I am missing just one single crucial step
11595;Oh youre only reading index.html :robpike:
11596;the guy in the tutorial is serving his app folder as static folder in addition
11597;What happened to the code i gave yoj
11598;the uploads folder is still working
11599;this was the one you gave me
11600;Do the same for /
11601;"see the guy in the tutorial uses this:```go// Expose the client directory for assets r.FileServer(""/client http.Dir(filesDir)) // Serve the index r.Mount(""/ RootRouter())```to serve the rest of his folder content"
11602;so if someone happen to call an existing file directly I understand the FileServer will serve it instead of giving back the index.html right?
11603;But in my code snippet I cannot fit a FileServer for some reason
11604;I am pretty sure I am just missing on additional line though
11605;"```gorouter.Mount(""/ http.FileServer(http.Dir(getDir(""spa""))))) ```"
11606;Does this work
11607;no it will just give me the index.html if requesting one of the static files
11608;No it shouldn't
11609;Nowhere there am i saying index.html
11610;If you request test.js it should return test.js
11611;Oh you mean to omit the index.html line then
11612;Use exactly what i have there
11613;"```go// SpaRoutes will deliver React Frontendfunc SpaRoutes() chi.Router { spaIndex := filepath.Join(getDir(""spa"") index.html"") index err = ioutil.ReadFile(spaIndex) if err != nil { logger.Error(""Error reading index.html of React Frontend"") } router := chi.NewRouter() router.Use(middleware.NoCache) router.Mount(""/ http.FileServer(http.Dir(getDir(""spa"")))) // router.Get(""/ func(w http.ResponseWriter r http.Request) { // w.Write(index) // }) return router}```"
11614;You dont need that
11615;Put the code i gave you with all your other routes
11616;I know hold your horses
11617;Cool beans
11618;It will display the index with css and so on
11619;now I am missing the functionality to browse to /game for example which is a reactroute I have
11620;it will give me 404 not found
11621;and that is because there will be no index.html provided for that
11622;That should be something in your react code not in your go code afaik
11623;Isnt it all part of the one react spa?
11624;the go server will grab /game and return 404 as there is no route for it
11625;"this is why I need this snip to work```go router.Get(""/ func(w http.ResponseWriter r http.Request) { w.Write(index) })```"
11626;I think youre not quite understanding the point of react and spa üòÖ
11627;Is /game a page in your spa
11628;yes
11629;Yes so that doesnt come from golang
11630;yes
11631;Thats a virtual route in react
11632;yes
11633;So thats nothing to do with golang
11634;okay. So I start my dev server which will host the index.html at :3000 then
11635;I will browse chromium to /game and the dev server at port 3000 will redirect this request to /index.html
11636;so reactrouterdom knows the route is /game but will handle it with the javascript embedded in index.html
11637;Ohhh i think i understand what youre looking for
11638;I need the go server to do this too
11639;Been a while since i had to do this
11640;redirect arbitrary routes to index.html but not static asset files
11641;Yeah nevermind we are working this out together üòÑ
11642;Rofl
11643;So as I understand the guy in the tutorial he will redirect everything heading to / to the read index file but in addition he will serve his apps folder at /client to asure the index.html can access the necessary static files like css and js
11644;Ok so remember SpaRoutes function?
11645;We might need that again lol
11646;yes
11647;üòÑ
11648;Can you put that alone on a hastebin pls
11649;Sure
11650;Easier to edit on mobile
11651;https://pastebin.com/KTTN6BVn
11652;So my function will right now mount the directory at / to serve static content. But the route.Get will hit every request whatsoever and return the index.html
11653;so the route.Get is overwriting the behaviour of FileServer
11654;Ok gimme a few min to edit this
11655;spa? We going to spa?
11656;you should call that function SPARoutes
11657;because that's the go naming convention
11658;well it happens that I am reating spa thinking of Single page application where it actually meant wellnes üòõ
11659;also I've seen people making APIs in Go then have a node application serve the SPA with SSR as well
11660;Yeah well I could do that right
11661;I want it to be as easy for someone to run who has no technical background
11662;So I choose this way so that I can just hit someone up with a default conf and a .exe or .elf or .dmg
11663;.elf :AstolfoThonk:
11664;yeah well a linux executable I mean
11665;üòõ
11666;"yeah I'm not sure how you'll transfer the routes over; maybe you should make a custom handler"
11667;a handler that would serve the js application regardless of path but the path would be read inside the js SPA
11668;"```go// SpaRoutes will deliver React Frontendfunc SpaRoutes() chi.Router {\trouter := chi.NewRouter()\trouter.Use(middleware.NoCache)\tfileserver := http.FileServer(http.Dir(getDir(""spa"")))\trouter.Get(""/ func(w http.ResponseWriter r http.Request) { if _ err := os.Stat(getDir(""spa/""+r.Url.Path)); os.IsNotExist(err) { spaIndex := filepath.Join(getDir(""spa"") index.html"")\t index err = ioutil.ReadFile(spaIndex)\t if err != nil {\t\t logger.Error(""Error reading index.html of React Frontend"") } w Write(index) return } \t\tfileserver.ServeHTTP(w r)\t})\treturn router}```"
11669;Sorry if formatting is fucked
11670;And there may be compile errors
11671;Eh wait
11672;strum just use http.ServeFile
11673;Im on mobile :pepe: this was the least typing
11674;rip
11675;yeah I was about to call a nvm because I'm on mobile too and I can't read it lmao
11676;Rofl
11677;So let me try that snip then
11678;well something still is wrong though
11679;I will get index.html back when on /
11680;the static files will give back 404 not found
11681;Did you update your route in main to point to SpaRoutes again
11682;"```go // Spa route router.Mount(""/ routes.SPARoutes())```"
11683;I got it!
11684;as always a single character will make the decision if working or not
11685;"your line: ` router.Get(""/ func(w http.ResponseWriter r http.Request) {` my line: ` router.Get(""/ func(w http.ResponseWriter r http.Request) {`"
11686;And it is blazing fast
11687;Thanks @Str≈ìm for the help. Appreciate it
11688;huh ok didnt know it needs
11689;All perfect now?@JohnnyTheSmith
11690;Well for the next 2 minutes I discover a new go related issue üòõ But honestly I start getting better at this.
11691;Lol at least this works now
11692;Now I will migrate my yml like config to use toml instead
11693;Then to figure out how to properly test my application. I never did any testing on my apps so far. So I think it is time to look into that
11694;Well one would think this is an easy task with a library this easily usable but for some reason me personally cannot read any toml config files it seams. Only boolean values but no strings no ints etc ^^
11695;ü§¶\u200d‚ôÇÔ∏è
11696;Well got it figured out finally üòõ
11697;Hi everyone just joined in :thinkingo:
11698;üëã:robpike:
11699;Nvm
11700;I found some trending repos of Go written in Chinese on GitHub. Is there a software to convert the chinese comments and readme to English?
11701;Where?
11702;GitHub
11703;You could use auto translate like google
11704;google translate?
11705;you might have found my company repo kek
11706;i dunno why but chinese like vue and golang
11707;im confused
11708;Firefox have addnos that translate by just mouse hover
11709;Yes this can be done because Chinese characters are different than English
11710;@eng. noor it is still a hard task to convert everything by hovering
11711;wut
11712;eh just use microsoft edge
11713;or chrome
11714;it will auto translate the page
11715;Then use google full page translate any chi to glish
11716;Use Chorme bowser
11717;To do it
11718;Good luck
11719;I even have the google translate extension installed in chrome and it is still not translating the whole page
11720;best to just copy paste it
11721;This chrome is obsolete
11722;"Hey gang I have a gorm related question:Consider the following model:```go// X01Score defines a x01score for the apptype X01Score struct { BaseModel Score int ParkScore int InitialScore int // Belongs to one PlayerID uint Player Player}```I would suppose that my database will have a table called x01_score with a Foreign Key field player_id to hold a players id right?But when looking at my database structure afterwards (sqlite browser) it reads```CREATE TABLE x01_scores ( id integer PRIMARY KEY AUTOINCREMENT, created_at datetime NOT NULL DEFAULT CURRENT_TIMESTAMP, updated_at datetime, score integer, park_score integer, initial_score integer, player_id integer);```So the foreign key does not get applied. Why is that?"
11723;http://gorm.io/docs/belongs_to.html#ForeignKey @JohnnyTheSmith
11724;Did read this a few times. I mean as far as I can tell the database is working just fine with all relations although the structure does not have a single foreign key in it
11725;do you not see where it says to use that tag for the foreign key?
11726;actually hm maybe that's not necessary
11727;gorm is weird
11728;I have a question regarding the unsupported or dropped platforms. Will the compiler still create a usable binary for eg. Windows 2008 or will that not work?
11729;I did use the tag to no effect at all
11730;"Hi I\'m executing wasm code in go but i\'m getting different results when I run in wasmer compared to the result of cargo runWhat is the mistake i\'m doing when i call in gowasmer?main.rs```rs#[no_mangle]pub extern C fn generate_vec(len: usize) > Vec<i32> { let mut res = Vec::with_capacity(len); let mut rng = rand::thread_rng(); for _ in 0..len { res.push(rng.gen::<i32>()); } res}fn main() { let generated_vec = generate_vec(10); println!(""{:?} generated_vec);}```main.go```go bytes _ := wasm.ReadBytes(""array.wasm"") instance _ := wasm.NewInstance(bytes) defer instance.Close() length := 10 randomresults err := instance.Exports[""generate_vec""](length) if err != nil { fmt.Println(""error err) } inputPointers := randomresults.ToI32() // Write the subject into the memory. memory = instance.Memory.Data() fmt.Println(""response: memory[inputPointers:inputPointers+15])```Result from `cargo run` `[543959079 1949854423 1765062667 289802979 1475180849 1539349067 1470809471 1272695848 325084162 67481800]`result from go`error Failed to call the generate_vec exported function.response: [10 0 0 0 20 0 0 0 30 0 0 0 40 0 0] `"
11731;You can see why right?
11732;The Go one has an error
11733;Looks like someone is ignoring errors
11734;hey people do you mind if i ask a Java related question that is also Golang related
11735;or should i use #offtopic
11736;(i'm going to ask in case you guys tell me i should move to offtopic i will)
11737;So
11738;in go you can have a setup like this
11739;"```Gotype SettableTextObject interface { func GetText() string func SetText(t string)}func Register(obj SettableTextObject() {}```And that as far as i know works and i would be able to to Register any object that fullfils the iterface (has those 2 functions)but the same code in java doesn't compile coplains that RegisterNewReference cannot satisfy what i truy to pass in```Java public boolean RegisterNewReference(SettableTextObject obj) { return this.referredObjects.add(obj); } public interface SettableTextObject { public void setText(String t); public String getText(); }```"
11740;If I wanted to have a rate limit on HTTP client to an API could I just add a rate limit similar to a http server?
11741;So like this except I'm sending a http request to an API server https://www.alexedwards.net/blog/howtoratelimithttprequests
11742;You can use the rate limit package for outbound as well sure
11743;Won't be plug and play middleware
11744;@luckcolors because in java interfaces are explicit
11745;You need to specify the class implements the interface
11746;Ok I found something thanks üòÑ.
11747;@Sgt_Tailor but what if i want any class to implement it
11748;Like for example i my situation i hjave 2 different things that need to go in this function
11749;I don't think why it wouldn't work besides that referredObjects being wrong ü§î
11750;or the type of object that you are passing perhaps
11751;unlike go those classes need to explicit implement the interface as Sgt said
11752;In java you can't
11753;> In java you can't@Sgt_Tailor great another reason not to use java then
11754;implicit interfaces are pretty unique. You can get away with explicit ones just fine when writing java
11755;Need to think about it differently then
11756;I don't know how to write what i want to do differently though
11757;class ThingToPassThere implements SettableTextObject
11758;@stdio but what if the class i want to pass is already made an not by me
11759;Or as it looks like you're using this for a data structure
11760;Generics
11761;class MyClass extends TheClassMade implements SettableTextObject
11762;but yeah java doesn't allow that
11763;@stdio so i would have to list any class i want to pass in there
11764;that's annoying
11765;i can do that i guess
11766;it completely destroys the purpose of this hack tho
11767;We don't know what you're trying to accomplish
11768;i have a list of SettableTextObjects
11769;i just want to add to that list
11770;If the class explicitly implements the interface it isn't a problem
11771;The java compiler told you that as well :)
11772;but it doesn't that's the unfixable problem XD
11773;Compiler told you the types aren't compatible so you have to make them
11774;@Sgt_Tailor like i don't really know java proficiently i guess that's another issue like how i wopuld go about doing that? creating some wrapper classes?
11775;Yes
11776;(again having to do that kinda defiles the whole works for anything idea)
11777;As said before. Whatever object you are trying to add. Add implements YourInterface to the class definition
11778;If you don't know what I am talking about it is time to find a Java tour and take that instead as I won't spoonfeed code
11779;Random one yoinked from Google
11780;http://tutorials.jenkov.com/java/interfaces.html
11781;@Sgt_Tailor no no i get what your saying. i ust can't edit the orignal object
11782;that's fine i'll find another solution
11783;thanks for the help üôÇ
11784;oh java
11785;interface Banana
11786;Hence wrapper class
11787;@luckcolors just make your methods accept interface
11788;kek
11789;I already technically did that just in the wrong language i guess
11790;kek
11791;cause this to me would sound proper func Register(obj SettableTextObject() {}
11792;i suppose for the java gods it isn't enough
11793;üòÑ
11794;You can make it accept Object
11795;Aka anything
11796;But then you have to cast it to a concrete type later if you need to retrieve it
11797;Or make more wrapper classes as others have mentioned
11798;You'll need a wrapper per type I guess
11799;Would only need one actually
11800;Nvm
11801;Class EpicWrapper extends YourConcreteType implements YourInterface
11802;But you'll figure something out otherwise head over to #offtopic
11803;@Sgt_Tailor Yeah thanks again üôÇ
11804;i realized my mistake
11805;thanks
11806;np
11807;I've forgotten
11808;the best way to go from unix nano string to RFC4449 string
11809;sounds like `time`
11810;parse it from unix
11811;format it to RFC4449
11812;`strconv.ParseInt` `time.UnixNano(0 i).Format(time.RFC4449)`
11813;ye
11814;hello does anyone know how to send a GET request NOT encoded?
11815;I'm going crazy
11816;How do I avoid making my code like 80% `if err != nil { InternalServerError(ctx) log.Error(err) return }`
11817;wdym cris?
11818;abstract it in functions
11819;I have to send a get request to an external api
11820;> not encodedwhat part
11821;unfortunately whoever did it doesn't know about url encoding... so every time I send a request net/http encodes url parameters for me
11822;I'll do that thanks diamond
11823;and i get a bad request error
11824;you can also use a middleware to change the function signature too
11825;"```gofunc Signin(r tx.Request) (interface{} error) { // If already signed in. if !r.Tx.Session.IsZero() { return &r.Tx.Session nil } var auth Authentication if err := form.Unmarshal(r &auth); err != nil { return nil httperr.Wrap(err 400 Invalid form"") } s err := r.Tx.Signin(auth.Username auth.Password r.UserAgent()) if err != nil { return nil errors.Wrap(err Failed to sign in"") } r.SetSession(s) return s nil}```"
11826;like this
11827;which abuses it
11828;@Dexti if you want to return on error you have to do the if check
11829;No way around that
11830;big sad. Thanks
11831;Beats exceptions
11832;yeah. I guess I'm just used to using try {} catch
11833;@Dexti i programmed in java for years but I must say go might be more verbose but it\'s better in the long run
11834;yeah I've been programming in both and I def. prefer GO
11835;btw I feel like the answer to my problem is here https://golang.org/pkg/net/url/#pkgoverview but I can't find where...
11836;ACTUALLY
11837;WAIT
11838;my mans
11839;go 1.15 literally JUST released a feature
11840;RawFragment
11841;:Thonk:
11842;is it really fragment?
11843;fragment is for the local browser thign isn't it
11844;uhhh
11845;oh wait
11846;not sure what they want to do tbh
11847;it has RawQuery too
11848;do they want the URL to not reencode everything?
11849;i think you can just override that
11850;Yeah I want it to NOT encode the query
11851;from what though?
11852;if you just concatenate the raw query inside the URL then Go shouldn't encode it
11853;https://play.golang.org/p/Hy4Gkogr578
11854;bazinga
11855;yes
11856;that's what i'm saying
11857;You can SET
11858;`RawQuery`
11859;you can set it to whatever you want
11860;ohw cool lemme try
11861;damn go is good
11862;wait how do I put that in an actual request?
11863;u.String() gives you the URL
11864;all the http client methods take a URL
11865;"https://golang.org/pkg/net/http/```resp err := http.Get(""http://example.com/"")resp err := http.Post(""http://example.com/upload image/jpeg &buf)```"
11866;thank you but what if I'm using http.NewRequest?
11867;well
11868;how about you read the documentation
11869;https://golang.org/pkg/net/http/#NewRequest
11870;that may be a useful hint for how to use a thing
11871;Can I show you my code
11872;please do
11873;warning that's noob code: https://pastebin.com/vdzSMmpB
11874;why do you do this
11875;Because if I send this request from postman it works fine. If I send it with go I get a bad request so I thought it's the encoding
11876;okay just
11877;slow down
11878;and look at your code
11879;i'll give you a hint
11880;"```govar q = url.Values{ search"": {`[{""key"":""tag"",""value"":""RL""}]`},}var url = https://api.raindrop.io/rest/v1/raindrops/0? + q.Encode()r _ := http.NewRequest(""GET https://api.raindrop.io/rest/v1/raindrops/0 nil)r.Header.Set(""Authorization Bearer  + viper.GetString(""RAINDROP_TOKEN""))```"
11881;you have all the pieces you need
11882;no diamond the literal entire point of this is that URL encoding the query string breaks the shitty service they're talking to
11883;yes haha
11884;You have all the pieces you need
11885;They're in the wrong order
11886;Think about this
11887;Here's what you're doing1) create http client2) prepare an http request3) create the URL for the http request4) send the request
11888;anything seem out of place
11889;I assume I need to create the url first
11890;right
11891;https://play.golang.org/p/Hy4Gkogr578
11892;here's the code snippet i posted earlier
11893;you have all the pieces you need
11894;I'm trying I swear but I can't see how do I put this URL in the request I'm getting an invalid pointer error
11895;how does url encoding break it
11896;you literally have to encode it else it's an invalid url
11897;¬Ø\\_(„ÉÑ)_/¬Ø
11898;k
11899;It seems like the API wants it unencoded
11900;or it wouldn't explain why it works through postman
11901;you know very well that not all applications follow spec
11902;it's probably some shitty php app written 10 years ago or whatever
11903;legacy/bad software exists
11904;and sometimes you have to interoperate
11905;Look @deezy I'm not sure what's the matter here but if I try to set the URL by creating a url struct it won't work. If I use the http.Get clearly I can't set the authorization header because I get a response and not a request
11906;well yeah
11907;don't use Get
11908;NewRequest accepts a URL argument yes?
11909;yes a string
11910;https://play.golang.org/p/Hy4Gkogr578
11911;not a struct
11912;a string
11913;yes
11914;now look at my code
11915;like
11916;actually read it
11917;line 14
11918;Yes of course
11919;I tried
11920;pointer error
11921;yeah but you said it won\'t accept a URL struct or i get a nil pointer
11922;okay
11923;so
11924;show your work
11925;cause if you did exactly what i did
11926;it'd be fine
11927;https://pastebin.com/HbHt4jbX
11928;I put the url before like you advised
11929;and then u.String() into NewRequest
11930;Hello guys. I was writing some code and I got veery interesting error.I don't understand why I'm getting it but It's really weird.```govar database libdb.GORMDatabasefunc init() { database err := initFunction(...) // error below is emitting from here}``` And I'm getting `database declarated and not used`Any ideas how fix it?
11931;(var err and just = can help me but I don't want to write this everytime)
11932;My go is 1.11.4
11933;You're not using the variable `database`
11934;You need to make use of it somewhere for this to be valid code.
11935;If you don't want to use it just replace it with an underscore (`_`)
11936;They probably wanna assign it to the global
11937;Put var err error above the line and do = instead of := @lapfed255
11938;I just don't understand why this isn't working
11939;I know.I already said it (var err and just = can help me but I don\'t want to write this everytime)
11940;Because := declares a new variable
11941;And youre not using that new variable
11942;And...
11943;it's the compiler he doesn't like to have unused variables
11944;but it's global.
11945;Did you listen to what i said
11946;:= declares a new variable
11947;err is a new
11948;var
11949;but database is glob
11950;both are new vars
11951;Because :=
11952;database in init shadows global database because of :=
11953;Because := declares new variables
11954;= does not shadow
11955;:= does
11956;Hence
11957;Put `var err error` one line above and replace := with =
11958;"or `err := error(nil)` if you don't like var ;)"
11959;Bad ideas go in #testing1
11960;smh
11961;I'm making an http API using GIN. It involves authentication and the use of tokens. How can I test it? Preferably I'd test it in golang.What exactly I'd like to do (simplified)```> POST /api/users< returns token id> POST /api/users/:id/profile (Header Authorization: token)< 200```My program is set up to look like this``` infrastructure  api  http.go (imports user_controller.go starts http server) domain  controllers  user_controller.go```If using the testing lib is a good idea should I put all my testing methods (i.e. `TestMethod(t testing.T)`) in user_controller.go or http.go? Putting them in user_controller.go would be pretty difficult
11962;bruh
11963;controllers package
11964;?go layout
11965;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
11966;oml there's so many different ways people recommend to set out your packages. Thanks for that resource.
11967;If someone can give an upvote here it would be great https://stackoverflow.com/questions/63382118/sendunencodedgetrequestsingo
11968;Quick question about this: https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1What would my controllers package become?
11969;it would dissapear
11970;you don't _need_ a controller
11971;it'd just be a function
11972;or a method
11973;So I'd just make them anonymous functions in the http router file?
11974;on a Web or RestAPI struct
11975;the controller pattern only makes sense in a language where http routes are tied to filesystem directories
11976;it's a grim legacy of php
11977;anonymous would be too much
11978;"`router.Get(""/foo getFooHandler)`"
11979;or whatever
11980;okay. Thanks
11981;https://github.com/friendsofgo/gopherapi and https://github.com/marcusolsson/goddd
11982;are rly good examples
11983;https://github.com/friendsofgo/gopherapi/blob/master/pkg/server/server.go @Dexti
11984;look at this file
11985;hi. im trying to use google sheets api with golang rn. Im running the quickstart.go program from them in order to authenticate my acc but when i click on the link given it says app not safe
11986;https://developers.google.com/sheets/api/quickstart/go
11987;what link exactly
11988;and like
11989;there's an explanation provided
11990;when you get those warnings
11991;ERR_CERT_NOT_VALID and so on
11992;well i dont wanna give the link
11993;but when i run
11994;the quickstart.go
11995;with my credential file
11996;it produces a browser list that i am supposed to go to
11997;and hit
11998;ACCEPT
11999;but google is blocking it
12000;This app hasn\'t been verified by Google yet. Only proceed if you know and trust the developer.
12001;okay
12002;yes
12003;that's normal
12004;because you're doing your thing
12005;and google hasn't verified you
12006;as a trusted auth/app developer
12007;im guessing there is a way aroudn this?
12008;yeah
12009;accept the warning
12010;because you're authenticating yourself
12011;The error is saying hey Google Account holder some program I don\'t recognize wants to access your personal data
12012;it's YOUR program
12013;If you clicked a random bit.ly link and got that prompt YES you should be concerned
12014;but you're literally trying to access your google account
12015;and getting an error page saying hey do you want to let this code access your google account?
12016;OH
12017;didn't know u can just conitnue
12018;that's what the button/link is for
12019;Accept/Allow
12020;whatever it's labelled
12021;it's right there on the page
12022;yea it was under advanced tho
12023;didn't know to click it
12024;Yep
12025;my b
12026;Sometimes you have to look
12027;and read
12028;Seriously
12029;any time you come across something that's alarming or confusing just
12030;read all of it
12031;i know there\'s a big red h1 at the to pof the page that says WARNING DANGER DEATH AND DESPAIR
12032;there's probably more if you keep reading
12033;yea wil do next time thank u
12034;finally got it varified
12035;now to find a github file of accessing
12036;spreadsheets
12037;thank u!
12038;The secret in all things is to slow down and absorb all the information that's available.
12039;i promise i undestand that
12040;but i believe that not just me
12041;no one would rlly click that button
12042;maybe u would
12043;but as an average
12044;coder
12045;advanced usually has stuff that doesn't regard to me
12046;well that's the point
12047;you're a developer now
12048;Advanced is where you live
12049;üôÇ
12050;me is a developer
12051;you can't get by just skimming headlines and closing tabs when you see an error message
12052;will do
12053;my question
12054;is why was that neccesaary
12055;if other golang examples require u to go through
12056;devlopers console
12057;okay well
12058;consider this
12059;it's a security measure
12060;it's to make sure that when you give some piece of code access to your data it can only happen explicitly
12061;https://i.imgur.com/xNJnRTx.png
12062;yep
12063;i installed https://sourceware.org/cygwin/
12064;for gcc
12065;sure
12066;did you put GCC in your PATH
12067;nein i thought it would do it its self when i installed
12068;let me google how to do it
12069;well
12070;i mean
12071;that's literally what the error said
12072;I have a question regarding the unsupported or dropped platforms. Will the compiler still create a usable binary for eg. Windows 2008 or will that not work?
12073;it probably wouldn't
12074;but the whole thing about unsupported is that it's dropped. so nobody's doing detailed writeups on parity
12075;you'll just have to try it and see
12076;but when doing developers console
12077;it doesn't have anyhting to do with web urls
12078;eg. https://www.prudentdevs.club/gsheetsgo
12079;sure if by dev console you mean browser debug tools
12080;that has nothing to do with google
12081;that's just http and html debug tools
12082;bruh im so lost
12083;ill be real idk what the terms they r even us ign
12084;using
12085;time to start googling
12086;this is what i was talking about
12087;slow down
12088;read as much as you can
12089;you don't have to understand or memorize it on the first past
12090;Get a big picture idea of what's going on as best you can. Then you can go back to specific parts open new tabs to search for relevant terms etc.
12091;best place to start learning go?
12092;?go learn
12093;Gopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Go by Example <https://gobyexample.com/>  SkippyA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  Skippy
12094;thanks
12095;particularly recommend the tour third in that list
12096;if a json field name is variable how can I represent it with a `json:` tag in order to unmarshal it into an interface?
12097;do tags accept wildcards  ?
12098;not really no
12099;you may have to use json.RawMessage
12100;and a custom unmarshal
12101;or possibly a map
12102;there's a couple angles
12103;Ah okat
12104;okay
12105;if it's one of a few things you can add a field for each and specify `omitempty` in the tag
12106;ooh
12107;clever
12108;nice yeah I would have to create one for every cryptocurrency on CoinMarketCap lol
12109;which seems suboptimal
12110;"I kinda wish `goimports` would turn```goimport ( fmt"")```into```goimport fmt""```"
12111;> nice yeah I would have to create one for every cryptocurrency on CoinMarketCap lolsounds like a job for maps
12112;"> I kinda wish `goimports` would turn```go> import (> fmt""> )> ```into```go> import fmt""> ```@superloach That works for a single import"
12113;https://play.golang.org/p/NkFH8zjENKp
12114;just keep the former
12115;for consistency
12116;or just don't care lmfao
12117;don't care is my current plan lol
12118;best plan
12119;huh I thought go didn't allow embedding an interface I guess it does now?
12120;like```gotype DB struct { redis.Cmdable Name string Opts redis.Options}```
12121;you can do it
12122;but it doens't do anything
12123;oh
12124;well that's silly
12125;it doesn't add methods
12126;or anything really
12127;yeah i'm not sure why that's allowed
12128;so either I have to wrap every `Cmdable` method or make `DB` an interface and make different impls for every `Cmdable` I want to use?
12129;or just make it a field I guess but that's dumb
12130;i don't know what you're doing
12131;I want to use a `DB` as a `redis.Cmdable`
12132;okay
12133;so implement the methods required by redis.Cmdable
12134;that being https://pkg.go.dev/gopkg.in/redis.v5?tab=doc#Cmdable
12135;yeah
12136;do that
12137;implement those methods
12138;that's a lot of methods
12139;or
12140;wait
12141;hm
12142;well first off
12143;and I want to just use a `redis.Client` or a mock client there
12144;hmm
12145;making the `Cmdable` a field and wrapping all the methods sounds easiest tbh albeit a lot of boilerplate
12146;> or make `DB` an interface and make different impls for every `Cmdable` I want to use?@superloach actually this sounds easier tbh
12147;because I'm just wrapping a standard client and then a mock client
12148;anyway I was supposed to start pizza like 10 minutes ago gtg
12149;@deezy @superloach https://play.golang.org/p/OdU2h3DlUom
12150;structs do inherit methods from interfaces
12151;I used this a lot in GUI
12152;oh my god
12153;:thonk:
12154;fucking
12155;of COURSE you can put methods on a interface
12156;oy vey this changes everything
12157;oh wait so it does work
12158;hell yeah
12159;The value of m.I is a structure that implements the interface named impl. And that satisfies the definition of struct named Main.
12160;no the value of m.I is an interface which contains struct impl that implements I
12161;luckily you can write your own interface to accept stuff rather than 100+ methods
12162;return structs accept interfaces
12163;im so lost with go and google spreadsheets. anyone know of a good video doing examples of it?
12164;unlikely
12165;is there a way to get build tags at runtime?
12166;:gopher:
12167;https://github.com/golang/go/issues/7007 guess not
12168;you could do a hack
12169;but i do not approve
12170;"```go// main.govar BuildTags map[string]bool// linux.go//+ linuxBuildTags[""linux""] = true// or whatever i don\'t remember the syntax```"
12171;basically
12172;initializing that buildTags thing is
12173;idk how that'll work
12174;hm not what I'm looking for but a neat solution
12175;well it's kinda what I'm looking for
12176;I wanted to enable debug logs if it was a test
12177;you have it backwards comrade
12178;your testing code should tell the logger to enable debug output
12179;:kek:
12180;hm true
12181;wish `sort.Ints` or similar has a `reverse=True` like Python for ascending sort having to write a custom function for it is quite inconvenient
12182;`sort.Slice`?
12183;OR
12184;you can sort it
12185;"`for i := len(sorted); i <= 0; i`"
12186;that too
12187;just iterate backwards
12188;e z
12189;once you've sorted your data you can make all sorts of lovely assumptions about it
12190;bleh my logger setup is annoying to change outside of the build tags
12191;I'll just manually use the debug tag if I need it :P
12192;detecting build tags is going to be more annoying than fixing your logging
12193;i 100% guarantee
12194;yeah for sure
12195;I was going about it totally wrong anyway
12196;I was thinking if there was a test tag I'd see that in the list but there isn't even a test tag
12197;and my logging is fine really
12198;you can't change the logging level without doing weird globals build tag magic
12199;that doesn't sound great
12200;my logger doesn't have levels
12201;there's just 2 different logger definitions one with the debug tag and one without
12202;:thonk:
12203;don't get me wrong build tags are tight as hell
12204;but
12205;like
12206;logging level is probably much more comfortable as a flag
12207;I'm not using flags at all
12208;env var works I guess
12209;yeah my point is
12210;use something slightly more flexible
12211;you can make this so much easier on yourself
12212;meh I'll mess with it later adding a `tags debug` to my test line isn't a bother
12213;I kinda wish `log` had a `Lmediumfile` or smth that showed the package path but not the full file path
12214;"fmt.Printf(""%#t"")"
12215;oh
12216;hmm
12217;the `/home/superloach/go/src/` just feels unnecessary and weird if you publish builds and see someone else's home dir
12218;just a nitpick I guess
12219;you can strip dir names
12220;https://golang.org/doc/go1.13#gocommand
12221;oh hm cool
12222;"```go row := db.QueryRow(sqlStatement Email Username) defer row.Close()``` using ```go""database/sql""""github.com/lib/pq""```do i not need to defer the row.Close()"
12223;because i get ```row.Close undefined (type sql.Row has no field or method Close)```
12224;generally speaking if CLose() exists you'll want to use it
12225;yeah so
12226;Close() doesn't exist
12227;well if it's not defined you can't use it lol
12228;not where you think it does
12229;problem solved
12230;so i do not need it ?
12231;again
12232;if it exists
12233;you probably need it
12234;ok
12235;but Row doesn't have a Close() method
12236;so
12237;well it doesn't so i guess not
12238;the question is moot
12239;thanks
12240;yikes `trimpath` forces a full rebuild
12241;well
12242;yes
12243;makes sense but still lol
12244;it's a build flag
12245;are you being charged per build or something?
12246;:kek:
12247;"I'm impatient ;)"
12248;he said about the fastest compiling language on the market
12249;she
12250;and true
12251;whoop
12252;it's fine
12253;just put trimpath in your dockerfiles
12254;and fuggedaboutit
12255;yee
12256;"works tho nice```[info ] github.com/gosnart/snart/bot/plugin.go:30: registered plugin admin""[info ] github.com/gosnart/snart/bot/plugin.go:30: registered plugin help""[debug] github.com/gosnart/example/main.go:13: is this thing on? :P[debug] github.com/gosnart/snart/db/token/open.go:14: enter>toks[debug] github.com/gosnart/snart/db/token/token.go:13: enter>env[debug] github.com/gosnart/snart/db/token/token.go:17: env>select[debug] github.com/gosnart/pluginadmin/plugin.go:19: registering[debug] github.com/gosnart/pluginadmin/plugin.go:40: registered[debug] github.com/gosnart/pluginhelp/plugin.go:18: registering[debug] github.com/gosnart/pluginhelp/plugin.go:46: registered[debug] github.com/gosnart/snart/db/token/token.go:27: select>stdin[debug] github.com/gosnart/snart/db/token/token.go:46: stdin>exit[debug] github.com/gosnart/snart/db/token/open.go:18: toks>tries[debug] github.com/gosnart/snart/db/token/open.go:21: tries>new[debug] github.com/gosnart/snart/db/token/open.go:41: new>open[debug] github.com/gosnart/snart/db/token/open.go:52: open REDACTED"">success[info ] github.com/gosnart/snart/db/token/open.go:37: ready```"
12257;yee yee
12258;plug
12259;@deezy I solved the problem with the URL. I used req.URL.Opaque but then I found out the API does want the url encoded just not the comma so I had to encode it myself as I couldn't find the right function in the standard library
12260;still to avoid encoding I had to pass the uri to that attribute
12261;Hey all not sure if this is the proper channel to post but I‚Äôm hosting a site on bluehost for the first time without using Wordpress. I managed to get the ftp set up and have it display hello world on the browser but I‚Äôm trying to figure out how to use my main.go file with templates working. Does anyone have any experience with this? I‚Äôve read a lot of the bluehost info but cannot find anything that is related to go. I‚Äôve got a hunch it involves .htaccess but am not sure. Any help at all would be greatly appreciated!
12262;:kek:
12263;yeah no
12264;that's not how go works
12265;?go tour
12266;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
12267;step one
12268;learn how to write go code. step two: learn how to run it on your own machine
12269;then you can figure out how to deploy it
12270;does bluehost even support go?
12271;That‚Äôs what I‚Äôm worried about  I know how to write go code and I‚Äôve managed to successfully run it in the browser but I‚Äôve never done any of the FTP stuff before. Only just graduated in December so some of this stuff is quite new..
12272;personally i use a vps on digitalocean for $5 a month
12273;and i never have to worry about shared hosting problems
12274;I‚Äôve found some stack overflow questions talking of running a go server on bluehost but it‚Äôs from 2014.
12275;I mean deezy is right tho
12276;If you can't write anything but hello world why worry about deploying a server
12277;I know how to write much more than that. I haven‚Äôt written a ton in go yet but I‚Äôve done a ton with python and c++ but my job uses go and I love the error handling it provides
12278;i mean if bluehost is just a vps
12279;then yeah you can host your go code there
12280;but first
12281;you have to learn how to run go code
12282;?go tour
12283;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
12284;?go modules
12285;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
12286;these too
12287;can anyone who's experienced with image processing or the go image lib take a look over at my code and tell me what's wrong? i'm trying to implement kernel convolutions but keep getting weird artefacts (again lol) https://github.com/fr3fou/imago/blob/master/imago/conv.go
12288;the weird rgb edges
12289;there's a lot more whacky examples in the _examples folder (some of them might be outdated as i've changed the code)
12290;None
12291;the image that i showed is generated using the conv_test.go
12292;and the kernel
12293;```go kernel := matrigo.New(3 3 [][]float64{ {1 1 1}, {1 8 1}, {1 1 1}, })```
12294;None
12295;this is the _intended_ result
12296;it's from an online generator
12297;interesting
12298;qq: is there a go's equivalent of Python's `for x y in [(i+1 j) (i j+1) (i1 j) (i j1)]:` ?
12299;best I can do is range something like `[]int{{0,1} {0 1} {1,0} {1,0}}`
12300;@_diamondburned_ oh yeah what you said there is correct.
12301;[][2]int{{0,1} {0,1}}
12302;@func
12303;@fr3fou that's the image quality
12304;None
12305;squares are noticeable on jpg
12306;anyone develop inside vim?
12307;I do
12308;why?
12309;That's all I use
12310;trying to find some tools for vim in go
12311;so far i installed https://github.com/fatih/vimgo
12312;Vimgio is quite good
12313;yeah im trying to get autocomplete
12314;I have to ask my fingers
12315;although i think vimgo adds completion to omni
12316;I may have to leave my phone to the computer to recall
12317;I'll go there
12318;maybe unpopular use vscode with go + vim plugin you get gopls + vim keybindings for nearly zero configs
12319;I just use vim ALE
12320;nah vscode's vim emu is nowhere near good
12321;it's pretty buggy in fact
12322;otoh vim's language server not as smooth as vscode
12323;no it's much smoother
12324;vim sux lol
12325;it literally doesn't use JS
12326;can't use rainglow in vim üôÇ
12327;regardless of how nonsense of a statement that is üôÇ
12328;I just type some if the word and then hit ctrln ..it's a vim feature
12329;I can't use an editor without multicursor editing tbh
12330;Cv
12331;you can have autocompletion in vim
12332;no need to rely on omni
12333;Don't see autocomplete in vimgo
12334;yeah I don't use vimgo lol
12335;I'll check Omni.
12336;I use vim only because it is found on every host of inx these days.
12337;ALE works on vim wdym
12338;And I like to keep my hands on the keyboard so that my typing is not interrupted.
12339;@James8880 cntr n is omni
12340;omni is vim's completion
12341;Page search for autocomplete at tpaschalis.github.io/vimgosetup/ I've not tried it tho
12342;so i guess you do have it
12343;vimgo must be providing source for omni
12344;looks i dont have to do aything
12345;Send the case
12346;Seems thats the case..
12347;which one would you prefer or there are better ones? https://play.golang.org/p/TnqEtxzocF1``` directions := [][2]int{{i+1 j} {i1 j} {i j+1} {i j1}} for _ direction := range directions { fmt.Println(direction[0] direction[1]) }``````  directions = [][2]int{{1 0} {1 0} {0 1} {0 1}} for _ direction := range directions { fmt.Println(i+direction[0] j+direction[1]) }```
12348;or it doesn't matter?
12349;eh
12350;I'd do second
12351;but put directions in global
12352;since it's constant
12353;call it directionsDelta or sth
12354;thanks
12355;since nothing is configuratble at runtime just hard code the values in to a constant slice of slices forget the math.
12356;you can't do const slice but the idea is the same w/ var yeah
12357;want to confirm one thing: `a` is a slice then `a = a[1:]` is constant operation correct? only pointer is changed underlying array not changed?
12358;correct
12359;i take back everything i said about pkger
12360;it's horrible
12361;how do I check myself? anything I can deduce from https://godbolt.org/z/17dsb7 ?
12362;found a decent alternative https://github.com/lu4p/binclude
12363;Hey does anyone knows how to use XOR operation on pointers ??
12364;what does that mean?
12365;Exclusive OR bitwise operation
12366;^
12367;This sign
12368;Represents XOR
12369;what would xor on pointers be like?
12370;Address of pointer 1 ^ address of pointer 2
12371;:GWslippyPeepoL:
12372;go only has bitwise xor on integers so maybe do a type conversion? not sure
12373;No no
12374;Type conversion won't help
12375;:thinkingo:
12376;Compiler is saying operator ^ is not defined for pointers
12377;https://stackoverflow.com/questions/47846206/bitwisexoronaddressingolang
12378;Stack overflow :GWslippyPeepoW:
12379;Ohh the unsafe package
12380;:thinkingo:
12381;Forgot about that package
12382;yeah cast it to uintptr
12383;no idea why you'd want this though
12384;also you'd want to cast back to unsafe.Pointer in the same line
12385;else you might get invalid memory
12386;also if the result isn't a valid pointer then the runtime will crash when the race detector is on
12387;im gophing
12388;im gopher
12389;ok found https://github.com/phogolabs/parcello
12390;seems p good
12391;just include the whole dir with `i .go'`
12392;isn't this something like pkger?
12393;yea i'm finding a pkger alternative
12394;because pkger broke
12395;@deezy when you embed an interface you can still set the implementation right? The field will have the same name as the type
12396;@_diamondburned_ Did you manage to get it working? I am trying it myself right now but it will not `go generate` though
12397;Tells me `... is a directory` I thought this is the point of this
12398;yeah
12399;@deezy https://play.golang.org/p/6dG6VCZpIEF
12400;So you can define what interfaces the struct embeds and provide the implementation later
12401;```go‚ùØ go generate ./...Compressing staticimages/na.png'Compressing staticimages/static_0.png'Compressing staticimages/static_1.png'Compressing staticimages/static_2.png'Compressing staticimages/static_3.png'Compressing staticimages/static_4.png'Compressing staticimages/static_5.png'Compressing staticimages/static_6.png'Compressing staticimages/static_7.png'Compressing staticimages/static_8.png'Embedding 10 resource(s) at resource.go'```that is good right?
12402;Then my resources is full of bytes good as well
12403;A bit like function pointers in C I guess
12404;No error seems fine Johnny
12405;"I should be able to server the images like this right? ```go router.Mount(""/test/ http.StripPrefix(""/test/ http.FileServer(parcello.ManagerAt(""/staticimages""))))```"
12406;I'll get this instead after `go generate ./...` and `go build ./...`: `panic: file does not exist`
12407;I don't know what lib you're using so maybe?
12408;This was more pointed to @_diamondburned_ he got it working already
12409;try removing first /
12410;in staticimages
12411;but thanks @Sgt_Tailor
12412;"if not try `parcello.Manager.Dir(""staticimages/"")`"
12413;Both not resolving the issue though.
12414;not sure then
12415;okay nevermind thanks
12416;Might be a problem with gochi router maybe.
12417;I'll try setup a quick example with http/net to compare
12418;Well clearly I am doing something wrong as a simple example will result in the same error
12419;Using `parcello.Dir` instead at least runs the app but I cannot get the content nonetheless
12420;@_diamondburned_ can you show an example of how you are using it to call a resource later on?
12421;https://github.com/diamondburned/smolboard/blob/renai/frontend/frontserver/frontserver.go#L16https://github.com/diamondburned/smolboard/blob/renai/frontend/frontserver/render/render.go#L167
12422;.Dir uses fs
12423;idk why it's there
12424;Well I cannot see I am making any mistake. Should I open an issue you think?```bash.‚îú‚îÄ‚îÄ build‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ test‚îú‚îÄ‚îÄ go.mod‚îú‚îÄ‚îÄ go.sum‚îú‚îÄ‚îÄ main.go‚îî‚îÄ‚îÄ public ‚îú‚îÄ‚îÄ images ‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ na.png ‚îú‚îÄ‚îÄ package.go ‚îî‚îÄ‚îÄ resource.go3 directories 7 files```
12425;"where main.go is ```gopackage mainimport ( net/http"" github.com/phogolabs/parcello"")func main() { d err := parcello.Manager.Dir(""images/"") if err != nil { panic(err) } http.ListenAndServe("":8080 http.FileServer(d))}```"
12426;you didn't import public
12427;and package go is ```gopackage public//go:generate go run github.com/phogolabs/parcello/cmd/parcello r i .go```
12428;it has to be dash imported in main
12429;oh darn
12430;or imported somehow
12431;also I hate how they use init but meh
12432;Well nice
12433;as a string.
12434;now the very basic example is working
12435;great
12436;now transfer this to react spa and uploads folder
12437;But my bet is I will again have issues fitting my reactrouterdom in there
12438;Jamesy‰ªäÊó• 18:40 as a string.
12439;@_diamondburned_ you said there was no better way to allow multiple crud opertations in one transaction than passing the tx as an arg. But does this just mean I shouldn't do that? It seems usefule to be able wrap multiple crud operations in a transaction. I don't want to put these functions in the database package because that would be mixing datalayer and business logic.
12440;you should still
12441;it's just a hassle with your layout
12442;I mean you can do withTx but meh
12443;how could I change the layout to make it better?
12444;just keep it it's not worth changing
12445;@_diamondburned_ I found the problem with parcello. I was symlinking my spa folder from my frontend project build directory and this was breaking parcello. After copying over the directory in filesystem parcello worked just fine
12446;@JohnnyTheSmith this has been quite a journey so it begs the question.. Is it still worth embedding over sorting out deployment of the assets
12447;Well I somewhat feel adventures. So I will try it. If it will not fit my needs I will revert back to deploying my folders and assets by hand
12448;"They neednt be deployed by hand but I guess it depends on the environment it's running in. Most things I try are an adeventure because I barely know what Im doing 90% of the time ;D"
12449;note that embedding isn't just used for server applications
12450;easier deployment goes for frontend applications too
12451;also goes for open source server applications that people could host themselves
12452;It is mostly the part where a non technical user just needs to double click an executable to be able to run my app
12453;That makes it very nice for me
12454;"So @_diamondburned_ I was solving an issue before this way and am wondering if this could work with parcello:```go / Working example using static asset in folder / fileserver := http.FileServer(http.Dir(getDir(""spa""))) router.Get(""/ func(w http.ResponseWriter r http.Request) { if _ err := os.Stat(getDir(""spa/ + r.URL.Path)); os.IsNotExist(err) { spaIndex := filepath.Join(getDir(""spa"") index.html"") index err = ioutil.ReadFile(spaIndex) if err != nil { logger.Error(""Error reading index.html of React Frontend"") } w.Write(index) return } fileserver.ServeHTTP(w r) })```"
12455;See how there is a check if some file within my folder exists? if yes it will server it directly and if not it will redirect to index
12456;This will take care of all the reactrouterdom routes within my single page application
12457;So does this parcello have a browsable (embedded) filesystem so I could either send the index file or otherwise server some embedded file directly?
12458;I get the usage for user applications hence why I said depends what environment it's running in server applications not so much though.
12459;Well looks like you could init a virtual File system with NewResourceManager
12460;Still need to figure how to do it properly
12461;It has to be a combination of a properly initialized ResourceManager and the walk func of this to check if a file is there or not
12462;Oh boy I am having a hard time ^^
12463;Why do you need to embed stuf
12464;I swear you've just not read the manual of the dozen different methods you've tried
12465;I tried creating a resource manager pointing to my virtual file system to walk it
12466;"```go rm _ := parcello.Manager.Dir(""spa/"") // rm := parcello.ManagerAt(""public/spa/"") if err := rm.Walk("". func(path string info os.FileInfo err error) error { if info.Name() == robots.txt { logger.Info(""Hitting robots.txt"") return nil } logger.Info(""Not hitting robots.txt"") return nil }); err != nil { logger.Errorf(""Error walking the resource manager: %+v err) } })```"
12467;I will get `ERRO[20200813T13:45:36+02:00] Error walking the resource manager: file does not exist ` every time
12468;so still something is wrong I think. But I should be able to walk the virtual files and see if it is there or not
12469;And I read the godoc for about 2 hours now trying different things
12470;well I got something
12471;Try getting something super simple working
12472;And expand from there
12473;I have this```INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt INFO[20200813T13:51:50+02:00] Not hitting robots.txt ```
12474;after exporting like:``` export PARCELLO_DEV_ENABLED=1 export PARCELLO_RESOURCE_DIR=./public```
12475;"using this code snip:```gorouter.Get(""/ func(w http.ResponseWriter r http.Request) { // decide if to serve file directly or to server index instead // to get reactrouterdom working rm := parcello.ManagerAt(""spa/"") if err := rm.Walk("". func(path string info os.FileInfo err error) error { if info.Name() == robots.txt { logger.Info(""Hitting robots.txt"") return nil } logger.Info(""Not hitting robots.txt"") return nil }); err != nil { logger.Errorf(""Error walking the resource manager: %+v err) } })```"
12476;Well funny though if just exporting the dev thing I will get ` panic: runtime error: invalid memory address or nil pointer dereference`
12477;if just exporting the dir I will get just the same error as before `file does not exist`
12478;only working when exporting both togerther
12479;so how do I handle this without exporting anything?
12480;Well this embedder is somewhat strange I get the feeling
12481;"For whom it may concern here is my solution:```go router.Get(""/ func(w http.ResponseWriter r http.Request) { // decide if to serve file directly or to server index instead // to get reactrouterdom working file err := parcello.Open(""spa + r.URL.Path) if err != nil { // Server index cause file is not there indexFile err := parcello.Open(""spa/index.html"") if err != nil { logger.Errorf(""Error opening index.html of React App: %+v err) fmt.Fprintf(w Error opening index.html if React App: %+v err) } indexContent err := ioutil.ReadAll(indexFile) if err != nil { logger.Errorf(""Error opening index.html of React App: %+v err) fmt.Fprintf(w Error opening index.html if React App: %+v err) } w.Write(indexContent) } fileContent err := ioutil.ReadAll(file) if err != nil { logger.Error(""Error opening file."") fmt.Fprint(w Error opening file."") } w.Write(fileContent) })```"
12482;Well but it will still need to export those variables. So I'd say this is not for me
12483;Well at least it does work outside of the project folder if compiled with those exported vars though
12484;Well I got a somewhat good setup now. I do the build via Makefile and export those env vars at build time. So the compiled app will have everything embedded just right and is working as expected. So I guess I managed to have a single file binary app afterall
12485;That's how you do it!
12486;Textbook 12 factor app
12487;Any recommendation for sending logs to elastic?
12488;print to stdout use a log collector
12489;yep
12490;@deezy this was somewhat sarcastic right?
12491;nope
12492;https://12factor.net/
12493;3) Store config in the environment
12494;lol someone just asked me> Anyone ever converted a Go package to Python by converting it to C first?
12495;wtf
12496;:pain:
12497;can anyone help me with caddy?
12498;only if you ask a question about it
12499;```Aug 13 13:21:50 openhacking caddy[1489]: 2020/08/13 13:21:50 http: TLS handshake error from 49.206.52.238:42036: no certificate available for openhacking.me'Aug 13 13:21:50 openhacking caddy[1489]: 2020/08/13 13:21:50 http: TLS handshake error from 49.206.52.238:42041: no certificate available for openhacking.me'Aug 13 13:21:50 openhacking caddy[1489]: 2020/08/13 13:21:50 http: TLS handshake error from 49.206.52.238:42042: no certificate available for openhacking.me'Aug 13 13:21:50 openhacking caddy[1489]: 2020/08/13 13:21:50 http: TLS handshake error from 49.206.52.238:42044: no certificate available for openhacking.me'Aug 13 13:28:50 openhacking caddy[1489]: 2020/08/13 13:28:50 http: TLS handshake error from 162.158.165.32:39152: no certificate available for www.gerejakatolik.net'Aug 13 13:33:07 openhacking caddy[1489]: 2020/08/13 13:33:07 http: TLS handshake error from 128.14.134.134:53302: no certificate available for 128.199.154.220'Aug 13 13:34:30 openhacking caddy[1489]: 2020/08/13 13:34:30 http: TLS handshake error from 49.206.52.238:43327: no certificate available for openhacking.me'Aug 13 13:34:30 openhacking caddy[1489]: 2020/08/13 13:34:30 http: TLS handshake error from 49.206.52.238:43332: no certificate available for openhacking.me'Aug 13 13:35:10 openhacking caddy[1489]: 2020/08/13 13:35:10 http: TLS handshake error from 162.158.165.32:37480: no certificate available for www.gerejakatolik.net'Aug 13 13:39:29 openhacking caddy[1489]: 2020/08/13 13:39:29 http: TLS handshake error from 162.158.165.32:46444: no certificate available for www.gerejakatolik.net'Aug 13 13:39:57 openhacking caddy[1489]: 2020/08/13 13:39:57 http: TLS handshake error from 162.158.165.32:39348: no certificate available for www.gerejakatolik.net'Aug 13 13:46:32 openhacking caddy[1489]: 2020/08/13 13:46:32 http: TLS handshake error from 172.68.146.96:40720: no certificate available for gerejakatolik.net'```
12500;> wtf@aditya their reasoning is that i like the go http client and the python one sucks
12501;okay and what are you doing
12502;those are the errors
12503;my website is not opening
12504;```This site can‚Äôt provide a secure connectionopenhacking.me sent an invalid response.ERR_SSL_PROTOCOL_ERROR```
12505;well
12506;`openhacking.me` isn't registered
12507;it is
12508;None
12509;oh wait tld not supported
12510;fair enough
12511;It resolves for me
12512;yeah resolves for me points to digital ocean
12513;https://www.ssllabs.com/ssltest/analyze.html?d=openhacking.me
12514;Looks like caddy isnt generating certs for domains
12515;looks like you just don't have any tls enabled
12516;Misconfigured
12517;my config files are all right
12518;which is wild cause like it should work out of the box
12519;i mean
12520;they aren't
12521;because you're getting errors
12522;Clearly not all right lol
12523;if everything was fine everything would work
12524;Show your config
12525;i keep creating the droplets and deleting them
12526;thats why maybe
12527;Great show your config
12528;because with everyother droplets it was working fine
12529;sure
12530;```# The Caddyfile is an easy way to configure your Caddy web server.## Unless the file starts with a global options block the first# uncommented line is always the address of your site.## To use your own domain name (with automatic HTTPS) first make# sure your domain's A/AAAA DNS records are properly pointed to# this machine's public IP then replace the line below with your# domain name.openhacking.me# Set this path to your site's directory.root  /var/www/html# Enable the static file server.file_server# Another common task is to set up a reverse proxy:# reverse_proxy localhost:8080# Or serve a PHP site through phpfpm:# php_fastcgi localhost:9000# Refer to the Caddy docs for more information:# https://caddyserver.com/docs/caddyfile```
12531;Is that it?
12532;Where do you set the tls provider stuff?
12533;caddy will do it automatically
12534;that's what's messing me up tho caddy should have 100% magic out of the box letsecnrypt
12535;i do ZERO tls configuration
12536;with caddy v1 at least
12537;Interesting
12538;no with v2 as well
12539;yeah it SHOULD be the same in v2
12540;but
12541;okay so
12542;thats what im saying
12543;Traefik gang
12544;the rest of the logs
12545;can you actually CONFIRM that caddy is securing your certs?
12546;or even trying
12547;will it take some time to revoke old certs?
12548;Irrelevant
12549;yeah not relevant
12550;just check caddy's startup process and make sure it's actually doing the letsencrypt styuff
12551;> can you actually CONFIRM that caddy is securing your certs?@deezy how can i confirm?
12552;read the logs
12553;"```root@openhacking:~# systemctl status caddy‚óè caddy.service  Caddy Loaded: loaded (/lib/systemd/system/caddy.service; enabled; vendor preset: enabled) Active: active (running) since Thu 20200813 13:13:10 UTC; 1h 35min ago Docs: https://caddyserver.com/docs/ Main PID: 1489 (caddy) Tasks: 10 (limit: 4915) CGroup: /system.slice/caddy.service ‚îî‚îÄ1489 /usr/bin/caddy run environ config /etc/caddy/CaddyfileAug 13 14:42:27 openhacking caddy[1489]: 2020/08/13 14:42:27 http: TLS handshake error from 64.41.200.105:52276: tls: client offered only unsupported versions: [301]Aug 13 14:42:28 openhacking caddy[1489]: 2020/08/13 14:42:28 http: TLS handshake error from 64.41.200.105:52492: EOFAug 13 14:42:28 openhacking caddy[1489]: 2020/08/13 14:42:28 http: TLS handshake error from 64.41.200.105:52724: tls: client offered only unsupported versions: [302 301]Aug 13 14:42:29 openhacking caddy[1489]: 2020/08/13 14:42:29 http: TLS handshake error from 64.41.200.105:52974: EOFAug 13 14:42:29 openhacking caddy[1489]: 2020/08/13 14:42:29 http: TLS handshake error from 64.41.200.105:53204: no certificate available for openhacking.me'Aug 13 14:42:29 openhacking caddy[1489]: 2020/08/13 14:42:29 http: TLS handshake error from 64.41.200.105:53458: EOFAug 13 14:42:30 openhacking caddy[1489]: 2020/08/13 14:42:30 http: TLS handshake error from 64.41.200.105:53686: no certificate available for openhacking.me'Aug 13 14:42:30 openhacking caddy[1489]: 2020/08/13 14:42:30 http: TLS handshake error from 64.41.200.105:53908: EOFAug 13 14:42:31 openhacking caddy[1489]: 2020/08/13 14:42:31 http: TLS handshake error from 64.41.200.105:54108: no certificate available for openhacking.me'Aug 13 14:47:06 openhacking caddy[1489]: 2020/08/13 14:47:06 http: TLS handshake error from 162.158.165.32:10706: no certificate available for www.gerejakatolik.net'```"
12554;yes
12555;journalctl
12556;that's what you've already shown us
12557;```[10:48 AM] deezy: just check caddy's startup process and make sure it's actually doing the letsencrypt styuff```
12558;systemctl status doesn't show complete output
12559;ok wait
12560;there's more to the logs than just that snippet
12561;letme restart caddy and take the logs
12562;yea just start from scratch
12563;https://pastebin.ubuntu.com/p/8JZJ6vGcqV/
12564;wow
12565;```Aug 13 14:49:35 openhacking caddy[1695]: 2020/08/13 14:49:35 [ERROR] acme: error: 429 :: POST :: https://acmev02.api.letsencrypt.org/acme/neworder :: urn:ietf:params:acme:error:rateLimited :: Error creating new order :: too many certi```
12566;it's almost like logs are good
12567;looks like you've been rate limited fam
12568;don't do what you're doing
12569;like destroying and recreating droplets is fine
12570;but you're also destroying your certs
12571;that what im saying because of this
12572;does it take time to reset?
12573;well
12574;you're being rate limited
12575;you're making too many requests too frequently
12576;what should i do now?
12577;you'd have to check the LetsEncrypt documentation for details on how they police their service
12578;well first
12579;stop doing what you're doing
12580;stop destroying your certs
12581;Now you gotta wait :)
12582;why are you destroying your droplet and creating an entirely new one
12583;im not destroying cert im just destroying droplets. may thats why
12584;well
12585;guess where the certs are
12586;on the droplet
12587;Inb4 ephemeral storage
12588;> why are you destroying your droplet and creating an entirely new one@deezy because of this issue
12589;no destroying the droplets is the CAUSE
12590;i mean
12591;for whatever reason
12592;You literally compounded the issue by doing this
12593;you hit rate limiting
12594;:facepalm:
12595;and then you made it worse
12596;So whatever you were doing BEFORE this is also bad
12597;so do i have to wait for 24hrs?
12598;no
12599;just stop destroying your certs
12600;Does it say 24hrs?
12601;no im asking
12602;my caddy instance has had the same certs for like 6 months
12603;Google letsencrypt rate limit
12604;Im sure it tells you how long youve to wait
12605;i have to wait for a weel
12606;How many times did you recreate the droplet
12607;```If you've hit a rate limit we don't have a way to temporarily reset it. You'll need to wait until the rate limit expires after a week. We use a sliding window so if you issued 25 certificates on Monday and 25 more certificates on Friday you'll be able to issue again starting Monday.```
12608;:kek:
12609;wow
12610;honestly this is the first time i've ever seen anyone hit the LE ratelimit
12611;is there an in built method to find all strings in list (a) not present in list (b)
12612;> How many times did you recreate the droplet@Str≈ìm 67 times
12613;in the strings lib or something
12614;Well thats what happens when you blindly do this without doing your research
12615;Why did you do it that many times
12616;^
12617;Also getting into more functional go is pretty great
12618;Surely after one or two times youd realize the droplet isnt the issue
12619;That's the question. The very fact that you regenerated certs 7 times in one day is uh
12620;not a good sign
12621;> Why did you do it that many times@Str≈ìm Actually im learning to setup a site
12622;thats why
12623;right but that doesn't require deleting the entire caddy installation
12624;and all the certificate it has generated
12625;^
12626;all you have to do is upload the new website content
12627;playing with ips thats why
12628;not relevant?
12629;IPs don't have anything to do with certs
12630;yeah i dont know that.
12631;What has ips got to do with this
12632;What about ips?
12633;It's just domain names
12634;now ya know
12635;im getting new ips everytime so im adding to my domain
12636;this is fun.
12637;yes that's normal
12638;because you keep destroying your VMs
12639;now i understand how caddy works
12640;> because you keep destroying your VMs@deezy yes
12641;My DigitalOcean droplet has had the same IP address for 5 years
12642;because i didn't delete it
12643;:kek:
12644;This is why you should do your research first and then do it
12645;Learn to read logs
12646;my digitalocean will exp the credit in 10days anyway
12647;so just playing with droplets
12648;You would've discovered your issue ages ago if you wouldve read the logs
12649;experimentation is fine
12650;you're fine
12651;just consider the steps we took to figure out the problem
12652;> Learn to read logs@Str≈ìm i already did plenty of time
12653;don't just look at the last few lines
12654;If you've been trying to regen certs a lot (read you deleted and recreated droplets) you could be hitting Let's Encrypt rate limits as well
12655;read the WHOLE log
12656;@Sgt_Tailor he is hitting them
12657;Big oof
12658;but just checking here and making sure
12659;Time to wait
12660;@emnaruto07 i mean youve proven that you havent been reading them
12661;Else you wouldve seen ratelimit 429
12662;This is why they have a staging repo as well :D
12663;So when experimenting it doesn't go boom after X tries
12664;"> Else you wouldve seen ratelimit 429""@Str≈ìm yes i missed that one i guess."
12665;Indeed
12666;no worries ill buy the new domain
12667;üòõ
12668;We've run into them a couple of times when implementing acme from scratch @deezy. Apart from that smooth sailing
12669;yeah doing it from scratch makes sense
12670;not while using caddy
12671;Nuking the VM is what cost them
12672;yup
12673;Instead of debugging trying the same thing
12674;Einstein has a definition for such behaviour
12675;is 40$ digital ocean is enough to make one prototypes?
12676;i mean it's a subscription
12677;so
12678;depends on what you buy and how long you want to have it
12679;2 months
12680;okay so find a droplet that costs 20
12681;¬Ø\\_(„ÉÑ)_/¬Ø
12682;i want to run 4 labs on that server
12683;can i create dockers on the servers. or i need more space?
12684;sure
12685;you'll run out of disk space eventually though
12686;Especially with python images the base is > 1gb :|
12687;No theyre not
12688;:robpike:
12689;i mean it only takes a few motherfuckers using different ubuntu base images to take up an easy 10 gigs on their own
12690;That's another thing I like about go is building and then importing artifacts into an alpine image
12691;god yes alpine
12692;30mb base image
12693;so kwispy
12694;Python alpine image is 17mb
12695;I had to build a few python tools a few weeks ago and all the images were over a GB each I didn't know there was an alpine python image
12696;10usd gets you 50G ssd 2G ram
12697;base 3.8.0 image is 333mb so you must be installing a lot @misterturtle
12698;Depending on what you are running that is fine as well. There is no universal answer
12699;Also id recommend against alpine for python
12700;Its ridiculously slow at installing pip dependencies
12701;The base layers are shared anyways
12702;I was going with their dockerfiles and thought the base was 1gb wonder what I saw then
12703;https://stackoverflow.com/a/43987872
12704;Can always upgrade the machine when you're running out of resources
12705;That suggests they're fairly large
12706;Just check yourself tbh
12707;3.4 is 800mb
12708;3.4 is 340mb
12709;OK so all your images based on that use the same layer
12710;Having more 3.4 images doesn't use 300Mb for each
12711;Maybe they've been slimmed down since that SO post?
12712;So long you use a unionfs which you almost definitely are
12713;Yeah they're layers different tools might pull in different bases
12714;@deezy so with 40$ i guess ill get 160gb of ssd
12715;so i can run 2 labs on one droplet?
12716;okay
12717;Honestly: just try. Nobody knows your exact requirements and we've been going in circles
12718;lol sure thanks
12719;@Str≈ìm are you looking at the compressed size on docker hub?
12720;Not in front of a laptop to check size once downloaded but I assume its uncompressed after its transferred
12721;> Its ridiculously slow at installing pip dependencies@Str≈ìm tfw speed shouldn't really matter for image building
12722;Hi what variable names would be the most idiomatic in this situation?
12723;"```gofunc GetTasks(c gin.Context) { rows err := database.GetAll(""tasks"") if err != nil { Error(c redis err) return } tasks := make([]types.Task 0 len(rows)) for _ row := range rows { t := &types.Task{} err := json.Unmarshal([]byte(row) &t) if err != nil { Error(c json err) return } tasks = append(tasks t) } Success(c tasks)}```Concerned about the variables `tasks` `t` `rows` and `row`"
12724;@superloach when its the difference of 20+m vs 5m it definitely is
12725;eh fair
12726;would it be possible to use a local pip cache?
12727;or like use build caching and only rebuild for a single additional dep at a time
12728;Maybe
12729;But there was nothing lost by moving away from alpine
12730;And there was very little image size difference
12731;Nothin that layering wouldnt offset anyways
12732;None
12733;From 22 minutes to 4 minutes @superloach
12734;0 reason to stay with alpine for python here
12735;damn
12736;fair enough
12737;Tell me again that speed shouldnt matter for image building
12738;And this is a very modest project
12739;22 minutes holy crap
12740;hot take: pip sucks anyway
12741;pip mostly fine
12742;imo python's good for tooling not applications
12743;No pinning by default sucks
12744;really good for like runonce data processing and stuff
12745;or interacting with an existing application in some way
12746;A lot of python stuff I've looked at is subject to pretty intense code rot
12747;but not for longrunning production stuff
12748;exactly past a certain point python just feels unmanageable
12749;particularly due to the weird module system
12750;it's really good at what it's good at which is easy writing and easy data processing
12751;which makes it perfect for tooling and stuff
12752;essentially it's a scripting language that people have tried to turn into a gpl
12753;I was put off after I had to spend 6 months code reviewing a framework written by an acquiring company that was done in python
12754;yikes yeah
12755;python `poetry` > python `pip`
12756;I'm put off by my own 5000line discord bot that I still have to deal with and am trying to rewrite in go :P
12757;do you guys know a tutorial for azure ad authentication with Go?
12758;A lot of it was obviously farmed out to first time programmers with some really .... really dumb shit in it
12759;the official docs are sparse
12760;https://docs.microsoft.com/enus/azure/developer/go/azuresdkauthorization @Sargas?
12761;https://github.com/jlubawy/goazuread example code from 2017 might be useful
12762;Eg writing logs to std out and a file? Better duplicate every log message with 2 functions one to file and stdout
12763;yikes
12764;@superloach that second link is new to me thanks
12765;the 1st one is anemic at best
12766;no prob hope it helps a little
12767;what's the right way to do integer/float arithmetic?```a := 1fmt.Println(a  0.1)```would spit `constant 0.1 truncated to integer`
12768;Then imagine that framework doing cradle to grave automation product testing
12769;tfw go just lets you make a pipe to file and stdout
12770;@rdnt those names are fine dont stress it
12771;do I have to cast it to float everytime I do it? `fmt.Println(float32(a)  0.1)`
12772;or there are easier ways
12773;@func you can declare it like this
12774;`a := 1.0` or `var a float32 = 1`
12775;then no casting will be needed
12776;or you can do `const a = 1` too which makes an untyped number that gets its type depending on where it is used this way you can use it with floats and ints
12777;what if I\'m calculating say quantity  price where quantity is an int price a float
12778;then casting is needed?
12779;yes
12780;also don't do currency calculations with floats
12781;^
12782;pls do not
12783;@func you can use a library that has numbers with better precision
12784;should I do currency calculations with something else other than float
12785;I use this one https://pkg.go.dev/github.com/shopspring/decimal?tab=doc
12786;yeah you want a decimal type
12787;or at the very least
12788;instead of operating in dollars and cents
12789;use integers and operate in cents
12790;wait
12791;and when I'm tired of extra APIs to deal with decimals I use micro dollars which are `int64` values.
12792;actually idk how you're supposed to handle factional currency units :thonk:
12793;like `1000000` is 1 Dollar
12794;or `1 currency
12795;if anyone's money property health or safety depends on precision do not use floats
12796;`1100000` is $1.1
12797;and so on
12798;yeah true you could blow out a few orders of magnitude for extra precision. but i guess a proper Decimal type is most correct
12799;both ways have worked fine for me
12800;@deezy you do the same techniques as typical fixedpoint but slow because you're using factors of 10 instead of 2
12801;it depends on the use case I guess
12802;and then you have to understand all the intricacies of fixedpoint arithmetic
12803;I'd avoid floats for monetary and rates calculations
12804;is the float advice specific to go or it's general for most languages
12805;https://pkg.go.dev/github.com/shopspring/decimal?tab=doc has served me well
12806;all languages
12807;it's intrinsic to how ieee754 floatingpoint formats work
12808;which is how floatingpoint numbers work in nearly every computing system in existence
12809;(unfortunately)
12810;((but that's another topic :D))
12811;good ol ieee754
12812;i wonder if we'll ever be free of it
12813;or is this just a fundamental property of representing numbers in binary
12814;honestly if we got better cpu support for fixed or decimal types we could have them
12815;floats are just clung to because there's hyperoptimized routines for them on most cpus
12816;Where does golang read files relative from with fs.Open?
12817;the current directory that you're running the program
12818;okay. Thanks üôÇ
12819;generally speaking
12820;it's better to use absolute paths
12821;do a quick search and it looks like decimal type should be in something like std given its criticality and easiness to screw up implementation I'd assume no? python has it
12822;or embed data if you need that
12823;spoilers
12824;it is
12825;math/big
12826;i think
12827;yeah
12828;That's a great Idea deezy. Thanks
12829;@Dexti And even if you MUST work relatively use `os.GetCwd()` and `path/filepath.Join()` and related functions
12830;So that you start with the absolute path to wherever you are ( if needed ) and then build absolute paths
12831;It's a file path that can be passed in with command line flags
12832;It takes a LOT of guesswork out of debugging
12833;Okay right on
12834;Then just use that
12835;um
12836;> also don't do currency calculations with floats@zephyrtronium very true
12837;?go float
12838;Don't use floats for currency <https://www.youtube.com/watch?v=PZRI1IfStY0>  Sgt_Tailor
12839;Wow pkg.go is looking super good on mobile
12840;I don't see the point tho
12841;https://play.golang.org/p/TrIuljV0bI
12842;basically this sorta shit
12843;We use use the smallest available unit in a certain currency and use that. For euros and dollars that would be cent for example
12844;So 1.35 usd would be 135 dollar cent
12845;but here's a question...135 cents divided by 2 is 67.5. so do you just drop those fractional cents?
12846;or uh
12847;you get rich by it
12848;:kek:
12849;charge customer (ceil) you pay back (floor) üòÆ
12850;yea you can't avoid division even if you switch to int how do you handle it
12851;In our situation we don't deal with dividing currency. A base unit costs X amount and we invoice that Y times
12852;no taxes?
12853;hmm
12854;that's a good point
12855;yeah i guess that makes sense nobody's going to charge you 67.5 cents
12856;okay now i get it
12857;the number theory clicked into place
12858;hmm I don't get it? what if you get a 15% off discount
12859;you could ceil or floor the discount
12860;Charge ceiling to customer
12861;and make it an integer before modifying the invoice
12862;there's some places they use like 1 usd = 1000 (3 supposedly decimals) or even more
12863;Ah yes taxes. At some point we do have to round up to the nearest cent I guess. Any rounding happens at the last step
12864;Any good http testing libraries you can recommend?
12865;If you make something 1.985 it's 1.99
12866;i mean the stdlib literally has httputil and httptest
12867;^
12868;ty I'll check them out
12869;@func like @deezy said a few messages above math/big helps with precision I think the shopspring/decimal package uses it internally.
12870;Hi does anyone know how to convert raw bytes to Megebytes? I'm kinda confused and I'm new to go. I tried looking online but didn't find anything that worked.
12871;divide by 1024 twice?
12872;^
12873;you probably want kibibytes rather than kilobytes. I think storage is usually measured in kibi/mibi/gibi etc. Although everyone uses kilobytes when talking about it
12874;Depends
12875;well I wanted it to spit it out in Megabytes like Neofetch does for example
12876;Hdd manufacturers use giga
12877;Df/du gibi
12878;like this
12879;divide by 1024 twice
12880;yeah thats what i'm trying to figure out right now.
12881;you could do something likeif mem > 1024  mem = mem / 1024loop until the number is < 1024 it should convert it from bytes to kb,mb,gb,tb etc.
12882;"This is my code right now```gopackage cmdimport ( fmt"" github.com/shirou/gopsutil/mem"" github.com/spf13/cobra"")func init() { rootCmd.AddCommand(systeminfoCmd)}var systeminfoCmd = &cobra.Command{ Use: systeminfo"", Short: Displays infomation about the user\'s system"", Run: func(cmd cobra.Command args []string) { ram _ := mem.VirtualMemory() fmt.Printf(""System Ram: %v / %v ram.Used ram.Total) },}```"
12883;Could also just decide by 2^X where x is a multiple of 10 you want
12884;2^10 will give you kb 20 mb
12885;And so on
12886;everyone actually uses GiB when they say GB
12887;because Windows uses 1024 for conversions which is technically bibytes afail
12888;I am contemplating over ditching my graphql plus rest api stack and do all the data queries with with rest as well. The reason I have chosen graphql was that I easily can extend my queries. It also is just one post request to fetch all the data. But client side as well as server side it is a lot of Boilerplate. So what are your opinions on this topic?
12889;"I personally would do that yeah; I consider gql a pretty big waste of time if I'm not making something as complex as a full GitLab clone"
12890;but I know some of the sites I use are migrating over and they have sane plans to do that
12891;like this https://sourcehut.org/blog/20200610howgraphqlwillshapethealpha/
12892;So actually right now my frontend fetches a game object which will have all the related data. It will have players which themselfes will have a imag and a score and throw rounds. The throw rounds will have three throw again. This is a pretty complex tree. Will this be easily doable with a db query an be presentable via json?
12893;"I think so; try it and see"
12894;How do you think it is Performance wise. On backend side with gqlgen the boilerplate is somewhat okay. But on frontend side the Apollo client used in react will come with at least 6 dependencies and a lot loc.
12895;measure it and find out
12896;performance can only be measured not predicted
12897;period full stop
12898;Well yes sure üëç
12899;What is your opinion on the first question @deezy ?
12900;Ditch gql and do Rest All the way or keep it?
12901;which one
12902;idk
12903;depends on your use case
12904;6 dependencies are needed to add 1 + 1 in react lol
12905;:facepalm:
12906;graphql is useful when you have many entities with many relationships and you will want to have very fine grained controls over how much of which entities and which relationships get pulled in by any one query
12907;Well actually I just track status of game score and Player. It will be a lot of data throughout the game though
12908;again graphql is about expressing complex partial/selective queries
12909;so
12910;does that sound like your use case
12911;But it will be just one query repeated and updated through the game
12912;Not really I guess
12913;Well need to think about it. Thanks for the opinions though
12914;hi
12915;Hi
12916;Hi
12917;what editors do you guys use?
12918;Vscode
12919;And goland
12920;Goland for GO WebStorm for JSX VS code for html/css python RubyMine for elixir
12921;nice
12922;Vscode all the way
12923;I use vim
12924;i use vim and https://www.onivim.io/
12925;so the plugin pacakge... you cant unload a plugin but what happens if you load a plugin in a seperate goroutine than the main routine? when the second routine with the plugin loaded ends would the plugin get trash collected and unloaded or are the plugins stored outside of the routine? sorry if this confusing. Also ill say that i havent tested this so sorry if its a dumb question
12926;is onivim stable?
12927;nope
12928;rip
12929;XD
12930;its in alpha
12931;i mean its stable enough to code in
12932;but extensions need a lot of work
12933;I honestly just want vim with images support
12934;~~for muh anime pics~~
12935;https://github.com/fatih/vimgo/raw/master/assets/vimgo.png
12936;@c0bbl3r I think it will be garbage collected yeah
12937;ok wait
12938;https://github.com/golang/go/issues/20461
12939;so ive read that and the my understanding on thier issue is if you load a plugin and then try to use the plugin in a routine and then the plugin gets unloaded what happens to the calling routine when accessing the plugin. i get the issue there but my question is a little different.
12940;no I don't think it's unloaded at all atm
12941;the issue is discussing issues regarding whether to unload plugins at all
12942;and where/when it should do that
12943;yea that makes sense just seeing if there was a hacky ish unintended way to unload them with garbage collection
12944;"not really; there's no unload function/method anywhere"
12945;you're better off going the IPC route tbf
12946;so i currently for a project im making goroutines for subprocesses then opening other bins with exec/cmd. the exes are all in go so i was wondering if i could compile them as plugins and then start the seperate routine run them then when done using them just kill the routine thus unloading them. i just hate subprocess calls.
12947;not sure what that means
12948;Hey I have just started learning Golang what is the best way to learn it? I struggle with watching youtube videos because they go way too fast
12949;Go Tour imo
12950;Go tour yeah
12951;?go learn
12952;Gopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Go by Example <https://gobyexample.com/>  SkippyA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  Skippy
12953;This is also my first language
12954;Go tour and gophexercises are good imo
12955;Do you know some cs principles ?
12956;I knew a little bit of C but not enough to actually do anything of worth
12957;So I am basically new to this
12958;if you want to spend money i highly recommend todd mcleod on udemy. he also cover some basic computer science principles.
12959;Have you tried doing the go tour ?
12960;https://www.udemy.com/course/learnhowtocode/
12961;You will probably get most of what you need to understand to start there
12962;You can google keywords you don't understand
12963;google go
12964;And ask questions here about topics / things you don't specifically understand
12965;Ok thank you
12966;oh I have a friend like that
12967;I will be talking in here frequently with questions xd
12968;Hope you guys won't mind
12969;I told him to go over the Go Tour and make a Discord bot
12970;that's what we're here for üôÇ
12971;and did like a quick 1 hour video chat w/ him about explaining the code and such
12972;I was looking at a video for a discord bot and the guy in the video I know it sounds stupid but his voice is so annoying
12973;lmfao
12974;it's for a hackathon so time is limited
12975;I could not stand it
12976;but if time isn't a limiting factor I'd just recommend doing lots of projects
12977;I did advent of code in go
12978;Well the first 4 days
12979;Cool challenges
12980;i solved a problem on leetcode once
12981;you can call me hackerman
12982;oh yeah I gave him AoC too
12983;he got sick tho üòî
12984;literally
12985;Oh shit
12986;AoC is cool
12987;Haven't done it in Go yet though
12988;why do it in go when you could do it in awk and prolog instead üôÇ
12989;Exactly!
12990;I did the first lot of cryptopals in go but I've since forgotten everything I learnt about crypto doing it
12991;ayy thanks for that
12992;would be a good activity
12993;anyone having issue with Goland on linux? i cant open the thing
12994;the thing?
12995;Goland
12996;Works fine here
12997;xorg or way?
12998;is any way to do this? type S2 struct{}v := make(S2{} 1)
12999;probably xorg because novideo üòî
13000;error:./intf2.go:56:14: S2 literal is not a type
13001;@JAMMA what are you making
13002;empty str
13003;what do you expect the 1 to do
13004;Xorg. For wayland you need to pass it some java magic param
13005;uct
13006;return a new Struct
13007;you can probably use XWayland
13008;that's not how you make new structs
13009;`v := S2{}`
13010;make() is for maps slices and channels
13011;?go tour
13012;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
13013;lmao we were talking about custom make implementions before
13014;i see cause I saw a := make([]struct{} 10)and tried to solo it
13015;right
13016;that's [] > slice
13017;because []struct{} is a slice of empty structs
13018;it's admittedly kinda opaque syntax
13019;in this specific scenario
13020;``a := make([]struct{} 1)[0]`` :blobrofl: (please don't do this)
13021;wait guys this is super wack but do you get why this:```gotype S struct { a uint16 b uint32}var s Sfmt.Println(unsafe.Sizeof(s)) // prints 8 not 6```
13022;brain farting
13023;16 + 32 = 48 bits which is 6 bytes and that rounds to the nearest increment of 8 I think
13024;> the alignment of a struct is the maximum alignment of any field
13025;probably padding
13026;to fit into pages and whatnot
13027;oh
13028;because uint32 has alignment of 4 bytes the struct's alignment is 4 bytes
13029;yah but it wasnt lol
13030;oh hmm
13031;so im lost
13032;russ cox is god so
13033;read his comment maybe?
13034;rsc is god true
13035;What does his comment below.say?
13036;yeah what's the comment lol
13037;1st pic was the comment
13038;oh huh
13039;I'm pretty sure you round to the nearest 64 bits (8 bytes)
13040;from that answer
13041;which makes 6 > 8
13042;And 12 > 16
13043;but idrk
13044;oh nvm
13045;wait what
13046;nah that says it's the max
13047;He says the alignment is the largest Field's size
13048;> the alignment of a struct is the maximum alignment of any fieldthis still applies
13049;the alignment of uint16 is 2 bytes the alignment of uint32 is 4 bytes so the overall alignment of the struct is 4 bytes which gives you width 8 to fit 6 bytes
13050;exactly what I've been saying lol
13051;wouldn't that make it 10 bytes?
13052;no?
13053;I believe that the alignment is on the word size.
13054;..which is 4 bytes
13055;I mean we could just test this out
13056;isn't word size 8bytes on 64bit?
13057;6 to 8 would make sense
13058;even for 4 or 8
13059;that's what I thought
13060;yea I think you're right
13061;it says the alignment of a struct is the largest alignment of any field which is usually the width of the field in a int32 and int16 example that's 4byte and 2bytes width is alignment so the fields are 6 bytes and then you add a 4 byte alignment for the struct (10 bytes)
13062;which doesn't make sense
13063;I think you're misunderstanding how alignment works
13064;Probably.
13065;Fields are aligned not structs
13066;What @superloach said sums this up well
13067;Oh I think I misinterpreted Ross Cox's comment then.
13068;this is the comment btwhttps://dave.cheney.net/2014/03/25/theemptystruct#comment2815his highness cheney
13069;oh yeah this is fun
13070;i've read this a lot before (the article)
13071;Their struct looks like `a a pad pad b b b b`
13072;some examples https://play.golang.org/p/ZPOq75i5ri5
13073;@Carson thanks :)
13074;oh! that makes sense now
13075;the padding representation gives clarity
13076;Notice that every field starts on a multiple of 4 bytes from the start of the struct because the alignment is 4
13077;basically makes a `struct{a uint16 b uint32}` addressable like a `[2]uint32`
13078;or whatever the largest field is
13079;Hey is it normal that this code https://play.golang.org/p/HCR9rft2Nvf output a invalid kind imo it should output slice no ? (the []int is not a mistake)
13080;though test case 9 in my examples actually disproves that hmm
13081;No?
13082;9 is 24 bytes which makes sense
13083;the c compilers have a pack option that removes the padding
13084;..of note..
13085;Largest field is 8 bytes so x gets 6 bytes padding y gets 4 paddings and z gets no padding
13086;@aditya 9 says 16 bytes for me??
13087;Oh NVM it's 16!
13088;so it appears to be packing like `x y y pad z z z z` or `x pad y y z z z z`
13089;@alexisvisco dereferencing a nil slice?
13090;er double each of those if we're talking bytes
13091;seems invalid to me
13092;that means the largest field size is determining the struct width not the field alignment
13093;> panic: call of IsZero on zero valueah yes
13094;Oh okay its like int
13095;https://play.golang.org/p/Ei3DI7H4kof
13096;it's like any  lol
13097;the pointer is nil and you're dereferencing it
13098;hence invalid
13099;.elem of a []T is T btw iirc
13100;@superloach who said 64bit ints are aligned to 8 bytes? üôÇ
13101;`x.Slice == ([]int)(nil)` @alexisvisco
13102;`x.Slice == nil`
13103;so you can't deref that
13104;"That's not quite a correct assumption; the alignment is still what matters"
13105;Russ Cox said that apparently
13106;But you're right
13107;None
13108;Where? :p
13109;this is often 8 bytes
13110;Am I misinterpreting that?
13111;https://dave.cheney.net/2014/03/25/theemptystruct#comment2815
13112;You\'re misinterpreting often to mean always üòÑ
13113;So it's aligned to 4 bytes yeah?
13114;That would explain that example then
13115;the maximum alignment of any basic type doesn\'t mean the size of any basic type then??
13116;makes sense I guess
13117;also that was 2014
13118;well that was cool
13119;thanks lethal and @superloach
13120;Well actually what I said wasn't quite accurate it looks like it's guaranteed to be wordaligned
13121;But my original point stands: fields are aligned not structs
13122;(well struct are aligned but that means the entire struct is aligned at an 8byte alignment not the individual fields)
13123;The alignment of a struct only affects the struct‚Äîit doesn't change the alignment of every field.
13124;hey guys new here
13125;i have an app im working on and i kind of hit a snag wondering if anyone could point me in the right direction
13126;@Carson can u give example
13127;`a a pad pad b b b b` so this doesn't change right?
13128;for the struct that sparked this convo
13129;The padding is there because `b` needs to be 4byte aligned
13130;So it needs to start on a multiple of 4
13131;Okay great I understand this üòÅ
13132;9 above looks like `x x pad pad y y y y z z z z z z z z`
13133;Notice that all the constraints are satisfied‚Äî`y` starts on a multiple of 4 and `z` starts on a multiple of 8
13134;im trying to build an app that emulates an iphone in order to get access and enter an app (finishline app)
13135;can anyone point me in the right direction?
13136;Is GoLang better than VSCode?
13137;that's ambitious
13138;Or easier
13139;or is there an easier way to access the apps pages? they arent available on the regular site but maybe on the backend
13140;honestly no clue what you're referring to
13141;this sounds like some deep ios app store stuff
13142;you may want to start there first
13143;As always with IDE choices: everybody has a preference. There isn't a clear winner
13144;hmmm
13145;i dont think it has to be emulated from an iphone
13146;Vim vscode goland acme
13147;```gotype S struct { a uint16 //starts on 0 pads 2 b uint32 // starts on 4 pads 0 c uint16 // starts on 8 pads 4 d uint64 // starts on 16 pads 0}var s Sfmt.Println(unsafe.Sizeof(s)) // prints 24 as expected```Yeah just tested in the playground. Cool.
13148;its basically accessing a website
13149;Ther wordpadding is done for faster access to fields at runtime because the field offset calculation is done using words. pointer values are usually at a word resulution. And in compiled code the set of fields is a list of workd alighed pointers. (sorry my keyboard is sticky)
13150;it\'s also not really clear what you want. how to access an app that isn\'t on the store or something?
13151;one way or another it seems like starting with people who have deep knowledge of the ios ecosystem would be better
13152;once you know what you need then you can start lookinga t how to make it happen in go
13153;i know what i need let me see if i can word it better lol
13154;no sweat
13155;take your time
13156;there is an app (finishline) which is basically the website finishline.com. login and everything is easy i have done it through golang. What i want to do is access a feature (enter raffles) that is currently an app feature. Is there a way to find out if i can just access the feature through the website as it is becasically the same as the app? that is why i wanted to emulate the phone.
13157;ot
13158;open the Inspector
13159;do stuff you want
13160;watch the XHRs
13161;oh phone
13162;I think you can attach DevTools
13163;"Has anyone used regex in chi URL params before? I feel like I\'m missing something really easy lol: I\'m setting up a route with ``r.Get(`/{day:\\d+}`,`` making a request to `/4` the route matches but then `chi.URLParam(r day"")` is an empty string"
13164;Unless you do MITM idk if you'll be able to see payload for the response on your phone. But I am not sure.
13165;@_diamondburned_
13166;putyour phone on home wifi and use wireshark while acessing the waned feature via phone
13167;I'm assuming it's Chrome
13168;though you can always decompile the thing
13169;Yeah and use a MITM and add the SSL certs to wireshark's tls page
13170;I decompiled an application yesterday for my friend kek
13171;and got the endpoints out that way
13172;turns out none of their read stuff was protected at all
13173;but yeah offtopic
13174;@Carson can you show the full route code?
13175;also where are you calling URLParam
13176;i had a bug like this before but I was calling it in a middleware
13177;I...am doing it in a middleware üòÑ
13178;i saw another bot do it like thisapp://finishline.com
13179;but not sure how
13180;.sorry my wireless keyboard has radio interferenceOFF TOPIC!!!! üòÑ
13181;yeah you need to do some weird chaining for it to work in a middleware
13182;Hmm is that specific to regex alone?
13183;@Rafiii that looks like a custom URI
13184;nah it's just route params in general
13185;I think
13186;I'm doing it elsewhere fine
13187;im going to try wireshark
13188;(without regex)
13189;I think I read this https://medium.com/@szablowska.patrycja/chiandmissingurlparaminmiddleware9435c48a063b
13190;"This is my setup: ```gor.Route(""/appointments func(r chi.Router) { r.Use(s.AppointmentDayMiddleware) r.Get(`/{day:\\d+}` s.GetAppointments(q))```"
13191;I try to parse the day in `AppointmentDayMiddleware` and my request is to `.../appointments/4`
13192;if I am creating an executable is it convention to name the main file `main.go` or do I name it after the project name?
13193;@Carson think you can still use net/http builtins
13194;yeah I think the article says something about that
13195;can't remember where in my code i have that
13196;try `r.With(s.AppointmentDayMiddleware).Get(``...)`
13197;wow that didn't screw up
13198;how
13199;Oh hmm...that actually does kinda make sense. I thought the article was a different case but it pretty much boils down to the same thing
13200;@Str≈ìm if you mean in this specific case I'm far past that lol
13201;lol
13202;@_diamondburned_ yeah that worked. So I suppose I can only get the param when in the specific context of the route with the parameter
13203;I think I had this mental model of the route matching before the middleware but that's obviously not correct thanks üòÑ
13204;yeah np
13205;Or I suppose the true solution would be to move the parameter into the toplevel route
13206;I had originally planned on having endpoints in the route that didn't require the parameter but then having the `r.Use` wouldn't make sense so I was just trying to do two things at once haha
13207;@aditya re this wouldnt it be somegthing liek this if fields are 4 byte align // 2,pad 2,4,2 pad 2 8 pad 8
13208;and struct was 8 byte align
13209;has to land on multiple of 4 right
13210;`a a pad pad b b b b c c pad pad pad pad d d d d d d d d`
13211;`d` has to start on 16
13212;to be aligned by 8 bytes
13213;oh sorry I think c pads more
13214;2 more?
13215;yeah c is `c c pad pad pad pad pad pad`
13216;yes 2 more
13217;and is it true struct has to be 8 byte align
13218;>
13219;?
13220;I believe so.
13221;and im lost why fields are 4 byte when im amd64 ??
13222;cause word size
13223;Yes
13224;Guaranteed to be word aligned
13225;but word is 8 right
13226;so would field pad to 8
13227;No it wouldn't. It pads to 4 even on amd64.
13228;For the fields.
13229;hmm
13230;but why struct 8 then?
13231;"Basic types 32 bits and smaller are aligned to their size; bigger than that is aligned to word size"
13232;Because `d` is 8 bytes on 64bit architectures it will be have an alignment of 8 and the struct has the alignment of its largestaligned field
13233;I think you still might be conflating the alignment of the fields with the alignment of the struct
13234;Add `e byte` after `d` and you'll see the size jump all the way up to 32
13235;But if you add a byte after `a` the size won't change at all
13236;Because if you add it after `d` the struct is no longer aligned to 8 so it needs to pad to a multiple of it but if you add a byte after `a` it doesn't affect the alignment of `b` so everything is fine
13237;ok lmme parse
13238;ok yah we good
13239;so 2 byte type would be align to 4
13240;right
13241;A 2 byte type has an alignment of 2.
13242;oh nvm read wrond
13243;nyone interview in go here?
13244;As interviewer or interviewee?
13245;@deezy i found this with shark http://prodmobloy2.finishline.com/
13246;:kek:
13247;kek
13248;Yeah lmao
13249;That‚Äôs what the app accessed when I used it on my phone
13250;no clue what this is supposed to be
13251;sure
13252;that's a domain it probablty does something
13253;I‚Äôm trying lmao idk
13254;when you're authed
13255;And you think the app auths the domain hmm
13256;well the page says access denied
13257;which means there IS something there
13258;true you think shark will show me what it sent the address to auth it?
13259;sorry to bother so much lol
13260;don't know what shark is
13261;wireshark I'd assume
13262;but it sounds like you need to sniff the http requests this app is sending
13263;wireshark
13264;okay
13265;here's a better question
13266;do you know what http is
13267;i dont know the exact definition
13268;tbh
13269;that's going to be a big problem
13270;stop everything
13271;https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol
13272;find an http 101 guide in your language of choice
13273;whatever you're trying reverse engineer is using http
13274;you'll make no progress until you actually know what that means
13275;You‚Äôre a king
13276;Thank you
13277;not saying it'll be easy especially if you're trying to plug into an API the owners don't want anyone else using
13278;it gets accessed just need to make sure its the one used to enter the app raffles
13279;Hey im not sure if this is possible or not
13280;but is it possible to send json using php to my golang application through ip? with out portforwarding
13281;wut
13282;what does that mean
13283;proabbly means https
13284;you don't want to port forward but want to connect 2 external IPs?
13285;without a domain
13286;on a local machine
13287;if you control both applications: https://ngrok.com/
13288;is ngrok open source?
13289;is there a diffr btwn somethin like```gofunc loadPage((p Page ) (p Page ) func loadPage()```
13290;like rn what i have is thisGo App > HTTP Server for sending server to dataand for the App to get dataGo App > Get JSON Data from HTTP serverI want to do this for getting dataHTTP Server > Send to Go App
13291;in terms of cost
13292;basically send json data to my Go App
13293;from php
13294;ah
13295;@Bart try websockets
13296;two way communication
13297;wouldnt that require port forwaring on the device the go app is running on
13298;you already have an open tcp port no?
13299;it doesnt iirc
13300;( http connections can be transparently upgraded to websockets )
13301;@JAMMA I'd assume you mean```gofunc loadPage(p Page) {}func (p Page) loadPage() {}```
13302;there you go
13303;and the question is whether this needs to be bidirectional and realtime
13304;idk how i would do thatLooking at this package for web sockets https://github.com/gorilla/websocket/tree/master/examples/echo its going to require portforwarding so websockets wont work
13305;in which case the first can be used as `loadPage(p)` while the second can be used as `p.loadPage()` or `(Page).loadPage(p)`
13306;Your client is already making an HTTP request to the server.
13307;If it can do that it can initiate a websocket connection.
13308;i mean cost wise@superloach are ptrs getting copied both time
13309;times
13310;I'm not sure I follow
13311;> and the question is whether this needs to be bidirectional and realtime@deezy basically when the server creates the json data i want the go app to be able to execute the command the moment its generated with out having the go app check every 45seconds+
13312;> If it can do that it can initiate a websocket connection.@Carson yes but for the go app to get the data using web sockets like that library i listed
13313;it needs to be portforarded
13314;No it doesn't.
13315;How do you think the server responds to your client?
13316;As long as your client is the one that initiates the connection (which you said it can above) no port forwarding needs to be done on its end.
13317;hmm
13318;ill look in to this and see if i can do it
13319;I don\'t have the time to explain all of NAT haha but you can think of a mini portforward happening when your client makes the connection to the server
13320;Your router port forwards right then so it knows how to receive the return traffic from the server
13321;That's the channel over which the websocket can be formed
13322;this looks so complicated
13323;re @superloach > Remember that Go passes everything by value meaning that when Greeting() is defined on the value type every time you call Greeting() you are copying the User struct. Instead when using a pointer only the pointer is copied (cheap).
13324;just try it out lol
13325;ah right
13326;then yes a ptr is copied
13327;hmm both times rght
13328;a method receiver works like any other arg yes
13329;as far as calling is concerned
13330;hmm
13331;does sleeping in a goroutine also pause the tickers inside that goroutine?
13332;Tickers exist on their own goroutine
13333;But I forget if they will write to C without something reading it
13334;Probably is unbuffered
13335;it's 1 buffered and drops future ticks iirc
13336;Looks like to just drops ticks if the read doesn‚Äôt happen
13337;Yeah
13338;Would be fairly easy to just write a test on the playground to find out @Kanra
13339;I see just tested it
13340;the ticker keeps going but functionally it seems like a pause
13341;thanks
13342;cast
13343;"for _ item := range result[""items""].([]interface{}) {}"
13344;although you are better off with strong typed
13345;Why's that?
13346;```gotype Item struct { Name string}type Obj struct { Hash string Items []Item}result := Obj{}json.Unmarshal(data,&result)for _ item := range result.Items{ item.Name}```updated it
13347;named types are good
13348;compile time bug safe
13349;``Obj.Items undefined (type Obj has no method Items)``
13350;well yes `Obj` there is a type
13351;`result` is your instance of `Obj`
13352;ohh
13353;thank ya'll for the help
13354;im learning go
13355;that's good to hear
13356;im hoping go is the way to go
13357;to set default value in struct it looks like I have to write custom constructor any other options?
13358;like https://play.golang.org/p/4CDNo1FvEeR
13359;you can also define a base value
13360;er
13361;maybe not
13362;nevermind
13363;also can I share struct? not sure if the question makes sense```gotype cat1 struct { name string}type cat2 struct { name string}type cat3 struct { name string}...```cat{1,2,3...} have the same fields can I somehow only define only once?might like below which doesn't work```type cat1 cat2 struct { name string}```
13364;no real use case just that I'm lazy and don't really want to repeat the same defns if I can avoid
13365;if they are similar why creating several? ü§î
13366;type namething struct { name string}type cat namething
13367;you can imagine they fit pet interface but with different impl of methods
13368;you can alias if anything
13369;nice
13370;you can embed or alias
13371;how do I instantiate with embedded struct? got the error in https://play.golang.org/p/R5FlSrQ2ru
13372;"```type pet struct { name string}type cat struct { pet}func main() { fmt.Println(cat{name: foo""})}// error: cannot use promoted field pet.name in struct literal of type cat```"
13373;https://stackoverflow.com/questions/44123399/howdoiinitializeacomposedstructingo
13374;"cat{pet: pet{name: foo""}}"
13375;thanks so embedding adds extra layer not the same as alias
13376;well:
13377;```gotype one = int // this is an aliastype two int // this is a type redefinition you can add methodsfunc(v two) Something() int { return v}// This is embeding the struct three will have the Read method coming from io.Reader and will be accepted in Reader interfacestype three struct { io.Reader}```
13378;the actual alias has it's uses but `one` it will be come exactly an int and accepted in `int` params
13379;when you do `type two io.Reader` you'll lose the methods (since they are from Reader type and not from two type
13380;thanks @stdio  didn't know those differences
13381;well now that rust is dying go seems like the way to go
13382;I need a job
13383;go is not dead yet
13384;but why not java
13385;hmm
13386;I'd come to funeral it might be entertaining
13387;Because of necromancers
13388;Morning If I have a filepath such as /var/www/html/test as a string and I want to go up a directory to retrieve /var/www/html as a string how would I approach it?
13389;@Ainsley I think `filepath.Dir` would give you what you want
13390;How about two directories?
13391;`filepath.Dir(filepath.Dir(pathAbs))` This isnt very elegant
13392;:robpike:
13393;:cowboysunglasses:
13394;"@Ainsley not sure of a super elegant way built in but I found an ugly hack you can gag at ```gopackage mainimport ( fmt"" path/filepath"")func main() { fmt.Println(filepath.Clean(""/my/path/is/long/../../""));}```"
13395;Great thanks @cybereal
13396;tabs are the default for gofmt but how wide are the tabs?
13397;that's the whole point of tabs each editor can display `\\t` however the end user wants
13398;urg i guess i shouldnt mix indendation and alignment
13399;i mean just align everything relative to your tabs
13400;although gofmt may do stuff to unnecessary whtiespace
13401;just let gofmt do its thing
13402;let go
13403;gofmt is nobody's favorite but it's everybody's favorite
13404;or something
13405;gofmt's style is nobody's favorite but gofmt is everybody's favorite
13406;You don't have to like a format to like standards :p
13407;tabs are better for accessibility reasons
13408;We should ditch spaces in all languages
13409;are you sure?
13410;Yes
13411;tbrh it only works if you disallow mixing
13412;completely
13413;For people with bad vision they will often have larger than average font size
13414;otherwise its trivial to convert indentation from whatever number of space to another
13415;If you use tabs they can configure smaller tab sizes so that they dont have to do proportionally larger side scrolling
13416;when is github going to support go.mod for dep graph
13417;?
13418;<https://github.com/andersfylling/disgord/network/dependencies>
13419;Ah
13420;most editors support reindenting using spaces
13421;i just want it to woooooooork
13422;@![Wys] Juzi i cant tell what youre trying to say
13423;Are you advocating for spaces?
13424;yes
13425;Why
13426;there's no real reason not to
13427;....
13428;I just gave a reason why
13429;https://www.reddit.com/r/javascript/comments/c8drjo/nobody_talks_about_the_real_reason_to_use_tabs/
13430;Read this
13431;ah u're actually invested in this i thought you we're being playful at first
13432;as i said editors allow you to reindent
13433;even if you're using spaces
13434;Read the article please
13435;read it
13436;my argument stands
13437;Are you visually impaired
13438;Serious question
13439;now thats just being rude üòâ
13440;wait did u actually read the whole thing and compare it to ur view that quickly?
13441;If not then i dont think youre in the position to downplay what visually impaired developers have to go through to manage codebases with spaces
13442;to me since editors allow reindenting code with spaces and that mixing spaces with tabs always causes issues
13443;we should just use spaces for everything
13444;Youre downplaying the inconvenience of that
13445;just reindent
13446;Every time they pull and every time they commit
13447;They have to change to tabs and back
13448;And you consider that a non issue?
13449;yeah since they should have been using a formatter in the first place?
13450;I hope youre taking the piss now
13451;lmao
13452;@andersfylling yes im serious about this accessibility is a seriously downplayed and unconsidered issue in software development
13453;hey dude if you wanna argue about it at least stay polite
13454;Case and point here
13455;think about it
13456;for example in python
13457;I have
13458;For weeks
13459;using tabs?
13460;mixing causes issues
13461;use spaces and everyone is on the same page
13462;Python doesnt deserve recognition for being whitespace based
13463;A principle i disagree on for said reasons
13464;? its a major language
13465;doesn't mean its design decisions are good
13466;see: php java javascript
13467;i dont think its worth wasting time over trying to reconcile tabs with spaces
13468;but yes
13469;Of course you dont
13470;this is a dumb argument
13471;tabs vs spaces is the oldest meme in the book
13472;because you can only ever use space for everything but tabs can only be used for indentation
13473;I dont think accessibility is a dumb argument
13474;spaces over tabs.... I can't think of a legitimate reason why
13475;no i mean this argument happening right now
13476;accessibility is good
13477;this discussion is a dead end
13478;@misterturtle did you read any of what i said
13479;I legit gave a huge legitimate reason why to use tabs over spaces
13480;I saw accessibility reasons but can't see anything saying why it's better for accesibility reasons
13481;Read the link
13482;tabs are configurable by the editor representing them AND they show intent spaces are just visual.
13483;Bad formatting
13484;The problem is
13485;Tab sizes can be configured peruser to adjust to different font size and screen size needs
13486;Visually impaired people tend to have a considerably larger font size
13487;With spaces (lets say 4 spaces per indent) the indent size grows proportionally with font size
13488;Yeah we're in agreement here spaces suck
13489;At larger than average font size this increases the horizontal screen size requirements requiring more horizontal/side scrolling and leaving less of the code on screen
13490;With tabs those people can reduce the indent size without having to arduously change from tabs to spaces and back on every commit (or changing from 4 spaces to x and back)
13491;"Hi guys I have an issue with os.Remove on windows. I get access is denied when calling os.Remove(""myapp.exe"") after having executed exec.Command(""myapp.exe"").Output(). I don\'t understand why the executable is locked after it is finished executing."
13492;are you sure it's actually done
13493;also
13494;windows will lock a file if you write its name on a scrap of paper and bury it in a peat bog
13495;so
13496;lol
13497;like pid doesnt exist
13498;that much dead
13499;you'll porbalby want to use some sort of windows debug tool to see who has a lock on the file
13500;i use font size 20
13501;and spaces
13502;just fine
13503;#offtopic
13504;¬Ø\\_(„ÉÑ)_/¬Ø
13505;if i dont call exec.Command I can easily call os.Remove
13506;if windows was a real os you'd have lsof
13507;@Atakan it could be doing anything from nothing to sending the .exe to redmond for analysis
13508;myapp.exe simply prints something which i want
13509;https://medium.com/sensorfu/howmyapplicationranawayandcalledhomefromredmondde7af081100d
13510;oh you were semi serious maan
13511;The take away point is.... who knows what windows is doing with your .exe when you run it but as @deezy said you could run something like I dunno procmon or process explorer and figure it out
13512;http://techgenix.com/unlockinglockedfiles/
13513;yeah
13514;time to start debugging
13515;thanks a lot guys
13516;If the lock is released in an arbitrary time you could loop and sleep for a max time limit to try and remove it
13517;yeah it could be a timing problem it could be that the go runtime is holding onto that file maybe fuckin Defender is locking it
13518;who knows
13519;however access is denied error is distinct from file is open in another program error afaik
13520;¬Ø\\_(„ÉÑ)_/¬Ø
13521;find out
13522;ill still take a look some also pointed at antivirus gotta check that out as well
13523;windows is super bad
13524;so
13525;you've got your work cut out for you
13526;thanks may the Go Gopher hug you in your sleep
13527;hey guys
13528;i solved the issue
13529;turns out our lil Windows needs some time
13530;to release the lock
13531;so a simple time.Sleep was enough to solve it
13532;Are there any compile time checks I can make on option structs
13533;like
13534;you MUST provide a non nil value for this option struct that takes one
13535;a value can't be nil if it isn't a pointer
13536;Other than that I mean
13537;nope
13538;i.e. if i want it to take a pointer
13539;rip
13540;that's the only compile time check
13541;as far as i'm aware
13542;There might be a tool that can check this kind of stuff mayb
13543;would be good
13544;i mean
13545;Good morning deezy
13546;```gotype ThingOptions struct { Foo string}validateThingOptions(to ThingOptions) error {}func NewThing(to ThingOptions) (Thing error) { var t Thing err := validateThingOptions(to) if err != nil { return t err } // do the needful}```
13547;¬Ø\\_(„ÉÑ)_/¬Ø
13548;nice and clean
13549;Hey guys)
13550;How can i create 2d array and have map inside?
13551;um
13552;A 2d array where the inner most array is maps?
13553;In javascript
13554;` arr := [][]map[string]struct{}{}`
13555;oh
13556;idk
13557;^ [][]map[K]V?
13558;I tried this
13559;[1000][map[steing]int]
13560;yeah that's not right
13561;I need something like that
13562;`arr := [][]map[string]struct{}{}`
13563;compare what you did
13564;to that example
13565;```[1000][map[steing]int][][]map[string]struct{}{}```
13566;you have to keep track of where you open and close your []
13567;they matter a lot
13568;"arr[1][""First""] = 1"
13569;Will it work?
13570;try it and see
13571;[]map[string]int
13572;in JavaScript?
13573;ü§®
13574;:thinkW:
13575;No gdscript
13576;wat
13577;:yes:
13578;Golang
13579;I mean
13580;üòÇ
13581;try it and see
13582;if you can literally type the code out
13583;you can paste it into your editor
13584;play.golang.org also exists
13585;Deezy it says
13586;have you done the tour
13587;?go tour
13588;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
13589;you might benefit from reviewing
13590;Yes i did
13591;well
13592;maybe do it again
13593;refresh memory
13594;"you have `[]map[string]struct{}` and you\'re doing `lobby[""something""]`"
13595;you have a slice of maps
13596;how do you index slices
13597;https://discord.com/channels/118456055842734083/118456055842734083/743852481884454934
13598;he has [200][]map and wants []map
13599;at least on the usage
13600;oh yeah that too
13601;there's a lot going on that
13602;Here is what i want but in javascript
13603;Is it possible in golang?
13604;yes it's possible
13605;you just gotta do it right
13606;yes and no i mean ^
13607;you've actually been given the solution
13608;"you cant do `lobby = [];`"
13609;you need to say what types are there
13610;it sounds like refreshing yourself in the tour would be benefical
13611;but you can initialize variables with things but just differently
13612;Map type?
13613;üòÇ
13614;i think you really need to do the tour again mate
13615;it's okay maps fucked me up real bad for a while too
13616;[100]map[string] NOT wirking
13617;Maps are where the treasure lies.
13618;[][]map[string]int
13619;I made a tour
13620;the hell you want 100 for
13621;@wesley1989 That's not how you initilaize a map go through the tour again.
13622;Ii even typed in google how to initilaze array with map inside
13623;"```go lobby := make([][]map[string]int,10) lobby[0] = []map[string]int{ {""johny"":1 } } lobby[1] = []map[string]int{ {""ben"":2 } }```this is roughly the translation of that js"
13624;good that's not enough so go do the tour
13625;@stdio don't do [10]
13626;actually initialize the map with make
13627;@_diamondburned_ that's only because he does indexes after
13628;or declare it with value
13629;then use make
13630;yeah could be make
13631;array != slice
13632;Why are we not using a slice here?
13633;fixed it
13634;[][]map[string]int. Is not an expression
13635;use the make one should work
13636;but regardless do the tour
13637;why do you need to make?
13638;I have redone the tour yesterday
13639;Its enough
13640;just to pre alocate some stuff to later do lobby[1] = something
13641;fun fact
13642;i've re read the tour about 150 times
13643;> Its enough@wesley1989 youre not inspiring confidence right now...
13644;you're definitely super super super duper not done with the tour
13645;the amount youve gone through the tour is definitely not enough
13646;"```golobby := [][]map[string]int{ {{""johnny"": 1}}, {{""ben"": 2}},}```"
13647;it's not enough
13648;the proof is your struggling right now
13649;hell i still hit up the tour at least once a week to refresh myself
13650;go
13651;sometimes revisiting the tour and reinforcing what you previously read really helps
13652;Okey i will redo the tour))
13653;also helps for something like this information gaps
13654;we're happy to help but
13655;we're only human too and have our own lives
13656;it\'s like trying to teach someone how to repair a car engine in French and all they know is oui and frommage
13657;baguette
13658;Oui
13659;its wasting everyones time if you dont do the work yourself
13660;@superloach that works but it's a bit different from js translation inits vs adding stuff later
13661;well yeah
13662;but it's more straightforward
13663;should've done it that way in the js too :P
13664;yeah I would definitely prefer that (init one)
13665;@superloach wow thank you so much you are the best!
13666;no prob :)
13667;@deezy oui oui fromage baguette
13668;omelette du frommage?
13669;I speak german french russian english and little armenian
13670;üòÇ
13671;fromage et oeuf sur pain :0
13672;I changed my mind
13673;I will not do the tour))
13674;why not
13675;Too lazy
13676;l m a o
13677;you got that right
13678;welp too bad
13679;hmm
13680;what does `go test` do to stdin?
13681;like I can tell it's just immediately eofing but how
13682;and can I detect that somehow
13683;but why
13684;why are you trying to detect or even care about stdin
13685;None
13686;Works
13687;Thanks again guys for help. I really appreciate it
13688;that's not the same but yw
13689;gg
13690;:robpike:
13691;EXPose
13692;hey no shame in learning man
13693;tour of go be teaching me math bruh
13694;This is why I am unemployed
13695;lmao
13696;try golang
13697;language familiarity is not really a hard requirement
13698;unless you're applying to a language team I guess
13699;I'm nitpicky on languages
13700;as long as we aren't expected work with C++ day to day i'd be fine
13701;that language makes me feel utterly worthless (I'm somewhat ok with C so don't get me wrong)
13702;"how do I parse \'mm\ format for month? I currently use naive `flag.Int(""month int(now.Month()) Month"")`"
13703;generally speaking one of the %things in `time.Parse`
13704;it's not clear what problem you're actually having though
13705;I want to pass it as a cmdline flag say `./binary month 01`
13706;sure
13707;keep going
13708;that isn't the actual problem either
13709;that's just ParseInt
13710;can I force it between 0112 when accepting flags? or I have to parseint and throw error if not
13711;nope
13712;just load the flag and exit() if you got bad args
13713;do an if
13714;"```flag.Parse()if whatevr > 12 { fmt.Println(""you fucked up""); os.Exit(1)}```"
13715;^
13716;log.Fatalln btw stderr
13717;oh right
13718;good enough
13719;then `1` and `01` both works I guess I also have to do validation after parse?
13720;yeah
13721;`flag` does literally nothing except take a string from stdin and convert it to one of a very small set of types
13722;everything after that is on you
13723;or after market flag libraries
13724;what's wrong with 1 :Thonk:
13725;if you want to validate 01 vs 1 then you'd want to use a string type and manually do string validation
13726;just thinking that if you mandate a mm format then 1 should be illegal
13727;https://golang.org/pkg/flag/#Value
13728;well
13729;in theory
13730;i think you can write your own types to plug into flagsets?
13731;i haven't dug into this yet
13732;"the if + int doesn't mandate MM format; you'd want a string for it"
13733;but then again why?
13734;http://blog.ralch.com/tutorial/golangcustomflags/
13735;oh hey
13736;if you want a date format don't use flags in the first place
13737;use a date string
13738;i mean it's entirely possible this app only cares about months
13739;or that it isn't a DATE
13740;maybe it's a duration
13741;I was only experimenting actually
13742;fair enough
13743;yeah it looks like you can define your own type
13744;OH and also
13745;you MIGHT be able to check various stdlib packages and see if it implements that arg Getter/Value interface
13746;wow I just found out about golangsci and it's kinda cool
13747;gave me good tips and things I missed
13748;golang sci?
13749;science?
13750;it's some kind of linter
13751;oh I added an S
13752;https://github.com/golangci/golangcilint
13753;Hello sirs. Is there any tip for finding support with cgo library?
13754;what cgo library?
13755;have you tried googling it?
13756;how would I check return value of `defer client.StayConnectedUntilInterrupted(ctx)`
13757;cus I can't assign value to a var
13758;```godefer func() { stuff := client.StayConnectedUntilInterrupted(ctx) // ...}()```
13759;or https://play.golang.org/p/7CnyqbD7cjQ
13760;oh so I need to build an anonymous function
13761;thanks
13762;Anyone notice that Chrome has gotten substantially slower ever since a new edge browser got installed by microsoft?
13763;im noticing the new edge browser is significantly faster and chrome is significantly slower
13764;inb4 Edge is slowing down chrome
13765;no edge is just faster
13766;None
13767;am I dumb or is go vet dumb
13768;you forgot `()` at the end
13769;oh
13770;that's a syntax error not a vet complaint
13771;I never use those ano functions
13772;the syntax feels weird
13773;What's everyone's view on Goland?
13774;I'm not convinced it's worth the price for me
13775;it's slow but it's good if you want a lot of functions
13776;beta access to all jetbrains product is free
13777;Atm I'm enjoying vscode with wsl2 integration
13778;also github student and other student licenses give you all jetbrains product
13779;Is the beta reliable enough?
13780;probably
13781;using vscode here so not sure
13782;I might give the latest a go then thanks @Karitham
13783;Although vscode/wsl2 with docker has proven a pretty good compromise for full blown linux on my work machine
13784;> what cgo library?@_diamondburned_ not actually a library  it is built into go üòÑ https://golang.org/cmd/cgo/
13785;also raised a stack overflow but only upvotes till now https://stackoverflow.com/questions/63410554/golangcgoappdelegateimplementationdoesntwork
13786;how does versioning in go work?
13787;I am trying to rewrite a package and I will be completely changing the API so all programs that are currently using the package will break
13788;how would I specify which version of a package a program should use?
13789;bump major
13790;you'd do `importpath/v2`
13791;like github.com/author/repo/v2/path/to/package
13792;hmm yeah I guess that works
13793;thanks
13794;?go modules
13795;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
13796;Read that @Deleted User
13797;`map[string]map[string]string` how I can make this valid?
13798;`map[string](map[string]string)`
13799;wdym valid?
13800;that is valid
13801;you just have to be careful with it
13802;that is value of the parent map will be nil
13803;ok thanks
13804;Oof I'm still trying to get started on this mmo server and its still so everwhelming
13805;I keep finding these gems on github too but they make it seem like an even bigger project than I thought it was
13806;@Sgt_Tailor thanks
13807;oh it's even bigger than that comrade
13808;that combines the hardest possible things to want to do
13809;latency sensitive networking code game design UX authentication
13810;gonna shill what I found: https://github.com/nanomsg/mangos
13811;which might be useful when you do networking
13812;Aw ty
13813;can I search usages of a function across GitHub repos? something to do with sourcegraph?
13814;function in std pkg
13815;Accross multiple repo ?
13816;yes
13817;Of u use visual studio the go extension is helpful for that
13818;Never seen that may not be impossible tho
13819;you can use sourcegraph for that yeah
13820;or just github search
13821;sourcegraph gang
13822;ok sourcegraph employee
13823;stop bully
13824;no bully
13825;tried signing contract today couldnt change my name after i set it to an abbreviation
13826;had to email in asking them to resend a new one :pepe:
13827;was it nsc?
13828;üòî
13829;docusign scammed me
13830;nice didn't know sourcegraph has indexed github public repos already
13831;Search works across githubs 100k most popular repos iirc
13832;"anything wrong with `t err := time.Parse(""20200814 20201115"")`? got an error cannot parse 1115 as 008 https://play.golang.org/p/ptUJEmHKKjh"
13833;"> To define your own format write down what the reference time would look like formatted your way; see the values of constants like ANSIC StampMicro or Kitchen for examples. looks like ok to me no?"
13834;@func what format are you trying to set up? Those values don't look like anything reasonable
13835;`YYYYMMDD`?
13836;yyyymmdd
13837;yes
13838;@Gavin if you keep a reference of buff after the handler exits yes
13839;Then `20060102`
13840;"The values aren't arbitrary; you need to use the values present in the `time` docs"
13841;ah yes you're right
13842;Note the paragraph you quoted: write down what the reference time would look like
13843;> These are predefined layouts for use in Time.Format and time.Parse. The reference time used in the layouts is the specific time:> > `Mon Jan 2 15:04:05 MST 2006`
13844;thanks
13845;also that reference time looks oddly specific might be the birth of golang or something
13846;oh
13847;i didn't even know that :kek:
13848;i thought it was kinda spooky that the Parse() function just accepted arbitrary human datestrings
13849;and just figured it out
13850;None
13851;"why is resp nil in `resp err := http.Get(""https://go.dev"")`?"
13852;https://play.golang.org/p/XvVy9V18VjC
13853;Probably because err isn't nil
13854;yes it isn't nil how would a simple Get fail?
13855;```The playground can use most of the standard library with some exceptions. The only communication a playground program has to the outside world is by writing to standard output and standard error.```
13856;ohhh
13857;@func well what does the err say
13858;Theres thousands of reasons why a http request might fail
13859;:robpike:
13860;"> Get https://go.dev/"": dial tcp: lookup go.dev on 169.254.169.254:53: dial udp 169.254.169.254:53: connect: no route to host"
13861;There you go theres one reason
13862;One of thousands
13863;Http requests arent just simple
13864;Its an incredibly complex process
13865;With many layers of abstraction built up
13866;Not really
13867;Could someone please point me in a direction to learn how to make a microservice framework (used to migrate the company backends to microservices)
13868;I'm not asking for a step by step guide just somewhere you would recommend I should start.
13869;> I'm not asking for a step by step guide just somewhere you would recommend I should start.@tfyl I liked this episode of go Time on the topic https://changelog.com/gotime/126
13870;Haven't heard of it before. I'll listen to that episode
13871;Hopefully it's good and I listen to the others as well
13872;@evandocarmo Thanks for the recommendation
13873;What does your company deploy to @tfyl
13874;Nothing in particular I just want to learn for future use.
13875;Ah ok
13876;Hello Gophers. I have a quick question about goroutines. Basically I need to know how to count them.1) I have an HTTP server written in golang. It uses the Gin framework which in turn uses the Golang standard HTTP library. From what I understand the standard library spawns each new HTTP request in a new goroutine.2) I want to initiate a server shutdown such that:  1. no new HTTP connections can be established  2. the work finishes in all existing HTTP requests  3. the server shuts downI found Atomic Counters in the GoByExample to be exactly what I need:<https://gobyexample.com/atomiccounters>However this example does `wg.Add(1)` before the goroutine is spawned.In my case the goroutine is spawned by the standard library.Do I have to use a different solution? Does someone want to point me in the right direction?
13877;yes
13878;make a http.Server
13879;and close that gracefully
13880;Oh like this? <https://stackoverflow.com/questions/39320025/howtostophttplistenandserve>
13881;yeah
13882;How does that work with websocket connections? Will it automatically terminate an ongoing WebSocket connection with data flowing back and forth?
13883;the request's context should be cancelled
13884;so use the context where appropriate
13885;I don't follow
13886;(http.Request).Context() in the router
13887;use that in the websocket
13888;I've not used Contexts before. How do I know if the server/context is canceled? Do I check for the Done channel on the Context?
13889;that's one way
13890;the other is to pass the context into wherever you could
13891;> `const maxInt = int(^uint(0) >> 1)`nice
13892;https://golang.org/src/bytes/buffer.go?#L47
13893;I used to use math.MaxInt{32,64} for max value this is straightforward w/o pkg import
13894;i actually have something like this in my discord lib too
13895;what would minInt loook like in similar fashion?
13896;maybe just `int(^uint(0))`?
13897;That'd just be 1 :p
13898;`^maxInt` works though
13899;`^int(0)` is 1 `^uint(0)` is something else (18446744073709551615)
13900;`^uint(0)` is the largest uint
13901;`int(^uint(0))` as you wrote is 1
13902;Or actually it's an overflow haha
13903;But if it were to be interpreted as an `int` it would be `1`
13904;(it works if you assign `^uint(0)` to an intermediate value)
13905;why does it work differently with an intermediate value?
13906;`^uint(0)` literally is a constant which means the compiler can bounds check it for the type into which you're trying to convert it
13907;Once you assign it to a value it's no longer a constant
13908;"(and when I say literally I mean in the literal sense of that appearing in your code; not as emphasis :p)"
13909;"I download a gz file and unzip it to a local file with something like below```r err := http.Get(""url.gz"")zr err := gzip.NewReader(r.Body)_ err = io.Copy(destWriter zr)```there are lines in the file that I want to filter out how do I do it before/while I write it? Or I have to do the filtering after I write to the local file?"
13910;make a scanner
13911;and copy each line
13912;does scanner have to go line by line or I can launch goroutine to do multiple lines at once? I don't mind the order of the result
13913;`text/scanner`?
13914;I think he meant bufio scanner?
13915;yeah bufio.scanner goes line by line
13916;text is a bit too overkill
13917;```govar scanner = bufio.NewScanner(zr)for scanner.Next() { if scanner.Text() { }}```
13918;etc etc
13919;scanner may have a write to method that i'm not aware of
13920;so no way to optimize it with goroutine or others? each file I'm dealing with has hundreds of thousands lines
13921;would love some speedup if possible
13922;wdym optimize it with goroutines
13923;https://stackoverflow.com/questions/27217428/readingafileconcurrentlyingolang
13924;where do you think the bottleneck is that would require goroutines
13925;^ maybe that not necessarily goroutine just a way to read them concurrently
13926;I'd wager that IO is a much bigger bottleneck than scanning and checking ifs
13927;so a buffered write IO may even give you more performance
13928;and read
13929;Could you just do multiple files at once?
13930;Instead of multiple goroutines per file
13931;I'll do some experiments thanks
13932;I mean order doesn't matter but I heavily doubt an if is enough of a bottleneck to justify using goroutines
13933;I am trying to build a cli which can interface github workflow of creating remote repo adding local files to that repo with one cli. I came up to cobra but I don't think I want that. Is there any other way on how should I do it?
13934;Reading though the history it seems that @_diamondburned_ really doesn‚Äôt like fyne and you‚Äôve got strong opinions against the API. Can you provide some feedback on how it could be improved please? We have aimed to make it as simple as possible!
13935;Not entirely sure I would agree that the API is too lowlevel the hello world app has the shortest code of almost any toolkit I can find!
13936;hello there does sanyone here uses gincontrib/cors to enable CORS headers on gin endpoints?I would have some beginner questions on the setup since for me is not working and I cant seem to find out why.thanks in advance
13937;last time someone had this problem they switched from gin to gochi and all their problems went away
13938;it's probably fixable in gin
13939;but the consensus is that gin is not as good as other options
13940;so you think the problem is gin rather than the lib @deezy ?
13941;it seems like there's little familiarity with gin in the hivemind
13942;and in general people complain less about gochi so
13943;i can only make vague generalizations
13944;I'm sure gin CAN work
13945;with enough elbow grease
13946;so to a newbie you would suggest gochi instead of gin? to avoid the elbow grease?
13947;will try it out thanks a lot
13948;yeah i DO have personal experience with gochi
13949;and i've never had major issues with it
13950;@andy.xyz it's not that I really don't like fyne it's just that I haven't revisited it since the last time I've tried it
13951;I'm not sure where I've said that I don't like it
13952;do golang support threads
13953;no
13954;go has goroutines
13955;when performing escape analysis what do `<autogenerated>` and `.this` mean in `<autogenerated>:1 .this does not escape`
13956;Is it considered ok for different tests to rely on each other?
13957;depends?
13958;you could do subtests or TestMain
13959;I'd like to test the whole flow of create user > login as user > get profile.But I can't get the profile of a user before I've created one.
13960;that's an intergration test
13961;which is valid
13962;but may not necessarily be something you do in a UNIT test
13963;finally made a a discord bot that can play a single youtube video using google api
13964;but how should i stop the player
13965;should i find the length of the video then set a sleep timer?? seems kinda rough around the edges
13966;surely there's some way to find out when there's no more data to play
13967;an EOF error or
13968;something
13969;looking at quickstart godocs. do i need to reauthenticate every time i need to make a request/post or is it possible to do it once and save it to a variable or smth
13970;i can't be clicking on a link if my program is running headless
13971;depends on the auth system
13972;based on what hte quickstart godocs use
13973;oauth2
13974;right but like
13975;okay
13976;there
13977;i dont get why i have to authenticate a link everytime i run it
13978;if an oauth2 owned system allows fully automated access you'll have the ability to create those credentials in your developer admin panels
13979;some sort of bot token/secret
13980;google definitely does
13981;just explore your google dev console
13982;if i were able to read documentation well
13983;i wouldn't be here asking the questions
13984;¬Ø\\_(„ÉÑ)_/¬Ø
13985;i suck bad at reading documentation
13986;that's why you have to practice
13987;practice reading documentation and practice independent exploration
13988;when i have the time i do.
13989;lemme see if i can formulate my question
13990;more specifically
13991;None
13992;took me 15 seconds
13993;anyways
13994;not the answer to my question at all mainly cause i adidn't specify it
13995;Your question is how am i supposed to use oauth2 with a headless client
13996;lemme retry
13997;just give me a sec
13998;lol
13999;"I found an mmo server framework ;;"
14000;yuss
14001;https://github.com/name5566/leaf
14002;so after looking more detailed in the quickstart code i see that srv becomes the client variable
14003;and i inputed my own credentials and token
14004;i now think i can use that varible to call the functions
14005;but i haven't been able to find the documentation for go sheets
14006;i see it for all the toher langauges tho
14007;https://godoc.org/google.golang.org/api/sheets/v4 i found this
14008;seems relatively straightforward
14009;```config := &oauth2.Config{...}// ...token err := config.Exchange(ctx ...)sheetsService err := sheets.NewService(ctx option.WithTokenSource(config.TokenSource(ctx token)))```
14010;"```gob err := ioutil.ReadFile(""credentials.json"") if err != nil { log.Fatalf(""Unable to read client secret file: %v err) } // If modifying these scopes delete your previously saved token.json. config err := google.ConfigFromJSON(b https://www.googleapis.com/auth/spreadsheets.readonly"") if err != nil { log.Fatalf(""Unable to parse client secret file to config: %v err) } client := getClient(config) srv err := sheets.New(client) if err != nil { log.Fatalf(""Unable to retrieve Sheets client: %v err) }```"
14011;oh wait
14012;was able to pull this from it for client auth
14013;what are you using again
14014;oauth2
14015;no i mean what is `sheets`
14016;"```go""google.golang.org/api/sheets/v4""```"
14017;i believe its from there
14018;yeah
14019;okay so
14020;welcome to an incredibly complicated API
14021;https://godoc.org/google.golang.org/api/sheets/v4#Service everything is here
14022;one thing that has been tripping me up
14023;is that the docs
14024;yep
14025;i thought i would have to create the
14026;functions they say
14027;but its like
14028;just showing u how to call it
14029;using the
14030;import
14031;no you create a sheetsService() which will have various methods on it
14032;like GEtSheet() or whatever
14033;and then THAT would have methods on it for getting/setting cells etc
14034;yea
14035;so lets say if im using this as an example
14036;None
14037;this is where i get lost
14038;right
14039;lest say im simply trying to create a spreadsheet
14040;that's just a data type
14041;you're starting from the bottom
14042;you gotta work top down
14043;this library is so convoluted
14044;i mean in theory you could ctrl+f for SpreadsheetsCreateCall and see what other functions accept/return it but that may be a needle in a haystack
14045;the name of that type is making me stressed
14046;i would personally start top down
14047;Look at the SpreadsheetsService figure out what methods it has on it
14048;yea im only looking for the ones i have a use for
14049;but i believe
14050;the documentaiton reading
14051;is all the same
14052;once u understand
14053;how its presetned?
14054;Well the documentation has to have...everything in it yeah. You'll have to filter through it
14055;yea
14056;like ```gofunc (r SpreadsheetsService) Create(spreadsheet Spreadsheet) SpreadsheetsCreateCall```
14057;i accidentally type in my IDE
14058;but i dont even see create
14059;let alone
14060;what is it expecting me to pass
14061;thats the issue i dont know where the types n stuff come from
14062;at some point of making things you realise that a lot of people in a language follow the same ideas of how to make things
14063;and you can easily go straight to the point
14064;> what is it expecting me to passa value of the type `Spreadsheet`.> thats the issue i dont know where the types n stuff come fromif you don't see a prefix e.g. `whatever.Spreadsheet` that means it comes from the same package. so in YOUR code it'd be `sheets.Spreadsheet`
14065;ah so yea it is sheets.spreadsheets
14066;but its a
14067;method
14068;?
14069;No?
14070;it's a type
14071;`func (r SpreadsheetsService) Create(spreadsheet Spreadsheet) SpreadsheetsCreateCall`
14072;that's a method singature
14073;yea thats a method i meant
14074;everything inside the parentheses are types
14075;yes
14076;on the SpreadsheetsService type
14077;oh okay so it knows that sheets.spreadsheets uses
14078;type of
14079;spreadsheets service
14080;yeah
14081;cause it's all the same package
14082;so I need to be the one that passes tpye spreadsheet
14083;yeah
14084;you create a `sheets.Spreadsheet` that decribes the sheet you want created
14085;and then you pass it to Create()
14086;and Create() returns a CreateCall value that probably has room for success/error messages etc etc
14087;okay yea understood that
14088;phew
14089;but now
14090;how do i konw wht
14091;the
14092;spreadsheet type
14093;takes
14094;by reading the docs
14095;it's there
14096;in that godoc page
14097;fun fact: the types in godocs are linked
14098;```gotype SpreadsheetsCreateCall struct { // contains filtered or unexported fields}```
14099;0_0
14100;no way
14101;lemme see
14102;those are links
14103;"```gotype Spreadsheet struct { DeveloperMetadata []DeveloperMetadata `json:""developerMetadata,omitempty""` NamedRanges []NamedRange `json:""namedRanges,omitempty""` Properties SpreadsheetProperties `json:""properties,omitempty""` Sheets []Sheet `json:""sheets,omitempty""` SpreadsheetId string `json:""spreadsheetId,omitempty""` SpreadsheetUrl string `json:""spreadsheetUrl,omitempty""` googleapi.ServerResponse `json:""""` ForceSendFields []string `json:""""` NullFields []string `json:""""`}```"
14104;yeah
14105;wowzer
14106;there you go
14107;now you know how to use go
14108;just open the godoc find the method you need follow hyperlinks to make note of the types you need
14109;@deezy what's in spacefucker
14110;uh
14111;oh
14112;https://gist.github.com/therealfakemoot/1447f10036067831e210f824cd6a9f69 the greatest space drama of all time
14113;volume warning
14114;wtf lmao
14115;The generated code for some of those google apis are a dumpster fire
14116;uhhh yeah i went into the github
14117;to see what i could figure out
14118;holy balls
14119;It‚Äôs incredibly bad. Figuring out the text to speech api took me days
14120;so u see all those in the type spreadsheet
14121;but do i need to fill out
14122;every part of the struct
14123;uhhh
14124;good question
14125;try it and see
14126;cause you'll have to fill out your fields to begin with anyways
14127;so you may as well do it
14128;and if you need to fill out the rest you can tackle that then
14129;yea so i filled like the ones taht weren't red and deletd the others
14130;and i cant use that struct as the type spreadsheet
14131;but it is the type spreadsheet lmfao
14132;well
14133;`func (r SpreadsheetsService) Create(spreadsheet Spreadsheet) SpreadsheetsCreateCall`
14134;look closely
14135;@deezy no p4?
14136;There is a set of like...five followup videos that as far as i can tell are noncanonical
14137;but yo dawg i fucking quote toaster has been achieved TO THIS DAY
14138;lmao
14139;deep memery
14140;can i ask a question here? i haven't been around in a while
14141;don't know where to ask for help
14142;go ahead
14143;ok it's an issue with fyne
14144;resizing in fyne
14145;"```golangpackage mainimport ( log"" fyne.io/fyne"" fyne.io/fyne/app"" fyne.io/fyne/layout"" fyne.io/fyne/widget"")func main() { myApp := app.New() myWindow := myApp.NewWindow(""write down your note before you forget"") myWindow.Resize(fyne.NewSize(1280 720)) // Create the dropdown menu for boards currentBoard :=  boardDropDownMenu := widget.NewSelect([]string{""Board 1 Board 2""} func(value string) { currentBoard = value }) // Create a button for adding boards addBoardButton := widget.NewButton(""add func() { log.Println(""Adding new board"") }) // Create a button for removing the current board removeBoardButton := widget.NewButtonWithIcon(""rem func() { log.Println(""Removing current board"") }) // Entry containing the current board\'s title // Entry is used so that changing the title is easy boardTitle := widget.NewEntry() boardTitle.SetPlaceHolder(""(board name)"") boardTitle.SetText(currentBoard) boardTitle.Resize(fyne.NewSize(150 0)) // Label for showing the completeness level of tasks boardDetails := 16/19 Complete"" boardDetailsLabel := widget.NewLabel(boardDetails) // Search entry for searching for tasks/tables searchEntry := widget.NewEntry() searchEntry.SetPlaceHolder(""(search board)"") myWindow.SetContent( widget.NewVBox( widget.NewHBox(boardDropDownMenu addBoardButton removeBoardButton layout.NewSpacer(), boardTitle layout.NewSpacer() boardDetailsLabel searchEntry))) myWindow.ShowAndRun()}```"
14146;`boardTitle.Resize(fyne.NewSize(150 0))` doesn't resize the entry
14147;while it should i think
14148;oh yeah isn't the fyne guy here
14149;you could try and ping him if you want ig
14150;who's him?
14151;@fyne
14152;üòÖ
14153;sorry you won't be able to launch the script because you'll be missing icons
14154;missed this
14155;okay changed it
14156;even if i remove the spacers and keep the width it doesn't change it
14157;i'd use qt bindings but last i remember it took forever to clone the repo and install
14158;yea the qt bindings are really big
14159;doesn't help that cgo is really slow
14160;I left it for a few hours and it still couldn't compile itself
14161;hm
14162;this finished really quick
14163;no idea how
14164;this installs it?
14165;```% go get v github.com/therecipe/qt github.com/therecipe/qt (download)github.com/therecipe/qt```
14166;because it finished in a few minutes
14167;and no i don't have a fast PC really
14168;oh :GWvertiPeepoSadMan: ```core.cpp:10:3: error: #error  10 | #error  | ^~~~~core.cpp:11:3: error: #error please run: $(go env GOPATH)/bin/qtsetup' 11 | #error please run: $(go env GOPATH)/bin/qtsetup' | ^~~~~core.cpp:12:3: error: #error more info here: https: 12 | #error more info here: https://github.com/therecipe/qt/wiki/Installation | ^~~~~core.cpp:13:3: error: #error  13 | #error  | ^~~~~core.cpp:15:10: fatal error: QAbstractAnimation: No such file or directory 15 | #include <QAbstractAnimation> | ^~~~~~~~~~~~~~~~~~~~compilation terminated.```
14169;someone told me you can do dynamic linking or sth
14170;I forgot
14171;Back to the fyne issue
14172;Anyone know how to make widgets wider?
14173;oh his handler is andy.xyz
14174;@andy.xyz sorry for the ping
14175;I was hoping you could help me with my fyne question I posted above?
14176;Sure just reading up
14177;So if you place your widget in a container with a layout then Resize and Move are controlled by the layout  so calling it manually is ignored @r3velated
14178;So how do I resize the layout?
14179;Well what are you trying to do? Using HBox is asking for all widths to be minimum with a consistent height
14180;What would you prefer?
14181;wanna go to DM?
14182;The layouts are shown at https://developer.fyne.io/started/layouts
14183;yes i went through the tour
14184;i'm trying to make a small app that uses tables as a method to group notes
14185;so one VBox i thought would have a number of tasks which would eventually have a checkbox an entry for entering the task and a remove button to remove the task
14186;and multiple of those tables could be stacked one next to another
14187;i've already got a small part of that coded but it's also suffering a small width
14188;and lack of padding
14189;Oh @_diamondburned_ sorry if the question was a bit random  but in the archives you say things like ‚ÄúFyne API is awkward as hell‚Äù so I just wanted to know more
14190;lol
14191;None
14192;I follow @r3velated I‚Äôm guessing the top row has spacers in it?
14193;yes the first one does
14194;two before and after the middle input
14195;The spacers will take all the space they can  so collapsible things are collapsing
14196;the first row isn't really the issue
14197;ooh i see
14198;Oh sorry  what‚Äôs the main issue?
14199;what you mean yes about the entry width
14200;well adding spacing and specifying width
14201;sorry i even forgot what i initially struggled with
14202;the code i posted above lacks that small part that's in the box that's supposed to be the label
14203;i only added it later
14204;I would recommend removing spacers and see where that gets you  then we can problem solve
14205;well i mean the width is just as is above
14206;if we're talking about the first row of widgets
14207;"I can't tell you why anymore; the last time I've used it was a year ago"
14208;sry
14209;Ah well. Things have come a long way (1.3.3 most recent) so a year ago was dim history @_diamondburned_ üòâ
14210;i've removed spacers this is how it looks now
14211;None
14212;that's nice I'll let you know if there's anything awkward
14213;also offtopic but have you seen gio?
14214;laying things out isn't my favorite thing tbh
14215;oh also one last question
14216;but CSS is a bitch too and it's supposed to be simpler :D
14217;How easy is it to make a text view with inlined images?
14218;Yeah  have chatted to the founder about Gio/Fyne overlaps
14219;Looks sensible @r3velated  now which but do you want to change?
14220;i'd like to make the `(board name)` entry widget take everything else
14221;so it should expand until there's no more space
14222;@_diamondburned_ rich text view is still on the todo  so you‚Äôd need to roll it yourself using text and image components. Doable but we will add markdown component to do it for you some time
14223;also the things in the 2nd and 3rd row are supposed to be somewhat grouped and have a small padding there's gonna be more of those
14224;Cool @r3velated so that wants to be the centre of a borderlayout container. Make the left a container with the 3 buttons and a right hand a new container with the remainder. That will autoexpand the entry to fill the space
14225;soaks up all the info and writes it down
14226;Oh @_diamondburned_ we also have lots more docs now üôÇ https://developer.fyne.io/
14227;about the table'? @andy.xyz
14228;padding
14229;ah I prefer manual texts without markup but as long as it doesn't involve touching the drawing library I think it's fine
14230;thank you for the response
14231;also is there any way to make `window.SetContent()` a bit more readable than this?
14232;```golangmyWindow.SetContent(widget.NewVBox(widget.NewHBox(boardDropDownMenu addBoardButton removeBoardButton,boardTitle boardDetailsLabel searchEntry) tableContent))myWindow.ShowAndRun()```
14233;having two `.SetContent()` funcs doesn't really work only one is being respected
14234;what is this
14235;ctx := context.Background()
14236;i see it in alot of the golang examples for sheets
14237;but works wtih and without
14238;?go context
14239;Go Concurrency Patterns: Context <https://blog.golang.org/context>  technololigy
14240;contexts are used for controlling/cancelling groups of goroutines that are logically related to each other
14241;DoSomething() may fire off one goroutine to do some database work another to send some http requests another to open a file and there\'s a strong possibility you will want to say DoSomething() should time out after X seconds or If an error happens somewhere all the associated work needs to be stopped/rolled back
14242;aahhhh
14243;the beauty of concurrency
14244;so i actually was able to get one of the functions ot work
14245;but how can i do this one
14246;None
14247;where it takes (mashalJSON())
14248;again that's a data type
14249;which means it's either an argument TO or a return value FROM something
14250;Ctrl+f for the name of that type and find functions that include it
14251;@r3velated sorry I got lost  what do you mean two SetContent funcs?
14252;MarshalJSON is just a method so that type can be serialized to/from JSON
14253;its a TO
14254;@andy.xyz that's not really the issue it was just a question
14255;thing but how would i even give it data
14256;like how would i give it JSON stuff
14257;i was asking about the padding and what layout would i use to expand a bit the table
14258;that i showed in the last screenshot
14259;I think the table (container) is large but your content is not... so which part should expand?
14260;I‚Äôm guessing it‚Äôs more HBoxes? They will always collapse horizontally to minsize so try a different layout
14261;this is what i want to replicate
14262;the user should be able to add new tables and they should all go next to each other if there's space otherwise in the next row
14263;this is the function for creating these tables
14264;pardon the messy/noob code
14265;"```golangfunc createTable() fyne.CanvasObject { // Table title entry thead := widget.NewEntry() thead.SetPlaceHolder(""(table title)"") // Button for removing the board removeBoard := widget.NewButtonWithIcon( resources.ResourceTrashSolidPng func() { log.Println(""Removing current board"") }) // Task checkbox taskCheckBox := widget.NewCheck( func(value bool) { log.Println(""Task checkbox set to value) }) // Input to enter the task taskInput := widget.NewEntry() taskInput.SetPlaceHolder(""(task)"") // Button for deleting the current task deleteButton := widget.NewButtonWithIcon( resources.ResourceTrashSolidPng func() { log.Println(""Removing current task"") }) // Box with the checkbox entry and a delete button newTask := widget.NewHBox(taskCheckBox taskInput deleteButton) addNewTaskButton := widget.NewButtonWithIcon( resources.ResourcePlusSolidPng func() { log.Println(""Adding new task"") }) // Entire table heading. Includes remove button table title and add task button tableHeading := widget.NewHBox(removeBoard thead addNewTaskButton) content := widget.NewVBox(tableHeading newTask) return content}```"
14266;So move ‚ÄútableHeading‚Äù to container with borderlayout like above and it should be fine
14267;Possible the task rows as well
14268;Maybe be easier to see what is working and what is not if you have another table into the (grid layout?) container
14269;i can share the entire file in DM
14270;i mean there's not much you're missing
14271;you're only missing what i'm currently editing
14272;there's really nothing functional right now i'm laying out widgets first
14273;is this how you meant this?
14274;```goleft := fyne.NewContainer(boardDropDownMenu addBoardButton removeBoardButton)right := fyne.NewContainer(boardDetailsLabel searchEntry)content := fyne.NewContainerWithLayout(layout.NewBorderLayout(nil nil left right), left boardTitle right)myWindow.SetContent(content)```
14275;because this takes all the height and the items on the sides are overlapping
14276;Left and right containers should probably be VBox like before
14277;‚ÄúNewContainer‚Äù has no layout by default (API is improving in this area to be clearer) which is why you see that overlap
14278;now all widgets take the full height of the window
14279;im in shambles rn. Im trying to use an interface type. i am on the gobyeexample for interface. but the reasoning makes no sense
14280;well first off all how can i even make it
14281;you don't
14282;It's implicit
14283;you create a struct that implements the methods defined by the interface
14284;oh so adding something makes the height to 1 line
14285;or use an existing one
14286;so what kind of type is this
14287;[][]interface{}
14288;ahahahaha
14289;um
14290;absolutely impossible to say
14291;that\'s literally a slice of slices of anything
14292;üòÑ
14293;"```goValues [][]interface{} `json:""values,omitempty""````"
14294;lmfao
14295;i mean
14296;this sheets stuff is giving me a fat
14297;that's lowercased even
14298;headache
14299;so
14300;what is this
14301;"```goValues [][]interface{} `json:""values,omitempty""````"
14302;whoops
14303;wdym
14304;Well is this a return value or something you're trying to pass into something else
14305;what is Values
14306;not what is its type
14307;what is it
14308;is it the contents of a secret diary? a bank account? a list of cookie recipes?
14309;well im using the struct Valuerange
14310;already
14311;```gorb := &sheets.ValueRange{ Values: }```
14312;and then the values is just a field
14313;Okay there we go
14314;It's a field in ValueRange
14315;okay so
14316;do you know how to make a slice?
14317;"```gofield Values [][]interface{}`json:""values,omitempty""` of ValueRange type``` and thats what it expects"
14318;ermmmmm
14319;like this?
14320;x := [5]
14321;like that
14322;definitely not
14323;https://tour.golang.org/moretypes/7
14324;So. Just remember.
14325;holy whoops
14326;it is a slice of slices
14327;mhm
14328;hmmmm
14329;a slice of slices
14330;but what is this interfaceP{
14331;{} stuff
14332;it just means any type
14333;but you'll probably want to stick to numbers and strings
14334;since these are spreadsheets
14335;@andy.xyz sorry for ping again but i'm not clear on how to limit the width of my table
14336;i don't want one of them to span the entire width of the window
14337;yea
14338;LOL
14339;it does not like this
14340;"```gorb := &sheets.ValueRange{ Values: [""Hi""], }```"
14341;well no
14342;because
14343;that's not how you do slices
14344;can i
14345;make the varible
14346;inside it
14347;no
14348;not a slice
14349;well you could in theory
14350;but really
14351;you don't want to because it'll be horrifically unreadable
14352;"`[][]interface{[]interface{}{""foo"",""bar""}}` i believe"
14353;would be the inline definition
14354;strongly recommend reading that section of the go tour
14355;and just build your slices up before you declare your ValueRange
14356;doing that rn before i even look at ur thing
14357;word
14358;man that's a lot of interfaces
14359;I think you can elide the type here
14360;maybe
14361;"`{{""foo bar""}}`"
14362;i'm not super sure
14363;same
14364;but it's still super nasty
14365;@r3velated put it in a container with a grid layout perhaps? NewGridLayout(4) will split it into 4 Cols so 1 will be 1/4 width
14366;okay so caught u p
14367;so is it a slice
14368;gotcha
14369;of slice of type
14370;interface
14371;hopefully this works
14372;@andy.xyz thank you very much
14373;this would be a good time to use play.golang.org
14374;experiment with JUST making a slice of slices
14375;so you don't get tangled up in anything else
14376;YASS this works
14377;oh the joy of my little self :GWseremePeepoHappy:
14378;nice
14379;but there's no padding üò©
14380;i think i may try gio tomorrow
14381;gio is lower level
14382;meaning?
14383;it's more work to do one thing
14384;i need to get dirtier?
14385;ah
14386;damn
14387;@_diamondburned_ how much did you familiarize yourself with guis for go?
14388;this one looks attractive although i have no idea how low level it is
14389;https://github.com/golangui/nuklear
14390;i've also run into this https://github.com/goki/gi and this https://github.com/inkyblackness/imguigo
14391;i've made like 3 or 4 but not much
14392;what did you use?
14393;goodness this is a lot of code to display a color gradient on a window
14394;https://github.com/golangui/nuklear/blob/master/cmd/nkexample/main.go
14395;I used Gtk
14396;mainly
14397;hmm
14398;i have a feeling it's also lower level?
14399;not really
14400;Gtk is higher level than most Go GUI libraries
14401;it's probably the highest level you could get for a native GUI library
14402;i think nuklear is a lot verbose
14403;@_diamondburned_ can you pass me the github repo please?
14404;gotk3 is the bindings repo
14405;it's kind of incomplete so I sometimes PR stuff in
14406;need some help with a web server if anyone can help i have golang code for a web server and html code i want it to display (its some pretty fancy html code) but no matter what mime.type i use for the Handler it is always missing something/not formated correctly is there a way to make a handler accept all mimetypes or is that even the cause of the problem ill display the code if anyone needs it thx
14407;but think https://fyne.io/ is a good one
14408;lol yeah he just used Fyne above
14409;and the Fyne guy was here too
14410;kinda wanna revisit it but I have to finish my current Gtk stuff
14411;who is the fyne guy?
14412;yeah i'm not sure i can replicate the entirety of my design with fyne
14413;> kinda wanna revisit it but I have to finish my current Gtk stuff@_diamondburned_ fyne got a lot of updates
14414;so did gotk3
14415;i use it also
14416;@deezy we did it
14417;but who is the fyne guy author of the project?
14418;"```gorb := &sheets.ValueRange{ Values: [][]interface{}{{""foo bar""}}, }```"
14419;thanks @_diamondburned_
14420;here in deiscord
14421;i'll take a look at imguigo as well
14422;but i'll likely use gtk
14423;first
14424;you gotta wait more than 3 minutes
14425;second
14426;you haven't provided any code or other details that someone might use to help
14427;https://hastebin.com/ofaxofezan.php is there a diff in this code that would cause an error in the second call and not the first
14428;provided that srv is a authenticated client
14429;andy.xyz
14430;you have to scroll it up a bit
14431;@r3velated I'd recommend Gtk if you're developing a Linux application
14432;else probably not
14433;it'll most likely be used exclusively on linux
14434;but maybe also android
14435;any android support?
14436;nah Gtk is strictly desktop rn
14437;well
14438;I got someone to run my Gtk application on their PinePhone as a demo
14439;but yeah
14440;https://twitter.com/realdanct12/status/1242930234766143488?lang=en lol
14441;damn
14442;getting this gotk3 is taking a while
14443;any idea on the size?
14444;it probably pulls a lot of deps?
14445;@r3velated I don‚Äôt understand how there can be no padding  all the layouts put padding in can you show me a pic?
14446;no it's just compiling the C part of the bindings
14447;which takes roughly half an hour
14448;ish
14449;sure
14450;i duplicated the same table several times
14451;7 i think
14452;Also  if anyone is comparing Go GUI toolkits and bindings I could point out my book ü§£
14453;there's too little padding
14454;i could read your book
14455;if there's a mobi format
14456;@andy.xyz what are your solutions on dealing w/ handling Go closures and callbacks with C libraries?
14457;Ah yes  padding is there but the standard amount.
14458;this? https://andy.xyz/2019/03/07/meetthefirstbookaboutgolangguiprogramming/
14459;can i add more padding?
14460;@_diamondburned_ sorry what do you mean by closures and c libraries?
14461;That‚Äôs the book @r3velated
14462;i need more padding between tables
14463;and between the first row and the rest
14464;To add more padding you‚Äôd need to provide a custom layout as the standard ones are all the size in theme padding
14465;damn
14466;i hate doing custom work
14467;i'm too slow as it is
14468;Haha
14469;like passing go closure variables into C callbacks
14470;Or add a container around each table that insets the padding
14471;also I might appear ignorant here but have you tried statically linking the libraries and did it work?
14472;@_diamondburned_ from a user point of view or as a toolkit solving a problem?
14473;oh this is just implementing cgo in general
14474;just asking if you've dealt w/ it before
14475;We have done some clever stuff but I‚Äôd need a more concrete question to have a meaningful answer id think
14476;Also this is all static compiled  the Fyne apps have 0 runtime deps unlike GTK Qt etc
14477;even glfw is statically compiled?
14478;adding a container makes a space as large as a table
14479;so i guess i'll have to do a custom layout
14480;@_diamondburned_ yes  all you need is a working graphics card
14481;do I have to use muslc to statically build?
14482;Ah apologies it does not statically compile libc on Linux builds  it assumes basic operating system stuff is available sorry. It‚Äôs not truly a static binary  but it sure works like one
14483;ah
14484;oof
14485;have you tried statically building it w/ muslc?
14486;We decided not to do 100% static because at that point you‚Äôd have to compile in graphics card drivers etc which makes it exceptional ally fragile
14487;oh true
14488;I used muslc when doing some book research but that was a long time ago now  we don‚Äôt check it at the moment I think only 1 person has ever asked üôÇ
14489;lol
14490;ok fair thx
14491;The most challenging part has been supporting native compilation of all desktop and mobile systems from a single codebase üôÇ
14492;"using the go sheets documentation i was able to figure it out but where does it say to do like ```go srv.Spreadsheets.Values.Append(spreadsheetId range2 rb).ValueInputOption(""RAW"").Do()```"
14493;spreadsheets.values.append
14494;None
14495;this is the function but my drawback on reading documentaiton
14496;is how to get to that in an IDE
14497;thought i luckily figured it out i would like to understand it for future
14498;documentation
14499;how do get what? code hints for stuff you're importing?
14500;generally speaking gopls <your editor>
14501;yea
14502;the first one is what it would be in an IDEand the picture
14503;is what the documentation states
14504;never in a million yuears would i be able to put that together
14505;like where would i infer that its spreadsheets.values.append
14506;because `spreadsheet.Values` has the type of `SpreadsheetValuesService`
14507;or an interface that it satisfies
14508;but how did u know its spreadhseet.Values to begin with
14509;`srv.Spreadsheets.Values`
14510;because that's what you showed in your code
14511;None
14512;None
14513;None
14514;```Service > SpreadsheetsService > SpreadsheetsValueServicesrv > Spreadsheets > Values```
14515;oh yea
14516;but thats what i got of an example
14517;using another part of the value import
14518;n i changed it
14519;BUT
14520;the real question
14521;lets say ud idn't have that example
14522;same thing
14523;i'd start with Service
14524;look at the members
14525;click them
14526;and drill down
14527;there's always an entry point
14528;the place where the Choose Your Own Adventure begins
14529;"Hi all! I\'m making a what was a simple CLI app in my adventure in learning Go. I\'m recently go stumped on a problem:`systemCPU.CPU undefined (type []cpu.InfoStat has no field or method CPU)`Here is my code in which the issue is at:```govar systeminfoCmd = &cobra.Command{ Use: systeminfo"", Short: Displays infomation about the user\'s system"", Run: func(cmd cobra.Command args []string) { systemCPU err := cpu.Info() systemRAM err := mem.VirtualMemory() if err != nil { log.Panic(""Failed to get system info!"") } usedRAM := (systemRAM.Used / 1024) / 1024 totalRAM := (systemRAM.Total / 1024) / 1024 fmt.Printf(""System Ram: %vMiB / %vMiB\ usedRAM totalRAM) fmt.Printf(""CPU: %v\ systemCPU.CPU) },}```But the field/method is present in the Go module. What would the issue might be?"
14530;`[]cpu.InfoStat`
14531;it's a slice
14532;it CONTAINS InfoStat's
14533;you have to loop over it
14534;or use indexes
14535;Interesting how come the variable `systemRAM` worked with similar code?
14536;might've been similar
14537;but it was different
14538;https://play.golang.org/p/DGWRgosoqt
14539;proof of concept
14540;exact same error
14541;Anyone have experience with CI/CD & Kubernetes?
14542;I'm trying to get my go app running on it
14543;A few weeks ago I manually built a docker image and it works fine but when I use buddy CI/CD it says it works but then it's just running the old version
14544;whats buddy ci/cd
14545;oh ci/continuous delivery service
14546;well whats your buddy pipeline?
14547;are you telling k8s to pull the new image?
14548;:robpike:
14549;welp finally got it to spit out an error
14550;it can't pull my image
14551;I'll figure it out from here (I was just confused before cause it wasn't telling me anything)
14552;always remember `kubectl describe` and `kubectl get events`
14553;thanks! I've got it working.It wasn't able to pull the image because I gave it the wrong pull secret :blobfacepalm:
14554;@deezy got it too work thanks
14555;whew
14556;hi beautiful people
14557;i have a sql db how would you do ur front end and backend i need to make a simple search page with filters?
14558;however you want
14559;REST API + JS frontend or html/template
14560;or both
14561;or some
14562;which one would u say is the easiest with the fastest dev time algo bare go or some framework?
14563;usually bare go with go chi
14564;and idk that depends on some people
14565;I personally just hate js so I don't do it
14566;man i also hate js
14567;if you dc about not having autocompletion then html/template is ok enough
14568;any example repositoy u would recommend
14569;too tired to find so i'll recommend mine https://github.com/diamondburned/smolboard
14570;note that there's not really a good reason for me to separate backend and frontend here w/ a REST API
14571;but I did anyway
14572;you don'tt have to
14573;thank you
14574;np
14575;@zerp
14576;oops
14577;@zephyrtronium question: why does Go not provide guarantees that SetFinalizer will eventually be ran?
14578;you can attach finalizers to things that will never be garbage collected e.g. globals
14579;more generally making guarantees about the behavior of finalizers would expose details of the garbage collector and potentially prevent them from making improvements without breaking the compatibility promise
14580;is there a reason
14581;u can't reutrn
14582;return with fmt.sprintf
14583;meaning instead of having one long line just pressing enter to make it two shorter
14584;you can
14585;if you do it right
14586;whats the right way
14587;are you trying to extend a string across newlines or the function call
14588;for me it just adds a plus
14589;yea
14590;extend a string
14591;i just have a lot of
14592;vairbles i want to display as
14593;%v
14594;but when i enter it doesn't work
14595;anymore
14596;function calls follow more or less the same rules as everything else
14597;its not a funciton call sorry
14598;i shouldve said enter
14599;instead of return
14600;```gofunc(foo1, foo2  foo3)```
14601;okay so you're trying to break a string across newlines?
14602;yea
14603;"```gowebhook.SendEmbed(0xEF4040 fmt.Sprintf(""OFF WATCH: %v\alerted at %v\current time %v\Entry/exit to tight\ + (Entry: $%v)\(S/L: $%v)\(Sell: $%v)\(Frequency:%v)\(Current Volume: %v)\(Average Stock Volume: %v)\(Average Market Volume:%v)\ + (Patern high: $%v)\(Pattern low: $%v)"",```"
14604;eg
14605;this
14606;basically
14607;yeah don't do that
14608;https://golangcode.com/multilinestrings/
14609;just declare a multiline string before the function call
14610;```fmtString = `big longwhatever %sbutts butts butts````
14611;Sprintf(fmtString whatever whatever whatever)
14612;doing everything inline sucks
14613;yea i do
14614;does it work with double
14615;quotes
14616;or only single
14617;try it and see
14618;well neither work lol
14619;oh
14620;u mean
14621;make a actualy variable
14622;well
14623;before
14624;yes
14625;ugh
14626;thats so annoying
14627;you gotta actually do the thing i suggest
14628;is it more annoying than having code that doesn't work
14629;no LOL
14630;just sayin
14631;"```goformatString := OFF WATCH: %v\alerted at %v\current time %v\Entry/exit to tight\ + (Entry: $%v)\(S/L: $%v)\(Sell: $%v)\(Frequency:%v)\(Current Volume: %v)\(Average Stock Volume: %v)\(Average Market Volume:%v)\ + (Patern high: $%v)\(Pattern low: $%v)"" err := webhook.SendEmbed(0xEF4040 fmt.Sprintf(formatString,```"
14632;so like this
14633;basically
14634;üò¶
14635;not really
14636;did you look at my code
14637;or the link i sent you
14638;yea
14639;it doesn't seem like it
14640;OH
14641;backticks
14642;yea
14643;`
14644;backticks are the magic
14645;details are very important
14646;backticks let you do raw and/or multiline strings
14647;no escapes no \ or whatever
14648;just the whole bitch raw as is
14649;oh well i need the
14650;\
14651;so discord
14652;can interpret it
14653;cause i want it printed out line by line
14654;wait shoot
14655;yea this world work
14656;cause i have that
14657;it would only work if i wanted to display it
14658;that's the point
14659;as i type it
14660;the raw string reads the newline
14661;and includes it
14662;ah then i would have a rlly long
14663;string etiehr way
14664;horizontal or virtical
14665;rip sprintf
14666;ill keep the backticks in my mind tho
14667;for raw strings
14668;i don't think it's going to work the way you think
14669;i strongly recommend just playing around with your use case in the playground
14670;https://play.golang.org/p/3eZaG8KvRSt
14671;@zephyrtronium ok fair thx
14672;kinda sux tho
14673;how can i change `darwin` to`macOS`?
14674;I tried using an if statement but I think i used it wrong
14675;"```go if hostInfo.Platform != darwin { fmt.Printf(""OS: macOS %v\ hostInfo.PlatformVersion) } fmt.Printf(""OS: %v %v\ hostInfo.Platform hostInfo.PlatformVersion)```"
14676;Do you want to print macOS if the platform is or isn't darwin?
14677;if the platform is darwin
14678;Okay. What is your if statement doing? üôÇ
14679;Wait did I do something wrong or?
14680;I want it to print `macOS (insert version number here)` instead of `darwin (insert version number here)`
14681;I'm just asking if you can explain what your if statement is doing here.
14682;If you can it might help you figure out why you aren't getting the output you expect.
14683;So if the platform is darwin then change darwin to macOS and print it
14684;What does `!=` mean?
14685;oh
14686;does not equal
14687;Yup. Does that line up with what you're explaining the if statement to be doing?
14688;well almost
14689;im still learning
14690;i just kinda jump right in
14691;need to read the docs some more üòÑ
14692;"```goif hostInfo.Platform == darwin { fmt.Printf(""OS: macOS %v\ hostInfo.PlatformVersion) } else { fmt.Printf(""OS: %v %v\ hostInfo.Platform hostInfo.PlatformVersion)}```thats better"
14693;sorry if i wasted your time and thank you
14694;No problem! It can always be good to take a step back and actually think through what's happening üôÇ
14695;How to success fully exit the golang process using `os.Exit(1)` Because when i do `os.Exit` it is terminating the process immediately.
14696;Any pseudo code will be helpful
14697;i'm not sure i understand the problem
14698;os.Exit() kills the process immediately
14699;that's what it does
14700;yeah
14701;what does successfully exit mean?
14702;exit status 0?
14703;if yes then stop giving it 1
14704;let me share my code..
14705;"```func (evlogCtx EvLogCtx) signalHandler(s os.Signal) {  switch s {  case syscall.SIGHUP:  Debug(""received SIGHUP\"")  SysEventGenerate(EV_SIGHUP_SIGNAL_RECVD EV_STATELESS sighup s)  err := evlogCtx.reOpenEvFileCtx()  if err != nil {  fmt.Printf(""Reopen of Event logging file failed: %s\  evlogCtx.EvLogFname)  return  } case syscall.SIGINT:  Debug(""received SIGINT : %d\ syscall.SIGINT)  SysEventGenerate(EV_RESTART_PLANNED EV_RAISE  PlannedSignalRecived syscall.SIGINT)  evlogCtx.closeEventModule(0) default:  Debug(""received Unplanned signal : %d\ s)  SysEventGenerate(EV_RESTART_UNPLANNED EV_RAISE  UnlannedSignalRecived s)  evlogCtx.closeEventModule(1) }}func (evlogCtx EvLogCtx) closeEventModule(c int) {  //TODO : Close the chan & db  time.Sleep(5  time.Second) os.Exit(c) }```"
14706;oh that's not gracefully handled
14707;gracefully handling it would be stopping the main event loop or whatever from blocking and continuing on main
14708;that's gracefully handling it
14709;Ok.. will handle in the main loop then
14710;form data like Multipart?
14711;hmmm I don't think so?
14712;I\'m not aware of any content type with just formdata
14713;ok scratch that
14714;I looked up the difference for postman
14715;it's multipart yes
14716;"`xwwwformurlencoded` content type: `application/xwwwformurlencoded``formdata` content type: `multipart/formdata; boundary={boundary string}`"
14717;so I guess my question is how do I get data from multipart forms
14718;there's a method to parse multipart forms
14719;works thank you
14720;np
14721;how do I sort lines based on field in golang? say I want to sort based on the second field from data below```a 2b 1c 3```
14722;linux command `sort` is quite handy here but not sure about doing it in go
14723;hmm I can just write custom sort function compared on the second col
14724;sort.Slice
14725;"ended up with https://play.golang.org/p/oB3yYb9oHBy any comment?```go ss := []string{""a 1 b 3 c 2""} sort.Slice(ss func(i j int) bool { return strings.Fields(ss[i])[1] > strings.Fields(ss[j])[1] })```"
14726;seems fine ig
14727;fields op kinda expensive to do in that hot fn
14728;but eh w/e
14729;I'm sorting files with millions of line so performance tips are welcome
14730;split then sort
14731;actually
14732;ehhh
14733;yeah honestly not sure
14734;oh
14735;also would it be better if I atoi the field to int then compare? I'm relying on string comparison here
14736;"```goss := []string{""a 1 b 3 c 2""}var indices = make([]int len(ss))for i := range ss { indices[i] = i}var parts = make([][]string len(ss))for i part := range ss { parts[i] = strings.Fields(part)}sort.Slice(indices func(i j int) bool { return parts[i][1] > parts[j][1]})for i := range indices { fmt.Println(i ss[i])}```"
14737;probably
14738;i don't think that'd make a difference
14739;but sure
14740;change parts to []int then
14741;ok i don't think that sort.Slice works
14742;sucks
14743;Is it bad to use go run in production on docker?
14744;yeah looks like sort.Slice works only if comparison function compares based on the elements of the slice not external slices
14745;that's a TIL a somewhat weird constraint
14746;eh it makes sense
14747;Slice relies on swapping around the slice and the callback to check if the slice is sorted or not
14748;if the slice used in the fn doesn't reflect the swapped slice then that's not right
14749;@Gavin pretty much yes
14750;So is it possible to pass a data type as an argument to a function?If not could I use an interface type and pass an instantiated variable or a pointer to the function to achieve a similar purpose? üôÇ
14751;"it's not; you can't pass types as values"
14752;you can pass regular values that hints at the type but that's probably wrong
14753;you can pass values into empty interfaces and tyep assert
14754;Basically short version I have a config package that pulls configuration values from a file and I am looking to find a way to make it more isolated from the rest of the code so that I can make it its own reusable module that can be dropped into pretty much any system and used from there.I may end up just needing to turn anything to totally connected to the rest of the code into interface elements. ^^ Which of course would make it less of a library and more of a pattern/method of doing things. hehe.
14755;i usually just have a config struct in each package
14756;and its parent package embedding and structuring those structs into one big struct
14757;so main would have a config that joins the children pkgs config structs
14758;then i can just unmarshal on that one config in main
14759;it's not very straightforward documentationwise
14760;but it does separate code fine
14761;I have noticed that a lot of things that are pounded into our heads coming from C C++ Java pretty much anything not go kind of goes out the window in a lot of ways. heh
14762;Looking around I have seen that there are a LOT of different approaches to directory structure as well. üôÇ
14763;@_diamondburned_ it's me from last night
14764;sorry for pinging
14765;you said you did gtk with the gotk3
14766;where do i find alignment/layout docs? i've barely found anything useful on the godoc
14767;is this all that you referred to? https://godoc.org/github.com/gotk3/gotk3/gtk
14768;functions just have something like this ` AddAttribute is a wrapper around gtk_cell_layout_add_attribute(). ` lol
14769;i'm guessing i should check the gtk official docs to see what that func does
14770;yes check the official docs
14771;okay
14772;one more question
14773;sorry if i'm annoying
14774;but my icon isn't showing on the button for some reason
14775;just a crossed out circle
14776;ran into that maybe?
14777;"```go// AddButtonWithIcon adds a button with the passed icon instead of a labelfunc AddButtonWithIcon(icon string grid gtk.Grid) { btn err := gtk.ButtonNewFromIconName(icon gtk.ICON_SIZE_BUTTON) if err != nil { log.Fatal(""Unable to create an icon button: err) } grid.Add(btn)}```"
14778;that's my function
14779;@_diamondburned_ why?
14780;"this is how i\'m adding it ```goutils.AddButtonWithIcon(""./resources/plussolid.png grid)utils.AddButtonWithIcon(""./resources/trashsolid.png grid)```"
14781;and i made sure that my icons are there where i'm referencing
14782;because go run isn't always reproducible compiling takes more time and there's really no good reason to
14783;@r3velated call showall
14784;by not reproducible you mean like... it can fail for no reason? or?
14785;the outcome can be different
14786;reproducibility is very important
14787;So why is the outcome reproducible for build but not run?
14788;they're the same but you should be deploying a binary not the source code
14789;"like so? ```go// AddButtonWithIcon adds a button with the passed icon instead of a labelfunc AddButtonWithIcon(icon string grid gtk.Grid) { btn err := gtk.ButtonNewFromIconName(icon gtk.ICON_SIZE_BUTTON) if err != nil { log.Fatal(""Unable to create an icon button: err) } btn.ShowAll() grid.Add(btn)}```"
14790;this gives me the same
14791;I don't think I have to explain the basics
14792;ohhhh
14793;go is a compiled language
14794;@r3velated try pointer to Gtk grid
14795;Thank you for your help
14796;also did you show grid
14797;also utils package bad
14798;yeah np
14799;why is it bad?
14800;because the package name is very vague and generic
14801;it doesn't tell anything
14802;no idea what else to put
14803;also it'll be cluttered with non related stuff
14804;maybe `widgets`?
14805;`widgets/buttons` package buttons
14806;probably
14807;I'll go to bed now night
14808;"is this what you meant? ```go// AddButtonWithIcon adds a button with the passed icon instead of a labelfunc AddButtonWithIcon(icon string grid gtk.Grid) { btn err := gtk.ButtonNewFromIconName(icon gtk.ICON_SIZE_BUTTON) if err != nil { log.Fatal(""Unable to create an icon button: err) } btn.ShowAll() grid.Add(btn)}// Callingutils.AddButtonWithIcon(""./resources/plussolid.png grid)utils.AddButtonWithIcon(""./resources/trashsolid.png grid)```"
14809;that seems too many files to keep track of
14810;one for each widget
14811;nighty night man. hopefully someone else jumps in
14812;"So I am using MGO to interact with a mongodb. My current method of logging a user in basically involves making sure the account exists first so that the rest doesn't crash and then if it does exist making another call to actually retrieve the data so that I can handle authentication.If I were to instead skip directly to attempting to retrieve the data is there a way to validate that the data actually exists before trying to access it? üôÇ i.e. I figure that part would be more efficient by somehow querying the object than adding an entire extra database call to the process. ^^;"
14813;I recommend using https://github.com/mongodb/mongogodriver instead of mgo. mgo is not maintained anymore.
14814;üôÇ I managed to find my way to mgo by following a string of unmaintained drivers until I found one that at least claimed to still be being updated. Hehe. Clicking the link. My current project is small and doesn't matter if it explodes but I certainly need to do things right on my next project. Better to figure it out now. üôÇ
14815;How complicated is it likely to be to migrate over? üôÇ Is it likely to be pretty painless or is it likely to break almost everything? ^_^
14816;Found a website where a project did a big writeup on their migration process. So that is covered. üôÇ
14817;Mongo driver is super easy to use and super good imo
14818;Looks like GTK is proving fun @r3velated üòï
14819;lol
14820;it's not as easy as fyne i can give you that
14821;but i think it offers easier placement once you get the hang of it
14822;i didn't even try creating my own layout
14823;i just know i'll pull too much hair üòÜ
14824;So I have started the process but will continue after sleep. üôÇ Have a good evening/day everyone.
14825;How can I stop vimgo from automatically adding package main when opening a new file?
14826;actually i'm getting somewhere with gtk :o
14827;None
14828;@andy.xyz
14829;we'll see how it goes with creating tables and actually making it do something
14830;shouldn't be too difficult
14831;Cool üôÇ
14832;just the icons won't display ü§î
14833;I found that GTK worked ok once you got all the setup code correct. What put me off was that bindings mean the docs (inIDE particularly) are useless and that it requires GTK lib installed and/or is difficult to build mobile apps.
14834;Oh that plus complexity of background updates
14835;But that‚Äôs true of any binding to C/C++ api
14836;@andy.xyz true they are pretty useless
14837;and navigating the official ones on https://developer.gnome.org/gtk3/ is not very quick because it's huge
14838;but i did manage to find setting margin
14839;how can I convert an int64 into a string base64? I've tried strconv.FormatInt(a 64) but apparently 64 is an invalid base.
14840;have you checked out uhhh
14841;Is it encoding/base64 package?
14842;I haven't but I'll take a look
14843;Looks like that'll word albeit with a bit more effort. Thanks ^_^
14844;Yeah base64 is not just the mathematical base but a string encoding. Kinda badly named
14845;Does that mean it'll be longer than mathematically encoding the number to base64?
14846;Encoding something to base64 will always result in a string. Not sure what you mean with mathematically
14847;Sorry i meant with a base of 64
14848;not actual base64 encoding
14849;It is all a notation of binary data. As far as a computer is concerned that is a string type
14850;Maybe I should make my question clearer: interpereting the int64 as a string first and then it becomes base64 is not the way I'd like to go. For example the number 56710363101528064 with a mathematical base of 64 is AADAV8Z5yQA but if it is base64 encoded it becomes NTY3MTAzNjMxMDE1MjgwNjQg
14851;You can just use math do that no ?
14852;https://stackoverflow.com/a/48362821
14853;https://golang.org/pkg/strconv/#ParseInt
14854;Parse int supports base 1 through 64
14855;Ow no to 36. Oops
14856;You can use encoding/base64 to decode the string into bytes
14857;Then convert that to an int
14858;Format int also supports up to base36
14859;because 09 az only provides 36 characters. To represent math base 64 you need extra 28 chars. If you distinguish upper case and lower case letters you still need two extra chars. But what is the point of a large base
14860;Yeah I know why they do up to 36. Kind of shame tbey don't also support base64. If you want to base 64 encode an int now you have to concert it to a byte slice first and then pass it to the base64 function
14861;@andy.xyz base64 is the base64
14862;Isn't this the thing you want ?
14863;<https://stackoverflow.com/a/48362821>
14864;Also I don't understand how you can get base 64
14865;= and ! or . ?
14866;@Karitham theres encoding/base64 package for base64
14867;@Str≈ìm yes but base64 encoding the string representation of an int is different than raw encoding the couple of bytes it would take
14868;Wait is base64 string technically base 64
14869;Yes
14870;I'm so dumb
14871;@Sgt_Tailor oh yea ofc
14872;My last comment explains the issue they are running into
14873;You can use encoding/binary to create a byte slice
14874;Then base64 encode that
14875;But I'm on mobile so can't make that atm
14876;base64 encoding is so different than base 236. The latter use 09 to represent 09 az to represent 1035 and is case insensitive. base64 is case sensitive and use AZ to represent 025. base64 cares about the machine representation (little endian vs big endian) of a integer yet base 236 is machine representation independent. So it makes sense strconv does not support base higher than 36
14877;I guess that‚Äôs kindof what I was trying to say  it‚Äôs not 1:1 like other base conversions
14878;So it requires an encoding algorithm as well as the maths
14879;Hey did you cover gotk3 in your ebook? @andy.xyz
14880;It covers GTK using mattn/gogtk
14881;@r3velated I don‚Äôt know how the bindings differ but at the time of writing (18 months ago) the mattn repo was more popular/active
14882;maybe I'm dumb but I got a type struct in main.go I want to pass over as an argument to cmd/pick.go's function... can I do that?
14883;compiler is telling me it's an undeclared name
14884;You cant import from main
14885;so what's the course of action
14886;i redefine the struct?
14887;ü§î
14888;nvm i'll just call the function from somewhere else
14889;is main.go in the same folder as pick.go
14890;it is not
14891;main package is generally in the cmd folder but that doesnt matter
14892;You cant import something from main because that would cause an import cycle
14893;Any tips on debugging race conditons?
14894;Think logically lol
14895;Not sure outside of that tbh
14896;Using ‚Äúrace‚Äù?
14897;> Think logically lol@Str≈ìm I did not write that part of the code unfortually. I narrowed it pretty much down through
14898;Most folders have their last commit to at least 3 years ago lol
14899;Yeah the mattn one seems dead now
14900;Did anyone try to do digital signing on pdfs in golang?
14901;This claims to be able to do it https://github.com/unidoc/unipdf
14902;Seems to be paid though
14903;https://unidoc.io/ not everything is free unfortunately
14904;PDF handling is one of the things you end up paying for
14905;Either with money or 10x as many manhours doing it from scratch.
14906;thanks adobe
14907;Why is this format even so complicated
14908;because that's how formats worked in the 90s
14909;see: doc docx pdf
14910;you build an absurdly useful but convoluted data interchange format
14911;patent it
14912;print billions of dollars
14913;oh i skipped a ste
14914;don\'t document it
14915;docx is an excellent example of this tactic bweing done maliciously and exceedingly well
14916;PDF is now ISO and it's still super hard to handle
14917;It's normalized and a standard and it's still crap
14918;latex gang
14919;sike
14920;Hey ! Does any of you know a good guide about how to interface a gRPC  microservice system with a REST API ?
14921;Cause I've been reading a few things I'm not sure of the method I'm following
14922;Actually I wrote everything so I can interact with my microservices by this way :`curl X <HTTP_METHOD> localhost:8080/<service>/<microservice>`
14923;well gRPC and rest ( HTTP ) are two entirely different protocols
14924;i'm pretty sure gRPC is specifically a binary wire protocol
14925;> well gRPC and rest ( HTTP ) are two entirely different protocols@deezy Yes I\'m just looking for a clean way to setup an architecture which sets up a gRPC dialog inside of the system and a REST/HTTP dialog with the outside
14926;(am I clear)
14927;I mean there's no reason you can't run a gRPC AND http thing inside the same go binary
14928;```go grpcServer()go httpServer()```
14929;Yes I'm asking a bit more about good practices on how writing this whole stuff
14930;your question\'s a little vague. It\'s like saying I want to buy a couch and a futon what are good practices?
14931;depends on what you're planning on doing with them
14932;Ok I'll try explaining my request a bit differently
14933;The idea is to have a set of microservices which can talk between themselves using gRPC (for convenience). This set of microservices is what I\'m going to call a system.Now I want to dialog with this system from outside with the approach of a REST API. This means that the REST API will act as a global controller for this set of microservices
14934;So my request is about What are the good practices for linking both worlds
14935;(If I'm still not clear don't worry just pass I won't eat more of your time üôÇ )
14936;It sounds like you want an http gateway
14937;and then a constellation of microservices
14938;probably in k8s
14939;Exactly
14940;Exactly
14941;so yeah
14942;do that
14943;write an http server that makes grpc calls
14944;and then grpc services that talk to each other
14945;expose the http server to the world
14946;and leave the rest internal
14947;you could even put the http gateway in k8s for horizontal scaling
14948;Yes I did but I'm not sure of the best practices that's why I was asking (for example matching a service to a REST resource etc)
14949;Can't really offer anything based on the data provided so far
14950;so far all i can say is general programming advice. check your errors never execute untrusted inputs
14951;it\'s like saying I want to build a house what are best practices? Are you building on a flood plain? in the mountains? underwater?
14952;anyways
14953;i strongly recommend just doing
14954;it's good to plan
14955;> i strongly recommend just doing@deezy Yep alright
14956;But it sounds like you have enough to create prototypes
14957;I'll continue my thinking process here if you're interested https://github.com/AppliNH/gogrpcrest
14958;which is INFINITELY more useful for exploring your problem space than imagination
14959;make sense?
14960;Sure sure
14961;Once you have a prototype you can come back here and we can look at whatever rough edges you find
14962;Godspeed starchild
14963;I should have started by saying I have somewhat of a prototype
14964;Anyway thanks for the discussion !
14965;yep yep
14966;@deezy i already tried unidoc but in some reason when signing it and opening it with adobe reader it just breaks on launch but when opening it with some other reader it works as expected which is weird
14967;how can I pass build tags in VSCode
14968;¬Ø\\_(„ÉÑ)_/¬Ø
14969;idk man pdfs are deliberately terrible
14970;@Werner I don't use vscode but I'm pretty sure you can edit the build config
14971;Do you use goland?
14972;vim
14973;Got ya man thanks anyways
14974;"```json configurations"": [ { name"": Launch"", type"": go"", request"": launch"", mode"": auto"", program"": ${fileDirname}"", env"": {}, args"": [] } ]```There is this in launch config"
14975;Any you really use vim? Lol
14976;yup pretty productive with it too
14977;lots of people here use vim
14978;I use emacs with vim layer love it
14979;"@Werner you\'d add your tags in the args section of your build configuration like `""args"": [""tags madoka,homura""]`"
14980;Conveniently called args
14981;that does not work
14982;Define doesnt work
14983;How are you invoking it
14984;`go build tags='... file.go`I build like this in console.
14985;the tags gets passed to the program on start not on build appearently
14986;Can you show your build tags in the code
14987;`// +build tagname` tags are used to exclude/include stuff from being compiled into the binary
14988;yep thats what it does. It loads a faster implementation in one of my dependencies
14989;Why am I not allowed to use `string(sha256.Sum256(...))`? I get the warning `Cannot convert expression of type [Size]byte to type string `
14990;because
14991;byte arrays are not strings
14992;or rather
14993;string(sha256.Sum256(...)[:])
14994;OH
14995;:thonk:
14996;friggin go
14997;https://ptb.discordapp.com/channels/118456055842734083/118456055842734083/744579887917957240 doesn't work either. `Cannot slice sha256.Sum256(...) (type [32]byte)`
14998;Fixed this by assigning it to a variable first. Idk what was causing that with```gohash := sha256.Sum256(...)string(hash[:])```for some reason this doesn't work:```gostring(sha256.Sum256(...)[:])``` ¬Ø\\_(„ÉÑ)_/¬Ø
14999;yeah uh
15000;Go is REALLY particular about slices vs arrays
15001;`[1]int` is not interchangable with `[]int`
15002;yup and you can't slice an unaddressable value
15003;which is why assigning to a variable first works because that variable is addressable
15004;Ah okay. Makes sense. So it has to have a variable to be sliced.
15005;Got it
15006;but the result of an expression in general is not
15007;Thanks for the explanation üôÇ
15008;it can also be in a struct field if that struct is addressable e.g. if you have a pointer to the struct but it can't be a map value because those are not addressable
15009;aha
15010;With the mysql driver can a row value change before I scan?
15011;I know it's lazy loaded but I'm unsure if it loads the freshest data when I scan
15012;in memory or in the db?
15013;:thonk:
15014;like I call Next
15015;and then Scan
15016;between retrieving the row with Next can the row's values change before I call Scan?
15017;I'm pretty sure it's a cursor under the hood
15018;so I _think_ it should be the latest value when Scan is called
15019;or maybe that's just dynamic cursors?
15020;Depends on if you changed the read isolation for the default transaction
15021;And on the driver: innodb vs myisam. But the default is repeatable reads. Which snapshots the rows to read
15022;https://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_consistent_read
15023;@Doad ^
15024;hmm
15025;I want to dynamically stream the rows
15026;You can change the behaviour see the docs.
15027;docs are a little heavy point me in the right direction?
15028;think I found it in https://github.com/gosqldriver/mysql
15029;On phone but if you search for mysql read commited it should work
15030;What storage engine are you using?
15031;I'm not sure what DB this is
15032;just that it's mysql
15033;looks like I can just set `transaction_isolation` in the DSN string
15034;Default is innodb I believe. Myisam doesn't support transactions :')
15035;That might work in the dsn which would be sweet
15036;You want to set it to commited read
15037;Error 1193: Unknown system variable transaction_isolation
15038;hmmmm
15039;> mysql:kek:
15040;https://dev.mysql.com/doc/refman/8.0/en/innodbtransactionisolationlevels.html#isolevel_readcommitted
15041;There are some caveats. That man page is good
15042;pretty sure this is mariadb
15043;We have a query for this
15044;"SELECT version();"
15045;alright I got this
15046;the DSN syntax is a little different for mariadb
15047;it's `tx_isolation='READCOMMITTED'`
15048;instead of `transaction_isolation='READ_COMMITTED'`
15049;Fair enough. Do make sure to read the problems this mode has. You might not want to set this for all connections
15050;Locking is a bit different this way
15051;this is just for a single migration
15052;I just want to avoid a lapse in dirty data
15053;when I migrate a record I want it to be fresh
15054;Any reason you can't use perconaonlineschema change?
15055;That does it live with triggers and all that jazz
15056;it's kind of a complicated migration to auth0
15057;hey,I am currently working on a queue processing function and setup them all up a little different so I wanted generalise it and share some of the setup:But now I have kinda realised that this might not work.https://gist.github.com/phumberdroz/995486249b88e8c926a9097d6c6d97bfHow can I pass down a function which implements the interface without it needing to be in a struct if that makes sense?
15058;Ah not just moving some data from one table to the next. Cool beans
15059;Just to make sure this wasn't XY
15060;ye
15061;@meat only types that can have methods can implement interfaces
15062;Otherwise you would be making a bad version of percona
15063;you could just pass the function itself as a parameter
15064;right so I need to put my function in a type ?
15065;do you need an interface? Or just a function
15066;You can pass a function as a parameter
15067;```Goreturn errbreak```
15068;I just need to be able to pass in a couple of different functions
15069;you don't need `break`
15070;If the functions all have the same function signature just pass that as a parameter
15071;Thanks!
15072;that was what I was looking for
15073;updated the gist:https://gist.github.com/phumberdroz/995486249b88e8c926a9097d6c6d97bf
15074;Just if someone wanted to know how I did it.
15075;Lmk if the isolation level magic works @Doad :)
15076;it does!
15077;GalaxyBrain at your service once again :D
15078;I love that smooth thing
15079;"> Lissencephaly (meaning smooth brain"") is a set of rare\xa0brain\xa0disorders where the whole or parts of the surface of the\xa0brain\xa0appear\xa0smooth. It is caused by defective neuronal migration during the 12th to 24th weeks of gestation resulting in a lack of development of\xa0brain\xa0folds (gyri) and grooves (sulci)."
15080;Thanks xD
15081;smooth for speed
15082;less thought friction
15083;exactly
15084;the only wrinkles on my brain are a thumbprint from the doctor
15085;Put some flames on there
15086;Hello I'm a beginner of Go. I would like an available invitation link of Gopher Slack. The one on https://golang.org/help/ seems to be expired... üò≠
15087;I need help
15088;post your question
15089;hey y'all  new to go and i wrote a quick & dirty program that'll loop over all the files in a directory read them chunk by chunk and then once all of that is completed it'll stop. this current version takes about 43~ish milliseconds to run from a cold start (using `MeasureCommand` in powershell) and i was wondering about possible optimizations (e.g. there's string concatenation with the os.Open call maybe i can elide some error checks is there a better way to iterate over a directory e.t.c) for this sample code i have.it's not the cleanest thing in the universe but it's pretty simple so i hope someone can take a look at it when they can?https://paste.mod.gg/iwofapapir.java
15090;the question is super easy. Just needed to implement the GetMethod to return all the documents from collection (mondodb) using this library. there is no option. https://github.com/Kamva/mgm
15091;@SirJosh first off ditch ever using check functions. theyre a terrible practice
15092;how can I split a b 1 2 into a b and 1 2 directly other than concatenating the splits
15093;i found the `check` function in some docs so i used it  thank you for the advice
15094;no offense to you youre only beginning
15095;too many tutorials use them
15096;nah yeah i get it
15097;chances are you probably dont wanna exit on the very first error might just wanna skip to the next or w/e
15098;thats the problem with these check functions is that you cant affect control flow with them
15099;just that I feel string concatenating is expensive and want to avoid it
15100;@SirJosh are you only wanting to read one folders depth?
15101;then write a benchmark
15102;if performance actually matters it's worth the time to write a benchmark
15103;for now that's all i wanna do yeah
15104;in the future i'd want to recursively traverse a directory though
15105;oh youve got an issue with your code i believe
15106;benchmarks/profiling
15107;yea but is there an alternative way? I can benchmark between the two
15108;well your question is confusing
15109;how can i split this string without concatenation
15110;those are two directly opposite functions
15111;I want to split on the second space not just every space
15112;```gofor _ file := range files { waitGroup.Add(1) go readFile(file completedReaders waitGroup)}```replace this with```gofor _ file := range files { waitGroup.Add(1) go func(file os.FileInfo) { readFile(file completedReaders waitGroup) }(file)}```
15113;sure so use a for loop
15114;or a Scanner
15115;what's the difference between the two?
15116;lemme find the link to explain that
15117;ah ok
15118;https://github.com/golang/go/wiki/CommonMistakes#usinggoroutinesonloopiteratorvariables
15119;oh i see
15120;scanner's delimiter is still a space? so it's the same as split/fields no?
15121;so you explicitly capture the file you want to read by doing that
15122;https://golang.org/pkg/text/scanner/#Scanner
15123;yea you copy the variable as such
15124;scanner just gives you characterbycharacter
15125;because the variable defined in the loop is reused to assign the next value
15126;and theres no guarantee that the goroutine is started instantly
15127;interesting language design choice
15128;so you\'d step through characters until you find your second space
15129;so by the time the goroutine starts the variable may have been overwritten with the next iteration
15130;after building with that suggestion it's still running at the same speed as before so that's also interesting
15131;and then you could use the index of that second space to slice the string
15132;it looks to me scanner delimits on default whitespace or user defined whitespace I can just range if I want char by char?
15133;yeah you can change the delimiter
15134;check the docs
15135;yes that's exactly what the default scanner does
15136;character by character
15137;"what data structure would you choose if you want a hashSet on millions of domain/subpage? say I have foo.com/bar foo.com/baz foo2.com/bar foo2.com/baz ... Do I just m[""foo.com + bar""] = something?"
15138;I was thinking something like trie? where you can have two layers first one is domain second is subpage
15139;but not sure whether it's natural in go?
15140;"basically m[""foo.com""][""bar""] = something if that makes sense"
15141;sounds like a tree?
15142;not sure
15143;yeah just layers of maps it sounds like
15144;"it\'s super ugly tho ... https://play.golang.org/p/CqfQSffNS1C``` m := map[string]map[string]struct{}{} m[""foo""] = map[string]struct{}{""bar"": struct{}{}} fmt.Println(m)```"
15145;"better looking with int``` m := map[string]map[string]int{} m[""foo""] = map[string]int{""bar"": 1} fmt.Println(m[""foo""][""bar""])```"
15146;Make a data structure for it
15147;Wrap the implementation
15148;`type Tree map[string]map[string]map[string]bool`
15149;congrats
15150;now you've hidden the ugliness
15151;when you insert you still type all the thing no?
15152;no you'd just say `Tree`
15153;but
15154;you still have multiple levels of maps
15155;you can't get around the nesting
15156;BUT you will need to make sure all the maps are initialized properly
15157;so this type would benefit from a `NewWhatever() Whatever`
15158;"```type Tree map[string]map[string]intfunc main() { m := Tree{} m.insert(""foo bar 3) fmt.Println(m[""foo""][""bar""])}func (m Tree) insert(domain page string value int) { m[domain] = map[string]int{page: value}}```like this?"
15159;https://play.golang.org/p/uwJQVCHUsCH
15160;you'll have to initialize all the maps in the tree i think
15161;but i mean
15162;try it and see
15163;I don't get it it'll just default to zero values what does initialize all the maps mean
15164;maps are finicky
15165;but if your code works then it's fine
15166;what are some edge cases I should be aware of
15167;well if you do `var m map[whatever]whatever` m is nil
15168;but uh
15169;that insert isn't gonna work
15170;idk
15171;maps are weird
15172;```gochild ok := m[domain]if !ok { child = make(map[string]int 1) m[domain] = child}child[page] = value```
15173;also note that this is not safe for concurrent use
15174;you need a mutex otherwise
15175;or nested sync.Maps
15176;"```go if err := coll.SimpleFind(&books bson.M{{""$limit"": 1}}); err != nil { ```"
15177;why does it say missing key in map literal
15178;what type is bson.M
15179;"```gofunc GetAll(c echo.Context) error { coll := mgm.Coll(&Book{}) books := []Book{} if err := coll.SimpleFind(&books bson.M{{""$limit"": 1}}); err != nil { return c.JSON(http.StatusBadRequest map[string]interface{}{ message"": internal error"", }) } return c.JSON(http.StatusOK books)}```"
15180;wut
15181;using mongodb bassically I want to limit the documents to 1 for now
15182;SimpleFind(accepts model and filter )
15183;https://github.com/Kamva/mgm#usage
15184;from here
15185;can I save a map offline after I build it? my program will be triggered multiple times and I don't want to rebuild it everytime it's triggered
15186;@ebiyade do you still need an invite?
15187;@func gob/json marshal and unmarshal it
15188;sort like pickle in python
15189;not as bad but ig
15190;ok good to know
15191;Hi everyone can I get some help setting my path? I know y'all probably get this a lot and I don't want to bother anyone.
15192;I'm a total noob to this so bear with me. Every time I open a new shell I have to set my path again.
15193;Linux or Windows?
15194;how come the go tool uses the name of the directory of files as the name of the package and not the package name that appears in the package declaration?
15195;linux
15196;set it in shellrc
15197;probably bashrc
15198;@Deleted User because they're generally expected to be the same (except for main)
15199;also having a binary called `main` wouldn't be great
15200;so export PATH=$PATH:/usr/local/go/bin is fine the way it is then?
15201;im trying to do what you suggested for versioning and the go tool uses `v2` as the name of the package
15202;i guess I'll change `package/v2` to `v2/package`
15203;"https://discordapp.com/channels/118456055842734083/118456055842734083/744627587505979491coming from here:this solved it:```go if err := coll.SimpleFind(&books bson.M{} options.Find().SetLimit(1)); err != nil { ```"
15204;@Koyote you'd want to put the custom one in front but yes
15205;thank you!
15206;yeah np
15207;@andy.xyz yes I still need invite üôá\u200d‚ôÇÔ∏è
15208;`<make(chan struct{})`what does this do? Its the whole line
15209;Quite simply: it blocks forever
15210;It‚Äôs attempting to read from a channel which was initialized right there so we can guarantee it‚Äôll never be written to
15211;@ebiyade DM me your email
15212;hm I think then this should not be at this point
15213;?go structure
15214;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
15215;If two files have the same package shouldn't I be able to call exported functions in the other file? I can build in VSCode but building outside with go build does not work (undefined function)
15216;If they're both in the main package make sure you're building the whole package (`go build`) not a file
15217;can I output the memory size of a variable directly?
15218;or have to calculate manually based on len type size etc
15219;unsafe.SizeOf iirc
15220;https://stackoverflow.com/questions/26975738/howtogetmemorysizeofvariable
15221;yep
15222;> If they're both in the main package make sure you're building the whole package (`go build`) not a file@Carson that was the issue thank you
15223;"``` a := map[int]int{} a[1] = 1  b := map[int]int{}  fmt.Printf(""a: %T %d\ a unsafe.Sizeof(a)) // 8 fmt.Printf(""b: %T %d\ b unsafe.Sizeof(b)) // 8```how do I print the size of the whole map? looks like the map variable is only a pointer do I have to range it and sum them"
15224;https://play.golang.org/p/uoH5CMjKbJK
15225;https://play.golang.org/p/VFDiobGc1jk
15226;you use the `len` keyword
15227;I want to print memory size that a map (and its keys values) uses
15228;> // A map is just a hash table. The data is arranged> // into an array of buckets. Each bucket contains up to> // 8 key/elem pairs. The loworder bits of the hash are> // used to select a bucket. Each bucket contains a few> // highorder bits of each hash to distinguish the entries> // within a single bucket.that's why it outputs 8?
15229;https://github.com/golang/go/blob/master/src/runtime/map.go
15230;size of prints the size of the type
15231;not the heap size
15232;you'd want to use a debugger for that
15233;or pprof
15234;why does `v := 0.00` trigger this: ```ineffectual assignment to `v` (ineffassign)```
15235;what is the difference when I pass T and &T ?Is T the value and &T the pointer?
15236;yes
15237;interesting
15238;I\'ve never seen an ineffectual assignment error
15239;https://github.com/gordonklaus/ineffassign
15240;:Thonk:
15241;am using golangcilint
15242;yeah not sure
15243;maybe var unused?
15244;it works? https://play.golang.org/p/3COhOFWJi9K
15245;it's def used
15246;yeah dunno
15247;yes it does work but I am unsure what is causing this thing
15248;maybe it's another v that is used which shadows the 0.00 v?
15249;not sure lol not enoug hcode for me to guess
15250;"```go v := 0.00 if m.ShippingPerPound != 0 { v = m.ShippingPerPound } else { v = u.CostProfile } return bson.D{ { Key: $addFields"", Value: bson.D{ {Key: shippingCost Value: bson.D{{Key: $multiply Value: bson.A{""$packageWeight v r.ShippingCostProfile}}}},``` this is a glimpse"
15251;"what gives if you change it to var v float32/64""?"
15252;nothing?
15253;but what does that mean?
15254;does it have the same error? just thought it would avoid assignment and use zero value of float
15255;It doesn't give an error now
15256;The zero value of float is zero
15257;yes
15258;Guess the CI complains if you don't use the zero value properly
15259;ah I understand.
15260;:Thonk:
15261;tbh I could just remove the else statement here
15262;but yea thanks üòÑ
15263;"i\'m trying to learn opengl and it keeps erroring saying i\'m missing a null terminator in gl.Str() but i don\'t know what that means```gogl.BindFragDataLocation(shaderProgram 0 gl.Str(""outColor""))```"
15264;ah i had to put \\x00 at the end of all the strings
15265;not sure why but oh well
15266;That's how strings in C work
15267;they terminate with a null byte
15268;otherwise there's no way to know how long the string is
15269;C.CString() does that for you btw
15270;"Hello everyone,Im new to golang and im setting up a mongodb client in my main function and instantiating the database and collection.```database := client.Database(""testDataBase"")userCollection := database.Collection(""users"")``` I really need to access these variables within other functions.In golang should I be passing these through my function calls or should I be making global variables?"
15271;generally you'd ahve a struct and methods
15272;Abstract away the db through a couple of structs and methods on those structs
15273;Ideally the part that uses it wouldn‚Äôt know if you are retrieving the data from memory a file or mongodb
15274;me: I wonder why my project is taking so long to compile
15275;``` ‚ûú go build vgithub.com/appadeia/barista/baristago/configgithub.com/mattn/gosqlite3```
15276;fucking sqlite3 ugh
15277;one of these days we're gonna get a good go implementation
15278;sqlite doesn't take that long for me :Thonk:
15279;@_diamondburned_ @Madxmike thanks,So kinda almost as i would do in javascript?have a struct for all my database stuff?
15280;Yes no?
15281;You can
15282;You could also separate things out
15283;Just off the top of my head
15284;You want a list of users
15285;So you create a usergetter interface
15286;Which you can implement on some struct that holds a collection
15287;And you can pass that struct anywhere you expect a usergetter
15288;But you don‚Äôt need access to the whole thing
15289;I‚Äôm unfortunetly tired to give you a decent example sorry
15290;cool thank you for explaning
15291;thats all i needed
15292;Just goes back the inversion ideas
15293;Accept interfaces
15294;Return structs
15295;All that stuff
15296;why is that
15297;nvm lol:)
15298;"Just one more thing though how do i spesify the type for say... the returned client var from something like this.``` client err := mongo.NewClient(options.Client().ApplyURI(""mongodb://nodeRunner:Runner@127.0.0.1:27014/nodeRunner"")) //setup client```"
15299;What do you mean the type
15300;It‚Äôs whatever the function returns
15301;Probably something like mongo.Client
15302;Or whatever
15303;hmmmm ok should i be able to use the reflect package to find what i should use?
15304;No
15305;What do you mean by specify the type
15306;I don‚Äôt understand your question
15307;like how I have to add string here```type Teststruct struct { Id string Name string}```
15308;Yeah in a struct you do
15309;But := declares and assigns the variables
15310;Client IS whatever type the function returns
15311;Your ide should tell you if you mouse over the var or function
15312;And if not you can always check the docs
15313;what mouse... im in vim land lol
15314;haha.
15315;Then whatever vim thing it is
15316;Any decently setup editor will be able to supply you that information
15317;But you can always check the godocs if not
15318;thank you youve helped a lot ill use my google fu from here
15319;I use vim with mouse :^)
15320;Vimgo is legendary
15321;Bruh
15322;memes aside you can use ALE without all the vimgo bloat
15323;I didn't use like 90% of what vimgo had so I just removed it
15324;@_diamondburned_ yea i tried it but just cant keep it on lol
15325;I only use gopls and goimports now
15326;why not?
15327;because clicking on the window moves my curser
15328;:vim:
15329;i have n
15330;oh
15331;that's not a big deal but sure
15332;when writing middleware why is `func FromContext(ctx context.Context) `used instead of `ctx context.Context`?
15333;wouldnt having a pointer mean you can modify the context earier
15334;Yeah that's gotta be the most obscure reason to not use the mouse
15335;because it's moot
15336;a pointer to interface is usually useless
15337;@Flexagon because Context is an interface
15338;9/10 pointer to an interface is not what you want
15339;you'd only use a pointer to interface if you want to change the interface itself not the interface value's underlying values
15340;@_diamondburned_ can you elaborate?
15341;well i understand the second part
15342;but not the first
15343;i\'m not sure what you mean by modify the context earlier
15344;wym change the itnerface itself?
15345;you don't modify the same context instance
15346;you'd wrap the current context instance with another context
15347;which is why all context.WithX functions take in the context as the first argument
15348;as you pass the context down you'd wrap it
15349;ah
15350;this doesn't really ahve to do w/ a ptr to interface though but that's how you use a context
15351;and it answers why you don't use Context
15352;@Flexagon you can change the value that an interface points to
15353;pointer points to
15354;By doing `ptr = value`
15355;Thats if you want to completely change the value the pointer points to
15356;If you wanted to do that to a variable of type interface youd need a pointer to an interface
15357;Otherwise you dont want a pointer to an interface
15358;time pkg is good
15359;nice api and easy to use
15360;most of go's stdlib has a nice api and is easy to use imo
15361;main reason i love go and kinda despise nodejs now
15362;~~wait until you discover deno~~
15363;~~which is literally just node.js with go stdlib~~
15364;deno is far too young
15365;no employers want it üò≠
15366;tbh will they even know the difference assuming written from scratch
15367;i mean its hard to get jobs that you write new systems in
15368;but maintaining legacy systems?
15369;ez entry level jobs and pay a shitton
15370;also tehres a ton of them
15371;true
15372;ugh i don't like maintaining tho
15373;it's something i'm terrible at
15374;still struggle to maintain my old projects
15375;same
15376;but i gotta learn if i want a job lmao
15377;üòî
15378;`should not use basic type string as key in context.WithValue` why does it throw this
15379;why shouldnt i
15380;```type contextKey struct { name string}```this is all a context key is???
15381;did you pass in name?
15382;because strings are collideable
15383;``` ctx = context.WithValue(ctx Email email) ctx = context.WithValue(ctx KeyValue keyValue)```
15384;yeah
15385;wym collidable
15386;if I were to make a new middleware that you happen to use and uses Email for my context key then it would override yours
15387;oh
15388;you basically do
15389;```gotype key intconst ( keyPrincipalID key = iota // ...)```
15390;this way `type key` and its values is only collideable within your package
15391;so what happens when someone requests the email from context?
15392;just make a wrapper function
15393;or export the enums
15394;but eh
15395;wrapper is cleaner since you can safely assert and handle to the right types
15396;oh I see what they do
15397;can you show me a way
15398;to use wrapper to fetch
15399;do i just make another function in my middleware
15400;that gets the email etc
15401;just make it take in a context
15402;or a request
15403;or both
15404;like gochi's URLParam
15405;and then return the email
15406;yeah
15407;thanks
15408;yeah np
15409;"```func addTicketToContext(ctx context.Context email keyValue string) context.Context { ctx = context.WithValue(ctx ticketCtxName{name: Email""} email) ctx = context.WithValue(ctx ticketCtxName{name: KeyValue""} keyValue) return ctx}```something like this si good?"
15410;yeah sure
15411;"How does ok work in this?```goif _ ok := h.clients[client]; ok { h.disconnect(client) }```"
15412;you could do `type ctxName string` too btw but eh
15413;perfect thanks @_diamondburned_
15414;ok is bool
15415;Does it check if it already exists?
15416;or if it's a zero val
15417;or what xd
15418;if exists
15419;oh thats all I need
15420;thanks!
15421;yeah np2
15422;"`ctx = context.WithValue(ctx ticketCtxName(""Email"") email)` and do something like this? @_diamondburned_"
15423;yeah
15424;pretty much
15425;aii
15426;"@mike Am I doing this right this is what i came up with in testing```type database struct { Client mongo.Client User User}var Test3 databasefunc main() { client err := mongo.NewClient(options.Client().ApplyURI(""someconnectionstring"")) //setup client Test3.Client = client```"
15427;saving the mem address of the new client into the the instantiated database struct of test3?
15428;that's the opposite of what that does
15429;you're dereferencing the pointer
15430;aaaa ok
15431;How would I go about scaling a backend like this?
15432;https://github.com/gale93/mmodemo
15433;installed go yesterday got the bug pretty bad. It's too nice. ü§¶\u200d‚ôÇÔ∏è
15434;which would be faster or less taxing
15435;two slices with each with its own ints
15436;or a struct
15437;with both ints
15438;n u access both
15439;probably latter
15440;depends on how you are using it
15441;but yeah probably the latter
15442;but also probably doesn't matter
15443;latter meaning the struct?
15444;yeah
15445;most likely though you are doing a premature optimization and it doesn't matter
15446;you should pick the one that makes it easier to read the code
15447;yea that
15448;igh thakns
15449;goign wiht the latter anyway:0
15450;üôÇ
15451;üôÇ
15452;Sorry to bother can anyone help me with what I think is a path error? When I go get I get a permission denied error but when I sudo it I get a command not found error.
15453;what is the output of which go and ls l $(which go)
15454;well maybe starting with the actual error
15455;permission denied is hugely nebulous
15456;you should NEVER `sudo go` anything
15457;100% of the go toolchain is designed to work without sudo
15458;but yeah just paste that error
15459;/usr/local/go/bin/go and the other one is the same
15460;@deezy I know it's throwing me for a loop. can't seem to track it down. I edited the .bashrc for go to work and the command works just fine until I go get something
15461;again it'd be a lot easier to work with you if you'd share the full error
15462;go get github.com/tomnomnom/httprobe: copying /tmp/gobuild962665483/b001/exe/a.out: open /usr/local/go/bin/httprobe: permission denied
15463;there ya go
15464;your GOPATH is set to a directory you don't own
15465;i like to use `~/.local/go` for my gopath
15466;keep it in the home dir
15467;ohh dude I'm a dumbass
15468;sorry guys
15469;errors are good
15470;if you have a whole ass error message you generally can't go wrong sharing that up front
15471;people who know what they're talking about can usually make some pretty educated guesses
15472;I didn't want to be that guy only showing up when I have problems.
15473;that's the whole point of this channel
15474;Noted for next time thank you!
15475;and also you did show up with a problem. a vague one
15476;just sayin :kek:
15477;anyways you're fine
15478;lol true my bad
15479;just protips
15480;Hey does anyone knows about memory efficient linked list / XOR linked list ??
15481;And can i make it using go ?
15482;why can't you?
15483;I mean anything linked list will be a pain in the ass w/ a GC
15484;but try it and see
15485;benchmark and profile
15486;When i am saving the pointer in uintstr I can't bring back the actual pointer back
15487;why are you saving the pointer
15488;and why are you using uintptr
15489;why is your pointer not typed
15490;wtfwtfwtf
15491;Cause i have to do xor
15492;bruh
15493;Between those pointers
15494;cast to uintptr xor then immediately cast back to unsafe.Pointer
15495;something like
15496;:GWllentThinkPika:
15497;```gov := (T)(something)p := unsafe.Pointer(uintptr(unsafe.Pointer(v)) ^ thing)v = (T)(p)```
15498;I think
15499;:GWllentThinkPika:
15500;Let me check
15501;refer to https://go101.org/article/unsafe.html
15502;"```gofunc foo() { p0 y z := createInt() createInt() createInt() var p1 = unsafe.Pointer(y) var p2 = uintptr(unsafe.Pointer(z)) // At the time even if the address of the int // value referenced by z is still stored in p2, // the int value has already become unused so // garbage collector can collect the memory // allocated for it now. On the other hand the // int values referenced by p0 and p1 are still // in using. // uintptr can participate arithmetic operations. p2 += 2; p2; p2 p0 = 1 // okay (int)(p1) = 2 // okay (int)(unsafe.Pointer(p2)) = 3 // dangerous!}```"
15503;But there is one thing I don't think i can type cast anything back to my (QNode)
15504;:GWloopyBlobShrug:
15505;type cast the unsafe pointer?
15506;like the code i wrote above and the code I posted?
15507;```gofunc main() { t := T{y: [3]int16{123 456 789}} p := unsafe.Pointer(&t) // uintptr(p)+N+M+M is the address of t.y[2]. ty2 := (int16)(unsafe.Pointer(uintptr(p)+N+M+M)) fmt.Println(ty2) // 789}```
15508;Yeah I'll try that
15509;Ok I'll try it and come back
15510;Thanks
15511;yeah np
15512;how can i edit a value
15513;in a struct
15514;without remaking it
15515;like if i left one at a null value cause i dont do omit
15516;how can i give it a value if ive already made a varible with that struct type
15517;`v.Whatever = value`?
15518;https://pkg.go.dev/badge/
15519;neat
15520;the receiver is a nil value?
15521;i dodn't get what you meant lmao
15522;what kind of applications would benefit from xor linked list?
15523;beats me
15524;not really
15525;the right question
15526;at this point i just help them without caring much
15527;LMFAO
15528;totally overthoguht
15529;taht
15530;the question would probably be best framed as what properties do linked lists have and how do they behave under specific use cases
15531;a xor linked list?
15532;or a linked list
15533;they're both data structures
15534;the same formula aplies to both
15535;not really? but sure
15536;no i mean they\'re both data structures. so the question is what properties does it have and how does it behave under different use cases in the general case
15537;oy vey
15538;cannot use unsafe.Pointer(un(temp) ^ top.np) (type unsafe.Pointer) as type uintptr in assignment
15539;:GWloopyBlobShrug:
15540;un = uintptr (unsafe.Pointer())
15541;Wait
15542;:GWllentThinkPika:
15543;My mistake
15544;Ignore everything
15545;:thinkingo:
15546;kek
15547;Ho can I convert plaintext to JSON/YAML ( more like kubectl get pod o yaml) . Is go template an option
15548;wat
15549;plain text?
15550;oh you want to parse yaml?
15551;use the yaml package that someone else made
15552;"any idea why this won\'t work? ```gopackage mainimport ( encoding/json"" io/ioutil"" log"" os"")// Library is the struct for storing all the notes// inside a JSON filetype Library struct { Boards []Board `json:""boards""`}// Board is the struct for a single boardtype Board struct { BoardName string `json:""board_name""` BoardItems []BoardItem `json:""board_items""`}// BoardItem is the struct for a single board itemtype BoardItem struct { TableName string `json:""table_name""` TableItems []TableItem `json:""table_items""`}// TableItem is the struct for a single task in a tabletype TableItem struct { Note string `json:""note""` Done bool `json:""done""` DateAdded string `json:""date_added""` DateDone string `json:""date_done""`}// ImportedLibrary is the variable containing all the boards tables and notesvar ImportedLibrary Library// ImportLibrary adds all notes from the library filefunc ImportLibrary(filename string) { data err := ioutil.ReadFile(filename) if err != nil { log.Fatal(""Failed reading library.json file:  err) } err = json.Unmarshal(data &ImportedLibrary) if err != nil { log.Fatal(""Failed unmarshaling library.json to struct:  err) }}func main() { ImportLibrary(""library.json"")}```"
15553;it says `2020/08/17 08:04:03 Failed unmarshaling library.json to struct: unexpected end of JSON input`
15554;this is library.json
15555;https://hastebin.com/ibirurotod.json
15556;i used jsontogo to create the struct then separated it but i also tried directly copying the struct from jsontogo to get the same
15557;i made sure that my json is proper with a linter
15558;`json.Valid(data)` says false
15559;hmm
15560;maybey ou forgotto save otr sth
15561;i didn't
15562;it works if i copy the json directly into a variable
15563;this is so annoying
15564;Can anyone explain why we don't need to install golang to run a compiled golang program but Java does need to installl the JRE aren't java compiled too?
15565;go compiles to machine code java compiles to Java bytecode
15566;I think
15567;yep
15568;JVM bytecode to be more precise
15569;I see  because both of the docs describe they are Compiled Code
15570;hi what is a good book or resource on golang concurrency patterns?
15571;?go concurrency
15572;Kavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_TailorUnderstanding channels <https://www.youtube.com/watch?v=KBZlN0izeiY>  Sgt_TailorRob Pike  Concurrency Is Not Parallelism <https://www.youtube.com/watch?v=cN_DpYBzKso>  Skippy
15573;I'll check those out thanks but I learn better with written examples and explanation
15574;wait
15575;@func what OS
15576;what line ending
15577;also
15578;try and printf %q the bytes
15579;yeah looks like i messed up the location of that json file @_diamondburned_
15580;i thought it's looking where that go file is in that's opening the file
15581;not where i'm running the code from
15582;bruh
15583;welp
15584;lol
15585;mistakes happen
15586;just realized when it created a 0 byte library.json file elsewhere
15587;ü§£
15588;lol
15589;> wat@_diamondburned_ I mean to say unstructured content ( a struct maybe)
15590;How are you guys using env variables to configure a go app? Do you include a pkg like https://github.com/kelseyhightower/envconfig to parse it to a struct or how do you access it?
15591;good ol getenv unless I really need a .env
15592;"but I can always do `source .env; gr`"
15593;is there a version of `fmt.Fprintln` where it prepends the writer rather than appends?
15594;that'd be a function of the writer you give it
15595;all Frpint does is call .Write() on its first argument
15596;the writer I'm using is from bufio.NewWriter what method do I need to override for prepend?
15597;ohh it's Write under Writer
15598;that's so weird
15599;that sounds so niche
15600;you can shadow the Write method but that's so weird
15601;yea too much effort I think I might just do a `tac`
15602;bruh
15603;you need more code than that to do a tac
15604;if you want a writer abstraction
15605;https://groups.google.com/forum/#!topic/golangnuts/mxbQtKt1V4
15606;> You can't. It's not a limitation of go  it's a limitation of files. You would> have to rewrite the entire file by reading it in then truncating then> writing what you wish to prepend then writing the buffer you read in. hmm
15607;That‚Äôs what I was thinking too! Files start at 0th byte and written as byte stream  there is no ‚Äúlinked list‚Äù like behaviour that would be able to change the start point
15608;That said you could open a file to read/write then read a byte buffer it then overwrite then same with next byte then when done inserting do the same for the rest of the file. So you‚Äôd need a rotating buffer the size of your input and you‚Äôd have to rewrite the whole file
15609;I guess you could hack it together by implementing Write and Flush/Close
15610;Where you write to a buffer until you flush it to a different writer
15611;Many OS won‚Äôt allow different read/write to the same location IIRC
15612;Oh wait sorry I see what you mean
15613;Yes that would work but your buffer would have to be big enough to save the whole file in ram plus additions
15614;Pretty much I think the answer is likely: don‚Äôt prepend files üòâ
15615;Yup. File prepending doesn't exist afaik. You can increase the size of the file move everything over and write at the start but that isn't efficient at all
15616;Well...
15617;<https://man7.org/linux/manpages/man2/fallocate.2.html>
15618;that does exist
15619;<https://golang.org/pkg/syscall/#Fallocate>
15620;So depending on the size of the file and how much you need to write you can `fallocate` more space seek to the start of the file and write data
15621;But that only works on linux systems starting with kernel 4.1 (which isn't new so that is good at least)
15622;Depending on your use case you could append to files and then have a background task which consolidates the file and sorts its contents to have the correct data at the beginning.
15623;does fmt.Sprintf not support ANSI escape codes?
15624;it supports all utf8 characters
15625;But ansi escape codes aren't part of UTF iirc
15626;strings in go must be valid UTF8 sequences. If they aren't they will be converted into one
15627;Hum there is no `v1.15.0stretch` does anybody know was `stretch` deprecated or it was just not yet released?
15628;knowing debian it probably isn't out yet
15629;1.15 is available in the testing repo
15630;<https://packages.debian.org/search?keywords=golang>
15631;@Sgt_Tailor ah yes makes sense it depends of debian.
15632;Thank you for clarifying.
15633;is it recommended to do null checks on primitives?
15634;primitives cant be null
15635;unless you consider maps/slices/pointer types to be primitives
15636;no nonpointer type can be nil
15637;they should have a useful zero type
15638;quick question that i cant figure out how to google ive got this error:`Cannot use x (type [15]string) as type []string`
15639;how do i make a [15]string into a []string
15640;`x[:]`an array isn't a slice
15641;ahh
15642;thank you
15643;i knew it would be simple
15644;to be determined
15645;Go 2's feature set isn't even set in stone
15646;so
15647;no point speculating
15648;afaik they were talking about migration tool so it might be not so hurtful
15649;unless there's unsafe tricks in ur code
15650;aka: all your code @Laevus Dexter
15651;"hey guys i\'m getting back into golang again after quite a while so i\'ve forgotten a lot.> MustCompile is like Compile but panics if the expression cannot be parsed. It simplifies safe initialization of global variables holding compiled regular expressions.means that ```gore err := regexp.Compile(`foo|bar`); err != nil { panic(""panic message"")} re := regexp.MustCompile(`foo|bar`)```are essentially the same right?"
15652;yea
15653;ok so a followup question:
15654;```gore_1 _ := regexp.Compile(`foo|bar`)re_2 := regexp.MustCompile(`foo|bar`)fmt.Println(re_1 == re_2) ```this is false
15655;sure
15656;they're different regex values
15657;it's the same pattern
15658;but different values
15659;could you go into a bit more detail? üôÇ
15660;okay so you know how you have a struct right
15661;the regexp struct?
15662;```gotype Person struct { Name string}```
15663;"and you can do `x := Person{""John""}`"
15664;x is a value of type Person
15665;"`y := Person{""Sue""}`"
15666;y is a value of type Person
15667;ok
15668;that's what a value is
15669;it is a specific instance of a type
15670;two regex values are not comprable
15671;presumably because they have internal state related to match groups and shit
15672;fyi (Must)Compile returns a pointer
15673;oh yeah
15674;and == compares the addresses
15675;not the values
15676;that'd do it too
15677;they're literally different memory addresses
15678;but i'd also wager that you couldn't == regex patterns anyways
15679;or that it wouldn't be meaningful
15680;i wouldn't mind a quick crash course in `==` again
15681;just checks if two variables are equal to each other
15682;https://golang.org/ref/spec#Comparison_operators
15683;== on pointers checks if theyre the same address
15684;best crash course available
15685;== on values checks if all the fields are equal
15686;its a compile error if doing == on value types with non comparable fields
15687;so am i not actually comparing the values but the pointers because MustCompile is a pointer?
15688;right
15689;but also
15690;Compile and MustCompile return regexp.Regex
15691;this is kind of a weird thing to do
15692;comparing regex patterns after compiling
15693;Xy problem?
15694;if you really want
15695;it's just a toy project to get back into golang
15696;you can do re1.String() == re2.String()
15697;nah it's not XY at all
15698;`String returns the source text used to compile the regular expression.`
15699;does that mean i _have_ to go through the String method rather than do something with operators?
15700;theres still the == operator ü§î
15701;What are you trying to accomplish?
15702;Why do you want to compare those regex values?
15703;it's been a while since i played around with pointers. is it possible to return the same instance?
15704;no
15705;each call to Compile returns a new instance
15706;outside of regexp
15707;say i make a struct
15708;make a caching wrapper
15709;best you can do is cache on regex string
15710;you cant do say return same instance for all regex strings that match the same input
15711;because afaik thats undecidable
15712;Hey guys noob here best source to learn go?
15713;?go learn
15714;Gopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Go by Example <https://gobyexample.com/>  SkippyA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  Skippy
15715;?go learn
15716;Gopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Go by Example <https://gobyexample.com/>  SkippyA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  Skippy
15717;Ty my dears
15718;Jynx
15719;let's move away from regexp for now. say i make my own struct called `Wobble` or something else metasyntactic
15720;and i have a function that returns a pointer to `Wobble`
15721;is that always going to be a new instance?
15722;and would i need to use the caching idea?
15723;yes
15724;similar to a singleton?
15725;are there links or guides etc to the caching idea?
15726;or if it is simple enough to demonstrate with a snippet that would be great too
15727;just a map
15728;¬Ø\\_(„ÉÑ)_/¬Ø
15729;i don't really follow
15730;you know what a map is right?
15731;yeah i remember maps
15732;i'll give you a hint
15733;maps have a 2 value usage
15734;so youd want some way to correlate what inputs gave the same outputs
15735;`x ok := m[key]`
15736;so i would store the instance inside the map and just refer to that?
15737;yes
15738;thats how caching works
15739;thanks for the tip üôÇ
15740;üëå
15741;@deezy what does the `ok` do in that snippet exactly?
15742;that's like a valuenotfound type of error?
15743;maybe reread the tour on maps
15744;the tour is quite good
15745;yeah that sounds like a good idea
15746;tldr if the key exists or not
15747;is there a way to have a default value similar to python's .get on a dict?
15748;i'll go read the tour after this question
15749;retrieving a nonexistant key will return the zero value of the type
15750;all in the tour üôÇ
15751;could someone give me a pointer on how to properly use named capture groups in go?
15752;as in how to achieve it in go not regexp itself
15753;`re.SubexpNames()[1]` so far i've found this. does that mean i have to build up my own mapping?
15754;what is hte signifigance
15755;of the ...
15756;```go a:= []int{1,2,3,4,5} a= append(a[:3] a[4:]...)```
15757;such as in this case
15758;it expands the slice
15759;i read the godocs but doesn't rlly sit
15760;You don't append slices to slices you append elements to slices
15761;so you have to expand a slice into its elements
15762;@beepsandboops named capture groups?
15763;You can just iterate over the subexp names and put them in a map
15764;ahhhh
15765;that makes total sense
15766;in this case
15767;where
15768;spreadsheetlist contains a type struct
15769;```gov.SpreadSheetList = append(v.SpreadSheetList[:i],v.SpreadSheetList[i+1:])```
15770;it keeps saying i can't do i +1
15771;but isn't that just an int supposibly?
15772;im for looping thats wehre i get the i from
15773;probably just you're linter messing up
15774;since that's an invalid append
15775;you have to expand that slice
15776;`v.SpreadSheetList[i+1:]...`
15777;ohhh
15778;so ur basically
15779;rewriting
15780;the elemtns to another slice
15781;cause u can't append a slice to a slice?
15782;wihtout having like [][]
15783;You are appending N elements to a slice
15784;n meaning a number of choice?
15785;yup
15786;@Doad i'm struggling to figure out how i'm supposed to link it all together
15787;I'm not sure what your issue is
15788;If you need to map the named capture groups iterate over `re.SubexpNames()` and add the values to a map
15789;"``` re := regexp.MustCompile(`(?P<first>foo|bar){2}(?P<mid>[ ])?(?P<second>\\d{3})`) matches := re.FindStringSubmatch(""foobar111"")```how would i relate SubexpNames to matches?"
15790;i'm very likely to be approaching this incorrectly
15791;https://golang.org/pkg/regexp/#Regexp.SubexpNames
15792;look at the example in the docs
15793;i'm already on that page
15794;thank u!
15795;that page doesn't really help at all
15796;I'm not sure where you're confused
15797;the doc and example tells you how to do it
15798;i'm aiming to print out something that would be analogous to `matches['first']` not pass the names back into another method
15799;the index of the name matches the index of the match
15800;then you have to make your own map
15801;in the snippet i showed you i only have `foobar111` and `foo`
15802;so it is not a 1:1 match
15803;i'm doing something wrong
15804;https://play.golang.org/p/a9syf3MRWoU
15805;thanks this helps
15806;got me on the right track now
15807;hey my dudes
15808;"does anyone know the go equivenlent to:```cGLint posAttrib = glGetAttribLocation(shaderProgram position"");glEnableVertexAttribArray(posAttrib);glVertexAttribPointer(posAttrib 2 GL_FLOAT GL_FALSE, 5sizeof(float) 0);GLint colAttrib = glGetAttribLocation(shaderProgram color"");glEnableVertexAttribArray(colAttrib);glVertexAttribPointer(colAttrib 3 GL_FLOAT GL_FALSE, 5sizeof(float) (void)(2sizeof(float)));```i\'ve tried using gl.Ptr but I honestly don\'t know```govar posAttrib uint32 = uint32(gl.GetAttribLocation(shaderProgram gl.Str(""position\\x00"")))gl.EnableVertexAttribArray(posAttrib)gl.VertexAttribPointer(posAttrib 2 gl.FLOAT false 5 nil)var colAttrib uint32 = uint32(gl.GetAttribLocation(shaderProgram gl.Str(""color\\x00"")))gl.EnableVertexAttribArray(colAttrib)gl.VertexAttribPointer(colAttrib 3 gl.FLOAT false 5 gl.Ptr(2))```"
15809;the gl ptr gives me an error because it can't take int as an argument
15810;"```panic: unsupported type int; must be a slice or pointer to a singular scalar value or the first element of an array or slice```"
15811;this is what the function takes in go```gofunc VertexAttribPointer(index uint32 size int32 xtype uint32 normalized bool stride int32 pointer unsafe.Pointer){}```
15812;is my equation here
15813;wrong
15814;to find a percentage
15815;"```govolPercent := fmt.Sprintf(""%v% math.Round((b.currentVolume/b.averageStockVolume)100))```"
15816;im getting some
15817;json: unsupported value stuff
15818;+Inf
15819;im appending and i know it only takes like strings and ints
15820;There are two potential things going on here but they're sort of separate‚Äîwhere does JSON come in here?
15821;i believe go sheets
15822;makes it a json
15823;in order to write to the spreadsheets
15824;Well first: if you want to print a percentage symbol in a `Printf` family function you need to escape it e.g. `%v%%`
15825;Secondly: it seems like `b.averageStockVolume` is zero here
15826;"A divide by zero would result in infinity; you can't do that :p"
15827;then iw ould get an error
15828;from golang
15829;program
15830;Nope.
15831;and not the reponse error
15832;"A float divide by zero isn't a runtime error; it results in `Inf` as you're seeing."
15833;"An integer divide by zero would panic; that might be what you're thinking of"
15834;https://play.golang.org/p/oJ3jEwTwili
15835;"```go_  err := srv.Spreadsheets.Values.Append(spreadsheetId range2 rb).ValueInputOption(""RAW"").Do() if err != nil { errorLog.Println(fmt.Sprintf(""cant append: %v err)) }```"
15836;but that errror happens when im appending
15837;not
15838;doing the acutal calulcation
15839;which i showed above
15840;Like I said: a float divide by zero does not produce any type of Go error during the calculation.
15841;"I have a min heap that I can only get elements in order say 1 2 3; but I want to write to a file in the order of 3 2 1 any idea?"
15842;this is like the only language where i can trust my process not to crash because some random async shit wasnt wired perfectly
15843;:5_bugcatstare:
15844;@func why do you have a min heap then
15845;priority queue
15846;why not a max queue if you want 3,2,1
15847;there are millions of entries to compare using max queue would occupy too much memory
15848;are you absolutely sure that you can't just write to the file sequentally and then later read it in and just loop over it backwards?
15849;Because prepending to a file can blow up quickly
15850;the program only returns the file it's not up to me to read
15851;a truly miserable curse
15852;you'll just have to make a custom writer
15853;i mean I can save sequentially to a tmp file read it in reverse then save it as a result
15854;oh wait
15855;bazinga
15856;do that
15857;WAY simpler than copying and rewriting the FULL contents of the file
15858;for every single write
15859;> there are millions of entries to compare using max queue would occupy too much memorybut a max queue is the same as a min queue
15860;but with different ordering
15861;ü§î
15862;say you want top 10 elements out of a million
15863;you can use min queue of size 10 but max queue of million  10
15864;ok so min queue take the N you need reverse the list
15865;¬Ø\\_(„ÉÑ)_/¬Ø
15866;yea that's doable I think just want to avoid extra step if I can write in the order of 3 2 1
15867;How else you gonna do it if you have a min heap
15868;write in reverse/prepend
15869;which seems to be quite an effort
15870;@func didn't I answer this question earlier today and linked to a ton of documentation
15871;yes regarding falloc
15872;And the buffer
15873;And the reverse reader
15874;yeah I didn't give context at the time so rephrasing the problem in case there are better solution
15875;Reading in reverse isn't entirely trivial but there are reverse scanners outside the stdlib
15876;You have to seek to the end of the file  buffer length
15877;Read buffer
15878;Check for delimiter
15879;Seek to previous location  buffer length
15880;Read buffer
15881;Until you seek to zero
15882;While making sure the buffer is entirely full. Otherwise you might have to read twice
15883;Can someone help me with heroku? lol
15884;You have a question?
15885;Ye haha I just wanna make sure this is a good place
15886;"e so I keep getting this err at build```20200817T15:59:46.112838+00:00 app[web.1]: 2020/08/17 15:59:46 Server started at 3325020200817T15:59:42.023067+00:00 app[api]: Release v7 created by user zanefinnergm@gmail.com20200817T15:59:42.023067+00:00 app[api]: Deploy e0c99cab by user zanefinnergm@gmail.com20200817T15:59:59.000000+00:00 app[api]: Build succeeded20200817T16:00:00.334028+00:00 heroku[router]: at=error code=H10 desc=""App crashed method=GET path=""/ host=mmodemo.herokuapp.com request_id=0c81200b63f94aed91108919f5181189 fwd=""47.26.128.234 dyno= connect= service= status=503 bytes= protocol=https20200817T16:00:00.579852+00:00 heroku[router]: at=error code=H10 desc=""App crashed method=GET path=""/favicon.ico host=mmodemo.herokuapp.com request_id=42ef7ce8f68c4e4aa2560514d6b0f932 fwd=""47.26.128.234 dyno= connect= service= status=503 bytes= protocol=https20200817T16:02:01.972917+00:00 heroku[router]: at=error code=H10 desc=""App crashed method=GET path=""/favicon.ico host=mmodemo.herokuapp.com request_id=c7c026aff3dc4f5eb5bbc67a808b4c25 fwd=""47.26.128.234 dyno= connect= service= status=503 bytes= protocol=https20200817T16:02:01.865105+00:00 heroku[router]: at=error code=H10 desc=""App crashed method=GET path=""/ host=mmodemo.herokuapp.com request_id=5e53c67c4f89422c879020f673b03ba3 fwd=""47.26.128.234 dyno= connect= service= status=503 bytes= protocol=https```"
15887;I looked it up and all I can find is people setting custom ports rather than os.Getenv
15888;"so I changed to os.Getenv(""PORT"") instead but still does this"
15889;Doxed we now know your email and full name üëÄ
15890;noooo
15891;omg i fixed it yessss
15892;i feel so dumb haha
15893;"```gohttp.ListenAndServe(port nil)//BADhttp.ListenAndServe("":""+port nil)//THE ANSWER!```"
15894;i found ur portfolio and would like to inform u that u cant click the githuyb links
15895;fr
15896;e
15897;ok
15898;lol in case anyone wanna check out this https://mmodemo.herokuapp.com/
15899;its multiplayer and i will see u :))
15900;filesystem abstractions
15901;I don\'t even care about generics I just want to stop hearing people say go has no generics
15902;lol go has no generics
15903;fs abstractions can come earlier than go 2
15904;it's an addition and not breaking afaik
15905;yeah I think they said it could be as early as 1.16
15906;yeah I'm hyped for that too
15907;here when u go to https://mmodemo.herokuapp.com/ does a alert happen
15908;I tried it on this pc and it works but not on my other one
15909;lmao looks like you have a hardcoded local ip
15910;check the console logs
15911;oh duh
15912;i should change that but that cant affect the alert can it?
15913;probably breaks control flow
15914;I dunno
15915;okk
15916;hmm
15917;idk how I should get the os.Getenv port to frontend js
15918;I might have to do some html templating
15919;ree
15920;oo I made it work!
15921;I think...
15922;Can u try it once more xd
15923;https://mmodemo.herokuapp.com/
15924;ope it doesnt work with ssl
15925;http://mmodemo.herokuapp.com
15926;Hello how do you guys generate certificates for development?
15927;My dev server needs a cert to connect to Azure AD which is annoying but at least I'll get to learn now how to create a cert...
15928;openssl
15929;just google openssl generate cert
15930;selfsigned?
15931;sure
15932;the docs for Azure should have something
15933;Their docs is all over the place at least for a novice like me...
15934;yeah azure is owned by ms
15935;so it's bad
15936;I saw this library but don't know if it is good/what I need
15937;https://godoc.org/golang.org/x/crypto/acme/autocert
15938;nevermind this package has an unstable API... `openssl` it is!
15939;industry standard
15940;can I generate zero value inline? say I want to compare with zero value```var a intfmt.Println(0 == a) // true```can I do something like `0 == int{}` (doesnt work)
15941;if you want the compared value to have an explicit type you can do `int(0)` `int64(0)` etc but idk why you'd want to do that
15942;a literal `0` can be compared to any number afaik
15943;mainly curious
15944;as in```Govar a intvar b int32var c int64var f float64a == 0b == 0c == 0f == 0```should all work
15945;because the `0` there is untyped
15946;this works with all the primitive types afaik
15947;"e.g. this will work```Gotype label stringvar s label = hi""s == ```"
15948;i mean
15949;a zerovalue of a primitive is really as straightforward as it could ever get
15950;zerovalue > 0
15951;Go doesn't have anything implicit that changes that
15952;> can I generate zero value inline? say I want to compare with zero value> ```> var a int> fmt.Println(0 == a) // true> ```> can I do something like `0 == int{}` (doesnt work)@func `int{}` doesn't work because `int`s aren't structured  the zero value is `int(0)`
15953;yes it works on say time.Time{}
15954;primitives are special
15955;primitives are raw values everything else (structs maps slices arrays) are structured
15956;when testing my API i get `http: named cookie not present` when checking for the cookie I see the cookie in my cookiejar in insomnia
15957;"I do `cookie err := r.Cookie(""session_ticket"")`"
15958;to fetch the cookie
15959;what's your quickest way to get to documentation of a function on go.dev/golang.org? I find myself having to go to pkg page via search engine or history then search the function.
15960;alternatives I know: function prompt in go vscode plugin and `go doc fmt.Println` (but on terminal only)
15961;protip
15962;the import path is part of the godoc url
15963;yeah
15964;copy import path slap it onto the URL bar after `godoc.org/`
15965;or just manually type it out
15966;yep
15967;and i'll generally have the documentation open in a tab for weeks
15968;i'm not sure how frequently you're closing this page
15969;for me until I'm out of RAM lmao
15970;why dont you guys use bookmarks
15971;it's not important enough :p
15972;ahhh why does this happen to me ```2020/08/17 13:50:03 []2020/08/17 13:50:03 http: named cookie not present```
15973;thers no cookies being sent
15974;for some reason
15975;üò¶
15976;I mean I don't just look at a package or two's docs
15977;I look at like 10 per day or more
15978;also no path in cookie maybe?
15979;cookies hard
15980;Good ol debug print everything in the cookie jar :D
15981;logging is your friend
15982;I never invest enough time in logging at the start of a project do you use any packages in particular? I know logrus is pretty popular
15983;yeah i just use stdlib log or logrus
15984;depending on how much i care
15985;Sorry where did the offline go docs go?
15986;`go doc` only shows it on the terminal
15987;I wanted to see the offline web interface
15988;it's a separate tool
15989;Right where is it now?
15990;https://godoc.org/golang.org/x/tools/cmd/godoc
15991;Thanks!
15992;huh... what's the difference between `tools/godoc` and `tools/cmd/godoc`?
15993;Oh one is a library the other is a binary...
15994;Sorry another stupid question about modules... how do I install a tool globally?
15995;I want golang.org/x/tools/cmd/godoc globally not just on my current project.
15996;and I don't want it added as a dependency of my current project
15997;it is global?
15998;you literally run it on command line
15999;yeah it should be a part of go installation
16000;you have to add GOBIN into PATH
16001;and GOBIN is defaulted to $GOPATH/bin
16002;Do you have to use go install as well?
16003;no
16004;go godoc gofmt should be installed altogether
16005;if you use official distribution that is
16006;go getting a main should install into GOBIN yeah
16007;Cool cool
16008;So that's if package main is defined in the root? Or is there another detection method?
16009;it's just the import path
16010;So `go get github.com/dev/package` would always build and put a binary in GOBIN or am I misunderstanding
16011;if github.com/dev/package is a main package
16012;else it just grabs it as a library
16013;Gotcha
16014;there's also github.com/dev/package/...
16015;Thanks (as always)
16016;which grabs every main packages there and installs them
16017;yeah np
16018;why is the request cookie jar empty ahhhh
16019;how do i send cookies in header automatically?
16020;the cookie monster gets their first
16021;üò¶
16022;he runs a mitm attack on your connection
16023;and steals the cookies
16024;nomnomnomnomnomnomnomnom
16025;are you doing things properly according to the docs
16026;i think so?
16027;i have cookie middleware
16028;log dump them
16029;also inspect element
16030;"```golangfunc ticketFromCookie(r http.Request) string { cookie err := r.Cookie(""session_ticket"") log.Println(r.Cookies()) if err != nil { log.Println(err) return  } return cookie.Value}```"
16031;i dumped the entire request cookie jar
16032;returns `[]`
16033;what is the client sending
16034;not sure am using insomnia
16035;1) what is the client sending2) are you actually setting that cookie?
16036;im willing to bet some assumption you are making is false
16037;we just gotta figure out which one
16038;i think its the client's fault
16039;does insomnia not allow you to see the request being sent?
16040;i would have to proxy them i guess
16041;im gonna tets in browser
16042;no idea what insomnia is
16043;insomnia http client
16044;its like postman but more minimalistic
16045;its some postman type thing
16046;right and that should let you see what request you're making
16047;yeah that would be pretty unreasonable for a http client product to not show you the http requests being made
16048;unless minimal means i don\'t have any actual control over the requests i send
16049;which sounds
16050;categorically useless
16051;i know postman does
16052;wym?
16053;well it's pretty useless right now isn't it?
16054;this is all i see
16055;just the request i make an response
16056;yes
16057;that's a GET request
16058;i might just write tests with python at this point lmao
16059;doing nothing
16060;just a get
16061;yes
16062;and you get a 403
16063;get with a session cookie
16064;because you aren't authed
16065;but i have the session cookie
16066;you get a 403
16067;i mean maybe
16068;but you're still doing it wrong
16069;where is the cookie there
16070;in the insomnia cookieJar
16071;cause you're getting an error back
16072;None
16073;yeah i know im doing it wrong
16074;is it electron based?
16075;honestly screw all these browser tools
16076;if yes just skip the UI and open up Inspector
16077;head to the Network tab and see
16078;network tab?
16079;yes in Chrome's Inspector
16080;You ever used dev tools in chrome?
16081;> [Option] Send Cookies Automatically> > Enabling this option will cause Insomnia to automatically send cookies with the request via the Cookie header.
16082;is this enabled
16083;cookiejar moment
16084;fuck it
16085;curl time
16086;mfw curl just works
16087;:aPES_AngerySpin:
16088;yeah
16089;curl is good
16090;curl doesnt show the request yorue sending
16091;same as insomnia
16092;even with v?
16093;oh idk about v
16094;def v
16095;v is so useful
16096;you can also `curl v > /dev/null` if you dc about the body
16097;curl >>>
16098;"Hi everyone,I cant figure this out why is my F var not not being Marchalled as I expected?```godata_bytes := readFile(folderIn file.Name()) // returns []byte// Create a Struct that takes []bytes and a stringf := FileStructure{data_bytes file.Name()}encoded_bytes err := json.Marshal(f) // returns []byte and errif err != nil { println(""Error:  err)}println(""data_bytes:  len(f.data)  encoded_bytes:  len(encoded_bytes))```output```cdata_bytes: 471680 encoded_bytes: 2```encoded_bytes should be greater than the data_bytes. Am I missing something?"
16099;Show your FileStructure struct
16100;```gotype FileStructure struct { data []byte filename string}```
16101;unexported fields are ignored
16102;interesting :?
16103;the fields aren't exported
16104;Thanks @Str≈ìm @cats I completely forgot about that
16105;Also snake case bad
16106;Ik
16107;Just figured I would through that one in
16108;It was just to show the types in the name
16109;if i had a list of structs
16110;and every x time i iterate ovre it to check some values inside
16111;but if it meets a condition i want to remove it
16112;but i can't reslice without getting an idex error if i dont know the len n stuff
16113;would i be best to have a field that confirms if its usuable or not to check it first?
16114;or should i just have a varible at the end of hte iteration
16115;to remove it
16116;i have no idea what you're talking about
16117;I don‚Äôt understand your question
16118;you can pretty easily remove stuff from a slice if you break after
16119;if you don't then you need some extra care
16120;`strings.Repeat( 10)`Does this even do something? Currently refactoring some legacy code but no clue why someone should do this instead of just setting it to
16121;if i have the break
16122;inside a if statement
16123;inside the for loop
16124;which one would it break out of
16125;that takes a bit of CPU yeah
16126;but the output is
16127;@xblooos the loop
16128;breaks break switches selects and loops
16129;so would htis be the mosst logical ways
16130;https://ghostbin.co/paste/483b5
16131;without wanting
16132;to skin an iteration/s
16133;https://github.com/golang/go/wiki/SliceTricks#filterinplace
16134;this is what you want
16135;```type test struct{ example bool}mystruc:=test{}mystruc.example```When I run this code does mystruc.example evaluate to nil? Or how do I test if its set?
16136;example is false
16137;all values default to their zero value if not explicitly set
16138;which is `false` for bools
16139;bruh why you space your code like that
16140;I almost read that as `mystruc: = test{}`
16141;and I wasl ike wtf
16142;¬Ø\\_(„ÉÑ)_/¬Ø
16143;cool
16144;(I just did that testing it out my actual code is spaced proper)
16145;if you want to express something being unset you have to define what unset means
16146;for something like a primitive where all values are valid you could use a pointer to express unset
16147;```gotype test struct { example bool}```
16148;and if example is nil then it is unset
16149;but you have to deal with those cases
16150;ah thats probably better than. I need to check if my struct was initialized. Because otherwise bad things are going to happen üëÄ
16151;80/20 rule btw
16152;you shouldn't try and cover 100% of the cases
16153;the real trick is to make your zero value of your struct a valid state
16154;just have a constructor
16155;and that
16156;if people don't use it let whatever happens happens
16157;lol
16158;usually a segfault
16159;valid zerovalue instances are usually ohly the case when documented
16160;e.g. sync.Mutex
16161;80/20 great
16162;hm guess putting that as false in the constructor does the job too
16163;before I build the next race condition and have no clue what on earth went wrong lol
16164;:thinkingo:
16165;race
16166;use the race detector
16167;its fun when you discover some race conditions in dependencies :Thonk:
16168;definitly not going to fix them all
16169;how do I write/read a map (or other) variable into/from a file for persistent use
16170;or what would you do if you want a persistent map that outlives the program
16171;> or what would you do if you want a persistent map that outlives the program@func maybe export as JSON?
16172;yes will try
16173;hmm how come I never used json.Marshal before
16174;Race conditions in dependencies could and most likely is caused by improper use of said library
16175;Concurrently calling functions that should not be called by two goroutines simultaneously
16176;> or what would you do if you want a persistent map that outlives the program@func you could store the json in something simple like bolt dB
16177;If you don‚Äôt wanna deal with file reading shenanigans
16178;> Race conditions in dependencies could and most likely is caused by improper use of said libraryWell it depends on the dependency doesn‚Äôt it. If it‚Äôs a backyard untested library someone put up on github...
16179;it's not always the library's fault if there's a race condition
16180;if the library provides no threadsafe guarantees then it's the caller's job
16181;usually if something is safe for concurrent use then it'll be documented
16182;for example http.Client
16183;Yeah I agree it‚Äôs the user‚Äôs fault most of the time
16184;But it doesn‚Äôt hurt to be criterious when choosing good libraries
16185;that just depends on the use case
16186;just because a library is not threadsafe doesn't mean it's bad
16187;it completely depends on what the library provides and whether it makes sense or not to be thread safe
16188;The only time I'd say a library is bad is if it doesn't indicate whether it's concurrencysafe AT ALL
16189;so i have my react build files in `./web`
16190;why does json.MarshalIndent exist just for pretty print?
16191;when should I use ioutil as opposed to bufio? I suppose you use ioutil when you have small file/content and bufio when large?
16192;yeah just for prettyprint
16193;latter not sure how they overlap
16194;was bitten by this```var m map[int]intm[1] = 1// panic: assignment to entry in nil map```how does zero value for map work?
16195;you have to initialize it as `m := map[int]int{}` for it to work
16196;or make()
16197;but yes
16198;the zero value for maps is nil
16199;does that make sense? any reason they don't make zero value an empty map
16200;map is implicitly a ptr
16201;that's just specs
16202;ohh ok
16203;append works on nil slices though
16204;yes because append is a function
16205;and setting a map is not
16206;yeah but I mean... that's an arbitrary distinction you are making
16207;no?
16208;append is literally a function
16209;setting a nil slice the same way you do with a map will trigger a panic
16210;like the designers of the language could have made it so that an assignment to a nil map wouldn't panic
16211;it would just initialize a map
16212;that seems scary
16213;why?
16214;a function initializing a nil slice makes sense
16215;because you have to allocate the underlying data structure
16216;in fact it doesn't initialize a nil slice
16217;it makes a new slice and reutrns it
16218;which you then set into a slice
16219;you have to do it anyway if you are going to be assigning it a value
16220;a slice doesn't however
16221;you do not do this with a map
16222;just because you have to do it doesn't make them the same
16223;what?
16224;what
16225;it is the same
16226;sigh
16227;i think the whole default zero value thing in go is a bit fucky but automatically initializing nil maps when you assign to them is scary
16228;why?
16229;with slices it's explicit an allocation may occur
16230;append also allocates memory
16231;and it's not explicit
16232;because you are explicitly invoking append and explicitly using the return value
16233;but it is not explicit
16234;??
16235;you're calling a function where you must use the return value because an allocation may have been copied
16236;the reason why append was added to the language is specifically because manually allocating memory for a slice when it was at capacity was annoying
16237;otherwise the designers could have just gone with slice.append(x y z) right
16238;I'm not sure I understand what you mean
16239;append's contract requires you to acknowledge that the return value may differ from the passed in slice because an allocation may have occurred right
16240;as in the operation may not have been able to have been performed in place
16241;Question
16242;okay a map assignment can enlarge a map when it reaches a certain size
16243;which will allocate more memory for the map
16244;and copy all of its contents
16245;yes but you can't do the same for a nil map
16246;do you think its bad practice to handle errors sort of in an opposite way just because its against the most common pattern?
16247;like this
16248;why not?
16249;"```func handleContentPost(w http.ResponseWriter r http.Request) { if c e := decodeJsonRContent(r); e == nil { c.Save() w.WriteHeader(200) return } w.WriteHeader(400)}```"
16250;because it has a different layout in memory and cannot be done in place
16251;it's not done in place for an existing map either
16252;it is and it isn't right
16253;it is because the map value is a proxy to some heap map structure
16254;and the reallocations are hidden behind that value
16255;i don't think these are good semantics fwiw but they are at least consistent
16256;what if the adjacent memory location is already allocated for some other object
16257;oh boy
16258;a map is just a pointer on the stack to a heap allocation
16259;so is a slice
16260;it is but it's one level removed right
16261;what do you mean?
16262;the stack slice is not just a pointer it also contains the length and capacity right
16263;okay so what
16264;by the rules of the language a zero initialized slice automatically has 0 length and capacity
16265;but a zero initialized map is a nil pointer and it doesn't allocate the underlying map structure
16266;okay what is the capacity of a map initialized by `map[int]int{}`
16267;0 but it's stored in the heap and not on the stack
16268;its capacity is 0?
16269;i don't actually know but i don't think it's relevant
16270;well you are saying that it's important for the language to require the programmer to write that line before assigning values to it
16271;but you don't even know how much memory it allocates when you do that
16272;but what I'm saying is that if you zero initialize a map on the stack it should not perform heap allocation
16273;yeah it shouldn't
16274;a slice doesn't do that
16275;I am saying it should initialize it when you assign a value
16276;nothing else does that either
16277;append does!
16278;it doesn't do it during zero initialization
16279;it only allocates when you call append
16280;that's fine... the analogue of append is map assignment
16281;so the map would be initialized when you assign
16282;well consider this example
16283;"```govar foo map[string]string // = nil implicitbar := foofoo[""test""] = test // under your assumption initializes foobar[""test""] // = ??```"
16284;foo is initialized bar is not
16285;What
16286;isn't that confusing? vs if you had initialized foo initially then foo and bar are actually aliased to each other
16287;well this is how it works with slices no?
16288;"```govar foo map[string]string = map[string]string{}bar := foofoo[""test""] = test""bar[""test""] // = test""```"
16289;I mean how is this different than how pointers work in general?
16290;with slices the zero slice is equivalent to the empty slice
16291;well most pointers don't magically initialize themselves if they are nil and you call a method on them right
16292;"```var foo Mapfoo.Set(""test test"") // foo is initialized now?```"
16293;don't get me wrong i think the implicit zero value thing is wacky but within those constraints this seems the least wacky
16294;I am not sure if it is the least wacky
16295;it is a pretty common experience that you get a nil map assignment panic
16296;and you just forgot to initialize the variable
16297;it is but i think implicitly initializing the variable goes against the semantics of pointers in the language in general
16298;@Zluther81 that seems ugly but I do remember exceptionally do that once or twice rare tho
16299;@Zluther81 happy path break short
16300;yeah but maps are special in so many ways already
16301;@stdio does it seem ugly? I kinda did it because it seemed uglier the other way
16302;i mean i guess just doing it more verbosly would be nicer
16303;they are but it would involve breaking rules of the language
16304;slices if they weren't generic don't break the rules of the language
16305;@Zluther81 in that specific case I think it would be better write 400 and return more code outside of the if supposedly
16306;> it is a pretty common experience that you get a nil map assignment panicLmao just initialize the map :aylmao:
16307;maps if they automatically initialized unfortunately do
16308;@stdio yeah you're right
16309;"```func handleContentPost(w http.ResponseWriter r http.Request) { var c Clip.ClipEntry var e error if c e = decodeJsonRContent(r); e != nil { w.WriteHeader(400) return } c.Save() w.WriteHeader(200)}```"
16310;Def nicer. Thanks!
16311;maybe they could make nil maps not exist and force heap allocations every time you zero initialize a map but that also seems against the spirit of things
16312;ah for those I usually put the if outside
16313;it's not that often unless it's abstracted
16314;I got my first nil map assignment in months because I abstracted it under a type and forgetting lol
16315;Or initialize on first insert
16316;:fellas:
16317;yea that works too
16318;```gofunc handleContentPost(w http.ResponseWriter r http.Request) { c err := decodeJsonRContent(r) if err != nil { w.WriteHeader(400) return } c.Save() w.WriteHeader(200)}```
16319;kinda ugly tho tbh
16320;just use a ctor
16321;i think it's definitely error prone to have to remember to initialize a map but the designers painted themselves into this corner
16322;@_diamondburned_ ctor?
16323;constructor
16324;a lot of Go's designs are errorprone tbh
16325;but it was never meant to be a language that covers all edge cases
16326;80/20 rule
16327;:pensivecow:
16328;how would you use a construtor in this instance?
16329;make it return a new struct instance with initialized maps
16330;or just a valid state in general (which is usually the above)
16331;ah okay gotcha
16332;@stdio yeah duh! sorry thats how i normally would write that. just tired
16333;What is the 80/20 rule?
16334;80% output are from 20% input
16335;yeah i found something reading up on it now. thanks!
16336;you can cover 80% of cases with 20% of the code
16337;simplicity is complicated
16338;I honestly like Gos error handling
16339;It's a little ugly but it seems like an easy pattern and it kinda forces you to think about them
16340;I am still new in the industry but I think about errors way differently after using go
16341;go makes flow control for all scenarios behave teh same way
16342;it's really brilliant
16343;instead of having regular code and spooky action at a distance depending on what may or may not have gone wrong at any given moment
16344;lol
16345;Interesting
16346;go newbie here is there any go package that enables go channels to communicate across the network.
16347;if there is I have some doubts that ppl use it that muchü§î
16348;What are you trying to do that you need something like that
16349;Probably just use a standard communication protocol
16350;Like websocket
16351;i'm trying to write a simple distributed database
16352;I'm aware of protobuf RPC
16353;coming from Scala which has actor model like Akka  I wanted to know if there is anything along those ..
16354;@Str≈ìm you have another actor model fan
16355;I found a small wrapper around these the other day
16356;https://github.com/nanomsg/mangos
16357;this exposes socket kind of abstraction close to my needs
16358;@_diamondburned_ mangos makes me to remember zeroMQ
16359;"```gov.PatternStartTime = time.Now().In(time.LoadLocation(""America/New_York"")).Format(""3:04:05PM"")```"
16360;why would that not work
16361;"```gotimeZone _ := time.LoadLocation(""America/New_York"") currentTime := time.Now().In(timeZone) newTime := currentTime.Format(""3:04:05PM"")```"
16362;but this does
16363;well look at the differences
16364;what does time.LoadLocation return
16365;2 values
16366;what does time.Now().In expect
16367;1 value
16368;OH
16369;damn
16370;so i would have to separate it int o two then
16371;cause of the
16372;returns
16373;unsupringly the language works exactly as you would expect üòõ
16374;whyy
16375;why what
16376;that it died?
16377;is it possible to keep header order on http requests ?
16378;man every couple days
16379;not with the standard library no
16380;this is so sad
16381;wym not with the standard library
16382;what do i use then
16383;a third aprty package that supports this feature
16384;^
16385;a manual HTTP request formatter
16386;or at least a lowerlevel one
16387;got any recommendations ?
16388;i mean you must have a blue rank for a reason
16389;:thonk2:
16390;I don't and I do respectively
16391;I've never needed to do this so I don't have any personal familiarity with the problem space
16392;:sadclown:
16393;ping some buddies which might have a recommendation
16394;Or you can do some googling
16395;i tried
16396;yeah
16397;the real question if why do you need them ordered
16398;oy vey
16399;every time
16400;because sometimes you have to interoperate with software that isn't compliant
16401;> the real question if why do you need them orderedthe real answer is the server checks order
16402;exactly
16403;you can't assume all software is wellbehaved
16404;@deezy i would say like 60% of the time its for a nongood reason
16405;BUT
16406;so its a valid question
16407;that doesn't mean the standard library should violate specs
16408;so i just answered
16409;a valid answer
16410;I do but I lost the link
16411;so I don't
16412;:bigcry:
16413;oh I remember now
16414;https://canary.discord.com/channels/118456055842734083/118456055842734083/742120555477467146
16415;:pepehype:
16416;the package is archived :sussss:
16417;None
16418;try it and see
16419;can i use utls with that ?
16420;akamai?
16421;why don't you talk to the guy
16422;whos the guy
16423;@Flexagon
16424;he's presumably writing the same sneakerbot as you
16425;^
16426;:dogekek:
16427;@Deleted User wassup
16428;hi
16429;the same sneakerbot
16430;lol i wasnt writing a sneaker bot lmao
16431;neither was i
16432;+ i have no idea who tf you are except that we are in same discords
16433;i have a hate boner for cloudflare and akamai
16434;tbf if you hang around here long enough its a very good guess
16435;true
16436;cloudflare === noobs
16437;i know a lot of people use golang to make sneaker bots
16438;cuz they dont know how to use js xd
16439;akamai === bigger noobs
16440;shouldn't js be easier
16441;js uses openssl
16442;you don't even need to fake chrome fingerprinting
16443;you can just like
16444;use chrome
16445;hahahaha
16446;Do I need to do this for version 1.15++ ?
16447;@_diamondburned_ you dont get low level access to clientHello the first http2 packets being sent amongst other things
16448;yea good luck opening 30 chrome browsers
16449;30?
16450;I'm p sure half this server runs 30 Electron apps all at once
16451;so why not lol
16452;if you want to save RAM and resources you would have to only use the networking library from chrome
16453;:dogekek:
16454;yea
16455;@_diamondburned_ i will switch back to js once they update openssl
16456;sad
16457;@Deleted User I saw your work with the myTLS
16458;It's good
16459;meanwhile i except full cooperation from you and this servers most delegated members
16460;how about no
16461;:kek:
16462;> It's goodappreciate that
16463;@deezy haha ik im funny
16464;sure
16465;You don't provide proxy support assuming that's the fault of utls?
16466;yes + i didnt wanna go too deep
16467;Ah
16468;mytls is gonna switch to pure nodejs anyways soon
16469;could you just hijack the http request and send the headers in the order you want?
16470;gonna be real blunt with you: if you're going to bring a shitty attitude in here expect a shitty attitude from us
16471;@Madxmike it's more complicated than that
16472;@weenie smh chill it was a joke
16473;i figured
16474;cool. don't do it again
16475;now im scared
16476;@Madxmike we need http2 chrome tls fingerprint proxy support header order
16477;ikr it sucks
16478;but what can you do... these companies have billions of funding
16479;what are you actually doing
16480;my guess would have been sneaker bot too
16481;but obviously thats not correct
16482;well its related to that
16483;but that is not my goal
16484;my goal is to make akamai look like a fool
16485;Pretty much to enable people to make sneaker bots
16486;When I started coding cloudscraper was available but now it's shut down and deprecated
16487;Gotta provide for the youngins these days
16488;yea have to help the skids
16489;@Flexagon cloudflare v2 is easy
16490;took me like 2 days
16491;probably just end up writing a http client for your specialized case tbh
16492;i guessed that
16493;the issue is im not the strongest with golang
16494;?go learn
16495;Gopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Go by Example <https://gobyexample.com/>  SkippyA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  Skippy
16496;How should I organize golang 1.15?
16497;@BryanC12 what do you mean
16498;same as post 1.13
16499;i didnt undertstand your last post either
16500;bin/ src/ pkg/
16501;manually sending http over tcp isn't too hard tbh especially if your use case is fairly narrow
16502;> same as post 1.13@_diamondburned_ Okay
16503;i can probably read the docs and help but i've dealt with enough webshit for today
16504;> manually sending http over tcp isn't too hard tbh especially if your use case is fairly narrowhmmm
16505;hell you could probably work the gorilla package
16506;and shape it into what you need
16507;how hard would it be to edit the package into supporting proxies with utls http2 and header orders
16508;yes
16509;the gorilla package is pretty low level
16510;depends on how much you know about all those things
16511;and low level small libraries are good
16512;so better off just finding someone to do it for me for money
16513;have fun
16514;i really feel this conversation has happened on here like 15 times the past few months
16515;thats interesting
16516;mike: can confirm
16517;"How do I do X to bypass Y security feature""""You need to do Z but its going to be a bunch of work""""I dont know how to do Z so ill just pay someone"
16518;literally everytime
16519;:dogekek:
16520;i didnt ask that
16521;close enough
16522;well have to ask the professionals
16523;like i said i expect the most delegated and respectable members here to be ready for my questions
16524;then im going to charge $10 a question
16525;Sir
16526;do you see my discord discrim ?
16527;how 2 mmaek.sneakerbot pl0x
16528;im literally the discord admin
16529;cool
16530;this is not a joke
16531;ill send you my bitcoin address to pay me later lmao
16532;sure
16533;please golangd idcord my wife and childrenn eed these sneakers
16534;wow you are actually funny
16535;@Madxmike want to start coding rn
16536;no this is for asking questions
16537;:catshock:
16538;i have no interest in the actual work
16539;i don't have wife and children (probably never will) but i have horrible finance managing skills
16540;so can i hab bux
16541;i feel betrayed
16542;horrible finance managing skills sounds exactly like a person who spends their entire paycheck on sneakers
16543;investments
16544;imagine buying sneakers
16545;lmao
16546;> i feel betrayedread the statement again bucko> then im going to charge $10 a question
16547;never said i would do the work
16548;just answer questions
16549;well i expect you to respect my wishes
16550;tfw> polite and professional discussion of go specific topics
16551;you are forgetting im the discord admin
16552;let's not look down upon this poor user who doesn't have the best reading comprehension skills
16553;anywayd good luck with your adventure
16554;i appreciate the wishes
16555;you seem nice
16556;that weenie guy tho
16557;im not
16558;he scares me
16559;good
16560;uwu
16561;like im literally shaking and crying
16562;well maybe he isnt scary but he forsure does know how to make someone cringe
16563;The furry scared you????
16564;Y'all imagine this
16565;Celebrity boxing match
16566;wait a second
16567;he is a fury?
16568;But instead of celebrities
16569;now im not only scared im also disgusted
16570;It's admins from coding discords beating the shit out of people that make sneaker bots
16571;Chill it was a joke
16572;He has furry pfp
16573;mine is also a joke
16574;@Madxmike everytime i get on amazon my wallet dies a little
16575;and i already get nothing from what i do lol
16576;just make a sneaker bot
16577;make thousands
16578;ikr
16579;literally the easiest shit ever
16580;open ide
16581;@_diamondburned_ why shop at amazon when you can forage for items
16582;a couple of post requests to nike.com
16583;boom you are rich
16584;failed at step 1 no ide
16585;:vim:
16586;@Flexagon idek what forage means
16587;its like hunter gathering
16588;well tonight has been fun (if we remove the furry part)
16589;6 am almost have to sleep tomorrow is a big day (shopping for sneakers)
16590;good night @Flexagon
16591;gn @Deleted User
16592;whats dropping tomorrow?
16593;i thought it was just supreme instore
16594;that was a joke
16595;ah
16596;for the haters
16597;for the haters
16598;yes
16599;haters aka furries
16600;yikes
16601;What libraries are there to interact with the github api?
16602;i just need atleast basic read
16603;https://github.com/google/gogithub
16604;ease of use 110 how would you rate it?
16605;just read the docs and see
16606;this looks... extremely complicated
16607;why does google have interests in maintaining gogithub lib
16608;i mean
16609;github is a complicated service
16610;there's a lot going on
16611;None
16612;> ease of use 110 how would you rate it?for basic things? like a 8
16613;sure YOU only care about github repos or whatever specific thing you want
16614;wow...
16615;but it'd be a bad library if they didn't make it feature complete
16616;yeah
16617;I am looking at repo status
16618;Basically just an easier way to interface go with the github api...
16619;Is that not exactly what you wanted
16620;lol
16621;its pretty much the lib to do that
16622;easier than writing the raw http stuff yourself
16623;but you can't get around the fact that github has a lot of stuff
16624;welp. trying it out before i shit on it
16625;that's the spirit
16626;you've been writing go long enough to at least get started
16627;yep
16628;still have no fucking clue what im doing with context but fuckit
16629;oaky where the hell are the docs
16630;nvm
16631;and testing then got rate limit crap
16632;welp i need to attempt to sleep
16633;os.IsExist(err) is false when err is nil ü§î
16634;```IsExist returns a boolean indicating whether the error is known to report that a file or directory already exists. It is satisfied by ErrExist as well as some syscall errors.```
16635;if the error is nil then it isn't an error that would indicate the file/directory already exists
16636;yes that's a gotcha for me
16637;it is not abundantly easy to parse that one
16638;but as long as you keep in mind that these Is functions are saying is this error a <scenario> error? it makes sense
16639;yep those are for errors only
16640;@Deleted User Fix your attitude. Even if it is meant as a joke this isn't the place for that. People are here to help others. They aren't here to get berated.
16641;Where can i get this gopher toy it looks so cute?
16642;https://live.staticflickr.com/8331/8080852738_14db47662a_z.jpg
16643;I think the Go team sells some official merchs
16644;idk if this hardplastic gopher is there tho
16645;I can only found some handmade plushes which can be customize
16646;i need this
16647;yeah
16648;If there a dim led inside will be more better
16649;how would i write a method that returns true if the slice contains an item?
16650;```golangfunc (p []string) Contains(m string) bool { for _ r := range p { if m == r { return true } } return false}```
16651;this doesn't work
16652;@BryanC12 mod it
16653;why doesn't that work
16654;oh i need to create a type?
16655;yeah
16656;damn ok
16657;you can't have methods on primitives
16658;ok ok
16659;but how do i name this type?
16660;can it be anything?
16661;`type foo []string` should work
16662;then `func (p foo) Contains...`
16663;yep got it thanks
16664;but i get an error `boards.Contains undefined (type []string has no field or method Contains)`
16665;"``` for _ b := range toDelete { if boards.Contains(b) { fmt.Println(""Deleting b) } }```"
16666;I was playing https://play.golang.org/p/U0bYnj1Kv9G
16667;boards is a return of a function which is []string
16668;i see
16669;do a type conversion
16670;yep
16671;sorry this is my first time creating types of my own tbh
16672;you should just not force methods on go primitives
16673;and creating methods
16674;`myType(slice)` worked for me
16675;can't believe it was that easy tbh i expected to have less hair
16676;guys one question i've been struggling with
16677;how would you remove an item from a []struct?
16678;check out SliceTricks
16679;?go slices
16680;Slice usage and internals <https://blog.golang.org/goslicesusageandinternals>  Sgt_Tailor
16681;fuck not this one
16682;?go slice
16683;slice tricks <https://github.com/golang/go/wiki/SliceTricks>  stdioSlice usage and internals <https://blog.golang.org/goslicesusageandinternals>  Sgt_Tailor
16684;GOTTEM
16685;i used something before but it would leave a trail so to say
16686;FIRST TRY YEET
16687;anyway yeah that
16688;okay thanks üòÜ
16689;yeah np
16690;there's like 34 ways to delete
16691;lol
16692;yeah each with slightly different use cases
16693;okay i'll check it out
16694;yep i see
16695;i assume without preserving order would be faster
16696;and more memory efficient?
16697;what is this `append(a[:0:0] a...)`...
16698;in copy section
16699;:thinkingo:
16700;it looks like `append(a[:0] a...)` works already why the second `:0`? or just typo
16701;I think it's a typo hmm sending PR?!
16702;less copying not necessarily less memory efficient
16703;> b = append(a[:0:0] a...)> > This solution guarantees that b is nil if a is nil and b is not nil if a is no nil. It makes use of the fact that a slice derived from a nil slice is still a nil slice. And the threeindex subslice form ensures that the result slice will not share any elements with the source slice.
16704;huh
16705;I don't see why `append(a[:0] a...)` would share elements tho
16706;in capacity presumably
16707;no idea lolmao
16708;oh wait it does share
16709;iirc I saw this in the image library where slicing like that is way faster than not
16710;forgot where
16711;https://play.golang.org/p/tdxEzlTEIWa
16712;I think it's in the palette code
16713;I'm trying to create a C shared library using buildmode=cshared but it does not allow export Go types (type Foo int). Any way to solve it?The most obvious is to use int instead of Foo and then to implement Foo in the foreign language but is there any easier? since I've a lot Go types üòû
16714;Why not define them on C side and use C signature on Go side?There's no workout
16715;It isnt't to be used with a program in C language else with Dart
16716;If there is not a better way I'll build a generator for the Dart types from Go ones
16717;"hi guys i\'m reading the golang blog currently and i would appreciate some clarity on a small point:> For instance although one can write> > `[]int(""hi"")`> as a conversion one must parenthesize the type if it starts with a :> > `(int)(nil)````gofmt.Println([]int(""hi""))```doesn\'t actually work and is not not supposed to work right?> cannot convert hi (type string) to type []int"
16718;correct
16719;i think its just for illustrative purposes
16720;ok so a followup question that just occurred to me
16721;"Try []byte; I think that the example is incorrect"
16722;"```go(int)(nil)([]int)(""hi"")```would that mean it\'s good practice to always parenthesize when casting?"
16723;no
16724;only do so when required
16725;its necessary for pointer types because i assume it clears up ambiguitiy where it might be a dereference rather than a cast to pointer
16726;`int(nil)`int might be a function that takes 1 param so this could be a dereference of the return type of that function
16727;in what situation could `int` be a function?
16728;pretty sure you can just do `func int()`
16729;would that not shadow the type?
16730;it would
16731;is the point
16732;so it's possible but a bad idea
16733;ok so what about
16734;`maybeFunctionOrType(nil)`
16735;will vlang ever be stable
16736;#testing1 for discussion of bad stuff
16737;that's a good example
16738;it's clearer with a custom type to me at least
16739;https://play.golang.org/p/0wvpDQGfLCpis `foo` in this example considered a function pointer?
16740;Kinda that's closure
16741;are there any rules of when i should use `var` vs `:=`?
16742;var for global or for declare but not initialize
16743;:= for declare+initialize
16744;what does initializing do?
16745;initializes it to a value?
16746;assigns a value?
16747;oh of course
16748;so var with `=` is initializing?
16749;in which case it's just an alternative to `:=`?
16750;var with = is declare and initialize
16751;but yes
16752;and by var for global you mean outside of `main()`?
16753;yes
16754;outside of any function
16755;i understand thank you üôÇ
16756;how would i do a proper function pointer?
16757;i read an article last night with zero examples in it
16758;what do you mean by proper function pointer
16759;that's probably part of the question and i'm wondering if this is an XY issue
16760;i do not know
16761;what level of abstraction would you put go in?
16762;c/cpp level or closer to java/c#
16763;i give go it's own class of amazingness üòè
16764;it does have gc after all
16765;but i'd say somewhere in between or closer to java/c#
16766;"does anyone know the go equivenlent to:```cGLint posAttrib = glGetAttribLocation(shaderProgram position"");glEnableVertexAttribArray(posAttrib);glVertexAttribPointer(posAttrib 2 GL_FLOAT GL_FALSE, 5sizeof(float) 0);GLint colAttrib = glGetAttribLocation(shaderProgram color"");glEnableVertexAttribArray(colAttrib);glVertexAttribPointer(colAttrib 3 GL_FLOAT GL_FALSE, 5sizeof(float) (void)(2sizeof(float)));```i\'ve tried using gl.Ptr but I honestly don\'t know```govar posAttrib uint32 = uint32(gl.GetAttribLocation(shaderProgram gl.Str(""position\\x00"")))gl.EnableVertexAttribArray(posAttrib)gl.VertexAttribPointer(posAttrib 2 gl.FLOAT false 5 nil)var colAttrib uint32 = uint32(gl.GetAttribLocation(shaderProgram gl.Str(""color\\x00"")))gl.EnableVertexAttribArray(colAttrib)gl.VertexAttribPointer(colAttrib 3 gl.FLOAT false 5 gl.Ptr(2))```the gl ptr gives me an error because it can\'t take int as an argument```panic: unsupported type int; must be a slice or pointer to a singular scalar value or the first element of an array or slice```this is what the function takes in go```gofunc VertexAttribPointer(index uint32 size int32 xtype uint32 normalized bool stride int32 pointer unsafe.Pointer){}```"
16767;i asked this question yesterday but nobody responded so i thought i'd ask again
16768;https://play.golang.org/p/hTnE321BbE> cannot take the address of testwhat am i doing wrong or misunderstanding here?
16769;you dont want or need to take the address of a function
16770;it already is a pointer of sorts
16771;ok
16772;theoretically what would the `var` syntax look like for `foo := &test`?`var foo func = &test` something like this?
16773;@beepsandboops u can take address of closure but not function
16774;Function is being converted into closure by assigning
16775;So u can:```Var test = func () {}```
16776;@Laevus Dexter https://play.golang.org/p/mXQ02TSYaPilike this?
16777;nvm what im looking for is called gl.PtrOffset
16778;Like this what
16779;> @beepsandboops u can take address of closure but not function
16780;Ye
16781;what does `bar` do inside the `Println`? it's causing an error
16782;```gofmt.Println(bar) // OKfmt.Println(bar) // Error  Println arg bar is a func value not called```
16783;It's causing a go vet issue not an error
16784;that's a pointer derference
16785;or an attempt thereof
16786;It works fine go vet complains because it doesn't like you feeding Println() function values
16787;`(unsafe.Pointer)(unsafe.Pointer(bar))`
16788;@vlads i don't know what that means
16789;what's vet?
16790;> Vet examines Go source code and reports suspicious constructs
16791;thank you üôÇ
16792;In this case it reports function arguments for Println because it has the same effect as passing the pointer  it prints the address  so you should just do that if that's what you want. On the other hand you might me trying to call the function `(bar)()` and you forgot the parentheses so go vet warns you
16793;But the code works fine either way
16794;```gofunc test(a b int) int { return a + b + 10}func main() { foo := test bar := &foo fmt.Println(bar)}```is it possible to rewrite `foo` to say i am going to be a pointer to `test` without initializing? same question for `bar` and `&foo`
16795;> In this case it reports function arguments for Println because it has the same effect as passing the pointer  it prints the address  so you should just do that if that's what you want.i am having a problem visualising what this means
16796;Pointer of test is `(unsafe.Pointer)(unsafe.Pointer(bar))`
16797;Oh nevermind that's actually wrong
16798;`bar` is the same as getting the address of `test` i think?
16799;Bar = &foobar = foo
16800;Foo is a closure a complex data a struct
16801;Pointer counter of test can be obtained only unsafely cause u have no access to internal type
16802;Hmm what does Println print for func types. Doesn't look like an address :thinkingo:
16803;Oh well time to dig
16804;Oh so it is a pointer
16805;And it's so short because text sits at the bottom makes sense
16806;So I'm guessing you can also do `bar := reflect.ValueOf(foo).Pointer()` to obtain a uintptr to the address of the function
16807;@vlads that's a pointer of the closure
16808;Need to go one lvl deeper
16809;I see
16810;Seems like it yeah
16811;Though I wonder why the closure pointer is a low value and the function pointer is a high one
16812;is there an easy method or helper function that will tell you the underlying type of a pointer's value?
16813;eh?
16814;the compiler knows what type the pointer is for
16815;MyType is a pointer to MyType
16816;"```goi := 10j := &i```say i come across `j` and want to quickly see if i can do `+= 10` vs `+= foo""`"
16817;the compiler knows if you can or cannot
16818;you already know j is a int
16819;if you've got it in an empty interface somewhere a) you shouldn't and b) type assertions
16820;"```gofmt.Printf(""%T j)```this is what i was looking for"
16821;ah string rep of the type
16822;why do you need that
16823;do i need a why?
16824;maybe
16825;i completely forgot about type assertions. is there a good link for me to go through that you would recommend?
16826;```goi := 10j := &ij = 2var x interface{} = jt ok := x.(int)fmt.Println(t ok)```i'm going to guess this is bad practice if so i'd be grateful if someone would explain why
16827;i think that will return false
16828;because j isnt int
16829;its int
16830;you are right i forgot the dereference
16831;or assert to a int
16832;```got ok := x.(int)```like that?
16833;that's a nice tip
16834;yeah because j is a int
16835;What could I consider a stable version of go?
16836;the latest release
16837;https://golang.org/doc/devel/release.html
16838;maybe somebody had the same problem with gorm how can I uses things like force index etc?http://v2.gorm.io/docs/hints.htmlThe docs has them under hints but it\'s not possible to access clauses on the db object.
16839;are there any naming conventions for interfaces?
16840;end in `er`
16841;Stringer etc
16842;but thats not a hard rule
16843;```type Foo struct { customValue lastValue rollingValue int}```is it possible to have default values in the struct?
16844;my brain is still thinking a bit too OOP
16845;No
16846;They all have the zero value of int which is 0
16847;ok
16848;```gofoo = Foo{10 20 30}foo = Foo{customValue:10}foo = Foo{customValue:10 lastValue:20 rollingValue:30}```are there any conventions for this?
16849;"rely on zero value unless otherwise specified""?"
16850;edited to clarify a bit
16851;Not sure what you mean. When initializing a struct you can choose what fields to set
16852;unspecified fields will get the zero value of that type
16853;i am wondering if it's best to specify the name or not i guess
16854;so in the second foo you don't specify two fields they will end up wtih the value `0`
16855;There isn't a convention as far as I know. You always have to use named ones if you want to provide them out of order or skip a field
16856;yeah that makes sense
16857;i'm thinking along the lines similar to python's kwargs
16858;it becomes unclear if you have a lot of unnamed fields
16859;Personally I don't use the named variant for simple structs. For others I use named ones
16860;do you happen to have an example of simple vs nonsimple variant?
16861;http.Client
16862;<https://golang.org/pkg/net/http/#Client>
16863;complex struct. You only need to set the fields you want to use a different implementation for
16864;yeah this is my line of thinking too thanks üôÇ
16865;simple struct would be a vector```type Location struct { X Y Z int}```
16866;possibly silly question: there is no way to enforce initialization using named fields?
16867;someone could use `http.Client` without field names for example
16868;like for ur workplace or smth?
16869;i guess some type of linter could warn you
16870;code reviews and a hammer
16871;haha
16872;how would i print out a verbose struct?
16873;%#v
16874;check the fmt godoc for some more info as to why
16875;will do!
16876;thank you üôÇ
16877;"```govolPercent := fmt.Sprintf(""%v%% math.Round((b.currentVolume/b.averageStockVolume)100))```"
16878;if i wanted to print a %v with a folowing percent sign
16879;can i just do %v%
16880;or i was told %v%%
16881;"`fmt.Printf(""%d %% 50) // prints 50 %""`"
16882;You need to use %% if you want to print a literal %
16883;oh
16884;wow
16885;so straightforward
16886;LOL
16887;hi guys I was wondering if you had good resources on how to write a well engineered Client for my integration app
16888;for example something like that https://github.com/andyhaskell/teatemperature
16889;could someone help me figure out what i'm doing wrong?i would like to have a function (closure or not i don't care) that accepts the interface in order to modify the struct valueshttps://play.golang.org/p/tf3ALjS3Mq
16890;you need a pointer to Foo
16891;Foo implements Tester not Foo
16892;also forgot a comma in test
16893;No that‚Äôs not what‚Äôs going on
16894;@Karitham that is
16895;https://play.golang.org/p/4kdjMOxEU6w
16896;```./prog.go:26:8: cannot use foo (type Foo) as type Tester in argument to Adjust: Foo does not implement Tester (test method has pointer receiver)```
16897;it is also whats going on @Carson
16898;there are both problem
16899;You have a parameter named `int` of type `int` :p
16900;Well
16901;:p
16902;yea it catches me out all the time too lo
16903;i forget which works and which doesnt
16904;Not sure what you mean
16905;i'll dig around for it it'll come up
16906;it was something to do with methods on an interface
16907;is there an implicit return type in golang?
16908;nope they're all explicit
16909;or interfaces
16910;so if a func has no return we simple omit that part from the signature?
16911;<https://golang.org/doc/faq#different_method_sets>
16912;that looks like the right thing @zephyrtronium !
16913;i'll have to catch up with it a bit later i have to run some errands
16914;thank you guys üôÇ
16915;"a thought on generics: similar to the `type T` arguments could we have `const S` arguments like so?```gofunc Foo[const S string]() string { return S}var Bar func() string = Foo[""baz""]```"
16916;https://play.golang.org/p/g01ygOkBNv8
16917;in principle yes and c++ does exactly that
16918;the go team is not doing that because c++ has done an excellent job showing why it's a bad idea üôÇ
16919;I also don't see the point
16920;why can't you use a closure
16921;@aosync type parameter syntax for the generics proposal
16922;it's for type parameters
16923;Have you read the proposal?
16924;the github issues are where the main proposals live
16925;https://blog.golang.org/genericsnextstep
16926;^
16927;and then those link out to blog posts or other docs
16928;the original syntax for type parameters used them too
16929;is there any convention as to what casing you use for template names?
16930;but then you'd have sigs like `func () () name() () {`
16931;super confusing
16932;should probably remove it from all the other things that use it then
16933;like arrays maps slices
16934;if it's not Go enough for you lmao
16935;Yes this syntax addition is definitely going to completely ruin what Go feels like
16936;lolmao
16937;@Doad idc about the fact that you are attempting to do whatever you are attempting to do on me
16938;> the go team is not doing that because c++ has done an excellent job showing why it's a bad idea üôÇ@zephyrtronium I'm not a C++ developer why is it a bad idea?
16939;in c++'s case it makes templates turingcomplete because any constant expression including ternary operators may be a valid input
16940;I only program in templates
16941;The preprocessor is my runtime
16942;the situation would be significantly less bad in go but it'd still slow down the compiler for not much benefit
16943;huh C++ templates aren't Turingcomplete without constant expressions?
16944;with just types no
16945;there aren't even operations you can perform on types
16946;I see interesting thanks üôÇ
16947;few weeks back
16948;they changed it because all the parantheses got confusing
16949;i think c++ templates are turing complete even without constant expressions
16950;okay so i have the latest release of the repo i want to use... But i have no clue how to parse the output
16951;output of what
16952;"https://cdn.merith.tk/Workspace/githubgotests/output.txt```gopackage mainimport ( context"" fmt"" log"" github.com/google/gogithub/github"")func main() { client := github.NewClient(nil) ctx := context.Background() repos resp err := client.Repositories.GetLatestRelease(ctx nathanchance WSL2LinuxKernel"") if err != nil { log.Fatal(err) } fmt.Println(repos) fmt.Println(resp)}```"
16953;it doesnt return in a format i know how to parse
16954;I could seperate the string into an array sepeated by the `,`
16955;and then find the release URL
16956;https://pkg.go.dev/github.com/google/gogithub/v32/github?tab=doc#RepositoriesService.GetLatestRelease
16957;It links you to the API doc
16958;but surely there is a better way
16959;https://pkg.go.dev/github.com/google/gogithub/v32/github?tab=doc#RepositoryRelease
16960;which shows the exact JSON structure
16961;Better way than what?
16962;than parsing the string into an array
16963;what string?
16964;https://developer.github.com/v3/repos/releases/#getthelatestrelease
16965;This is what that will return
16966;The probelm is. if you look at the output.txt i linked
16967;it doesnt
16968;"```github.RepositoryRelease{ID:29188654 TagName:""wsl2cblkernelnext20200731v47 TargetCommitish:""next Name:""Clang Built WSL2 Kernel v47 Body:"" Built with clang 12.0.0 at https://github.com/llvm/llvmproject/commit/605fd4d77ce19c4d8c331732b490ef436ab093c2```"
16969;that's what you want
16970;`resp` is literally an http response
16971;you probably want to ignore that completely
16972;i know that i was using that to make sure i dont go over the ratelimit
16973;does anyone know if the compiler knows to put slices (i.e. Len+cap+arr ptr) on the stack when it can be? I'd like to get rid of my reluctance to reslice if I can
16974;Right
16975;so here's the docs for the resp value returned by that function https://pkg.go.dev/github.com/google/gogithub/v32/github?tab=doc#Response
16976;@Ortho if it can it will
16977;ok cool
16978;See any members that may be useful for working with rate limiting?
16979;expanding a slice will pretty much require it to be on the heap though
16980;without resp this is exactly what it returns
16981;welll cant past
16982;https://cdn.merith.tk/Workspace/githubgotests/output.txt
16983;so i appended
16984;so what's the problem? you have the rate limiter now
16985;it doesnt return straigh json
16986;No
16987;nor in a format i know how to parse
16988;Because it's returning structs
16989;it's go
16990;like they're parsing the JSON for you
16991;that's the whole point of the wrapper library
16992;Why the frack... oh
16993;so you don't have to do all the raw http and json shit
16994;one sec gotta test something
16995;Imagine if the docs showed that that would be helpful
16996;lolmao
16997;Look im not used to the way these docs structure themselves okay?
16998;That's unfortunate
16999;but this isn't even a documentation problem
17000;You've been around long enough to know how to read a function signature
17001;this is a fundamental misunderstanding/bad assumption about how go works technically and how libariries are designed in general
17002;welp turns out i have to parse some json manually...
17003;Oh well i know what i am looking for atleast
17004;cant even do that
17005;"```gofunc main() { client := github.NewClient(nil) ctx := context.Background() repos _ err := client.Repositories.GetLatestRelease(ctx nathanchance WSL2LinuxKernel"") if err != nil { log.Fatal(err) } fmt.Println(repos.Assets)}```basically what i am doing is i am writing an updaterIt will compare the latest release of `bzImage` with a local file and if they are the same just say the person is on the latest release. if not replace local file with the new one"
17006;Just compare version tags?
17007;what are some choices that you run a program at a certain time of day automatically?
17008;I only know cron not sure what are other alternatives
17009;there's probably lots of ad hoc solutions
17010;systemd probably has a time base scheduler
17011;redis jobs queues
17012;an internal scheduler
17013;etc
17014;cant do that for an offline download of the release
17015;This seems to be the most popular go specific solution https://github.com/jasonlvhit/gocron
17016;At work we use Redis
17017;@Merith get the tarball compare hashes
17018;if the release file is litterally `bzImage`
17019;the tarball is only for the source code
17020;https://www.freedesktop.org/software/systemd/man/systemd.timer.html
17021;god damn systemd
17022;@Merith then you have to build it
17023;Systemd should suffice for a looot of use cases
17024;OnCalendar=
17025;There isn't really another way to compare source and a build without version tags
17026;I was gonna download the release check hashes if new file != old file replace
17027;Is that not what I said before? Well yeah pretty much what you gotta do
17028;nah you said download the targz of the source code
17029;which is well over 100mb
17030;as it is a linux KERNEL
17031;maybe it has nothing to do with it
17032;but for interacting with github https://github.com/shurcooL/githubv4 is kinda cool
17033;What's the difference between these two RSA keys?
17034;screw it... im just gonna go the json route using the api directly as i know how to do that
17035;Writing down generated key using Crypto++ I get top one and by sending from Go or Nodejs Crypto I always get the bottom one
17036;@Carson sorry for tag but you're the only one I know who got experience with crypto
17037;I'm not quite sure what you're asking they seem to just be different keys
17038;None
17039;The top seems to have an exponent of 17 the bottom 65537
17040;Yeah they're different but they seem to be in different format
17041;So I wonder what I'm doing wrong and why I'm not getting one like the top one?
17042;```go key err := rsa.GenerateKey(rand.Reader 2048) if err != nil { fmt.Println( err.Error()) } keybytes := x509.MarshalPKCS1PublicKey(&key.PublicKey) // send header with length c.SendBytes(int_to_bytearray(len(keybytes))) c.SendBytes(keybytes)```
17043;what are you trying to accomplish?
17044;sending over public key to C++ application and importing it into Crypto++ to encrypt
17045;you wrote the C++ application?
17046;yes sir
17047;going over some old code to reuse
17048;https://github.com/MerithTK/goupdater/blob/master/main.go#L24
17049;uhm what
17050;why am i json decoding an `ERROR`
17051;Oh wait
17052;nvm
17053;> ifErr
17054;you just gonna walk in here covering my valid issues with spam smh
17055;what is `c` in your code?
17056;socket
17057;I permanently regret writing code examples with the ifErr/errCheck/die functions
17058;Nah i am doing it to make exit codes actually useful
17059;I'm simply sending the public key over tcp @emiliano
17060;"```cpp int headersize; size_t reply_length = boost::asio::read( s, boost::asio::buffer( &headersize sizeof( headersize ) ) ); printf( Got header with size %i\ headersize ); std::vector<char> RSA_PUB( headersize ); size_t read_size = boost::asio::read( s, boost::asio::buffer( RSA_PUB.data( ) headersize ) );```"
17061;then this is how I get it if you wondered
17062;btw you're not retuning here
17063;therefore your code will still continue and go after the if
17064;that.. that looks like rust
17065;C++
17066;i could be wrong
17067;it is c++
17068;rust dosent have like `int name`
17069;alright
17070;how did you generate the two keys?
17071;as sent previously
17072;```go key err := rsa.GenerateKey(rand.Reader 2048) if err != nil { fmt.Println( err.Error()) } keybytes := x509.MarshalPKCS1PublicKey(&key.PublicKey)```
17073;using crypto/rsa
17074;just that `MarshalPKCS1PublicKey` PKCS1 format seems to differ from the one Crypto++ generated even though all the docs say they're using same format
17075;I was asking how you generated the other key
17076;okay
17077;oh
17078;this is a bit weird
17079;but
17080;"```cpp RSA::PrivateKey rsa_private; AutoSeededRandomPool random; rsa_private.GenerateRandomWithKeySize( random 2048 ); auto rsa_public = RSA::PublicKey( rsa_private ); ByteQueue queu2e; rsa_public.Save( queu2e ); FileSink file1( testdump.bin ); queu2e.CopyTo( file1 ); file1.MessageEnd( );```"
17081;can you try to generate the same public key with both?
17082;how would that be possible?
17083;"```gofunc (v compareVariables) resetOne(){ v.BowHigh = 0 v.HighChanged = true v.BowFinished = false v.BowLow = 10000 v.VolumeGo = false v.CheckFinalStages = false v.ContinueChecking = false v.KeelHigh = 0 v.FirstCheck = false v.SecondCheck = false v.FirstStage = false v.SecondStage = false //v.CheckTime = true v.McginleyList = nil v.KeelMcginleyList = nil v.CancelWatch = false v.OnWatchTime =  timeZone,_ := time.LoadLocation(""America/New_York"") v.PatternStartTime = time.Now().In(timeZone).Format(""3:04:05PM"")}```"
17084;can i do this
17085;make varibles that are not of the v type
17086;inside a method to change varibles of taht struct
17087;what is the type signature of `GenerateRandomWithKeySize`?
17088;not sure what you mean by type signature
17089;None
17090;yeah so
17091;instead of `AutoSeededRandomPool` use an `LC_RNG`
17092;oh
17093;this is to generate same keys?
17094;yeah
17095;what seed do you suggest?
17096;doesn't matter you just need to use the same seed in both
17097;I don't know much about seeds can they be small as big?
17098;you can just use 0 haha
17099;it doesn't matter
17100;alright
17101;now what io.reader can I use?
17102;for the Go one
17103;@xblooos is your question can you declare variables in methods?
17104;The answer is yes
17105;is there a library i can use to get the md5sum of a file in golang? all i am finding are tools for this but no libraries
17106;well yes but do they die
17107;when the mehto dis finished
17108;like within the scope of the method
17109;it's scoped to the function
17110;like anything else
17111;ah
17112;but the ones with the v.
17113;are not becuase
17114;there's stdlib md5 https://golang.org/pkg/crypto/md5/
17115;well actually what owuld be the proper way to explain
17116;You are referencing something outside the function scope
17117;I feel dumb
17118;why the v. ones are not
17119;there's even an example for hashing a file
17120;that's why
17121;i have that tab open r/n
17122;@Akandesh I thought there would be a builtin one but there isn't hmmm
17123;it's okay the crypto stuff is pretty spread out and somewhat opaque
17124;```// basic linear congruential generatorfunc lcg(a c m seed uint32) func() uint32 { r := seed return func() uint32 { r = (ar + c) % m return r }}```
17125;ah so the v is outside the fucntion scope
17126;maybe you can use this
17127;but the ones im declaring insdie
17128;are
17129;!!!!!
17130;huge thank u
17131;v is in the function scope but it's a pointer to a type
17132;so v only exists in the method scope
17133;but it refers to something else
17134;If your method receiever wasn't a pointer none of those changes would be reflected after you called that method
17135;@emiliano I have no clue how I'd use that :| It takes 4 parameters
17136;pick 4 numbers and let it rip lol
17137;how do you create an LC_RNG in C++?
17138;"Well Crypto++ have their own implementation. It's as simple as `CryptoPP::LC_RNG no_rng(seed);`"
17139;then I pass `no_rng`
17140;Try `DEREncodePublicKey` rather than `Save` on the C++ side
17141;Your C++ is generating a full certificate while the Go is just marshaling the key material
17142;üëÄ
17143;None
17144;looks a lot more promising
17145;Yeah those are just two different keys
17146;question is how id decode that now
17147;because I always got BERDecode error
17148;Guess it's because its DER format and not BER?
17149;DER is a strict subset of BER
17150;What error do you get?
17151;sec
17152;ill try loading the one I just saved
17153;welp now i think it works
17154;Yeah the error doesn't tell me anything really. just `BER decode error` @Carson
17155;"```cpp FileSource file3( testdump.bin true /pumpAll/ ); ByteQueue queue5342345; file3.TransferTo( queue5342345 ); queue5342345.MessageEnd( ); RSA::PublicKey tesptub; tesptub.Load( queue5342345 );``` Excuse my namings it was written at a low point"
17156;Don't use `Load` use `BERDecodePublicKey`
17157;`Load` assumes the full X.509 format that `Save` outputs
17158;ohh
17159;why do you know all these things
17160;you've used Crypto++ before? or can you just read while I cannot?
17161;This is literally just me looking at the wiki
17162;I have never used this library before in my life
17163;lol
17164;:|
17165;goddamn it works
17166;can you link me the page which showed that it expected full 509?
17167;https://www.cryptopp.com/wiki/Keys_and_Formats#BER_and_DER_Encoding
17168;> Recall from Private Key Format and Public Key Format that PKCS #8 and X.509 have an outer PrivateKeyInfo or SubjectPublicKeyInfo. The outer structure includes information such as OID and version. Within the ASN.1 structure is the actual key material upon which an algorithm operates.
17169;> Crypto++ offers functions to save and load the inner key material via DEREncodePrivateKey DEREncodePublicKey BERDecodePrivateKey and BERDecodePublicKey.
17170;damn I think it's because I didn't know what the formats really were so didn't think much of it
17171;thought x509 was the same thing
17172;Don't beat yourself up X.509 is a behemoth of a standard and I'm not pretending to understand even most of it haha
17173;let's hope it's very similar to decode in Go as well
17174;since ill be exporting in crypto and importing in Go
17175;```Server creates RSA sends public to clientClient creates RSA sends public to serverServer encrypts AES key using clients publicClient decrypts and both parties use AES from here on```
17176;just realized I don't think server ever needs to make a RSA key
17177;just needs to use clients ü§î
17178;or does this idea sound flawed?
17179;Sounds like you're reinventing key exchange algorithms to me
17180;Look at DiffieHellman X25519 etc.
17181;doing all of this just to avoid having to use SSL again :^)
17182;"I'm not sure what you think you're gaining with this scheme; your goal is to establish a shared secret between two parties"
17183;That's something that key exchange schemes have been doing for decades
17184;It's not a new problem :p
17185;gaining compared to what?
17186;> Look at DiffieHellman X25519 etc.
17187;Ah thought you meant compared to ssl
17188;Under X25519 for example each party sends one 32byte public key each way and boom you have a shared secret you can use as a source to a KDF
17189;I just liked the idea of having a completely new key every connection
17190;```gov.SpreadSheetList = append(v.SpreadSheetList[:placeValue[i]],v.SpreadSheetList[placeValue[i+1]:]...)```
17191;```gov.SpreadSheetList = append(v.SpreadSheetList[:placeValue[i]],v.SpreadSheetList[placeValue[i]+1:]...)```
17192;X25519 keys are ephemeral yes
17193;why would the second one be causing a runtime error somewhere
17194;vs the first one
17195;If you want to cover server verification that's where certificates come in...and boom you're back to TLS
17196;It's not a coincidence the entire world uses it üòÑ
17197;server verification?
17198;Allowing the clients to confirm the identity of the server with a longlived certificate
17199;Why's that important?
17200;I get for websites but for other stuff
17201;can't understand what it prevents
17202;It's important for literally anything over an untrusted network it prevents a MITM hijacking the connection
17203;doesn't just having the data encrypted prevent that?
17204;Under TLS the client will only talk to a server if the server can prove it has knowledge of a secret which only that server has
17205;since the encrypted data can't be tampered with unless the attacker has the keys too?
17206;But encrypted with whom?
17207;AES for example
17208;Not with what
17209;With whom
17210;How do you think you establish an encrypted connection?
17211;What happens when an attacker acts as the other end?
17212;ü§î
17213;If you go to discord.com you'll establish an encrypted connection but how do you know you're talking to discord.com?
17214;What happens when your ISP pretends to be discord.com?
17215;Or some other filter on the probably dozens of hops your traffic will take?
17216;Hm I see
17217;quite a bit of work to do MITM with AES encrypted traffic though
17218;first gotta intercept the key exchange
17219;etc
17220;That's extremely easy
17221;yeah since it's the first packets sent
17222;You just need to be at a closer vantage point to the victim boom you hijacked it
17223;¬Ø\\_(„ÉÑ)_/¬Ø
17224;I know for a fact it's not necassary for my situation as only clients can be attacked and they have to be specifically attacked
17225;Using a certificate is what combats this‚Äîthe server can prove it has knowledge of a secret which the client will verify before attempting to connect
17226;yeah that's interesting feels like it would be easy to find out what that secret is
17227;should watch a youtube video explaining ssl some time :^)
17228;gonna watch https://www.youtube.com/watch?v=NmM9HA2MQGI now tho
17229;Guess what encryption scheme is (usually) used to protect that secret
17230;Any guesses? üòõ
17231;RSA?
17232;There you go
17233;The very same thing you're using
17234;üòé
17235;so who decrypts the key
17236;the secret
17237;the client?
17238;(things are moving towards ECDSA and Ed25519 but the details are less important‚Äîthe important thing is that it's theoretically impossible to extract that secret)
17239;but client has to verify this somehow
17240;that the secret matches something
17241;Yes that's where the chain of trust and certificate authorities come in
17242;sounds neat
17243;@Akandesh coming from a pentester please please please dont roll your own encryption or think rolling your own partially featured TLS protocol is a good idea
17244;Great for practicing and understanding terrible for security
17245;"```golang// Add all the boards to the dropdown menu as the app opensfor _ bd := range library.ImportedLibrary.Boards { menu.Append(bd.BoardName custom.""+strings.Replace(bd.BoardName   _ 1)) // Not working because boardAction variable is the name for each so the last one overwrites previous ones boardAction := glib.SimpleActionNew(strings.Replace(bd.BoardName   _ 1) nil) boardAction.Connect(""activate func() { DisplayBoard(strings.Replace(bd.BoardName   _ 1)) }) customActionGroup.AddAction(boardAction) Window.AddAction(boardAction)}``` is there any way to change the variable\'s name for each iteration of the loop?"
17246;as the second comment says value is being overwritten because it's always appending it as `boardAction`
17247;well
17248;it sounds like you don't have a single boardAction
17249;it sounds like you have multiple
17250;maybe you'd want to use a data structure that reflects that
17251;what do you mean?
17252;multiple
17253;well the name is being overwritten yes?
17254;the value i guess
17255;so that means there's more than one boardAction
17256;well since it's a loop then yes
17257;yes
17258;so
17259;you don't have ONE boardAction
17260;i'm slow but i think you got what i wanted to say
17261;yes
17262;so you'd want to use something like a map or a slice
17263;hmm
17264;no idea how i'd use that here
17265;well let's simplify
17266;thanks in advance :p
17267;ait now I wanna use diffie hellman
17268;https://play.golang.org/p/Ajc3GTHiaRl
17269;you loop over your inputs
17270;and you do a thing to each one
17271;and you want to store the result of that work
17272;spoilers: the answer is already in the code snippet
17273;i think i'll understand this once i get some rest
17274;i've burned myself out today
17275;thanks again
17276;@Carson how would I approach DH with Go?
17277;you'd probably just use tls.Dialer
17278;you have very fine grained control over your TLS options so you can specify what ciphers etc you need
17279;me?
17280;nope
17281;kk sorry
17282;you weren't asking about tls
17283;thank god
17284;üòÖ
17285;never roll your own crypto
17286;ü§î
17287;Reason why I don't want to use SSL is because when using SSL my server randomly would stop accepting my generated SSL cert and same happened to the client
17288;and it was the biggest headache
17289;yeah that's weird
17290;so I don't want a SSL cert saved to disk anymore
17291;I want everything to be generated
17292;that shouldn't be happening
17293;CAtrusted certs are free these days there's really no reason not to use it
17294;i know it's frustrating but like
17295;that sounds like something is literally broken
17296;Rolling it yourself is 10000x worse than debugging that issue
17297;None
17298;then this happened
17299;just randomly started crashing
17300;so that's when I decided id move away from C++ server
17301;never heard of ssl_server.exe
17302;I want everything to be generated is quite literally the antithesis of TLS‚Äîyes your individual connections run on ephemeral keys but the fact that things need to be stored is why TLS is so versatile
17303;Is that a self written ssl_server.exe?
17304;haha ofc
17305;yeah did you write ssl_server.exe ?
17306;oh
17307;well
17308;there you go
17309;Well theres your problem
17310;you rolled your own ssl implementation
17311;and it isn't working
17312;what do you mean
17313;So the solution is to get rid of ssl ü§£
17314;you wrote the program that is crashing
17315;Is this ssl for a web server?
17316;if you haven't actually debugged that crash you can't really make any assessment about what's broken and how bad ssl is
17317;"```cpp server( boost::asio::io_context& io_context,unsigned short port ) : acceptor_( io_context,tcp::endpoint( tcp::v4( ),port ) ), context_( boost::asio::ssl::context::sslv23 ) { context_.set_options( boost::asio::ssl::context::default_workarounds | boost::asio::ssl::context::no_sslv2 | boost::asio::ssl::context::single_dh_use ); WCHAR ownPth[ MAX_PATH ]; GetModuleFileName( GetModuleHandle( nullptr ),ownPth,sizeof ownPth ); std::string path = ws2s( std::wstring( ownPth ) ); path = path.substr( 0,path.length( )  15 ); context_.set_password_callback( std::bind( &server::get_password,this ) ); context_.use_certificate_chain_file( path + \\\\public.pem ); context_.use_private_key_file( path + \\\\private.pem"",boost::asio::ssl::context::pem ); context_.use_tmp_dh_file( path + \\\\dh2048.pem ); debug::log( 1,""Started server. ); do_accept( ); }```"
17318;absolute hell
17319;yeah c++ bad
17320;I debugged it on my coding pc
17321;doesn't crash there
17322;then crashes on VPS
17323;If it's for a web server why not use apache or nginx for ssl termination?
17324;yeah you gotta debug on the vps now
17325;it's not for a web server
17326;Gotcha
17327;docker has entered the chat
17328;The best solution to It works on my machine
17329;but yeah I hate having to generate a ton of things externally
17330;That an easy devops problem to solve
17331;> then crashes on VPS@Akandesh compare straces?
17332;strace?
17333;what's that
17334;stack trace?
17335;Syscall trace
17336;why do I not know what that is
17337;https://strace.io/
17338;oh it's because it's linux
17339;this was a windows VPS
17340;oh yikes
17341;good luck then
17342;yeah rip
17343;and yeah yet another reason I'm rewriting it
17344;Windows alternative? Is procmon somewhat close?
17345;¬Ø\\_(„ÉÑ)_/¬Ø
17346;using windows for server is no good
17347;super no good
17348;so looking forward to running it in linux instead
17349;We got into the weeds very quickly but bottom line: if you're looking to securely connect two clients over the internet use TLS. If you have problems with TLS fix them. Rolling just an encryption scheme is practically as good as nothing at all.
17350;Yeha theres a reason azure runs on linux
17351;linux is so much better at servers than windows
17352;So.. can TLS setup be done fast? or will I have to jump around a lot
17353;In Go? Sure 15 minutes tops
17354;In C++? I can't answer that
17355;feels like generating the certs is gonna take me ages
17356;I mean depending on what you're using it could be super easy just throw some acme on it
17357;certs is 30 seconds
17358;if you type the right command
17359;Don't worry about C++ I already know how that will be done
17360;yeah.. that right command
17361;I hate it
17362;googling gives me 30 variations of generating certs
17363;Certbot for let's encrypt if its external facing
17364;‚òùÔ∏è
17365;.. external facing? what that means
17366;On the internet for letsencrypt it needs to be served under a domain name
17367;Yeah so if I have a domain pointed to same IP as the server
17368;Yes yes
17369;Alright I see. Yeah I will but I like testing on my local pc
17370;easier to debug locally than on production server ye?
17371;Selfsigning is just a few more steps. Go allows you to specify trusted CAs.
17372;üò©
17373;I usually include dev uat and live. Dev no tls uat a mirror of live external facing but whitelisted IPs only and live for ... live
17374;im just so unfamiliar with a lot of the things y'all say
17375;but I will start working on TLS nowish‚Ñ¢Ô∏è
17376;reading through https://golang.org/doc/articles/wiki/ and under the `Validation` section it says:> As you may have observed this program has a serious security flaw: a user can supply an arbitrary path to be read/written on the server. To mitigate this we can write a function to validate the title with a regular expression.but if we do not add a handler function to handle a URL path wouldn't nothing happen?
17377;"Tbh I'm not really a dev but I do have experience in devops infrastructure and security. I'd listen more to the other guys than me ;)"
17378;https://github.com/firstrow/tcp_server/blob/master/tcp_server.go#L114
17379;ya think this will work?
17380;just realized how short this sourcecode is
17381;barely needed
17382;but should still make life a little easier
17383;Yes that‚Äôs literally about it.
17384;so.. certfile vs keyfile
17385;is that public vs private?
17386;always confused with the namings
17387;@Deleted User I think the implication is that you set up a handler at the top of the URL and use the handler to extract the other parts of the URL rather than relying on the builtin router for everything
17388;They don‚Äôt explicitly show it but that seems to be what they‚Äôre going for
17389;"they still have all this code though```gofunc main() { http.HandleFunc(""/view/ makeHandler(viewHandler)) http.HandleFunc(""/edit/ makeHandler(editHandler)) http.HandleFunc(""/save/ makeHandler(saveHandler)) log.Fatal(http.ListenAndServe("":8080 nil))}```"
17390;Yes that‚Äôs what I mean
17391;Maybe they do show it haha I didn‚Äôt see it
17392;@Akandesh yes the certificate is what goes to the client and is public information
17393;The key is private information
17394;by top of the URL don\'t you mean the root path?
17395;Yes like `/view/`
17396;im still confused. Where is the security flaw?
17397;how is the user able to access unauthorized files without this?
17398;Above the page would be unconditionally loaded
17399;Now it must match `validPath` to be loaded
17400;can you give an example of something that can go wrong without this?
17401;Imagine someone requesting `/edit/../../../../.ssh/id_rsa` or something you might be able to see how that would go bad :p
17402;That wouldn't match `validPath` however
17403;oh
17404;yeah that makes sense
17405;thanks
17406;anyone here use `gochi` with react? I can't get my reactrouter to line up with their fileServer
17407;I can only get my react site if I visit `/` but other than that paths that otherwise would be valid like `/signin` returns a 404
17408;We had just covered that recently
17409;What was his name again
17410;@JohnnyTheSmith
17411;with chi?
17412;Yes
17413;what was the solution?
17414;Youll have to go through chat history to get the full context lol
17415;Im also on mobile
17416;Heres the man himself
17417;What is the specific question. Maybe I can fill in
17418;im using react and gochi
17419;Alright good
17420;how would I line up reactrouter with the go chi file server?
17421;I might have to send you my router.go but also on mobile
17422;Give me a Minute
17423;oki
17424;can't wait until we just have a table of people with the questions matched to them
17425;lol
17426;imagine a FAQ that was useful
17427;its just a giant table of questions
17428;and has the answers
17429;@_diamondburned_ basically CODEOWNERS except SOLUTIONOWNER
17430;@ herder amend the bot to add that
17431;i mean honestly
17432;i don't think it's hard to construct something that automatically crawls chat for Qs and As
17433;and put them all into one large page
17434;that would be hard
17435;because how do you differ a coding question
17436;from a random question like `how was your day?`
17437;~~does it matter :^)~~
17438;Question: `How was your day?` Owner: @_diamondburned_
17439;Changing to client right now @Flexagon
17440;i always care about your day @_diamondburned_ ü•∫
17441;you now are the source for all how was your day related questions
17442;@JohnnyTheSmith ok!
17443;So now I am on a client
17444;@_diamondburned_ i dont care about you OR your day
17445;:mfw:
17446;"So in my router.go I mount / to a handler like this```go // Spa route router.Mount(""/ routes.SPARoutes())```"
17447;what does `Mount` do?
17448;"Tis in the docs ;)"
17449;Well this I cannot tell in detail but you can handle another subroutes on / then
17450;ah
17451;lets look into SPARoutes then
17452;is that on the end? Then what would you do for /api route?
17453;"```go// SPARoutes will deliver React Frontendfunc SPARoutes() chi.Router { router := chi.NewRouter() router.Use(middleware.NoCache) router.Get(""/ func(w http.ResponseWriter r http.Request) { // Server index indexFile err := parcello.Open(""spa/index.html"") if err != nil { logger.Errorf(""Error opening index.html of React App: %+v err) fmt.Fprintf(w Error opening index.html of React App: %+v err) } indexContent err := ioutil.ReadAll(indexFile) if err != nil { logger.Errorf(""Error opening index.html of React App: %+v err) fmt.Fprintf(w Error opening index.html of React App: %+v err) } w.Write(indexContent) })```"
17454;`.Mount()` is so useful
17455;"``` r.Route(""/api func(r chi.Router) { r.Route(""/auth controller.Auth) r.Route(""/logout controller.LogoutRouter) r.Route(""/status controller.StatusRouter) r.Route(""/raffle controller.Raffles) r.Route(""/update controller.UpdateRoutes) r.Route(""/user controller.User) r.Route(""/admin controller.Admin) }) r.Get(""/ping func(w http.ResponseWriter r http.Request) { w.Write([]byte(""pong"")) }) // Create a route along /files that will serve contents from // the ./data/ folder. filesDir := http.Dir(""./web"") FileServer(r / filesDir)```This is what I have lel"
17456;I thought we are talking about hosting the react frontend though right?
17457;that and the api
17458;all in one server
17459;okay hold on
17460;my complete router.go will look like this:
17461;how does your SPARoutes handle the routes in react router?
17462;that is the question
17463;let me show you
17464;"```go fileserver := http.FileServer(http.Dir(getDir(""spa""))) router.Get(""/ func(w http.ResponseWriter r http.Request) { if _ err := os.Stat(getDir(""spa/ + r.URL.Path)); os.IsNotExist(err) { spaIndex := filepath.Join(getDir(""spa"") index.html"") index err = ioutil.ReadFile(spaIndex) if err != nil { logger.Error(""Error reading index.html of React Frontend"") } w.Write(index) return } fileserver.ServeHTTP(w r) })```"
17465;This will check if a file is present in my spa folder
17466;"on its the `""/""`"
17467;i think thats what im missing
17468;if so it will deliver it's content
17469;to get the js bundle and css to work
17470;otherwise if the file is not present it will deliver the content of index.html
17471;this will then take care of ther reactrouterdom routes
17472;I'm on a leavo though
17473;I hope I could help out buddy
17474;god speed. see you guys around
17475;god speed
17476;was that it?
17477;im curious
17478;idk havent tried
17479;"```func main() { a := []int{} ap(a 1) fmt.Println(""outside: a)}func ap(a []int e int) { a = append(a e) fmt.Println(""inside: a)}// inside: [1]// outside: []```why is it like this? I thought slice var is a pointer already?"
17480;The slice header is copied
17481;but it points to the same array?
17482;Not necessarily if the append would cause a reallocation
17483;so I have to pass a pointer of slice if I want to the function to modify outer slice?
17484;"```func main() { a := []int{} ap(&a 1) fmt.Println(""outside: a)}func ap(a []int e int) { a = append(a e) fmt.Println(""inside: a)}```"
17485;it's weird to type all these just for the effect
17486;You could return the new one instead
17487;how do I serve a `http.File` as a response?
17488;"I currently have `index _ := root.Open(""index.html"")` where `root` is a `http.FileSystem` and I want to return the index.html"
17489;i guess I would have to turn the io.Reader into a slice of bytes?
17490;if I give a relative path when linking a stylesheet or script in html would it be relative to where the html file is or where I run the server from
17491;damn where did everybody go
17492;@Deleted User relative to html file
17493;Doesn't net/http have a serveFile function?
17494;It does
17495;You can use that or ServeContent
17496;fixed
17497;oh i could
17498;this is my current little hacked solution
17499;"``` if _ err := root.Open(r.URL.Path); os.IsNotExist(err) { index err := ioutil.ReadFile(""web/index.html"") if err != nil { log.Println(""Error while serving index.html"") log.Println(err) } w.Write(index) return }```"
17500;wtf is this
17501;you should just be able to use ServeFile directly
17502;"err := http.ServeFile(w r web/index.html"")"
17503;ah
17504;yeah thats the better solution thanks @weenie
17505;oh it doesn't even return an error
17506;The filesystem in net/http is great if you want to serve an entire dir as you can pass it to the Fileserver directly
17507;For serving different files it is pointless
17508;@Flexagon I have my project set up with all my server source code in the root directory and in that root directory I have a `text` directory with the `html` `css` and `javascript` directories and when I try to link to a script in my html file (located at `/text/html`) I get this error: `Uncaught SyntaxError: Unexpected token <'`
17509;turns out it is loading the contents of the html file for the javascript file but Im not sure why
17510;the html file is the file located at `/text/html` and the javascript file is located at `/text/javascript`
17511;"so I do something like `<script src=""../javascript/script.js""></script>` to link to it"
17512;is it making a request to the server and using the response?
17513;i have a go func(){}() can i kill the go routine with just a break?
17514;nvm ill just use chan
17515;From inside the routine: if you return in the function it is killed
17516;You can't externally kill a routine
17517;so just return?
17518;on err?
17519;https://i.imgur.com/Qh1i3rB.png
17520;You have to program a way for it to stop. Depending on the work the routine is doing stopping on err could be a valid approach
17521;i can do this right?
17522;That won't do much though right?
17523;As soon as the routine starts it exits
17524;i got it in a for loop
17525;The goroutine doesn't care about that. You also have a race condition in that code right now
17526;wtf
17527;Incrementing the counter from multiple routines
17528;Without guarding it will cause issues
17529;?go routines
17530;?go pipelines
17531;Go Concurrency Patterns: Pipelines and cancellation <https://blog.golang.org/pipelines>  technololigy
17532;?go race
17533;Aww
17534;thx ill look in to it
17535;https://discord.com/channels/118456055842734083/118456055842734083/661158785490092062
17536;See that example
17537;I think the tour covers this as well
17538;https://golang.org/doc/articles/race_detector.html
17539;basically the counter what it does
17540;is count the amount of times the goroutine executed
17541;Except that you can have multiple goroutines trying to increment the same variable
17542;Which is the data race I mentioned
17543;For example:```goroutine 1: read value in counter at 0goroutine 2: read value in counter at 0goroutine 1: increment and write counter to 1goroutine 2: increment and write counter to 1```
17544;In the end the counter is at 1 instead of 2 like it is supposed to be
17545;Yeah like the examples I linked
17546;hmmm
17547;ill look in to it and see what i can do thanks
17548;i just rarley use go routines
17549;Check out the tour section on them
17550;"how come whenever I save my file it removes the ```goimport fmt""```"
17551;Ugh I hate that. It‚Äôs because the punter thinks it‚Äôs an unused import
17552;ughhhh how do i resolve this
17553;It does that sometimes even if you‚Äôre using it though... it‚Äôs a pain
17554;At least on VS code
17555;yeah I'm using VSCodium (Basically VS Code)
17556;Try adding your call to something in the fmt package then saving
17557;Then add the import if it‚Äôs not added automatically
17558;I mean it won't compile if you have unused import so usually it's a good thing
17559;Yeah it‚Äôs just a glitch in VS code specifically I think? It will remove it in certain instances where it shouldn‚Äôt. Not sure how to reproduce though.
17560;"```gopackage mainimport fmt""func main() { fmt.Println(""Hello There!"")} ```"
17561;thats how you reproduce it with a basic hello world
17562;Println ?
17563;Yeah that will do it
17564;idk is faulty subfucntion can cause it
17565;an incorrect function will confuse goimports yes
17566;because it can't find the package with that function name
17567;I need some help with something
17568;So I am making something to wget some files from a website so basically if they answer Yes it will wget the files but I cannot get it working
17569;sure post code
17570;How do I do the cool way of posting it?
17571;Not sure how to explain it
17572;\\`\\`\\`gothis way?\\`\\`\\`
17573;h
17574;backticks
17575;golang 2 is gonna have a lot of changes and one of the proposes is genius. Instead of writing ```goif err != nil { log.Fatal(err)}```u write```gopass err```
17576;eww
17577;no wrapping?
17578;```www```
17579;ok
17580;let me post it
17581;im si excited but overwhelmed for go 2
17582;also where's the design writeup?
17583;"```import ( fmt"" os/exec"")var cmd stringfunc main() { var cmd string fmt.Println(""Urlhaus Bin Downloader"") fmt.Println(""Coded by Abdul v1.0"") fmt.Println(""\\r"") fmt.Print(""Begin Downloading Bins? ) fmt.Scan(&cmd) if cmd == Yes { fmt.Println(""Downloading Bins!"") exec.Command(""mkdir bins"") exec.Command(""cd bins; wget https://urlhaus.abuse.ch/downloads/text_online/"") }}```"
17584;try Scanln
17585;If you are talking to me when I type Yes it goes to downloading bins
17586;then does not actually wget
17587;Oh
17588;well execute the command
17589;1. Error check exec.Command
17590;2. You need to pass in sh c
17591;that should be enough to Google the rest
17592;"sh c command""?"
17593;I have not used the exec before
17594;I did google but it shows how to do this ./name (wget) however i want it to just do ./name and then it runs
17595;if that makes sense
17596;i think u have to use os.Args
17597;did it work? :lolol:
17598;Just looking at it never used os.Args before
17599;oh so
17600;I dont want to do this ./name and then the wget
17601;i just want to do the ./name and then the program would run
17602;Because wouldn't os.Args be for if i wanted to do ./name (wget)
17603;?
17604;yes
17605;ok so if u do ./name
17606;it doesn't run?
17607;or is is typing in yes that u dont wanna do
17608;cuz i ran locally and just
17609;./programYes
17610;worked
17611;Basically
17612;I would run ./nameIt would then ask me the question if I would like to download the binsIf Yes it would then download the bins (execute the wget)
17613;oh hmm
17614;I looked on google but could not find anything
17615;oh ok so I looked at the doc. ```gofunc Command(name string arg ...string) Cmd```
17616;so this is like
17617;u have to write in this syntax
17618;"```goexec.Command(""cd bins"")```"
17619;this would be in the function?
17620;yes
17621;"```package mainimport ( fmt"" os/exec"")var cmd stringfunc main() { var cmd string fmt.Println(""Urlhaus Bin Downloader"") fmt.Println(""Coded by Abdul v1.0"") fmt.Println(""\\r"") fmt.Print(""Begin Downloading Bins? ) fmt.Scan(&cmd) if cmd == Yes { fmt.Println(""Downloading Bins!"") exec.Command(""/bins/sh mkdir bins"") exec.Command(""/bins/sh cd bins; wget https://urlhaus.abuse.ch/downloads/text_online/"") Command() }}type Cmd = stringfunc Command(name string arg ...string) Cmd { exec.Command(""cd bins"") return nil}```"
17622;./main.go:23:10: not enough arguments in call to Command have () want (string ...string)
17623;"Ignore the exec.Command("""") basically when I say Yes I want it to go to Command() however not enough arguments"
17624;> no wrapping?@_diamondburned_ i think the handle/check proposal is nicer
17625;you define a handler for errors
17626;and when you call a `func() (...T err)` with `check` it'll do the `if err != nil` dance with the handle block
17627;idk handle/check just feels like adding a syntax construct to the `errCheck()` problem
17628;that's exactly what people want lmao
17629;"right but the core problem is you can\'t write an error handler"". Either you exit return the error or do something ad hoc"
17630;you can't write an actual generalized function to do that without making it fifty nested if/switch blocks
17631;@Deleted User here
17632;"```gopackage mainimport ( fmt"" log"" os/exec"")func main() { var cmd string fmt.Println(""Urlhaus Bin Downloader"") fmt.Println(""Coded by Abdul v1.0"") fmt.Println(""\\r"") fmt.Print(""Begin Downloading Bins? ) fmt.Scan(&cmd) if cmd == Yes { fmt.Println(""Downloading Bins!"") cmd := exec.Command(""mkdir bins"") _ err := cmd.Output() fmt.Println(""1"") if err != nil { //log.Fatal(err) } cmd = exec.Command(""wget o bins/here.txt https://urlhaus.abuse.ch/downloads/text_online/"") _ err = cmd.Output() if err != nil { log.Fatal(err) } }}```"
17633;try running that xd
17634;@deezy the ability of `handle` to compound is nice
17635;oops i made a mistake haha
17636;"```gofunc CopyFile(src dst string) error { handle err { return fmt.Errorf(""copy %s %s: %v src dst err) } r := check os.Open(src) defer r.Close() w := check os.Create(dst) handle err { w.Close() os.Remove(dst) } check io.Copy(w r) check w.Close() return nil}```"
17637;I need it to not output to a text file but to just wget into a folder and it should just put loads of files in the bins folder
17638;However I will have a look and try to do it
17639;"```gopackage mainimport ( fmt"" log"" os/exec"")func main() { var cmd string fmt.Println(""Urlhaus Bin Downloader"") fmt.Println(""Coded by Abdul v1.0"") fmt.Println(""\\r"") fmt.Print(""Begin Downloading Bins? ) fmt.Scan(&cmd) if cmd == Yes { fmt.Println(""Downloading Bins!"") cmd := exec.Command(""mkdir bins"") _ err := cmd.Output() if err != nil { //log.Fatal(err) } cmd = exec.Command(""wget O bins/here.txt https://urlhaus.abuse.ch/downloads/text_online/"") _ err = cmd.Output() if err != nil { log.Fatal(err) } }}```"
17640;and of course the `handle` thing handles the common bail on error well
17641;oh u could do a function that adds ~/bins every time
17642;I tried changing the dir but couldnt get it
17643;Why are you guys invoking wget instead of using net/http...
17644;so id say just and bins to every file output name
17645;idk lol
17646;because who needs to program in go
17647;cuz bash
17648;when you can just `exec.Command`
17649;haha
17650;Just write bash then
17651;:robpike:
17652;well idk y he is haha
17653;lul
17654;just out of curiousity why arent u using net/http
17655;cuz u can go GET requests and save the file
17656;Here's a good snippet
17657;"```gopackage mainimport ( fmt"" io"" net/http"" os"")func main() { fileUrl := https://golangcode.com/logo.svg"" err := DownloadFile(""logo.svg fileUrl) if err != nil { panic(err) } fmt.Println(""Downloaded:  + fileUrl)}// DownloadFile will download a url to a local file. It\'s efficient because it will// write as it downloads and not load the whole file into memory.func DownloadFile(filepath string url string) error { // Get the data resp err := http.Get(url) if err != nil { return err } defer resp.Body.Close() // Create the file out err := os.Create(filepath) if err != nil { return err } defer out.Close() // Write the body to file _ err = io.Copy(out resp.Body) return err}```"
17658;not looked into it
17659;but i will now
17660;xd good cuz thats like the biggest thing with golang
17661;is networking
17662;"What\'s a smarter way to do```gow.Write([]byte(`{ data"": ` + string(bytes) + `}`))```"
17663;Given json unmarshel and many data structs
17664;make a structure and use Marshal
17665;Yeah that would require a generic type
17666;say I have 10 data structs for every one I would have to create a data wrapping struct
17667;which is absurd
17668;...or just store in an `interface{}` before marshaling? (ideally as late as possible)
17669;I mean do you?
17670;"I don't know how many you actually need; what structure you need and how many is completely up to you"
17671;.. you would just wrap it in json.RawMessage
17672;take stripe for example. They have stripe.Event which then has stripe.Event.Data.Raw (which is json.RawMessage)
17673;is the best way to find hte index
17674;of a element in a slice
17675;to iterate it in a for loop
17676;and just save the index that u find them at
17677;pretty much
17678;save them until they become invalidated
17679;that's the only way to do it
17680;aka when the slice changes
17681;with a straight up array/slice at least. other data structures have different strategies
17682;"> What\'s a smarter way to do```go> w.Write([]byte(`{ data"": ` + string(bytes) + `}`))> ```@Deleted User"
17683;you could do
17684;"```gow.Write([]byte(`{""data"":`))w.Write(bytes)w.Write([]byte(`}`))```"
17685;:thonk:
17686;not a fan? haha
17687;it's probably slightly faster?
17688;you avoid the allocations
17689;yeah but big brain energy too
17690;which is great actually
17691;thanks btw
17692;np
17693;"I imagine it would be even faster if you made the `[]byte(""string"")` parts global variables"
17694;since go probably allocates memory for the byte slice each time
17695;since the calling function could theoretically modify it
17696;oof that's a good point
17697;poluting the global namespace with these strings for unproven and even then trivial performance gains makes no sense
17698;^
17699;"[]byte(""string"") is likely going to be optimized in the compiler anyway"
17700;optimized how?
17701;godbolt it
17702;okay
17703;sorry why am I still talking
17704;just store it as an array of raw bytes
17705;get even more gains
17706;how would that get you more gains?
17707;its a bit of a joke
17708;okay
17709;either way> poluting the global namespace with these strings for unproven and even then trivial performance gains makes no sense
17710;yeah that's a valid point I'm not disputing it
17711;i know
17712;its more for neurotic
17713;"```gow.Write([]byte(`{""data"":`))w.Write(bytes)w.Write([]byte(`}`))```also this should be```go_ err := w.Write([]byte(`{""data"":`))if err != nil { //handle err}_ err = w.Write(bytes)if err != nil { //handle err}_ err = w.Write([]byte(`}`))if err != nil { //handle err}```"
17714;so really it just ends up being a lot more messy
17715;"than ```go_ err := w.Write([]byte(`{ data"": ` + string(bytes) + `}`))if err != nil { //handle err}```"
17716;that's a fair point
17717;"```gofmt.Fprintf(w,`{ data"": %s}`,bytes)```"
17718;although that's probably not what you want json.Marshal and whatnots
17719;you'd have to cast `bytes` to string but yeah this is probably better than what I was proposing
17720;don't need to
17721;oh `%s` does the right thing?
17722;https://play.golang.org/p/NbwSvpucPB
17723;huh good to know!
17724;"```gowrap := struct { Data interface{} `json:""data""`}{ Data: someData,}err := json.Encoder(w).Encode(wrap)if err != nil { //handle err}```"
17725;yeah I think this was suggested above
17726;thanks all this is my first day with golang üëçüèª
17727;> ```go> // DownloadFile will download a url to a local file. It's efficient because it will> // write as it downloads and not load the whole file into memory.> func DownloadFile(filepath string url string) error {> > // Get the data> resp err := http.Get(url)> if err != nil {> return err> }> defer resp.Body.Close()> > // Create the file> out err := os.Create(filepath)> if err != nil {> return err> }> defer out.Close()> > // Write the body to file> _ err = io.Copy(out resp.Body)> return err> }> ```why is this true?> it will write as it downloads and not load the whole file into memory.
17728;https://discord.com/channels/118456055842734083/118456055842734083/745443948356435989
17729;`io.Copy` is an interesting function
17730;io.Copy is one of the crown gems of Go
17731;> If src implements the WriterTo interface the copy is implemented by calling src.WriteTo(dst). Otherwise if dst implements the ReaderFrom interface the copy is implemented by calling dst.ReadFrom(src).
17732;interfaces are so good
17733;a lot of the common readers and writers also implement `WriteTo` and/or `ReadFrom`
17734;YUP
17735;which is how Go programs can forego copying the bytes into memory
17736;the bytes are streamed from the resp.Body
17737;and written immediately to the file
17738;you have some bytes in memory
17739;but you dont neccesarily have the entire thing
17740;iirc
17741;hi therejust finished tour of godoes anybody have some advices where to get more practice?
17742;doing stuff with go
17743;I would like to but right now I dont have any tasks where I could use go üò¶
17744;"say I have some ID type and I write code like `func (id ID) MarshalJSON() (data []byte err error) {...}` and the equivalent for UnmarshalJSON to change the behavior of how the JSON is parsed and exported. when I do```gowrap := struct { Data interface{} `json:""data""` }{ Data: someData, }```why are the custom MarshalJSON functions not called?"
17745;however
17746;when I do
17747;"```gowrap := struct { Data SomeDataStructType `json:""data""` }{ Data: someData, }```it is called. what is the difference?"
17748;because interface{} doesn't have a custom unmarhsal method on it
17749;yet it's not the SomeDataStructType that has the custom unmarshel function it's the ID type
17750;your example is confusing
17751;play.golang.org
17752;minimal reproducing sample
17753;sure 1 s
17754;instead of `interface{}` you could use `json.Marshaler`
17755;https://play.golang.org/p/xO4XYC1vahH
17756;right
17757;because interface{} doesn't have an unmarshal method defined
17758;TypedyType does
17759;if you use `interface{}` the compiler can't know anything about whatever values might be placed there
17760;In this code you do provide a type with an Unmarshal method
17761;but you could also give it one without
17762;the compiler can't know that it's runtime info
17763;how is interface{} marshaled at all then?
17764;good question
17765;but not intelligently
17766;i read this https://research.swtch.com/interfaces does it somehow dynamically determine which methods are available?
17767;interface{} is something you want to avoid whenever possible
17768;for reasons like this
17769;because there\'s lightyears difference between an interface and `interface{}`
17770;`interface{}` specifically says this matches any struct with the following methods: []
17771;that matches everything
17772;which means the compiler can't check for things like UnmarshalJSON and so on
17773;basically avoid interface{} whenever possible
17774;be as specific as you can
17775;@deezy about the thing you mentioned yesterday with my problem https://discord.com/channels/118456055842734083/118456055842734083/745346916430381066
17776;"```golang // Add all the boards to the dropdown menu and connect buttons as the app opens for _ bd := range library.ImportedLibrary.Boards { menu.Append(bd.BoardName custom.""+strings.Replace(bd.BoardName   _ 1)) // Was not working because variable name was the same for each so the last one overwrites previous ones // Solution: find a way to have variable name be different every iteration of the loop customActionGroup.AddAction(AddAction(bd.BoardName boardTitleEntry)) Window.AddAction(AddAction(bd.BoardName boardTitleEntry)) }```"
17777;kek
17778;i made it call a function
17779;no need for a variable
17780;i think i understand now thanks
17781;i mean it is repetitive and not encouraged (by me at least) but i've spent too much time there
17782;it would be demotivating to still be there
17783;¬Ø\\_(„ÉÑ)_/¬Ø
17784;Oh yeah that‚Äôs true
17785;Whoops
17786;how do i get this uint value? `KEY_Return = uint(C.GDK_KEY_Return)`
17787;https://godoc.org/github.com/gotk3/gotk3/gdk that's from gdk
17788;i need the uint value for the enter key
17789;are those following any specific standard?
17790;examples have this
17791;you can read the definitions
17792;```const ( KEY_LEFT uint = 65361 KEY_UP uint = 65362 KEY_RIGHT uint = 65363 KEY_DOWN uint = 65364)```
17793;https://godoc.org/github.com/gotk3/gotk3/gdk#pkgconstants
17794;i think this may return me `func KeyvalFromName(keyvalName string) uint` the uint of what i want
17795;oh
17796;they're coming from C
17797;"gl;hf"
17798;yes
17799;:GWvertiPeepoSadMan:
17800;it's `65293` :p
17801;for some gdk stuff you'll have to manually cast to uint
17802;I have no idea why
17803;gotk3 is a mess in general
17804;yeah i see :(
17805;still
17806;it's the first time i found my way around a gui library
17807;framework whatever it is
17808;P.s. it‚Äôs a bad idea to copy magic values into your source  I don‚Äôt think the library guarantees that their consts won‚Äôt change in updates
17809;Can I save a memory address to some data in a struct?
17810;hey guys im learning go right now and working on a simple restapi application. since i try to reduce repeating myself i created a unmarshal function for request bodies like this:```Gofunc decodeRequestBody(t interface{} request http.Request) error { decoder := json.NewDecoder(request.Body) err := decoder.Decode(t) return err}```i know i should avoid using interface{} so should i write a dedicated decoder component instead?
17811;@Jordan Cason you can make the struct have a pointer field with <type>. Then store the address of the value in that field.
17812;e.g. https://play.golang.org/p/Ujcryna97BI
17813;@Kaesebrot using `interface{}` isn't necessarily bad in cases when you actually want to accept any types
17814;so in this case its ok?
17815;It's a feature of Golang so it can be used. Not ignored
17816;I think it's okay but it's a subjective matter.
17817;okay thanks!
17818;np
17819;> P.s. it‚Äôs a bad idea to copy magic values into your source  I don‚Äôt think the library guarantees that their consts won‚Äôt change in updates@andy.xyz in the end i actually referenced it
17820;from the library itself
17821;"```golang window.Connect(""keypressevent func(window gtk.ApplicationWindow ev gdk.Event) { keyEvent := &gdk.EventKey{Event: ev} if keyEvent.KeyVal() == gdk.KEY_Return { window.Hide() // Retrieve text from the entry var err error txt err = entry.GetText() if err != nil { log.Fatalln(""Failed getting text from entry: err) } } })```"
17822;but there's a small issue this seems to just run and not wait for the window to be closed and entry to get the text
17823;so the `txt` is empty when its value needs to be passed
17824;@Dexti thank you
17825;np
17826;@Dexti why did you choose to store the address in the struct rather than value in your playground example?
17827;Because Jordan asked to store the address in a struct.
17828;> Can I save a memory address to some data in a struct?
17829;LOL i converted a script from kotlin to go (it processed ~90,000 lines of CSVs from 5 files and did some mapping and aggregating). It went from 700 ms to ~70 ms
17830;go tends to run faster than the jvm
17831;really? who would've guessed! üò≥ (/s)
17832;@r3velated good job on referencing üôÇ
17833;No idea why text entry fields would relate to window close events though sorry
17834;@andy.xyz you mean you've no idea what's going on there?
17835;i can explain
17836;this is inside a `CreatePopUp()` function that obviously creates a popup
17837;it needs to create a new window so that it's actually a popup
17838;man the way i explain things
17839;so when you hit enter on that entry it's supposed to close that window that's created as a popup not the main window
17840;I am absolutely new to golang
17841;@socrateez nuts welcome
17842;Thank you. I know JS Python and some c#. Am I out of my depth beginning?
17843;No Go is one of the easiest languages to learn üôÇ
17844;I have the feeling you‚Äôre being sarcastic.
17845;No!
17846;I‚Äôm serious
17847;Hm alright then.
17848;In Fyne we find folk who have picked up go snd GUI dev in a day with minimal programming experience
17849;Start at https://tour.golang.org
17850;@r3velated shrug sorry  it likely relates to code outside that snippet
17851;I‚Äôll be sure to give it a look. A friend who appears to be on here pointed me in the direction of here.
17852;@andy.xyz no idea
17853;but it seems as if it just executes that code block and moves on
17854;like with javascript if you don't use async/await xd
17855;there‚Äôs a lot of libs.
17856;is there an opinion on method chaining in go?
17857;i would greatly appreciate some feedback on this:https://play.golang.org/p/D7YDgzMz_Rif there are bad practices please let me know
17858;its hard to handle any errors that occur
17859;since you cant chain if the return is a multiple value
17860;https://dave.cheney.net/2014/10/17/functionaloptionsforfriendlyapis
17861;i will read through this now thank you
17862;does that mean that chaining is almost always a bad idea in go then?
17863;and i should always return an error?
17864;> does that mean that chaining is almost always a bad idea in go then?always is a strong word
17865;its more like there is typically a better way of expressing that idea
17866;> i should always return an error?yes no maybe so
17867;https://dave.cheney.net/2016/04/27/dontjustcheckerrorshandlethemgracefully
17868;alright i have some reading to do it seems
17869;üôÇ
17870;if you just read his whole blog
17871;you will gain a lot lol
17872;but its a lot of reading üòõ
17873;yeah i am unsure how much i would absorb at this stage
17874;In main() I‚Äôm creating context for mongo db I‚Äôm also creating a router := mux.NewRouter()Should I be passing my context through router.HandleFunc for any function that needs access to the mongodb?
17875;Its been mentioned in some youtube tutorials that you could make the context global however I‚Äôve also seen in documentation that you should never store context in a struct.So Im confused to if I should be finding a way to pass the context to the functions my router is executing or store it as a global.
17876;Hey there. Within the urfave/cli/v2 package I can check for NArg() in my Actions. So what I wanna do is print the usage again and os.exit if there is not at least one positional argument there.
17877;Is there some method within the cli context to print the usage page again as if you would just call your application without any commands and parameters?
17878;@Jordan Cason You can use middleware to add Context to a request
17879;Should errors be defined as pointers
17880;like when im creating my error type should it be
17881;( they already are )
17882;uh
17883;`error` is an interface
17884;yeah i know but like when im overriding the error message
17885;um
17886;which has pointerlike semantics
17887;"func (p MyErr) Error() string { return fmt.Sprintf(""ree"")}I"
17888;is what im doing but should it not be
17889;ah
17890;p MyErr
17891;the method receiver
17892;yueah
17893;sorry
17894;nah you're good
17895;so my thinking is that uh
17896;because Error() is not supposed to change anything only read things
17897;I'd say a value receiver would be most correct
17898;But this is something that's incredibly trivial and not worth agonizing over
17899;so
17900;HERES THE THING
17901;uh oh
17902;all of the returning errors we do for some reason i dont understand
17903;is return &myErrors.MyError
17904;So
17905;that's weird
17906;but
17907;it still reads
17908;from Error()
17909;with the value type
17910;reciever
17911;which is mysterious af
17912;yeah
17913;that works
17914;but it doesnt read other methods
17915;interfaces can't specify whether the methods are pointer or value receivers
17916;with the value type reciever as you might expect
17917;i don't think
17918;i've honestly always been a little confused by the dichotomy
17919;Heres an example of what im doing
17920;"```gofunc (p NotFoundError) Error() string { return fmt.Sprintf(""not found"")}func (p NotFoundError) ClientIdentifier() string { return NotFoundError}```"
17921;where not found error is a strig
17922;and the client identifier is
17923;being returned by my middleware
17924;The idea being is we have client friendly error types with canonical error messages
17925;So clients know wtf to do with their UX flows
17926;```func (p NotFoundError) ClientIdentifier() string { return NotFoundError}```
17927;this doesn't make sense tho
17928;Right
17929;so
17930;it won't compile
17931;Oh but it does
17932;because errors aren't strings
17933;unless you did `type NotFoundError string` maybe
17934;they are
17935;constants
17936;it seems
17937;:thonk:
17938;they're just strings that clients use for their UX
17939;but
17940;when i
17941;return a value type for the error
17942;the Error is picked up and ClientIdentifier is not
17943;but when i return the pointer
17944;it does wrap
17945;the Error is picked up and the ClientIdentifier is
17946;where the logic to get the client identifi]er
17947;"```pass Wrap(fun() bruh"")```"
17948;picked up
17949;is handled by some sick asss middleware
17950;what does that mean exactly
17951;which i will now PASTE
17952;"```gogqlSrv.SetErrorPresenter(func(ctx context.Context err error) gqlerror.Error { if err != nil { // Extract the type from the err return &gqlerror.Error{ Message: err.Error(), Path: graphql.GetFieldContext(ctx).Path(), Extensions: map[string]interface{}{ type"": myErrors.ClientSafeIdentifier(err), }, } } return nil```"
17953;so uh
17954;When the method returns the error VALUE type is extracted
17955;even if i send it a pointer to an error
17956;ig
17957;because error is an interface
17958;it doesnt care
17959;right. the error interface ONLY describes Error() method
17960;it doesn't include...whatever else
17961;you'd have to assert the error to your concrete error type
17962;yea
17963;to call ClientIdentifier
17964;OR
17965;Yea
17966;define a new interface
17967;which means i now should go through all these methods
17968;and turn them to value types
17969;gqlerror.TypedError(err error) gqlerror.Error { return err.(gqlerror.Error)}
17970;```gotype myError interface { error GetClientIdentifier() string}```
17971;and then not return the address
17972;```gojson: error calling MarshalJSON for type sheets.ValueRange: json: unsupported value: +Inf```
17973;how wold i be able to figure out where this is coming from
17974;logging would be a good start
17975;if its appending to a spreadhssets with tons of avlues
17976;ah
17977;yes
17978;am i correct that there is a special verb within `fmt.Errorf` that is used for error unwrapping? i seem to remember something like this
17979;remember dividng by zero with floats is Inf
17980;so
17981;you're doing that somewhere
17982;no i don't think so
17983;just wrapping
17984;%w
17985;unwrapping is not something that makes sense in the context of string interpolation
17986;mainly because it\'s done in the context of unwrap this error until you find BaseErrType
17987;if you want unwrapping you might be wanting the uhhhh
17988;> Errorf formats according to a format specifier and returns the string as a value that satisfies error.> > If the format specifier includes a %w verb with an error operand the returned error will implement an Unwrap method returning the operand. It is invalid to include more than one %w verb or to supply it with an operand that does not implement the error interface. The %w verb is otherwise a synonym for %v.
17989;errors.As function
17990;Right
17991;%w wraps a given error with another new one
17992;right now i'm looking at `errors.Wrap` and `errors.Cause`
17993;nvm its errors.Unwrap
17994;that prints out the message you provide
17995;> right now i'm looking at `errors.Wrap` and `errors.Cause`thats not from stdlib
17996;thats from `github.com/pkg/errors`
17997;not `errors`
17998;https://golang.org/pkg/errors/vs https://github.com/pkg/errors
17999;that is confusing
18000;but thank you for catching it
18001;so what _should_ i be looking at?
18002;`Unwrap`?
18003;if you want to unwrap an error yeah that'd be a good start
18004;> %w wraps a given error with another new one@deezy i'm having some trouble visualising this as it is all pretty abstract right now. is there a small example that someone could put together to illustrate it?
18005;"```goimport ( errors"")func main() { err := errors.New(""first message"") err2 := fmt.Errorf(""second message. original: %w err) fmt.Printf(""%#v err2)}```"
18006;https://play.golang.org/p/igxA_7c9gKm
18007;so it is just the string that is being unwrapped?
18008;https://golang.org/src/fmt/errors.go?s=624:674#L7
18009;no it's the error
18010;it reminds me of regex expand
18011;the error is being wrapped and you're adding a human readable message to add context or useful details to the error
18012;ok
18013;i get that
18014;in your playground example (which i found very useful btw!) what would happen if there were a third error?
18015;depends on what that means
18016;"do you mean i call Errorf(""%w"") again""?"
18017;or
18018;"a third error not involved in the first two""?"
18019;[error3[error2[error1]]
18020;try it and see
18021;fun fact
18022;you can modify playground snippets
18023;from what i can tell you can only unwrap one at a time?
18024;Right
18025;that's what As and Is are for generally
18026;before i dive into overthinking this  has it ever been necessary for yourself to unwrap more than one level?
18027;Recursing arbitrarily deep to find out if the type you care about is part of the chain
18028;ah
18029;I suspect that Unwrap probably is very niche
18030;cause you'd have to redo the whole loop As/Is use from scratch in order to effectively safely find whatever you wanted anyways
18031;https://dave.cheney.net/2016/04/27/dontjustcheckerrorshandlethemgracefullyi was linked to this earlier and it suggests unwrapping is the better way to handle errors in go
18032;https://github.com/firstrow/tcp_server/blob/master/tcp_server.go#L30 How would I modify this to read bytes? Suppose I need to create a header system which defines the size of the message?
18033;Issue is that reader.ReadBytes expects a delimiter as well
18034;sure
18035;also `for` without a condition is like a infinite loop. So what would `go somefunction()` mean inside that then? Specifically `go` keyword
18036;"```goif err := values.update(10 10); err != nil { values.show()} else { fmt.Println(err)}```does this syntax mean that `err` will never reach the `else` block?"
18037;it should but you should try it and see
18038;@Akandesh go just launches a goroutine
18039;i am already trying
18040;like normal
18041;```go:::$0:+Inf:$NaN:$0:+Inf:$NaN:$0:+Inf:$NaN:$NaN:+Inf:0:::NaN%:$NaN:P1 hit:0:$0:$0:$0:$0:0:0:```
18042;LOL
18043;time to look up what that is :^)
18044;this is what im outputting
18045;xd
18046;the error isn't reaching the `else` block and i'm scratching my head
18047;generally speaking when the question is i have this literal code snippet does it do what i want? the answer is run it and find out
18048;yeah dawg
18049;your math is fucked
18050;you're not doing any sanity checks
18051;you're dividing by zero all over the place
18052;(pssst: https://discordapp.com/channels/118456055842734083/118456055842734083/744938112760807486)
18053;big embed üò©
18054;yeah that was pointed out millenia ago
18055;ait so go routines are basically creating a new thread so it runs async
18056;out of curiosity is there a way to wait for a go routine to finish?
18057;gotta check that
18058;"```gospreadsheetLogger = log.New(file,""INFO: log.Ldate|log.Ltime) file err = os.OpenFile(""/home/ubuntu/spreadsheet os.O_APPEND|os.O_CREATE|os.O_WRONLY 0666) if err != nil{ fmt.Println(fmt.Sprintf(""could not create spreadsheet log: %v err)) }```"
18059;> out of curiosity is there a way to wait for a go routine to finish?@Akandesh channels
18060;`sync.WaitGroup`
18061;or waitgroup
18062;or channels
18063;also whats the reason for opening the file
18064;after declaring a log file
18065;Alright
18066;uh
18067;pretty sure youopen the file before log.New
18068;sure seems like you're doing it wrong
18069;so here is the toy script i'm working onhttps://play.golang.org/p/5_ReoRxGfIZthe error isn't reaching the `else` block if you want to rip anything else apart please do so but i am concentrating on the error integration at the moment
18070;`gobyexample.com` is such a nice website which more languages had one of these. I suck at reading docs and watching examples really explains shit better for me
18071;@beep that's.... odd lookign stuff
18072;it's just for learning i wouldn't think too deep into it looking odd
18073;i mean
18074;if you learn to do things in a way that looks odd
18075;how do you think that translates to when you\'re actually doing something?
18076;people make this distinction between practice/learning and reality that just doesn't exist
18077;i did say you're welcome to give feedback
18078;there's always room for cutting corners
18079;it's not clear what you trying to do there
18080;that err in the else will be nil
18081;i just see that come up a lot to justify doing things in a weird way that also makes life actively harder
18082;> that err in the else will be nil@stdio why so?
18083;in the name of just doing this real quick
18084;because the IF is about err != nil so the else will be nil
18085;right but the `update()` returns an error
18086;so it should not be nil?
18087;no
18088;that's explicitly what the else branch is for
18089;"if err := update() ; err != nil"
18090;if err is not nill you do ` values.show()`
18091;if `update()` is returning an error the error should not be nil therefore `err != nil` should go into the else block
18092;what
18093;no
18094;that's not how if works
18095;._.
18096;https://play.golang.org/p/xlyp26MML4Y
18097;i'm being stupid
18098;very stupid
18099;"```goif err :=update(); err !=nil {```is the same as```goerr := update()if err !=nil {```"
18100;yep
18101;i'm having a moment
18102;I guess the confusion was about the initialization within if or something
18103;you may now rip me apart on the rest of the code
18104;is there already a named interface that covers both net.Dialer and tls.Dialer esp. wrt the DialContext methods?
18105;wish there was an easy way to search stdlib for interfaces
18106;```gotype ValueProperties struct { last, rolling int}type Values struct { ValueProperties}```is this going to be bad practice for example
18107;one of the very few problems with implicit interfaces
18108;my head is ü§Ø with that comma ü§î
18109;basically is saying last is int and rolling is int right?
18110;yep
18111;i remember this shorthand from the last time i used go at least
18112;it's amazing how much i've forgotten really
18113;can get easily confused with composables
18114;what's a composable?
18115;yeah i usually keep that sorta thing on one line
18116;i mean there's a comma but
18117;```gotype Foo struct { int}```
18118;or what have you
18119;what on earth is that
18120;where you embed a struct in another without a var name
18121;composition
18122;type OneStruct struct { OtherStruct othertype int}
18123;oh `bar` is another type
18124;sorry my brain isn't fully adjusted to thinking in Go yet haha
18125;"```gofunc (v Values) update(a b int) error { v.rolling = a + b + v.last v.last = a + b return nil}func (v Values) show() error { fmt.Printf(""%#v\ v) return nil} ```in these two methods i have one with a pointer since it is modifying a value and the other does not use a pointer since no value is modified  is that the right sort of idea to use?"
18126;I would do like that yes with few exceptions
18127;(like satisfying interfaces..)
18128;to my understanding to satisfy an interface you would pass the pointer variation due to it containing the full set of methods?
18129;not necessarily a pointer
18130;or is this the wrong way to think/approach?
18131;just any type that matches the method set
18132;if you have:```gotype bananer interface{ update(a,b int) error show() error}```
18133;i'm about to play around with interfaces and closures so this is a good segue
18134;you probably should have your methods in same level either (v Values) or (v Values) to be accepted there
18135;oh i see... i think?(v Values) matches this whereas (v Values) does not?```gotype bananerSmaller interface { update(a,b int) error}```
18136;correct
18137;so if i encounter this issue is it usually better to adjust methods adjust the interface or create some sort of facade?
18138;you cannot exactly adjust the interface to accept both Value or Value
18139;but either way interfaces are advisable to be small
18140;I guess you'll see when that comes if that comes
18141;<https://golang.org/doc/faq#methods_on_values_or_pointers>
18142;ooh more reading
18143;> while that of the corresponding pointer type T consists of all methods with receiver T or T
18144;son of a bitch
18145;damnable tiny inconsistencies
18146;> Next is consistency. If some of the methods of the type must have pointer receivers the rest should too so the method set is consistent regardless of how the type is used. See the section on method sets for details.> > For types such as basic types slices and small structs a value receiver is very cheap so unless the semantics of the method requires a pointer a value receiver is efficient and clear.would that mean then that the method set consistency is more important than mixing them for performance on small structs?
18147;performance is nebulous and mercurial
18148;do what's readable maintainable and usable first and then care about performance
18149;preach üôè
18150;using the playground example https://play.golang.org/p/8V0vISYhAiQthis is a small struct so should i rather have a set of `(v Values)` for consistency or mix them?
18151;consistency is going to be more readable and maintanable i'd think
18152;i'd find a bit of advice from more experienced heads helpful here. my instinct is saying to stick with the `(v Values)` for everything since `update()` _needs_ it and that means consistency
18153;> do what's readable maintainable and usable first and then care about performancethis also seems to be hinting at that
18154;usually when i define any method requiring a pointer receiver then i make them all pointer receivers because i'm going to have pointers anyway when using the type
18155;even when performance matters the cost of dereferencing a pointer is far smaller than the cost of allocating the pointer
18156;hey guys why has goland started complaining about string([]byte{}) in 1.15?
18157;What does it say? üôÇ
18158;that I should change to fmt.sprint
18159;also some of my tests are now failing and are returning bytes as a string rather than bytes converted to strings
18160;No functionality changed. `go vet` was updated to warn against `string(int)` but the case that you're talking about shouldn't have seen any additional warnings. You'd have to show a bit of your code or the full warning.
18161;this function for example:```gofunc (c Conn) ReadMessage() (messageType int p []byte err error) { var r io.Reader messageType r err = c.NextReader() if err != nil { return messageType nil err } p err = ioutil.ReadAll(r) return messageType p err}``` string(p) appears to show the bytes as a string rather than the bytes converted to a string
18162;"but `string([]byte(""hello""))` returns hello"
18163;Where does it appear to show that? How are you formatting the output?
18164;"`t.Errorf(""Expected %v got %v string(p) string([]byte(""hello"")))`"
18165;if you use `%s` instead of `%v` then you don't need to convert to string
18166;goland is probably trying to complain about that
18167;but it really doesn't matter
18168;am I not allowed to open a local file using the file protocol with a web server?
18169;it's a web server not a file server
18170;you can ask it to serve a local file but it'd be over http
18171;so if I am trying to link to a script file in my html file do I have to make a request to my web server and get it that way?
18172;"```go _ msg err := funnel.WSConn.ReadMessage() if err != nil { t.Errorf(err.Error()) } else if string(msg) != string(sendMsg) { t.Errorf(""Expected %v got %v sendMsg msg) }```"
18173;here is a better example
18174;"`sendMsg := []byte(""hello"")`"
18175;I get the error: `Expected hello got [91 49 48 52 32 49 48 49 32 49 48 56 32 49 48 56 32 49 49 49 93]`
18176;you want %s not %v
18177;oh hol on a sec
18178;what does `%v` take?
18179;@Akandesh everything
18180;sicc
18181;@ohnny ok yes do %s
18182;then youll see what it actually is
18183;https://discordapp.com/channels/118456055842734083/118456055842734083/745668633551831069
18184;as zeph very helpfully said just a few seconds ago
18185;Expected hello got [104 101 108 108 111]
18186;üòõ
18187;it is because I replaced string with `fmt.Sprint`
18188;in a function
18189;ü§¶
18190;mate
18191;in t.Errorf
18192;you want %s
18193;yeah I did that
18194;and got `Expected hello got [104 101 108 108 111]`
18195;then you wouldnt have gotten [104 101 108 108 111] if you passed in a byte slice
18196;https://play.golang.org/p/ZhyvPbGLwxl
18197;no I did because of `fmt.Sprint`
18198;which does not turn bytes into a string it just represents the bytes as a string
18199;...if you use `%v`.
18200;^
18201;If you use `%s` it converts into a string.
18202;string
18203;string representation
18204;I think you will understand what I am trying to say if you convert `[91 49 48 52 32 49 48 49 32 49 48 56 32 49 48 56 32 49 49 49 93]` into a string
18205;if you pass a byte slice to fmt.Sprintf with %s itll return the string value of those bytes
18206;it returns `[104 101 108 108 111]` as a string not as bytes üôÇ
18207;@zephyrtronium thank you for the advice earlier
18208;johnny will you listen to us
18209;https://play.golang.org/p/B9HQ5mHXnMM
18210;look at this
18211;> if you pass a byte slice to fmt.Sprintf with %s itll return the string value of those bytes@Str≈ìm exactly I am an idiot!
18212;I didn't do that
18213;we know
18214;not from any code you showed us of course üëÄ
18215;Can I do `binary.BigEndian.Uint32(header_buf)` to convert a 4 byte `[]byte` into a int value?
18216;That's precisely what it's there for yes
18217;damnit
18218;expected 5
18219;got `Read header: 83886080`
18220;"```go// Read client data from channelfunc (c Client) listen() { c.Server.onNewClientCallback(c) reader := bufio.NewReader(c.conn) for { header_buf := make([]byte 4) if _ err := io.ReadFull(reader header_buf); err != nil { c.conn.Close() c.Server.onClientConnectionClosed(c err) return } fmt.Println(""Read header:  binary.BigEndian.Uint32(header_buf)) data_buf := make([]byte binary.BigEndian.Uint32(header_buf)) if _ err := io.ReadFull(reader data_buf); err != nil { c.conn.Close() c.Server.onClientConnectionClosed(c err) return } c.Server.onNewMessage(c data_buf) }}```"
18221;Are you sure your data is big endian?
18222;no :)
18223;That number is precisely what you get if you send in little endian and extract big endian
18224;`2^24 + 2^26 = 83886080`
18225;how did you know that
18226;Well I just had a hunch and pulled out my calculator üòÑ
18227;2^24 for the 1s bit and 2^26 for the 4s bit
18228;The offset by 24 is the threebyte difference between the position of the first byte of a 4byte number between little and big endian
18229;None
18230;ok i tested and it turns out im using little :^)
18231;oh wow
18232;I was actually using LittleEndian in the code I copied from
18233;Just by convention anything that goes over the network is typically big endian
18234;then I must've accidentally used big
18235;```Client connectedRead header: 5Recieved hello```
18236;That's just a convention but if you want any type of interoperability with anything else you'll have others quite confused if you're sending little endian data over the wire üòõ
18237;woop
18238;Yeah that's interesting
18239;sounds like I need to learn more about that
18240;what the standard is who uses this standard why etc
18241;back to computerphile we go
18242;"```gowheere dose race condition come from `func main() { var wg sync.WaitGroup for i := 0; i < 3; i++ { // wg.Add wg.Add(1) go func(x int wg sync.WaitGroup) { defer wg.Done() fmt.Println(x) }(i wg) } wg.Wait()```}`"
18243;there is a race condition?
18244;you're copying `wg` instead of passing a pointer to it
18245;I guess yea it would never actually count as done
18246;although I never write routines like this but
18247;yeah you don't need the wg arg to begin with
18248;I wanna go big endian but too stupid to understand how it'd be done so ima stay little ü¶Ä
18249;Gamedev framework/library for Go looking to use Go both for the client and the server
18250;Any recommendations/ thoughts?
18251;Father Doad is your doad
18252;if it's 2d use ebiten for your client
18253;2d yeah
18254;I'm not sure about the clientserver structure itself I recall seeing a few libs out there before
18255;I'll do some more research but thanks for the Ebiten seems really cool
18256;no prob :)
18257;i have a problem
18258;when using go get
18259;```# github.com/veandco/gosdl2/sdlIn file included from go\\src\\github.com\\veandco\\gosdl2\\sdl\\audio.go:4:./sdl_wrapper.h:2:11: fatal error: SDL2/SDL.h: No such file or directory 2 | #include <SDL2/SDL.h> | ^~~~~~~~~~~~compilation terminated.```
18260;i get this error
18261;when trying to install https://github.com/SolarLune/resolv
18262;any help?
18263;You don't have SDL2 installed
18264;Windows or Linux?
18265;windows
18266;where do i install sdl2?
18267;Let me dig up what I used
18268;https://github.com/veandco/gosdl2#installation
18269;Scroll up a tiny bit
18270;there's a guide for Windows installation
18271;None
18272;im lost
18273;That's what you need to do in order to get SDL working
18274;That's the package it's using but it needs the header files/etc to be able to compile
18275;i have no clue what to do
18276;mfw windows
18277;??
18278;Not sure what's not clear about the instructions on that page for the library that's throwing the error
18279;i am so lost here
18280;```gofor i := range placeValue{ v.SpreadSheetList = append(v.SpreadSheetList[:i],v.SpreadSheetList[i+1:]...) }```
18281;i keep getting slice bounds out of range[2:1]
18282;once youre at i == len(placeValue)1 i+1 is out of bounds
18283;those lists aren't even the same
18284;yea ik
18285;was providing
18286;more code onesec
18287;if you keep removing and placevalue is 100
18288;that SpreadSheetList might be long gone below 100
18289;```gofor i := range v.SpreadSheetList{ if currentPrice < v.SpreadSheetList[i].stop{  placeValue = append(placeValue,i) if currentPrice > v.SpreadSheetList[i].sell{  placeValue = append(placeValue,i)} for i := range placeValue{ v.SpreadSheetList = append(v.SpreadSheetList[:i],v.SpreadSheetList[i+1:]...) }} ```
18290;more like this
18291;as long as len(spreadhseetlist) > 0
18292;then the first for loops start
18293;`for i := range placeValue` gives you the index of placevalue
18294;`for _ i := range placeValue` gives you the item
18295;how do i connect files?
18296;like link them?
18297;oh
18298;wait a second
18299;although I would do:
18300;mhm?
18301;i had some logic trouble here
18302;"```gofor i := len(placeValue) 1; i>=0;i { j := placevalue[i] v.SpreadSheetList = append(v.SpreadSheetList[:j] v.SpreadSheetList[j+1:]...)}```"
18303;Xbloos's cogs are turning. Let them spin :)
18304;why reverse? cause you better off removing last things first so the first things index are still the same
18305;since placeValue seems sorted index from the first loop
18306;if PlaceValue is [2,5] you if you remove the 2 first the 5 is no longer 5
18307;while if you remove 5 first 2 is still 2
18308;ohhhhhhhh
18309;so thats why the indexes
18310;keep messing up
18311;that would fix out of range too since if you have a list of 10 items and you remove [1,10] the after item removal 10 is out of bounds since last one is 9 now
18312;ohhhhhhh
18313;so even if u have just 2
18314;if u remove the first one
18315;the index of the second one becomes out of bounds
18316;since there is only 1 thing left
18317;and the j+1 works even if there is no index for it
18318;because its saying taht if there is stuff there
18319;append that as well?
18320;well you can check for 1 item but if it works is due to cap
18321;"https://play.golang.org/p/k7EF3J_R3Lh visual thing of what;s doing"
18322;is there an easy way to distinguish between ipv4 and ipv6 formats in golang?
18323;"how do i connect player.go to main.go (i misspelled test and player.go is in another package called Player"")"
18324;@Deleted User if you're coming from a string `net.ParseIP` will return you the IP
18325;"If `ip.To4` returns nonnil it's an IPv4 address; if it returns nil it's IPv6"
18326;"(note that the same cannot be said about `To16`; `To16` will always return nonnil for any valid IP address even for IPv4 addresses)"
18327;does `http.Request.RemoteAddr` always return ipv6?
18328;because in that case I could just skip the check
18329;Nope. It's the string representation of `IP:port`. For IPv4 that's `A.B.C.D:port`.
18330;for me it is returning ipv6
18331;the address in square brackets and the port right after
18332;You could be using an IPv4mapped IPv6 address.
18333;(or just IPv6 :p)
18334;is it the client that is responsible for that then?
18335;The client chooses whether to use IPv4 or IPv6 sure.
18336;chooses as in they\'re bound by the support that they have
18337;also I am confused is the ip address of the client included in the header? because in that case couldn't they make it so that the server sends the response to another random ip?
18338;They could yes. ISPs usually stop that though.
18339;@other You import the package
18340;like any other package
18341;but importing automatically looks in my C:\\users\\me\\go\\src
18342;how though? do they just check the address of who you sent requests to and who you got it back from? (also in that case can't it still be cheated?)
18343;are you using go modules?
18344;If not you should
18345;They can check that the source address on your outbound packets match up with the address they know you have (or perhaps a subnet that they know it should be coming from depending on how granular their controls are).
18346;all hail ip
18347;yeah but if you know what address they sent the request to you can set your address as that address
18348;probably would be very complicated but still
18349;"Who is they""?"
18350;"And you""?"
18351;"> Who is they""?the ip that you are trying to redirect the request to"
18352;What
18353;ok hold on
18354;You can only fake your traffic on computers you own
18355;So you can craft a fake packet with a fake return address and send it to your router. who will forward to your ISP. Somehwere along the line the faking stops
18356;If your ISP sees that your outgoing packet doesnt have your IP as the source IP they could drop it
18357;if person A sends a request to address `1.2.3.4` can't person B send stuff back to person A with their address as `1.2.3.4`
18358;idk too much about networking and should probably read up on it more
18359;Who is their
18360;> So you can craft a fake packet with a fake return address and send it to your router. who will forward to your ISP. Somehwere along the line the faking stopshm ok
18361;yeah it sounds like you're overthinking very very specific technical things you don't know the details of
18362;which isn't a dunk on you
18363;yeah do you know where I can learn more about this stuff
18364;you're on the right track and these sorts of forgeries are largely handled
18365;wikipedia would be a good start
18366;I think the original instinct was good‚Äîthe address does get sent in the IP header so it feasibly can be faked.
18367;learn about IP
18368;and then TCP/UDP
18369;It's just that there are realworld safeguards against that type of attack already. üôÇ
18370;ill try but reading through wikipedia to learn stuff is a pain
18371;i mean you've got the technical terminology
18372;Wait what's there to learn abt IP
18373;you can google tcp from scratch or ip 101 or tcp ip tutorial
18374;whatever keywords work for you
18375;Lol I just went straight to tcp and websockets
18376;IP is a different layer to TCP
18377;well you don't have to understand the OSI stack to use chrome
18378;abstractions
18379;Oh cool
18380;TCP is an abstraction over IP
18381;Ill learn it just not yet. I'm making other clients tho but first browser
18382;"> you can google tcp from scratch or ip 101 or tcp ip tutorial""@deezy I really liked the way you gave personalised recommendation based on what exact term to search in google. Very few great people do that!"
18383;Wait what will I use instead of websockets when it goes native
18384;i just listed out synonyms for tutorial/guide
18385;Wat
18386;¬Ø\\_(„ÉÑ)_/¬Ø
18387;it's a pretty simple formula
18388;how do i <technology> <task>
18389;how do I golang https get request
18390;Tru lol brb
18391;what is TCP
18392;and yeah what is <topic>
18393;those are pretty much all you need
18394;Yes sir
18395;you just have to practice your vocabulary
18396;TCP bloat i use IP layer :boomer:
18397;usually the problem with wikipedia is that one thing leads to another and then you find yourself in this endless loop and never learn anything
18398;at least for me
18399;Tru
18400;Like what's x. Oh x led to y what's that
18401;ye if they just removed the hyperlinks I would be more productive
18402;Haha
18403;Oo let's make a chrome extension that does that :))
18404;off of like every second word
18405;> Oo let's make a chrome extension that does that :))sounds fun
18406;Or what if it resolved the hyperlink witha shortened answer on a hover event
18407;Google already highlights what‚Äôs needed to read in webpages and wiki as well
18408;that's a feature now
18409;it'll show a preview of the links
18410;Oh haha
18411;Haven't used in a while
18412;> Or what if it resolved the hyperlink witha shortened answer on a hover eventi think wikipedia already does that
18413;ye
18414;So u guys have any interesting projects to show off
18415;:P
18416;Lols
18417;im a wagie now
18418;No time for projects
18419;:boomer:
18420;Whoa nice
18421;welcome to the capitalist meat grinder comrade
18422;Tru
18423;like this is what im talking about lmao
18424;#aboveminumumwageatlast
18425;"> Like what\'s x. Oh x led to y what\'s that""A monad is a monoid in the category of endofunctors"
18426;yeah there's a lot
18427;gloss over it
18428;just finish the paragraph
18429;bare minimum
18430;read some Cloudflare blog post lul
18431;CF blog posts are ridiculously good
18432;You making 13 and hour :RarePoseidon: Other imployer hiring for 12 :HOESMAD:
18433;Me making 0 üíÄ
18434;Lols
18435;Cloudflair world is completely new to me. All I‚Äôve seen is it oervents ddos attack and checks the browser. I‚Äôm a noob but willing to learn
18436;Haha ya
18437;it basically routes all traffic over to their servers
18438;cloudflare does a million things
18439;whether that's good or bad depends on what you want
18440;I should check it out
18441;so they have a very diverse set of problems they write about
18442;Cuz my mmo I'm making won't have a super secure backend right away
18443;btw CF DNS is great
18444;fastest I've ever used
18445;well sometimes they're down
18446;like last month lol
18447;Cloudflare use hashi nomad
18448;Exciting
18449;@_diamondburned_ you should check it out id liken it to distributed systemd perhaps
18450;@stdio thank u for ur playground code. a visual was amazing to look at.
18451;for simplicity would it be best to do
18452;"```gofor _ i := len(placeValue)  1; i >= 0; i { v.SpreadSheetList = append(v.SpreadSheetList[:i],v.SpreadSheetList[i+1:]...) }```"
18453;placevalue[i]
18454;What have i read
18455;cloudflare is unlikely to prevent interesting exploits
18456;len doesnt return two things @xblooos
18457;So you cant do _ i
18458;Tru
18459;thinking of range?
18460;mhm
18461;was thinking of rang
18462;range
18463;ope
18464;shoot now im confused LOL
18465;since its i
18466;BANG
18467;i would need to do
18468;placevalue[i]
18469;Bro i feel very dumn
18470;i have nitro
18471;but cant boost any server?
18472;i have an unused boost üëÄ
18473;"is this a valid way to check if a request to a web server was made by the web server itself (is there an easier way to do this)?```go// checkServer checks if an ip address is the ip address of the serverfunc checkServer(ip string) bool { if strings.Index(ip ]"") != 1 { // IPv6 if ip[:strings.Index(ip ]"")] != [::1 { return false } return true } else if strings.Index(ip :"") != 1 { // IPv4 if ip[:strings.Index(ip :"")] != 127.0.0.1 { return false } return true } // Incorrect return false}```"
18474;basically checking for localhost
18475;and chopping the port off the address
18476;https://golang.org/pkg/net/#IP.IsLoopback
18477;yeah but I would still have to remove the brackets around the address if its v6 and the port
18478;https://golang.org/pkg/net/#SplitHostPort
18479;`ParseIP` is okay with the brackets for IPv6
18480;Actually...that's a lie but `SplitHostPort` doesn't include them
18481;ah ok cool
18482;thanks
18483;If you're ever parsing widespread standardized structures there's probably something in the standard library for it. üôÇ
18484;is anyone around?
18485;https://play.golang.org/p/U_nhiSpnVq_Dthis is a progressive WIP so it's ugly.in the interface `ValueUpdater` say I only want an interface that is specific to updating these values how would i go about that? since at the moment the `update()` method is very generic
18486;if i am thinking about this incorrectly i'd appreciate a push in the right direction
18487;if anyone does respond please ping me so i catch it
18488;@beepsandboops i don't quite understand the purpose of this
18489;there is no purpose it is just for learning
18490;could you go into it a bit more
18491;as in it looks like you've done what you described already so i'm not sure if i'm missing something
18492;if another struct existed with the same `update()` method it would pass the contract
18493;i'm interested to know if there's a way to refactor this so as only `Values` would be pass a contract```gotype IncorrectValues struct {}func (i IncorrectValues) update(a b int) error { fmt.Println(a,b) return nil}```the `update()` method here has the same signature but incorrect behaviour
18494;does that make sense?
18495;i am probably horrible at trying to explain myself
18496;There's no point to an interface if only one type can satisfy it.
18497;Just use the type.
18498;oh i see what you're saying
18499;the answer is no there's no way to make a contract on the behavior
18500;the only way you can catch it is via conformance testing
18501;so does that mean interfaces with one method are bad?
18502;not necessarily
18503;No
18504;Interfaces should have as few methods as possible
18505;It means that a) method/interface names should be simple and obvious
18506;And unambigous (MarshalJSON not just Marshal)
18507;I've seen interfaces that have unexported methods just so only types from its package can satisfy it
18508;i think you can think of an interface instead as something for other things to plug into
18509;I find that dumb
18510;but some people do that
18511;there's no contract on its behavior but there is a contract of what things you can do with it
18512;And b) if there is any ambiguity at all types should specify what interfaces they implement in docs
18513;like e.g. if i had a `Chat` interface and the structs e.g. `Discord` and `Slack` both implemented it
18514;there's no guarantee on the behavior but i can interchange them wherever `Chat` is expected
18515;if that makes sense
18516;sort of
18517;@_diamondburned_ The stdandrd library does that in places
18518;if you want something to be substitutable for something else use an interface
18519;Like go/ast
18520;yeah never used that package before so not sure
18521;Makes sense if you want to limit all implementations
18522;i think it's a way of implementing closed union types but it's a bit kludgy
18523;So you can safely switch over the types
18524;imo a default can otherwise panic if there are more than what's expected
18525;Sure
18526;"maybe the team will add things into go/ast; maybe someone wants to extend it in their own project"
18527;having an unexported method just feels like a dumb restriction
18528;in the playground i posted  is there a reason why i would want to pass the interface into the function with a pointer? i'm trying to get myself thinking the right way
18529;for go/ast not really because there's nothing to extend
18530;you're not going to be extending the syntax of the language
18531;@beepsandboops which function and which pointer?
18532;```gotype Updater interface { update(a b int) error}func UpdateValues(u Updater a b int) { u.update(a b)}```something like this
18533;would `u Updater` ever make sense?
18534;no interfaces are pointers
18535;extremely rarely
18536;well maybe if you were planning to change the value of what u is pointing to
18537;^
18538;but that's super rare
18539;you'd change the interface inside the function?
18540;> you're not going to be extending the syntax of the languagecan't be too confident
18541;> well maybe if you were planning to change the value of what u is pointing toin reference to this
18542;```gotype Foo interface {}type bar struct {}func test(f Foo) { f = bar{}}var f Footest(&f)```
18543;and if you do you extend go/ast
18544;not in an external package
18545;it's super contrived and unlikely
18546;that kind of seems like a code smell?
18547;Because the functions need to know all node types etc.
18548;or is it something you'd do for monkey patching?
18549;So you can't extend it anywhere else anyway
18550;Makes sense imo
18551;@beepsandboops It's extremely situational
18552;Most of the time it's bad
18553;i think if you approach it from the algebraic data type perspective having it be closed in go/ast makes sense
18554;because then you know the functions in go/ast can be total
18555;is there anything in the stdlib that helps with partials?
18556;similar to python has
18557;partials?
18558;partials?
18559;oh like partial application?
18560;a partial function
18561;yea
18562;no :(
18563;are they particularly difficult to do in go?
18564;i'm tempted to try that
18565;you'll just have to write it by hand
18566;but lack of generics means you can't really write a generic one
18567;yeah
18568;go2 will feel like a new language
18569;what's a partial function?
18570;something like
18571;```govar foo func(x int y int) intbar := partial(foo 1) // has type func (y int) int bar(2) will call foo(1 2)```
18572;`val := Add10(20)`
18573;Oh I see
18574;Well you can just write a closure for that no?
18575;i think even with go2 generics you can't do it easily
18576;closures are involved yeah
18577;because of a variable number of arguments
18578;```gobar := func(y int) int { return foo(1 y) }```
18579;A little more verbose but works just as well
18580;https://play.golang.org/p/AZMbDcVKQTocould you help debug this
18581;> too many arguments to return> have (func(int) error)> want ()i'm having trouble understanding that lol
18582;```goupdateWith := func(u Updater a int) func(int) error { return func(b int) error { return u.update(a b) } }```
18583;your function type signature needs the return type of the thing you are returning
18584;aha!
18585;thank you
18586;np
18587;yeah it makes sense now you point it out
18588;üôÇ
18589;alright enough Go for me today
18590;thank you everyone i learnt a lot
18591;:gopher: to bed
18592;thoughts on `map` becoming `type map[type T U] ...` with the new generics system?
18593;so you'd make a `map[string int]` instead of a `map[string]int`
18594;and it would actually allow the map type to be properly defined
18595;unreasonable breakage for minimal gain imo
18596;"go2 doesn't have compatibility guarantees ;)"
18597;maps are already generic
18598;that's the fun thing
18599;well yeah but if they were a proper type and not compiler magic
18600;just not in a way that's gracefully extensible to any other part of the language
18601;yeah like diamond said changing the map API would offer little value
18602;It'd probably make more sense to update the existing mechanisms to use the new generics framework under the hood
18603;meh fair enough
18604;"> go2 doesn't have compatibility guarantees ;)probably more of a reason for me to change to another language when Go 2 comes out"
18605;I mean within go2 I'm sure it does
18606;I don't see a lot of good reasons to stay with Go once 2 comes out tbh
18607;especially when it's unclear what will happen to Go 1 code
18608;yeah actually
18609;shit
18610;there's a go2 playground somewhere
18611;can't remember the link
18612;https://go2goplay.golang.org/
18613;there's not a tour yet as far as I'm aware
18614;everything's just prototyping at this point really
18615;imo just stick to 1 and forget about 2
18616;~~when things actually come out and break old code just move to another language like me~~
18617;@_diamondburned_ I expect there will be support for 1 for a while but they'll probably do everything they can to avoid a python2 fiasco lol
18618;weird why did they switch to square brackets
18619;or support both
18620;I mean if a Go 2 were to have breaking changes from 1 then there's an expiry date to 1 code like deezy said
18621;or ???
18622;and I really don't like that
18623;i think the thing with py2 to py3 was the huge unicode string semantics change that can't be automated
18624;@weenie they're switching to square it's just not the default in go2go yet
18625;if it's just syntactic it can probably be mechanical
18626;@superloach ah cool
18627;the parentheses were always weird to me as type parameters
18628;and yeah a lot of stuff like this can be `go fix`ed
18629;yeah i'd bet a dollar gofmt or govet will have an autofix flag
18630;or yknow `go fix`
18631;don't see why `gofmt` or `go vet` would need a flag for that lol
18632;i think if it's just syntactical stuff people won't be too upsetti spaghetti
18633;since the py3 thing required a lot of manual effort
18634;right
18635;is `go fix` already a thing?
18636;yes
18637;as someone who keeps having to convert code to py3 at work
18638;oh nice
18639;big if
18640;from what I've seen go fix is only used for small changes between nonmajor version bumps
18641;also go 2 would invalidate a lot of dependencies for a short or long time depending on how well that dependency is maintained
18642;hm does `go fix` not recurse
18643;im a weenie i just want generics already
18644;same
18645;i have a CRUD route I wanna make for like 6 different types and generics would make it a nobrainer
18646;but instead i'm googling around wtf do I do
18647;https://github.com/golang/go/issues/29003 hot take support an actual linter and use it on go sources
18648;`gofmt` and `go vet` are cool but support for a full linter like `golangcilint` would be great
18649;unrelated what should I do when a field would be logically named `string`? because I don't wanna get in the way of `String() string` and I can't use `string` of course
18650;`s` or `str` are pretty natural choices
18651;If you look at the `strings` package just about every parameter name is `s`
18652;what's String() gonna do?
18653;return .String otherwise?
18654;satisfy `fmt.Stringer`
18655;no the method's body
18656;well yeah it'll just be returning that field
18657;hey y'all  so i'm trying to figure out how to model a paradigm here in goi'm writing a websocket gateway in go which handles clients and sends them off to node. to send them to node i'm using an internal websocket connection from the node server to the go program. each incoming client will be verified through this and if the connection to the verifier server dies i want to kill all the existing connections with clients.right now i'm at the part where i'm waiting to receive a response from the verifier server. i want to write a function which will return an error if the the go routine receiving messages from the verifier server receives an error otherwise it will send a boolean representing if a client could be verified. below is the related code to receiving the responsehttps://paste.mod.gg/ogihopizas.gomy question is how can i represent this in go accurately? i'm kinda new so i don't know exactly what to do. attached is a diagram of the thing i want to create just for reference so it's easier to wrap your head around what i'm doing but i'm not concerned with the other parts right now.also incase some part of the code isn't clear this is the full code of what i've written thus far incase it aids in answering this <https://paste.mod.gg/yedesawade.go>
18658;how do i make ascii art with ansii terminal code colors? is there a website? or is it a skill?
18659;bruh
18660;gogole
18661;xd
18662;@SirJosh what part are you having trouble with? You seem to have a pretty good start to what you're describing üôÇ
18663;> bruh@deezy i tried google this time üòÑ i want it with ansii color i already have the ascii art
18664;so type
18665;ansi color codes
18666;yeah
18667;google ansi color codes
18668;and insert them in your art
18669;already did
18670;here ! i will show an example bro
18671;but its hard to make it look good
18672;so the current problem with the verifier code is that even if i add a waitGroup.Wait() i think i'll be leaking goroutines right?
18673;Okay well how do I x and i did x y z and it\'s not behaving the way i expected are two WILDLY different questions
18674;and this is #offtopic now that i think about it
18675;@xXREDSTONEXx what do you mean its hard to make it look good?
18676;trying to do the ussr flag
18677;so do
18678;\\033[31m
18679;i have never done this before
18680;or just the 31m
18681;so its hard to make it look good
18682;i might be wrong but this is for text
18683;yes
18684;@SirJosh is the point of the second goroutine only to return false in the case that `alive` dies before the verification happens?
18685;yes except it's to return an error that the verifier server died
18686;if the verifier server dies the verification can never happen
18687;Sure. I don't think you really need either goroutine here.
18688;how could i best write this?
18689;"Converting the `alive` `WaitGroup` into a channel would allow you to use a `select` statement; this would allow you to block on both channels and consume the one that sends (or closes) first."
18690;i'll look into using select haven't haerd of it before
18691;that sounds like what i was trying to do but couldn't find a way to do it
18692;thank you!
18693;The tour is always a good place to start. üôÇ https://tour.golang.org/concurrency/5
18694;is `string[offset:offset+length]` the correct way to slice a string based on length and offset?
18695;@Carson whilst searching for a way to convert a waitgroup into a channel to use in a select statement i was wondering if you knew of any simple idiomatic ways to do so?i found this stackoverflow post and if all else i'll probably do what this answer says since it seems to be what i need <https://stackoverflow.com/a/61186832/3780113>
18696;Why are you currently using a `WaitGroup`?
18697;I don't mean to put you on the spot or anything but thinking about that might expose some ways to make it cleaner üôÇ
18698;i can\'t use a channel because there will be multiple clients waiting for a response and if i send a single message on a channel saying hey the verifier serve died one goroutine will pull it from the channel and the other goroutines waiting for a death message won\'t get one
18699;so i figured i'd use waitgroups as i can signal it and then all the clients waiting verification can react to it
18700;Sure then just close the channel
18701;oh you're right
18702;lmao thank you
18703;That was that (or closes) in my original message
18704;üòÑ
18705;didn't see that thanks!
18706;what's the latest standard to handle errors? if err != nil is too much in my code
18707;that's it
18708;you get used to it
18709;sanity = nil
18710;if err != nil is filling up most of your code then it's probably time to abstract it
18711;i'm trying to go back and redo the tour of go on channels to understand them more and ran into something thats throwing me off
18712;making a simple IIFE to print values of a channel breaks something that works without the IIFE wrapper
18713;```for i:= range c{ fmt.Println(i) }```
18714;works but
18715;```go func(){ for i:= range c{ fmt.Println(i) } }()```
18716;doesnt print anything
18717;thoughts?
18718;main exits before?
18719;need more sample code
18720;```func main() { t := tree.New(1) c := make(chan int) go Walk(t c) for i := range c { fmt.Println(i) }}```
18721;```func Walk(t tree.Tree ch chan int) { q := []tree.Tree{t} for len(q) > 0 { node := q[0] q = q[1:] ch < node.Value if node.Right != nil { q = append(q node.Right) } if node.Left != nil { q = append(q node.Left) } }}```
18722;so the only thing that changes is that range in main. its either just that loop or the iife
18723;```gofunc main() { t := tree.New(1) c := make(chan int) go Walk(t c) exitChan := make(chan int) go func() { for i := range c { fmt.Println(i) } close(exitChan) }() < exitChan}```
18724;so whats going on there exactly?
18725;i think i would have caught that if i got a panic but it doesnt panic or anything it just doesnt do anything
18726;your app is probably exiting even before that go routine started
18727;with that it waits for that chan to be closed
18728;which is after the range
18729;i want to say why but that feels too vague lol
18730;func main is over.. app bye bye
18731;i mean i get that
18732;but what prevents it from ending early without the iffe
18733;or what does opening up that other channel do to prevent it from closing ?
18734;had to google iffe ü§î
18735;iife
18736;that `< exitChan` is waiting for something
18737;so main will wait until something writes to existChan or closes
18738;(didn't know what iife the same)
18739;i know now
18740;i guess its a js thing sorry
18741;hm okay
18742;why isnt the c chan waiting for something though?
18743;it is but you did it inside a routine
18744;that routine goes into background
18745;ahhh
18746;okay got it
18747;that makes a lot of sense
18748;thanks!
18749;that kind makes that concurrency is not parallelism talk click even more
18750;ü§î
18751;jesus im tired
18752;there lol
18753;thoughts mashing together
18754;when is the right time to use `string` vs `string`?
18755;from my experience with other languages `string` has always been a reference that points somewhere else in memory. for example `String` in rust simply has a `Vec<u8>` backing it and that Vec basically has a length field capacity field and a pointer to data on the heap
18756;so in go how do these two compare?
18757;strings are consts
18758;I haven't seen much string around
18759;strings when optional
18760;https://dhdersch.github.io/golang/2016/01/23/golangwhentousestringpointers.html
18761;`SELECT file FROM uploads WHERE type = ? AND verified = 1 AND file = (SELECT file FROM ignore) ORDER BY RAND() LIMIT ?`
18762;this valid sql syntax?
18763;ignore is a temporary table created in the session
18764;is it?
18765;OH wait
18766;forgot the not in
18767;also dont tell me to test it and point the question back at me
18768;alot of unwritten code to make this work
18769;why not? run the query and see if it works
18770;if it's invalid syntax your db will tell you so
18771;"it says this syntax is wrong `CREATE TEMPORARY TABLE ignore (file TEXT);`"
18772;but it follows documentation so
18773;:ANIthink:
18774;yeah that...seems fine
18775;"`20200819 23:31:15] [42000][1064] You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ignore (file TEXT) at line 1`"
18776;i'm not personally familiar with TEMPORARY or whatever db that uses it but
18777;seems fine
18778;ahh
18779;temporary is a hidden table created for that session only gets deleted automatically on exit
18780;session?
18781;mainly for large queries that go over the query string limit
18782;are you in a tx?
18783;yep
18784;this is just an error with making the actual temp table
18785;https://i.kawaii.sh/gRU55Zt.png
18786;https://i.kawaii.sh/nkQ64r2.png
18787;this should work huh?
18788;honestly never seen subquery like that
18789;Have you tried another name
18790;I've seen joins
18791;yep
18792;the error is on line 1
18793;when i split it
18794;"```[20200819 23:33:52] [42000][1064] You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ignore ([20200819 23:33:52] file TEXT[20200819 23:33:52] ) at line 1```"
18795;hm
18796;it doesnt like the name but the name is valid
18797;i can change it
18798;wait now it works
18799;ok what the hell
18800;its working half the time
18801;`ignore` seems like a prime candidate for a keyword
18802;yeah mysql is pretty stinky
18803;i bet it wouldn't namespace things to prevent keyword collisions
18804;cool learned that subquery
18805;ok works apparently last time i edited it it didnt save and gave error
18806;:5_bugcatstare:
18807;im doing it because i need a large NOT IN statement
18808;that goes well over the 2048 char limit
18809;so im just chunking it into the temp table and joining them
18810;didn't someone mention INSERT IGNORE?
18811;aren't window funcs for that too?
18812;window func?
18813;https://dev.mysql.com/doc/refman/8.0/en/windowfunctions.html
18814;i dont think so
18815;the main issue is the query string becomes bigger than the limit that the db sets
18816;im inserting them chunked into the temp table and doing a join comparison
18817;do i still need to close the rows session if im in a transaction?
18818;yeah
18819;wait a transaction is a session itself so its two sessions right?
18820;i mean i'm not sure but do it for the sake of being careful
18821;:ANIthink: weird unless query actually keeps a session open with a temporary table full of data or... whydoes query actually need to have its own session
18822;maybe so it doesnt just load a massive chunk of data into the server memory and iterates with its own session
18823;or something
18824;that would make sense
18825;people have 80tb dbs sometimes
18826;companies
18827;so apparently global tables arent a thing in sql/pstgres
18828;so ok what i need to do
18829;is make a table or something that can store a list for each db session/tx
18830;that no other sessions can see or interact with
18831;and gets deleted at end of session
18832;`invite.slack.golangbridge.org sent an invalid response.` any alternative way to join gophers slack?
18833;how do you match everything between characters including newlines?
18834;i'm using regexp
18835;got something liket his
18836;"```<script type=""text/javascript""> var a = function() {return 1}; var b = function() {return a() + 1}; var c = function() {return b() + 1};</script>```"
18837;"`<script type=""text/javascript"">(.)</script>` this obviously only matches if it\'s on one line"
18838;"is there something easier than using something like `[azAZ09()+{};=\]`?"
18839;uh oh
18840;it's regex parsing html
18841;:kms:
18842;use `[\\s\\S]+`
18843;there's probably a better way
18844;works
18845;yeah that's good enough
18846;thanks
18847;i did find that as an answer but i tried combining it with `.` üòÜ
18848;\\s and \\S are opposites of eachother so it should cover everything
18849;you should use a proper HTML crawler though
18850;like goquery
18851;"`script[type=""text/javascript""]` will get you the JS block"
18852;ooh
18853;i didn't know it can catch script blocks
18854;i am using goquery for returning html
18855;actually
18856;maybee i'm dumb
18857;well that's interesting
18858;oh Discord just has none
18859;can't test
18860;how do you think i'll run `document.querySelector` with goquery? ü§î
18861;otto?
18862;nah I'm assuming goquery will work on anything that querySelector can
18863;because technically they both use CSS selectors
18864;though not the same impl
18865;I have no idea
18866;lol
18867;"so```document.Find(`document.querySelector(`script[type=""text/javascript""]`)`)```"
18868;?
18869;"`document.Find(""script[type=\\""text/javascript\\""]"")`"
18870;whats a `.a` file?
18871;long shot but let's see what it's made of
18872;üòÜ
18873;` is fine
18874;I'm not using it because I'd have to fiddle with Discord otherwise
18875;whats a `.a` file?
18876;is it a library?
18877;bruh
18878;https://stackoverflow.com/questions/5965171/whatisafilewithextensiona
18879;you can just google it
18880;ok makes sense
18881;yeah it doesn't find it
18882;oh
18883;wack
18884;"also `<script type=""text/javascript"">([\\s\\S]+)</script>` matches everything until the last `</script>`"
18885;i need it to match until the next `</script>`
18886;use nongreedy
18887;(?mU)
18888;what's `(?mU)` now? regex ü§ï
18889;use https://regex101.com/ and play around
18890;click the flags
18891;also change to golang version
18892;i'm clueless
18893;im having a problem with importing
18894;how can i import other packages?
18895;that i made?
18896;None
18897;in main.go
18898;how do i import player.go?
18899;at the first line of player.go i wrote `package player`
18900;`player.FunctionName()`
18901;oh this is how you reference
18902;without importing?
18903;you do need to import yes
18904;what would be the path to it?
18905;i mean i think it depends whether that dir in $GOPATH
18906;its in my desktop
18907;no idea then sorry
18908;the project folder
18909;pretty sure most people put scripts in their gopath
18910;why
18911;use go modules
18912;gopath is obsolete
18913;???
18914;idk what you mean
18915;IDE bad.
18916;i like the ide
18917;im just confuzzled
18918;what IDE
18919;goland
18920;i think you use .mod files?
18921;jetbrains
18922;whats that
18923;?go modules
18924;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
18925;GoLand's supposed to automatically manage them all for you
18926;documentation is your friend
18927;vscode also has an extension for managing imports
18928;but the official docs don't guide you over GoLand but rather the sane parts only
18929;i never made that work on sublime :(
18930;"Go tools are really simple; I feel like IDEs really cover that fact"
18931;vscode go extension (which is managed by the google team) is perfect and works for imports
18932;unlike slow jetbrains ide it seems
18933;that's just goimports
18934;setting up a project is different
18935;but GoLand doesn't use goimports afaik
18936;which is annoying
18937;you'd have PRs that are mostly just import path changes because GoLand doesn't format them the same way most editors (using goimports) do
18938;> unlike slow jetbrains ide it seems@Karitham the jetbrains ide is not slow at all it runs fine on my crappy laptop
18939;I'm going to look into go.mod files
18940;I have a I7 9700H and 32Gb ram and Jetbrains IDE are still slow af
18941;Specifically the goland ide?
18942;Well idk but I guess my Pentium and HDD and 8 GB ram is better than your i7 with 32 GB ram üôÉ
18943;The goland ide is quick and easy to use
18944;> but GoLand doesn't use goimports afaik@_diamondburned_ what's goimports?
18945;if you think GoLand is fast then I don't think you've tried anything else tbh
18946;having the editor using 8 Chrome tabs worth of memory sucks
18947;None
18948;Someone know why it's doing that on VSCode Windows?
18949;I presume this is the Golang extension but why it checks for pkgconfig?!
18950;Oh it's for GTK.
18951;I think?
18952;Can someone redirect me to a proper golang coding structure to use
18953;?go structure
18954;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
18955;like mvc
18956;mvc is not proper structure since a while
18957;> mvc is not proper structure since a while@Karitham It was just an example for say. Which structure should I follow. Any public github project you recommend that i should follow regarding structure?
18958;depends on the size of your app and what you want to do with it
18959;I'd suggest checking out popular repo with a similar goal / app that you intend to build
18960;@Ankit Joshi I recommend checking out this talkhttps://youtu.be/oL6JBUk6tj0
18961;does anyone know how i'm supposed to pass multiple commandline args with this `StringArrayP`?
18962;https://godoc.org/github.com/spf13/pflag#StringArrayP
18963;How do I split my code up into multiple files with Go? Wrote a package but turns out that has to be made for global use only
18964;separating with space doesn't work only the first one gets passed
18965;and yes i'm iterating over them
18966;> @Ankit Joshi I recommend checking out this talk> https://youtu.be/oL6JBUk6tj0@Xaner4 This should suffice. üëç
18967;i cant get go to run in vscode
18968;its like it purposely doesnt want to
18969;nvm
18970;but
18971;vscode wont autocomplete
18972;you guys said vscode is better than the jetbrains ide
18973;@other you need to install the go tools extension
18974;None
18975;these two are the only ones I use
18976;does the job nicely
18977;this?
18978;i have it
18979;and still no
18980;it doesnt autocomplete the gopath
18981;when im using `import`
18982;do you have all the gotools?
18983;what other ones are there?
18984;it's supposed to do all that once you save
18985;it should offer you to install them when you first hit ctrl+s on a go file
18986;after you've installed that extension
18987;ah ye mine does do that either but it auto imports them when I hit save after using one
18988;i think i installed all of them
18989;can i check if i have them?
18990;like I dont have fmt imported then I use fmt.Println it auto adds it
18991;yeah that's good
18992;what doesn't it do then?
18993;what doesn't it autocomplete?
18994;but it doesnt autocomplete for paths to libs in my gopath
18995;like i want it to autocomplete `github.com/gen2brain/raylibgo/raylib` but it doesnt
18996;where are your files? still in the desktop folder?
18997;yeah
18998;where is your $gopath?
18999;the projct is in my desktop
19000;my gopath is...
19001;where do all the packages go when you install them?
19002;C:\\users\\me\\go\\src
19003;and it doesnt autocomplete üò¢
19004;Have you configured vscode go
19005;how?
19006;Ctrl+
19007;you get to the settings
19008;put that gen2brain folder in `go/src/github.com/` so that it reads `C:\\users\\me\\go\\src\\github.com\\gen2brain\\raylibgo\\raylib`
19009;then go to that file in that new dir and try saving there and see if it imports
19010;no idea about the difference between goreturn and goimports tho
19011;yep
19012;i have that
19013;it says goreturns
19014;if that doesn't work then your package layout is probably wrong
19015;do you have each package in a separate directory ?
19016;i have go/src/github.com
19017;and there
19018;i have my packages
19019;yes
19020;separate directories
19021;üò¢
19022;it doesnt work
19023;but jetbrains works
19024;it does work for me
19025;probably something on your end then
19026;can't help much sorry
19027;> i have go/src/github.com@other you should be using go modules
19028;i found my solution to this btw https://discord.com/channels/118456055842734083/118456055842734083/745925383840464997
19029;kinda
19030;go modules?
19031;:robpike:
19032;will that fix the autocompletion?
19033;Are you using gopls for autocomplete
19034;idk
19035;how do i check that?
19036;Hi there does anyone have any experience in gocache? https://github.com/patrickmn/gocache Is it possible to clear a cache item by key?
19037;Id assume youd have some idea of what way youve configured things
19038;Apologies just found this
19039;func (Cache) Flush
19040;No not you @Ainsley
19041;and i dont see why vscode is better the jetbrains ide supports everything out of the box
19042;Ah no worries üôÇ
19043;Preference
19044;> Id assume youd have some idea of what way youve configured things@Str≈ìm nope non at all
19045;I dont like the jetbrains UI
19046;i love the jetbrains ui
19047;its pretty
19048;Think its too cluttered
19049;look at this beauty
19050;dracula theme fixes everything üòâ
19051;everything takes so many precious pixels üò©
19052;i like it
19053;a lot of free space
19054;and tons of features
19055;and this one is especially lightweight
19056;it runs well on my shitty laptop
19057;and i mean extremely shitty like wait 6 hours to reboot shitty
19058;what does go.mod do?
19059;there's even tons more if you collapse all that :D
19060;whats go.mod
19061;google it?
19062;> a lot of free spaceLess free space than vscode :robpike:
19063;im trying to understand
19064;https://blog.golang.org/usinggomodules
19065;i dont understand
19066;> Less free space than vscode :robpike:@Str≈ìm yep
19067;i already checked that
19068;Imagine package.json
19069;it doesnt make sense to me
19070;Or requirements.txt
19071;But for go
19072;??
19073;if you don't understand it then don't use it
19074;Is this your first time programming
19075;no
19076;What have you done before
19077;just place the code inside that `go/src/github.com` dir that i said
19078;it must work there
19079;c# c c++ python lua gd gml etc
19080;i think thats all
19081;Never used requirements.txt with python...?
19082;Or whatever dependency management C# uses?
19083;i havent done python in like a year
19084;I created a package called web_requests how do I use this inside `server.go`? Can\'t figure out how to import it
19085;@Akandesh packages cannot be in the same dir
19086;What
19087;but idk how to import it
19088;they're not
19089;oh yeah
19090;nvm
19091;i didnt see that tiny little arrow
19092;@Akandesh whats your module name
19093;what module? :|
19094;Are you not using go modules
19095;web requests
19096;nay
19097;I swear to god you guys
19098;@Str≈ìm is it every day like this
19099;Please use go modules for all that is good and holy
19100;I don't know what they are either lmao
19101;Then learn
19102;tried to look it up but ran into packages again
19103;"You think i knew half the shit i know now by just saying i dont know what that is""?"
19104;i just want to import my package
19105;import it then
19106;idk how!!!
19107;learn!!!
19108;learn go modules fellas
19109;its not in my go/src
19110;Its like tryna run before you can walk
19111;issue is that https://blog.golang.org/usinggomodules this article seems to only show a ton of compiler generating things
19112;?go mod
19113;Using go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
19114;because you need to put it there @other
19115;?go modules
19116;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
19117;Rip
19118;i dont want to
19119;Thrre
19120;Intro to go modules
19121;then you'd use go modules
19122;Go read
19123;no other way
19124;why cant i make a project in the desktop?
19125;You can
19126;With go modules
19127;goodness
19128;> then you'd use go.mod@r3velated i have no clue what that is! thats why im asking
19129;that's why we're telling you to learn it
19130;Its a file that lists dependencies and your module name
19131;READ
19132;?go modules
19133;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
19134;Reeeeaaaad
19135;dependencies as in....
19136;lol
19137;What
19138;libraries?
19139;Yes
19140;?
19141;oh modules seems like it's not what im looking for
19142;@Akandesh it is
19143;looks like a kind of framework kind of thing
19144;but my libraries are in go/src
19145;No its jot
19146;Modules isnt a framework
19147;Good lord
19148;i'm done good luck
19149;lol
19150;@other thats the old way of doing that
19151;like if I was creating my own json parser
19152;Deprecated
19153;id use a module
19154;No
19155;Use modules
19156;this is so mindfucking
19157;For fuck sake
19158;@other that's an old pattern which shouldn't be used anymore. go modules is the way to go
19159;go.mod = package.json
19160;Its literally that simple
19161;i dont use package.gson
19162;Have yoi ever touched JavaScript
19163;i have no fucking clue what that is
19164;no
19165;never
19166;requirements.txt in python
19167;i havent done python in like a year
19168;i dont remember shit
19169;CMakeList in C++ or some shit
19170;oh
19171;cmakelist
19172;yea I kinda get what this is but I don't see how it ties together with what I wanna do
19173;ok
19174;@Akandesh its the way forward for being able to resolve your packages
19175;i'll hop onto youtube and see if there's a good explanation there
19176;In itself
19177;but if they're all in the same folder I don't see the reason
19178;or same path/project
19179;im still confused though how does go.mod allow me to import files from a dir outside of gopath?
19180;@other to answer your question you don't need to import files in the same dir
19181;@Akandesh are you outside of GOPATH
19182;yes
19183;look at this this is in my desktop when i do `import` it wont find the player.go in the player folder because its looking into my GOPATH!
19184;Then you need go modules
19185;Thats a requirement for being outside GOPATH
19186;i misspelled test
19187;tet
19188;alright i c
19189;can i use go.mod to change the gopath to look somewhere else?
19190;You should make a go.mod and go.sum file in /golangtet/ so it recognises /golangtet/ as the base of your project
19191;how do i make a go.sum?
19192;It's just a file.
19193;You dont touch gopath if using go modules
19194;Then enable go modules in goland
19195;do i fill it with something?
19196;No
19197;Its populated by thr tooling
19198;It should automatically fill if you use goland
19199;just an empty file called go.sum?
19200;yeah
19201;And enable go modules in goland
19202;Using GOPATH was a terrible system so the GO team deprecated it
19203;why is my go.sum inside of my go.mod?!!
19204;It's not actually
19205;goland just makes it look like that
19206;also go.sum didnt fill out automatically
19207;The two files are related so it groups them together
19208;You need to first edit a file and save it for go.sum to be filled iirc.
19209;so after creating a mod file. What now?
19210;since I don't have a bunch of dependencies I need to download
19211;ok so how do i add a dependency to go.mod?
19212;because it no longer looks into my gopath. right?
19213;"Now in the file main.go you can add ```goimport ( <first line of go.mod without `module`>/player"")``` iirc"
19214;e.g. this is my first line in go.mod
19215;hey
19216;something happened to my go.mod
19217;aint workin
19218;"in my main.go i did ```goimport ( //""fmt"" github.com/gen2brain/raylibgo/raylib"")```"
19219;So I would use (ignore the red I don't have the same project as you so it doesn't work)
19220;and now my go.mod looks like ```gomodule gogamego 1.15require github.com/gen2brain/raylibgo v0.0.0202006252121577bdb60d758ed```
19221;great!
19222;great?
19223;ye that's intended
19224;it keeps track of your dependencies
19225;mhm
19226;I got this
19227;ok so it no longer is looking towards my GOPATH?
19228;for dependencies?
19229;None
19230;yeah
19231;imported this
19232;but it aint workin
19233;can you show your go.mod?
19234;package be like
19235;I have showed me go.mod
19236;oh sorry
19237;Your functions will not show because they need to be capitalized to be exported
19238;i still cant import a package in the same directory as the project
19239;haha what
19240;None
19241;i want to import player.go into main.go
19242;EEEEEEEEEEEEEEE
19243;@other what's your module name? First line in go.mod
19244;gogame
19245;it still aint working even after naming the funcs Get and Post
19246;atleast intellisense aint showing them
19247;Are you using `tcp_server.Get()`?
19248;the first line is `module gogame`
19249;no
19250;web_requests.Get()
19251;oh right
19252;`tcp_server` word is already used by my dependency
19253;That should be working. Try run the program
19254;how do i import the player.go?
19255;@other you use
19256;whoops didn't mean to send
19257;player.go is a different package called `player`
19258;now im getting stupid errors got a feeling its because of name clash
19259;"```goimport ( gogame/player"")```"
19260;oh nevermind
19261;it has reverted my modification to the library
19262;it cant find it
19263;gogame/player doesnt exist
19264;It's good practice to use a github link as your import and module name even if it isn't on github. idk if bare names works
19265;wait why is it good to use a github link as the module name?
19266;I think they expect the project to be hosted on github (or a similar service)
19267;It's doesn't have to be github you can use any url really.
19268;well it doesnt work
19269;weird how go takes unused variables as errors
19270;gogame/player doesnt exist
19271;Sorry I really gtg. So I can't really help you further
19272;üò¢ üò¢ üò¢
19273;ok
19274;> weird how go takes unused variables as errorsreplace them with underscores
19275;kbai
19276;thanks a lot for your time @Dexti
19277;bye
19278;"@other my module file looks like ```module tcp_servergo 1.14``` and my imports are like ```import ( bytes"" encoding/binary"" fmt"" tcp_server/tcp_server"" tcp_server/web_requests"")``` if that\'s of any help"
19279;can you show me a screenshot of your project? in the explorer?
19280;tcp_server would be a folder from the root of the project
19281;> wait why is it good to use a github link as the module name?Because its unique that way
19282;ok
19283;but
19284;it doesnt work
19285;Why js your go.sum in a different folder
19286;its not
19287;Ok old screenie then
19288;Show your go.mod and a go file in which youre having issues
19289;can i just send the whole thing in a zip?
19290;you can take a look yourself
19291;Or stitch it together on hastebin
19292;None
19293;this is the whole project
19294;is there anything wrong with it?
19295;in main.go
19296;"`import gogame/player""`"
19297;and then you can do `player.DrawPlayer()` etc
19298;constructs dont enter the same namespace you reference them by package name
19299;>player.XYZ()
19300;None
19301;it cant find it
19302;@Str≈ìm how come it doesnt work for me?
19303;¬Ø\\_(„ÉÑ)_/¬Ø
19304;that would work in vscode
19305;whys there an error in go.mod
19306;idk
19307;what does it say?
19308;you tell me
19309;youve the editor open
19310;unresolved dependency
19311;thats what it says
19312;and is there an action to resolve that
19313;no
19314;alt+shift+enter no?
19315;nope
19316;then i aint got a clue
19317;yeah it works
19318;but it only shows the error in the editor
19319;?
19320;yay
19321;all of it works
19322;it just shows the problems in the editor but when i run it it compiles and runs just fine
19323;is there a reason for that?
19324;go is awesome!
19325;@Str≈ìm fyi the goland IDE is really fast on my horrible computer it loads faster than visual studio
19326;yea my mate who works with go recommends goland
19327;I'm personally stuck with vscode tho
19328;ive a better experience with vscode
19329;i also dont like editor hopping
19330;i restarted the editor
19331;and it still shows the errors
19332;even though theyre not actually there
19333;vscode shows errors based on run output
19334;so rerunning usually gets rid of it
19335;> vscode shows errors based on run outputwhat?
19336;thats not true
19337;that's my experience ¬Ø\\_(„ÉÑ)_/¬Ø
19338;I run and I get error error stays until i fix and re run
19339;dunno what youre doing but thats not how most people have it setup
19340;and that hasnt been the case in many years
19341;I mean i got intellisense covering a lot of the errors
19342;but some errors act this way
19343;> so rerunning usually gets rid of it@Akandesh you mean just running the project?
19344;and i got default settings
19345;yea
19346;neither gocode nor gopls require you to run the p roject to get updated errors
19347;so thats just blatantly not true
19348;someone has been tampering with my vscode then üò§
19349;whats gocode and gopls?
19350;andi can tell you that much because this is tech that i literally work with as a job
19351;are they like compilers?
19352;somewhat
19353;so you're saying the errors should always be up to date?
19354;or when should they disappear normally
19355;the errors wont go away
19356;i fixed it
19357;in the settings
19358;i already forgot what i did
19359;if you hit save it should update
19360;but now it doesnt show errors when using modules
19361;i enabled go modules integration
19362;and now it supports modules ig
19363;Hey all does anyone have any idea how to use `gogit`. I just want to clone a git repository into memory and then iterate over all files and print their filename (and the respective file contents) but I couldn't figure out how to iterate over the files with this library at all.https://play.golang.org/p/1d5gA4Z_MF (doesn't build because of the gogit dependency) üò¶
19364;goland is better than vscode
19365;you say with all the issues youre having right now
19366;its literally a program made by tons of proffessional developers solely made for coding with golang
19367;and yet here we are
19368;> you say with all the issues youre having right now@Str≈ìm literally clicked one button in the settings to support modules
19369;and gopls is made by google
19370;¬Ø\\_(„ÉÑ)_/¬Ø
19371;> and gopls is made by google@Str≈ìm by 3 guys
19372;Designed by:\xa0Rob Pike,\xa0Ken Thompson
19373;2 guys
19374;Goland is made by like 10 guys
19375;I mean it's jetbrains a full on corp
19376;286 google employees have contributed to Go
19377;over 2.5k people worldwide have contributed to Go
19378;Yeah but none of them except for jetbrains made a whole ide designed for it
19379;i dont see how thats a point to make
19380;I'm saying that gopls is not an ide while goland is
19381;why would i want a whole IDE for Go when the language server protocol is all i need
19382;And a text editor with syntax highlighting for go isn't as good as a whole ide built for it
19383;this text editor has LSP support
19384;do you know what that even entails
19385;> why would i want a whole IDE for Go when the language server protocol is all i need@Str≈ìm why do people need ides at all?
19386;To make dev easier
19387;im gonna stop you right there
19388;because im not gonna have a goland vs vscode discussion with someone who doesnt even bother to lookup what the LSP entails
19389;have a good day
19390;Ok
19391;Anyone here good with nonblocking I/O?
19392;Someone could help me debug why there is this exit status code with GTK & Golang?
19393;I have MSys installed Visual Studio and installed all the deps with https://github.com/wingtk/gvsbuild
19394;@JoshuaDoes explain
19395;I'm writing a sudo util for Windows for personal use and it uses a TCP server to handle communicating between the unelevated sudo process and the elevated one (so that the elevated process can receive stdin data and send stdout data via the TCP server)This was all fine and dandy just handling stdout/stderr however once I added stdin I came across a small problem: Reading from stdin is blockingMy attempt to solve it with channels and goroutines didn't work however for obvious reasons I'm sticking to doing it that wayThe attached file is my latest attempt at that the important bits for reading are `readInput()` and `handleConn()` at the bottom and the call intended to kill the whole process once the elevated process has ended is on line 64
19396;If I need to explain more I'll be happy to this is really bugging me lol
19397;I actually do need to explain more
19398;It being blocking becomes an issue when the elevated process exits
19399;You have to hit enter to give it data to handle and be able to exit because it's blocking and that's known because adding a debug line to the output handler won't run until after doing so
19400;"Hi there I\'m trying to select everthing from a database using sqlx but getting `Could not get resources  missing destination name friendly_name in []theme.Resource`Here is my struct:```type Resource struct { ID int `database:""id json:""id""` Name string `database:""name json:""name""` FriendlyName string `database:""friendly_name json:""friendly_name""` Slug string `database:""slug json:""slug""` Icon string `database:""icon json:""icon""` CreatedAt time.Time `database:""created_at json:""created_at""` UpdatedAt time.Time `database:""updated_at json:""updated_at""`}```"
19401;"And this is whats calling it:```// Get all resourcesfunc (s Resources) GetAll() ([]Resource error) { var r []Resource if err := s.db.Select(&r SELECT  FROM resources""); err != nil { return nil fmt.Errorf(""Could not get resources  %w err) } return r nil}```"
19402;Ok thats strange it uses db not database swore I had database working a few days ago
19403;Hey there I am coding a tool to manage netwrork namespaces under linux and I am curious how one would set a network interface up using go? I am looking for something of the equivalent to `ip link set dev eth0 up` but in a go way of doing it.
19404;Also I have a question to cli/v2 package. Is there a function to print the standard help text on purpose. Like You are not running as sudo but here have the help instead
19405;You could check if running as root via `os.Geteuid()` ?
19406;I got that already
19407;now for the part where I print the cli Help on purpose
19408;I setup my app with all the cool parameters
19409;then when running the app without any command given I will get the help text
19410;```goNAME: gonetns  cli tool to handle network namespaces and isolate network interfaces withUSAGE: ./gonetns <command> [<parameters>]VERSION: v1.0.0DESCRIPTION: This tool is designed to isolate network traffic and applications within a dedicated network namespace under unix systems. This tool is a redesign of https://github.com/SySSResearch/netns.sh and was designed for pentesting purposes. Note: gonetns requires root privileges. It uses sudo to automatically drop privileges before running commands within the namespace.AUTHOR: Patrick Hener <patrickhener@gmx.de>COMMANDS: add a Add inteface(s) to existing namespace remove r remove interface from namespace run r Run command in namespace start s Create namespace and move interface into it stop st Remove namespace and free interface help h Shows a list of commands or help for one commandGLOBAL OPTIONS: help h show help (default: false) version v print the version (default: false)COPYRIGHT: (c) 2020 Patrick Hener```
19411;```goif os.Geteuid() != 0 { PrintUsage() exit(1)}```?
19412;Yeah well it is not flags package but cli/v2
19413;Sorry I'm unfamilar with that package but I'd assume it exposes a function to print the help text
19414;> @JoshuaDoes explain@Str≈ìm If you're willing to get back to me at some point on that a ping will do and I'd appreciate it
19415;Well at least I did not identify any
19416;"instead of ```gofoo := Foo{Bar: something""}```is it possible to have a default value for `Bar` within its struct that is not its zero value?"
19417;Default as in..
19418;is there anyone familiar with urfave/cli/v2?
19419;```gofoo := Foo{}altFoo := Foo{}```and each of these would have `Bar` as something
19420;Do you want to make a struct without saying what the bar is?
19421;i want to know if i can somehow set a default for `Bar` within the struct...
19422;"```gofoo := Foo{Bar: something""}altFoo := Foo{Bar: something""}```would be undesired"
19423;I'm not too familiar with structs. But
19424;Can you just set the bar value inside of the struct when defining it?
19425;So
19426;```gotype Foo struct { bar := something default }```
19427;https://stackoverflow.com/questions/37135193/howtosetdefaultvaluesingostructs
19428;@Karitham so use a constructor function?
19429;https://stackoverflow.com/a/37521991
19430;First part
19431;That's what I'd do
19432;üëç
19433;"Hi Im trying to set up dynamic routing in gin every page should be resolved through `ServeFrontend` so I can grab a page from the database however I get `panic: wildcard segment \':post\ conflicts with existing children in path \'/:post\'` when running.My routes look like:```// Routes for Frontendfunc (c FrontendController) Routes() { c.server.Router.GET(""/ c.Home) c.server.Router.GET(""/styleguide c.StyleGuide) c.server.Router.GET(""/posts/:slug c.StyleGuide) c.server.Router.POST(""/ajax/subscribe c.Subscribe) c.server.Router.GET(""/:post c.ServeFrontEnd)}```Can anyone help?"
19434;is there a recommended (clean) way to create something similar to default parameters in go?```pydef new_foo(a=0 b=0): ...```in python `a` or `b` would be optional within the invocation and i can't think of a clean way to do this in go.```gofunc newFoo(a b int) {}// Call the constructor func with explicit values...newFoo(0 0) ```
19435;I have a question about logging let's say I have an app using a couple of packages should I pass the logger down of return the error up? I'm thinking what if a package does something that isn't a fatal error I want still to log it and maybe add some Info logs along the way to keep trace of what the package did so I'm thinking passing the logger down would be better but I'm not entirely sure.
19436;how do i make a function inside of a struct?
19437;@other do you know about function receivers?
19438;nope
19439;that's where you should start
19440;im confused already lol
19441;https://tour.golang.org/methods/1 start here
19442;ok
19443;what does `type` do? (sorry for the incredibly stupid questions but i just started golang yesterday)
19444;type defines a type
19445;what about `var`?
19446;think typedef in C
19447;have you actually gone through the tour
19448;?go tour
19449;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
19450;Yeah start the tour from the top. Do you have experience programming in other languages?
19451;apparently
19452;yes
19453;im just stupid
19454;and the syntax is sooo AAAAAAAAAAA
19455;so C like
19456;I‚Äôm guessing you come from python
19457;no not at all
19458;c#
19459;Is the syntax not similar
19460;you defines types after the name
19461;no its not
19462;not even close
19463;the syntax is like complete opposite
19464;almost
19465;I came from python trust me I know
19466;i read a blog post about that i think
19467;https://blog.golang.org/declarationsyntax
19468;theres no visibility modifiers in go which is an incredibly big oof for me
19469;if a field starts with a capital it is exported
19470;there is visibility modifiers
19471;its in the field name itself
19472;its so twisted inside and out its like im learning a totally new language
19473;capital first letter = publiclowercase first letter = private
19474;yeah thats not enough
19475;most of the world disagrees
19476;try c# and you will see
19477;i really dont want to try C#
19478;go works well for its use cases you can't complain go isn't a copy of c#
19479;c# is more lowlevel
19480;okay thats a good joke
19481;its not at all
19482;i dont see the entire docker world in C#
19483;go has like no boilerplate
19484;i see it in Go
19485;TBH it i prefer it this way if somethign external needs to modify something it has to go through an exported method which means the package is repsonsible for maintaining sanity of a value
19486;> go has like no boilerplateokay now youre just taking the piss
19487;i cant take you serious anymore
19488;im not
19489;if it was just writable (read: setter) then it could be modified to something entirely stupid
19490;try c#
19491;you will die
19492;you havent tried Go
19493;to any respectable level
19494;easily one of the biggest complaints with Go is boilerplate
19495;i have enough to understand that it revolves around packages and modules
19496;what do you mean by go having no boilerplate?
19497;> easily one of the biggest complaints with Go is boilerplate@Str≈ìm lol now i know for sure that you havent tried c#
19498;i know
19499;i never said i have
19500;:blobwaitwhat:
19501;at first go reminded me of lua
19502;#offtopic guys
19503;lua is a baby language
19504;yeah Go is verbose actually there is a lot of boilerplate but generally people like it because they don\'t have to jump through 1000 hops to understand what a function is doing like with some frameworks you have in java
19505;@other i don't wish to sound rude. you said you're on day 2 of go. the boilerplate in go is pretty infamously tedious
19506;well to me its nothing compared to c#
19507;the boilerplate i mean
19508;please hold your opinions until youve actually coded in go
19509;dont be that guy
19510;im not trying to be that guy
19511;but you are that guy right now
19512;I think you‚Äôre talking about two different types of boilerplate. And I think this is still #offtopic
19513;im just saying having experience with both even though i have way less with go i can tell that the boilerplate in go is so much easier than c#
19514;ok now to #offtopic
19515;you dont have experience with both
19516;i don't think you can make sweeping generalisations after fewer than two days
19517;check out that blog post about the declaration syntax you'll find it interesting i think
19518;it's highly relevant for you
19519;does go bcrypt suffer from the same max input length problem?
19520;i've seen some mention of structs using tags to suggest default values. is this a common technique?
19521;clear is better than clever
19522;"```gotype User struct { Username string `default: none""`}```something like this"
19523;Never seen that
19524;If you need default values in a struct make a constructor
19525;> clear is better than clever@stdio i am yet to see anything clear about how to provide default values in go. it's a mess
19526;clear means that you actually see the code behind setting defaults
19527;instead of just something = default (which does stuff behind the curtains)
19528;by having those tags you probably need reflection somewhere
19529;and reflection is never clear ü§°
19530;"for argument\'s sake in that struct we can see the username should have a default of none"". if the defaults are moved to a constructor the code becomes automatically one step more difficult to follow"
19531;i'm not really following go's logic to block default values in a struct tbh
19532;yes until you have anything more than a simple value assignment in the default string
19533;for once you need to parse stuff
19534;"```gotype Something struct { SomeInt int `default: 10""`}type Something struct { SomeInt int `default: abc""`}```"
19535;I don't think you can let the compiler solve that
19536;hello i am trying to download a module from github and i ve tried go get gh link but it doesnt work does anybody know why?
19537;```gotype Foo struct { SomeInt int `default: Math.Sin(Math.Pi  2)`}```
19538;@!!!.SC4R explaining why it's not working might help
19539;so your argument is that someone might use an expression? that seems easy to avoid
19540;error messages?
19541;it says git is missing
19542;so you don't have git installed
19543;whats the point if you cant
19544;isnt there another way to get golang packages from github without git
19545;now you have to both have default tags and a constructor
19546;just install git lmao
19547;That's how Go is gonna version the modules too
19548;i find your initial premise of setting defaults to be annoying / hard to be false in my experience with the language anyways
19549;Does it make sense to put specific parts of my code in blocks {} within 1 function for better documentation for example?
19550;> i find your initial premise of setting defaults to be annoying / hard to be false in my experience with the language anyways@Madxmike i'm not following what you're trying to say
19551;>anything clear about how to provide default values in go. it's a mess
19552;should have said messy
19553;so you're fine with a verbose if/else or reflection in a constructor?
19554;A struct just defines the data structure nothing about the values
19555;functions can operate on data structures to set values
19556;I like it that way
19557;there's two topics kind of intertwined here
19558;default params and default values in a struct
19559;default params bad too
19560;it very rarely happens in my experience
19561;i very much at present disagree that default params are bad
19562;more complex if/else in the constructor sure
19563;reflection? not for 99% of usecases
19564;so how are you handling default values?
19565;say you want an id to start at 1000
19566;```gotype Foo struct { ID int }```
19567;something like this where ID starts at 1000?
19568;sure
19569;have you thought about constants
19570;can you put constants into a struct?
19571;no but when you initialize it you can set your struct member = yourConst
19572;i'm pretty sure the example mike is working on will do that
19573;"```gofunc NewFoo() Foo { return Foo { id: 1000 }}func (f Foo) SetID(ID int) error { if id < 1000 { // probably should put this as a constant return errors.New(""invalid id provided"") } f.id = ID return nil}func (f Foo) GetID() ID { return f.id}...f := NewFoo()err := f.SetID(2003)if err != nil { // handle error}```"
19574;just off the top of my head
19575;So i looked at mysql documentation. It said when you create a temporary table it only exists for that one session/connection and gets deleted on exit. So aight the one way to open a session/connection separate and have it usable later on is to use Begin() to start transaction. So i start one make a temp table and all works. Then i run the exact same thing twice which should open a new connection. It tells me the table exists
19576;:KM_Dorime:
19577;even if i revert the transact CREATE TABLE is an implicit commit
19578;but that shouldnt matter with temporary
19579;might have something to do with connection pooling
19580;does go do it by default?
19581;`database/sql` does yeah
19582;thanks @Madxmike
19583;OHH well that makes sense. Ok what do you think is a better option imo1) CREATE TABLE IF NOT EXIST2) Delete table at end of usage
19584;that example adds the constraint that Foo.id MUST be 1000 or greater
19585;since its all in a transact anyway reverting will make the table always empty
19586;in what case would a pointer be used?
19587;I'd just create the table
19588;@other when you want to reference something
19589;The Go Tour has great examples of that
19590;@other are you still looking at methods? if so a pointer receiver is for modifying
19591;can i see a very small code example of how it would work i action?
19592;?go tour
19593;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
19594;yeah im doing the tour but dont completely understand the concept
19595;it points to something in memory
19596;so you can reference the same thing from multiple places
19597;instead of copying it
19598;in which situation would it be useful?
19599;"```Go tx err := m.db.Begin() if err != nil { return nil err } defer tx.Rollback() _ err = tx.Exec(""CREATE TEMPORARY TABLE IF NOT EXIST ignorefile (file TEXT)"") if err != nil { return nil err }```so since all changes and inserts i make will be rolled back its basically just making the table always empty for new connections"
19600;:5_bugcatstare:
19601;when you want to reference something so you can change its value or something
19602;and other things will see that value change
19603;WAIT db.Begin starts an entire new session no?
19604;or is that not how it works
19605;i read that making a transact is the best way to start a new session and dispose of it in sql driver
19606;:stare:
19607;but then this should work
19608;so like this?```gox := 10 // make a number valuey := x // turn X into a pointerz := y  5 // turn X back into its number and subtract five from itfmt.Println(z) // will this print 5?```
19609;@other https://play.golang.org/p/BGCH9iIH7CG
19610;Waxis do you know the difference between passing something by reference or by value?
19611;@other That is all invalid syntax
19612;no
19613;i dont know
19614;im not very familiar with pointers and memory stuff
19615;@other ```GOx := 10y := &x // this is a ref/memory value of somethingz := y  5 // this dereferences the memory value back into a readable variable```
19616;oh
19617;a pointer is just a reference that can be read as a variable
19618;a reference cant be modified safely
19619;so `$` turns the value into a pointer and `` makes it turn back into the original variable?
19620;Watch this https://youtu.be/XISnO2YhnsY
19621;It‚Äôs C but the idea is the same
19622;i suggest you watch ^
19623;And the syntax also
19624;`&` returns a reference to var and `` dereferences a pointer
19625;if you pass a ref into a func make sure to accept a pointer as the argument
19626;:5_bugcatstare: and the fact that you can use the argument normally without any special syntax
19627;should explain a bit to you
19628;The only thing you can do in C but not Go is pointer arithmetic so you can skip that part
19629;~~a ref technically isnt a variable but im not getting into that~~
19630;more like an alias hard to describe but basically in memory there is no concept of a variable its just address:value. your program is responsible for keeping track of what things are and how they can be used
19631;Just watch the video really. It‚Äôs very well explained there.
19632;@beepsandboops although I believe ppl advise to allow a struct to be used without any constructor so that ppl do pkg.Foo{}
19633;I think it‚Äôs ok to lowercase a struct if you‚Äôre only providing it through a constructor right?
19634;Even that I would use an inner thing
19635;```go type MyStruct struct { somemap map[string]string } func(m Mystruct) Store(k,v string) { if m.somemap == nil { m.somemap = map[string]string{} } m.somemap[k] = v } ```
19636;inner thing?
19637;is inner something in the go terminology i've not yet learnt/
19638;no just me inventing phrases
19639;:5_bugcatstare: also just a question i need a program to manage a k/v store with an expire task to remove a value from it
19640;i could use redis as i do now
19641;or i could use a go task scheduler
19642;:stare: is a go task scheduler task just a fancy goroutine on sleep
19643;if so im just using redis with expire key
19644;I meant as some underlying code that handles lazy construction so the person that uses can do it as v := pkg.MyStruct{} v.Store(k,v) without having to pkg.NewMyStruct()
19645;```gofunc NewMyString() MyStruct { v := MyStruct{} v.Store(k v) return v}```so you'd want the constructor to be similar to that then?
19646;@Riku use redis
19647;no need to load up the scheduler with a bunch of sleeping goroutines
19648;aight yeah thats what i thought it does
19649;:BCS_PepeLaugh:
19650;``` var trackURIs []string for _ t := range tracks { trackURIs = append(trackURIs t.SpotifyURI)}```
19651;ill use a scheduler when i actually need to RUN code at a time
19652;not for a k/v expire proccess
19653;Is there a smarter way to do this?
19654;i think
19655;Not really @Meep
19656;`append(trackURIs tracks.SpotifyURI...)`
19657;:5_bugcatstare:
19658;oh wait nvm
19659;Could preallocate the known length of `tracks`
19660;```GotrackURIs := make([]string len(tracks))for i t := range tracks { trackURIs[i] = t.SpotifyURI}```
19661;Yup that would do the trick
19662;:KM_Dorime: this is basically the same code one is just more complex slightly
19663;without allocating more memory every loop
19664;if that slice is long this code is much much faster
19665;doad typing too faaaaast
19666;Nice that is what i was after
19667;and it's not even complex lmao
19668;seemed inefficient to do all that slice shuffling
19669;is it possible to make a function inside of a struct?
19670;well true i dont think a slice is actually allocating more memory a slice is just a fancier vector so it just reallocates
19671;you can define a struct field as a function yes
19672;:5_bugcatstare:
19673;you just use the function signature as the type
19674;how?
19675;@beepsandboops <https://dave.cheney.net/2013/01/19/whatisthezerovalueandwhyisituseful>
19676;what is a bugcat
19677;```Gotype myStruct struct { someFunc func()}```
19678;`func (name StructName) Lmao() {}`
19679;could do this too
19680;or you can use a method
19681;make sure to put the method outside the struct itself
19682;```gotype myStruct struct {  somefunc func() { // do function stuff here? } }```
19683;can't do that
19684;nope
19685;`somefunc func()` means you make the func on instantiation. The better way to do it is with methods as i just described
19686;can i say what the function does inside of the struct?
19687;https://tour.golang.org/methods/1
19688;No
19689;you can just declare the function signature
19690;That isn't how it works. The spec won't allow it
19691;you declare the type not the value
19692;```GOtype test struct { testv int}func (t test) testmethod(tx int) { t.testv = tx}```
19693;so i can only declare functions inside a struct?
19694;what
19695;You can declare that a struct has a field which is a function
19696;and assign that function later
19697;just like any other field type for a struct
19698;> ```go> type myStruct struct {> someFunc func()> }> ```@Doad is this saying `someFunc` is the value of evaluated `func()`?e.g.```gotype myStruct struct { someFunc func() someFuncRef func}```does that work?
19699;no
19700;or you can do a method which is a function that is owned by an object(go technically isnt OOP but it does have objects... just not the same as java ones)
19701;it's saying it's a function without parameters
19702;it's the function type signature
19703;but can i assign what the function inside the struct does inside of the struct so at the same time as creating the function?
19704;no
19705;whats the command to make code run in go? for discord?
19706;what
19707;Those behave like function pointers in C. You have a function as a property of the struct now. You would normally have _methods_ which are defined _outside_ the struct
19708;the bot command
19709;?go
19710;Working with Errors in Go 1.13 <https://blog.golang.org/go1.13errors%20>  stdio
19711;no for executing code i write in a ```this```
19712;"!go```fmt.Println(""hello world"")```"
19713;None
19714;too early
19715;!go```GOfunc main() { t1 := test{X: 5} t1.TestMethod() }type test struct { X int}type (t text) TestMethod() { fmt.Println(t.X)}```
19716;```1:14: expected declaration found GO (and 1 more errors)Status = 0```
19717;!go```func main() { t1 := test{X: 5} t1.TestMethod() }type test struct { X int}func (t text) TestMethod() { fmt.Println(t.X)}```
19718;"```12:15: expected ; found TestMethodStatus = 0```"
19719;bruh where
19720;OH
19721;LMAO
19722;test text
19723;this is confusing
19724;!go```func main() { t1 := test{X: 5} t1.TestMethod() }type test struct { X int}func (t text) TestMethod() { fmt.Println(t.X)}```
19725;```package commandlinearguments\timports text: no Go files in /usr/local/gofaketime/src/textStatus = 0```
19726;@Riku go to a testing channel
19727;#testing1
19728;ok i dont understand what the actual fuck this is trying to do
19729;typo test > text
19730;but enough anyway üòÑ
19731;here
19732;!go```func main() { t1 := test{X: 5} t1.TestMethod() }type test struct { X int}func (t test) TestMethod() { fmt.Println(t.X)}```
19733;None
19734;WAxis. Take the entire tour. Check the spec as well as it is a very good read
19735;check out this
19736;the main method creates a test instance with that instance you can run the method which has a reciever for test
19737;the first () arent argument thats a fancy struct reciever
19738;can i do:```gotype myStruct struct { func myFunc()  // can i somehow say what the function does inside of the struct?}```
19739;NO
19740;kinda syntactic sugar but yeah
19741;again
19742;no
19743;for like the hundreth time
19744;half of the tour is about pointers and i dont understand shit
19745;We have explained this multiple times. Repeating the question won't change the answer
19746;i described that above
19747;It isn't
19748;https://tour.golang.org/methods/1
19749;there are like two pages on pointers
19750;no
19751;like 8
19752;https://discordapp.com/channels/118456055842734083/118456055842734083/746002892388958250 @other look at this this is what you want
19753;out of 24
19754;I guess the issue is that everyone is explaining üòÆ
19755;confusing üòÑ
19756;Take the _entire_ tour
19757;come back when you have
19758;No point in explaining when you haven't actually read the part you need to
19759;The Go tour has way more than 24 pages
19760;oh
19761;zoomer detected
19762;do the tut bro
19763;lol
19764;It has 26 pages on methods alone
19765;so i can make a function that takes the struct as a parameter
19766;also :stare: sentdex has a nice tutorial but he is kinda iffy on pointer explanation
19767;The page indicator at the bottom is for that section
19768;but thats a seperate video
19769;> so i can make a function that takes the struct as a parameter@other Sure
19770;As covered in the tour
19771;thats what i described just now you can do `func Name(instance Object)` ORR you can do `func (rec Object) Name()`
19772;one is syntactic sugar but is more conventional
19773;takes advantage of methods
19774;like:```gotype myStruct struct { x int y int}func main(){ ms = myStruct{x: 10 y: 10}}func (strct myStruct) doStuffWithStruct(){ strct.x += 10 strct.y += 10}``` like this!
19775;Is it possible to obtain the contents of a variable outside of the package scope? For instance I want to grab `var Test` from the directory above.
19776;yep
19777;and you can call `ms.doStuffWithStruct()`
19778;@other note that wont work as you expect
19779;because youve a value receiver not a p ointer receiver
19780;i know
19781;it will make a copy
19782;yes ik
19783;yeah change mystruct as the rec to myStruct
19784;:5_bugcatstare:
19785;hard to tell what you do and dont know tee bee haytch
19786;oh so thats why i need pointers
19787;big brain]
19788;mhm
19789;@Ainsley If the variable is exported yes
19790;you just import the package and reference the variable
19791;stdio. i still am getting index bound out of range [1]
19792;legit dont get where or how
19793;"```package configvar ( TemplateConfig = map[string]string{ file_extension"": .html"", })```"
19794;tried 4 ways already
19795;you have a panic msg then
19796;But I cant access that the directory below the config folder
19797;which explains where
19798;```gotype myStruct struct { x int y int}func main(){ ms = myStruct{x: 10 y: 10}}func (strct myStruct) doStuffWithStruct(){ $strct.x += 10 $strct.y += 10}``` will this change the actual struct instead of making a copy and editing that?
19799;@Ainsley you'd just import it like any other package
19800;Don't use $
19801;what error are you getting importing that package
19802;We don't do that here
19803;This isn't PHP
19804;:kek:
19805;> Don't use $@Sgt_Tailor but wont that then edit the pointer not the actual variable?
19806;$ is not a thing in go
19807;you'd know if you did the tour
19808;oops
19809;$ straight up isn't a valid character in code
19810;i meant the other symbol
19811;So lemme explain in a simple way how pointers work. The computer stores data in memory a reference is a location in memory or alias a pointer is a dereference based on the reference or memory location```GOfunc main() { x := 8 change(x) // This will not work doesnt modify root value}func change(x int) { x = 5 // All parameters are copied here and thrown away on return}``````GOfunc main() { x := 8 change(&x) // This will work exact location of value is passed}func change(x int) { x = 5}```
19812;`&`
19813;`Cannot resolve dependency config`Here is my folder structure:``` config  template.go api  main.go  go.mod```
19814;i meant `&`
19815;That won't work
19816;But the Tour covers this
19817;Me? @Sgt_Tailor
19818;@Ainsley how are you importing it
19819;No that was for W
19820;```gotype myStruct struct { x int y int}func main(){ ms = myStruct{x: 10 y: 10}}func (strct myStruct) doStuffWithStruct(){ &strct.x += 10 &strct.y += 10}```why wont this work?
19821;See this @other
19822;why are you doing &strct.x
19823;Because that creates a new pointer
19824;!go```func main() { x := 8 change(x) // This will not work doesnt modify root value}func change(x int) { x = 5 // All parameters are copied here and thrown away on return}```
19825;"import ( cms/helpers/paths"" os"" path/filepath"" strings"" config"")"
19826;None
19827;oh lmao
19828;It doesnt like config
19829;I wonder if the tour covers this
19830;didnt print
19831;OW WAIT
19832;https://tour.golang.org/methods/4
19833;:cereal:
19834;it does
19835;@Ainsley because that's not the package name
19836;anyway https://discordapp.com/channels/118456055842734083/118456055842734083/746005084743401513here is a simple explanation on pointers read when you want @other
19837;it doesn't have the module path
19838;@Sgt_Tailor whaddya mean the tour covers most of the things all beginners to the language should go to :fellas:
19839;You have to import it as a fully resolved module package
19840;Package is `config`?
19841;that's the package name
19842;not the module and package
19843;do you use `>` to access properties of a pointer in go?
19844;What would thhe fully resolved module package look like?
19845;Do I have to run a go mod init inside config?
19846;"your import should be something like `import github.com/user/repo/package""`"
19847;@Akandesh No we just use dots for everything
19848;ah okay
19849;@Ainsley no just for the root of your module
19850;then all packages are in the module
19851;But my root of the module is inside API not inside Config
19852;```gofunc main() { x := 8 change(&x) // This will work exact location of value is passed}func change(x int) { x = 5}``` so what does `` do and `&` do? because i keep getting mixed up
19853;``` config  template.go api  main.go  go.mod```
19854;that's not gonna work
19855;just move the module up one dir
19856;@other https://tour.golang.org/methods/5
19857;Ah was hoping not to
19858;a pointer is a memory address to a object. `&` gets that address. When using a pointer you're working on the object it points to
19859;All I need is Json with comments! hahaha
19860;Page 6 of methods explains pointer indirection
19861;Is there a parser for go that will strip out json comments?
19862;Google golang remove json comments
19863;`go/ast` i suppose. you could parse the go code and reemit it without the struct tags
19864;ok i get it
19865;i wouldn't bother
19866;Hi fellow gophers! I need help making sure an interface is satisfied by some structs at compile time.I know two methods to do it. Any pros/cons for each? Method 1: ```govar _ Loader = (Task)(nil)type Task struct { ID string ...}``` Method 2: ```gotype Task struct { Loader ID string ...}```
19867;so `&` turns it into a pointer and `` deciphers it back?
19868;you could also just ctrl+f for the backtick character
19869;If you're unmarshalling JSON the comments will already be removed
19870;It dereferences it yes. @other
19871;Ah interesting @Doad
19872;@rdnt you should know if it is but otherwise I'd use the first
19873;yeah
19874;the first one
19875;the 2 adds stuff to struct üòÆ
19876;yea definitely not the second one
19877;I am using reflection to recursively call the method that satisfies the interface @Doad
19878;If it's being used anywhere as that interface and doesn't satisfy the interface you'll get a compiler error
19879;ew
19880;Method 2 allows for overriding the implementation at runtime
19881;which in this case probably isn't desirable.
19882;That doesnt allow for removing of the nasty squiggly line on most ide's though üò¶
19883;method 2 is valid for different purposes
19884;Actually you probably get a compile time error because the method set contains nonunique identifiers
19885;I reckon overriding shouldn't be allowed on my specific usecase. Didn't know it did not allow overriding on the first way üòÆ
19886;so like this?```gotype myStruct struct { x int}func main() { myStrct := myStruct{x: 10} doSomethingWithStruct(&myStrct)}func doSomethingWithStruct(strct myStruct) { strct.x += 10}``` this would work to modify the passed in struct instead of making a copy and throwing that away later?
19887;yup
19888;yay
19889;i love it when i finally get things
19890;Method two is type embedding which creates an anonymous field combining the method sets of both types
19891;Marshalers won't be happy
19892;So someone can do for example `t.Loader = somethingSomething`
19893;ok i really dont want to learn that right now maybe next time
19894;Right?
19895;The anonymous fields will get the same name as the type
19896;I see. Interesting!
19897;Exactly SHT
19898;Because the field is exported by default as well
19899;Uhm so if I use lowercase for the interface name it will behave exactly like the first method of doing this
19900;Aaaa gotcha
19901;No it will still be different
19902;as you still don't have an implementation
19903;You only define that is will contain a certain interface
19904;Which is nil unless you set it
19905;at _runtime_
19906;I definitely do want to make sure it is implemented at compile time
19907;Only the first option does that üôÇ
19908;Get smarter every day! Thanks for the insight!
19909;No problem
19910;Cheers! üòÑ
19911;https://play.golang.org/p/sgvdVvV2Uhx
19912;"Is it possible to create structs without knowing the value of what\'s going to be inside them? Like a map functionality but using dot notation:```type test struct{ jjj interface{}}var ( yoooo = test{ Hello: yo"" })```"
19913;no
19914;Cool
19915;could someone help me with the promoted fields?https://play.golang.org/p/9wsiWNEXtl
19916;func NewFoo() Updater tip: return structs/ptr accept interfaces
19917;examples will help me _a lot_ at the moment
19918;hello I have this kind of data to unmarshall : `map[ToggleLike:[map[id:141288] map[id:355673]]]` and I need to build a struct to receive it but I can't figure it out
19919;```go // Bad func NewBananaReader() io.Reader { return &BananaReader{} } // Better func NewBananaReader() BananaReader { return &BananaReaader{} } func AcceptAReader( w io.Reader) {...} ```
19920;ok so swap `Updater` to `foo` got it
19921;that doesn't fix the promoted fields
19922;https://play.golang.org/p/1bCydBDlZhe
19923;https://enterprisecraftsmanship.com/posts/returnthemostspecifictype/
19924;nop was just a side tip
19925;on the code snippet stdio sent
19926;then thank you for the tip
19927;return the most specific type accept the most generic type
19928;not sure what you mean by promoted fields
19929;the error message
19930;oh  I just didn't run the code hah
19931;you need to declare fully like
19932;```go&foo{ ValueStruct: ValueStruct{ ValueProperties:{ last:0, rolling:0, }, },} //well I'm lost already```
19933;oof
19934;how come i need to declare the field names?
19935;it worked when there was only one level of embedding
19936;you can still do
19937;foo.last = 1
19938;but you need to specify on initialization
19939;as it said cannot use promoted field on struct literal
19940;oh i think last time i had Desc inside foo so that does align with what you are saying
19941;https://play.golang.org/p/uKfy28hhqSI
19942;what's going wrong here?
19943;missing comma
19944;after Desc:
19945;how come it needs a comma?
19946;go likes it
19947;me too
19948;that's how structs do
19949;the commas are part of the syntax
19950;helps the compiler know where things start and stop
19951;"like a ; for listing stuff ü§î"
19952;"ok so i have thishttps://play.golang.org/p/VtlPXAaStin is there a better way to write the `updates` function? could i please have some general critique (do x not y; placement of types/funcs etc)"
19953;maybe it needs more `func() func(int) func(int) func(int) error {`
19954;am i dumb or is the test postfix dumb for testing private methods
19955;Or should I be exposing my private methods by wrapping them
19956;it just seems like a weird enforcement
19957;sometimes you just want to test public stuff ü§î
19958;but you can discard the package pkg_test
19959;if the file is _test.go is fine
19960;hmm ok
19961;how do i iterate through every item of that type of struct?
19962;nevermind
19963;what are the parameters for `append`?
19964;the slice to append to and the element(s) to append
19965;whats a slice?
19966;something covered on go tour?
19967;is that a table?
19968;ok look
19969;```govar blocks []Blocktype Block struct { x y int32}func NewBlock(xpos ypos int32) { append(Block{xpos ypos} blocks) //what else do i add here?}func DrawBlocks() {}```
19970;`blocks` is a slice
19971;oh ok
19972;in C++ thatd be vector afaik
19973;https://tour.golang.org/moretypes/15
19974;so `append(blocks Block{xpos ypos})`?
19975;`blocks = append(blocks Block{xps ypos})`
19976;oh so its like `x = x + 1`?
19977;but with slices?
19978;basically
19979;I'm having this issue with pgx where I'm storing time.now() but its giving me back a different value
19980;have you tried to store time.Now().UTC()?
19981;mm its behaving now
19982;Oh
19983;doggy doggy woof woofbottom text
19984;so
19985;hang on
19986;so ` res.CreatedAt.Equal(now)`
19987;fails
19988;but
19989;now.Equal(res.CreatedAt) passes
19990;oh it passed once
19991;MMM
19992;i am upset
19993;Only way that would happen is because one of them has a wall clock
19994;and the other one doesn't
19995;https://golang.org/src/time/time.go?s=10280:10312#L255
19996;```Error Trace: posts_dao_test.go:87 Error: Not equal:  expected: time.Time{wall:0xbfc7c3309e8af138 ext:40002101 loc:(time.Location)(0x1534240)} actual : time.Time{wall:0x1e8af070 ext:63733533762 loc:(time.Location)(0x1534240)}  Diff:  Expected +++ Actual @@ 1,4 +1,4 @@ (time.Time) {  wall: (uint64) 13819228595195408696,  ext: (int64) 40002101, + wall: (uint64) 512422000, + ext: (int64) 63733533762, loc: (time.Location)({ Test: TestDAO_UpsertEntry/Updating_values_from_votes_upsert_with_comments_upsert```
19997;yeah
19998;wall clock bad
19999;does it matter
20000;i dont know what that means
20001;None
20002;like
20003;wall clock isn't bad btw. It is the best method of indicating time. A monotonic clock is the best for measuring duration
20004;the time package explains the difference
20005;But those are different times for sure with the times being _way_ off
20006;sooo
20007;should i be testing against the monotonic clock reading
20008;do i need to ensure my wall and monotonic clock readings are in sync
20009;i guess this means i dont store the monotonic clock reading in the DB
20010;Is that important?
20011;The time stored in the DB has a different resolution than the variable I guess
20012;which means they will never be 100% equal
20013;you'll have to assert weather it is close enough
20014;same second or millisecond for example
20015;They won't be equal down to the nanosecond but I doubt that is importatnt
20016;gotcha
20017;@mmacheerpuppy guess you can use time.Truncate
20018;Which will strip it from monotonic values and stuff
20019;This is my safe haven. All of the zoomer javascript devs were really pissing me off :hugged: :gopher:
20020;so what exactly is new in go 1.15?
20021;have any of you tried implementing runtime safe generics in go?
20022;computer go zoom
20023;That doesn't exist yet
20024;1.15 will allow for embedding tzdata
20025;wasn't there a github issue that suggested a design pattern for generics in go? got a lot of positive feedback a couple months ago? (it was a suggested implementation)
20026;Generics yeah
20027;There is the go2go tool right now for experiments
20028;But we won't see that mainlined anytime soon
20029;tbh the fact that the only thing people complain about in go is the lack of generics means we\'re headed in the right direction
20030;you missed error handling
20031;"I think the main problem with JS/TS as a stack/community is that people are trying to fix problems that are inherent to node by building more libraries and adding shit; which imo is like pouring gas on a fire"
20032;wtf do you mean? Go's error handling model is beautiful and superior to that of exception handling in other langs
20033;the fact that you error is an interface is so elegant
20034;and go enforces good practice/coding
20035;the go2go sytnax is kinda weird
20036;I think that being able to just define the same function with different args works fine
20037;I guess it's not really D.R.Y compliant
20038;Is there a way to completely mock the implementation of a go function in test?
20039;sure proper application of interfaces
20040;I didnt get that any example?
20041;can I use json without using a predefined struct?
20042;need to parse web responses and if something goes wrong they won't match that struct ü§î
20043;make custom unmarshalling rules
20044;@Akandesh what's wrong with using a struct? Why not just validate the struct fields?
20045;main reason is that i'm very unfamiliar with how this would be done
20046;the Go way seems very unlike javascript/php/c++ way
20047;"I think iterating over struct fields isn't runtime safe IIRC; you could use the . syntax to sanitize/check though"
20048;yeah it's object oriented composition so ofc it's different. It's more similar to gcc
20049;bro once you know go learning C is such a breeze. Learned that shit in like 15 mins
20050;:^)
20051;seems like I can read it into a map though
20052;seems like it needs to know the types of the map so kinda useless still
20053;yeah you could use a map but you'd use the object oriented format/syntax if you dropped using structs
20054;"also you can't have individual types for map items; so probably not what you want to do here"
20055;yea
20056;can you show me some sample code? @Akandesh
20057;there are a lot of french people here. What gives?
20058;"im so used to being able to take json_object[""key""].GetInt() or .GetString() etc"
20059;that's what the json module is for
20060;but you unmarshall to structs not maps
20061;you sure you dont want a map?
20062;like first json_object = json.Parse(jsontext)
20063;nah you scan to a struct for json unmarshalling
20064;so if I went the struct way and I know I got 45 different variations how would I identify which to use?
20065;what do you mean by 45 different variations? @Akandesh
20066;one of them is for errors with error reason. then rest gives server some data and expects a return from a database for example
20067;and the data it gives can vary in type etc
20068;is this code proprietary or can you share it?
20069;(its a tcp server communicating with client)
20070;is it over http or raw tcp?
20071;and server also makes requests to website sometimes to get data from database
20072;server is over tls now
20073;web requests https
20074;ok but is it uses http or raw tcp?
20075;¬Ø\\_(„ÉÑ)_/¬Ø
20076;ah ok
20077;http then
20078;and there's not much code to show you really
20079;good the reason I asked that is because most of the json module stuff in go interfaces with http headers and shit
20080;https://github.com/firstrow/tcp_server/blob/master/tcp_server.go
20081;using this but changed onMessage to take []byte instead of string and changed it to recieve header with size first etc
20082;ü§î
20083;yeah for json conversion you do `[]byte(example)`
20084;it is though
20085;sexy asf
20086;best syntax in the mofucking world
20087;oh right
20088;just realized I actually send a header
20089;this header will always be the same and will tell it what to expect
20090;so that way I can have predefined structs
20091;"question remains though. When I do GET http requests. What if there\'s a error and it response with a body like `success: false reason: gagoo""` (in json)"
20092;how would I check this ü§î
20093;guys what if we trolled/invaded benawad's/the typescript discord server?
20094;bruh
20095;just leave the frontend people be
20096;I write backend in TS sometimes :|
20097;> guys what if we trolled/invaded benawad's/the typescript discord server?@Tarek then it would be a pointless waste of everyones time
20098;they're not frontend people. They're the motherfucks who write JS in backend
20099;for the memes bro
20100;go revolution
20101;we live in a society
20102;https://tenor.com/view/dancinggracefulfeelingitjoaquinphoenixjokergif14962050
20103;ok buddy
20104;go devs are oppressed üò¢
20105;Uhmm. Let's not call people retards or be condescending towards js devs
20106;Thanks
20107;fair
20108;That was a swift end to the revolution
20109;no but let's still make fun of js backend devs üòÇ
20110;Nah no room for that on this server
20111;Please behave
20112;k m8
20113;let's write bots in Go and harass them !!
20114;ü§î üß†
20115;I haven't actually used the discord go lib. How is it?
20116;> let's write bots in Go and harass them !!@Akandesh let's not. And stop this discussion already
20117;rip you mods are no fun üò¶
20118;We have a very different definition of fun
20119;haha was sarcastic
20120;We have a couple of go libs for discord. Notably #discordgo #disgord and #arikawa
20121;Discordgo is a simple wrapper. Disgord is similar but more modular and Arikawa provides more abstractions for bots
20122;is it common to use dep injection for json marshallers?
20123;discordgo is the most popular one.I guess i'm really biased towards the python syntax cause of annotations and the event handling.
20124;I just rewrote disgord to allow json dep injection but idk how common this is
20125;dep injection isn't really a think with go right? Cause of the module system and other shit (packaging system/enforcement)
20126;I see the gin framework just use jsoniter build tag
20127;yeah. Gin's wrapping/REST abstraction is super nice
20128;Go has implicit interfaces so you can plug in a different implementation
20129;different implementation of the package system/gomods?
20130;that's cool
20131;No
20132;I have no idea what json dep injection means but Arikawa does have swappable json implementations
20133;how practical that is is unknown
20134;just simply that u can do```goconf := config{ Unmarshaler: json.Unmarshal,}```
20135;instead of building it with a specific tag that's limited to what disgord offers
20136;https://godoc.org/github.com/diamondburned/arikawa/utils/json#Driver
20137;and how do you use that?
20138;just swap default on init
20139;oh
20140;hey
20141;None
20142;I used to have it in config but I removed that at one point
20143;discord doesnt use uint64 they use int64
20144;so youll have snowflakes with negative values
20145;isn't that only when their Backend behaves in a dumb way
20146;yeah but it messed with disgord a few times
20147;someone got a negative id yesterday but I assumed that was only because GuildFolder is a user API
20148;when is a negative id ever useful too tbh
20149;it's not
20150;even the snowflake spec says it's supposed to be unsigned
20151;discord is just dumb which isn't news
20152;lmao
20153;isn't ur httputil completely locked to json std? like how could i swap to say jsoniter using ur code?
20154;// Default is the default JSON driver which uses encoding/json.var Default Driver = DefaultDriver{}
20155;nvm im dumb
20156;the way I impld it is pretty locked into stdlib yeah
20157;like if you want to use fastjson you'd have to basically make a gigantic type switch that guesses the type
20158;the way u allow for changing the json dep is nice tho
20159;I can do an OOP way but ugh it gets messy quickly
20160;especially with custom json unmarshal methods
20161;oh hey https://github.com/segmentio/encoding
20162;wew
20163;alright so im just gonna drop the config injection and steal arikawa tech shhhhhh
20164;bruh
20165;hey im giving u creds
20166;yeah it's fine
20167;just bruh
20168;bruh
20169;alright time to rewrite it again
20170;<3
20171;do ppl use `runtime.SetFinalizer` much?
20172;Nah
20173;Cursed method
20174;Means you are doing cgo 9/10 times
20175;I've seen some proposal for removal but some ppl used that to clean up c stuff
20176;CGO cursed
20177;I was thinking in some gpu resource cleaning with that ü§î
20178;the thing w/ SetFinalizer is that it's not guaranteed to be executed
20179;which is kind of tedious
20180;only if zero objects or something
20181;> There is no guarantee that finalizers will run before a program exits so typically they are useful only for releasing nonmemory resources associated with an object during a longrunning program.
20182;yeah like gpu stuff gl.DeleteTexture would be ok I guess
20183;now f.Close() wouldn't
20184;is it bad practice to use variables from other files within the same package?
20185;no?
20186;that's how Go's package manager work
20187;I find that quite confusing through but then I'll try to get used to this
20188;```govar a[5]intfunc main() { a = [5]int{0,1,2,3,4}}```why is it necessary to repeat the `[5]int` and not just have `a = {0,1,2,3,4}` if the variable is already declared?
20189;@Werner#2923 just structure it properly
20190;usually filename describes struct and its methods
20191;is there a time limit on edits here?
20192;"```govar a [5]inta = [5]int{0,1,2,3,4}// Ptr to array containing 5 ints var pa [5]int = &afmt.Printf(""%#v\ pa)// Ptr to element within a[3]var pa3 int = &a[3]fmt.Printf(""%#v\ pa3)```is this correct?"
20193;correct how?
20194;the comments?
20195;yes
20196;ig
20197;yeah
20198;i'm deliberately avoiding `:=`
20199;https://www.youtube.com/watch?v=XISnO2YhnsYthis is a great video but the vocal fry is very annoying
20200;"```govar userSearch UsersqlStatement := `SELECT  FROM userData WHERE Email=$1 OR Username=$2;`row := db.QueryRow(sqlStatement Email Username)row.Scan(&userSearch.UserID,&userSearch.Attributes)``` the issue is user is structured like ```gotype User struct { UserID int `json:id` Attributes userAttributes `json:attributes`}type userAttributes struct { LocalArea string `json:localArea` FollowingAreas []string `json:following`}```and my DB is formatted like this ```sql CREATE TYPE userAttributes AS ( LocalArea varchar, FollowingAreas varchar ); CREATE TABLE userData(UserID SERIAL PRIMARY KEY  Attributes userAttributes);```"
20201;so i get the error ` unsupported Scan storing driver.Value type <nil> into type auth.userAttributes`
20202;so are custom types not allowed ?
20203;Iirc on the first question go avoids implicit typing of structured types
20204;Outside of a few spots defined by the spec
20205;what do you mean ?
20206;In response to beep
20207;you can't scan into a struct
20208;oh not me
20209;you need to use db tags and sqlx if you want to try to
20210;I may be wrong on that though
20211;ah ok I'll try sqlx
20212;would that count as an ORM ?
20213;because I am trying to avoid that
20214;https://golang.org/ref/spec
20215;@beepsandboops most any and all specific spec questions are answered in here
20216;One good way to think about ‚Äúwhy does go do X‚Äù is ‚Äúwould it add additional complexity to the compiler
20217;If so without huge benefits then it probably isn‚Äôt done
20218;sqlx is not an ORM no
20219;any idea which segment i need to look through?
20220;Uhh you generally just just search the thing you are curious about
20221;Like ‚Äúimplicit‚Äù will give you a bunch of items on implicit conversions
20222;can someone explain the point of this to me
20223;"```gopackage mainimport ( bytes"" crypto/shax256"" fmt"")type BlockChain struct { blocks []Block}type Block struct { Hash []byte Data []byte PrevHash []byte}func (b Block) DeriveHash() { info := bytes.Join([][]byte{b.Data b.PrevHash} []byte{}) hash := sha256.Sum256(info) b.Hash = hash[:]}func CreateBlock(data string prevHash []byte) Block { block := &Block{[]byte{} []byte(data) prevHash} block.DeriveHash() return block}func (chain BlockChain) AddBlock(data string) { prevBlock := chain.blocks[len(chain.blocks)1] new := CreateBlock(data prevBlock.Hash) chain.blocks = append(chain.blocks new)}func Genesis() Block { return CreateBlock(""Genesis []byte{})}func InitBlockChain() BlockChain { return &BlockChain{[]Block{Genesis()}}}func main() { chain := InitBlockChain() chain.AddBlock(""First Block after Genesis"") chain.AddBlock(""Second Block after Genesis"") chain.AddBlock(""Third Block after Genesis"") chain.AddBlock(""Fourth Block after Genesis"") chain.AddBlock(""Fifth Block after Genesis"") chain.AddBlock(""... Block after Genesis"") chain.AddBlock(""... Block after Genesis"") chain.AddBlock(""... Block after Genesis"") chain.AddBlock(""... Block after Genesis"") chain.AddBlock(""... Block after Genesis"") chain.AddBlock(""... Block after Genesis"") chain.AddBlock(""... Block after Genesis"") for _ block := range chain.blocks { fmt.Printf(""Previous Hash: %x\ block.PrevHash) fmt.Printf(""Data in Block: %s\ block.Data) fmt.Printf(""Hash: %x\ block.Hash) }}```"
20224;You‚Äôre going have to be more specific
20225;ok so I know it generates blocks based off of ones before themselve
20226;but why would anyone do this
20227;Like what use cases are there
20228;the technical term is merkle tree if you want extended reading
20229;or perhaps merkel
20230;Unless you have a specific question we don't really have an answer
20231;It's got to do with verifying the integrity of the tree.
20232;Because each child has a hash that includes a hash of its parent's hash the entire tree becomes linked
20233;Any modifications to any part of the tree result in unrepdictable unfakeable (hypothetically) changes to the child hashes
20234;oh I see
20235;git is an example of this
20236;every commit has a hash id which is a hash of both its contents and its parents hash id
20237;because these are all hashed together you can verify that each step derives correctly and truthfully from the previous
20238;oh cool
20239;haha
20240;tysm xd
20241;it's a VERY nontrivial subject
20242;so don't feel bad about it being foggy
20243;it's the confluence of a LOT of knowledge domains
20244;for a very abstract purpose
20245;I mean I can see why you would need to see if something is or isnt truthfully linked. It makes sense for security of things
20246;yeah
20247;so a blockchain is just a merkle tree
20248;interesting haha
20249;https://play.golang.org/p/h1BUW_xkuPmthis is kind of confusing me. if i am able to use a type that fits the underlying type then it\'s not clear why i have to repeat the underlying type during assignment since the compiler rejects if it\'s incorrect anyway
20250;where instead of the contents of this file changed it\'s this money went from this wallet to that wallet
20251;And because of the way the hashes descend/derive from each other you can independently verify that when someone says they gave you .00005 BTC the transaction actually happened because in order for them to have that money they'd have to receive it from somewhere which would be a transaction in the tree you could identify and verify
20252;and so on as far back as you need
20253;> then it's not clear why i have to repeat the underlying type during assignmentbecause Go is like that
20254;period
20255;hmm
20256;It‚Äôs literally just that it doesn‚Äôt implicitly do that
20257;If I made an api for a program similar to this I could make a cryptocurrency?
20258;uhh that sentence doesn't quite
20259;Crypto is more than just a Merkel tree
20260;oh duh
20261;Quite the leap there
20262;Right
20263;Cryptocurrencies typically involve a merkel tree somewhere
20264;whats probably the simplest application of a merkel tree
20265;but they have to have algorithms for generating distributing and verifying solutions to problems
20266;etc etc
20267;like that I could do for a project
20268;well
20269;merkel trees are a Thing
20270;as in
20271;people will have written about them at length
20272;If you look up untyped constants you can see all the rules around those conversions too
20273;Beep
20274;strongly recommend some independent reading
20275;oh oki
20276;well ty
20277;I like ur site @Madxmike lol
20278;I‚Äôm creating a mongoDB connection in my main func that creates a ctxI need a ctx within one of my route handlers so that I can connect to the database with db.InsertOne(ctx data). I‚Äôm trying to find the best way to pass around that ctx to all my route handlers without any global storage of the ctx. Does anyone have a good answer for this? Maybe a link or youtube?
20279;If I have the struct ```gotype Foo struct { Id int }```And the assignment ```govar f Foof = {Id: 1}```
20280;Do you expect this to work
20281;also just found out abt hugo. Pretty cool
20282;Maybe depending on the language
20283;Might make a blog now haha
20284;But that‚Äôs just a language choice
20285;Of how strictly typed you want things to be
20286;untyped constants on the spec link?
20287;Yeah there are a whole bunch of things in there on implicit ness
20288;And how things are typed
20289;Like a [4]int{4 3 2 1} is an array of 4 untyped constant ints when it is evaluated
20290;could you help me figure out where to start on this link?
20291;there's a lot
20292;how can i remove 30s from time.Now()
20293;.Add(30  time.Second)
20294;it uh
20295;Uhh like everything from ‚Äúconstants‚Äù
20296;Until you read ‚Äúblock‚Äù
20297;i did that and it fucked it
20298;wdym
20299;Like I said I usually just ctrl f some idea
20300;None
20301;None
20302;And read the surrounding docs
20303;https://play.golang.org/p/2ycMJfsvw_f
20304;It‚Äôs only something g like 30 pages in total
20305;what's wrong w/ that int
20306;i have no clue
20307;wat
20308;Unlike something like the c++ spec which is like 700 lol
20309;i don't see anything wrong
20310;it's like
20311;another decade
20312;also you don't need UTC()
20313;None
20314;that's UnixNano
20315;not Unix
20316;UnixNano is unix in nanoseconds
20317;@Jordan Cason I would have a struct and attach the serveHttp method there
20318;parsing it like it's seconds will yield that
20319;probably
20320;I‚Äôm like 70% sure something like `{4 3 5}` would be a untyped constant array of 3 untyped constant ints
20321;Which is a weird type
20322;Then have the mongo stuff be a struct field
20323;oh yea that was it
20324;thx
20325;And could be hard to reason about
20326;May be wrong about that specific thing though
20327;np
20328;what causes this error?https://play.golang.org/p/2kQaH1zrZu8
20329;The Zero value of a pointer is nil
20330;Pointer and Pointer are two distinct types
20331;@Sgt_Tailor even the ctx? Ive read somwhere that you should not store ctx in a struct.
20332;The zero value of Pointer here is nil
20333;right but how come it's erroring if you set a value?
20334;Not sure what ctx is in this context
20335;Where the zero value of Pointer would be like {0 0}
20336;Because the pointer is nil
20337;What are you setting the value on
20338;There is no data there
20339;oh i see
20340;Take away the pointer and it would work
20341;@Sgt_Tailor its the mongoDB context
20342;that was created in my main function
20343;Because it would initialize to the zero value of Pointer
20344;Point
20345;Sorry
20346;Read it wrong lol
20347;Not familiar with mongo but I'm sure there's plenty of examples.
20348;For sql I normally have a repository abstracted away
20349;And have that abstraction in my http server
20350;@Sgt_Tailor I think im just still trying to wrap my head around what all a context is used for.
20351;And how it should be used
20352;contexts is one of the messier things in Go tbh
20353;it did take me quite a while to understand what it's for
20354;but it's basically used for passing variables around and provide a mean of cancelling things (mostly IO like net)
20355;This isn't even the context package @_diamondburned_
20356;But mongo.ctx
20357;oh
20358;in the pointer video (C) it has `int px py pz` > `int px py pz`is this gotcha relevant for golang also?
20359;`var px py pz int` is the golang equivalent isn't it?
20360;`px` `py` and `pz` all have the type `int` in your Go code.
20361;ok so the segment in the video is irrelevant
20362;still interesting though
20363;thanks Lethal
20364;Yeah that's a little quirk of C that catches a lot of people
20365;"You'll very rarely see multiple variables declared on a line in C/C++; you'll see it more in Go because of the lack of that quirk as well as that functions can return multiple variables so even if you're not calling a function it feels a bit more natural to separate variables with commas"
20366;out of curiosity the youtube comments are saying something about `type name` and `type name`so would this work `int px py pz`?
20367;In C yes those are exactly equivalent
20368;Just a stylistic thing
20369;i guess the issue is just that it's not clear if the type is a pointer to int or int
20370;`int px py pz` is that valid or not?
20371;Sure
20372;`py` and `pz` have type `int ` `px` has type `int `
20373;oh so it's valid but it falls to the same gotcha
20374;i don't even use C and i find this discussion interesting üôÇ
20375;Hello I have a negative number I need to pass to a system call but since the function takes all uintptrs I'm getting an error when attempting to pass it/cast it anyone know how to deal with this?
20376;in a `main` package is it convention to capitilize the first letter of a type or no?
20377;also what about struct fields
20378;If the function only takes uints I don't know if it actually makes sense to pass it a negative
20379;the negative is from a constant for a call to a winapi function
20380;but .Call() here only takes uintptrs no matter what
20381;up to 15 parameters
20382;man windows is bad
20383;what syscall is this
20384;GetWindowLong
20385;trying to use GWL_EXSTYLE which is 20
20386;oh no windows
20387;how are you calling it from go?
20388;i'm not super familiar with how winapi works in go
20389;https://github.com/AllenDang/w32/blob/master/user32.go#L428
20390;it looks like you can just convert it to `uintptr` anyway and pretend it's ok
20391;i guess? ???
20392;"```user32 = windows.NewLazyDLL(""user32.dll"")[...]procGetWindowLong = user32.NewProc(""GetWindowLong"")[...]wl _ _ := procGetWindowLong.Call(uintptr(hwin) uintptr(win.GWL_EXSTYLE))```"
20393;can't hurt to try :^)
20394;golang complains when I do that
20395;and doesn't compile
20396;what's the error?
20397;oops
20398;```cannot convert win.GWL_EXSTYLE (untyped int constant 20) to uintptrcompiler```
20399;if you're using the win package https://github.com/lxn/win/blob/master/user32.go#L2671 can you use the function it provides?
20400;wasn't aware it had that
20401;:)
20402;ty i'll check this out
20403;"Just for posterity the reason that what you have doesn't work is specifically because `win.GWL_EXSTYLE` is an untyped constant as the error mentions; to convert the value to another type that the value isn't representable in you need to make it nonconstant"
20404;e.g. ```gogwl := win.GWL_EXSTYLEuintptr(gwl)``` works fine
20405;ah ok
20406;ty
20407;But yeah abstractions around syscalls are always nice üòÑ
20408;i think you can also do `uintptr(int(win.GWL_EXSTYLE))` maybe?
20409;huh why the indirect conversion
20410;or extra var :Thonk:
20411;I don't think so because `int(n)` is still a constant
20412;The compiler can bounds check that
20413;interesting :Thonk:
20414;```gouintptr(int(1))./prog.go:8:21: constant 1 overflows uintptr```
20415;oh
20416;that's fucky
20417;oh I see now
20418;like extremely so
20419;I've never seen negative enum consts tbh
20420;but then you make it nonconstant and convert it and the compiler is like haha ok sure no overflow?
20421;:/
20422;Right on ü§ò
20423;i hate computers
20424;I'm p sure that behavior is defined in Go
20425;Yeah I mean it's definitely welldefined I can see why it'd be surprising though
20426;You feasibly could have the compiler reject conversions on nonconstants when it can prove an over/underflow but that opens up a large can of worms on the implementation side and makes it even harder to deal with situations like these
20427;It seames as though context is kinda in a way like a promis in javascript.
20428;if i have a http server that calls method from x.go since each http request runs in its own goroutine does each request have it's own init function called from x.go or?
20429;init()?
20430;that's only called once on runtime
20431;ever unless explicitly called again
20432;alright ty thats what i thought just wanted to make sure
20433;you can explicitly call init?
20434;huh did not know that
20435;oh I don't think you can
20436;https://play.golang.org/p/ZQZVJXHEXkL
20437;unless you meant something esle
20438;What‚Äôs the best way to check if a tcp stream based connection is live
20439;"i am looking at this https://github.com/jmoiron/sqlx```govar schema = `CREATE TABLE person ( first_name text, last_name text, email text);CREATE TABLE place ( country text, city text NULL, telcode integer)`type Person struct { FirstName string `db:""first_name""` LastName string `db:""last_name""` Email string}type Place struct { Country string City sql.NullString TelCode int}```can someone explain why Email doesn\'t have ```go`db:""email""````"
20440;and what sql.NullString is
20441;nllstringis p self explanatory
20442;it's a nullablestring
20443;I'm guessing Emaild oesn't need the tag because matching tags is not case sensitive
20444;so `Email` == `email`
20445;oh right
20446;Guessing in database they wanted the field to be first_name instead of FirstName etc
20447;is there something wrong in it being firstName ?
20448;not really?
20449;Its just more SQL to have fields underscore separated
20450;^
20451;snake cased
20452;Not any particular reason I think
20453;oh didn't know that
20454;thanks
20455;lol i just do `firstname`
20456;Probably because in SQL case doesn't mater wheras in most languages case is used to denote separate words
20457;and customerpreferredfirstname is less readable than customer_preferred_first_name
20458;not sure why you'd want a name that long but sure
20459;you wouldn't just an extreme example
20460;What would `tx := db.MustBegin()` be
20461;is this a ~~pointer ~~ cursor?
20462;sql.Transaction probably
20463;p sure that's pseudocode
20464;oh wait sqlx.Transaction
20465;because it's in sqlx
20466;Yeah can't be pointer if its := can it?
20467;what's that üòÖ
20468;i meant cursor
20469;what's an sql transaction
20470;cursor?
20471;i don't remember using it in the sql package
20472;:= can set a pointer it just means declaring a new variable
20473;and a transaction is implicitly started by the db engine on every exec/query
20474;it's basically a lock but not really
20475;why can't/shouldn't I do db.MustExec instead of using transactions (tx)
20476;> := can set a pointer it just means declaring a new variable@_diamondburned_ You're right its just not explicitly cast to pointer
20477;> why can't/shouldn't I do db.MustExec instead of using transactions (tx)@tfyl In case statement fails midway through while data has been modified
20478;what would happen
20479;Nothing but you might have to manually roll back a change you made as part of the statement
20480;and is this only when inserting / adding / modifying data
20481;not when querying (reading)
20482;> In case statement fails midway through while data has been modifiedalso when you want to do multiple queries/execs without any data race
20483;Yeah exactly
20484;> why can't/shouldn't I do db.MustExec instead of using transactionsprobably because MustExec would panic when fail
20485;same for reads but SQL usually handles that
20486;which you shouldn't do
20487;so i should always use transactions
20488;p muhc
20489;For simple reads probably not unless its really necessary
20490;But its prooobably best practice
20491;right okay. I don't have much experience with DBs so I'm learning quite a lot
20492;thank you
20493;Does anyone know how to decode a JWT?
20494;https://jwt.io/#debuggerio
20495;It has been surprisingly frustrating to find packages or examples
20496;To find packages?
20497;You haven't seen the many on the official jwt website..?
20498;to _find_ packages that work I guess...
20499;They all work
20500;I'll look there I haven't gotten to that website
20501;Well I'm sure they do it is just that this is all black magic to me at the moment
20502;i liked `github.com/brianvoe/sjwt` but it only supports HS256
20503;I'm trying to decode a token I got from Azure AD but the packages I used are asking for a verification key
20504;I've tried certs and secrets I got from Azure
20505;but none of them work
20506;I don't know what it wants in order to decode the JWT I got.
20507;Could be a secret key that only they have access to
20508;I'm developing against an Azure account I own üòÑ
20509;I'm learning as I go
20510;Yeah that's part of the point of JWT. You can hash/encrypt them to prevent tampering
20511;Right
20512;But I can't find the verification key this thing wants
20513;Nor do I know where to set one if I haven't already
20514;That's my point. You probably aren't supposed to crack open this particular JWT
20515;But it has the claims of the user I want to authenticate...
20516;When I say to prevent tampering this is what tampering refers to
20517;Is code this trying to get around the online login system ?
20518;Actually I managed to authenticate the user now I need their info (name email etc)
20519;No it redirects to Azure for authentication
20520;after that Azure redirects back to my server
20521;the slack invite seems to be downdoes anyone have an alternative url ?
20522;Then I don't know what I need in order to get the information from the user I authenticated
20523;All I know it I got an access_token in their request to my server
20524;and putting it in jwt.ms shows the data I want
20525;If jwt.ms can decode the JWT so could I or so I thought...
20526;I tried `base64.URLEncoding.DecodeString(myToken)`
20527;sometimes it works
20528;sometimes it panics
20529;if i had a function with 3 params and a 3 item slice. how would input the slice would i need to use `...` ?
20530;Don't think go will allow that
20531;Because the length of the slice isn't know at compile time
20532;So unless the functions has variadic params as well it won't work
20533;Look at this example: https://golang.org/doc/effective_go.html#append
20534;it uses `...`
20535;Yes as I said
20536;It will work when the function has variadic params
20537;https://github.com/lestrratgo/jwx btw
20538;> It will work when the function has variadic paramsi think for what i'm using it for it does
20539;Man... I input this JWT on a base64 converter online and it decodes fine. In Go it panics...
20540;I'm not going to be able to sleep until I get to the bottom of this.
20541;show code + input
20542;Go to https://www.base64decode.org/ and input this
20543;going to need the actual input üòõ
20544;I'm destroying this azure app today so I don't care if you see the stuff in it
20545;That isn't valid base64 btw
20546;How can you tell? I'm dying to learn üòÑ
20547;i would probably delete that it has identifying information
20548;invalid input!
20549;sure
20550;Pretty much everything in there is fake and will be destroyed today
20551;passing it to `base64 d` give an error at least. There might be some padding or something
20552;Hmm
20553;it's likely unpadded base64
20554;So `base64.NoPadding` could work
20555;yes
20556;or base64.RawStdEncoding
20557;I've tried so many things I'm not sure I went that route
20558;I'll try it thanks!
20559;Ah right it is unpadded
20560;misses exactly one padding char in this case
20561;But using the function weenie mentioned should work
20562;I'll try `base64.NoPadding` first
20563;And read the docs for `RawStdEncoding`
20564;Oh! Raw is unpadded! Cool!
20565;```panic: illegal base64 data at input byte 1016```
20566;the panic you probably got
20567;Yes
20568;with regards to sqlxcan ```go[]string``` be a `varchar`
20569;I even wrote code to get to the exact byte and display it.
20570;but I don't understand base64 well enough to get to the solution myself
20571;that would just be `token[1015]`
20572;```go token := <your token> t err := base64.RawStdEncoding.DecodeString(token) if err != nil { panic(err) } fmt.Println(string(t))```
20573;I didn't know you can index a string
20574;I think I was thinking in terms of Rust or something... Thanks!
20575;Yeah you can get the byte at the byte index of a string that way
20576;Btw `base64.RawURLEncoding.DecodeString` did the trick!
20577;Thanks @Sgt_Tailor and @weenie
20578;np
20579;I just realized your profile pic matches the username üòÑ
20580;It is the only reason I have that nick xD
20581;yeah what a funny coincidence üôÉ
20582;:robpike:
20583;"```goerr = tx.Get(&userSearch SELECT  FROM userData WHERE Email=$1 OR Username=$2; Email Username)``` is this the correct way to enter variables to $1 and $2"
20584;because i get `missing destination name password in auth.User`
20585;What database are you using?
20586;Or...actually the error sounds more like a scanning issue than a parameters issue
20587;i'm using postgres with sqlx
20588;It sounds like your query is returning a `password` column but `auth.User` (the type of `userSearch`) doesn‚Äôt contain a corresponding field to scan into
20589;Then yeah your parameters are fine for Postgres that‚Äôs not what the error is talking about
20590;"```gotype User struct { UserID int `json:id` Name string `json:name` Username string `json:username` password string Email string `json:email` Age int Reputation int `json:reputation` Attributes userAttributes `json:attributes`}``````sqlCREATE TABLE userData( UserID SERIAL PRIMARY KEY  Name varchar, Username varchar, Password varchar, Email varchar, Age int, Reputation int, Attributes userAttributes);```"
20591;Name and password are both there
20592;The field needs to be `Password`
20593;Reflection can‚Äôt access unexported fields
20594;right
20595;(and side note but your JSON tags are also wrong‚Äîthe values need to be quoted e.g. `json:‚Äùname‚Äù`)
20596;oh thanks
20597;didn't see that
20598;how would i stop the error `sql: no rows in result set` from causing the code to stop executing
20599;That‚Äôs fully up to you‚Äîyou control the program flow. You just can‚Äôt touch `userSearch`
20600;i don't actually make it do that though
20601;"```go tx := db.MustBegin() err = tx.Get(&userSearch SELECT  FROM userData WHERE Email=$1 OR Username=$2; Email Username) if err != nil { fmt.Println(err) } tx.Commit()```"
20602;so i don't see why it is
20603;You made the choice of printing the error here.
20604;You can do anything else you‚Äôd like.
20605;(other than dereference `userSearch`)
20606;right i'm just printing
20607;but i get ```2020/08/21 01:51:30 sql: no rows in result setProcess finished with exit code 1```
20608;ok nvm
20609;it's not that
20610;"it\'s an insert after```could not find name Name in &auth.User{UserID:0 Name:""at Username:""at"",```"
20611;how can that work
20612;Name is clearly there
20613;Might want to make sure your table uses lowercase column names unless you are going to quote column names in every query you run. https://stackoverflow.com/a/2878408
20614;good idea
20615;thanks for that
20616;does anyone know why `http.ResponseWriter` has a `Header()` method instead of a normal `Header` field like `http.Request` has? was just wondering
20617;https://golang.org/pkg/net/http/#ResponseWriter
20618;because it's an interface
20619;interfaces can only specify methods not struct members.
20620;oh whoops
20621;it's okay
20622;i had to actually look it up
20623;i forgot or didn't realize it was an interface either
20624;that's pretty dumb of me my bad
20625;another question
20626;but yeah that's ag ood rule of thumb
20627;if you see a getter you're probably dealing with an interface
20628;i just tried writing some golang by hand in a normal text editor and found that i had to refer to the docs a lot especially because I didn't know which types some callbacks had or whether the types were pointers or values. is this normal? and do most people use ides?
20629;It is indeed normal to refer to documentation when writing code using things you haven't memorized
20630;and :vim:
20631;respectively
20632;spoilers you're going to spend the VAST majority of your time in development reading
20633;reading documentation reading your code reading other people's code reading blog posts
20634;about 6% of your time is actually typing code. 4% is swearing at your code. the other 90% is reading.
20635;lol ok thanks
20636;last question now
20637;is there a fast way to find which struct implements a certain interface from the go docs
20638;e.g. i want to see which structs implement `http.ResponseWriter`
20639;not that i'm aware of
20640;it's one of the few foibles of implicit interfaces
20641;it actually wouldn't be hard to write a static analysis tool that does this
20642;"Whats your job title?""""Professional ~~programmer~~ googler"
20643;but i'm unaware of any such tool
20644;alright thanks
20645;@samjmckenzie this is one of the benefits of using Goland
20646;though it is not free unfortunately
20647;well i have a student license
20648;oh okay
20649;but it works very slow on my laptop
20650;ah
20651;it is very RAM hungry
20652;its not that actually
20653;it lags when i type
20654;vscode works very well
20655;something to do with them not supporting metal for mac
20656;i use vscode for web dev atm but something feels off with it
20657;idk
20658;i have always managed to reduce the amount of keystrokes i make with webstorm or phpstorm
20659;I use it on mac and it's fine
20660;yeah i use it on a external monitor though
20661;with retina scaling or some shit like that
20662;which doesn't work well with java text rendering
20663;https://youtrack.jetbrains.com/issue/JBR526
20664;never had that type of problem on my mac
20665;wierd
20666;I do too
20667;lol that issue is 5 years old with 430 upvotes and still no solution
20668;Goland does it @deezy :)
20669;Super nice feature
20670;idk if vim doesn't do it it doesn't exist
20671;doesn't sound like a go error
20672;where EXACTLY is that error coming from? cause i'm 99% sure it's coming from the server you're talking to not your Go code
20673;unless you're using some weird third party http client
20674;yes that's an error message from rails
20675;welp time to check your Rails log
20676;since it's a rails error
20677;oh
20678;welp the service you're talking to does
20679;and it's not going out of its way to help you do what you need to
20680;because that error message is useless
20681;something's different
20682;¬Ø\\_(„ÉÑ)_/¬Ø
20683;spoilers postman has a feature to convert an http request to go code
20684;go nuts
20685;hard to say. something's different but the server is the one throwing the error
20686;and the error provides zero information about what went wrong
20687;soo
20688;you gotta look closer
20689;use wireshark or something and compare the raw requests over the wire
20690;test it with curl
20691;bruh
20692;@deezy
20693;its another sneaker bot
20694;S N E A K E R B O T A L E R T
20695;üëü
20696;:kek:
20697;what's sneakerbot lol
20698;oh lol i just googled it
20699;okay buddy
20700;```goif len(v.SpreadSheetList) > 0{ for i := range v.SpreadSheetList{ if currentPrice < v.SpreadSheetList[i].stop { break }```
20701;if this condition is true
20702;and i do break
20703;and i breaking out of the if statement or for loop here
20704;add some Println()s and find out
20705;shmart
20706;lemme do that
20707;logging is your friend
20708;also
20709;if im changing
20710;the length
20711;of v.spreadsheetlist
20712;while it is trying to iterate
20713;yeah don't do that
20714;will i most likely get some index out of bounds
20715;stuff
20716;just make a new slice of whatevers
20717;igh yea
20718;loop over the original list
20719;and add the results to the new slice
20720;mhm
20721;how does one pass a custom context to a stream handler in gRPC?
20722;way more sane
20723;what happens tho
20724;does the range go based
20725;of what it is rn
20726;or what it was when
20727;it set the numbner of iterations
20728;honestly not sure
20729;i learned many many years ago not to modify anything you're iterating over
20730;down that road lies madness
20731;seriously. if you keep to that rule lots of things get WAY easier
20732;sounds good to me
20733;"simpl;e"
20734;is better:)
20735;yeah don't modify during iteration
20736;because it\'s basically a matter of when does it get len
20737;before iterating or on each condition check
20738;I'm gonna make a playground n test this
20739;ah so if u happen to shorten it
20740;so really when u do range of a sliec
20741;its figuring out the len
20742;of the slice
20743;its not in real time
20744;counting whats ahead
20745;one by one
20746;which is how i thought about it
20747;well I don't know which one it does
20748;I'm testing now
20749;len appears to be precalced https://play.golang.org/p/XikMWZ1Anoq
20750;:thonk:
20751;better for performance but doesn't allow for modifying during iteration
20752;even though that works I feel like I'd want to comment that
20753;yeah definitely
20754;modifying during iteration is not intuitive behavior no matter which way it works
20755;and should generally be avoided unless there's good reason which means comment it
20756;The only time I modify something _while_ iterating is if I'm deleting the current element. You can iterate backwards and do that. But that's it and it's rare.
20757;ah yeah
20758;yea!
20759;i was actually getting at that
20760;needing to iterate backwards
20761;to delete a current element
20762;but my logicw as off somewhere so i decided its best ot keep the slice of like 5 items
20763;then go through the trouble removing it
20764;love the playground example!!!
20765;no prob :)
20766;playground is great for testing stuff
20767;for real
20768;instead of removing it i have a struct with a field that says if i shold check it or not
20769;is that expensive?
20770;or a minimal addition
20771;man
20772;performance is all about orders of magnitude
20773;?
20774;let me put it like this
20775;a little extra flag or smth isn't gonna hit yr performance
20776;let's pretend everything you do in your program costs you some amount of money
20777;let's pretend an if statement costs you 10 bucks
20778;a for loop costs you 15
20779;anything you do in go that is happening locally will cost under 100 dollars
20780;That is it isn't accessing hard drives or the network
20781;hard drive access costs 10,000 dollars
20782;network access is a million
20783;That's what I mean.
20784;When you say if I had a struct member is that expensive?
20785;it has a cost yes but the cost is so microscopic compared to the SIMPLEST of hard drive or network accesses or absurdly expensive algorithms
20786;ah
20787;so negligable
20788;yes
20789;haha sorry just trynat hink in terms of a developer
20790;orders of magnitude
20791;sooner or later i hope to scale upwards!
20792;https://play.golang.org/p/zhTohS_Bea cursed playground
20793;> len appears to be precalcedrange just copies the slice
20794;ah
20795;so i went into the playground!
20796;https://play.golang.org/p/dgz7DOgOz9N
20797;made a test program for removal of elements in a slice
20798;no clue why the out put is what it is
20799;TSLATSLA0[MSFT AAPL NVDA]
20800;MSFTMSFT1[AAPL NVDA]
20801;expected output etc.
20802;but i get this
20803;TSLATSLA0[MSFT AAPL NVDA][AAPL NVDA][NVDA][]
20804;Stock tickers?
20805;yea
20806;just looking at strings here
20807;tho
20808;Did you get drunk and fmt your portfolio?
20809;what?
20810;did i miss smth
20811;rlly obvious?
20812;No clue what you‚Äôre trying to do with your script
20813;every 10 seconds
20814;trying to see if the thing i send is equal to something
20815;in the list
20816;if it is
20817;remove it
20818;and then rewrite the new
20819;list to a file
20820;on my prints i expect it to remove one every 10 seconds
20821;but when i run the program
20822;it removes them all right aaway without looping like it should
20823;So you want to iterate through the tickers in Chanticker list and in each iteration iterate through the symbol list to find the matching symbol at i then remove it?
20824;That‚Äôs what you‚Äôre doing now
20825;@xblooos Running it locally I get ```$ go run chan.go2020/08/21 04:13:36 DEBUG: Firing2020/08/21 04:13:36 TSLA2020/08/21 04:13:36 TSLA2020/08/21 04:13:36 02020/08/21 04:13:36 [MSFT AAPL NVDA]2020/08/21 04:13:36 [AAPL NVDA]2020/08/21 04:13:36 [NVDA]2020/08/21 04:13:36 []2020/08/21 04:13:46 DEBUG: Firing2020/08/21 04:13:56 DEBUG: Firing2020/08/21 04:14:06 DEBUG: Firingfatal error: all goroutines are asleep  deadlock!```
20826;If v == b then print v b and i
20827;Oh I misunderstood your problem my bad
20828;Hence Tesla Tesla 0 msft msft 1
20829;yea
20830;but it happens all in one iteration
20831;of the first symbol being sent through the channel
20832;instead of one by one
20833;n idk why
20834;Because you‚Äôre iterating through the whole list for one func call
20835;And then you don‚Äôt break or return
20836;If you‚Äôre trying to remove a single ticker then do something like pass the ticker with the list or map you want to remove it from unset it or write to wherever you want it then end the func
20837;isn‚Äôt for b:= range chan
20838;supposed to sit n wait
20839;for something to be sent through the channel
20840;Here you iterate through all of the tickers in the range ticker Chan
20841;None
20842;yes
20843;but it‚Äôs a channel
20844;so my fire should be giving it one ticket
20845;every 10 seconds
20846;not all at once
20847;look at your indentation it's wrong I think that might give you a clue
20848;oh poss i think it‚Äôs my brackets
20849;Is that what you expected ```$ go run chan.go2020/08/21 04:19:19 DEBUG: Firing2020/08/21 04:19:19 DEBUG: TSLA == TSLA2020/08/21 04:19:19 TSLA2020/08/21 04:19:19 TSLA2020/08/21 04:19:19 02020/08/21 04:19:19 [MSFT AAPL NVDA]2020/08/21 04:19:29 DEBUG: Firing2020/08/21 04:19:29 DEBUG: MSFT == MSFT2020/08/21 04:19:29 MSFT2020/08/21 04:19:29 MSFT2020/08/21 04:19:29 02020/08/21 04:19:29 [AAPL NVDA]2020/08/21 04:19:39 DEBUG: Firing2020/08/21 04:19:39 DEBUG: AAPL == AAPL2020/08/21 04:19:39 AAPL2020/08/21 04:19:39 AAPL2020/08/21 04:19:39 02020/08/21 04:19:39 [NVDA]2020/08/21 04:19:49 DEBUG: Firing2020/08/21 04:19:49 DEBUG: NVDA == NVDA2020/08/21 04:19:49 NVDA2020/08/21 04:19:49 NVDA2020/08/21 04:19:49 02020/08/21 04:19:49 []```
20850;yea
20851;Look at line 35
20852;yea
20853;the print statement
20854;ohhhhhh
20855;it‚Äôs inside
20856;No the bracket underneath it.
20857;the bracket
20858;.....
20859;Lol
20860;bruh
20861;yeah that if statement is in the for loop üôÇ
20862;Does play go have automatic linting?
20863;We‚Äôve all been there
20864;it does
20865;hit format
20866;e z
20867;You have to click Format at the top
20868;üòÇ
20869;üò¨üò¨üò¨
20870;legit first or second time actually using
20871;gofmt is your friend
20872;Love go linting so far. It‚Äôs kind of nice not having to have endless discussions about style and what not
20873;wait mister turtle
20874;what did u change
20875;in order to get what u got
20876;still in the shits
20877;I only moved the if statement outside the for loop
20878;(and used log for time stamp)
20879;(and added 2 debug lines)
20880;oh
20881;bruh didn't see that either
20882;https://play.golang.org/p/oA6FyhOYKe
20883;either im blind or blind
20884;https://play.golang.org/p/bzrKTt1ENv9
20885;im very bliind
20886;i see it
20887;Does anyone know how to make frameless apps in Wails? I know its possible (https://github.com/wailsapp/wails/issues/338) but the docs dont say how. ty in advance (btw if u answer pls tag me so i see it)
20888;thank u all for the help!
20889;@milse113 doesn't the issue you linked specifically say that it's available in v2? :p
20890;never used wails but the repo is pretty unhelpful. The comment says v2 but can't see any tags or branches for v2 and no cmmits or issues referenced in the issue you posted
20891;no commits mention borders or frames
20892;@Carson yeah i was hoping someone knew where to find it \\:P
20893;@misterturtle yeah im kinda in the same boat
20894;This comment from two weeks ago still refers to v2 in the future tense so that doesn't sound promising https://github.com/wailsapp/wails/issues/470#issuecomment668191467
20895;hmm
20896;welp
20897;entirely possible it hasn't been publsihed yet
20898;do yall know of any better similar gui libraries
20899;you guys talking about gui libs?
20900;I just started picking up go last weekend and noticed everyone puts their packages on gh. For private repos do you all just use GitHub oauth? Also how do you structure the larger project with the packages when developing locally? Trying to figure out how most people set things up.
20901;@they glow in the dark. yeah
20902;check out giu
20903;https://github.com/AllenDang/giu
20904;ty
20905;private has a wide range of definitions
20906;github has access control
20907;you can also just run gitea or gitlab or gerrit inside your DMZ
20908;?go structure
20909;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
20910;?go mod
20911;Using go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
20912;Just a private repo when running ‚Äúgo get package‚Äù
20913;re: the other parts of the question
20914;`go get` uses git
20915;Thank you!
20916;so
20917;standard operating procedures apply
20918;ssh access is standard practice
20919;but you can do kerberos or AD or fuckin
20920;anything
20921;So just config global
20922;That‚Äôs helpful thank you. Been handling packages locally.
20923;yerp
20924;I wish gioui worked better
20925;it's rlly slow on wasm still
20926;"So with mongodriver The documentation seems a bit odd at one or two spots. It is hard to tell if I am supposed to use mongo.NewClient mongo.Connect or both. ^^;"
20927;well what's the difference between them
20928;üôÇ That is what I am slowly trying to figure out. Worse case scenario I spend a day or two with google. Luckily this project is not on a deadline. üôÇ
20929;üòõ I wonder if there is a MongoDB discord that has a golang specific channel. Hehe ^_^
20930;On the plus side once I get everything working I will be able to watch out for others who have similar questions. üôÇ
20931;true true
20932;we're not very active around these times but hopefully someone can help :0
20933;If not I will muddle through. üôÇ Worst case scenario I get it working and then find massive bugs later. üôÇ I am working on a personal project CRUD driven site so there is nothing involved that will cause problems if it crashes a few times. :)Basically rebuilding a site that is currently built with Django to use Golang instead. üôÇ
20934;Honestly the biggest hurdle that I have encountered going from other languages to Golang was how much the language itself with no addons acted like a web framework which sent me hurdling head first into walls when I tried to treat it like a web framework. Heheheh
20935;i wish go had generics writing code generation for routes is annoying
20936;when do you ever have to do that
20937;O.o I would love to work with generics. Looking into it the answer was basically Use interfaces. ^^ As for routes gorilla makes that a LOT easier. ^^
20938;Go chi gang
20939;@Madxmike What does that mean? Google brings up food. üôÇ
20940;Gochi
20941;https://github.com/gochi/chi
20942;I see. üôÇ
20943;so an answer to @Deleted User's issue. üôÇ
20944;idk what they are doing
20945;so maybe
20946;maybe not
20947;personally I havent had a need for generics in routing
20948;One thing I have been wondering about (and this kind of applies to web dev in general rather than specifically go) but when reading about REST they talk about using GET POST PUT UPDATE and DELETE to define methods...But I haven't actually ever found any way to use PUT UPDATE or DELETE in a web browser. Heh
20949;"PUT PATCH and DELETE rather not UPDATE. ^^;"
20950;yeah
20951;you wouldn't
20952;as far as humans go you basically only do GET and POST
20953;everything else is for programmatic interactions
20954;That is what I figured which means for my purposes GET brings forms and POST does literally everything else based on those forms. heh
20955;POST can do everything the other non GET/HEAD verbs can
20956;but the extra verbs let you play with semantics
20957;using PATCH means you have another way to filter out traffic of a certain persuasion
20958;and also your code
20959;does anyone here know how to pass data between a gRPC stream interceptor and its method call?
20960;I tried embedding `grpc.ServerStream` into a custom struct and passing that onto the next handler but the method itself somehow has a completely different `grpc.ServerStream` without any of the fields/methods I defined
20961;I'll have to look into the others once I move onto more complicated server to server stuff. ^^
20962;it's honestly like
20963;endgame shit
20964;GET/POST are perfectly acceptable
20965;fine tuning your stuff to use all the fancy verbs is just icing on an already functional performant product
20966;lol there was a time I used exclusively POST until people started not liking that
20967;@Blusk I don't know gRPC but have you looked at passing it as a pointer?
20968;oh actually that's a good idea
20969;is writing your own rpc protocol postgame shit :doglaff:
20970;"@Blusk People like to be able to share links so if you use post for everything it is good to provide some sort of read only permalink to resources that they might want to share. As long as you do that the end user isn\'t going to know the difference. :)Unless it is a boss/client that is complaining. Can\'t help you there. ^^;"
20971;pretty much yeah
20972;@weenie Pretty much any base level infrastructure is going to be a massive undertaking.
20973;"üôÇ I am perfectly happy to let other people code and maintain the low level stuff. ^^;"
20974;oh i was just poking fun at deezy's metaphor
20975;http is too heavy time to invent my own protocol
20976;yeah so passing a pointer didn't work`interface conversion: corev1.coreServiceStreamGuildEventsServer is not middleware.IHarmonyWrappedServerStream: missing method GetWrappedContext`
20977;the generated code be like```gotype CoreService_StreamGuildEventsServer interface { Send(GuildEvent) error grpc.ServerStream}```gRPC interceptors are starting to feel more and more obscure by the second
20978;As it stands my projects guts are already laying out on the operating room table as I change db drivers. üòõ I figured it was better to do now than to wait. Heh.
20979;It occurs to me that once I change over I could probably create wrapper functions sense I basically do the same thing over and over for every object type and the mongo code doesn't actually even care what sort of struct you give it. It just attempts to shove whatever it finds into whatever variable you provide. heh
20980;"So I have this one question about executing a system command. I got this code:```go cmd := exec.Command(""ip link set dev inter netns c.String(""netns"")) if err := cmd.Run(); err != nil { logger.Errorf(""Unable to move interface \'%+v\ to network namespace \'%+v\ inter c.String(""netns"")) }```"
20981;And when I execute the app I will get the error which is in the `err!=nil` statement
20982;When afterwards running this command from bash like: `‚ùØ sudo ip link set dev eth2 netns mytest` this will work flawless
20983;set cmd.Stderr to os
20984;So what am I doing wrong when using exec.Command?
20985;also run the go app as root
20986;I do run the go app as root
20987;"and I tried a variant like this:```go cmd := exec.Command(""ip link set dev inter netns c.String(""netns"")) stdoutStderr err := cmd.CombinedOutput() if err != nil { logger.Errorf(""Unable to move interface \'%+v\ to network namespace \'%+v\': %+v inter c.String(""netns"") err) } logger.Info(string(stdoutStderr))```"
20988;And this will give me: ```ERRO[20200821T08:08:09+02:00] Unable to move interface \'eth2\ to network namespace \'mytest\': exit status 1 INFO[20200821T08:08:09+02:00] Cannot find device eth2 ```
20989;So it looks like eth2 cannot be found by the exec.Command (it is the inter variable).
20990;But bash can find it just fine though. The command executed should both be the same bash and go app
20991;check your assumptions
20992;Like how?
20993;that's my boy
20994;kek
20995;Is there a way to make exec.Command tell me which exact cmd it is running?
20996;Or am I supposed to use another compination of stdio and stderr with exec.Command
20997;or something like that?
20998;> check your assumptionsdeezy 2.0 confirmed
20999;Or eveb better is there a go way of doing it instead of wrap a system command in it
21000;also is there a way to bring up a network interface in go
21001;yeah I ripped that straight off
21002;just put the args in a slice then print it
21003;^
21004;then expand the slice in the args
21005;easiest way to start
21006;simplify
21007;okay so I construct a slice with all my command bits in it okay
21008;yeah just to see what it looks like
21009;it's very likely one of these arguments isn't evaluating to what you think it is
21010;https://github.com/milosgajdos/tenus
21011;maybe
21012;"```go moveInt := []string{""ip link set dev inter netns c.String(""netns"")} logger.Infof(""Command to move interface will be: %+v moveInt) cmd := exec.Command("""") stdoutStderr err := cmd.CombinedOutput() if err != nil { logger.Errorf(""Unable to move interface \'%+v\ to network namespace \'%+v\': %+v inter c.String(""netns"") err) } logger.Info(string(stdoutStderr))```results in ```bashINFO[20200821T08:17:11+02:00] Command to move interface will be: [ip link set dev eth2 netns mytest] ```"
21013;If I am not mistaken it evaluates just as it was supposed to
21014;"``` cmd := exec.Command(""ip link set dev eth2 netns mytest"")```"
21015;<https://www.youtube.com/watch?v=6n3pFFPSlW4> why doesnt this work?
21016;even if hardcoded the error will be the same
21017;@_diamondburned_ ur not a gopher herder?
21018;I think I might know what is the error:INFO[20200821T08:25:40+02:00] Before creating new namespace you are in namespace: NS(3: 4 4026532000) INFO[20200821T08:25:40+02:00] When trying to move the interface you are in namespace: NS(7: 4 4026533165)
21019;So I switched to the namespace where I want eth2 to be moved in. But eth2 is not in the namespace therefore cannot be moved
21020;I might have to return to the namespace I came from to be able to move
21021;There we go
21022;working like a charm
21023;I'm not a herder no
21024;"It is frustrating that none of the examples ever include import statements. ^^;"
21025;the import statement is at the top of the godoc page
21026;"Hi hope someone can help with an import cycle I have can\'t seem to find where it is:```imports cms/api/cmdimports cms/api/cmd/serveimports cms/api/bootstrapimports cms/api/database/modelsimports cms/configimports cms/api/database/models: import cycle not allowed// Configpackage configimport cms/api/database/models""// Modelsimport ( cms/api/database"" fmt"" github.com/jmoiron/sqlx"" time"")```"
21027;"I found another file inside the models package thats importing confg `""cms/config""`"
21028;None
21029;Is there a way I can monkey patch a function's implementation?
21030;interfaces or types
21031;`type ThingDoer func(Thing) Result`
21032;@JohnnyTheSmith there are network libs. No need to shell out :)
21033;Cool any suggestions for a good one? I already shelled out a lot but am willing to do better by doing it the go way
21034;Also the original script will have wrapper methods for dnsmasq udhcpc dhclient and dhcpcd
21035;So I already shelled out those as well
21036;Netlink
21037;https://github.com/vishvananda/netlink
21038;So good
21039;Funny I already use the netns lib of this github account for the project anyways ^^
21040;...
21041;I already posted a netlink lib above but the simpler the better
21042;What are you making Johnny?
21043;I am redesigning a script of one of my work buddy (shell script) to a go app
21044;Let me paste the link one moment
21045;https://github.com/SySSResearch/netns.sh
21046;This is made for pentesting purposes where you will integrate in customer networks say via a usb ethernet dongle and then want to isolate the customers network
21047;you start and add a interface to a network namespace and then run all the programs like burp nessus msfconsole within this namespace
21048;Basically the script is a big wrapper around `ip netns` and some network helpers like `dhclient`
21049;My mission is to transfer as much as possible to go libs and leave the exec.Command as few as possible
21050;I already coded the start and the add functionality. Now I just need to integrate stop remove and run
21051;Also so far I think I kept it really low with dependencies
21052;```bash‚ùØ cat go.modmodule github.com/patrickhener/gonetnsgo 1.15require ( github.com/sirupsen/logrus v1.6.0 github.com/urfave/cli/v2 v2.2.0 github.com/vishvananda/netns v0.0.020200728191858db3c7e526aae)```
21053;Well as soon as I have a working prototype I will publish the github repo and maybe someone want to look over it and tell me what else I could substitude with a go lib instead of using shell commands
21054;Yay. My code is working again! ^_^
21055;I learned an important lesson though. You cannot declare a pointer type variable and then use it right away. You HAVE to either use new(Type) or variable = Type{} then pass as reference. ^^
21056;Yeah otherwise it is nil
21057;is there a linux crack here?
21058;a wat
21059;someone who is firm using NetwrokManager and nmcli and networking in general
21060;Cause I hava a strange bug I cannot work around or fix
21061;networking I'm OK on nlcli not so much
21062;I am on archlinux and I can only use one ethernet device at a time. I am connected to a usbc docking station (dell) on a dell Precision and I also have a eth usb dongle connected. But no matter what I am doing only one device at a time is working. If I disconnect my docking eth the usb dongle will work but not both at a time and I don't know why
21063;well that also depends actually I've not used namespaces before so might not be ablet o help
21064;lets move to #offtopic
21065;"Wondering if someone can help me with a theory of how I might do something:I have resources such as `news` or `posts` that are read from a json file and stored into a database which is great.However when someone wants to update or change a resource by the key I need to update another table called `posts` and the `resource` db table and change the ID & slug for them (that\'s if they change the slug)Question is: How do I determine file changes? How would I know what to update if they are being changed and / or reordered. Is there an easier way to accomplish this?```""resources"": { Posts"": { name"": News"", options"": { slug"": news"", icon"": fatoolbox"" } }, Resources"": { name"": Resources"", options"": { slug"": resources"", icon"": faclipboard"" } }}```"
21066;hello how would I go about retrieving the initials of some kind of name ?I have this```gofunc getCharInitials(name string) (initials []string) { for _ v := range strings.Split(strings.TrimSpace(name)  ) { initials = append(initials strings.ToUpper(string(v[0]))) } return}```but it sometimes crashes `panic: runtime error: index out of range [0] with length 0` and I can\'t figure out a solution
21067;In case Split returns an array one 1 empty string you have to check the len inside your for loop @Karitham
21068;oh
21069;None
21070;I see
21071;I didn't think about this possibility
21072;thank you cleo
21073;ü•ñ
21074;De rien ü•ñ
21075;> Wondering if someone can help me with a theory of how I might do something:> I have resources such as `news` or `posts` that are read from a json file and stored into a database which is great.> However when someone wants to update or change a resource by the key I need to update another table called `posts` and the `resource` db table and change the ID & slug for them (that's if they change the slug)> > Question is: How do I determine file changes? How would I know what to update if they are being changed and / or reordered. Is there an easier way to accomplish this?Any ideas?
21076;depending on your database system some return the deleted content
21077;for exemple when you delete something in a mongoDB it returns the deleted content
21078;you can use that to determine file change
21079;i cant get vscode to autocomplete packages for me
21080;i never had any problem
21081;are the packages stdlib or git
21082;it doesnt autocomplete when im importing
21083;yes
21084;but are those stdlib like `math` or `net` or `json`
21085;or packages you `go get`
21086;go get
21087;its a package i go getted into my go.mod and it wont autocomplete when im trying to import it
21088;if it's in your go.mod it should autocomplete
21089;do you use it
21090;if I have go get an graphql package but never call graphql vscode won't import it
21091;i'll watch a tutorial on getting a proper setup going
21092;?go setup
21093;How to write Go code <https://golang.org/doc/code.html>  IkkerensHow to set up your Go environment <https://golang.org/doc/install>  Ikkerens
21094;?go mod
21095;Using go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
21096;anyone tried this?
21097;https://github.com/maxencecharriere/goapp/
21098;or this https://github.com/ImVexed/muon
21099;i think i'll try goapp a bit
21100;I'm bored
21101;Go is interesting
21102;It's so bizarre
21103;First time I see a language with its syntax
21104;I have a question
21105;Does `type` mean I'm making a template that can be instanced? While `var` is actually an instance of a given type
21106;Is this true?
21107;uh
21108;basically
21109;type creates a type
21110;template might be a bad word because peopel would associate it with c++ templates
21111;type is just typedef basically
21112;var creates a variable that has a type
21113;Like type makes a type that can be instanced? And var makes the instance of the type?
21114;In a nutshell
21115;No that's structs
21116;I don't understand what a type is then
21117;int is a type
21118;types define the content of your variables
21119;Other than struct what other types can I make?
21120;interface
21121;and you can also alias a type
21122;What does that do?
21123;What's Interface?
21124;tbh it's complicated have you done the go tour ?
21125;?go tour
21126;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
21127;Ahh I hate the tour
21128;But ok fine
21129;it's the best way to learn imho
21130;you can also alias a type
21131;like `type number int`
21132;I will try my best!
21133;What does alias do?
21134;Like overwrite?
21135;Thats not an alias
21136;`type number = int` is an alias
21137;??
21138;What's the purpose of that?
21139;Refactoring purposes
21140;??
21141;Very specific
21142;Read up on it
21143;Okway
21144;oh mb they're not the same
21145;This is confusing
21146;What am I missing here? Tried adding `identifier` string to the original struct.
21147;identifier starts with a lowercase letter so it isn't exported
21148;ah right forgot those rules existed lmao
21149;please no snake case mate
21150;yeah im converting it in a sec
21151;is there no fancy refactor command in vscode?
21152;there should be a rename symbols command
21153;Isn't having exporting and unexporting a bit risky when doing it by changing the first letter of the name?
21154;why
21155;I mean it's so easy to miss
21156;`Rename failed: gorename: can't find package containing c:\\Users\\Alandesk\\OneDrive\\!codin\\golang\\tcp_server\\server.go ` üò§
21157;> I mean it's so easy to missnot really never seen anyone who thinks so
21158;Why not have stuff like `public` and `private`
21159;the internet is always at your disposal
21160;??
21161;Is the internet gonna make public and private a thing in go?
21162;no but it might have the answer to why
21163;I don't see why not
21164;https://github.com/golang/go/issues/22188#issuecomment596130898
21165;heres one comment
21166;Oh I get it
21167;It's easier to tell
21168;Just by looking
21169;Golang is very interesting...
21170;Unusual
21171;It's not just a legacy language it has been thought for needs and after a lot of experience and developpement
21172;not like everything is the best
21173;but the syntax is super friendly and easy to read which is a big plus imo
21174;whats wrong with this? it wont import the lib
21175;github.com/gen2brain/raylibgo/raylib
21176;that's the thing to import
21177;None
21178;have you read the readme
21179;Not going to download a random zip from the Internet
21180;Can you upload it as a paste or on github or something
21181;that's the code
21182;I'm dumb and opened it
21183;it doesn't work because github.com/gen2brain/raylibgo doesn't contain go code
21184;it's written in the repo how to install
21185;None
21186;you need to take your time to read a bit before going full meat @other
21187;<https://github.com/gen2brain/raylibgo#example>
21188;you also need a C compiler
21189;"```go: found github.com/gen2brain/raylibgo/raylib in github.com/gen2brain/raylibgo v0.0.0202006252121577bdb60d758ed# github.com/gen2brain/raylibgo/raylibexec: gcc"": executable file not found in %PATH%``` then i get this error"
21190;READ THE README
21191;<https://github.com/gen2brain/raylibgo#requirements>
21192;You need to setup a CGO environment
21193;With gcc and some other dependencies
21194;I'm sure the documentation specifies this
21195;goddamit
21196;i need gcc
21197;yes
21198;it's explained in the readme
21199;Just like the documentation AND error said
21200;you have link to C compiler in the docs
21201;> goddamit@other small advice : Google everything you don't know :exemples :%PATH% gcc
21202;you'll just learn a lot that way
21203;and knowledge is worth
21204;its just cuz i got a new computer and dont have gcc on it and im trying to set up golang but on my old machine i just happened to have gcc already installed so i never got the error thus surprising me because it never happened on my old machine
21205;Didn't you start using go like two days ago
21206;yeah actually i think like 4 days ago now
21207;but i learn fast
21208;very fast
21209;i can learn a language in under a week like at an intermediate level
21210;i hope thats gained me some respect here
21211;saying I\'m good won\'t earn you any respect lmao
21212;> i can learn a language in under a week like at an intermediate levelNobody can
21213;You can get the basics down sure. But there are three days left in your first week and I've yet to see intermediate level
21214;I guess if you have been doing professional C# programming you can do Java in a week
21215;Yeah. You can get used to the syntax but learning how to use the stdlib in an efficient manner and write idiomatic code takes much more time and practice
21216;in general the stdlib is great
21217;tho i do wish there was a small pack for raw audio manipulation üòî
21218;but meh its not hard to recreate it ig
21219;> I guess if you have been doing professional C# programming you can do Java in a week@Karitham yeah thats what i had in mind when typing thatüòí
21220;"if u\'re professional C programmer it\'s just 1 min:```go/#include entire_program.h""/import C""func main() { C.im_fluent_at_Golang()}```"
21221;EXACTLY
21222;:thinkingo:
21223;:thinkingo:
21224;Hi
21225;Bisous
21226;Hoi
21227;```# github.com/gen2brain/raylibgo/raylibcc1.exe: sorry unimplemented: 64bit mode not compiled in```wtf
21228;yes
21229;Are you like on windows?
21230;yes
21231;If so maybe you installed mingw32
21232;and not mingw64
21233;yes i did
21234;oh wait what
21235;it doesnt say if its 64 or 32
21236;I need excel and autodesk.
21237;that's it
21238;Mhhh
21239;`gcc v`
21240;And tell which target it is
21241;Mine is `Target: x86_64w64mingw32`
21242;```Using builtin specs.COLLECT_GCC=gccCOLLECT_LTO_WRAPPER=c:/mingw/bin/../libexec/gcc/mingw32/9.2.0/ltowrapper.exeTarget: mingw32Configured with: ../src/gcc9.2.0/configure build=x86_64pclinuxgnu host=mingw32 target=mingw32 disablewin32registry witharch=i586 withtune=generic enablestatic enableshared enablethreads enablelanguages=c,c++,objc,objc++,fortran,ada withdwarf2 disablesjljexceptions enableversionspecificruntimelibs enablelibgomp disablelibvtv withlibiconvprefix=/mingw withlibintlprefix=/mingw enablelibstdcxxdebug disablebuildformatwarnings prefix=/mingw withgmp=/mingw withmpfr=/mingw withmpc=/mingw withisl=/mingw enablenls withpkgversion='MinGW.org GCC Build2'Thread model: win32gcc version 9.2.0 (MinGW.org GCC Build2)```
21243;ahh
21244;target is 32
21245;how can i set it to 64?
21246;You have to uninstall it
21247;And install mingw64
21248;|:
21249;And during installation be carfull to select the good architecture
21250;Yeeee
21251;wsl is also an option but reinstalling mingw64 isn't that hard
21252;i have no clue how to get the 64 edition
21253;idk where the link is
21254;https://sourceforge.net/projects/mingww64/files/Toolchains%20targetting%20Win32/Personal%20Builds/mingwbuilds/installer/mingww64install.exe/download
21255;why is there no mingw64?
21256;theres only 32 bit
21257;Where is that?
21258;i dont even bother installing WinGW directly
21259;https://github.com/zero9178/GNUToolchainforWindows
21260;Just select which ever Gcc version you want with the branches or the full pack
21261;How 2 computer
21262;xD
21263;https://play.golang.org/p/urdgWSQXnDe
21264;Why I always get redirected to animals no matter the path
21265;that method seems like the worlds most complicated method of mapping endpoints to redirects lol
21266;So how would I use a regex to find a complete line
21267;I have something from a regex generator which looks like this
21268;Would just have 1 route and have that lookup the map
21269;^^
21270;What do you mean Johnny
21271;```go`^.\\bname.ovpn\\b.$`gm```
21272;I want to find the PID of running openvpn connections by using the config file name
21273;So I do `ps aux` and catch the output
21274;`pgrep`
21275;I can successfully determine if the config file name is in there
21276;by using strings.Contains
21277;I know I can just look up the map in the handler. But I still want to know why this does not work.
21278;Did you do a 301 by accident first?
21279;ps aux | grep name.ovpn | pgrep openvpn45951
21280;and then had the browser hard cache it?
21281;can I pipe commands with exec.Command though?
21282;yes?
21283;oh well no it is worse
21284;it just goes to Stdout stderr and stdin
21285;it will match any openvn though
21286;I tried curl and browser and got same result
21287;that is not what it is intended to do
21288;```bash‚ùØ ps aux | grep name.ovpn | pgrep openvpn45951‚ùØ ps aux | grep name2.ovpn | pgrep openvpn45951```
21289;Ah you made a classic mistake
21290;this is just name.ovpn running not name2
21291;That is?
21292;@neoleo https://github.com/golang/go/wiki/CommonMistakes#usinggoroutinesonloopiteratorvariables
21293;`v` is used in a closure referencing the loop variable
21294;which gets overwritten each iteration
21295;`v` will have the `animals` link for all the handlers
21296;```gofunc MapHandler(m map[string]string) { for k v := range m { v := v http.HandleFunc(k func(w http.ResponseWriter r http.Request) { http.Redirect(w r v 302) }) }}```
21297;that fixes it
21298;I tend to forget that tho i dont need to worry about it much because GoLand normally does it automatically for better or for worse
21299;"If i have a struct with tags like```type Place struct { Country string City string TelephoneCode int `json:""telcode""`}```I can easily marshal/unmarshal to/from json.is it possible to tell the json marshaller to look at something else than `json` tags?So that i could do something like:```type Place struct { Country string City string TelephoneCode int `json:""telcode jsonlegacy:""tel_code""`}```"
21300;Nope. The unmarshaller only supports one key
21301;Case insensitive though
21302;Is it because k is actually an index not the key?
21303;No would be the case for either but `k` isn't used inside the closure
21304;@Sgt_Tailor ok. wouldve been great for when different services has different json naming
21305;You'll have to use different struct or multiple fields in that case. Unfortunately
21306;@Sgt_Tailor thanks! That indeed fixes the problem. But I don't see where goroutine get involved. Maybe something net/http does behind the scene involves goroutine
21307;Well yes every request gets fired in their own goroutine but even if they didn't the closure would still share the same variable
21308;"This works```func MapHandler(m map[string]string) { for k v := range m { log.Printf(""DEBUG: Adding k=%s,v=%s\ k v) path := k target := v http.HandleFunc(k func(w http.ResponseWriter r http.Request) { http.Redirect(w r target 302) log.Printf(""DEBUG: Redir to %s (%s)\ path target) }) }}``````2020/08/21 13:56:25 DEBUG: Redir to /cats (https://www.baidu.com/s?wd=cats)2020/08/21 13:56:28 DEBUG: Redir to /animals (https://www.bing.com/search?q=animals)2020/08/21 13:56:34 DEBUG: Redir to /dogs (https://www.google.com/search?q=dogs)```"
21309;"!go```go funcs := make([]func() 0) for i := 0; i < 5; i++ { funcs = append(funcs func() { fmt.Println(i) }) } for _ f := range funcs { f() }```"
21310;None
21311;@Sgt_Tailor ah you already posted a solution
21312;See that example
21313;no goroutines involved but only `5` printed
21314;@aosync yes
21315;yeah true. I made a similar test and most of the time it gives me the last value but sometimes it gives different value. I think it's kinda weird. I thought the closure should get the correct upvalue. Dose that mean goroutine is implicity involved or the github page isn't exactly accurate because even when goroutine isn't involved weird thing still happen?
21316;!go
21317;```code block was not foundStatus = 0```
21318;```code block was not foundStatus = 0```
21319;haven't figure out how !go is used
21320;try it in one of the #testing1 channels
21321;`!go` followed by a code block\\`\\`\\`gogo code here\\`\\`\\`
21322;"!go```go test := make(map[string]func()) for k v := range map[string]int{""a"": 1 b"": 2 c"": 3} { test[k] = func() { fmt.Println(v) } } test[""a""]()```"
21323;None
21324;most of the time I get 3 but sometimes I get 1 or 2
21325;Yeah because the order of values received when ranging over a map is undefined
21326;Or rather: it is random
21327;Oh right. I was being stupid. confused it with C++ ordered map. Forget it's hash table
21328;I hate dealing with raw audio
21329;how do you do it ? I'm kinda interested in making some kind of music player
21330;use ffmpeg
21331;I'll check the code
21332;raw audio is fun
21333;I recall I made a little lib that generates pcm from a function it's rlly janky tho
21334;i hate it
21335;im dealing with raw int arrays trying todo volume
21336;fun somewhat sarcastically lol
21337;and it just keeps corrupting the file when we write back to it
21338;ah that sucks
21339;create PCM stream
21340;pipe to whatever audio service the OS has
21341;pulse alsa
21342;or god forbid: windows
21343;ü§¢
21344;Idek what im doing any more
21345;What ever i knew has completely gone out of the window now
21346;"```gotype Header struct { messageID int `json:""message_id""` payloadSize int `json:""payload_size""`}func onNewMessage(c tcp_server.Client message []byte) { fmt.Printf(""%s just sent %s\ c.Identifier string(message)) header := Header{} err := json.Unmarshal(message &header) if err != nil { panic(err) } fmt.Printf(""%v %v\ header.messageID header.payloadSize)}``` What am I doing wrong? üò© header is empty. output is ```$name$ just sent {""message_id"":0,""payload_size"":34}0 0```"
21347;Your fields need to be exported for reflection (and consequently the JSON decoder) to access them.
21348;M and P
21349;i.e. `messageID` > `MessageID`
21350;yeah that worked
21351;the export thing is so new to me
21352;how dare you
21353;What do you mean?
21354;at some point you did `var c ClientCredentials`
21355;okay im pretty sure this is a function deriving from the ClientCredentials object
21356;and the nyou do `c.updateConfig(whatever)`
21357;` return math.Sqrt(v.Xv.X + v.Yv.Y)`
21358;it access struct members
21359;`v.X`
21360;i don't really know how to simplify this any further
21361;ü§î
21362;```type Vertex struct { X Y float64}```
21363;this has nothing to do with math
21364;you see how that struct has members named X and Y?
21365;the contents of the struct
21366;```type Vertex struct { X Y float64}```
21367;are called members
21368;> receiver members> receiver propertiesnot things in go
21369;not sure if they are elsehwere
21370;yeah it is
21371;not trying to bust your balls on it
21372;just clarifying
21373;its a function parameter
21374;yeah
21375;it's an argument to the function
21376;`func Foo(r OauthResponse)`
21377;yes
21378;so youd call it `creds.updateConfig(response)` where creds = type ClientCredentials and response = type OAuthResponse
21379;because methods and functions can take arguments
21380;look methods are just a cheat code. you tell the compiler whenever I call this function inject an instance of SomeType into the function scope
21381;if you think of it this way a method is a fancy way of having an extra param
21382;in reality c ClientCredentials is passed as the first param
21383;but in code it looks different
21384;üòî Okay well its not corrupted as much anymore but last time i checked changing volume should change file size
21385;on a variable of type ClientCredentials
21386;```govar c clientCredentialsc.updateConfig(response)```
21387;```gofunc (c ClientCredentials) updateConfig(r OAuthResponse) {}var c ClientCredentialsc.updateConfig(whatever)// is equivalent tofunc updateConfig(c ClientCredentials r OAuthResponse)var c ClientCredentialsupdateConfig(c r)```
21388;theyre types
21389;a type can be a struct
21390;or a primitive
21391;or a pointer
21392;because data is a basic part of programming
21393;python and js have types
21394;and data
21395;well welcome to strictly typed langs
21396;Well they're no more arbitrary than anything else you type to make code work.
21397;you define them
21398;every time you do `class Banana:` you have a type in python
21399;"every time you do {""asdf"": banan""} in js you have a type"
21400;actually thats not true
21401;forget JS
21402;lmao
21403;js is aggressively stupid
21404;True
21405;that's an Object still
21406;`1.3.toString()` is a thing in js üôÉ
21407;`1.toString()` isnt but `1 .toString()` is
21408;its the return type
21409;nothing
21410;I give up trying to manually edit this stream just gonna deal with ffmpeg stuff whatever
21411;nothing aka void
21412;`func (v Vertex) Abs() float64` so `Abs` is a function from the variable of type `Vertex` and this function returns of type `float64`
21413;abs is a method on the type Vertex
21414;and returns a float64
21415;yeah
21416;so given a `v := Vertex{X: 3 Y: 4}` `v.Abs() == float64(5.0)`
21417;How would I go to be able to use my method on query.CharStruct variables ?
21418;make it same type as CharStruct
21419;> The problem with nil in Go is exacerbated by the fact that nil checks sometimes fail. If an interface value has a concrete type but its value is nil a nil check will not return true. could someone break this down for me as i don't understand it
21420;Don't think that is true
21421;it is
21422;`var someVar someInterfaceType = nil` is not nil
21423;or something like that
21424;what is meant by a concrete type here?
21425;if you have an interface var and it\'s concrete type is nil it\'s not nil
21426;the underlying type implementing the interface
21427;let me spin up a playground example
21428;Ah right: nil vs nil
21429;That's still `nil` because it doesn't have a concrete type
21430;yeah
21431;wrong example
21432;https://www.calhoun.io/whennilisntequaltonil/
21433;Returning (concretely)typed errors is the place where this bites most people
21434;"Does anyone know what this error means:```could not find name Name in &auth.User{UserID:0 Name:""at"",```it\'s regarding ```go_  err = tx.NamedExec(""INSERT INTO userData (name,username,password,email,age,reputation,attributes) VALUES (:Name,:Username,:Password,:Email,:Age,:Reputation,:Attributes)"",&userForm )```(using sqlx with postgres)"
21435;Could you show the definition of `auth.User`?
21436;"```gotype User struct { UserID int `json:""id"",db:""user_id""` Name string `json:""name""` Username string `json:""username""` Password string Email string `json:""email""` Age int Reputation int `json:""reputation""` Attributes userAttributes `json:""attributes""`}```"
21437;I think (note: think) that sqlx uses JSON tags if it can‚Äôt find db tags
21438;I would try adding an explicit `db` tag
21439;(and note your current one is incorrect‚Äîstruct tags aren‚Äôt separated by `,` but rather a space)
21440;yeah seems weird that you're only specifying some members with tags
21441;especially since your query explicitly references ALL of these fields
21442;i thought it doens't need a db tag unless the field is different (i.e. got a underscore or something)
21443;but it'll try
21444;there's also capitalization
21445;"The JSON tag is `name`; you‚Äôre specifying `Name`."
21446;yes but in this example https://github.com/jmoiron/sqlx  email doesn't have a db tag
21447;"```govar schema = `CREATE TABLE person ( first_name text, last_name text, email text);=`type Person struct { FirstName string `db:""first_name""` LastName string `db:""last_name""` Email string}```"
21448;Let us know if it doesn‚Äôt work.
21449;yep
21450;still the same error
21451;"i\'ve got this now for my struct ```gotype User struct { UserID int `json:""id db:""user_id""` Name string `json:""name db:""name""` Username string `json:""username db:""username""` Password string `db:""password""` Email string `json:""email db:""email""` Age int `db:""age""` Reputation int `json:""reputation db:""reputation""` Attributes userAttributes `json:""attributes db:""attributes""`}```"
21452;What does your query look like?
21453;```sqlINSERT INTO userData (name,username,password,email,age,reputation,attributes) VALUES (:Name,:Username,:Password,:Email,:Age,:Reputation,:Attributes)```
21454;``` _ errr := doThing2() // Error not propagated due to a bouncy key```does this make sense to anyone?
21455;Why did you make the db tag `name` if you use `Name` in the query?
21456;i use `name`
21457;that's the problem yes
21458;`:Name`
21459;oh it that from the db tag
21460;"````json:""name db:""name""````"
21461;No it‚Äôs from the values portion of the query
21462;yeah use `:name` if that's what you're tagging it as
21463;you use lowercase in the tag uppercase in the query
21464;that's it
21465;make em match
21466;"yeah i assumed that\'s some weird golang thing as you do ```go User{ Username: Username, Password: PasswordHash, Email: Email, Name: Name, Age: Age, Reputation: 0, Attributes: userAttributes{ LocalArea:  FollowingAreas: []string{""""}, }, }```so i thought :Name was something to do with this"
21467;apparently not
21468;because it isn't working
21469;make the tag match the fields you reference in your query
21470;the golang field names mean nothing to your sql lib if you're using struct tags
21471;use the exact same name as you have in the tags
21472;and I'm fairly sure that without tags they're still normalised to lowercase in most libs
21473;but using tags guarantees things don't mess up
21474;Instead of thinking This should work you need to think I\'ve done something wrong I just don\'t know what
21475;believe in yourself @deezy
21476;The former means you're stuck. The latter forces you to start trying new things.
21477;yeah good point
21478;meanwhile im trying to pull myself out of a hole and hoping ill come up with something that will be better than the base idea
21479;does a singular `return` with no right side expression in a function just exit the function rather than return a value?
21480;well
21481;all returns terminate the function immediately
21482;regardless of whether the function returns values or not
21483;if a function has ANY return values you must return something matching those values on EVERY `return`
21484;even if it's nil ( if the type matches nil )
21485;issue i have now is `sql: converting argument $7 type: unsupported type auth.userAttributes a struct`  but i can't find any documentation on how to pass in a struct that is an sql `TYPE`
21486;that's the thing tho
21487;"``` Attributes: userAttributes{ LocalArea:  FollowingAreas: []string{""""}, },```"
21488;it has no DB tags
21489;is there `continue` in for loops in go @deezy ?
21490;you didn't tell sqlx how this struct correlates to the database schema
21491;it can't read your mind
21492;"```gotype userAttributes struct { LocalArea string `json:""localArea db:""local_area""` FollowingAreas []string `json:""following db:""following_area""`}``` It does where i defined it @deezy"
21493;okay fair enough
21494;BUT
21495;`Attributes` doesn't have a DB tag
21496;it doesn't look like it at least
21497;Someone help me #discordgo
21498;"> i\'ve got this now for my struct ```go> type User struct {> UserID int `json:""id db:""user_id""`> Name string `json:""name db:""name""`> Username string `json:""username db:""username""`> Password string `db:""password""`> Email string `json:""email db:""email""`> Age int `db:""age""`> Reputation int `json:""reputation db:""reputation""`> Attributes userAttributes `json:""attributes db:""attributes""`> > }```"
21499;do i need another tag ?
21500;Someone help me in #discordgo
21501;üòê
21502;if u keep saying that people just wont come
21503;you gotta have patience homie
21504;^
21505;```gofunc Lerp(start float32 end float32 t float32) float32 { return start(1t) + endt}func Clamp(x float32 min float32 max float32) float32 { fmt.Println(x min max) fmt.Println(x < min x > max) if x > max { return max } if x < min { return min } return x}```so i have these two functions
21506;and im trying to do some kind of fading effect with lerp but i can't check when x reaches a certain point
21507;when i print it out:```3e45 0 1false false```
21508;```go fmt.Println(x min max) fmt.Println(x < min x > max)```
21509;this is where im calling the functions at:```gov.X = donut.Lerp(v.X target .2)v.X = donut.Clamp(v.X 0 1)if v.X == target { v.X = 1  target}```
21510;im confused why i keep getting this weird number
21511;i don't remember but i think that just means its extremely small?
21512;what weird number
21513;3e45?
21514;yeah
21515;that's scientific notation
21516;it's a very very small number
21517;it's just an itty bitty integer
21518;it's a float
21519;3  10  45
21520;o
21521;OH
21522;right
21523;mantissa etc
21524;any idea how i can avoid the number from getting that small
21525;maybe my lerp code is just incorrect
21526;just limit the min value
21527;if it's that important
21528;that value is very close to 0
21529;> 3  10  45@deezy `45`
21530;also that
21531;Your min is 0
21532;this is greater than 0
21533;barely
21534;welcome to floats in computing
21535;If the value is within a certain range of 0 you can set it to 0
21536;to avoid this
21537;@deezy do i need another db tag for my struct ? bit confused
21538;```Goif v < 0.00001 { v = 0}```
21539;not sure really
21540;or something to indicate it's a `TYPE`
21541;right
21542;"you know how i used `:name` to access User .Name how would i access User.Attributes.LocalArea```gotype User struct { UserID int `json:""id db:""user_id""` Name string `json:""name db:""name""` Username string `json:""username db:""username""` Password string `db:""password""` Email string `json:""email db:""email""` Age int `db:""age""` Reputation int `json:""reputation db:""reputation""` Attributes userAttributes `json:""attributes db:""attributes""`}type userAttributes struct { LocalArea string `json:""localArea db:""local_area""` FollowingAreas []string `json:""following db:""following_area""`}```"
21543;something like `:attributes:local_area` ?
21544;or maybe dots
21545;`attributes.local_area`
21546;experiment
21547;issue is i have ```sqlINSERT INTO userData (name,username,password,email,age,reputation,attributes) VALUES (:name,:username,:password,:email,:age,:reputation,row(:attributes:local_area,:attributes:following_area)::userAttributes)``` i think ::userAttributes confuses golang
21548;as i get `unexpected `:` while reading named param at 151`
21549;or it could be due to my `:attributes:local_area`
21550;actually it was `:attributes.local_area` (i think)
21551;so i got it
21552;```go header := Header{} err := json.Unmarshal(dataBuf &header) if err != nil { panic(err) }``` When dataBuf is not of the same type as header then there's no error. How do I check this?
21553;should I just make sure that header json has a field that's never default value and just check if its set or not?
21554;elaborate?
21555;`Header` doesn't have fields that `dataBuf` would have?
21556;"header is like `{""message_id"":0,""payload_size"":34}`"
21557;If I have `package a` that has a `User struct` and I have `package b` that sends an Email to the user how would I avoid an import loop?The function in `package b` requires in a function to access its variables
21558;I mean dataBuf
21559;When dataBuf is filled with a different JSON then the function runs fine but the `header` is empty
21560;or default value atleast
21561;actually you can kinda ignore this. Just realized that's why I had message_id in the header. So I know what kind of json to expect in next transfer
21562;?go layout
21563;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
21564;You can use `DisallowUnknownFields` to error when an unexpected field appears in the JSON but there‚Äôs no great way for checking an absent field other than checking for the zero value (if you combine it with a pointer that becomes easier)
21565;@Ainsley
21566;you avoid import cycles with intelligent architecture
21567;@Doad in my instance how would you solve it?
21568;Alright thanks!
21569;With a completely different architecture
21570;two packages should never depend on each other
21571;you can use a domain interface service and they can interact through that
21572;read that article
21573;Can you define domain interface service?
21574;You will be enlightened if you read that article
21575;Standard package layout?
21576;Anyone know a workaround for HTTP requests header order? as currently it is not supported (crazy I know)
21577;generally just add the headers in the order you want them
21578;but....why
21579;because they need to bypass akamai
21580;i bet a dollar
21581;good ol akamai
21582;Well that doesn't produce headers in order as map is being used and in the scraping community sites like walmart do check header order
21583;yup more scrapers
21584;man it's basically everyday now
21585;"just look at the chat logs; this has been answered so often before"
21586;https://golang.org/pkg/net/http/#Header.Write
21587;probably with something like this
21588;nvm
21589;We stopped trying to directly prevent scrapers now We just blanket ban Ips and hosts now
21590;Anything coming from DO is just instantly blocked
21591;I think I have an idea if it is this common and will share in due time if it works. Plus to be honest a lot of sites have started adapting to header order check (I know RFC says otherwise but browser headers are fixed in order)
21592;there's alternate libs that allow ordered headers
21593;iirc gorilla/http has it
21594;Gorilla HTTP?
21595;https://github.com/gorilla/http
21596;Tbf the amount of sites with bad web scraping protection is sad
21597;Yep I'll however need to see how TLS is managed (maybe via UTLS) with Gorilla HTTP
21598;@ChillFish8 a lot of sites are but majority of top sites have some form of higher protection now
21599;Ik
21600;Best way to fuck up webscrapers is use JS rendering on the front end
21601;canvas fingerprinting?
21602;clears out a good 70% of the webscrapers from being able to actually even render the page
21603;Oh gotcha
21604;Fucking around with Headers and Status codes is another method
21605;HTML scrambling aswell
21606;just inspect requests then
21607;it's never impossible to block out scrapers
21608;there's always a way
21609;fuck
21610;I meant it's impossible to
21611;I still think what Youtube did to limit Video scraping is a really clever method
21612;"i\'m running into an issue where go build fails stating that my function call returns only one value but i\'m setting it to var err. but the source shows returns of (Client,err)//NewClient initializes a new API clientfunc NewClient(auth ClientAuth gatewayURL string transport http.RoundTripper timeout time.Duration) (Client error) { gatewayURL = strings.TrimRight(gatewayURL /"") baseURL err := url.Parse(gatewayURL) if err != nil { return nil fmt.Errorf(""invalid gateway URL: %s gatewayURL) } client := &http.Client{} if timeout != nil { client.Timeout = timeout } if transport != nil { client.Transport = transport } return &Client{ ClientAuth: auth, httpClient: client, GatewayURL: baseURL, } nil}any ideas/"
21613;YouTube downloaders still exist
21614;Yeah ik just alot harder and slower for them todo so
21615;tbf i image most of them just run youtubedl because no one has been bothered to write a more efficient system for it
21616;"it's collective work; you don't repeat the entire process again"
21617;@Brownie pretty sure you can't do a multiline return like that
21618;apparently its valid
21619;@Doad  never mind. it's that my go build is pulling a nonrecent release
21620;oh hey it does work
21621;go and `,` magic
21622;the latest has that commit for NewClient to return an error but i'm not using the latest...all good
21623;thanks for the quick response though
21624;@Doad multiline values are good and valid :)
21625;only if it's struct only tbh
21626;if it's multiple values across multiple lines then something needs to be changed
21627;I use multiline stuff all the time
21628;I just didn't realize it worked in returns
21629;ah right
21630;if i hear uTLS again im gonna snap
21631;lmfao
21632;in the year 2020 the world economy is built entirely on sneaker speculations
21633;you know that's not too far from the truth :^)
21634;I am a poor barefoot man
21635;is there defines in Go? Like I can create an alias for a number etc?
21636;You can create a constant
21637;is there enums?
21638;maybe better to use
21639;since I got messageID's which will tell me what kind of action it expects so it just being a single number is a bit vague
21640;why do you need enums on message IDs
21641;you can use `iota` with consts
21642;just wanna do if messageID == DATA_REQUEST
21643;that type of thing
21644;instead of == 2
21645;you can use constants
21646;and `iota` if you want a group of constants to have automatic values
21647;ü§î gotta look that up
21648;https://godoc.org/github.com/bwmarrin/discordgo#pkgconstants
21649;an example
21650;"I\'m having an issue with `net/http`The code has 0 issues but it simply wont run ```gopackage mainimport ( fmt"" net/http"")func main() { http.HandleFunc(""/ func(w http.ResponseWriter r http.Request) { fmt.Fprintf(w Hello you\'ve requested: %s\ r.URL.Path) }) http.ListenAndServe("":80 nil)}```It just does```GOROOT=/home/name/sdk/go1.15 #gosetupGOPATH=/home/name/go #gosetup/home/name/sdk/go1.15/bin/go build o /tmp/___go_build_WebServerTesting WebServerTesting #gosetup/tmp/___go_build_WebServerTestingProcess finished with exit code 0```"
21651;ListenAndServe returns an error
21652;Check it
21653;Probably complaining about not being allowed to bind port 80
21654;thanks @deezy
21655;It just says `unhandled error` @Sgt_Tailor but so does `Fprintf`
21656;How are you checking the error?
21657;It's what the IDE is telling me rn
21658;I can do a catch doe
21659;Should I try another port
21660;err := http.ListenAndServe...if err!=nil {log.Fatal(err)}
21661;Try that
21662;`2020/08/21 19:09:27 listen tcp 127.0.0.1:80: bind: permission denied`
21663;Not liking the bind rn
21664;Should I take it up with my firewall?
21665;ports 11024 are reserved and require sudo to bind to
21666;you can either use a port about 1024
21667;Yeah I'll sudo it
21668;or sudo it
21669;Yeah Goland has a switch
21670;Thanks for the help
21671;Np
21672;Make sure to check all the errors in your application
21673;Otherwise stuff will break without you knowing
21674;I'm pretty proficent with Python and cpp but Go is new for me
21675;Can I run an error check on the main function?
21676;main() doesn't return any errors
21677;the things you call inside of main do
21678;While you are here
21679;I'm used to using multiple files in Python and cpp how can I import another file
21680;main() is the beginning and end of your program
21681;if it's in the same package you don't
21682;a single package can be split across an arbitrary number of files
21683;it's one namespace
21684;So all I need is the package header right?
21685;`package whatever` right
21686;Yep
21687;I am dumb and named my go module bot is there a way I could change it ?
21688;Refactor the header ig
21689;change in go.mod and probably some sed
21690;gorename
21691;yeah vim/sed
21692;ez
21693;So... what does `1 << iota` mean in a constant compared to say `1 << (iota + 10)`?
21694;One starts with 0
21695;The other with 10
21696;Hmm no
21697;Those are bit shifts
21698;1 vs 1024
21699;Ah so https://godoc.org/github.com/bwmarrin/discordgo#pkgconstants uses bitmasks?
21700;I don't want that so how would I make it so they go from 0 to 10+ etc?
21701;Discord uses bitmasks for permissions
21702;Yes
21703;I see
21704;Have it just use itoa
21705;got misled then
21706;Instead of bit shifted
21707;Search for Golang iota
21708;https://godoc.org/builtin#iota
21709;I see this
21710;On mobile so can't type
21711;problem is I don't know what ordinal means
21712;it is time for me to seek help
21713;my question is: what the hell is going on?
21714;Ah wikipedia explained it to me
21715;here's journalctl r
21716;seems like the kernel is messing up
21717;code just has xml parsing and spew
21718;no cgo
21719;ah yes
21720;Ordinal just means numbers in order
21721;1
21722;2
21723;oh seems like retire_capture_urb has nothing to do
21724;3
21725;Yeah wikipedia explained that
21726;then https://yourbasic.org/golang/iota/ explained the rest
21727;But iota starts at zero
21728;so now im good üëå
21729;Coolio
21730;is it possible to make an interface with a function from a package
21731;Not sure what you mean
21732;something like this ```gotype arrayAttributes interface { pq.Array() pq.GenericArray}```
21733;can i explain my problem
21734;i think i'm going about it wrong
21735;this line in go```gotx.NamedExec(`INSERT INTO userData (name,username,password,email,age,reputation,attributes) VALUES (:name,:username,:password,:email,:age,:reputation,row(:attributes.local_area,:attributes.following_area)::userAttributes)`,&userForm )``` passes in ```go:attributes.following_area``` when it should actually be ```gopq.Array(:attributes.following_area)```
21736;so i'm trying to modify my struct so i can call a function that actually returns the `pq.Array(:attributes.following_area)`
21737;I fixed the SIGBUS error
21738;it's just running out of disk space in tmp
21739;Lmao
21740;can structs have function that are called ?
21741;like a method in OOP
21742;a struct's method can already be a regular value
21743;types can have methods yes
21744;@_diamondburned_ that basically means memory management is seriously screwed up
21745;beyond the extent of a segfault
21746;it's a tmpfs
21747;so whatever
21748;bigger issue is Nix setting TMPDIR to outside /tmp but eh
21749;you're trying to access an address that the CPU can't address
21750;(or alternatively there's some device errors going on)
21751;depends on code but sure
21752;can someone link me an example please
21753;wait is it this https://gobyexample.com/methods
21754;yes
21755;"```gofunc (stringSlice []string) sliceValue() driver.Value { var quotedStrings []string for _ str := range stringSlice { quotedStrings = append(quotedStrings strconv.Quote(str)) } value := fmt.Sprintf(""{ %s } strings.Join(quotedStrings )) return value}```why does is string an `unresolved type`"
21756;`string[]` is not valid syntax
21757;sorry i meant []string
21758;you can't add methods to arbitrary types like that
21759;you have to declare the type
21760;`type myType []string`
21761;right
21762;ok
21763;Probably should checkout the section on methods in the Go Tour
21764;"```gotype sliceString []stringfunc (stringSlice sliceString) sliceValue() driver.Value { var quotedStrings []string for _ str := range stringSlice { quotedStrings = append(quotedStrings strconv.Quote(str)) } value := fmt.Sprintf(""{ %s } strings.Join(quotedStrings )) return value}``````gotx.NamedExec(`INSERT INTO userData (name,username,password,email,age,reputation,attributes) VALUES (:name,:username,:password,:email,:age,:reputation,row(:attributes.local_area,:attributes.following_area.sliceValue)::userAttributes)`,&userForm )```i had to assign tags to my struct so how would i do the same for a method"
21765;that's not a thing
21766;ok i scrapped all this
21767;i'm just trying to figure out how to put a struct in an insert command```go_  err = tx.NamedExec(`INSERT INTO userData (name,username,password,email,age,reputation,attributes) VALUES (:name,:username,:password,:email,:age,:reputation,row(:attributes.local_area)::userAttributes)`,&userForm )```
21768;"i get the error `pq: syntax error at or near :""`"
21769;is there an escape character for pq
21770;do you have a good reason why you're not interacting with the DB through `database/sql` and just using a driver?
21771;i'm using sqlx üòÖ
21772;ah
21773;i think it's talking about `::userAttributes` but that's part of the sql command not for pq/sqlx to translate
21774;how do i use multiple files in golang? Ik this is really basic but i couldnt find it anywhere and i started using golang yesturday.
21775;let me guess you're doing `go run main.go`
21776;go run go
21777;okay good start
21778;what's the error
21779;theres no error
21780;so what's the problem?
21781;Another problem solved
21782;:)
21783;yeah fr
21784;|:
21785;it works like that?
21786;Well does it?
21787;you're not getting any errors so
21788;i thought i had to require like in lua
21789;presumably whatever you're doing is working
21790;You tell us if your program works
21791;or something
21792;okay well this isn't lua
21793;this is go
21794;well ok thanks
21795;If allt he files are part of the same package then yoire good to go
21796;Why does everyone always bring assumptions from other languages..m
21797;idk
21798;im stupid thats probably why
21799;another question should i keep my project in the go/src?
21800;?go mod
21801;Using go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
21802;Learn modules
21803;Dont use GOPATH
21804;hmm ok
21805;thanks
21806;@Str≈ìm wgy not
21807;Just seems simpler
21808;Legacy
21809;No dependency version pinning
21810;Oh
21811;True
21812;also you have to do all your development in $GOPATH which is annoying
21813;Import cycle is annoying
21814;You get used to gopath
21815;Import cycles are still a thing you cant have
21816;Thats got nothing to do with it
21817;No I mean they are far more annoying than working in gopath
21818;For me at least
21819;Right
21820;Ok
21821;https://softwareengineering.stackexchange.com/questions/12005/whyarecyclicimportsconsideredsoevil
21822;Tbh I don't consider it evil
21823;It's most likely the result of bad planning on my end
21824;https://github.com/golang/go/issues/30247
21825;See rob pikes answer
21826;They are evil
21827;shit even python forbids import cycles
21828;right?
21829;Not sure
21830;I only ever used single file python scripts
21831;cycle imports ?
21832;package a imports package b package b imports package a
21833;or a < b < c < a
21834;etc
21835;something that you get used to and never want to go back
21836;ahh yes python prevent's that
21837;i always called it circular imports
21838;yeah same concept
21839;nerds love inventing names
21840;haha
21841;and what languages do support import cycles
21842;not good ones
21843;it seems like a recipe for disaster
21844;it adds significant complexity to the compiler/runtime
21845;and that's 100% antithetical to the go mission statement
21846;Why would you want that even
21847;i imagine if you run into that issue your file structure is probably fucked
21848;it arguably lets you write code with less effort
21849;but that code also ends up being tightly coupled
21850;and it'll bite you on the back end
21851;Yeah I‚Äôve yet to see an instance where people are both complaining about cyclic imports and their code isn‚Äôt so tightly coupled
21852;yeah ultimately import cycles are a symptom of just bad code design
21853;like Rob Pike said in that github issue well organized code forms a DAG
21854;a very clear one way flow of data
21855;The only time ive really had an issue with it is Type hinting in Python but only twice
21856;when I first started coding a few months back I wanted to do circular importing but I realised about the issues it would cause
21857;i think C# and rust and maybe uhc permit import cycles
21858;though only within the same compilation unit
21859;damn structs are cool
21860;theyre just data üëÄ
21861;yep
21862;but they are cool
21863;@Str≈ìm do you play tf2?
21864;i was wondering because your profile picture is a tf2 refrence
21865;oh this is off topic sorry
21866;Years ago
21867;ahh ok
21868;"Hey I have a pretty stupid question. Let\'s say I have the following structs:```gotype MyStruct struct { Sub MySubStruct}type MySubStruct struct { SomeString string}func main() { myStruct := new(MyStruct) myStruct.Sub.SomeString = test""}```Does it make a difference whether I have `Sub MySubStruct` or `Sub MySubStruct`?"
21869;yeah it does sorry very stupid question. I'm just tired
21870;For what purpose @lus
21871;Should represent a central app config
21872;Which gets loaded once on startup
21873;Dont see much reason for it to be a pointer
21874;hm you may be right. i'm too tired to think about it now. really need to sleep
21875;99% of the time when you have import cycles it means your project structure is not ideal
21876;I need to stop my application at a specific point if a certain flag was passed (it is still single thread at this point). Is it save to use os.exit() ?
21877;because I saw a lot of diffrent approaches on stackoverflow
21878;os.Exit is fine
21879;really depends on what you wnat
21880;but most of these approaches would boil down to using os.Exit or panic
21881;and panic exits w/ an erroneous status code
21882;oh you can also return main for status 0
21883;ah the latter seems even better. It is basically a dryrun which just checks the config and prints some additional info. But I need to stop at the point where my programm starts doing actual stuff
21884;whats wrong with this code?
21885;missing anotehr 0
21886;because 3 fields
21887;nice setup btw
21888;but you should fix this
21889;hmm yeah i should
21890;and thanks about the setup
21891;and the help
21892;yea np
21893;Not sure if I should post this here or not but I'm attempting to make an API wrapper for a website and wanted to get some feedback on my setup. I can't tell if I am structuring it correctly but it seems to be working. I currently use an alias to import types and functions from my `pkg` directory that exports it to the main `gomodio` package. Is this the best procedure? The source is available here: https://github.com/M4cs/gomodio (I know there are some API keys in there but they are just fillers they arent actual keys)
21894;why do you want this? https://github.com/M4cs/gomodio/blob/master/alias.go
21895;is it just for `gomodio.User.etc`?
21896;why not just put the User and such all in the single gomodio package?
21897;Can I still have them in subfolders with the package being `gomodio`?
21898;and then they would all just be accessible without the `gomodio` prefix for the dot notation when calling types/funcs?
21899;you can't
21900;they'll all have to be in the same folder
21901;each folder is a package
21902;seen contrary advice saying to don\'t overpackage and don\'t underpackage so when really should code files diverge from the main package
21903;when you have to seperate domains
21904;and context
21905;?go layout
21906;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
21907;something like in encoding
21908;each of the subpackages are deadling with a specific domain of encoding
21909;json csv etc
21910;How do i make it get the author id using dgc with discordgo in middleware
21911;why does the player not move?```gotype Player struct { x int32 y int32 speed int32}var player Player = Player{0 0 4}func move(x int32 y int32 speed int32) (int32 int32 int32) { if rl.IsKeyDown(rl.KeyRight) { x += speed } else if rl.IsKeyDown(rl.KeyLeft) { x = speed } else if rl.IsKeyDown(rl.KeyDown) { y += speed } else if rl.IsKeyDown(rl.KeyUp) { y = speed } return x y speed}```
21912;where are you calling that
21913;and applying the returned values
21914;ill send it
21915;that function by itself does not effect any player
21916;"```gofunc main() { // var player Player = Player{0 0} rl.InitWindow(600 600 gogame"") rl.SetTargetFPS(60) for !rl.WindowShouldClose() { rl.BeginDrawing() rl.ClearBackground(rl.RayWhite) move(player.x player.y player.speed) // fmt.Println(player.speed) rl.DrawRectangle(player.x player.y 40 40 rl.Gray) rl.EndDrawing() }}```"
21917;so the player.x etc
21918;are passed as values
21919;the x in `move` is a copy of the player.x you passed into it
21920;im lost
21921;when you call `move` there
21922;yes
21923;` move(player.x player.y player.speed)`
21924;yes
21925;the numbers in player.x player.ym and player.speed
21926;are copied
21927;hmm
21928;then inside the function
21929;im still new to golang how would i fix that?
21930;`func move(x int32 y int32 speed int32) (int32 int32 int32) {`
21931;these values are the copied ones from your call
21932;its like if i told you hey copy this note from my piece of paper to your piece of paper
21933;you dont have my piece of paper
21934;you have yours
21935;with the same information
21936;do you have experience in other languages or no
21937;mostly lua
21938;and thats a pretty basic language
21939;did you ever work with prototypes
21940;no?
21941;or tables i think they are called in lua
21942;tables yes
21943;and you can apply methods to those tables
21944;yes
21945;i forget the exact terminology and syntax in lua
21946;either way
21947;functions
21948;okay so the easiest way to fix this without adding 5 more layers right now
21949;is you are returning the 3 modified values from this function
21950;` return x y speed`
21951;so you just need to assign those returned values to your player
21952;how do i do that?
21953;so if a function returns something
21954;how do you get that something
21955;in the caller
21956;i dont know?
21957;in lua if you call a function foo that returns a int
21958;how do you get that int
21959;that it returns
21960;idk i havent used return that much
21961;okay so search up golang returns on google
21962;and you should get a basic idea of how it works
21963;im too tired its 2 am ill figure it out tomorrow somehow
21964;?go tour
21965;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
21966;?go learn
21967;Gopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Go by Example <https://gobyexample.com/>  SkippyA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  Skippy
21968;here are some resources to learn how everything works
21969;oh waow
21970;HOLY SHIT GUYS https://groups.google.com/g/golangnuts/c/iAD0NBz3DYw?pli=1
21971;mhmm
21972;neat
21973;we `any` boys now
21974;does anybody know how I can make a pointer to Qual in jennifer?
21975;the code gen thing
21976;"I tried `stmt.Add(jen.Op(""""))` but that makes it space out code weirdly"
21977;seems to confuse ptr with  multiply
21978;output
21979;> each folder is a package@_diamondburned_ so if i put them all into the `pkg/` dir it will be importable without aliases
21980;just put them in root
21981;don't do package names w/ different dir names
21982;ok I got it
21983;ok then
21984;@stdio fix it
21985;I can't I can't check if IsZero on a zero value ü§î
21986;:kkk_LOLTROLLFACELOL:
21987;Just blame desk
21988;:CatCry:
21989;@stdio .IsValid()
21990;on the topic of reflect have some recursive abomination
21991;abomabomabominationinationination
21992;Love some good recursion
21993;ok that was dumb I just realized that code won't solve my problem
21994;fml
21995;those seem quite common on reflection,I've seen some serializers
21996;they solve the types and recall it self with proper types
21997;yeah it just gets nasty sometimes imo
21998;esp when you want a depth limit
21999;type MyStruct struct { child MyStruct }
22000;just check runtime.Caller(depth) and see if it's the same as runtime.Caller(0) kek
22001;very bad idea I'm kidding
22002;welp I'm cursed now https://play.golang.org/p/4rmlwaZHJcN
22003;json probably does the same
22004;not sure
22005;there's a rec limit as of 1.15
22006;I'd just do a struct w/ a depth int lol
22007;yeah lol
22008;surprisingly it doesn't?```$ grep R Caller /usr/lib/go/src/encoding/json/usr/lib/go/src/encoding/json/scanner.go:// Callers call scan.reset and then pass bytes in one at a time```
22009;"``` banner := fmt.Sprint( \\u001b[30m‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó \\u001b[0m\\r\"", \\u001b[30m‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó\\u001b[0m\\r\"", \\u001b[30m‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë\\u001b[0m\\r\"", \\u001b[30m‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë\\u001b[0m\\r\"", \\u001b[30m‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù ‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù\\u001b[0m\\r\"", \\u001b[30m‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù \\u001b[0m\\r\"", )```"
22010;why sint this printing?
22011;its supposed to say red casino
22012;discord mangles it
22013;"```package mainimport ( casino/game"" fmt"" math/rand"" time"")func main() { game.Clear() game.Title(""RED CASINO"") banner := fmt.Sprint( \\u001b[30m‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó \\u001b[0m\\r\"", \\u001b[30m‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó\\u001b[0m\\r\"", \\u001b[30m‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë\\u001b[0m\\r\"", \\u001b[30m‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë\\u001b[0m\\r\"", \\u001b[30m‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù ‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù\\u001b[0m\\r\"", \\u001b[30m‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù \\u001b[0m\\r\"", ) rand.Seed(time.Now().UnixNano()) fmt.Println(banner) fmt.Println( // im making an ansi color code library soon sorry for mess \\u001b[31mchoose a game!\\u001b[0m"", \\\u001b[31m1. number guess\\u001b[0m"", ) game.StartGame()}```"
22014;what actually happens
22015;it clears the screen
22016;try removing \\r
22017;then puts the banner in the abnner variable
22018;already tried that
22019;@_diamondburned_
22020;kek
22021;what actually happens when you run the code
22022;it prints everything but the banner
22023;it technically works just no banner üò¢
22024;"but you do see the choose a game""?"
22025;yes
22026;and it has color
22027;no idea ¬Ø\\_(„ÉÑ)_/¬Ø
22028;might be some weird terminal interaction with the screen clear or something idk
22029;unlikely to help but maybe try adding a ~15 ms sleep before printing
22030;ok
22031;@zephyrtronium i got rid of the clear and the title now it work ‚ù§Ô∏è
22032;interesting
22033;i guess it is some weird interaction then
22034;fwiw i wouldn't expect any of what you're doing to work on windows definitely didn't believe you had color working via that method
22035;but i'm glad it works üôÇ
22036;ill use the ansi title method instead
22037;bc i was using a shell command before
22038;I love golang
22039;golang loves you
22040;:hugged:
22041;:gopher:
22042;https://tenor.com/view/caddyshackgopherdancinghappydancegif15139937
22043;How would I make goroutines count the amount of success and failures they have
22044;and quit if they reach a specified number of each
22045;I'll show my code in a sec tidying it up
22046;:thinkingo:
22047;you can't really quit without using contexts
22048;if you can't do that then there's errgroup
22049;but that waits for everything to be done and returns errors
22050;"```gofunc fetchAll() error { var N = 4 quit := make(chan bool) errc := make(chan error) done := make(chan error) for i := 0; i < N; i++ { go func(i int) { // dummy fetch time.Sleep(time.Duration(rand.Intn(100))  time.Millisecond) err := error(nil) if rand.Intn(2) == 0 { err = fmt.Errorf(""goroutine %d\'s error returned i) } ch := done // we\'ll send to done if nil error and to errc otherwise if err != nil { ch = errc } select { case ch < err: return case <quit: return } }(i) } count := 0 for { select { case err := <errc: close(quit) return err case <done: count++ if count == N { return nil // got all N signals so there was no error } } }}```"
22051;This code quits on one error
22052;I might try modifying it to return which index's error carrying on until we get the required amount of successes and then returning
22053;and removing the error'd indexes from the array
22054;Maybe there is problems with this approach?
22055;At you saying each go routine goes until a specific number of errors
22056;Or the entire thing will go until a specific number of errors
22057;And can you explain the reasoning behind wanting it like this
22058;I want it to record the indexes that it errors at and only return when a certain number of successes is reached
22059;All good though I got a working example in goplayground
22060;I don't want to paste another massive code chunk in here
22061;Okaay
22062;I will try to figure out and share it
22063;https://play.golang.org/p/s8b2mKc0kWh
22064;"in Javascript I can use the spread operator or the likes to construct an array from already existing elements; I would like to construct a byte array on the fly in golang with a single byte that I provide"
22065;one way would be to create the byte slice
22066;then copy the single byte to there
22067;but are there other ways that might be more idiomatically correct/
22068;this seems also to be possible
22069;``` oneCharBuffer[0] = b port.Write(oneCharBuffer)```
22070;Other than that sentence could really do with any of the following: `,.?` if you want to make a byte array a simple method would just be `make([]byte n)` where n is the length
22071;hmmm
22072;if you want it for the purposes of a buffer there is also `bytes.Buffer` if i remember
22073;I would have preferred you could just do
22074;[]byte(b)
22075;or something like []byte(...b)
22076;i mean you can do that for converting a string to a byte array
22077;yeah I know
22078;using a preallocated `[]byte` is recommended for performance
22079;```gobuf := []byte{0}for { // whatever buf[0] = b port.Write(buf)}```
22080;or append `b` onto a slice and write the whole slice afterwards if you want
22081;```gobuf := []byte(nil)for { // whatever buf = append(buf b)}port.Write(buf)```
22082;I've been having issues with a binary compiled on my win64 system refusing to run correctly anywhere else
22083;on linux it works fine
22084;"```gopackage mainimport ( fmt"" net/http"")func main() { _ err := http.Get(""http://example.com"") if err != nil { panic(err) } fmt.Println(""yep"") for { }}``` this is the smallest example I could find demonstrating it"
22085;error from a friend's pc: https://pastebin.com/r2bdHi6e
22086;what is `ch := done` doing in my code snippet above?
22087;@Gibson you generally have to build a different binary for windows mac and Linux
22088;Is it considered bad practice to pass a struct to a function which mutates the struct?Like this```gofunc (tm TokenManager) PopulateHMAC(token Token) error { token.HMAC = //...}```
22089;yes this was a binary built on windows
22090;@Dexti nop
22091;Okay. Thanks
22092;I built it with go 1.15 on my win64 machine and it runs fine but crashes on others
22093;Did you cross compile?
22094;Whats the error
22095;nope natively compiled
22096;error is above: https://pastebin.com/r2bdHi6e
22097;So youre building a windows binary on windows and wondering why its not running on Linux?
22098;no
22099;on linux everything is fine
22100;on windows it only runs on my machine and crashes on other people's windows machines
22101;Oh right
22102;No clue about windows
22103;Shit platform /shrug
22104;anything using http.Get() dies with that error
22105;fair enough lol
22106;does the forced commenting seem a bit excessive sometimes
22107;None
22108;üòÜ
22109;@Meep You should probably note that it does not preserve the order of the rest of the elements
22110;Yeah
22111;Keeping the order is a bit more costly and I don't need to
22112;How do I generate a time.Time with second precision?
22113;time.Seconds
22114;you multiply your duration by that
22115;thanks
22116;But it's not a duration. It's a time.Now()
22117;if I do time.Now().Second I'll get a value between 059. I'd like to get the amount of seconds since the epoch
22118;`time.Now().Unix()`?
22119;None
22120;ty
22121;But that's an int64. I guess I can do a `time.Unix(time.Now().Unix() 0)`
22122;just do `int(time.Now().Unix())` ?
22123;That doesnt sound safe
22124;it's probably not
22125;also if you want nanosec too you have `time.Now().UnixNano()`
22126;smart
22127;can't you just do Time.Since(0).Seconds() ?
22128;because Since takes a time.Time
22129;not an int
22130;oh yes
22131;`int(time.Now().Unix())` is only unsafe on 32bit systems after `03:14:07 UTC on Tuesday 19 January 2038`
22132;so you should be good for now
22133;`time.Since(time.Time{}).Seconds()`
22134;no ugly var now
22135;fells gross
22136;that works but you're basically doing more steps
22137;to save 1 like
22138;be clear
22139;`time.Since(time.Time{}).Seconds()` is basically getting the difference between `(time.Time{}).Unix()` and `time.Now().Unix()`
22140;but `(time.Time{}).Unix()` is always 0
22141;so just use `time.Now().Unix()`
22142;also if you need a duration `time.Duration` is already int64
22143;just do `time.Second  time.Duration(time.Now().Unix())`
22144;incorrect sorry
22145;edited to fix
22146;yeah
22147;`time.Duration(time.Now().UnixNano())` is more accurate and simpler unless you really only need seconds for some reason
22148;yeah go with that one
22149;you can also truncate to seconds afterwards which is more idiomatic
22150;again only if you really need that for some reason
22151;tried compiling with go 1.14.7 as well same error
22152;is there a built in regex match function in go?
22153;"or is there one better than `import regexp""`"
22154;@tfyl What's the issue with the one in regexp?
22155;Why does Signing and then Verifying a signature (ecdsa) not seem to work? The Signing seems to create a valid signature but verification returns `false` (i.e. it's not valid) https://play.golang.org/p/g0iXVglpHCi
22156;nothing just curious if there is anything else anyone recommends
22157;generally the standard library is the way to go unless you want something extra
22158;No real reason why regexp wouldnt be good enough
22159;@tfyl The last 2 paramaters of `ecdsa.Verify()` are the ones generated by signing. No clue how to get those from `pk.Sign()` but `ecdsa.Sign()` produces those directly
22160;https://play.golang.org/p/pZ3ZXL7euvj
22161;Oh I mean @Dexti
22162;Sorry tuf
22163;Ah thanks. I read a post somewhere saying that you could substitute X and Y in there for S and R. Thanks üôÇ
22164;> Sorry tufYeah,I was a bit confused üòÇ
22165;file not a type? Trying to use flag for file.
22166;at line 16
22167;filename would probably be a string?
22168;file is a string in that code
22169;not a type
22170;so `filename file string` I think?
22171;no
22172;`read(filename string)`
22173;filename is of type string
22174;and you call it
22175;`read(file)`
22176;Oh
22177;I see I think
22178;ok I think this should work idk
22179;No it wont
22180;yeah I didn't return nil for error on the last one
22181;except I get a multi value context error so I guess I shouldn't print it
22182;And fmt.Printf doesnt return []byte
22183;yeah you need to make sure all of your types are lining up correctly
22184;every return from that function should return a []byte and an error
22185;I'm trying to do this https://golang.org/pkg/io/ioutil/#ReadFile
22186;Then return a []byte
22187;And also an error
22188;Which can be nil
22189;Have you done the tour
22190;It dosnt seem like you have
22191;I have done a bit of it not much lol
22192;Please do all of it...
22193;And make sure you understand it
22194;We will gladly help with things you dont understand in the tour
22195;ok
22196;But if youre jumping into the language and disregarding the tour then having elementary issues that doing the tour shouldve taught you about its not great for us
22197;I managed to do it and it worked lol :^)
22198;there is a regexp2 lib that emulates c# functionality somewhere
22199;including backreferences or whatever
22200;I use that when regexp is missing anything
22201;also @Deleted User that code is yikes
22202;just check `err != nil`
22203;and `readfile` is already a `[]byte`
22204;"Oh yeah I forgot you could do that I think `if len(filename); err != nil`"
22205;why do you need to check `len(filename)`?
22206;Also I was going to ask if I am using ioutil.readall I do have to return byte right?
22207;Because using flags
22208;If a user doesn't provide anything I want it to error
22209;ah okay
22210;well that should be a custom error or just a fatal log
22211;check len first then readall
22212;Ok I will do that :)
22213;this is probably better but I am getting `unexpected if` I am probably doing it wrong not sure
22214;@superloach
22215;bruh okay so
22216;You really need to go through the tour
22217;yr not gonna get an error value out of `if len(filename) == 0`
22218;Your basically trying to nail a nail but your holding the hammer by the head
22219;And striking with the handle
22220;"you need to define `var ErrNoFilename = errors.New(""no filename provided"")` outside of here and then `if len(filename) == 0` `return nil ErrNoFilename`"
22221;also don't panic
22222;yeah I didn't think of that and its a good idea to tell the user why they're getting an error
22223;thanks I will do that üòÑ
22224;and I will take more of a look at the go tour. I have looked at it a bit but maybe not enough.
22225;Most of us here have gone through it and read different resources hundreds of times
22226;Programming is hard
22227;And most things you can‚Äôt force through without atleast understanding the fundamentals
22228;I did read about channels and goroutines but I kinda forgot I should look at that again
22229;do you use gobyexample as well?
22230;Yes
22231;You need to focus on the fundamental pieces though
22232;Don‚Äôt worry about concurrency
22233;Okay this going to look ugly but I'm really confused. Why does 10/3 = 3?```go q0 := float64(n / int64(len(s))) q1 := int64(math.Floor(float64(n / int64(len(s))))) q2 := int64(math.Ceil(float64(n / int64(len(s))))) q := q2  q1 fmt.Println(n) fmt.Println(len(s)) fmt.Println(q0) fmt.Println(q1) fmt.Println(q2) fmt.Println(q)```
22234;output:``` 1033330```
22235;Ints
22236;integers
22237;you can\'t have parts of an integer
22238;integers are indivisible
22239;or not subdividable
22240;they're whole numbers
22241;Shouldn't the float64 cast give me a float though equal to the quotient of 10 and 3?
22242;no
22243;No
22244;because you're doing math on ints
22245;and then converting the result to a float
22246;it will give you a float but the number your getting is still an int
22247;float64(3) is 3.0
22248;you're doing an integer division and then converting the result to float64
22249;you need to do it in the other order
22250;turn them into floats BEFORE doing math
22251;Oof okay brb
22252;Ah thank you. Although now there's so much casting going on it feels like hogwarts
22253;maybe you don't actually want ints üôÉ
22254;if you declare `i := 3.0` it's a float btw
22255;:NanaBongo:
22256;It's a hackerrank problem they're making me use ints u_u
22257;tsk
22258;How would I find the average color of an image
22259;do you want the average color or the dominate color
22260;https://github.com/EdlinOrg/prominentcolor
22261;I think this library is what I am after
22262;üëç
22263;if you want the actual average
22264;you just add up all the rbga values of each pixel
22265;and divide by number of pixels
22266;yeah average is easy
22267;add divide
22268;but average usually gives you some gross color
22269;that you dont want
22270;yeah kinda brownish usually
22271;or greyish I guess if we're talking plain rgb
22272;but you could also just upsaturate that color to get something reasonable
22273;yeah kinda ~~brownish~~orange with contextish usually
22274;yee something like that
22275;i am able to save to my postgres db (using sqlx) using (as a value):```pq.Array(userForm.Attributes.FollowingAreas)``` (userForm.Attributes.FollowingAreas being a []string)
22276;"but when i then retrieve a record using ```goerr := tx.Get(&userSearch SELECT  FROM userData WHERE Email=$1 OR Username=$2; Email Username)```i get the error ```name attributes"": unsupported Scan storing driver.Value type []uint8 into type auth.userAttributes```"
22277;isn't []uint8 []byte ?
22278;but shouldn't it be able to convert it back ?
22279;not sure
22280;@superloach backreference bad
22281;Negative lookahead bad
22282;`uint8` and `byte` are aliases‚Äîthat is to say they are literally the same type
22283;Non linear time regex bad
22284;is there a quick way to change a []string into a string separated with a `,`
22285;any built in method
22286;strings package
22287;For all your string needs
22288;yep thanks
22289;ok my fix didn't work
22290;> `uint8` and `byte` are aliases‚Äîthat is to say they are literally the same typewhy is it being read a a []byte if it's a slice
22291;[]byte is a bite slice
22292;what does this mean?```initialization loop: /home/elric/Documents/gogame/player.go:18:5: player refers to /home/elric/Documents/gogame/player.go:18:5: player```
22293;```govar player Player = Player{rl.NewVector2(0 0) 4 16.0 rl.NewRectangle(player.pos.X player.pos.Y player.frameSize player.frameSize)}```
22294;the error is the player
22295;well it's meant to be a []string not []byte
22296;You can‚Äôt initialize a struct with values set during its intialization
22297;@elric your initialisation for `player` refers to `player.pos.X` etc
22298;what?
22299;"`[]byte(""hello"")` is a byte slice too"
22300;"you can do `string([]byte(""hello""))` to get back a string"
22301;you can't access `player.pos.X` whilst you're initialising `player`
22302;is there a way to access the player x?
22303;Members of a struct are only accessible after initialization
22304;you can only get player.pos.X after player is initialised
22305;Create a constructor
22306;hmm
22307;that makes sense
22308;You can then simplify it
22309;how do i make a cosntructor?
22310;(or at least declared since go has default values)
22311;write a function
22312;wait you mean struct?
22313;func NewThing() Thing
22314;and make the Thing
22315;```go// Player structtype Player struct { pos rl.Vector2 speed int32 frameSize float32 rec rl.Rectangle}```
22316;thats the player struct
22317;Yes
22318;```gofunc NewPlayer() Player { var player Player player.whatever = foo(player.pos.X) return player}```
22319;hmm
22320;ill do that
22321;"> you can do `string([]byte(""hello""))` to get back a string@Karitham ok if i declare my struct as []byte now,how would i define this now ```goFollowingAreas: []string{""test1"",""test2"",""test3""},```"
22322;thanks
22323;no idea
22324;i have realised it's not that it can't convert []byte to []string
22325;it can't convert the custom postgres `TYPE` into the relative golang custom type/struct
22326;"can someone explain to me what\'s wrong about this code right here?```go shader.EnableAttribFloat(""position 2 5 0) CheckForError() // Checking for opengl errors shader.EnableAttribFloat(""color 3 5 2) CheckForError() // Checking for opengl errors```this is the method i\'m calling```gofunc (s Shader) EnableAttribFloat(_name string _items int32 _itemLength int32 _itemsBefore int32) { attrib := uint32(gl.GetAttribLocation(s.Id gl.Str(_name+""\\x00""))) gl.VertexAttribPointer(attrib _items gl.FLOAT false int32(reflect.TypeOf(float32(0)).Size())_itemLength gl.PtrOffset(int(_itemsBefore))) gl.EnableVertexAttribArray(attrib)}```"
22327;you tell us
22328;i can rewrite it so it's not using the function so it's clearer to read
22329;i've been stuck on this part for about 3 days now
22330;the c++ version on the opengl website is this:
22331;"```cppGLint posAttrib = glGetAttribLocation(shaderProgram position"");glEnableVertexAttribArray(posAttrib);glVertexAttribPointer(posAttrib 2 GL_FLOAT GL_FALSE, 5sizeof(float) 0);GLint colAttrib = glGetAttribLocation(shaderProgram color"");glEnableVertexAttribArray(colAttrib);glVertexAttribPointer(colAttrib 3 GL_FLOAT GL_FALSE,```"
22332;but there isn't a clear equivalent to go nor can i find any documentation on how i should be going about this
22333;i don't know what you're doing at all so
22334;hard to say what's wrong
22335;i can rewrite it
22336;No I mean you didn't explain your desired results OR the actual results and how they differ from what you want. You didn't mention an error message fi there is one
22337;I can read the code but it means nothing without context
22338;"```goposAttrib := uint32(gl.GetAttribLocation(s.Id gl.Str(""position\\x00"")))gl.VertexAttribPointer(posAttrib  2 gl.FLOAT false int32(reflect.TypeOf(float32(0)).Size())5 gl.PtrOffset(0))gl.EnableVertexAttribArray(posAttrib )colAttrib := uint32(gl.GetAttribLocation(s.Id gl.Str(""color\\x00"")))3gl.VertexAttribPointer(colAttrib  2 gl.FLOAT false int32(reflect.TypeOf(float32(0)).Size())5 gl.PtrOffset(2))gl.EnableVertexAttribArray(colAttrib )```"
22339;ah im sorry
22340;you're obviously doing shader stuff but like
22341;i added the little CheckForErrors() so i can see what was wrong but all it gives me is:```[DEBUG]: Successfully created GLFW Window.12821282[DEBUG]: Successfully compiled shader program.```
22342;and i looked it up but it wasnt clear as to what exactly was wrong
22343;are you getting a syntax error? are colors inverted? is it showing a jpg of hulk hogan instead of your barbarian hero
22344;¬Ø\\_(„ÉÑ)_/¬Ø
22345;Okay so
22346;in the checkforerrors method it just prints out the current gl.GetError()
22347;Here's what I'm hearing.1) Something is going wrong2) The thing I use to check if something went wrong says nothing went wrong
22348;im trying to draw a different color for each vertex in my triangle
22349;Google says GL error 1282 is Invalid Operation
22350;by passing in the color data with the vertexdata
22351;Oh. Those are error codes
22352;:kek:
22353;yeah but it doesn't really say what im doing invalid it just says invalid üòî
22354;There we go
22355;That's what you should've said up front
22356;i\'m doing this opengl shit i\'m getting error code 1282 \'invalid operation\
22357;anyways
22358;um
22359;im sorry üòî
22360;```go vertices := []float32{ // X Y R G B 0.0 0.5 1.0 0.0 0.0, 0.5 0.5 0.0 1.0 0.0, 0.5 0.5 0.0 0.0 1.0}```
22361;nah it's okay
22362;nobody's mad at you
22363;just protips for getting help faster
22364;can't you get GL error strings
22365;i cant all it gives is the code
22366;if you mention your errors up front you get to skip the part where people have to ask you what you're actually having problems with
22367;i have to look it up but the error isn't helpful
22368;it\'s like im driving on the wrong side of the road and all it says is bad driving
22369;that's a bad example ignore that
22370;I would print the crap out of that
22371;this is why i never bothered with graphical work
22372;although gl..
22373;i hate myself
22374;but not enough to fuck with shaders
22375;üòî i wanted to create a library i use constantly in go
22376;since right now it's just bindings to it
22377;mainly just to see if it's possible
22378;all i know is that im doing something wrong with the position attribute and there isn't anything that tells me how to do it right
22379;so start with the most basic part of what you're doing
22380;the simplest example
22381;and work up from there
22382;look at examples
22383;yeah that's what i did
22384;that does not look like that
22385;and everything was working great until i added another attribute
22386;so that's likely the issue
22387;yeah but i just don't know what i'm doing wrong
22388;if i removed it it works fine but opengl wont tell me what im doing wrong
22389;that's opengl
22390;do you have a gist for that or something a bit more detailed?
22391;wdym?
22392;more code
22393;ah yes im sorry
22394;more code but as little code as possible üôÉ
22395;pastebin it or something
22396;here we go i had to sign up for pastebin
22397;https://pastebin.com/2METhqUU
22398;this is the code that works with the shader
22399;and i'll repost the shader struct's code
22400;"when i call newshaderfromsource()```govertex := uint32(_vertex) fragment := uint32(_fragment) shader.Id = gl.CreateProgram() gl.AttachShader(shader.Id vertex) gl.AttachShader(shader.Id fragment) gl.BindFragDataLocation(shader.Id 0 gl.Str(""color_output""+""\\x00"")) gl.LinkProgram(shader.Id) shader.EnableAttribFloat(""position 2 5 0) CheckForError() // Checking for opengl errors shader.EnableAttribFloat(""color 3 5 2) CheckForError() // Checking for opengl errors gl.DeleteShader(vertex) gl.DeleteShader(fragment) debugMessage(""Successfully compiled shader program."") return &shader```"
22401;it compiles the shader which all works fine and then it tries to compile the program and add attributes
22402;"```gofunc (s Shader) EnableAttribFloat(_name string _items int32 _itemLength int32 _itemsBefore int32) { attrib := uint32(gl.GetAttribLocation(s.Id gl.Str(_name+""\\x00""))) gl.VertexAttribPointer(attrib _items gl.FLOAT false  int32(reflect.TypeOf(float32(0)).Size())_itemLength gl.PtrOffset(int(_itemsBefore))) //gl.VertexAttribPointer(attrib 2 gl.FLOAT false 0 nil) gl.EnableVertexAttribArray(attrib)}```"
22403;and for opengl this is its function signature in go
22404;```goVertexAttribPointer(index uint32 size int32 xtype uint32 normalized bool stride int32 pointer unsafe.Pointer){}```
22405;that's glfw right?
22406;i am using glfw but right now this is all opengl
22407;i havent posted any glfw code but it shouldn't be interfering
22408;the tutorial im using also uses glfw
22409;"```cvoid glVertexAttribPointer( GLuint index, GLint size, GLenum type, GLboolean normalized, GLsizei stride, const void  pointer);```"
22410;yeah I mean. I've seen a couple of differences in some implementations
22411;this is the function in c
22412;ah im sorry yeah its glfw
22413;you are binding C ?
22414;im using premade bindings
22415;yourself I mean
22416;nah i've never created any
22417;this is the output im trying to get
22418;when i only have one vertexattribpointer and set the color manually in the shader it renders perfectly fine
22419;though when i added the second one nothing draws
22420;im going to master opengl in go and rewrite that opengl tutorial in go as proof
22421;I'm not sure but I think your offset should be based on size?
22422;...int32(reflect.TypeOf(float32(0)).Size())5 gl.PtrOffset(2))
22423;glPtrOffset(24)
22424;> offset> A GLintptr specifying an offset in bytes of the first component in the vertex attribute array. Must be a multiple of the byte length of type.
22425;specifically about https://discord.com/channels/118456055842734083/118456055842734083/746769179264155679
22426;and should be 3 after `colAttrib `
22427;ah i see
22428;hm that still doesn't seem to remove the errors
22429;i went and removed a couple of things to simplify it (like just making the size 4 while i work out the issues)
22430;and i also printed out more errors too
22431;"```gofunc (s Shader) EnableAttribFloat(_name string _items int32 _itemLength int32 _itemsBefore int32) { CheckForError() // Checking for opengl errors attrib := uint32(gl.GetAttribLocation(s.Id gl.Str(_name+""\\x00""))) CheckForError() // Checking for opengl errors gl.VertexAttribPointer(attrib _items gl.FLOAT false 4_itemLength gl.PtrOffset(4int(_itemsBefore))) CheckForError() // Checking for opengl errors //gl.VertexAttribPointer(attrib 2 gl.FLOAT false 0 nil) gl.EnableVertexAttribArray(attrib) CheckForError() // Checking for opengl errors}```"
22432;before i do anything with the attributes
22433;after i get the name after i set the pointer and after i enable it
22434;why the `_` names
22435;icky Go
22436;i just did that because its an argument and i didnt want to accidently mix it up with anything
22437;i do that often
22438;```NO ERROR!128212811281NO ERROR!128212811281```
22439;you shouldn't do that
22440;this is what it prints now for both of them
22441;but unrelated
22442;its fine before i start working with the attributes which is good but it gives me 1282 when i try to get it and 1281 twice when i set the attribute and enable it
22443;i'll remove them
22444;i think i had variables with similar names and kept accidently using them
22445;I would list stuff
22446;like list attribs and uniforms
22447;more prints around cause gl is ap ain
22448;I'm working on this problem and my solution works for all but 4 cases and those 4 cases are all extremely large sets. https://www.hackerrank.com/challenges/ctciarrayleftrotation/problem?h_l=interview&playlist_slugs%5B%5D=interviewpreparationkit&playlist_slugs%5B%5D=arrays&h_r=nextchallenge&h_v=zen
22449;On two I just get a runtime error and the other two it says the code didn\'t execute within the time limit. I\'m thinking it\'s an overflow of some kind but I don\'t really know anything
22450;"```gofunc rotLeft(a []int32 d int32) []int32 { temp := make([]int32 len(a)) length := int32(len(a)) for i := int32(0);i < length;i++ { if i+d > length  1 { temp[i] = a[(d(length1i))1] } else { temp[i] = a[i+d] } fmt.Println(i d length temp) } return temp}```"
22451;my solution
22452;i changed everyting to int64 and now I get three runtime errors and one out of time error
22453;Hello everybody can someone explain how first select case works here? I can't understand cuz it's always true i guess
22454;"```//go 1.10.4package mainimport fmt""var i intfunc main() { c:=make(chan int) q:=make(chan int) go func(){ for i:=0; i< 10;i++{ fmt.Println(<c) } q< 0 }()  fibonacci(c,q)}func fibonacci(c,q chan int){ i = 0 y x:= 0,1 for{ select{ case c < x: x y = x + y x i++ fmt.Println(""ready  i) if i == 10{ return }  } } }```"
22455;Usually `select` selects the first possible case (or one randomly if multiple are possible)
22456;You have somethign reading from that channel
22457;A select clause with one case isn‚Äôt really useful
22458;and you are sending to that channel
22459;> A select clause with one case isn‚Äôt really useful@Carson there was another one case but i played with code...
22460;> and you are sending to that channel@Doad oh i got it. Is default chan buffer size 1?
22461;no the default is unbuffered which means the communication does not happen until both the sender and receiver are expecting it simultaneously
22462;Thanks for answers i got it finally
22463;My solution works for all cases in python so this is a go specific issue. No idea how to solve it though
22464;@rm rf / have you told us what runtime error
22465;Hackerrank doesn't tell me. This is all I get
22466;None
22467;Have you tried running it locally..
22468;run it in playground then
22469;Aint no one stopping you from copy pasting this
22470;Fair enough lemme try
22471;@rm rf / https://play.golang.org/p/bYCVoPterqT
22472;what
22473;the fuck
22474;how
22475;Modulo
22476;ahahaha
22477;"How do i define these outside of a function?```govar player Playerplayer.pos = rl.NewVector2(0 0)player.speed = 4player.frameSize = 16player.hog = rl.LoadTexture(""hedgehog.png"")player.frame = 0player.maxFrame = 7``````gotype Player struct { frameSize float32 frame float32 maxFrame float32 speed int32 pos rl.Vector2 hog rl.Texture2D rec rl.Rectangle}```"
22478;Whaddya mean?
22479;i have a function here and i need to use player.pos.X etc but i cant use those because theyre local inside of the main function```gofunc move() { if rl.IsKeyDown(rl.KeyRight) { player.pos.X += player.speed } else if rl.IsKeyDown(rl.KeyLeft) { player.pos.X = player.speed } else if rl.IsKeyDown(rl.KeyDown) { player.pos.Y += player.speed } else if rl.IsKeyDown(rl.KeyUp) { player.pos.Y = player.speed }}```
22480;pass player in as an argument
22481;Genuine question so i know some context is Go your first language
22482;`func move(p Player)`
22483;also good question
22484;@Str≈ìm no im just really new to go
22485;but im not good at programming
22486;What have you done before?
22487;lua
22488;some c# in unity
22489;So how would you solve this in C#
22490;public float variable name = something
22491;You can't assign struct members outside of a function
22492;You can make a constructor function or just do it inline when you instantiate the struct
22493;thats annoying
22494;not really?
22495;|: hmm
22496;That's how you generally instantiate data
22497;in like any language
22498;`func NewPlayer(someParams....) Player`
22499;there's your function signature
22500;and then you just call that function when you want a player
22501;ill do that its seems better
22502;what are the choices for making a desktop app with GUI with golang?
22503;from a quick web search i did ive found theres QT and UI
22504;https://github.com/avelino/awesomego#gui
22505;all sorts
22506;"Hi there Im trying to work out why I cant create a struct on the fly. Im using the sparkpost driver to send email it has a struct called transmission that I would like to use inside another struct:``` // This works test := e.m.Sender test.Content = Test"" // This doesnt test := e.m.Sender{ } // The mailer struct type Mailer struct { env environment.Env client sp.Client Sender sp.Transmission } // With it working tx := &sp.Transmission{ Recipients: []string{""ainsley@reddico.co.uk""}, Content: sp.Content{ HTML: <p>Hello world</p>"", From: m.env.MailFromAddress, Subject: Hello from gosparkpost"", }, }```"
22507;Basically wondering why I can't do this``` test := e.m.Sender{ }```
22508;e.m.Sender is a member of a struct not a type i assume
22509;oh yeah it is
22510;u gotta do
22511;`test := &sp.Transmission{}`
22512;Thanks for your reply
22513;Bascailly I was wondering if it was possible to use the Transmission struct from the Mailer struct so I dont have to import sp.Transmission
22514;Is that possible & make sense>
22515;?
22516;i dont think thats possible
22517;Ah ok
22518;Unless I redeclare the struct right? But thats a bit pokey
22519;yeah just import
22520;Ok thanks for your help
22521;@aosync this isnt JavaScript
22522;Goroutines are multiplexed across a number of threads
22523;You dont get to choose how they are distributed
22524;"hi I need some help with my tls server. I created this method to generate a dummy certificate```gofunc GenerateCertificate(hosts []string) (tls.Certificate error) { pub priv err := ed25519.GenerateKey(rand.Reader) if err != nil { return nil err } notBefore := time.Now() notAfter := notBefore.Add(time.Hour  24  356) serialNumberLimit := new(big.Int).Lsh(big.NewInt(1) 128) serialNumber err := rand.Int(rand.Reader serialNumberLimit) if err != nil { return nil err } template := x509.Certificate{ SerialNumber: serialNumber, Subject: pkix.Name{ Organization: []string{""Dummy""}, CommonName: dummy_cert"", }, NotBefore: notBefore, NotAfter: notAfter, KeyUsage: x509.KeyUsageCRLSign, ExtKeyUsage: []x509.ExtKeyUsage{x509.ExtKeyUsageServerAuth}, BasicConstraintsValid: true, IsCA: false, } for _ h := range hosts { if ip := net.ParseIP(h); ip != nil { template.IPAddresses = append(template.IPAddresses ip) } else { template.DNSNames = append(template.DNSNames h) } } derBytes err := x509.CreateCertificate(rand.Reader &template &template pub priv) if err != nil { return nil err } cert err := x509.ParseCertificate(derBytes) if err != nil { return nil err } return &tls.Certificate{ Certificate: [][]byte{cert.Raw}, PrivateKey: priv, } nil}```I add the generated certificate to my tls server but it shows this error:`tls: certificate private key (<nil>) does not implement crypto.Signer`Can you give me a hint what I have done wrong?"
22525;Where is that error in the code? Which line? I think it‚Äôs saying that the private key is nil  so it‚Äôs not being generated correctly
22526;the error occurs on trying to connect to the server (listener.Accept)
22527;I just upgraded to go 1.15 and go build just hangs now
22528;and go run as well
22529;there is no error it just doesn't do anything
22530;bad upgrade?
22531;I'm not really sure\\
22532;I just downgraded to 1.14.7 and it's fine
22533;nevermind....totally forgot to call the method ^^
22534;hello
22535;"Can i make inline callbacks in go?In javascript i would do ```jsapp.all(\'/:param1\ (req res) => { res.send(`Hello ${req.params.param1}!`)})``` But how do i do it in go? I don\'t want to define a function? ```gohttp.HandleFunc(""/ (w r) => { fmt.Fprintf(w Hello %s! r.URL.Path[1:])})```^^ gave an error..."
22536;?go tour
22537;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
22538;"is there a way to format a structure like ```sqlCREATE TABLE userLogin( user_id SERIAL PRIMARY KEY  name varchar, username varchar, password varchar, email varchar);CREATE TABLE userDetails( user_id SERIAL PRIMARY KEY, reputation int, local_area varchar, following_areas varchar [], FOREIGN KEY(user_id)  REFERENCES userLogin(user_id));```with a foreign key of sorts"
22539;"```gotype userAuth struct { UserID int `json:""id db:""user_id""` Name string `json:""name db:""name""` Username string `json:""username db:""username""` Password string `db:""password""` Email string `json:""email db:""email""`}type userDetails struct { UserID int `json:""id db:""user_id""` Age int `db:""age""` Reputation int `json:""reputation db:""reputation""` LocalArea string `json:""localArea db:""local_area""` FollowingAreas []string `json:""following db:""following_area""`}type User struct { Auth userAuth Details userDetails}``` i was thinking this but i don\'t know if theres a way to call `User.Details.UserID` and for it to always be the same as the one in `Auth`"
22540;easiest way is to just ignore one or the other
22541;if you're talking strictly getting the ID no
22542;you can verify it while setting
22543;also you should probably export the 2 fields types
22544;else you can't store the results elsewhere outside the pgk
22545;I'm thinking of adding an interface so i can call User.Methods.Reload() and it would make sure they are both synced
22546;```gotype User struct { Auth UserAuth Details UserDetails Methods Methods}type Methods interface { Reload()}func Reload(user User){}```
22547;something like this
22548;how would i input User from the interface
22549;that's so weird
22550;what\'ts this reload for
22551;Is it possible to sort of have a struct have a function like in python
22552;methods?
22553;I feel like you ask this every day lmao
22554;I feel like I'm becoming dumb and dumber every day
22555;sort of like a method
22556;but i want it to be contained within a struct
22557;or something
22558;You've asked about this one too
22559;You can have a function as a struct member
22560;You just use the function signature as the field type
22561;```Gotype myType struct { someFunc func(int) int}```
22562;in fact I'm pretty sure I answered this exact question yesterday lmao
22563;the next question would be why do you need that?
22564;don't try to do something like `(User).Update()`
22565;then you'll need to include a db connection into User
22566;that'd be horrible
22567;:fepher:
22568;"this is what i wanted to do ```gofunc Reload(u User db sqlx.DB){ if u.Auth.UserID == 0{ u.Auth.UserID = u.Details.UserID tx := db.MustBegin() err := tx.Get(&u.Auth SELECT  FROM userLogin WHERE user_id=$1; u.Auth.UserID) if err != nil { fmt.Println(err) } tx.Commit() } if u.Details.UserID == 0{ u.Details.UserID = u.Auth.UserID tx := db.MustBegin() err := tx.Get(&u.Details SELECT  FROM userDetails WHERE user_id=$1; u.Auth.UserID) if err != nil { fmt.Println(err) } tx.Commit() }}```"
22569;but that's not the issue i have now
22570;i\'m getting this error `pq: null value in column user_id violates notnull constraint`
22571;which makes no sense
22572;as user_id is `SERIAL`
22573;it should auto increment
22574;If UserID is 0 in Auth and Details you‚Äôre not going to get a sensible output from that method @tfyl
22575;So either that or you have somehow got invalid data in your table
22576;that method is completely unrelated
22577;to the error
22578;@andy.xyz
22579;Did you post the code causing the error?
22580;Likely you are telling it to set a column to null instead of omitting it from value list in an insert
22581;Hey^^I need a library that detects the programming language of a given code snippet (similiar to highlight.js's `highlightAuto`). Do you know one?
22582;this is the code ```gotx.Exec(`INSERT INTO userLogin (name,username,password,email) VALUES ($1,$2,$3,$4) `,userForm.Auth.Name,userForm.Auth.Username,userForm.Auth.Password,userForm.Auth.Email)```
22583;Then your user_id column is not defined like you think it is
22584;it is
22585;i can even see in adminer
22586;None
22587;Maybe it‚Äôs this bug: https://www.postgresql.org/messageid/4134.1026225976%40sss.pgh.pa.us
22588;Integer != serial I think
22589;Laters üëã
22590;Hey I have a problem with interfaces:```gotype MyInterface interface { Set(str string) error Get(str string) error}type MyStruct struct { SomeVar string}func (myStruct MyStruct) Set(str string) error { // ... return nil}func (myStruct MyStruct) Get(str string) error { // ... return nil}```I can't assign a variable like this:```govar Current MyInterfacefunc main() { myStruct := new(MyStruct) Current = myStruct}```I get `Cannot use myStruct (type MyStruct) as type MyInterface`
22591;I think that this is a pretty basic issue but I really don't know what to do currently
22592;You dont want pointer to an interface
22593;Ah that sounds logical
22594;pointer to interface != Pointer to struct
22595;It seems like I can set a pointer to my struct as the interface though when I change `MyInterface` to `MyInterface`
22596;9.9/10 you dont want pointer to interface
22597;Uhm okay. I will go without one then üòÑ
22598;thanks
22599;it's because my trigger has a fault i think
22600;"TIL TinyGo is a thing:```gopackage mainimport ( machine"" time"")const ( RedLED = machine.D10 GreenLED = machine.D9)func main() { LEDConfig := machine.PinConfig{Mode: machine.PinOutput} RedLED.Configure(LEDConfig) GreenLED.Configure(LEDConfig) RedOn := true GreenOn := false for { RedLED.Set(RedOn) RedOn = !RedOn GreenLED.Set(GreenOn) GreenOn = !GreenOn time.Sleep(1  time.Second) }}```Result: <https://drive.google.com/file/d/15JvnrZXUW9FFjWgl61Xn3Cn_4KGXaVYV/view?usp=drivesdk> (Video too big for Discord)TinyGo: <https://tinygo.org/>"
22601;Pretty hekkin cool and I can't wait to do some Arduino things and not hate myself for it :D
22602;"i\'m not sure exactly how i\'d test if this is working as it should be but does this code look correct ```gofunc setJWTcookie(w http.ResponseWriter username string secretKey []byte) { user := User{ Auth:UserAuth{ Username:username, }, } claims _ := sjwt.ToClaims(user) expiry := time.Now().Add(time.Hour  24) claims.SetExpiresAt(expiry) JWTstring := claims.Generate(secretKey) JWTcookie := http.Cookie{ Name: JWT"", Value: JWTstring, Expires: expiry, } http.SetCookie(w &JWTcookie) _ _ = w.Write([]byte(""Login Succesful""))}```"
22603;https://golang.org/pkg/net/http/httptest/#NewRecorder
22604;also is it safe to put the whole user struct in instead of just the username ?
22605;well i tried it out and it works in practice
22606;That function returns an object that satisfies `http.ResponseWriter` which can be very useful for testing üôÇ
22607;what would be the best way to define a struct with a string field that only has a finite possibilities
22608;i.e. categories
22609;"```gopackage thingtype Thing struct { Field whatever}type whatever stringconst ( FOO = whatever(""foo"") BAR = whatever(""bar""))```"
22610;probably
22611;anyway i can have it be whatever.foo ?
22612;no
22613;you'd import `whatever.com/name/repo/thing` and then do `var t thing.Thing` and then `t.Field = thing.BAR`
22614;because the type is unexported users cannot create their own instances of it
22615;and the Thing type will ONLY accept values of that `whatever` type
22616;and the only ones that exist are the constants you've exported
22617;bazinga
22618;genius
22619;thanks @deezy
22620;go is aggressively minimal but with a little consideration you can accomplish a lot
22621;"I\'m importing ```go ./auth"" ./post""``` into my main code block but i need `post` to be able to get a function from `auth` should i import it or is there a better way ?"
22622;you're already importing auth
22623;i mean from post
22624;i need to get auth
22625;None
22626;what i sent was from app.go
22627;bad explanation i know üòÖ
22628;i mean the short answer is import the package that contains what you need
22629;if your actual question is i do that and i get an error about import cycles how do i fix it that\'s a whole other thing
22630;first one then
22631;what would the path to auth be for post ?
22632;or would it be the same
22633;that's my followup
22634;don't do relative imports
22635;?go modules
22636;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
22637;make your thing a module
22638;use the absolute import path
22639;if i make it a module would i need to run the mod command everytime before i run ?
22640;no
22641;that'd be terrible design
22642;> that'd be terrible designthat sounds right up my alleyway
22643;so if i run `go mod auth`
22644;i can just import `auth` ?
22645;you create a module for your whole project
22646;and then just import <modulename>/auth
22647;i mean if you read the docs i linked you'd know `go mod auth` isn't a thing
22648;just focus on the gide
22649;Well sometimes go modules doesn't support some packages right?
22650;"For example; https://github.com/joho/godotenv. It says that could not import the package"
22651;I use go vscode
22652;> could not import the packagesure and i bet there's more to the error that just that
22653;huh why can't you lol
22654;I don't see why not
22655;Something like this
22656;not really sure what that's supposed to convey
22657;your whole import block is occluded by your IDE popover
22658;run go get
22659;that (the go compiler one) literally just means it can't find the thing on your computer
22660;NOT online
22661;Also the popup is telling you to comments right above that _ Import to get rid of this specific message. Just write why you did a blank Import. In this case it is the loading of a dialect for a database connection I guess?
22662;Also be sure to start vs code in the root folder where go.mod resides. Otherwise the language protocol Server will have diffuclties. I followed this to get everything working https://amp.reddit.com/r/golang/comments/e90np2/how_to_smoothly_use_vscodego/
22663;Thinking of making discord bot framework made in Go that uses lua bindings for commands and listeners
22664;:KM_Dorime:
22665;so the runtime is in Go and the scripts are super easy and have exposed functions and objects like user and message
22666;That's conforvotantool
22667;basically just ease the process
22668;wait its already a thing?
22669;@Golang stuffdoer
22670;well ok thats different
22671;it looks to me like this is actually starting from Lua
22672;I almost wrote a Discord DSL
22673;already made this readme and shit https://github.com/Riku32/Picnic
22674;was gonna start tmrw
22675;:BCS_PepeLaugh:
22676;i get an error when i try to install a package
22677;"```go: found github.com/gen2brain/raylibgo/raylib in github.com/gen2brain/raylibgo v0.0.0202006252121577bdb60d758ed# github.com/gen2brain/raylibgo/raylibcore.c: In function GetDirectoryPath':core.c:2030:9: warning: strncpy specified bound depends on the length of the source argument [Wstringopoverflow=] 2030 | strncpy(dirPath + ((filePath[1] != :')? 2 : 0) filePath strlen(filePath)  (strlen(lastSlash)  1));  | ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~core.c:2030:68: note: length computed here 2030 | strncpy(dirPath + ((filePath[1] != :')? 2 : 0) filePath strlen(filePath)  (strlen(lastSlash)  1));  | ^~~~~~~~~~~~~~~~# github.com/gen2brain/raylibgo/raylibraudio.c: In function LoadMP3':raudio.c:2103:65: warning: passing argument 3 of drmp3_open_file_and_read_f32 from incompatible pointer type [Wincompatiblepointertypes] 2103 | wave.data = drmp3_open_file_and_read_f32(fileName &config &totalFrameCount); | ^~~~~~~~~~~~~~~~ | | | long unsigned int In file included from raudio.c:218:external/dr_mp3.h:3767:96: note: expected drmp3_uint64  {aka long long unsigned int '} but argument is of type long unsigned int ' 3767 | float drmp3_open_file_and_read_f32(const char filePath drmp3_config pConfig drmp3_uint64 pTotalFrameCount)  | ~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~ ```"
22678;when i run `go get github.com/gen2brain/raylibgo/raylib`
22679;those seem like warnings
22680;not errors
22681;hmmm
22682;oh yeah it works
22683;but
22684;i cant get autocomplete to work
22685;its really bugging me
22686;cgo be like
22687;i NEED autocomplete because theres no way im remembering every single method
22688;im using vscode
22689;it worked fine with the jetbrains ide
22690;but i want to use vscode
22691;üò¢
22692;does it work w/o raylib?
22693;yeah it just doesnt autocomplete so i assumed it doesnt work
22694;huh
22695;it works tho
22696;so does it autocomplete or not without raylib
22697;depends
22698;wat
22699;when im importing a path it doesnt
22700;it only autocompletes for some builtin methods
22701;ok so it's go modules read into that
22702;someone here posted a link to fix it on vscode
22703;go read that
22704;where?
22705;nvm
22706;found it
22707;https://canary.discord.com/channels/118456055842734083/118456055842734083/746964874369826908
22708;ok sure
22709;but i dont really understand a thing
22710;i think i need to configure vscode with gopls to make it support modules is that correct @_diamondburned_ ?
22711;yeah
22712;but i cant find any comprehendible guide to setting it up
22713;eyyyyy
22714;i did it
22715;i went into settings and ticked a box that said use gopls or something like that and it works!
22716;big brain
22717;how do i make a local variable?
22718;you just declare the variable in a local scope
22719;"```gofunc Foo() { f := banana""}```"
22720;`f` is a local variable of `Foo`
22721;yeah but what if it assumes a wrong type?
22722;there is no assuming
22723;like `f := 1` will make a `int` but i need an `int32`
22724;thats not assuming the wrong type
22725;`1` IS an int
22726;if you need it to be another type you need to convert it
22727;through casting if applicable
22728;i know but how can i make it so it makes the one i need it?
22729;or other means
22730;can i do `f := int32(1)`?
22731;should work yes
22732;and that makes a local variable?
22733;is a variable only visible inside its scope?
22734;yes
22735;like if i make a variable inside of a function its only visible in there and when the function finishes then it gets deleted?
22736;yes
22737;oh ok
22738;```gofunc InsideBox(x y float32 rec rl.Rectangle) bool { if x <= rec.X+rec.Width && x >= rec.X && y <= rec.Y+rec.Height && y >= rec.Y { return true } else { return false }}``` whats wrong with this?
22739;Comma after y
22740;Does it not tell you
22741;also just
22742;`return x <= rec.X+rec.Width && x >= rec.X && y <= rec.Y+rec.Height && y >= rec.Y`
22743;oh yeah
22744;i forgot that works in returning
22745;i havent done returning in like forever
22746;How do you code and not use returns
22747;Theyre like a fundamental part of programming
22748;i do use returns
22749;just not much
22750;hey guys I have a noob question. how do i make select run forever? is this correct?
22751;@VTGare ```goalive = truefor alive { //do stuff here i guess}```
22752;doesn't just ``for`` achieve the same goal?
22753;`for` can be used like a while loop
22754;!go tour
22755;```code block was not foundStatus = 0```
22756;?go tour
22757;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
22758;@VTGare maybe try this?
22759;:GWcorbinTopKek:
22760;Yeah should be able to range over the channel
22761;I don't close the channel I'm trying to use it as a queue.
22762;For e := range q[pair]
22763;afaik ^ this doesn't work unless the channel isn't closed
22764;As long as you don't close the channel it will run
22765;oh
22766;You can still break or return obviously
22767;so it works the other way around :GWgoaThinken:
22768;It will wait for input as long as the channel is open
22769;Thanks that's perfect!
22770;When the channel is closed and all input handled the loop will break
22771;For some reason I thought it stars iterating over the channel after it's closed.
22772;```A : [1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16]B : [1 3 6 10 2 5 9 13 4 8 12 15 7 11 14 16]Matrix:[1 3 6 10][2 5 9 13][4 8 12 15][7 11 14 16]```
22773;Say I have the array A. I want to turn it into array B so that the matrix of B looks like the above.
22774;What transformation is this?
22775;I'm building a grid but the grid library only accepts a one dimensional array
22776;Whats the transformation from A to B
22777;I dont see a pattern
22778;That's what I'm asking haha
22779;The pattern is supposed to the one in the matrix
22780;Whats in the matrix is just B split in 4
22781;A is monotonically increasing
22782;read it diagonally
22783;1 > 2 > 3 > 4
22784;Ah
22785;Well then its just shuffling things around
22786;Yeah I need to make it generate each row of the matrix
22787;hmm
22788;matrix row start on i = 1
22789;and increase by 2 each time
22790;and then each column is (i^2) + 1
22791;is there any json tag i can put to stop a field in a struct being processed
22792;"and is there a way to put all form data from net/http into a struct without individual `r.FormValue(""Email"")` etc"
22793;Not in the stdlib but https://github.com/gorilla/schema
22794;i'm using `github.com/gochi/chi` is there an equivalent there
22795;Nothing in this package is tied to `gorilla/mux` if that's what you're thinking
22796;ohh right
22797;> is there any json tag i can put to stop a field in a struct being processed
22798;and is this a thing ?
22799;so a field is ignored when i do `json.NewEncoder(w).Encode(someStruct)`
22800;"`json:""""`"
22801;lovely thanks
22802;None
22803;if i use this is there a way to do struct.key = value
22804;or how would i access the json tag
22805;Reflection
22806;This is what the library I linked above does for you
22807;any examples ?
22808;yeah but i was thinking of making it myself
22809;because i haven't worked with tags and it doesn't seem that hard ü§û
22810;Looking at its source might be a good place to start then üôÇ
22811;does reflection change the value of the original var ?
22812;It provides a mechanism to do that sure.
22813;which mechanism would that be
22814;https://golang.org/pkg/reflect/#Value.Set
22815;> because i haven't worked with tags and it doesn't seem that hard ü§ûi take this back
22816;It's a fairly complicated system.
22817;yep I see that now
22818;maybe gorrila/schema is good for now üòÖ
22819;is there a way to get a hash of sorts for a stuct so it's easy to compare
22820;sure
22821;produce a []byte that correlates to your data
22822;You cant do == ?
22823;Only when the types are compatible
22824;Doesn't work well for all types
22825;Time comes to mind
22826;Yeah I don\'t see a problem with I want to produce a deterministic unique identifier for a given set of data
22827;https://golang.org/pkg/crypto/md5/#Newhttps://golang.org/pkg/hash/#Hash
22828;There's always useful unsafe package
22829;shhhh
22830;good ideas only
22831;Based unsafe
22832;Rob pike once said that simple things are goodIn that case unsafe casting seems to be it üòê
22833;you got me there chief
22834;HelloI would like to create a module in my project and import it from the main I don't understand how to do.I have:```.‚îú‚îÄ‚îÄ myproject‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ main.go‚îÇ\xa0\xa0 ‚îú‚îÄ‚îÄ mymodule‚îÇ\xa0\xa0 ‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ foo.go‚îÇ\xa0\xa0 ‚îî‚îÄ‚îÄ ...‚îú‚îÄ‚îÄ go.mod‚îî‚îÄ‚îÄ ...```From `main.go` I tried `import ./mymodule` but Go says cannot find module for path _/full/path/to/mymodule. Why?
22835;because you're using a relative import
22836;don't do that
22837;modules are absolute imports
22838;remove the ./
22839;"> cannot load modules: malformed module path mymodule"": missing dot in first path element"
22840;bruh give the full path
22841;"`import github.com/foo/bar/mymodule""`"
22842;Ok thanks but Go will not try to download my module (wich is not online yet) instead of using local folder?
22843;it won't if you're already inside the module
22844;why would it download the module when it's already present?
22845;> cannot load github.com/foo/bar/mymodule: no matching versions for query latest
22846;im getting this when im trying to pass a response from a request to a function
22847;@deezy ok
22848;"Cannot use \'out\ (type awesomeProject"".AggregatesResponse) as type awesomeProject"".AggregatesResponse"
22849;but it looks exactly the same
22850;0_0
22851;doesn't look like a go error message
22852;go doesn't quote types like that
22853;no its a type error
22854;it wants me to put aggregates response as the designated response type
22855;but the type its showing now is the same
22856;yet i can't use it
22857;no i mean that you probably are getting a compiler error but something is fucking with the message in between the compiler generating it and you seeing it
22858;and it's obviously wrong
22859;"```type awesomeProject"".AggregatesResponsetype awesomeProject"".AggregatesResponse```"
22860;so just cause they loook the same
22861;doesn't mean its right?
22862;i mean
22863;if they actually WERE the same you wouldn't be getting the error message
22864;but they aren't
22865;and something is obscuring the true nature of the error
22866;so you have to start peeling layers back
22867;"Ok I tried with `import github.com/foo/bar/mymodule` and now I get:> cannot load github.com/foo/bar/mymodule: no matching versions for query latest""What I\'m supposed to do? ü§î"
22868;hm
22869;?go modules
22870;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
22871;i swear you're supposed to be able to name a module anything
22872;but it seems like it wants the module to start with a domain name
22873;> There's always useful unsafe packageso is https://golang.org/pkg/hash/#Hash unsafe ü§®üòÖ
22874;"@deezy my module starts with a domain name. But I don\'t know how to deal with no matching versions for query latest"" error.Am I supposed to put my module in `go.mod`\'s require?"
22875;i mean you're using git right
22876;yes
22877;:thonk:
22878;honestly just rm go.mod and go.sum
22879;and `go mod init` again
22880;@Roipoussiere show your go.mod
22881;or that
22882;Here my project: https://framagit.org/roipoussiere/amethyst//tree/module_error
22883;I commited current state in this `module_error` branch.
22884;go.mod:```module framagit.org/roipoussiere/amethystgo 1.13replace github.com/faiface/pixel => ./pixelrequire ( github.com/elastic/gosysinfo v1.4.0 github.com/faiface/pixel v0.0.000010101000000000000000000 github.com/golang/freetype v0.0.020170609003504e2365dfdc4a0 github.com/kirsle/configdir v0.0.020170128060238e45d2f54772f github.com/llgcode/draw2d v0.0.02020060316405319660b984a28 github.com/otiai10/copy v1.2.0 github.com/spf13/cobra v1.0.0 golang.org/x/image v0.0.020200801110659972c09e46d76 gopkg.in/yaml.v2 v2.3.0)```
22885;"After removed the `require` part of go.mod I get same error when I try to build the project:```go: finding github.com/golang/freetype latestgo: finding github.com/kirsle/configdir latestgo: finding golang.org/x/image latestgo: finding github.com/llgcode/draw2d latestgo: finding framagit.org/roipoussiere/amethyst/modules latestbuild framagit.org/roipoussiere/amethyst/amethyst: cannot load framagit.org/roipoussiere/amethyst/modules: no matching versions for query latest""```"
22886;oh
22887;well
22888;yeah
22889;`framagit.org/roipoussiere/amethyst/modules` doesn't exist
22890;None
22891;the easiest solution is to lift the go code to the root of the git repo
22892;oh ok so I'm supposed to put the `modules` folder in the root?
22893;Well the import paths are relative to where the go.mod file lives
22894;er
22895;fuck now i'm confused
22896;ok!! Well indead it's better! \\o/Thank you! ‚ù§Ô∏è
22897;your import path is just wrong
22898;in main
22899;oh yeah
22900;repo is called amethyst
22901;it needs an extra /amethyst/
22902;module called amethyst
22903;builds fine after doing that
22904;framagit.org/roipoussiere/amethyst/amethyst/modules
22905;"yes now I keep `""framagit.org/roipoussiere/amethyst/modules""` but I moved `modules` in the root."
22906;You can do either
22907;That solves it as well
22908;makes the import path match
22909;Now you understand how modules work relative to the code they're managing
22910;if that makes sense
22911;The name in go.mod indicates what the module is called. Any directory down from there is considered part of the module
22912;If you import code starting with that modules name it will look for it in that directory
22913;If you had called the module `banana` you could use `banana/modules`
22914;Anything that doesn't match the modules name will be downloaded using the `go get` system
22915;ok
22916;So is it ok to write in go.mod `module amethyst` instead of `module framagit.org/roipoussiere/amethyst`?
22917;It is good practice to make the module name match the location of source control
22918;That way other people can `go get` it
22919;If you don't do that they will get the infamous: module name doesn't match source control error
22920;ok
22921;Thank you so much for these explations @deezy and @Sgt_Tailor ü§ó
22922;No problem
22923;godspeed starchild
22924;Is error handling forsure going to change in go 2
22925;Nothing is set in stone
22926;Oh okiw
22927;I like the one proposal to a keyword before the variable.``` check err```
22928;XD
22929;I need to look through the proposals I'm not really familiar with them
22930;There are some pretty interesting ones :P
22931;https://github.com/golang/go/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aopen+label%3AGo2+label%3AProposal
22932;is there an issue storing private data in jwt cookie
22933;jwt arent encrypted
22934;ah
22935;i must be getting confused then
22936;so you can verify them but everyone can see what is inside ?
22937;correction: it can be encrypted
22938;but you probably arent
22939;Whoa this one's a good idea xd
22940;"It\'s useful to think of JWTs as sort of temporary licenses""."
22941;https://github.com/golang/go/issues/38520
22942;A server gives a client a JWT to say the bearer of this token is authorised to do this this and this and has these relevant details for the systems they need to interact with
22943;And it's designed in a way that it can be certain that license wasn't tampered with
22944;> Whoa this one's a good idea xd@Dane Zaddy We have defer func(){}() right now
22945;The license can have an expiration date
22946;you can do signing and encryption if you want
22947;i'm using https://github.com/brianvoe/sjwt which uses `HMAC SHA256`. which means it is encrypted? üòÖ
22948;XD too uglyy
22949;@Dane Zaddy that offers so little lmao
22950;And it can also be encrypted which is where the metaphor starts to fall apart
22951;they just want to avoid using a function scope
22952;But it looks so aesthetic
22953;Like I juss wanna use curlies
22954;:))
22955;HMAC is for signing not encryption iirc
22956;right
22957;HMAC is just a cryptohash digest system
22958;right so it's not encrypted
22959;it CAN be
22960;https://tools.ietf.org/html/rfc2119 sorry `MAY` be encrypted
22961;can renaming a file cause issues with go run?
22962;what do you mean? renaming what?
22963;file1 > rename to file2new file file1 cannot find package main
22964;so from what i understand don't store private data but it's fine to have a user id to authenticate and assume that it is tamper proof
22965;go doesnt deal with files
22966;it deals with packages
22967;filename is irrelevant
22968;so what's going on? i don't know where to begin to look
22969;what command are you running
22970;what does your package structure look like
22971;you havent given us any info on whats actually going wrong
22972;what do your imports look like
22973;etc
22974;`go run ./sandbox.py` it's just a single file
22975;.py???
22976;> .py
22977;Uh
22978;err go
22979;XD
22980;sorry force of habit
22981;Ow oki
22982;and what folder is the other file in
22983;just do `go run .`
22984;Tru
22985;lol `.py`
22986;so you can use the whole package
22987;cannot find main module
22988;with go run .
22989;show package structure
22990;show go.mod
22991;show imports
22992;etc
22993;please give us some info
22994;show ls
22995;yeah just ls the directory
22996;sandbox_old.go sandbox.go
22997;that's it
22998;Hhh
22999;Dumb question. Did u do ```package main```
23000;In your file
23001;yes
23002;Ow
23003;E
23004;Idk
23005;still waiting for requested info
23006;Can I see the full file xd
23007;tell me how i can give you the info and i'll give it to you?
23008;None
23009;None
23010;idk what more we can say
23011;Tru
23012;thanks for the screenshot it's like i can't read /s
23013;show go.mod
23014;what is so hard about that
23015;E chill guys xd
23016;you have a go.mod file?
23017;show is not a valid command
23018;its english
23019;bruh
23020;:facepalm:
23021;think about it
23022;as in show us the file
23023;ffs sentry you are so unhelpful please
23024;show package structure
23025;is that meant to be a command
23026;`$ ls`
23027;i already told you the output of `ls` maybe stop typing and read yourself
23028;He said the 2 files guys
23029;is there another channel i can go to with someone that's less hostile?
23030;and what about the other requests
23031;Just dm me xd
23032;Positive vibes for all :))
23033;show us the contents of the file
23034;how about we all calm down
23035;and you're not using go modules which you should be using
23036;```go mod init```
23037;so why did it work before?
23038;what did you change
23039;i added a file
23040;and changed the name of the original
23041;Did u put the package in the other
23042;what command do you use to run
23043;I'm assuming you have two main functions in the same package now
23044;oh yea with a single file its less setup
23045;Possibly
23046;yes there are two files with package main
23047;there is no go.mod
23048;if its multiple you want a go.mod
23049;so init go.mod first
23050;None
23051;if you do `go run .` you need a go.mod
23052;Did u init mod
23053;you need to run `go run .` if theres multiple files in the main package
23054;ergo you need a go.mod if youve multiple files in the main package
23055;and also if youve subpackages iirc
23056;Yee
23057;what is the actual command to init a go mod?
23058;`go mod init` ...
23059;`$ go mod init`
23060;?go modules
23061;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
23062;`go: cannot determine module path for source directory /home/golang/sandbox (outside GOPATH module path must be specified)`
23063;`go mod init <name>`
23064;Yee
23065;what command did you run?
23066;does name have to be a path from root?
23067;Just out of curiosity has anyone tried opengl stuff using go
23068;name is the module name
23069;like `github.com/user/repo`
23070;i just want main
23071;it's only a test file
23072;`go mod init github.com/user/repo`
23073;this isnt about package names
23074;Also it's great to use git with go projects
23075;this is module names
23076;your main package is still main
23077;And GitHub. It simplifies alot
23078;so if my file path is /home/golang/sandboxwhat's the module going to be?
23079;whatever you want
23080;ideally somewhat unique
23081;is it namespaced to the directory?
23082;yes
23083;if the name collides with a dependency (stdlib or 3rd party) itll mess that up only within the module
23084;ok so i have a go.mod now
23085;cool
23086;if i run is it going to run both package main?
23087;i run by module name not file name now?
23088;if you do `go run .`
23089;You have one main and `N` files in main package
23090;you specify the path to the main package
23091;how does that affect other files using package main?
23092;it compiles all the main package files within the directory you specified
23093;so it's like having them all combined
23094;yes
23095;In Go think in terms of packages not files
23096;if i rename the package will it be ignored if i don't import it?
23097;Keep in mind tho most projects use a main.go file with the package only there
23098;yes
23099;what do you mean zane?
23100;unused packages have no effect
23101;And plz eventually move to GitHub with every project
23102;That aren't small anyway
23103;Ok so
23104;When u need multiple files u usually need multiple packages
23105;```package sandbox: found packages main (sandbox.go) and old (sandbox_old.go) in /home/golang/sandbox```i'm getting this in my terminal
23106;But ones that aren't the main one
23107;only one package per folder
23108;cant mix packages per folder
23109;Oh ya that too xd
23110;1 package per folder
23111;ok that makes sense
23112;Ok cool
23113;:P
23114;thank you everyone and thank you sentry after the initial frustration you were very helpful
23115;quick question
23116;if i'm passing around something like `\` or `\\t` as a parameter what datatype is recommended?
23117;a parameter?
23118;huh
23119;datatype?
23120;string rune etc
23121;Like in println?
23122;is it just one rune? if so rune
23123;"`fmt.Print(""\\\t"")` ?"
23124;it's a delimiter for a pretty printer
23125;if it can be multiple runes use string
23126;Yee
23127;That's for line breaks and stuff tho right
23128;?
23129;I'm just asking cuz instead of that I always use println of I need linebreak and print if not
23130;Is that recommended xd
23131;`foo(string string string) string` is that the right way to handle multiple string parameters in an interface embed
23132;that works
23133;yep
23134;`foo(string string string) string`?
23135;Println for a trailing new line is a legitimate use case
23136;commas
23137;go tour time
23138;Ok xD
23139;does the go tour mention anything about string literals and interpolation?
23140;theres no interpolation outside of whats specified in `fmt`
23141;oh
23142;https://golang.org/pkg/fmt/#pkgoverview
23143;the go tour mentions almost everything you need to know regarding data types and parameters
23144;is anyone in the mood to code review a toy script?
23145;How would you handle optional parameters for a method that uses sqlx to do an Update operation on a database?```gofunc UpdateCustomerAppInstanceRunDetails(db sqlx.DB appId int runStatusId int totalRuntime int dataSize int errorLog string) {db.MustExec(fmt.Sprintf(`UPDATE cust_app_instance_run_details cust_app_id=%d run_status_id=%d total_runtime=%d data_size=%d error_log=%s WHERE WHERE cust_app_id = %d` appId runStatusId totalRuntime dataSize errorLog appId))}```For example in this function there will be cases where I won't be updating all of these fields.
23146;Yee but I'm a noob
23147;i'll wait until this guy has their question answered
23148;I'd use a query builder
23149;Kk
23150;also wow that function is loooonggggg
23151;hey guys do you use any third party libraries to create random strings for tests?
23152;sometimes yeah
23153;I wrote my own test library for that lol
23154;can you reccomend any??
23155;github.com/Pallinder/gorandomdata was what I used
23156;and the other one that I wrote too
23157;Does SQLX have a query builder?
23158;but that one was a bit niche
23159;Doesn't go have a built in one?
23160;sqlx does not but you can just use strings.Builder
23161;would be cool if the testing library itself had a random string generator
23162;pretty sure most test sets have have a need for some random string
23163;rand.Read
23164;kek
23165;Ope
23166;https://play.golang.org/p/G0Dyd23YBcZso you can see it's just a toy script for learning but any suggestions would be great
23167;well I don't think there's anything to be suggested
23168;@_diamondburned_ With strings.Builder how would I handle the final Update value not having a `,` after it?
23169;The concept seems like overkill xd
23170;Since the query will break if the final value has a `,` after it
23171;But I like how it's made
23172;if i != len(slice) { do comma }
23173;btw be sure to only build the query with ?
23174;so
23175;Oh okay thanks!
23176;```govar query strings.Buildervar param []interface{}```
23177;Wdym?
23178;the query contains the built query with `= ?`s
23179;and the `param` contains all the parameters
23180;then you can do `db.Exec(query.String() param...)`
23181;that way the sql params are still escaped
23182;Sorry still a little confused
23183;What do you mean with the `?`s
23184;? or $1
23185;depending on the SQL driver
23186;oh shit
23187;nvm
23188;"it\'s `fmt.Sprintf(""$%d len(param))`"
23189;to generate the $x like in postgres
23190;Hm do you know if there's any sample code online that does that?
23191;unfortunately not
23192;So I can have an example to go off of
23193;Alright
23194;it's just simple string concatenation using strings.Builder
23195;Yeah sounds good. I can take a shot at it
23196;Thanks diamond!
23197;yeah np
23198;https://play.golang.org/p/il0PifHFMtKwhat's causing the space before New item:
23199;Oh one more question @_diamondburned_ ```golangfunc UpdateCustomerAppInstanceRunDetails(db sqlx.DB appId int runStatusId int totalRuntime int dataSize int errorLog string) {```How would I loop through the parameters that are provided for the string building like you mentioned in this snippet:> if i != len(slice) { do comma }
23200;short answer is you can't really
23201;so you'll need to if them all
23202;lol
23203;i see the problem now kind of
23204;you can do `params []string`
23205;and `strings.Join(params  )`
23206;do like `params = make([]string 0 5)` to make a 5 cap string slice
23207;5 is the max you could ever go w/ maximum 5 parameters so it's a good number
23208;"@beepsandboops Change this:```gofunc (t test) prettyPrint(s1 s2 string) string { return fmt.Sprintf(""%s%s%s\ s1 t.delim s2)}```To this:```gofunc (t test) prettyPrint(s1 s2 string) string { return fmt.Sprintf(""\%s%s%s s1 t.delim s2)}```"
23209;ü§î
23210;When would you choose erlang over go personally
23211;I hear its better for secure networking but go is better at concurrent networking. Not sure if this is even true?
23212;try both and see
23213;To be honnest. I got the feeling erlang and other more esotheric or maybe more advanced (big quotes on this one) were first taught in school
23214;thats the impression I got
23215;Did some people here actually self taught those?
23216;I was self taught in c and c++ (big flex)
23217;Like I'mkind of curious but have had a few math courses and no mainstream info cursus
23218;Yeah C/C++ are more mainstream ones
23219;Erlang/Elixir seems to be really hard to find or it's from people who took mainstream software engineering courses
23220;Wait maybe i'm in bad channel my bad
23221;xd
23222;well mainstream courses bad
23223;:gun_cat:
23224;lol
23225;Y'know I'm getting kind of self conscious
23226;Ahah
23227;Thank god golang is getting more popular or I'd ditch it
23228;that's why I'm taking CE and not CS lol
23229;oo
23230;I love creating software but there's no way I'll do it as a career
23231;its a hobby :))
23232;I'm in a school where you have to learn with peer learning and doing incrisingly big software
23233;eww working with others
23234;jk
23235;IKR
23236;x)
23237;do yall get to learn git at least?
23238;Do you guys do scaling?
23239;then
23240;xd
23241;nah idrc about scaling
23242;lol imagine not learning git
23243;i don't have that much money
23244;Used to feel the same zane but I think it's actually posible if it's your pazssion
23245;Oof I wanna help ppl tho
23246;Thinking of something like biomedical engineer
23247;Oooh like doing useful software?
23248;yee
23249;Kinda feel the same
23250;HA I was just looking at mmo servers on github and found this
23251;https://github.com/liuhaopen/SkynetMMO
23252;you nvr see em in lua
23253;wow
23254;only lua programming for me was computercraft
23255;haha
23256;roblox all the way
23257;Fixing the nyan cat script with screens
23258;e
23259;my first programming experience
23260;x
23261;I'm surprise I actually did it
23262;lol
23263;I'm making an mmo rn and I can't see myself finishing üòõ
23264;I stole some open src stuff and I'm still reading into it to see how it works
23265;incase u wanna see it https://github.com/sandbloxofficial/server
23266;I'm working on my first professionnal backend in go/gormimposter syndrome is real
23267;haha
23268;whatever u do don't do mvc
23269;golang ppl stay away from that fsr
23270;MHHHHHHHHHHH
23271;tbh I kinda like it
23272;helps e avoid cynclic dependency
23273;tru xf
23274;But yeah from what I heard it's not really idiomatic
23275;eh I mean its different
23276;but networking is different and that's the use I usually see
23277;I love it for networking but I wouldn't make any client stuff with it
23278;it's very much unidiomatic yeah
23279;and I'm not sure about avoiding cyclical deps either tbh
23280;though you rarely get one after knowing how to structure projects properly
23281;plus let's all admin go oop is weird af
23282;I like Go's OOP
23283;It's my first internship and I'm working alonr
23284;in that it's not very much OOP
23285;I love it cuz its weird but its still weird
23286;It's hidden work basically
23287;how is CE different from CS? I thought it's mostly naming?
23288;CE is lower level
23289;whats CE
23290;Computer Engineering
23291;oh right
23292;CS is probably more theory oriented
23293;I think it is actually
23294;from reading my uni's curriculum CS tends to gear more towards doing the boring stuff with software
23295;like making mobile app web app programming those kinds of boring stuff
23296;and CE is a lot more hardware
23297;hell there's a GPS class
23298;how to check if i have gopls installed
23299;whoa
23300;@czechuuu run it in the terminal
23301;`go pls`
23302;if it doesn't return then it's installed
23303;None
23304;There should be a server scaling class cuz that shit can get super complex I've just come to find out
23305;ok its not installed
23306;eww teaching practical things
23307;haha
23308;tru
23309;just learn it yourself at this point
23310;`which gopls`
23311;speaking of learning things yourself
23312;haha
23313;remember when web devs were all graduates
23314;mostly
23315;Now almost none are
23316;I learnt scaling by writing my own load balancer :)
23317;its crazy
23318;oo lucky
23319;Tonnes of effort  fairly little reward
23320;"```gofunc NewPolygon(auth string) Polygon { return &Polygon{ Client: &http.Client{}, AuthKey: auth, APIURL: https://api.polygon.io"", }}```"
23321;I'm gonna need to learn it soon oof
23322;what does unresolved reference mean
23323;how do i install gopls
23324;it means youre referencing something not in scope
23325;@czechuuu please google it next time: https://github.com/golang/tools/blob/master/gopls/doc/user.md
23326;im googling it
23327;but its not working
23328;None
23329;None
23330;i am following this doc
23331;and whats the issue
23332;it tells to use `go get golang.org/x/tools/gopls@latest` unless it returns `go: cannot use path@version syntax in GOPATH mode` then you should use `GO111MODULE=on go get golang.org/x/tools/gopls@latest`
23333;did you add $GOPATH/bin (aka $GOBIN) into $PATH
23334;i did not
23335;should i
23336;you should
23337;you must
23338;lol
23339;next time pls ask a more informative question
23340;wait maybe i did i dont remember
23341;how to install doesnt tell us what youve already done
23342;ok
23343;So is $GOPATH/bin in your PATH
23344;its
23345;omg my best frend is buying me a golang mug
23346;";;"
23347;red bubble boi
23348;None
23349;Dunno if that works as is with windows
23350;i have an ubuntu on WSL
23351;i can set it up there
23352;but dont know if text editors running on windows will be able to access it
23353;i think it should be `%GOPATH%\\bin` on windows
23354;since thats how you use enviroment variables on windows
23355;Vscode has a remote wsl package
23356;So you can put the ide in the context of one of your wsl distros
23357;im using atom
23358;Ah your screen shot had vscode in it
23359;i installed it once
23360;but since ive already set up everything on atom i dont care to change to vscode
23361;although i think it might be beneficial
23362;oh i did something its installing
23363;join us the vscode clan
23364;tutorial said `GO111MODULE=on go get golang.org/x/tools/gopls@latest` but i think it should be `set GO111module=on` then the go get
23365;or export on unix
23366;it installed but i still cannot run gopls
23367;quick question: ```http.HandleFunc``` is already concurrent right?
23368;might wanna check on Atom then
23369;make sure it's running the LSP
23370;oh wait
23371;just restart the terminal?
23372;no ieda how env vars work on Windows lul
23373;@Dane Zaddy yeah
23374;each handler is ran in a goroutine
23375;this is clarified in the docs
23376;ok ty
23377;restarted terminal still nothing
23378;might just set it up on WSL and switch to vscode already
23379;hello guys good afternoon. Is someone geting a bug like vscode can't find a import when using go modules and vscode workspaces?
23380;this happens with third party imports
23381;ok i know where it saved it but %GOPATH%\\bin isnt in path
23382;maybe GOPATH is empty?
23383;@jcbritobr anymore info?
23384;but it saved it in %GOPATH%\\bin
23385;:Thonk:
23386;windows wack
23387;huh i know hy
23388;why
23389;> @jcbritobr anymore info?@Str≈ìm go 1.15 x64 for win x64 10 and vscode 1.48
23390;@jcbritobr does running goimports work
23391;bcs set GOPATH=D:\\whatever sets gopath only for a curruent session od terminal
23392;> @jcbritobr does running goimports work@_diamondburned_ lets see if its installed
23393;if i go into settings GOPATH is different
23394;"Hello again. I\'m trying to switch from go flags to Cobra.I have a project that works with modules which are called with CLI commands (ie. `myapp foo` calls the `foo` module).In my app modules can be builtin or user defined: I defined some builtin modules with Cobra commands and it works well.Now I want to handle user defined modules so `myapp bar` will look for a `bar` file in some folder since the `bar` command is not defined.How to do this without having a `unknown command bar""` error with Cobra?"
23395;@jcbritobr does it compile and run
23396;yep
23397;Checked gopls output logs?
23398;> @jcbritobr does running goimports work@_diamondburned_ go import isn't installd but im using gopls
23399;i was bored so I made an error checking package in my project :))
23400;:robpike:
23401;ok i got gopls to work
23402;pog
23403;zane pls tell me its a meme
23404;xd
23405;> if i go into settings GOPATH is different@czechuuu I was thinking with using gopls gopath would'n necessary
23406;idk its wack
23407;None
23408;ok looks like gopls is working in atom
23409;ty all
23410;"i have a question what does ```goimport ( _ fmt"")```do"
23411;i know it suppreses the error for not using the package
23412;ree
23413;yee
23414;but what does it actually
23415;do
23416;it just makes it so you cant do fmt methods
23417;that's all
23418;üòõ
23419;wdym you cant do fmt methods?
23420;The important part is the sideeffects of the import (e.g. the `init` function) still happen
23421;yesh
23422;I was just abt to ask what the prupose was
23423;xd
23424;anyone? ‚è´ ü§î üôÇ
23425;I think db drivers do that
23426;frequently
23427;You'll often see those with DB driver imports which allows the setup to happen even though you don't actually need to use any exported things
23428;Yeah
23429;oo I found a vid to help me learn scaling with k8s
23430;https://www.youtube.com/watch?v=pkZrgHxJ130
23431;";; woot woot"
23432;> wdym you cant do fmt methods?@czechuuu yep only third party packages downloaded with go get that is failing to import
23433;how do go packages work?
23434;well a have a module project
23435;the use go get to install packages
23436;are they installed to a project or globally?
23437;to $GOPATH i assume
23438;this packagens cant be found by vscodego when using workspace
23439;> to $GOPATH i assume@czechuuu no i use modules and gopls
23440;gopath isn't setuped
23441;i dont understand
23442;just a moment
23443;why the hell is goland so expensive
23444;None
23445;@czechuuu no one package that isnt golang stdlib can be imported. This example im working in the same package
23446;this only happens when using workspaces
23447;when i open the project directory directly all works well
23448;None
23449;I think gopls is not prepared for workspaces yet
23450;Could be
23451;no idea what workspace is
23452;You can have multiple disparate folders open
23453;:Thonk:
23454;not sure how that has to do with workspaces
23455;and how goimports isn't working
23456;You dont get workspace support for free in lsp
23457;oh is this the github workspace thing
23458;yo this gopls and atom ide is not working
23459;it says there are errors but the code compiles
23460;> why the hell is goland so expensive@Dane Zaddy beta versions are free
23461;"```gotype Error struct { Error string `json:""error""`}``` best naming yes?"
23462;yo this vscode thing is epic
23463;it even installs things for me
23464;i have a similar struct@Akandesh
23465;i called it JSONError
23466;thats a good suggestion thanks
23467;https://i.kawaii.sh/_uX_qNh.png
23468;i have begun
23469;my journey into lua embedding
23470;what are some ~~essential~~ helpful vscode extensions?
23471;for go just the go extension is enough imo
23472;also prettier for json and shit
23473;code runner is cool
23474;enables you to do `Ctrl+Maj+N` on any recognized language and it will run the selected file
23475;Gitlens
23476;Project manager
23477;how would i ask for user input and then check it against a switch case?
23478;"```govar input stringfmt.Scanln(&input)switch input {case hello"": fmt.Println(""hello indead"")case bye"": fmt.Println(""why so early"") }```"
23479;does not work
23480;check your assumptions
23481;"you\'re assuming that `input` will be `""hello""` or `""bye""`"
23482;clearly that is incorrect
23483;i know i kno
23484;maybe you should try printing stuff out to see what you're actually getting from Scanln
23485;it does work im just stupid
23486;aight
23487;hey @Riku keep me updated xd
23488;Cuz I'm making a go mmo and want to be able to lua script server stuff
23489;just a tip
23490;golua looks compelling
23491;its not maintained
23492;use gopherlua
23493;:BCS_PepeLaugh:
23494;gopherlua is good
23495;kk lols
23496;The biggest issue you'll have is thread safety
23497;If you do some kind of eventloop system you'll be fine
23498;oh all the handling is mostly on Go
23499;yeah
23500;when a specific event happens it is supposed to run a script
23501;:BCS_PepeLaugh:
23502;Yup running a full script is one way to do it
23503;I was doing it with modules like require('commands') then .On which caused it to use the script again
23504;so not thread safe at all
23505;The new version I have uses Otto (JS) and now an event loop which resolves some of that
23506;oh making sure the program doesnt loop is on user its a framework but that doesnt mean the framework babies you the whole way
23507;just makes it easier
23508;:stare:
23509;yep
23510;haha
23511;good solution for it though
23512;run this script on event
23513;ive heard of otto?
23514;is it nice?
23515;It's Javascript pretty much
23516;how do you pass funcs to it?
23517;I build in babel and core.js for ES6 support
23518;can you mimic package exporting in go
23519;so like have a bunch of go functions and predefine an import
23520;so it mimics module.exports
23521;:5_bugcatstare:
23522;https://paste.ee/p/NAEKz
23523;@Riku make a function start with a capital letter...
23524;No im talking about binding
23525;:BCS_PepeLaugh:
23526;wa
23527;look at the context of this discussion
23528;So yeah the Loader side does it pretty well
23529;im embedding a language in go
23530;i know how go works mostly :BCS_PepeLaugh: been using for a few months
23531;Loader is pretty much exports
23532;understood
23533;Then this package handles require etc
23534;https://github.com/dop251/goja_nodejs
23535;and the eventloop
23536;feel like making a JS runtime in Go would be a bit :meh:
23537;too many people do it idk
23538;:stare:
23539;I prefer lua
23540;depends on how difficult it will be
23541;the issue is i dont actually understand promises in JS :BCS_PepeLaugh:
23542;but I did JS because a few of my friends were more familiar with it
23543;the thing about Lua is that its fully sync
23544;A promise is pretty much passing a func
23545;there are less ways you can fuck shit up
23546;I love the ninja edit from no to less
23547;because in JS i can just make my library a bunch of exports and objects but in lua its like
23548;every function is in a big table
23549;yup
23550;and that big table has more tables
23551;but it might be more organized in JS idk
23552;yeah odn't pull JS into Go
23553;lua.SetGlobal
23554;:BCS_PepeLaugh:
23555;just don't
23556;@_diamondburned_ too late
23557;yeah ill stick with lua as much as i can rn
23558;lua is less abstraction right now though
23559;i need to do like
23560;l.Pop(1)
23561;:BCS_PepeLaugh: imagine having to pop shit off the stack in Go executed functions
23562;im bout to make a wrapper for this shit
23563;lol
23564;otto seems easier actually
23565;it is an entire remade runtime in Go right? No bloated nodejs side by side runtime making IPC call?
23566;@cats
23567;yup
23568;alright nice
23569;err
23570;not otto goja
23571;I use goja now lol
23572;I used to use otto but goja was a bit nicer
23573;difference?
23574;ah got it
23575;wait let me see
23576;I honestly can't remember what I use LOL
23577;:BCS_PepeLaugh: was gonna implement scripting in my main huge bot but i would have to remove a bunch of shit to prevent leak
23578;yeah it's goja
23579;also in my main bot im setting max exec time so it doesnt go over and just kills the command if it runs too long or uses too much memory
23580;this is runtime tho so idm
23581;> no idea what workspace is@_diamondburned_ with workspaces you can manage your projects all in same folder
23582;Can someone dumb down channels for me xd
23583;I feel so dumb looking at docs
23584;A queue of messages
23585;First in first out
23586;oh haha
23587;ok ty lol
23588;Instead of a message being text its whatever type you specify when creating the channel
23589;i get it ty lol
23590;I was confused just cuz I printed a channel from a tutorial and it kept changing lol
23591;It's cuz its like a line of messages that go thru when printed
23592;or inserted
23593;ok so weird question
23594;"```gopackage mainimport ( log"" net/http"" github.com/gorilla/websocket"")var clients = make(map[websocket.Conn]bool)var broadcast = make(chan Message)var upgrader = websocket.Upgrader{ CheckOrigin: func(r http.Request) bool { return true },}// Messagetype Message struct { Email string `json:""email""` Username string `json:""username""` Message string `json:""message""`}func main() { fs := http.FileServer(http.Dir(""../public"")) http.Handle(""/ fs) http.HandleFunc(""/ws func(w http.ResponseWriter r http.Request) {  ws err := upgrader.Upgrade(w r nil) if err != nil { log.Fatal(err) } defer ws.Close() // Register our new client clients[ws] = true for { var msg Message err := ws.ReadJSON(&msg) if err != nil { log.Printf(""error: %v err) delete(clients ws) break } broadcast < msg } }) go func() { for { msg := <broadcast for client := range clients { err := client.WriteJSON(msg) if err != nil { log.Printf(""error: %v err) client.Close() delete(clients client) } } } }() log.Println(""http server started on :8000"") err := http.ListenAndServe("":8000 nil) if err != nil { log.Fatal(""ListenAndServe: err) }}```"
23595;With this can I prevent too many ppl sending at once by adding a buffer to the broadcast channel
23596;you'd probably want an actual rate limiter
23597;per client or per channel or global or some combination thereof
23598;Oh okie
23599;Prolly do that with the upgrader right?
23600;depends on where you want to ratelimit things
23601;Ow
23602;Hmm
23603;Ok I gtg I'll come back to this haha
23604;@cats using ottohow do i modify a struct value in a go func
23605;"```Gofunc (l lol) Change(call otto.FunctionCall) otto.Value { l.Name = lmao this was changed"" return otto.Value{}}```"
23606;this doesnt do shit
23607;lol struct is passed through as object
23608;name is recognized
23609;but changing it doesnt change value
23610;you return an empty `otto.Value{}` and not `l`
23611;no thats standard
23612;im changing a struct field
23613;:5_bugcatstare:
23614;is it ?
23615;yeah thats embedded in JS
23616;its embedded js vm in go
23617;mb
23618;Nothing is changing though
23619;Since it's not a pointer
23620;change func and name field do actually exist
23621;oh wait
23622;:Facepalm:
23623;im dumb
23624;holy shit
23625;that\'s standard lmao
23626;well you are supposed to return otto.value
23627;actually dont think you need to return anything but i was testing
23628;why do you return anything
23629;because im gonna return a value later
23630;thats just there for testing
23631;kay
23632;good luck
23633;I'd suggest goja
23634;doesnt work still :BCS_PepeLaugh:
23635;even with pointer
23636;doesnt actually set the value of the struct
23637;@cats wait once you set something does it not have permission to change values in the object
23638;it does
23639;does it get converted and is the instance still a representation
23640;how do i change object values in a go function
23641;i assume its just changing struct fields no?
23642;yes...
23643;object values in JS side or on Go side
23644;changing object values on Go side
23645;"```JS console.log(objt.Name); objt.Change(); console.log(objt.Name);```"
23646;change is a go method of a struct i passed in
23647;follows regular otto.FunctionCall shit
23648;not sure
23649;can you do it in goja?
23650;oh lol
23651;using the vm object to reset the value apparently works but uh
23652;:stare: that might be a bit jank
23653;"```GOfunc main() { vm := otto.New() lx := Objtest{ vm: vm, Name: fsx"", } vm.Set(""objt lx) vm.Run(` console.log(objt.Name); objt.Change(); console.log(objt.Name); `)}type Objtest struct { vm otto.Otto Name string}func (l Objtest) Change(call otto.FunctionCall) otto.Value { sf := lol this was changed"" l.Name = sf l.vm.Set(""objt l) return otto.Value{}}```"
23654;code rn
23655;i could just make a push function
23656;to push current data to the vm stack
23657;:BCS_PepeLaugh:
23658;oh lol ill just make that a method
23659;oh i realized why it dont do it like that
23660;if you could change a value in JS and reflect it to go it might fuck shit up
23661;@cats is there a way to module.exports from a go struct or do i just make an object and send it because thats all it is
23662;:stare:
23663;How can I fill a form in golang
23664;not json
23665;just a normal form
23666;What is a ‚Äúnormal form‚Äù? `application/xwwwformurlencoded`? `multipart/formdata`?
23667;https://golang.org/pkg/net/url/#Values
23668;prob this
23669;call `.Encode()` after adding your fields and set the result as the request body
23670;@Carson
23671;None
23672;something like this
23673;how do I fill it
23674;scroll up
23675;look at the contenttype
23676;that answers his question
23677;application/xwwwformurlencoded
23678;@Carson
23679;pretty sure you want what I posted
23680;iirc for this one you concat .Encode() into the URL
23681;"something like `fmt.Sprintf(""%s?%s url values.Encode())`"
23682;or `(url.URL).RawValues = values.Encode()`
23683;yeah im asking how do I assemble the parts of the form
23684;If you‚Äôd like it as part of the query string sure
23685;like
23686;how do I specify
23687;what i want password to be
23688;url.Values
23689;bruh
23690;etc ettc
23691;the link
23692;literally what he posted lmao
23693;read the doc
23694;the `Add` method
23695;so i do
23696;v.Add('password qwerty')
23697;v.Add('email','somethinghere')
23698;and then
23699;v.Encode()
23700;yup
23701;`v.Encode()` will return a string
23702;or you can initialize it with that value
23703;and then how do I post it
23704;"```govalues := url.Values{ password"": {""qwerty""},}```"
23705;oo
23706;bro
23707;like you would post in general
23708;just use that string as the body
23709;instead of json
23710;kk
23711;probably gotta wrap it in a Reader though
23712;like `strings.NewReader(v.Encode())`
23713;ah
23714;kk
23715;anyone know of a website where I can just practice filing a form
23716;?
23717;bruh
23718;how can I keep all my requests in one session with go?
23719;You need to be a bit more descriptive haha
23720;like
23721;TLS session? Carrying over cookies between requests?
23722;keep the same cookies
23723;yep
23724;carrying over cookies
23725;thats what im talking bout
23726;https://golang.org/pkg/net/http/#Client.Jar
23727;Im new to go
23728;but the thing that has delighted me the most is how far you can get with just the standard library
23729;I'm building a small service at the moment and with any other language id have to install minimum a couple other packages to get everything going smoothly
23730;as the deno dev put it
23731;When in doubt copy Go\'s standard library
23732;> `body.go:8:11: struct of size 152 bytes could be of size 144 bytes (maligned)`how do I go about actually fixing this
23733;that's literally all the warning gives
23734;paste struct
23735;yeah needs more context
23736;i\'ve got a cgo project compiling fine on linux but fails on the same step either compiling on windows or crosscompiling to windows from linux... `CC=i686w64mingw32gcc````/home/xxx/.gvm/gos/go1.15/pkg/tool/linux_amd64/buildid w $WORK/b142/_pkg_.a # internalcp $WORK/b142/_pkg_.a /home/xxx/.cache/gobuild/3a/3a7ef696bd999b0936a484d81e4c9f27d3691d9a119ff4d1150d3b7cfbc27481d # internalError: running go build buildmode=cshared x trimpath p 1 o test/project/libs/libgodotgotestamd64.dll test/main.go failed with exit code 2exit status 2```i can see that `3a7ef696bd999b0936a484d81e4c9f27d3691d9a119ff4d1150d3b7cfbc27481d` was created successfully so i\'m guessing something executed subsequently is causing the exit code 2any pointers on debugging this further?
23737;@_diamondburned_ @deezy I got it
23738;ah running the command twice gets me a better error message ignore my message above
23739;https://github.com/Riku32/Picnic
23740;this is done
23741;:BCS_PepeLaugh:
23742;does JS to Go calls
23743;when do i get my own discord library channel
23744;eww not lua
23745;eww js
23746;yeah i decided to use JS cuz it was easy no event loop its just a godown solution
23747;syncronous jslike language more like
23748;you should have an event loop
23749;:stare: lua would have been hell to implement
23750;setTimeout doesnt work in this
23751;yet
23752;```JSlogger.info(message.userid)discord.sendMessage(message.channelid message.content)message.args.forEach(function (val i) { discord.sendMessage(message.channelid val)})```
23753;this is a valid command source
23754;:BCS_PepeLaugh:
23755;yeah but what can you do beyond dumb message sending
23756;nothing i made this in a day. Later ill add a embed object/constructor
23757;:5_bugcatstare:
23758;and make more shit
23759;this was just getting it all to work together
23760;this is the base
23761;add calling Go stdlib
23762;üëÄ
23763;calling go stdlib?
23764;oh lol
23765;yeah i can do that if i was using otto
23766;it supports that
23767;so now i'm getting this error:```go build github.com/godotgo/godotgo/pkg/gdnative: C:\\hostedtoolcache\\windows\\go\\1.15.0\\x64\\pkg\\tool\\windows_amd64\\cgo.exe: fork/exec C:\\hostedtoolcache\\windows\\go\\1.15.0\\x64\\pkg\\tool\\windows_amd64\\cgo.exe: The filename or extension is too long.```could having 600+ go files to compile be the cause for this?
23768;sounds like a Windows thing
23769;@surgical what are you trying to do?
23770;Why dont you go get Godotgo and then cd into the directory and go build?
23771;Or use git
23772;so some shit like this
23773;"```GO t := reflect.TypeOf(&value) fmt.Println(t) for i := 0; i < t.NumMethod(); i++ { m := t.Method(i) fmt.Println(m.Name) }```"
23774;works good if value is a defined struct
23775;what if this is not a defined struct and an empty interface
23776;how would i get all methods of that interface with this
23777;:5_bugcatstare:
23778;untyped no types here defined before
23779;reflect pita
23780;you can do the same with interfaces iirc
23781;wym
23782;value currently is an empty interface
23783;.Elem ig? not sure
23784;i need an untyped struct thats not casted really from a valid type i defined before
23785;or actually i just need to get all the method names and methods :stare:
23786;if a struct is being passed as `interface{}`
23787;@other this is just the command issued when running this:```go build buildmode=cshared x trimpath p 1 o test\\project\\libs\\libgodotgotestamd64.dll test\\main.go```i should have added more output:```go build github.com/godotgo/godotgo/pkg/gdnative: C:\\hostedtoolcache\\windows\\go\\1.15.0\\x64\\pkg\\tool\\windows_amd64\\cgo.exe: fork/exec C:\\hostedtoolcache\\windows\\go\\1.15.0\\x64\\pkg\\tool\\windows_amd64\\cgo.exe: The filename or extension is too long.Error: running go build buildmode=cshared x trimpath p 1 o test\\project\\libs\\libgodotgotestamd64.dll test\\main.go failed with exit code 1exit status 1```
23788;oh lol it works if i pass the value instead of a ref
23789;also how do i make an anonymous struct @_diamondburned_ :KM_Dorime:
23790;and set values of it on the way
23791;you can't
23792;you really can't dynamically create a struct
23793;that is also a horrible idea
23794;how does `fmt.Scanln` work?
23795;it seems to only scan the first word
23796;"```govar temp stringfmt.Println(""give input"")fmt.Scanln(&temp)fmt.Println(temp)``````give inputone two threeone```"
23797;oh so reading the docs it seems that it saves space separated values into next variables
23798;but since i only gave it one variable the others were discarded
23799;how can i save the entire thing into one variable
23800;I don't know if there is a shorter way but you cant save the string into multiple variables then you can append it to a single variable
23801;but it sounds terrific
23802;Also do you have to use Scanln ?
23803;no i just want to get user input
23804;oh
23805;so what can i use instead>
23806;use bufio.reader instead
23807;https://tutorialedge.net/golang/readingconsoleinputgolang/
23808;here is an example
23809;oh thank you
23810;I am making an app that has a config file and stores some data which directory in linux should I use would `usr/lib/myapp/` directory be a good choice?
23811;I have a question that do golang compile the imports together with the code u written?
23812;Yeah it's all compiled into a single executable
23813;"Hi Im trying to create a verify email link with the route `/verifyemail/md5ofemail` however the comparison between the md5 mysql is spitting out and the md5 I\'m creating is completely different:```// Email md5md5 := md5.Sum([]byte(string(u.ID) + u.Email))md5Hash := string(hex.EncodeToString(md5[:]))// Comes out: c24b69653c379d074f803602f40a570b// SQL MD5if err := s.db.Get(&u SELECT first_name last_name token updated_at created_at MD5(\'email\') as email FROM users LIMIT 1""); err != nil {}// Comes out: 0c83f57c786a0b4a39efab23731c7ebc```Any ideas?"
23814;Ah wait
23815;Answerred my own question
23816;Should I be using md5 write or sum?
23817;it think its sum for write it will just print the value a + b
23818;```a := 1b:= 1print(a + b)Execute : 11```
23819;Can someone tell me how do you guys test DB queries? Because mocking using gosqlmock only mocks the return value of the query. I cannot set something like a mock db and set the actual rows and columns in it and let the query run on it.
23820;Ah ok cheers @BryanC12
23821;Still not matching up :(`SELECT id first_name last_name token updated_at created_at MD5(CONCAT(id email)) as email FROM users LIMIT 1`And when I send the email:```md5 := md5.Sum([]byte(string(rune(u.ID)) + u.Email)) md5Hash := string(hex.EncodeToString(md5[:]))```
23822;Must be something wrong with the md5 hashing there
23823;Anyone have ideas?
23824;Are package name just for the computer to group the functions from different files(.go)?```package main```
23825;That is fine
23826;i am so boreeeeeeeeeeeeeeeeeeeeeeeeeeeeeeedddddddddddddddddddddddd
23827;https://i.imgur.com/0cr1SeV.png
23828;what does this mean ?
23829;@Deleted User run `go mod vendor`
23830;ok did that
23831;but now another issue
23832;https://i.imgur.com/i6jCcL9.png
23833;You shouldn't have to run go install for dependencies anyways
23834;websocket also doesn't have a main package in the root
23835;so it can't build
23836;Go install is for installing a runnable binary to $GOBIN
23837;?go mod
23838;Using go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
23839;go get is for fetching dependencies
23840;hmmm ok
23841;yea i was just following instructions
23842;must be outdated or something
23843;Eh? Link?
23844;```# Install sha3 required for websocket to installRUN go get golang.org/x/crypto/sha3# Download required packages that use tlsRUN go get d github.com/gorilla/websocket# Install websocket nowRUN go install github.com/gorilla/websocket# Install the rest of the packages to build engineRUN go get golang.org/x/crypto/curve25519RUN go get golang.org/x/crypto/chacha20poly1305RUN go get golang.org/x/crypto/chacha20RUN go get golang.org/x/crypto/poly1305RUN go get golang.org/x/crypto/hkdfRUN go get golang.org/x/crypto/cryptobyteRUN go get github.com/PuerkitoBio/goqueryRUN go get github.com/google/uuidRUN go get github.com/felipelinares/gobfuscate```
23845;Dunno where you got this from seems like a mistake
23846;Whatever module you are trying to build should automatically fetch the dependencies
23847;hey I have a little question about sql package after some time without activity the next request give me  sql driver bad connection  error and rework on the next request. I guess that would be because I forget to close this conn node but I have checked and after the end of my request I execute Close method on the conn someone is already fall on this ?
23848;is it mysql
23849;https://github.com/grafana/grafana/issues/17777#issuecomment515032509
23850;@doplex what Go version are you on?
23851;i believe this should be fixed in 1.15
23852;to build and get the depedencies at the same time you need to pass the i flag to go build (I think so)
23853;`go build i`
23854;Nah. Just go build should suffice when using modules
23855;oh mb then
23856;"Can anyone help me as to why Im getting a nil pointer reference? `api/http/controllers/auth.go:41 (0x1663669)````// Verify emailfunc (c AuthController) VerifyEmail(g gin.Context) { c.controller.Test() return}func (c Controller) Test() { fmt.Print(""got here"")}```"
23857;which line is line 41
23858;Have to show use more code
23859;We have .1% context now
23860;Apologies
23861;41 is here `c.controller.Test()`
23862;So controller is probably nil
23863;I create a new BaseController here````// Constructfunc New(m models.Store server server.Server) (BaseController error) { var c BaseController = &Controller{ Auth: newAuth(m.Auth server), } return c nil}```
23864;You never set `controller` of the `AuthController`
23865;Sorry @Sgt_Tailor not sure what you mean?
23866;error says controller is nil
23867;what does newAuth do?
23868;```type AuthController struct { controller BaseController model domain.AuthRepository server server.Server}``` ```// Constructfunc newAuth(m domain.AuthRepository s server.Server) AuthController { a := &AuthController{ model: m, server: s, } a.Routes() return a}```Here is where I create the auth
23869;See how `controlller` is not set there?
23870;model and server are but controller isn't
23871;So I have to pass the base controller into the cosntruct of new auth?
23872;Its strange because on another controller this works fine
23873;Just this one is not playing ball
23874;THANK YOU @Sgt_Tailor Working
23875;The other controller does something different then
23876;How would you generate a web frontend to add entries to this data structure?https://gist.github.com/awmv/e861f8441cee1a0041d69e883058cd21
23877;sounds like a javascript question
23878;I guess I need a web form that appends data to the json file? With some validation at some point
23879;I was just wondering if you knew some magic lib that does it for me üòÑ
23880;whats the best json package ?
23881;encoding/json
23882;hmmmm without specifying structures
23883;you dont have to specify anything with encoding/json
23884;you should
23885;because its a good thing to do
23886;but `map[string]interface{}` works
23887;hmmm ok thank you sir
23888;you're not going to around typing stuff in go
23889;just make a structure that represents your data
23890;it will be easier to work with anyways
23891;What lib do you recommend to generate a web form based on a struct? I want to append the data from the web form to an element of the json file
23892;uhh usually just some html if its a sever side rendered thing
23893;you know what the structure is
23894;just make it into a form
23895;and then post that form to your rest server
23896;that does something with it
23897;i dont remember if i ever asked this before but if i create a language in go will the speed of the language be slower than if i created in c++ or does that not matter since it's compiled and not interpreted?
23898;slower to do what is the real question
23899;So you recommend Rest for it?
23900;yes
23901;This is the structure btw
23902;https://gist.github.com/524bd5caaaea69c39b5eca9200bf35d8
23903;i mean if i created an interpreter in go would it be slower than if i created it in like c++ or does none of that matter since go is compiled
23904;in general terms I guess you could say go is slower than c++ and go is safer than c++ but in real world that depends alot
23905;yeah
23906;you would probably see more of a speed difference just bacause your knowledge of the two languages are different
23907;and you may do something efficently in Go but not in c++
23908;Not sure if it's worth to put in the time to create a Rest Server and a front end to make the process of editing a json file easier
23909;Seems like a lot of work
23910;yes probably
23911;it is
23912;editing json is way harder than you'd think
23913;humans shouldn't do it
23914;ever
23915;really depends on how often you have to edit things
23916;not directly
23917;one misplaced quotation mark one forgotten backslash
23918;and your whole shit explodes
23919;JSON should only be emitted and modified by machines who can handle all the encoding rules
23920;in theory
23921;there's really simple cases where yu can get away with it but it's a ticking time bomb
23922;Yes. I guess you guys have a point. I'm just not that familiar with go and it will take me more time
23923;but once you get used to how to setup a server and stuff its super easy to do
23924;right NOW it's just an array of strings to do whatever
23925;What do you think of this
23926;https://github.com/joncalhoun/form
23927;uhh sure looks fine
23928;you probably should just learn to make a rest server and a simple form
23929;try it and see how it feels
23930;but yeah
23931;its a very useful and valuable skill
23932;odds are if you don't actually understand how forms work to begin with
23933;you're going to eventually need to troubleshoot the forms this thing is producing
23934;The input is going to be dynamic. That's why I was looking at a lib in the first place. It will be a lot of work to create a frontend for that.
23935;I can't foresee how many children an element is going to have
23936;if the input is dynamicwhat is your go struct going to be
23937;i mean there's also templates
23938;which have conditionals functions includes etc
23939;I just wanted to finish this in 2 hours üò¢
23940;oof
23941;:kek:
23942;welcome to software development
23943;yeah that's an absurdly optimistic estimate
23944;for an expert
23945;True
23946;even knowing exactly what tools you're gonna use knowing how to use them well
23947;which isn't to say you shouldn't aim high
23948;getting over the i dont know how to use X so im going to find a lib that does X for me mental block is also a good thing
23949;but you gotta remember 90% of programming is reading
23950;i was stuck in that mental block for like 2 years
23951;4% is writing code and 6% is swearing at code
23952;That's is so accurate
23953;i've been doin this for 20 years
23954;i know some things
23955;at some point your brain goes i dont know X tech but i know where to find the docs and piece things together
23956;I always thought I'm just stupid. Because I have to read that much and I can't compete with these youtube coders who know everything
23957;you havent seen the thousands of hours those guys have put in
23958;is the thing
23959;right
23960;especially the tutorials
23961;because they probably did that tutorial 7 times
23962;thousands of hours of reading ( and even more writing ) went into that competence
23963;do you actually get mad at things ?
23964;oh yes
23965;i make myself furious every day
23966;üëÄ
23967;i do dumb shit all the time
23968;5% swearing at other ppl's code (including your past self)?
23969;@Dylan https://www.youtube.com/watch?v=liWdn92SAvs
23970;this is a good video on the topic
23971;once in a while I go who the fuck did this here oh it was me
23972;">""what kind of stupid idiot would write this class like this"">checks git blame>:monkaS:"
23973;yep
23974;all the time
23975;"@Dylan just to give a bit of of real life thing:I decided i wanted a JWT auth system for my app im working on.I search jwt golang""find a decent liblook at docs for the libspend 2 hours reading tutorials on jwts and jwts in golangspend 2 hours implementing a basic authspend 2 hours writing tests for the authnothing works spend 4 more hours reading and rewritingredo testseverythingworks.pngspend another hour cleaning up the tests and making more casesspend another hour when i realise oh im dumb and can move this to its own function""spend an hour hooking it all up to the existing stuff to do authspend an hour ~~crying~~ debugging because something isnt workingand ive spent another 2 hours or so reading on how to do the system better"
23976;timescales may be a bit exagerated one way or the other
23977;half the reason I'm rewriting major parts of my game engine
23978;but the idea is there
23979;I just looked at it
23980;and cringed
23981;and that was supposed to be just a side thing i worked on for a bit
23982;didnt even get the actual thing i wanted to do today started
23983;> I always thought I'm just stupid. Because I have to read that much and I can't compete with these youtube coders who know everything@Dylan You don't see the amount of work that goes into the video also I've watched a number of tutorials on material I'm very familiar with and it's suprising how inaccurate and wrong some of the detials are
23984;also stop bothering with youtube imo
23985;its really only good for super high level overviews
23986;read the docs
23987;learn how to put the lego bricks together
23988;What\'s that super cliche quote Stop comparing your behind the scenes to other peoples highlight reels
23989;My inner 40 year old facebook mum coming out there
23990;tfw your highlight reel is sitting in a hot room sweating all day because your house has no ac and its 100 degrees :feelsbadman:
23991;my highlight reel today is finding literally everything else to do but the 3 work items I actually need to do
23992;I'm currently looking at how to ssh into WSL2 so I can see if I can hook it up to Ansible which I've just installed on a local server
23993;@Madxmike me every day working from home
23994;my home office is in the worst spot too for heat
23995;#offtopic though
23996;@Str≈ìm Ty I go try to pass in 1.15 see what happen
23997;```github.com/gen2brain/raylibgo/raylib.Rectangle composite literal uses unkeyed fields``` why do i get this error?
23998;where is the error from
23999;from my project
24000;yes
24001;where is the error from
24002;in your project
24003;```go// DrawPlayer  Draw the player along with other objects that belong to itfunc DrawPlayer() { rl.DrawRectangle(player.x player.y 32 64 rl.Color{100 100 100 100}) rl.DrawRectangleLinesEx(rl.Rectangle{float32(player.x) float32(player.y) 32 64} 4 rl.White)}```
24004;composite literal uses unkeyed fields
24005;???
24006;use keys
24007;?????????????
24008;Rectangle{KEY: VALUE}
24009;instead of just Value
24010;when you do thing{} its a composite literal
24011;oh
24012;why do i have to do that?
24013;the key is the member name
24014;It is an error from `go vet`
24015;Won't give a compiler error
24016;why sometimes i do and sometimes i dont?
24017;yeah
24018;i like keying all my stuff
24019;so when you need to change things its a lot easier to do
24020;Depends on the complexity of the struct. When there is only one exported field I don't key it for example
24021;why do some structs need a key and some dont
24022;But most other stuff I will
24023;They don't _need_ one
24024;is it just made that way?
24025;It's more like a warning
24026;how can i make a struct require keys
24027;you can't
24028;When not using a key you _must_ provide the values in order and you can't skip fields
24029;Keys are just used to describe the value to put after
24030;When using keys you can do whatever and it will work
24031;well why did it throw me an error if i filled in every thing?
24032;It isn't an error
24033;it is
24034;go vet returns a warning
24035;it didnt let me run
24036;unless i fixed it
24037;run `go build` from the command line
24038;is it just vscode not letting me run?
24039;no
24040;you have some other problem if your code is truly not running
24041;it's just displaying the warning as it should
24042;it can be helpful to drop out of your editor and just run your code directly in the terminal
24043;lots of tooling thinks it knows better than you do
24044;tbf a lot of the time it does
24045;```gotype data struct { first string second string}func main() (data error) _ err := someFunction() if err != nil { return nil err }}```
24046;how would i return nil instead of the data struct ?
24047;im `getting cannot use nil as type data in return argument`
24048;1) main doesnt return anything2) return a pointer to the data `data`
24049;or a zero value
24050;Or if you don't want to use pointers return the zero value
24051;or just return watever you got and the error
24052;data{}
24053;ok thanks
24054;how can i set the program in `.vscode > launch.json` to run my main.go?
24055;this is what my project looks like
24056;is it possible to differentiate what type of string you have? e.g. foo vs \\`foo\\`
24057;:thonk:
24058;almost definitely not
24059;why?
24060;they're all strings it's just a matter of telling the parser to ignore special characters or not
24061;No. Both of those are string literals
24062;https://golang.org/ref/spec#String_literals
24063;how can i set the program in `.vscode > launch.json` to run my main.go?
24064;Check the documentation
24065;Pretty sure you aren't the first one to try this
24066;me or beep?
24067;You
24068;don't use camel case for Go filenames
24069;nvm i got it
24070;vscode has gui for making json files
24071;i just scrolled down and clicked go: launch package and it edited the json for me to do my bidding üòé
24072;They refer to that in the documentation as well
24073;<https://github.com/golang/vscodego/blob/master/docs/debugging.md>
24074;ok
24075;<https://golang.org/pkg/regexp/syntax/#Flags>```gotype foo struct { flags regexp.Flags}```is this idea correct? it does not work
24076;need more details
24077;Need more context chief
24078;i just want to define flags as that type
24079;what does not work
24080;`undefined regexp.Flags`
24081;because flags isnt in regex
24082;its in regex/syntax
24083;syntax.Flags
24084;oh
24085;that'll do it
24086;> don't use camel case for Go filenames@Doad why
24087;"```build commandlinearguments: cannot load syntax: malformed module path syntax"": missing dot in first path element```what does this mean/causes this?"
24088;@Karitham that's not the standard for filenaming
24089;did you import the package correctly
24090;"```goimport ( fmt"" _""regexp"" syntax"")```"
24091;okay
24092;its in regex/syntax
24093;not regex
24094;and not syntax
24095;how do i define the type?
24096;`regexp/syntax.Flags` can't be correct
24097;"```goimport ( regex/syntax"")...type foo struct { flags syntax.Flags}```"
24098;so i always take the last part of the import?
24099;yes
24100;because that is the package
24101;can that potentially cause a collision/
24102;yes
24103;but iirc one of the tools if not the compiler yells at you a lot
24104;yeah the compiler would iirc
24105;you would have to give the import a name
24106;say you were importing 2 packages named syntax
24107;"```goimport ( foo/something"" bar/something"")type test something.Here```"
24108;"you would have to say ```goimport ( somename foo/something"" bar/something"")type test something.Here```"
24109;to specify
24110;that's when you would alias a package name
24111;interesting
24112;so `regexp.syntax.Flags` wouldn't be valid?
24113;no
24114;because the package is `syntax`
24115;which exists in the package `regexp`
24116;if you would to go look in the file Flags is defined
24117;it would say `package syntax` at the top
24118;"I need a little help translating c to go. how would I do this in go`sprintf_s(chunkSize sizeof(chunkSize) % PRIXz \\r\ Stream_Length(sPacket));`"
24119;fmt.Sprintf
24120;https://golang.org/pkg/fmt/#Sprintf
24121;i dont know the specifics of the other parts
24122;but if you look into the verbs at the top of the page
24123;you should be able to get it correct
24124;it's mainly the `PRIXz` I don't understand
24125;ok last question since i have to run errands...```gotype foo struct { flags syntax.Flags}...foo{ flags: syntax.FoldCase|syntax.OneLine}```is this going to work? `syntax.Flags` are `uint16`(i know this is kind of a TIAS question but i'd rather not waste time going down the wrong path)
24126;is it some macro
24127;idk i dont do c
24128;yeah you'd have to tell us what PRIXz means
24129;you've got the code in front of you
24130;¬Ø\\_(„ÉÑ)_/¬Ø
24131;@beepsandboops for something like that just throw it in playground
24132;and run it
24133;worst case you waste 2 minutes of your time
24134;"oh it\'s defined by `#define PRIXz IX""` thanks for the hint"
24135;but you learn something
24136;if the idea looks right to you i can play around with it in my editor
24137;wtf
24138;that's a
24139;if the path is incorrect i'd rather know
24140;weird macro
24141;if you have code run it
24142;don't ask people what they think will happen
24143;yeah i think seeing the output and recreating that in go would be a better way
24144;is that response to me? you do realise there is a massive difference between what do you think will happen and is this the right sort of idea or wasting time?
24145;than trying to port 11 here
24146;no
24147;not you &mike you've been very helpful
24148;i forget how bitwise stuff works because its too early
24149;just put it in playground and see if it gives you the correct flag
24150;anything beyond that we cant comment on because we have no context of what is the right path
24151;because we dont know what else you are doing
24152;Yeah you're the one who knows what your code is supposed to be doing
24153;your syntax is valid it seems
24154;so you should be able to test your code
24155;bitwise should theoretically work since the flags are built from iota which is golangs enum right?
24156;right
24157;that code should compile
24158;i would say like 95% of the time when you see something layed out like https://golang.org/pkg/regexp/syntax/#Flags
24159;its supposed to be bitwised together
24160;especially when in the docs it shows it bitwising stuff together
24161;to make another flag
24162;if the Flags iota start on 1 does than mean the zero value for the uint16 of 0 _should_ mean default behaviour? i'll test it but is that what you'd expect?
24163;no clue
24164;never learned how iota works under the hood
24165;i know how to USE it
24166;it literally just counts 0++
24167;and repeats the expression
24168;iirc
24169;yeah i know it's monotonic etc etc
24170;makes sense
24171;zero value is 0x0syntax.FoldCase is 0x1syntax.FoldCase|syntax.OneLine is 0x11
24172;sure those are numbers
24173;seems legit
24174;each flag is another power of two
24175;so they all take up 1 bit
24176;i'm not familiar enough with regex in golang yet to know if i've altered the default behaviour or not. i'll start small but i think the zero value should do what i want
24177;that's how you do it
24178;start small
24179;add one piece at a time fiddle with it to make sure you get how that piece plugs in to things
24180;lather rinse repeat
24181;maintain social distancing etc
24182;that too
24183;wear your masks people
24184;What's bitwise?
24185;https://en.wikipedia.org/wiki/Bitwise_operation
24186;math on binary numbers
24187;binary representations of numbers open a lot of magical doors
24188;```gotype foo struct { expect Results.Pass}```how would i make something like this where Pass would be an alias for true and Fail false
24189;is this something for a constant?
24190;you cant(?)
24191;true and false are values
24192;bool is the type
24193;```goconst ( Pass Result = true Fail Result = false)type Result booltype foo struct { expect Result}```that's what i've got so far
24194;sure
24195;thats a lot more reasonable than what you posted before
24196;it was a bit of an XY question
24197;80% of things asked here are
24198;dont feel bad
24199;in that snippet above is a const even necessary?
24200;well they are consts
24201;are they not
24202;logically
24203;yeah but i'm not confident enough to know for sure yet
24204;in go
24205;the value of Pass ever going to change
24206;or do yo want the value of pass to ever change
24207;good point
24208;im thinking not
24209;so const is perfectly okay
24210;cannot define new methods on nonlocal type http.Client
24211;how would i bypass this
24212;because when i try to pass the client as parameter i get an error that its a pointer
24213;you are trying to define a new method on a struct you dont own
24214;Oh
24215;you cant do that
24216;`client Client cannot use client (type http.Client) as type http.Client in argument`
24217;Bitwise operators
24218;> you are trying to define a new method on a struct you dont own@Madxmike yea realised that
24219;"```govar tests []RegexTesttests = append(tests RegexTest{ input: aaab"", pattern: `a{2}B`, flags: syntax.FoldCase|syntax.OneLine, expects: Fail,})```is this a conventional way to build up a slice (declaration followed by append)?"
24220;but i cannot pass it as argument aswell
24221;I get it a little more now
24222;you can just do it inline beep
24223;It's literally just math on one's and zeros
24224;[]RegexText{here}
24225;What if I told you you probably used bitwise operations before
24226;Where can I learn binary?
24227;> What if I told you you probably used bitwise operations before@Sgt_Tailor ik
24228;start counting the powers of 2
24229;if you're diving into binary i suggest you learn about two's complement
24230;You know the chmod command?
24231;And or not etc
24232;0 1 2 4 8 16
24233;etc
24234;> You know the chmod command?@Sgt_Tailor no
24235;Oof
24236;Nvm then
24237;What is it
24238;binary is base 2
24239;if you just search how to do binary artithmatic on youtube you will get some good results
24240;Ok
24241;its freshman level stuff a lot of the time
24242;so shouldnt be too bad
24243;until you forget how to do twos complement in the middle of your test
24244;and cry
24245;What's a two?
24246;Chmod is the command on nix machines to change the permissions of a file. They are expressed by 3 numbers. 777 for example which allows each user to read write and execute
24247;Oh
24248;7 the number for 111 in binary
24249;"if I have a Go struct```gotype Person struct { FirstName string LastName string}```and have a gRPC definition:```gotype GRPCPerson struct { state protoimpl.MessageState sizeCache protoimpl.SizeCache unknownFields protoimpl.UnknownFields FirstName string `protobuf:""bytes,1,opt,name=first_name,proto3""` LastName string `protobuf:""bytes,2,opt,name=last_name,proto3""`}```and I have a function```gofunc ListPeople() []Person {}```How should I take the `[]Person` and transform them into `[]GRPCPerson`? Map over and make new structs?"
24250;Permission stuff
24251;@Deleted User just derefence it
24252;it wants a http.Cleint
24253;and you are trying to give it a http.Client
24254;Ima go learn about one's and zeros that I will never need irl
24255;binary is the basis of all cs
24256;If you do anything with files in Go you will
24257;Cs?
24258;Csharp?
24259;computer science
24260;O_APPEND
24261;Oh
24262;i dont think its possible to understand programming without understanding binary to a decent level
24263;O_TRUNCATE
24264;```govar foo []bar = []bar{...}...foo := []bar{...}```is `:=` just sugar for the first line or is there more going on?
24265;`:=` declares and assigns
24266;so it's sugar
24267;`=` just assigns
24268;not really
24269;well
24270;i guess
24271;yes and yes
24272;basically
24273;@other have you ever used Enum?
24274;No
24275;@Ryanar seems like just maping one slice to the other would work
24276;I never bothered
24277;How do enums work?
24278;what are your main languages?
24279;C#
24280;I know I know
24281;I just never felt compelled to learn enums
24282;I know it's like a table of numbers or something
24283;What does it mean when go compiled a extensionless file?I'm trying to compile darwin/linux using golang >1.5.
24284;> >1.5
24285;?
24286;Go is 1.15 now?
24287;typo?
24288;Extensions don't really matter. Just indicates what type of file it and what program should open it. Executables on Linux and the like don't get extensions by default
24289;Windows likes having .exe
24290;But it could also have .banana
24291;Yeah but MacOS executive file are .app  it should be visible on windows
24292;Doesn't matter for the contents of the file
24293;.app is the one with an icon and stuff I think
24294;You'll need extra tooling to create that from a plain executable
24295;I see
24296;if you arnt on darwin dont you have to set the goos for the build to have it generate the correct extension?
24297;like how setting goos to windows will give you an exe
24298;Woaw
24299;I know how to turn a number to binary!
24300;Yep i have tried both GOOS=darwin/linux
24301;This is the compiled file
24302;just add .app to it üòõ
24303;üòÜ U should be joking right
24304;is it bad practice to link to the golang docs to reference types?
24305;in your script
24306;whats the build command you are giving it for darwin
24307;darwin executables don't have extensions by default
24308;MacOS _apps_ do
24309;yeah
24310;i was hoping someone else would say that
24311;because i couldnt remeber if that was true or not üòõ
24312;```set GOOS=linuxgo build first.go```
24313;notice how you don't have to type `somecommand.app ...` in the terminal
24314;just `somecommand ...`
24315;Seems like linux don't need extension too
24316;https://godoc.org/golang.org/x/mobile/app this is neat
24317;yup linux executables don't have extensions either
24318;Windows can safe some space by doing that too üòÑ
24319;@hajimehoshi is this is a working enough state to play around with?
24320;i see your on the commit history üôÇ
24321;@BryanC12 you can just do `env GOOS=linux go build first.go` btw
24322;What's the point of constants
24323;@Madxmike I was working on gomobilebind not gomobilebuild. gomobilebuild is available but I don't think this is feasible to develop an actual application
24324;I know they are created at compile but how do they give an advantage?
24325;constants implement an engineering concept called single source of truth
24326;??
24327;"using a constant allows many disparate parts of a program to immediately agree on something; they don't have their own independent notions of what the value should be"
24328;Ummm
24329;which means you can change all of it at once by changing the constant
24330;I don't get it
24331;are consts case sensitive?
24332;it doesn't seem like it to me
24333;what
24334;but just anted to make sure
24335;i have a const dfined as APIKEY but it also works if i call it using
24336;apikey
24337;that is incorrect
24338;a fun example that was discovered recently is in league of legends where people discovered a few weeks ago that red minions deal slightly more damage than blue minions because they had their own sources of truth on how much damage minions should do
24339;I mean do they save power or memory or something?
24340;no they save developer effort
24341;a compiler _can_ optimize them
24342;which is infinitely more expensive than either
24343;@xblooos https://play.golang.org/p/mT1dkRvbFl
24344;You must have it defined somewhere
24345;something being a constant means they are define in ONE place and can't be changed by other parts of the program
24346;How do they save developer effort? You just put `const`before naming the variable how does that do anything?
24347;okay example
24348;https://golang.org/pkg/time/#pkgconstants
24349;let's say you're writing a program that prints books out to the terminal
24350;Ok...
24351;you want to format it nicely
24352;so you need to define dimensions for your output
24353;specifically a width
24354;by strictly defining a width you can align things and shit
24355;so compare the two samples```goconst TERM_WIDTH = 80doStuff(TERM_WIDTH stuff otherStuff)doThings(TERM_WIDTH things butts)``````godoStuff(80 stuff otherStuff)doThings(80 things butts)````
24356;But why do I make it a constant? I can still define the width without making it a constant and its fine
24357;that adds runtime guarantees
24358;the value won't ever change
24359;so you can rely on it
24360;er compile time
24361;here's a fun experiment for you to try
24362;but
24363;I like using the time package as an example.
24364;> so compare the two samples> ```go> TERM_WIDTH = 80> > doStuff(TERM_WIDTH stuff otherStuff)> doThings(TERM_WIDTH things butts)> ```> > ```go> doStuff(80 stuff otherStuff)> doThings(80 things butts)> ````I can make it not constant
24365;`var TERM_WIDTH = 80` could be changed at any point during your programs run
24366;and that means your fomatting in theory could break at any moment
24367;Yeah only by the dev
24368;devs do funny things
24369;take a program that does some sort of file or network i/o and put `io.EOF = nil` at the beginning of func main
24370;yes developers are your worst enemy
24371;you're protecting yourself from the mistakes developers make
24372;that's the whole point of programming
24373;If I make `var width := 80` I can still use it and just not touch it
24374;Whilst also remembering you are a developer and will make mistakes
24375;how would i run regex on a string and get first captured groupthis is my code rn but its returning nothing```gore := regexp.MustCompile(`\\['config (\\/\\w+\\/\\w+)'\\]`)find := re.FindString(body)```
24376;And it serves the same purpose
24377;@other okay now what happens if someone IMPORTS your code
24378;The time package defines different formats. You can use these to format time using existing formats everybody has agreed on. `time.RFC822` is defined as `02 Jan 06 15:04 MST`. Now if this were a _variable_ instead of a _constant_ other people could overwrite what RFC822 means. BREAKING EVERYTHING
24379;you have no control over their code
24380;And?
24381;so they can change it freely
24382;and fuck your shit up
24383;read my example
24384;Ouch
24385;They're a niche concept but have their uses.
24386;So what libraries are there to make a TUI? I need to have a forloop running to check if a specific connection fails and if it does display that it has failed in the center and when it succeseeds turn the background green and display success
24387;So they're basically useless for solo devs
24388;No
24389;Constants are nice because you have the guarantee you can't mess it up later
24390;also the compiler _can_ optimize them
24391;also humans are much better at understanding names than random assortments of numbers
24392;using constants which are names for random assortments of numbers makes it much easier to understand a piece of code
24393;So if I'm making a library isn't it better to make the functions constant?
24394;So nobody overrides them?
24395;normal `func`s are already constant
24396;that was mainly about numbers or strings being constant
24397;Just curious you say normal funcs... are there abnormal funcs
24398;A func which is not a const?
24399;`map[string]func()`
24400;function values a.k.a. closures
24401;(technically those are two slightly different things but close enough)
24402;```gotype Thing struct { Verb func()}```
24403;lots of cases where funcs aren't constant
24404;If a function is already constant then how would I override it?
24405;afaik you cant override package level functions
24406;Closures are weird for me I've used them but don't know much about them or couldn't define them for you. Maybe I'll get a handle on them tonight
24407;Ok I get it
24408;Constants just make it easier to understand
24409;So if I come back to a project like a year later and don't remember anything I can't accidentally mess the whole thing up?
24410;Is that correct?
24411;that's one possibility,s ure
24412;Ok
24413;there's `var Name = func() {`
24414;the compiler would stop you from trying to mutate a thing that categorically should not be mutated
24415;One last question for tonightWhat are enums and how do I use them and why would I use them?
24416;> there's `var Name = func() {`@_diamondburned_ does that make it not constant?
24417;yeah
24418;you can set it
24419;Ok cool that makes sense but as sentry mentioned package level functions are consts
24420;it's a variable containing a function value
24421;I learn a lot (semi) idling here
24422;How would I call it tho?
24423;Normally?
24424;`Name()`
24425;Ah ok
24426;> One last question for tonight What are enums and how do I use them and why would I use them?
24427;an enum is a list of constants
24428;Can I see a code example please?
24429;```go// DeckTransitionType enumeration value describes the possible transitions// between children in a k widget.//// New values may be added to this enumeration over time.type DeckTransitionType intconst ( // DeckTransitionTypeOver cover the old page or uncover the new page, // sliding from or towards the end according to orientation text direction // and children order DeckTransitionTypeOver DeckTransitionType = 0 // DeckTransitionTypeUnder uncover the new page or cover the old page, // sliding from or towards the start according to orientation text // direction and children order DeckTransitionTypeUnder DeckTransitionType = 1 // DeckTransitionTypeSlide slide from left right up or down according to // the orientation text direction and the children order DeckTransitionTypeSlide DeckTransitionType = 2)```
24430;the list of tokens at <https://golang.org/pkg/go/token/#Token>
24431;Ummmmm
24432;Whats lexical supposed to mean?
24433;ok
24434;irrelevant to enums but lexical means relating to the indivisible meaningful units that make up a language
24435;Oh I won't even try to understand that
24436;__flashbacks__
24437;You lost me at indivisible
24438;indivisible means can\'t be broken up
24439;Would this work? `type ENUM enum {}`
24440;ah firgured that out
24441;how can i subtract 14 days form this tho
24442;try it and see üôÇ
24443;I canr
24444;"```goto := time.Now().Format(""20060102"")```"
24445;Cant
24446;I'm not at my pc right noe
24447;Now
24448;> there's `var Name = func() {`@_diamondburned_ This is big brains stuff
24449;Used it for non exported functions a couple of times to swap implementations for testing
24450;@misterturtle I only know 70% of what I know through answering people‚Äôs questions
24451;It‚Äôs a highly effective learning tactic
24452;basically wrapped the original to assert it was being called with the correct parameters
24453;go does not have formal enumerations so no you can't do `type ENUM enum {}`
24454;the way to do enums in go is to define a list of constants typically using the special `iota` keyword to have their values be assigned automatically
24455;"how do i convert this to a single string?```""IP Addr: %s receive RTT: %v\ addr.String() rtt```"
24456;`fmt.Sprintf`?
24457;i want to return as string
24458;yeah
24459;thats it?
24460;oaky
24461;that's what that does
24462;docs docs docs
24463;https://i.imgur.com/4fecjZn.png dafuq
24464;i am returning a damn string
24465;"```gopackage mainimport ( fmt"" net"" os"" time"" github.com/tatsushid/gofastping"")func main() { fmt.Println(test(os.Args[1]))}func test(url string) string { p := fastping.NewPinger() ra err := net.ResolveIPAddr(""ip4:icmp os.Args[1]) if err != nil { return Failed to Connect"" } p.AddIPAddr(ra) p.OnRecv = func(addr net.IPAddr rtt time.Duration) { return fmt.Sprintf(""IP Addr: %s receive RTT: %v\ addr.String() rtt) } p.OnIdle = func() { return Connected"" } err = p.Run() if err != nil { fmt.Println(err) } return Mlem""}``````PS D:\\Workspace> go run test.go 555.555.555.555# commandlinearguments.\\test.go:25:3: too many arguments to return have (string) want ().\\test.go:29:3: too many arguments to return have (string) want ()```"
24466;Your closure doesn‚Äôt return a string
24467;In its return type
24468;a closure is a new scope
24469;Oh yeah
24470;I see now
24471;it can set a variable of the parent scope
24472;my what...
24473;phhh
24474;ohh
24475;I am modifying the example in the fastping thing im using
24476;Well how would I fix it then?
24477;Why would I need an enum?
24478;An enum is just a list of constants why don't I just make the constants separately?
24479;do you mean golangs iota enum?
24480;or java/c# style enums
24481;if the former have you read https://github.com/golang/go/wiki/Iota
24482;How is```goconst const1const const2```Different from```goconst ( const1 const2) ```
24483;besides neither being perfectly valid Go no difference
24484;Yeah sorry lol
24485;Im on my phone so I'm trying to type less because I suck at typing on my phone
24486;Also
24487;Whats an iota?
24488;how would i make it return the string i want?
24489;<https://golang.org/ref/spec#Iota>
24490;by returning the string you want
24491;I don't get it
24492;Lol
24493;What does `<<` do?
24494;arithmetic bit shift
24495;Oh yeah
24496;simple example:
24497;`5 << 1`
24498;bit shift 5 left once
24499;Wait
24500;Don't say the answer
24501;Ima guess
24502;so i just made a var because i remembered varnesting and that headache
24503;and figured it was doing something simular
24504;and i think it wants to work? because now i get this error
24505;```PS D:\\Workspace> go run test.go 555.555.555.555panic: runtime error: invalid memory address or nil pointer dereference[signal 0xc0000005 code=0x0 addr=0x0 pc=0x4e65f9]goroutine 1 [running]:github.com/tatsushid/gofastping.(Pinger).AddIPAddr(0xc00009a120 0x0) D:/Scoop/persist/gopath/src/github.com/tatsushid/gofastping/fastping.go:249 +0xa9main.test(0xc0000100e0 0xf 0xc00008ff78 0x405ac6) D:/Workspace/test.go:24 +0xd7main.main() D:/Workspace/test.go:13 +0x56exit status 2```
24506;5 = 0101
24507;Right?
24508;In binary?
24509;yes
24510;And then
24511;5 << 1 = 1010
24512;Like that?
24513;yes
24514;So that equals 10?
24515;Is that correct?
24516;yes
24517;And `>>` shifts it to the right?
24518;yes
24519;But why would I ever need this?
24520;few usecases
24521;e.g. bitflags
24522;```goconst ( flag1 = 1 << iota flag2 flag3 flag4 flag5 flag6 flag7 flag8)```
24523;this is
24524;```0000000100000010000001000000100000010000001000000100000010000000```
24525;bitflags have properties
24526;namely that you can store multiple booleans in a single integer and do operations on them
24527;for example
24528;```gotype HouseFeature intconst ( HasDoor HouseFeature = 1 << iota HasWindow HasGarage HasWalls)```
24529;you can express the features of a house like this:
24530;I still don't get what iota is
24531;```gohouseFeatures := HasDoor | HasWindowotherHouseFeatures := HasGarage | HasDoor```
24532;you can check if a flag is set like this:
24533;What's iota?
24534;```goif (houseFeatures & HasDoor) == 0 { // house has a door} else { // house doesn't have a door}```
24535;`iota` is simply a number that counts up
24536;Eh?
24537;```goconst ( Yeet = iota // 0 Yote // 1 Yate // 2 Yoot // 3)```
24538;Enums are a nice way to express specific state
24539;```goconst ( Pie = iota  2 // 0  2: 0 Cak // 1  2: 2 Coo // 2  2: 4 Sug // 3  2: 6)```
24540;> What's iota?@other we've explained before and you understood :thonk:
24541;I did?
24542;Does iota just set a pattern to go?
24543;Like ok from now on create a number and add to it every iteration and also subtract the next number in the list from the variable?
24544;iota increments for each item in a list of consts
24545;Yeah
24546;So
24547;Hiya
24548;```goconst ( num1 = 1 << 1 iota num2 num3 num4)```
24549;is equal to:
24550;```go0001001001001000```
24551;is that correct?
24552;yup
24553;yay
24554;can i only use iota with binary?
24555;everything is binary
24556;iota just increments
24557;you're using it in a bitshift operation
24558;can i do:```goconst ( num1 = 10  1 iota num2 num3 num4)```will this output:```go10987``` i this correct?
24559;a
24560;a?
24561;`10  1 iota` is not valid syntax but if you remove the `1` then yes
24562;so `10  iota`?
24563;@zephyrtronium
24564;yes
24565;but that will do `1` every time
24566;what if i want to subtract 2 every time?
24567;then double the result of iota
24568;??
24569;like `10  iota2`?
24570;yes
24571;whoa
24572;iota is just a counter
24573;so is that the purpose of enums?
24574;it increments by 1 each line
24575;the purpose of enums is the same as the purpose of constants because an enum is a list of constants
24576;more precisely a list of constants of different values
24577;but also partly because iotas
24578;iota is a mechanism go provides to make enums simpler (but also more general)
24579;iota is just there to avoid typing really
24580;for long enum lists
24581;can variables in enums only be numbers?
24582;can i make strings in enums?
24583;Yes
24584;technically these aren't enums
24585;but yes
24586;enums technically don't have values at least conceptually
24587;they're just flags
24588;Depends on the language though right?
24589;yeah
24590;They do in Typescript at least
24591;it's kinda nebulous
24592;and SQL
24593;it's more like a constraint on values I suppose
24594;"can i make this?```goconst ( str1 = this is a string!"" str2 = this is a string!"" str2 = this is a string!"")```"
24595;Yeah it's more like... an organization tool almost. To put similar values in the same place and avoid mistypings etc
24596;c# has a more formal idea of an enum where it's not just a list of constants but also those constants share a specific type and you can't use things that aren't that type as if they were enum values
24597;that\'s what i meant when i mentioned formal enumerations earlier
24598;cool
24599;i feel like i actually learned some valuable stuff today
24600;but why would anyone ever need to use `<<` or `>>`?
24601;there are too many answers to that question
24602;so many reasons
24603;i mean its cool and all but i dont know why anyone would ever...
24604;whats one decent reason?
24605;generally when you need to shift bits
24606;lol
24607;??
24608;why would i need to shift bits?
24609;so you know how say int32 is a 32bit number so it can hold values from about 2.1 to +2.1 billion?
24610;yeah....
24611;and?
24612;that's a lie üôÇ
24613;big lie
24614;more precisely it's an abstraction
24615;and whats your point?
24616;int32 is an interpretation of a collection of 32 bits as numbers
24617;you can also use a collection of 32 bits to represent other things
24618;like sets of flags or coefficients of polynomials
24619;in those cases the numeric value is irrelevant
24620;ok too much
24621;those are usually the places where you see operators like `<<` `>>` `|` `&` `^`
24622;too much big brain for one day
24623;What if I want the first 16 bits of the 32 bits?
24624;Or what if I want to store the values of two separate bytes in one 16 bit word?
24625;bye ima go be a loser and watch netflix
24626;thanks tho
24627;for helping me understand
24628;@other look into bitwise operations in general they'll apply to every language and it's very useful to know
24629;ok
24630;Eg checking a number is odd: `if (n & 1) {}`
24631;"Question about imports. I have two files hello.go and dog.go```// hello.gopackage mainimport fmt""func main() { fmt.Println(bark(""woof""))}// dog.gopackage mainfunc bark(x string) (string) { return x}```when i try to do `go run hello.go` it says bark is undefined which makes sense since i havent imported the dog.go file yet."
24632;But if i run it via vscode debugger using this launch config <https://pastebin.com/raw/jXgv9pLP> . running hello.go just works
24633;why is that
24634;go packages are folder based
24635;so how do i make `go run hello.go` work?
24636;its giving me error
24637;ah so `go run .`
24638;Im creating a map struct with a TTL that expires entries 30 seconds after creation. Is it safe/reliable to just start a time.AfterFunc on insertion to delete items from the map? Or instead label each key by creation time and start a seperate go routine/timer to poll the map for old entries every second or so?
24639;you should do the latter
24640;actually i wrote this
24641;https://github.com/therealfakemoot/gocollections/tree/master/lmru
24642;not enough stars to use / 10
24643;time based evictions from a kv cache
24644;typesafe too if you use code gen
24645;or you can just do it with interface{} and ruin your life
24646;code gen bad tbh
24647;here's mine https://github.com/diamondburned/timedmap
24648;thanks y'all
24649;yeah like that
24650;Why is the time.AfterFunc not a good idea?
24651;None
24652;too ad hoc
24653;i know it FEELS wrong but i don't really understand why
24654;lol
24655;also
24656;locks
24657;https://github.com/therealfakemoot/gocollections/blob/master/lmru/example/mru_string.go
24658;here's an example that covers most of your failure cases
24659;race conditions and so on
24660;because you still need to acquire a lock and iterating over a map is much cheaper than spawning a goroutine for each value
24661;if Go uses an event loop maybe
24662;but it doesn't
24663;yeah you only need one goroutine
24664;that will periodically clean keys
24665;word okay that makes a lot of sense
24666;and then because you have the ONE goroutine your code becomes much easier to reason about
24667;instead of all these ephemeral timers floating around
24668;tbf having multiple goroutines is also easy to reason about
24669;you don't see n goroutines in code
24670;```gofunc (db DB) SetWithTTL(k v string ttl time.Duration) { db.Set(k v) time.AfterFunc(ttl func() { db.Delete(k v) })}```
24671;simple
24672;but not a good idea
24673;._.
24674;:kek:
24675;what tell me that code is hArD tO rEASoN AbOuT
24676;it's as straightforward as it could ever get
24677;üê∏ üî™
24678;banned
24679;@_diamondburned_ yeah thats what im doing now pretty much
24680;yeah use a cleanup goroutine
24681;alternatively
24682;```go// Start begins the goroutine that cleans up entries from the LMRU.func (m MRUString) Start(c chan time.Time e chan Eviction) { for t := range c { m.Lock() for k := range m.cache { lifetime := t.Sub(m.inserts[k]) if lifetime > m.timeout { var eviction Eviction if e != nil { eviction.Key = k eviction.Value = m.cache[k] eviction.Lifetime = lifetime } delete(m.cache k) delete(m.inserts k) e < eviction } } m.Unlock() }}```
24683;ideally you'd keep the TTL as well as the key and value
24684;a little more indentation than i like
24685;but
24686;it covers your edge cases
24687;this way you don't have to rely on the cleanup loop
24688;got it thanks again y'all. very helpful
24689;how should you store time series data (well state) with time and duration in sql?
24690;start end or start duration?
24691;doesn't matter
24692;ok lol
24693;but you did say something when i was tryna use badger
24694;i guess a twovalue thing was difficult in a kv context
24695;but in sql it doesn't matter
24696;kind of
24697;you can structure things differently in kv to make everything even faster
24698;e.g. you can have `start > data` and `start > duration` in 2 separate tables
24699;so you don't need to parse the entire data chunk
24700;but yeah if you use SQL then that's done for you
24701;looks like start,end schema is slightly easier to insert
24702;you poll the value/wait on channel
24703;record start and end
24704;idk really probably no difference
24705;Time series is often a single timestamp
24706;Checkout influxdb
24707;noo
24708;goin embedded
24709;i don't wanna make users install a beefy server
24710;Jus sayin checkout how that works
24711;influxdb doesnt require beef
24712;Its built in Go
24713;Not java
24714;goin for a single binary approach rn
24715;everything has its purpose
24716;sqlite works for most things
24717;doesn't timescaledb use postgres for storage?
24718;saw an article on that
24719;looks alright but i'm not really doing points
24720;more like state
24721;That is what a timeseries db is though. State at a point in time
24722;without duration
24723;which i happen to need
24724;you can add a duration attr
24725;or just store start/stop data points
24726;yeah sure
24727;anyone have experience with ETCD from golang? Getting 404 on all http requests but etcdctl works fine
24728;show your work
24729;@deezy ? Honestly I think this version of etcd 3.4.12 is bunk on windows or I have a horrific misunderstanding of how it should respond to get requests
24730;can you get the version
24731;`curl L http://127.0.0.1:2379/version`
24732;"> curl L http://127.0.0.1:2379/version> {""etcdserver"":""3.4.12"",""etcdcluster"":""3.4.0""}"
24733;https://etcd.io/docs/v2/api/#getthevalueofakey
24734;i mean
24735;compare what you're doing
24736;to the documentation
24737;that's the v2 api yeah v1 examples don't follow the same URL pattern and you can't even do v3 requests with curl
24738;it looks like there aren't even docs for v1
24739;so
24740;you probably shouldn't be using it
24741;is there a lib like https://github.com/urfave/cli but to make interactive cli?Like the `ftp` command where you write command INTO the program itself?
24742;@deezy thank you we were using a bad build. I didn't use their latest release tag just took their newest release. Now I got the tagged build and its working.
24743;aha
24744;that'll do it
24745;versions are important!
24746;wish they'd just treat master as latest release
24747;Nah that isn't how semver works üòõ
24748;It could be tricky but it‚Äôs possible to do both isn‚Äôt it?
24749;Have master be the latest stable commit of the latest major version
24750;@cats hey how do i convert a `goja.Object` back to a struct
24751;do i just marshal it to json and unmarshal or smthn?
24752;Depends on what it's represented by
24753;you can convert a value back to a struct with .Export() I think
24754;```GO return goja.New().ToValue(Embed{ Title: call.Argument(0).String(), Description: call.Argument(1).String(), }).ToObject(c.runtime)```
24755;its in a constructor
24756;:KM_Dorime:
24757;can i technically convert this back to struct
24758;oh lol i can
24759;perfect
24760;im passing in the type and it says not an expression
24761;ohlol im dum
24762;a type isn't an expression
24763;nah it had no params i thought it needed something to marshal onto
24764;So i need a function which accepts a function as a parameter
24765;this function needs to have a specific first argument to work right
24766;and all other arguments are whatever
24767;i think i do it with interface but im not sure how exactly :5_bugcatstare:
24768;you can use `interface{}` to accept any type
24769;_usually_ something is awry if you need an empty interface though
24770;but not always
24771;And just use the function signature for the function param
24772;take the function type with the specific argument you need as your argument and the caller can use closures to use the other arguments
24773;`func myFunc(paramFunc func() interface{})`
24774;closures are nice
24775;i want a function which can accept any function as long as the function accepts a specific type as its first parameter
24776;yeah that's fine
24777;:KM_Dorime: infinite parameters
24778;```gofunc Whatever(func(Thing) Result) {}func main() { v := Something{} f := func(Thing) Result { v.Whatever(Thing) } Whatever(f(thing))}```
24779;boom
24780;arbitrary scope enclosures with a single function signature
24781;:stare: hmm
24782;is there a way to do it the other way
24783;god functional programming gets me so hot
24784;```gofunc madoka(f func(Anime)) { f(Anime{})}func homura(x Anime y int)func main() { madoka(func(x Anime) { homura(x 1) })}```
24785;@cats i did `call.This.Set` in a constructor but no methods are found still
24786;:5_bugcatstare:
24787;i set something as send for example but nothing named send is found
24788;not sure
24789;is that how you are supposed to do it?
24790;Guys I have a problem
24791;xd
24792;Ok so
24793;I wanna make an mmo game server with websockets. I want every world to have it's own broadcast channel for live updates
24794;Idk how to approach this. I know that's vague but how can I step from https://github.com/scotchio/gorealtimechat to something like what I'm looking to build. How do I separate things for each world to be isolated?
24795;Thanks so much in advance
24796;if there is any more info the constructor is under another struct which gets set in JS later
24797;doing `call.This.Set` should set `this` which is the context but idk @cats
24798;have you encountered the problem before?
24799;so its not
24800;Object
24801;its
24802;`object.object.methodthatdoesntwork()`
24803;:robpike:
24804;@Dane Zaddy mmm if you're asking that sort of question the only real response would be to improve your programming skills
24805;architectural decisions aren't just something some random people on the internet can give to you
24806;you need to have a good base in problem solving to decide how you want to architect your application
24807;yeah it's a nontrivial subject
24808;to design architecture you have to be familiar with APIs as an academic principle understand how data flows through programs using different design patterns
24809;etc etc etc
24810;i figured out why my shit wasnt working
24811;I'm getting an error on this part of my code
24812;```# github.com/diamondburned/handy./handy_generated.go:2604:7: unexpected type: ...exit status 2```
24813;wrapValueObject is just ```go// wrapValueObject wraps the given pointer to ValueObject.func wrapValueObject(ptr unsafe.Pointer) ValueObject { obj := glib.Take(ptr) return &ValueObject{glib.InitiallyUnowned{obj}}}```
24814;@Riku nice! I'm not a goja master just use it with a few things :P
24815;:BCS_PepeLaugh: apparently returning on the constructor overrides all things you set to `this`
24816;:stare:
24817;so i was returning at the end and manual sets were just being deleted
24818;https://i.kawaii.sh/FRstmG6.png
24819;:KM_Dorime:
24820;returning outside of nil that is
24821;> The message is confusing until you realize that the ... is the variadic portion of a C function. You can't use C variadic functions directly from Go so you'll have to write a small wrapper in C to call sem_open.bruh
24822;lmao
24823;tfw helping out begginer in Go
24824;function has return value `<types.Nil` and returns nil at end
24825;:stare:
24826;i laughed so much
24827;I‚Äôm like brand new to golang is there a good way to query a set of DB rows into a slice without looping?
24828;I tried googling but everything I found needs confusing interfaces and stuff
24829;https://golang.org/pkg/database/sql/#DB.Query
24830;like by definition you
24831;if you have a list of things and you want to do something to/with all of those things
24832;you can't avoid a loop
24833;what's wrong with looping
24834;exactly
24835;loops are your friend
24836;a well constructed program is nothing BUT for loops üôÉ
24837;a(b(c(d(e(f(g(h(someListOfRawData))))))
24838;Lol
24839;each one accepting a list of inputs and returning a list of outputs
24840;because looping is way more lines than just `var rows string[] = query`
24841;I still can't find a reason as to why use bitwise operators and enums and iotas
24842;that's fine
24843;I know what they are but have no clue
24844;WHY
24845;yeah that's normal
24846;knowing that things exist but not why
24847;that comes with practice and experience
24848;Are you talking to me or bee?
24849;you
24850;Oh okay
24851;I realized something
24852;`x2` is the same as `x<<1` right?
24853;try it and see
24854;I mean if I use it on 5,it becomes 10,if I use it on 10 it becomes 20
24855;Etc
24856;i know what you mean
24857;i'm telling you that you have literal code ready to run
24858;I do?
24859;> x2 is the same as x<<1 right?looks like code to me
24860;Hmm
24861;I think it only works on multiples of five
24862;It's just the fact that bitwise operators are so random
24863;they're super not üôÉ
24864;they work on binary representations of integers
24865;You can start with 5 and somehow get 27 how are those two numbers even related?
24866;they're just not intuitive for us decimal thinkers
24867;i mean you can find out
24868;I mean random is the wrong word...
24869;"`fmt.Printf(""%#b x)`"
24870;More like... Unrelated?
24871;yeah it's not super clear
24872;from looking at the decimal representations
24873;but if you print out the binary you'll see how bitshifting works
24874;I don't get why anyone would use it for maths and stuff
24875;it lets you do all sorts of shit
24876;multiplying by certain factors becomes as trivial as shifting bits left or right
24877;which means it's a lot cheaper to do specific maths
24878;I'm so giddy cuz I know how to translate a number to binary
24879;Now I want a binary watch lol
24880;Is there a way in go to get the binary representation of a variable?
24881;Like convert it to binary and/or back?
24882;well that's where things get trickier
24883;a variable is very open ended
24884;it could be a string an integer nil or complex struct based types
24885;so you have to factor in endianness word size encodings
24886;many magic numbers
24887;I mean a number or a string
24888;i already showed you how to do numbers i think i haven't tested it
24889;but uh
24890;for strings
24891;Wait you did?
24892;you'd probably be best off converting it to a byte array and printing the binary representation of those bytes
24893;yep i did
24894;"> `fmt.Printf(""%#b x)`@deezy this?"
24895;that's what the docs say
24896;but i haven't tested it
24897;That translates a number to binary?
24898;it prints the binary representation of a number
24899;But it's just a string
24900;well yes that's how you represent visible data
24901;text
24902;you're printing it
24903;That's just printing a string and a variable
24904;yes
24905;with a formatting verb
24906;%#b
24907;https://golang.org/pkg/fmt/
24908;What does that do?
24909;documentation is your friend
24910;bruh this is page 1 tour stuff
24911;Lol
24912;I never had time for the tour
24913;I'm not at my pc
24914;i one thousand percent guarantee the time you're wasting with the stuff you didn't pick up is one billion times more than what it'd take to do the tour
24915;Running into a workflow problem with modules. Trying to have a module(B) use %GOPATH%/src/... instead of pkg/mod. Basically disabling it temporarily so I can make changes to a dependent module(A) and see them reflect quickly in module(B) without having to push every save . My hack is to delete the go.mod file but that seems like the wrong approach.
24916;you need to just use the replace directive
24917;ill look for that thanks.
24918;`replace github.com/org/project => /your/local/package`
24919;that will make it so everything works like normal
24920;but mod will look atthe local files first
24921;thanks that worked
24922;it'll only use the local files
24923;if you push the go.mod with that replace directive nobody else will be able to build it unless they too put the deps on that folder
24924;source: I constantly make this mistake and people constantly complain about it
24925;Oh lol
24926;good to know looks like they added a modfile option so if your modfile doesn't change much could have a local .gitignored version of it.
24927;> Now I want a binary watch lol@other https://tokyoflash.com/collections/watches TokyoFlash do a number of binary watches plus some really obscure ones
24928;simplest way to go from```https://www.website.com/home.html```to```https://www.website.com```?
24929;Return a 301 saying to move to `/` when a user requests `/home.html`
24930;no missunderstood me sorry
24931;my bad
24932;to get that as a string
24933;ohh. Let me set up a playground
24934;ok nvm got it
24935;just url.parse and then take host
24936;and prepend https
24937;thanks anyways
24938;But if it's http you'd have the wrong result?
24939;ye also used scheme
24940;parsedSiteUrl.Scheme + parsedSiteUrl.Host
24941;"```Go s := https://www.website.com/home.html"" // Parse the URL and ensure there are no errors. u err := url.Parse(s) if err != nil { panic(err) } abs := fmt.Sprintf(""%s://%s u.Scheme u.Host)```"
24942;ok
24943;thankis
24944;Returns `https://www.website.com`
24945;You're welcome
24946;Yeah
24947;Does anyone know why strconv.FormatInt() allows a max base of 36?
24948;Lame answer: because they haven't implemented bases higher than that
24949;base36 can be accomplished with az09
24950;The next relevant base is base64 which has its own package
24951;They only need AZ and + / to get to 64
24952;base64 encoding encodes strings though it's not mathematical base 64
24953;Right?
24954;You can feed it an int as well but not directly
24955;will have to go through encoding/binary first
24956;I guess I could copy the int64 into a [8]byte
24957;https://developer.mozilla.org/enUS/docs/Web/JavaScript/Reference/Global_Objects/String/slice equivalent in go ?
24958;Alright thanks.
24959;"```go""Hello playground""[5:10] //  pla""``` just use []"
24960;ok thanks
24961;np
24962;!go``` data := make([]byte binary.MaxVarintLen64) length := binary.PutVarint(data 1231234) var buf bytes.Buffer enc := base64.NewEncoder(base64.RawStdEncoding &buf) enc.Write(data[:length]) enc.Close()  fmt.Println(buf.String())```
24963;None
24964;something like that @Dexti
24965;Yeah I implemented that already. Thanks üôÇ
24966;does golang have a math.Pow function for integers?
24967;Math is float64 only iirc
24968;Big sad üò¶
24969;https://discordapp.com/channels/118456055842734083/118456055842734083/747746132360429638Are you sure this is correct?It gives me a different value to ```gob := int64(base) sb := strings.Builder{} for i != 0 { sb.WriteRune(baseChars[i%b]) i /= b } return sb.String()```
24970;There is <https://golang.org/pkg/math/big/> though
24971;I get `panic: invalid base` when I use .Text(64) with that
24972;the base64 package might yield a different result because it adheres to the base64 standard
24973;It encodes the bytes of the int
24974;ah ok
24975;base64 operates in 4 byte blocks
24976;So it's including some extra bytes on the one end and encoding those too? Although they're empty
24977;No it is slightly more nuanced than that. Base64 encodes 6 bits per character so it needs more characters than expected. There are padding options as well which will always make it work in chunks of 4
24978;I am not doing a stellar job at explaining the wiki page is better <https://en.wikipedia.org/wiki/Base64#Decoding_Base64_without_padding>
24979;Thank you
24980;Why is `binary.MaxVarintLen64` 10? 64 bits = 8 bytes not 10??
24981;"`panic: Get https://ipinfo.io"": malformed HTTP status code not""`"
24982;Rofl wtf
24983;wtf does that mean
24984;ipinfo.io sent some whacky response
24985;why are the rand functions in golang called Uint31n and Uint63n?
24986;do they only return 31 and 61 bits?
24987;if that is the case what is the reason behind it?
24988;there should not be a problem since the return types are uint32 and uint64 respectively.
24989;The 31 is probably because a int uses one bit for the sign (+/)
24990;but it's unsigned?
24991;Yeah. They may just use the Int31n method and then convert the result to a unit
24992;hmm I see but does golang really reserve one bit for the sign? I have never seen a language do that before.
24993;except for floating point values.
24994;Well how else would a language store the sign?
24995;They are called 31 and 63 because that is the amount of random bits you get
24996;Because they return an int and the value _MUST_ be positive you lose one bit
24997;the value of the sign bit is predetermined
24998;@Sgt_Tailor but they don't return an int they return an uint32/uint64
24999;They don't
25000;or are you referring to the other Int31n/Int64n?
25001;they return and int32 and int64
25002;uint32 and uint64 are returned by functions called Uint32 and Uint64
25003;oh my bad there were no Uint31n/Uint63n functions
25004;it makes sense now
25005;so they could potentially add Uint32n/Uint64n in the future to make use of the last bit of the unsigned type.
25006;Not really as N would be a weird range then üòõ
25007;N is now defined as [0 N)
25008;nvm
25009;unsigned so that would work
25010;oh nvm
25011;yeah so it seems a bit strange to not add Uint32n/Uint64n
25012;you could make it yourself with Uint32/Uint64 though so it's fine
25013;>hmm I see but does golang really reserve one bit for the sign? I have never seen a language do that before.isnt that how its always done?
25014;None
25015;@taku
25016;yupp you guys are right
25017;an area im not always familiar with so you made me doubt it xD
25018;however the bit does not represent a sign for when a value is zero (the only exception)
25019;but in floating point format it does do that
25020;so you have a negative and a positive zero
25021;for float32 and float64
25022;Whats the easiest way for me to generate a 5k character line string in golang
25023;Or strings of similarly variable length
25024;what character set?
25025;uh
25026;Unicode ig
25027;I just want a random string of az ><
25028;nothing fancy
25029;Either way it would be generating random integers and using a modulo to transform that into a char
25030;hmm i tried this but it hasnt worked the way i wanted
25031;"```gofunc arbitraryStringOfLength(n int) string { b := make([]byte n) if _ err := rand.Read(b); err != nil { panic(err) } s := fmt.Sprintf(""%X b) return s}```"
25032;its giving me 2xn for len(res)
25033;https://play.golang.org/p/ffCMX_Ps6Qo is a naive approach
25034;could preallocate the slice instead of using a builder
25035;But should give you an idea
25036;ahh thanks
25037;no
25038;Unless you're in the debugger
25039;channels are not traditional queues with pop peek etc. There are a communication mechanism with a possible fifo buffer.
25040;@aosync you can always put it back if you don't care about ordering :^)
25041;or if you do care about ordering timestamp your elements somehow
25042;but typically you shouldn't try to mess with the flow of channels
25043;ah ok
25044;don't do that have a buffer that you can peek or pop
25045;that's fair
25046;participle has PeekingLexer
25047;honestly I'd just use participle if I'm doing any sort of parsing but you do you lol
25048;hmm well you can always implement a sort of peekable channel if you really wanted
25049;also really depends on your definition of ordered
25050;like if you have >1 writer to the channel
25051;its whoever gets to the channel write first writes
25052;true
25053;which depending on how you need things ordered
25054;could be a problem
25055;if you have just a single writer a `Next()`able buffer is probably enough
25056;which you can then put `Peek()` on too
25057;like say you wanted a single channel from 10 goroutines that passed in some struct with a timestamp
25058;and you want that all ordered by timetamp
25059;it would be very annoying to do that on the writing side
25060;definitely
25061;you'd probably want a custom impl for finding the oldest thing on each read
25062;you would just collect all of the inbound things
25063;and sort them
25064;exactly
25065;but thats an impl detail lol
25066;but if you just do it in chunks things won't work right you have to keep a buffer and continuously pop the oldest in a `Next()` method
25067;Hello
25068;hiya
25069;I have a question about go
25070;okay
25071;go for it
25072;:kekw:
25073;hahahhahah
25074;"what Semantics mean in programming?Also what is dignity in programmingi was watching lecture about arrays semantics in GO  I don\'t know if I get right because my english is kinda badhe say that when you create 1 version of arrayvar fruits [5]stringfruits[0] = Apple""fruits[1] = Orange""fruits[2] = Banana""fruits[3] = Grape""fruits[4] = Plum""like this Apple will be on the heap  so every time you call it your going to call it from the heapfor i fruit := range fruits { fmt.Println(i &fruit) }fruit will not create a new copy of itthey will all use the Apple that is on the heapI get it right?"
25075;semantics just mean the actual details of how things work
25076;if someone says array semantics they are talking about how arrays work
25077;idk what you mean by dignity
25078;integrity
25079;Someone is doing string manipulation/parsing. Obligatory graphemes can consist of multiple runes
25080;@aosync ^
25081;Not sure if relevant this time but doesn't hurt
25082;> for i fruit := range fruits {> fmt.Println(i &fruit)> }> fruit will not create a new copy of itfruit is a copy of whatever is in `fruits[i]`
25083;100% of the time
25084;Classic mistake
25085;now what exactly a copy entails is a bit different depending on the thing
25086;https://github.com/golang/go/wiki/CommonMistakes#usingreferencetoloopiteratorvariable
25087;bruh that is exactly what im saying
25088;I know @Madxmike. That page has more examples and a nice explanation for each one
25089;The goroutine one is also neat
25090;oh okay
25091;bruh retracted
25092;üòÑ
25093;@aosync That is fine as long as you also know that multi rune character exists
25094;also im not sure on exact heap/stack semantics
25095;but I believe its a bit more complicated than this will always be on the heap
25096;If you want to rang over the what I assume is a string you can just do that
25097;ranging over a string will yield runes
25098;@Sgt_Tailor you are talking with me
25099;?
25100;I got confused
25101;:p
25102;No that part was for sync
25103;or there an old discussion before i came XD
25104;yes
25105;But do you want emoji support üòõ
25106;there was
25107;üë®\u200düë©\u200düë¶ sad
25108;https://play.golang.org/p/G5isAekEFCq
25109;TIL this works
25110;I need some guidance in Go. On one particular topic
25111;How do I render colored dots in the terminal using Go?
25112;Like online> green dot offline>grey dot DND>yellow dot etc
25113;easy enough
25114;Is there a library?
25115;there's loads of round glyphs
25116;yes please tell me
25117;there are libraries for emitting terminal colors
25118;https://unicodetable.com/en/#latin1supplement
25119;i mean you can start here
25120;but unicode has about 50 million characters available
25121;so
25122;pretty much anything you want is available
25123;you could easily google golang terminal color library and find at least a dozen options
25124;and then plug it all together
25125;yeah I had a look at fatih/color
25126;@deezy alrght so I have this symbol right here.. https://unicodetable.com/en/1F7E2/https://unicodetable.com/en/1F7E2/ how do I render it in Go?
25127;you literally just print it out
25128;as long as the thing your printing too knows what the unicode is
25129;it will show correctly
25130;yeah
25131;copy the charachter
25132;üü¢
25133;"paste it in your code inside `""""`"
25134;like so
25135;it's text
25136;just copy pasted it into discord
25137;same as any other text
25138;`9:11 AM] m_adx>mike: :green_circle:`
25139;oh well
25140;discord converts it into an emoji
25141;true
25142;but still
25143;```üü¢```
25144;nonemoji
25145;also emojipedia is best üôÇ
25146;pro tip: text isn't just letters and numbers
25147;https://play.golang.org/p/C4qCFQD68w
25148;"I did this fmt.Println(""\\U0001F7E2"") and it showed a white horizontal line"
25149;that's probably now how to express raw unicode points
25150;but like i said
25151;hey bois back with another opengl issue üòî y'all mind if i ask it or is it busy in here right now
25152;you can literally copy the text
25153;```üü¢üü¢üü¢üü¢üü¢üü¢üü¢üü¢üü¢üü¢üü¢üü¢üü¢```
25154;like copy the circle itset and paste it
25155;yeah use your mouse dragselect the circle
25156;right click copy
25157;Yes I did exactly what you asked
25158;pasted it in Goland
25159;"and it automaticalled changed it to fmt.Println(""\\U0001F7E2"")"
25160;¬Ø\\_(„ÉÑ)_/¬Ø
25161;that's a goland thing then
25162;perhaps goland is the problem
25163;https://play.golang.org/p/C4qCFQD68w
25164;alright shit.
25165;cause it works perfectly fine as raw go source code
25166;one of the many reasons i avoid IDEs
25167;they add way too many layers of otherpeoplesassumptions about how I want to fucking work with my code
25168;alright I got a gist of what you guys said..I'll try other things too
25169;a couple days ago i asked about an opengl issue i had with vertexattributes
25170;turns out my issue was with the shader program itself
25171;"```go shader.Id = gl.CreateProgram() gl.AttachShader(shader.Id vertex) gl.AttachShader(shader.Id fragment) gl.BindFragDataLocation(shader.Id 0 gl.Str(""color_output""+""\\x00"")) gl.LinkProgram(shader.Id) var isLinked int32 gl.GetProgramiv(shader.Id gl.LINK_STATUS &isLinked) if isLinked != gl.TRUE { errorMessage(""Failed to link shader program."") } else { gl.UseProgram(shader.Id) CheckForError() posA := uint32(gl.GetAttribLocation(shader.Id gl.Str(""position\\x00""))) gl.EnableVertexAttribArray(posA) gl.VertexAttribPointer(posA 2 gl.FLOAT false 45 gl.PtrOffset(0)) posC := uint32(gl.GetAttribLocation(shader.Id gl.Str(""clr\\x00""))) gl.EnableVertexAttribArray(posC) gl.VertexAttribPointer(posC 3 gl.FLOAT false 45 gl.PtrOffset(24)) debugMessage(""Successfully compiled shader program."") } gl.DeleteShader(vertex) gl.DeleteShader(fragment)```"
25172;for some reason everything compiles fine in the shader
25173;no errors and everything is fine before hand
25174;yet my program wont link
25175;i've tried using opengl 3.3 core and opengl 4.1 core along with the shaders using 330 core and switching to 410 core
25176;i'm not sure if it's a golang thing or if it's a opengl thing
25177;if it's a golang things that's gonna kind of suck because the whole point of this project was to create a wrapper to easily set up my own opengl projects without the boilerplate
25178;actually ignore that because i rewrote the code in c++ with the same issue so it's definitely not a golang thing
25179;good work
25180;that's how you do it!
25181;@deezy I think its either a font/IDE/OS issue that the emoji dont render in the terminal
25182;those are all places where that could break yeah
25183;hard to be sure which. remotely at least
25184;and with me using Fira Code Retina its impossible
25185;source code pro is the superior font
25186;But does it matter when I build my code and ship it to another machine
25187;?
25188;in theory no
25189;but
25190;if it doesn't work on your dev machine
25191;it's hard to
25192;confirm it works
25193;I''ve used source code pro before I'll try it again if it has emoji support
25194;what does it do if you literally paste it in the terminal
25195;good start
25196;big brain time: use the backticks
25197;:kek:
25198;There might be some funky string conversion going on because it is a interpreted string literal
25199;!go``` b := `üü¢` fmt.Println(b)```
25200;None
25201;nah
25202;i did a playground earlier
25203;you can even shove it in doublequotes
25204;"!go```fmt.Println(""üü¢"")```"
25205;None
25206;this is 100% an issue with like
25207;the editor or fonts or os codepages or fuckin somethin
25208;I found this thing github.com/enescakir/emoji
25209;https://github.com/enescakir/emoji
25210;This shit works for everything other than green and yellow circle.
25211;Which is exactly what I need.
25212;literally those two.
25213;None
25214;why is it making those huge ass spaces
25215;to align the types
25216;it aligns
25217;yeah
25218;to make them at the same height?
25219;separate with newline if you don't want that
25220;go fmt aligns everything
25221;thats really smartass but also really annoying
25222;nobody 100% likes fmt
25223;but everybody uses it
25224;i fixed my shader issue üòÑ apparently variables have to have the same name within shaders to be shared
25225;so we don't have to argue about formatting
25226;"i thought doing in name; automatically fetched it with its location id"
25227;no body uses it. the IDE does it automatically
25228;"!go```fmt.Println(""\\U0001F7E2"")```"
25229;None
25230;its whatever you are printing to
25231;"!gofmt.Println(""\\U0001F7E2"")"
25232;```code block was not foundStatus = 0```
25233;"!gofmt.Println(""\\U0001F7E2"")"
25234;```code block was not foundStatus = 0```
25235;you have to block escape it
25236;fuck
25237;I\'ve got a question why does Marshal and Unmarshal in encoding/json doesn\'t support number as integer as well ?
25238;but it will give you the exact thing i just did
25239;what do you mean
25240;> what do you mean@Madxmike me ?
25241;oh okay
25242;because what is a number
25243;is it a float
25244;and int
25245;a double
25246;int
25247;you can definitely do that with json
25248;doesnt havent to be
25249;perhaps show your work
25250;anyways
25251;number is parsed to float64
25252;yes ^ it says that
25253;but i want and absolutely need integer
25254;json doesn't have integers
25255;it just has floats
25256;you can typecast it later
25257;json is just string
25258;make a struct with int and it'll unmarshal to int
25259;seriously ?
25260;it will not say bad because it should be float64 instead of int ?
25261;try it out
25262;it should work when you specify struct with int
25263;yeah it super duper works with ints
25264;i've done it
25265;ok thanks
25266;yeah
25267;https://github.com/therealfakemoot/pom/blob/master/poe/types.go#L57
25268;üòñ my emoji thing doesn't work jack shit
25269;as long as the JSON itself contains a value that CAN be coerced to an int
25270;i wonder if it would work on 32bit systems
25271;why would it not work on 32 bit
25272;because number has a float64 conversion and a int64 conversion
25273;in encoding/json
25274;oh yeah shit
25275;its literally just a string
25276;and `int` on a 32 bit machine is 32 bits
25277;what if i supply int64 btw ?
25278;too lazy to look into it though üòõ
25279;try it and seeeeee
25280;ok
25281;absolute worst case
25282;you just make a custom unmarshal implementation
25283;and convert it to whatever you want
25284;yeah i had to do that in a few places in that repo
25285;but only because the API exposes one field as EITHER a string OR an integer
25286;or something stupid
25287;js was a mistake
25288;did anyone come from a js background ?
25289;me
25290;js python c java rust background
25291;wanted to try out go just today
25292;how do i use switch case in go?
25293;https://tour.golang.org/flowcontrol/9
25294;https://gobyexample.com/switch
25295;@ThalusA
25296;None
25297;I can feel the pain of the ram with those many chrome tabs
25298;lol
25299;ouch
25300;love how most of the tabs have gophers on em
25301;Go forever
25302;So many gophers staring into your soul
25303;None
25304;No prob
25305;Bruh
25306;Windows moment right there
25307;13gb is used
25308;I'm dead
25309;I find that the mascot gopher is similar to Rob Pike
25310;so basically like this?```gonumber := 10switch number { case 10 { // true } case 20 { // false }}``` would this work?
25311;the face
25312;:gopher: :robpike:
25313;nope it wouldnt
25314;No inner brace
25315;why not
25316;Just a :
25317;his wife did draw the gopher so it makes sense
25318;case 10: {}
25319;it needs the :
25320;bruh what
25321;```goswitch number {case 10: // foocase 20: // bar}```
25322;```gonumber := 10switch number { case 10: { // true } case 20: { // false }}``` now would this work?
25323;Go cases don‚Äôt have braces
25324;They may be able to
25325;Idk
25326;look at my screen
25327;oh wait its inside the main braces
25328;case 10:
25329;that's it
25330;braces are allowed iirc
25331;even with multiple lines of code?
25332;but not needed for sure
25333;The case already scopes the code
25334;because in c# you always add braces unless its only one line of code then its not necessary this looks similar
25335;C# is a mistake also
25336;Along with js
25337;actually it doesn't give an error
25338;if braces are used
25339;Yeah
25340;"number := 10 switch number { case 10: { fmt.Println(""yes"") } case 20: { fmt.Println(""no"") } }number := 10 switch number { case 10: { fmt.Println(""yes"") } case 20: { fmt.Println(""no"") } }"
25341;Just clutter
25342;For no reason
25343;Don't need the braces
25344;Braces indicate scoping
25345;But so does the case
25346;Atleast visually that is
25347;If the inside of your case is longer than like 3 lines you probably need to refactor stuff anyways imo
25348;Gotta follow that happy path
25349;> C# is a mistake also@Madxmike say that to about a few tens of millions of c# devs üòâ
25350;couple of languages I think are actually mistakes
25351;Will do
25352;lol
25353;JS for ex
25354;fine not tens of millions
25355;are there a million developers in the world?
25356;definitely
25357;I surf the web
25358;and I didn't find it yet
25359;how arrays work internally
25360;:3
25361;that's cause they're called slices not arrays
25362;?go slices
25363;Slice usage and internals <https://blog.golang.org/goslicesusageandinternals>  Sgt_Tailor
25364;wait arrays are slices?
25365;have always been
25366;HAHAHAHHAHA
25367;pretty much yeah
25368;you don't fail me
25369;@deezy you failed me
25370;slices use arrays under the hood
25371;yea
25372;None
25373;so let's analysis this code together
25374;slices use arrays. Arrays are not slices
25375;"```govar fruits [5]string fruits[0] = Apple"" fruits[1] = Orange"" fruits[2] = Banana"" fruits[3] = Grape"" fruits[4] = Plum"" // Iterate over the array of strings. for i fruit := range fruits { fmt.Println(i fruit) }```"
25376;But the linked article does a great job at explaining
25377;this will create an array on stack
25378;and strings will go into heap
25379;an on the stack the fruits[0] will be linked by a pointer to the Apple on heap
25380;am I right?
25381;like this
25382;pretty much
25383;although you can never say for certain with Go since there is no explicit difference to the user
25384;there is a book reference to go
25385;?
25386;the language spec
25387;it's about 40 pages long
25388;since the `regexp` package guarantees O(n) are there currently other packages that implement features like backreferences/assertions/recursion? it would be useful if you know you're going to need them
25389;i haven't looked tbqh
25390;where I can found those 40 page spec?
25391;https://lmgtfy.com/?q=golang+language+spec
25392;https://golang.org/ref/spec
25393;üòâ
25394;but yes
25395;i googled golang language spec
25396;because that's how you find things when you know what you're lookin for
25397;HAHA
25398;yea pretty much
25399;the spec is pretty digestible
25400;yup
25401;thanks for helping
25402;:gopher:
25403;> :gopher:@oni chan this supposed to mean a hug
25404;a buffer is something that gives something else a limit or slows it down in some way?
25405;"so `speedBuffer` would be a number that slows down the speed""?"
25406;How can I iterate through all the key/values in a struct?
25407;@other no
25408;A buffer isnt for slowing things down
25409;a buffer is a limit?
25410;Not necessarily
25411;In this case a buffer is sort of an overflow protection if I understand it correctly
25412;then what would i call somethin that i divide the speed by to make it slower?
25413;Or can be to collect data (buffer data) to process in one go
25414;limit?
25415;> In this case a buffer is sort of an overflow protection if I understand it correctly@Dexti sort of ig
25416;rate limiter?
25417;A write buffer could also be so a producer can burst a bunch of writes while a consumer slowly reads from the buffer
25418;It _increases_ speed in that case
25419;modules are used to make the project independant from the gopath?
25420;How could I compare two structs like this? https://play.golang.org/p/yUia5JSZ06I'd like to be able to tell for each field in B if the field in A = field in B.So if A has any fields which are not in B those are not compared.
25421;so all of the packages are inside?
25422;only using reflect @Dexti
25423;I'm afraid
25424;Yeah it's for a test so idrc about performance.
25425;<https://golang.org/pkg/reflect/>
25426;ty
25427;trying to decipher the C code.
25428;"```goif foo == bar { val := this""} else { val := that""}```what is the proper way to do this in go? set a default and overwrite it?"
25429;You are now shadowing the var and will get an unused var error
25430;use = instead of :=
25431;these are both for assignment
25432;Yeah but the assignment is scoped
25433;"I would set a default and overwrite itval := that""if foo == bar { val = this""}"
25434;val := ‚Äúthis‚Äùif foo != bar  val = ‚Äúthat‚Äù
25435;Pseudo code without braces because mobile
25436;"val := map[bool]string{false:""this"",true:""that""}[foo ==bar] üòÆ"
25437;don't..
25438;lol
25439;```goif test.mode == POSIX { re := regexp.MustCompilePOSIX(test.pattern)} else { re := regexp.MustCompile(test.pattern)}``````gore := regexp.MustCompile(test.pattern)if test.mode == POSIX { re = regexp.MustCompilePOSIX(test.pattern)}```this second snippet has an unnecessary operation
25440;üò†
25441;good ideas only
25442;The first one doesn't work
25443;It won't compile at least
25444;i don't expect it to work i'm trying to find out how it should be written
25445;You will have to declare the var before the if
25446;Elses are ugly
25447;Get rid of them
25448;ah so this is a good example for using declaration without initialization
25449;```var re Regexpif test.mode == POSIX { re = regexp.MustCompilePOSIX(test.pattern)} else { re = regexp.MustCompile(test.pattern)}```
25450;if you must
25451;You should usually precompile those too
25452;For sure
25453;regexp is slow to compile pretty fast to run after that
25454;"```package katafunc DecodeMorse(morseCode string) string { result := MORSE_CODE[""morseCode""] return result}```Why my code dont work?"
25455;then don't use re anywhere
25456;since it's scoped
25457;you need to be more specific than why doesnt this work
25458;@taku that doesn't seem to offer much clarity to me considering what it offers
25459;@BryanC12
25460;Ermm Its returning nothing
25461;maybe there isn\'t morseCode in MORSE_CODE or the hell that is
25462;or there is and it's an empty string
25463;:kek:
25464;@taku in the general case no you can't just reinterpret types into any other types. In this specific case look at `math.Float64frombits`
25465;> maybe you can do@taku that wont work
25466;re is scoped to the if block then
25467;@Sgt_Tailor any idea why i need to do `var re regexp.Regexp` rather than `var re Regexp` (undefined Regexp)
25468;> maybe there isn\'t morseCode in MORSE_CODE or the hell that is@stdio Its a online Go learning site MORSE_CODE is a built in library
25469;Because I made a typo üòõ
25470;Regexp is defined in the regexp package
25471;> Elses are ugly> Get rid of themI see you are also a man of great taste
25472;oh good at least i'm not doing anything wrong
25473;i hope that isn't a hint to make everything branchless lmao
25474;`else` bad
25475;strange meme
25476;@Carson works https://play.golang.org/p/AvDfa4KCFwG
25477;``` } } } } } } } } }}```
25478;else indeed bad
25479;it's a stairway to heaven
25480;It‚Äôs not really a meme
25481;It‚Äôs a legit thing
25482;Else is bad
25483;Less branches less brain power into understanding code
25484;nah i see why you say it but the code above for me doesn't work without else
25485;With defer default values and early returns it‚Äôs very hard to get to a point where an else statement is necessary
25486;Early returns being idiomatic is one of my favorite Golang things
25487;btw can `regexp.Regexp` be written another way? `regexp.()Regexp` or something (i seem to remember something like this)
25488;I‚Äôve had many people tell me not to do early returns
25489;In other languages
25490;yeah in python there's a lot of confusion about happy paths and guard clauses
25491;DRY cultists
25492;How can you possibly know the execution path if you have 5 returns ????
25493;They see two or three return statements in the same function and go into a ‚ÄúDO NOT REPEAT YOURSELF‚Äù chant
25494;Well maybe because you don‚Äôt have 17 nests of if else
25495;https://medium.com/@matryer/lineofsightincode186dd7cdea88
25496;@beepsandboops in go
25497;I‚Äôve seen things that a man should never see. Boolean return statements in coldfusion with 6 or 7 logical operators
25498;But of course there are some times else is useful and needed
25499;oh cool an actual article about the mystical unicorn known as happy paths
25500;Be careful
25501;It will ruin every code base for you
25502;Forever
25503;afaik every code base seems ruined after you improve as a programmer anyway
25504;True
25505;Basic idea is to have as few nested things as possible
25506;`if input == Y {}` üò©
25507;And the further down the function you go the closer you are to a valid return
25508;And all invalid points have been dealt with inline
25509;yeah i'm already familiar with this
25510;It‚Äôs for our viewers at home
25511;thanks for the link though üòÑ
25512;https://github.com/ten24/slatwall/blob/master/model/entity/Collection.cfc#L757 Here an open source example of what not to do
25513;I‚Äôm not clicking this
25514;Bruh
25515;so... is it possible to rewrite `pkg.Pointer` to be coser to `pkg.Pointer`? i seem to remember something about this with method receivers being possible
25516;Uhh no?
25517;pkg.Pointer is the type
25518;qualified name?
25519;I forget the specific term
25520;I‚Äôm really not sure what you want though
25521;pkg.Pointer is equivalent syntaxtically to int
25522;The pkg part is part of the type name
25523;is there something like an exit func?
25524;only for testing
25525;For the whole program?
25526;it‚Äôs in os
25527;os.Exit iirc
25528;If you are testing then whatever testing.T provides
25529;```gotype Foo struct { Bar int}func (f Foo) with() {}func (f Foo) without() {}...foo = Foo{}foo.with()(&foo).with()foo.without()(&foo).without()```
25530;iirc there was something like this where i could access the method subset
25531;so without() wouldn't be accessible
25532;`T` has a different method set than `T`
25533;`T` contains both `T` and `T`
25534;yeah but i can't remember how to do it
25535;use the pointer and you'll have the full set of methods
25536;it was slight esoteric
25537;i have both methods with this code too
25538;won't `(T).foo()` automatically ref to `(T).foo()`?
25539;in cases where it's possible to get a ref that is
25540;It‚Äôs only auto dereference
25541;nah there's auto reference as well but only when the value is addressable typically when it's a local variable
25542;Oh okay
25543;that's why the pattern is to do `var b bytes.Buffer` and then use pointer methods on `b` directly
25544;`b := bytes.Buffer{}` gang
25545;cringe
25546;i'm definitely var gang
25547;so im trying to build https://github.com/jvatic/gojababel.git
25548;https://i.kawaii.sh/IEYAm67.png
25549;i get this constantly
25550;:KM_Dorime:
25551;@zephyrtronium auto reference? auto dereference? i'm lost
25552;dont understand how it build originally
25553;oh lol underscore by accident i think
25554;well `Asset` isn't in the example code
25555;removing it works but i didnt put it there
25556;:stare:
25557;its _Asset
25558;@deezy and btw i mean like the actual library im forking it to change a few things
25559;https://i.kawaii.sh/DcAdHL4.png
25560;that's pretty far off the grid then
25561;what is `_Asset`
25562;its not defined but its in there
25563;some bindata thing?
25564;google doesnt tell anything
25565;oh Asset is a bindata thing
25566;"How to pass byte array to a cgo declaration? i wanted to know how it expecting pass for extern function```go//#include <stdlib.h>//extern void set_variable(void context int32_t[] R);import C""//export set_variablefunc set_variable(context unsafe.Pointer R []byte) { /// body goes here}```"
25567;most likely unsafe.Pointer(&b[0]) ü§î
25568;@Riku check the link I gave to k6
25569;it has babel as well
25570;better than goja?
25571;nah goja is used in k6
25572;it just looks like a testing tool
25573;it is
25574;the wonder of open source projects when you're figuring something out there's always code to take a look at to understand it
25575;"i dont understand how this works `import http from k6/http"";`"
25576;is k6/http a go module?
25577;or is it written in js and preincluded?
25578;:stare:
25579;I mean I was talking about https://github.com/loadimpact/k6/blob/master/js/compiler/compiler.go
25580;It's a babel transformer too
25581;ah
25582;it uses a modified version of goja or just goja?
25583;just goja
25584;it loads the babel js
25585;how tf did they get imports native then
25586;:stare:
25587;what is k6/http and how does it pass as a root module
25588;"```gopackage mainvar number int = 10var str string = this is a string""func main() { dosomething(&number)}func dosomething(x int) { x += 5}``` is there something wrong with this?"
25589;probably a require
25590;```not enough arguments in call to method expression (Foo).without have () want (Foo)``````gotype Foo struct{}func (f Foo) with() {}func (f Foo) without() {}...(Foo).without()```what's going on here? this is probably what i was remembering from earlier but i've completely forgotten the details
25591;You‚Äôre trying to call a method on a type without an instance of that type
25592;yes but why is it asking for (Foo)
25593;Because you‚Äôre specifying `(Foo)`
25594;`(Foo).without(Foo)` ??
25595;"You‚Äôd pass it a `(Foo)` instance; methods can be called by using the dot notation on the type and passing the receiver as the first parameter but that‚Äôs really almost never seen"
25596;how does that look? that's what i'm thinking of
25597;it's not about not needing to do it
25598;it's scratching an itch
25599;i knew about this a long time ago
25600;Take a `(Foo)` instance put its name in the parentheses üòÖ
25601;```gofoo := Foo{}foo.without()(Foo).without(&foo)```so these are equivalent?
25602;Yes
25603;https://golang.org/ref/spec#Selectors
25604;That doesn't really apply here `x` isn't a primary expression when it is a type
25605;https://golang.org/ref/spec#Method_expressions
25606;> If M is in the method set of type T T.M is a function that is callable as a regular function with the same arguments as M prefixed by an additional argument that is the receiver of the method.
25607;Oh meant to say read the next like 3 sections lol
25608;when i install a package into a module where does it put the package?
25609;it literally installs 3 lines of code and suddenly i have the package
25610;it installs the `require` and 2 lines in my go.sum but where is the package?!
25611;It‚Äôs in the mod cache and in your go path iirc
25612;so it put it in my gopath?
25613;If you go look it should be there
25614;what if i give the project(module) to another person? do they need to install those packages or does it install those on compile automatically?
25615;Like you give them the source?
25616;yeah
25617;and they run it
25618;It will install whatever is in your .mod
25619;Install is the wrong word here
25620;so thats what modules are for
25621;Yes it‚Äôs a dependency management tool
25622;It will get everything in your .mod is what I should say
25623;ooohhhhhhh
25624;huge mindfuck
25625;Installing a module is a specific thing
25626;So have to clarify
25627;this is so mind breaking
25628;lol
25629;Have you used any dependency management tools before
25630;is there a builtin way to add a noop closer to a struct
25631;```gotype Foo struct { io.NoopCloser}```
25632;Make a close method that does nothing?
25633;yeah right I would need generics to make a generalized nopcloser
25634;Why would you need generics?
25635;You could just embed any type that has a `Close` method
25636;that is what I was asking above but I was thinking that couldn't work
25637;https://golang.org/src/io/ioutil/ioutil.go?s=3440:3481#L105
25638;https://play.golang.org/p/t7vf1BnkUHj
25639;seems to work though
25640;This takes the route of wrapping the reader but you could also feasibly embed
25641;Yeah that‚Äôs what I meant
25642;cool thanks
25643;Anyone have clue to make it recognize the space between HEY and JUDE
25644;kinda tough since you're delimiter is also a valid character
25645;yeah how did they do it on telegraphs
25646;it's just triplets right?
25647;yeah split every 3 characters
25648;without spaces as delimiters
25649;oh wait nvm morse is variable length
25650;oh no
25651;how DID they do this over telegraph :thonk:
25652;timing
25653;aha
25654;a space is three silent dots
25655;so
25656;before splitting with `strings.Fields` replace all sequences of 3 spaces with a different character
25657;and parse that character as a space in the output
25658;ezpz
25659;there we go
25660;we fixed morse code
25661;time to get everyone back on the wagon
25662;Oh nice @Doad It works !
25663;"```package kataimport strings""func DecodeMorse(morseCode string) string { var result x y z string filtered := strings.ReplaceAll(morseCode    SPACE69 ) separated := strings.Split(filtered  ) words := len(separated) for i := 0 ; i < words ; i++ { if separated[i] == SPACE69 { x =   } else { z = separated[i] x = MORSE_CODE[z] } y += x result = y } return result}```"
25664;why does it bully me ?
25665;because that's not how it works
25666;goroutines don't return anything
25667;so you can't assign them to a name
25668;mhhhhh
25669;sure
25670;mb
25671;i'm dumb
25672;it's okay
25673;goroutines are confusing at first
25674;i also expected to be able to treat them like regular functions
25675;but it says missing return at end of function
25676;right
25677;thats because you defined a function with a return value
25678;and then didn't return anything
25679;oh thanks
25680;so you either have to return something or remove the return value from the signature
25681;done that
25682;None
25683;is it well done ? (the makeAsyncRequest) [does it seems to be good ?]
25684;i'd rather not read it in a screenshot
25685;```gofunc makeAsyncRequest(wg sync.WaitGroup snowflake string resolvedSnowflakes []SnowflakeInfo resolvedUsers []UserInfo) { defer wg.Done() requestData := makeRequest(snowflake) if requestData.RequestType == User { resolvedUsers = append(resolvedUsers requestData.UserInfo) } else if requestData.RequestType == Snowflake { resolvedSnowflakes = append(resolvedSnowflakes requestData.SnowflakeInfo) }}```
25686;my eyes aren't so good these days
25687;x3 ok
25688;uhhh does it work?
25689;i don't really know how i can try it out
25690;wait
25691;"is there a better way to query a DB than this?```govar names []stringrows err := db.Query(""select  from queue"")if err != nil { panic(err)}defer rows.Close()for rows.Next() { err := rows.Scan(&name &explanation &uuid &good &ip &image) if err != nil { panic(err) } fmt.Println(name) names = append(names name)}```"
25692;this feels way too unweildy just to get a slice of rows compared to what im used to in other languages
25693;```gofunc Something() { ...}func main() { Something(config)}```is this sort of pattern common when there's only one exposed function?
25694;why? you'd end up looping over them at some point anyways
25695;yes actually
25696;`SELECT` the `names`column only
25697;"because the next step is ```go c.JSON(200 gin.H{ message"": names, })```"
25698;so i never loop over it
25699;could try an orm of sorts
25700;if you don't need the rest then don't grab the rest
25701;i don't follow
25702;how about
25703;sqlc
25704;:kkk_clueless:
25705;are you saying your query is returning more results than you need?
25706;chant with me
25707;no I want to get every row in a slice
25708;okay
25709;sqlc sqlc sqlc sqlc
25710;but it seems like the only way to do that is with a loop which is way more complicated than it is in the other languages im used to
25711;sqlc
25712;sqlc sqlc sqlc sqlc
25713;cmon deezy you know you wanna say it
25714;sqlx.
25715;https://github.com/kyleconroy/sqlc
25716;again
25717;@rachel yeah other languages do it in a loop for you
25718;you are getting all these results
25719;abstractions hide what's going on underneath
25720;and you want to do something to them
25721;so you are going to loop over them eventually
25722;even in python
25723;no?
25724;heres the rust version that im rewriting in go
25725;"```rust let people: Vec<AdminQueuePerson> = client .query(""SELECT  FROM queue &[]) .context(""Couldn\'t get queue"")? .into_iter() .map(|n| n.into()) .collect(); Ok(Json(serde_json::json!({ people"": people })))```"
25726;abstractions.
25727;they hide what's going on underneath
25728;that's literally why these methods exist
25729;``` .into_iter() .map(|n| n.into())```
25730;those are loops
25731;that's literally how Rust's iterator works
25732;query() is probably using a loop
25733;collect() maybe?
25734;it's all loops comrade
25735;yes but that loop is two lines instead of 8
25736;and?
25737;so?
25738;lines are free
25739;using lines as a quality measure is wrong
25740;yeah but they make stuff slower to write and harder to read
25741;sounds like i should use a sql library
25742;then write a function to abstract it
25743;okay ¬Ø\\_(„ÉÑ)_/¬Ø
25744;welcome to go
25745;^
25746;lmao
25747;if this is not trivial then you might as well trash go for being a bad language because durr err nil bad
25748;there are abstractions
25749;go as a language minimizes them
25750;really this is not the language for you if that's an issue
25751;there's pletny of sql helper libraries of all sorts of persuasions
25752;whats the best sql lib?
25753;:feelsfuckoffman:
25754;lmao
25755;its not hard code to write but its annoying having to write the same boilerplate every time i query my DB
25756;sure that's why you write a wrapper func
25757;find common code extract it
25758;the issue is im brand new to go so i dont understand enough about interfaces to write that yet
25759;SQLC SQLC SQLC SQLC SQLC SQLC
25760;swear im a broken record here
25761;it's okay
25762;you're learning
25763;you probably don't even need interfaces
25764;```gofunc QueryStrings(db db.Whatever query string) ([]string error)```
25765;¬Ø\\_(„ÉÑ)_/¬Ø
25766;im planning on using structs for it tho
25767;okay then replace []string with []Whatever
25768;and return that
25769;ooh thank you!
25770;you can write as many of these functions as you want
25771;and then you never have to look at that loop ever again
25772;and guess what
25773;you just did what map_iter() did
25774;bee checkout sqlc
25775;you wrote a loop and hid it inside a function
25776;üò¢
25777;that's the secret to all programming
25778;lmao ok @Str≈ìm
25779;write a loop hide it inside a function
25780;it's allllllll loops
25781;embrace them
25782;loops are your friend
25783;<https://conroy.org/writingapiclientsingo>> You may have noticed that our client struct isn't exported. Instead of exporting your concrete type export an interfaceis `DocExportResult` the interface? it's a struct... i'm confused
25784;yeah
25785;scroll down
25786;None
25787;`client` is unexported
25788;`client` is a struct
25789;`Client` is an interface
25790;`DocExportResult` is not what that section is talking about
25791;I'm looking into using Once.Do but I'm not following the example in the documentation:
25792;why do we have a done channel? I tried removing it and then nothing prints.
25793;probably to block the program so the goroutines can work
25794;oh because the main program returns before the goroutine?
25795;ok
25796;go won't wait
25797;yeah
25798;unless you stop it with synchronization tools main() will just terminate if it reaches the end
25799;you could also use a waitgroup
25800;you could also call `once.Do(onceBody)` outside the loop
25801;future Do calls after the first one will block until that first one returns
25802;```foo T barbaz ```what do i need to search for to learn more about the behaviour where T applies to what follows
25803;probably the spec
25804;i mean none of that is go syntax exactly
25805;not as a whole
25806;i'm on the spec i don't know what to look for...
25807;i mean
25808;context?
25809;is it inside a struct? or are you declaring variables in main?
25810;i've seen it in const via iota and i think it applies in structs too
25811;okay then your example isn't nearly enough to express that
25812;type T is assumed
25813;cause it's not using the const keyword or iota. anyways
25814;you could start with iota
25815;and also look at the section for const
25816;those might be good places to start
25817;crazy as it sounds
25818;this really isn't very helpful to me
25819;thanks though
25820;https://golang.org/ref/spec#Struct_types
25821;and if your question is about the context of structs
25822;the section on structs may be illuminating
25823;https://golang.org/ref/spec#Iota
25824;heres the info for iota
25825;i guess the appropriate description is expression substitution
25826;```gotype one struct { a b c int d, e string}type sometype runeconst ( two sometype a' three four)````three` and `four` are substituted with `sometype a'`is there anywhere else this behaviour occurs?
25827;i think you can do it with var
25828;```govar ( a string b c)```
25829;I think
25830;but it's a relatively uncommon construct
25831;yeah that's what i was looking for
25832;you'll basically only see it for defining const enums
25833;what about `type (...)` ?
25834;not sure
25835;if that's a builtin function i've never used it
25836;nah it's block `type` definition
25837;or do you mean `type Something struct {}`
25838;```gotype ( a int b string)```
25839;oh duh
25840;yeah that works too
25841;it's all the same syntax pattern
25842;yeah it looks like a func when i write it like above my bad
25843;```var/const/type ( name type name name)```
25844;```func ( ...)```
25845;/s
25846;yeah same rules actually
25847;i think
25848;https://play.golang.org/p/RWESuykJycpit doesn't seem to work
25849;only seems to work in const
25850;from what i can tell
25851;it does work you just can't elide the types
25852;that's what the discussion was about though
25853;not about the block syntax
25854;sure then
25855;is there a reason you can't do `:=` in the global scope?
25856;because := may redefine variables in the same scope. Allowing that in the global scope would be catastrophic üòõ
25857;Apart from that I don't see anything in the spec
25858;https://play.golang.org/p/nypUEVEyKXlit's caught if you do this
25859;Yes because the long var declaration doesn't allow it
25860;```var test int = 123test banaan := 456 3```
25861;that would be bad
25862;as it would redefine test
25863;Can I clear my $GOPATH if I want a completely clear environment to reinstall my go tools?
25864;Sure
25865;I'm p sure the reason is just consistency
25866;everything in the global scope has a keyword preceding the identifier
25867;that is func type const var package etc
25868;:= doesn't have any
25869;https://play.golang.org/p/qCVpo7c09M which of these is more conventional
25870;https://play.golang.org/p/LBz2PQ0OpZP
25871;this
25872;noted
25873;stuff3 also depends if you wanna declare it earlier but only maybe assign it something
25874;of those two what would make you choose global vs main
25875;context
25876;why would i want something global if i only want it in one function
25877;unless its something that never changes like regex id compile it globally
25878;yeah ok that makes sense
25879;or some global rgistry like sql.Driver
25880;but either way non globals are easier to maintain I suppose
25881;do you guys tend to see more `var v = T{value}` or `v := T{value}`?
25882;Actually. The spec just doesn't allow it
25883;which
25884;https://golang.org/ref/spec#Declarations_and_scope
25885;doesnt allo wwhat
25886;the short variable declaration outside a function
25887;I was clarifying the rationale behind why the spec doesn't allow it
25888;Because ShortVarDecl isn't a VarDecl. `ShortVarDecl` is a Statement which is only allowed within a function body
25889;Yeah your clarification was nice. Just wanted to know where in the spec it doesn't allow it
25890;Was more as a note to myself
25891;`(?i)foo (?i:bar) baz``(?i:foo (?i:bar) baz)`just out of curiosity can anyone see a pro or con to using either of these syntaxes over the other?
25892;syntax for what?
25893;i have no idea what that is
25894;i have no idea what that is
25895;lol sync
25896;lmao
25897;that's inline flag for regex
25898;case insensitive
25899;can you please give it in Go
25900;not regex
25901;regex exists in Go
25902;oh i see what you mean
25903;idk whichever you prefer lol
25904;I just do prefix only
25905;`(?mU)regex go here`
25906;oh its literally regex
25907;yeah that works since match 0 is the whole capture normally
25908;thought we were still on about Go
25909;i guess prefix is slightly more readable
25910;so uh @cats the goja_nodejs module supports `require` and i wanna register a native module for require but what do i do in the function
25911;it gives me an object and the runtime which seems fine but doing obj.set doesnt change anything requiring it just returns empty object
25912;I'm not your local goja expert :P
25913;https://i.kawaii.sh/GgHeHku.png
25914;:BCS_PepeLaugh: but you the only person that did it that i know
25915;can always just ask it here
25916;the fact i got this far off the tiny documentation and source code is already making me suprised
25917;"```gofunc Loader(runtime goja.Runtime loop eventloop.EventLoop module goja.Object) { o := module.Get(""exports"").(goja.Object) o.Set(""On onFunc(runtime loop))}```"
25918;ignore the eventloop param
25919;:stare: yeah so my rm object is is a `require.Registry`
25920;it has a registernativemodule param which accpets a func with a runtime and object
25921;so i assumed the object is what require returns for that param so i did obj.Set
25922;but it doesnt set anything
25923;:stare:
25924;yes
25925;see my example
25926;"o := module.Get(""exports"").(goja.Object)"
25927;thats different tho
25928;then set it on that
25929;:P
25930;nonono this is setting exports
25931;remove that one param
25932;:stare:
25933;and that's it
25934;which param
25935;eventloop
25936;"this is making it so a user can optionally require like `require(""something"")`"
25937;yes
25938;:stare: i know how to set a global
25939;and i also use eventloop
25940;do i need to set something beforehand to `module.Get`
25941;Nope
25942;"All you need to do is o := module.Get(""exports"")..."
25943;then set your variables on that
25944;don't overwrite exports
25945;and make sure to call require.RegisterNativeModule on it
25946;ah
25947;lemme see
25948;yeah that is in a registernativemodule block
25949;"```GO rm.RegisterNativeModule(""test func(runt goja.Runtime obj goja.Object) { o := runt.Get(""exports"").(goja.Object) o.Set(""test func() string { return lmao"" }) })```"
25950;like this?
25951;i thought `obj` is that one export
25952;:5_bugcatstare:
25953;that gets imported
25954;interesting
25955;https://i.kawaii.sh/~ppZLi3.png
25956;yeah
25957;"obj.Get(""exports"")"
25958;huh
25959;inside the nativemodule register?
25960;doesnt seem right but lemme try
25961;yeah i cant convert it in any way to a goja object
25962;:stare:
25963;it throws errors
25964;whatever `exports` is its nil
25965;"```gofor i names := 0 p.SubexpNames(); i < len(names); i++ { fmt.Println(i names[i])}```is it ok to scope `names` like that usually or is there another recommended method?"
25966;e.g. declare before the loop
25967;works fine
25968;this is really a vscode problem but I'm sure I'm not the only one here who uses it  is there a way to stop VSCode from trying to get my ssh password for github every five seconds while I'm trying to type a fricken import URL?
25969;I literally cannot type a URL without it prompting me nearly every keystroke
25970;1) dont pull with ssh2) use a keyring
25971;I guess ssh password is the wrong term since I'm 80% sure it's going over https
25972;hm no the prompt is from openssh
25973;@Str≈ìm how do I stop it from pulling via ssh? I'm not doing this manually
25974;this is me just typing a url in an `import` statement
25975;set your gitconfig to pull with https
25976;not sure you want that though
25977;so just use a keyring
25978;makes life easier
25979;as in gnomekeyring or something? I really don't like having to do that but I might have to
25980;I just want it to fail authentication if it can't find it or something
25981;> I really don't like having to dowhy not? works pretty well imo
25982;because I already have a password manager for that purpose... I don't want to have passwords littered in more places. I recognize they are slightly different but ¬Ø\\_(„ÉÑ)_/¬Ø
25983;it just feels like a huge hack for this kind of thing
25984;identity management and authorization is one of the greatest of the Quixotic windmills in our profession comrade.
25985;Many have taken a turn at them and the giants are yet to be slain
25986;is there a way to send a request using alpn with go?
25987;interesting
25988;never heard of alpn before
25989;https://github.com/jefferai/golangalpnexample
25990;there's this
25991;https://github.com/golang/go/issues/6736 and this
25992;it seems it only works with a local server though
25993;Helloooo I know near nothing of go other than hearing some talks about how go makes concurrency simple and how it's a very powerful feature
25994;can anyone shill go to me? I am wondering about specific language features that make it interesting and different from other languages
25995;both are correct statements
25996;?go concurrency
25997;Kavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_TailorUnderstanding channels <https://www.youtube.com/watch?v=KBZlN0izeiY>  Sgt_TailorRob Pike  Concurrency Is Not Parallelism <https://www.youtube.com/watch?v=cN_DpYBzKso>  Skippy
25998;here's some good talks
25999;I have a slight understanding of gorutines
26000;concurrency is built into primitives of the language
26001;which seems to be the main feature
26002;they are first class features
26003;yeah
26004;goroutines and channels yeah
26005;concurrency isn\'t some third party library you import that does stuff
26006;concurrency is baked directly into the language
26007;with goroutines and channels
26008;and sync.Atomic
26009;funny question if you took out goroutines channels and sync.Atomic what language would go be most similar to?
26010;erlang or elixir maybe?
26011;other languages can support similar features as well but not really part of the language itself
26012;but rather as some third party package
26013;like there are crates for various channels in Rust
26014;> erlang or elixir maybe?so Go supports a good amount of functional programming?
26015;i think the struct composition thing is pretty novel so i don't know if there's a direct comparison
26016;oh if you took them out
26017;I read that wrong
26018;id say C
26019;functional programming in go? don't count on it :^(
26020;eh go is mixed on functional programming
26021;yeah probably C
26022;because no generics
26023;C with a GC
26024;there is no general purpose `map()`
26025;C for 201X
26026;in go
26027;i heard they are gonna put generics in Go
26028;maybe in go 2 it'll be better
26029;because of the type system
26030;:Hype:
26031;yeah they most likely will be
26032;and it will open some doors
26033;i'm SO hype for map/reduce/filter
26034;do people use OOP in Go?
26035;Go has OOP constructs yes
26036;just in a way you might not be used to
26037;well OOP is just a combination of various paradigms/capabilities
26038;Go allows for encapulsation polymorphism um
26039;composition? is that an OOP principle?
26040;inheritance kinda
26041;it doesn't have traditional inheritance
26042;inheritance is the third one
26043;is the the thing
26044;composition not really inheritence
26045;but people find it being important being debatable :)
26046;ye
26047;tldr it can do some stuff
26048;traditional inheritance is super janky anyway
26049;yup
26050;go is infinitely better
26051;inheritance is too spoopy
26052;I think of OOP as Java enterprise code where you have a bunch of abstract classes everywhere and everything has getters and setters and funny design patterns like factories. It makes my stomach churn a little bit.
26053;that's one manifestation of oop sure
26054;it's not always so terrible
26055;no inheritance mostly good
26056;but also it can be better üôÉ
26057;i think my answer to the original question of which popular language go is most similar to would be java but for none of the reasons that matter
26058;so if you say go is like C i take it that OOP is not something heavily done in Go
26059;@zephyrtronium for what reasons then?
26060;> i take it that OOP is not something heavily done in Gonot as you would expect from java
26061;the approach to encapsulation and polymorphism
26062;if you take java's type system remove inheritance and add embedding you mostly get go's type system
26063;@interwebs take the dive and see
26064;?go tour
26065;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
26066;none of the reasons that matter is the wrong phrase there more like none of the reasons people think about when they think of java
26067;also type inference is really good
26068;java with type inference would be a much more usable language
26069;c with type inference would be a ~~much~~ more usable language
26070;> java with type inference would be a much more usable language@zephyrtronium did you mean: kotlin
26071;idk i haven't looked at kotlin üôÇ
26072;also iirc java now has `var`
26073;with type inference
26074;also i should mention that remove inheritance is much more pervasive than just getting rid of the keyword because embedding is very much not inheritance
26075;that's the reason we don't have AbstractInterfaceFactoryAdaptor
26076;well one of several reasons
26077;more relevant is that we don't need it üôÇ
26078;how do i do a reflection likei pass a struct into a function this struct has a name. i need to do `name.name`
26079;and use whatever object that is
26080;:KM_Dorime:
26081;so i pass a struct in i need the struct object named after the struct
26082;wait im stupid nvm
26083;aye thanks for shilling go to me friends i got a good amount of things to look into nownot sure if offtopic for the channel but im a frontend/React dev and I got the opportunity to work in Go so I'm gauging if it's something for me
26084;if anyone has experience by doing that kind of switch in career pls lmk so i can bug u with questions
26085;do you wanna jump away from frontend?
26086;I used to now I got so deeply into frontend that I am not sure if I ended up liking it or if i just have stockholm syndrome
26087;"what does `cannot assign to object.Get(""exports"").(goja.Object) (comma ok expression of type goja.Object)compiler`"
26088;mean
26089;:stare:
26090;show your code
26091;"```GOobject.Get(""exports"").(goja.Object) = runtime.ToValue(element).ToObject(runtime)```"
26092;that doesnt make any sense
26093;its one line just looks like that
26094;gimme a sec to process
26095;yea that doesnt make any sense
26096;the LHS should be a RHS
26097;"`(object.Get(""exports"").(goja.Object))` = this would maybe"
26098;tried that too
26099;still weird
26100;oh actually that did work
26101;the pointer on the begining
26102;im doing JS bindings in Go
26103;thats why its confusing
26104;:stare:
26105;not really a standard go program
26106;this thing is literally running a js vm
26107;"`(object.Get(""exports"").(goja.Object)) = (runtime.ToValue(element).ToObject(runtime))`"
26108;this works
26109;that worked i for sure thought it would crash
26110;:stare:
26111;the first one didn't make any sense indeed how would you assign to something that a func is returning
26112;@_diamondburned_ i used to love sully mike
26113;now i hate it
26114;:robpike:
26115;#robpike
26116;:stare: i overuse it lmao
26117;i need to stop
26118;while the other one is actually assigning to the thing pointed by goja.Object anyway you could clean that up to be better readable üòÑ
26119;https://i.kawaii.sh/_ajd4Us.png
26120;i think its fine since its a bit self explanatory what its doing
26121;:5_bugcatstare:
26122;hey im really confused / got a question
26123;im pretty much completely new to go and just installed it and the installer is doing things i dont quite understand
26124;the site says it should put the c:\\Go\\bin directory in the PATH environment variable
26125;but it does not and instead adds
26126;which does not exist
26127;am i missing something incredibly obvious?
26128;"For windows install instructions `The installer should put the c:\\Go\\bin directory in your PATH environment variable`would this be the same location as `set PATH=%PATH%;C:Hugo\\bin ` ?"
26129;i would assume so yes
26130;well minus the Hugo
26131;i just joined the slack ill see if people there know maybe
26132;Hopefully you're talking about https://gohugo.io/ and not the meeting software üòÖ
26133;Ok I think I got it
26134;Anyone have experience using mongodb
26135;Do I need to initialize a new connection each time im querying or storing a new document ?
26136;depends i suppose
26137;how long do you go between queries
26138;it's apart of a discordbot
26139;do you have control over the mongodb server configuration e.g. KeepAlive etc
26140;lots of factors
26141;so really depending on the user
26142;yeah
26143;hmm
26144;but like
26145;think about it
26146;does it really make sense to log into the database completely from scratch every time you want to do something?
26147;imagine if you had to enter your lock screen password every time you wanted to click your mouse or type a letter
26148;you'd probably waste most of your time entering your password
26149;I see well it only hits the db when users want to add something
26150;or remove
26151;so it's not constant
26152;that's fine
26153;i guess maybe 12 time a day
26154;it's not a lot
26155;shockingly database designers have accounted for this behavior
26156;Hello golangers I would like some help from someone who knows how to work with mysql and the data to display on web pages if someone can help me with that please Dm me or @ me
26157;you can also tune your mongo configuration
26158;to increase timeouts keepalives etc etc
26159;"```golangpackage Databaseimport ( context"" fmt"" go.mongodb.org/mongodriver/bson"" go.mongodb.org/mongodriver/mongo"" go.mongodb.org/mongodriver/mongo/options"" log"" time"")var client mongo.Clientfunc Initialize(){ client err := mongo.NewClient(options.Client().ApplyURI(""mongodb://localhost:27017"")) if err != nil { log.Println(err) } ctx _ := context.WithTimeout(context.Background()  10time.Second) err = client.Connect(ctx) if err != nil { log.Println(err) } log.Println(""Mongo db is connected"")}func AddNewItem(server string  item string){ ctx _ := context.WithTimeout(context.Background()  10time.Second) clientDatabase := client.Database(""users"") clients := clientDatabase.Collection(""items"") clientsResults  err := clients.InsertOne(ctx  bson.D{ {Key: fmt.Sprintf(""%s  server)  Value: fmt.Sprintf(""%s  item)}, }) if err != nil { log.Println(err) } log.Println(clientsResults.InsertedID)}```"
26160;This was my approach but getting smacked with invalid memory address or nil pointer deference for this like
26161;"`clientDatabase := client.Database(""users"")`"
26162;there's a few problems here
26163;here's what i'd do
26164;"```gofunc main() { client err := mongo.NewClient(options.Client().ApplyURI(""mongodb://localhost:27017"")) err := AddNewItem(c butts"") switch err.(type) { case mong.SomeSortOferror: // handle this specific failure scenario } }func AddNewItem(c mong.Client item string) error { // use the client to do your query if err != nil { // something went wrong. return to main so you can check what error happened return err }}```"
26165;basically
26166;Issue is AddNewItem is being called by another file
26167;let me add that in here
26168;one second
26169;That's fine. You still want to return the error
26170;and whatever calls it either address the error ( recreate the connection ) or it passes the error back up the chain to somewhere that CAN handle it
26171;"```golangfunc commandHanlder(s discordgo.Session  m discordgo.MessageCreate){ switch processCommand(m.Content) { case !add"": s.ChannelMessageSend(m.ChannelID  fmt.Sprintf(""Adding Sku %s  strings.Split(m.Content   )[1])) Database.AddSku(getGuildName(s  m.GuildID)  strings.Split(m.Content   )[1]) case !remove"": s.ChannelMessageSend(m.ChannelID  fmt.Sprintf(""Removing Sku %s  strings.Split(m.Content   )[1])) case !help"": s.ChannelMessageSend(m.ChannelID  Information to assist you will be shown here"") }}```"
26172;Confused how `main()` is being used here to pass in the mongo client ?
26173;oooo
26174;üò¶
26175;i think i get it
26176;"```client err := mongo.NewClient(options.Client().ApplyURI(""mongodb://localhost:27017""))// check your errorserr := AddNewItem(client butts"")```"
26177;that's all
26178;https://github.com/golang/go/blob/758ac371ab930734053ed226ac62681e62ab8eea/src/net/http/header.go#L20
26179;what does the canonical form mean for the headers?
26180;alphabetical?
26181;canonical just means this is the offical \'true\ version
26182;does it mean the the order i added them in?
26183;no clue
26184;try it and see
26185;those are exported fields
26186;could i just fmt.Println it?
26187;probably
26188;try it and see üôÉ
26189;it just printed in alphabetical order
26190;is there a better way to empty a string than `configFile = `? i\'m getting ```ineffectual assignment to `configFile```` from golint
26191;i'm not really sure how you could simplify that
26192;It is bad practice to set variables that aren\'t used laterand that\'s what the warning is about.
26193;So I guess that golint error is because configFile is not used after being reset
26194;yes go will complain about unused variables
26195;usually it's a compile error for an unused variable though this seems to be because it's being reset to its default value but then never used again.
26196;right because you are using it
26197;to assign a new value to it
26198;which is equally as useless as defining it and not using it
26199;it's still not actually being used.
26200;also do you guys have any idea why my proxy won't work with requests to https urls?
26201;dunno what's the error
26202;Gonna need a bit more info than that
26203;errors are pretty much always where you want to start
26204;ERR_TUNNEL_CONNECTION_FAILED
26205;but requests with http work just fine
26206;Is the proxy written in Go?
26207;yeah you've provided so little information to work with
26208;yea
26209;the proxy is written in go
26210;Does the proxy have logs?
26211;yea
26212;Does the proxy log have an error in it?
26213;am i supposed to use an https for the proxy if the request url is https?
26214;nope
26215;the log doesn't show an error
26216;is it a SOCKS proxy or an HTTP proxy
26217;http
26218;it seems like the req doesnt even go to the proxy
26219;"```$ cat main.gopackage mainimport ( github.com/elazarl/goproxy"" log"" net/http"")func main() { proxy := goproxy.NewProxyHttpServer() proxy.Verbose = true log.Fatal(http.ListenAndServe("":8080 proxy))}```This works OK for me from Chrome HTTP and HTTPS"
26220;Can you increase the logging in your proxy?
26221;"```func main() { fmt.Println(""Starting reverse proxy"") director := func(req http.Request) { //req.Header.Add(""XForwardedHost req.Host) //req.Header.Add(""XOriginHost origin.Host) //req.URL.Scheme = http"" //req.URL.Host = origin.Host } proxy := &httputil.ReverseProxy{Director: director} proxy.Transport = &transport{http.DefaultTransport} http.HandleFunc(""/ func(w http.ResponseWriter r http.Request) { fmt.Println(""New connection"") proxy.ServeHTTP(w r) }) log.Fatal(http.ListenAndServe("":9000 nil)) log.Fatal(http.ListenAndServeTLS("":9000 server.crt server.key nil))}```"
26222;that's what i was using
26223;i'll try yours real quick
26224;yea
26225;your's works
26226;idk why i didnt try a lib
26227;thanks!
26228;That's the example straight from the libs github page üôÇ
26229;ü§¶\u200d‚ôÇÔ∏è
26230;thanky uo so much
26231;In yours http.ListenAndServe() is gonna block so it'll never hit the last line. The ListenAndServeTLS() wouldn't work anyway as it's trying to use the same port
26232;You'd also have to add the certs in to your cert store as a trusted certificate authority otherwise you'll get warnings for every site and would not be able to visit sites using HSTS
26233;Also unless you needed the traffic to be encrypted between you and the proxy (EG it's running on a remote machine) I wouldn't bother with HTTPS anyway
26234;thanks i just need to forward the request by using another library to send the request since it has better tls support
26235;https://github.com/hoanhan101/ultimatego
26236;Really cool resource
26237;"How to convert `[]byte` to int32 ?I did like this ```govar setdata []bytefunc get_var() int32 { fmt.Println(""set data setdata) // set data [10] data := binary.LittleEndian.Uint64(setdata) fmt.Println(""get data data) return int32(data)```but got errorpanic: runtime error: index out of range [7] with length 1"
26238;https://www.reddit.com/r/golang/comments/4xn341/converting_byte_to_int32/?utm_source=share&utm_medium=ios_app&utm_name=iossmf
26239;@ASB
26240;Thing is my byte array has only one value its just `[10]` thats is why I couldn't convert using the above method.
26241;Is there any way to convert `[10]` to 10?
26242;what opensource software in go you're following closely? want to get a sense what ppl are onto here and get some inspiration perhaps
26243;Go
26244;none really
26245;is there a way to write a reverse proxy to use another request library to forward the requests?
26246;https://golang.org/pkg/net/http/httputil/#ReverseProxy
26247;I am using windows and when I run ```godoc http :6060``` it gives me a ```flag provided but not defined: http``` error. Any solutions?
26248;```$ godoc helpusage: godoc http=localhost:6060```maybe try ^
26249;indeed
26250;> `godoc http=localhost:6060`?@func Still same error
26251;Oh. It's embarrassing
26252;I was using ```go doc``` rather than ```godoc```
26253;Thanks. You did solve my issue
26254;np
26255;"```Error: Get https://www.httpbin.org/headers"": net/http: HTTP/1.x transport connection broken: malformed HTTP response \\x00\\x00\\x12\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\x00\\x00\\x00\\x80\\x00\\x04\\x00\\x01\\x00\\x00\\x00\\x05\\x00\\xff\\xff\\xff\\x00\\x00\\x04\\b\\x00\\x00\\x00\\x00\\x00\\u007f\\xff\\x00\\x00\\x00\\x00\\b\\a\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01""```"
26256;does someone know why this happens ?
26257;What's your request look like? Seems to work OK with a basic http.Get here
26258;worked changing to http instead of https
26259;does `panic` do?
26260;does it stop the program and return a message?
26261;oh yeah it does
26262;Does someone know a good alternative to viper? We used it and now have an issue were we are unable to proceed because it does not respect case sensitivity for keys. üò¶
26263;`comment not terminated` what does this mean?
26264;https://github.com/kelseyhightower/envconfig @meat maybe this? i dont have experience with viper so im just looking for alts
26265;Yeah panic is just a wrapper than prints out whatever you pass into it and then kills the program
26266;ok
26267;when you close a channel does it send nil?
26268;seems to in my code
26269;It sends a zero value yes. Which would be a nil if it's a pointer type but that's not what it's used for:```govalue hasMore = <myChan```What usually happens when you close a channel is that `hasMore` will become false. Until then it will always be true.
26270;oh ok
26271;thanks
26272;hello everyone
26273;i need some help
26274;im currently using https://github.com/smartystreets/cproxy/ as a forward proxy
26275;how would i make the server pass different tls than the clients?
26276;basically forward everything except the tls settings
26277;when using go in vscode
26278;"is there an automatically fill in keys option""?"
26279;like
26280;`structure{2 2 2}`can i click something and make it`structure{a: 2 b: 2 c: 2}`
26281;if i want to make a function parameter
26282;but dont know what the parameters type is then what do i do?
26283;interfaces or interface{}
26284;what if i want to do this```gofunc dosomething(object idontknowwhattype) { }```
26285;same answer
26286;what do i replace with `idontknowwhattype`
26287;i have no idea
26288;`interface{}`
26289;interfaces or interface{}
26290;https://tour.golang.org/methods/14
26291;```gofunc dosomething(object interface) { }``` like this?
26292;strongly recommend running through the tour again to refresh yourself
26293;ok
26294;not `interface` `interface{}`
26295;but if you want to do pretty much anything with that value you're gonna need to know the type
26296;yeah if you don't know AT ALL what types you're going to work with you're pretty hosed anyways
26297;interface{} is bad it almost always means that you don't know enough about your own code
26298;i dont get it
26299;i dont get the tour
26300;okay
26301;can you be more specific
26302;i have no idea what its talking about
26303;ok
26304;well
26305;from what i understand
26306;Also that section of the tour is somewhere in the middle
26307;its a struct for methods?
26308;It may be more useful to start from the beginning.
26309;i did
26310;Okay so go to where you got stuck last time
26311;and staart there
26312;interfaces are contracts of methods a type may have
26313;if a type has those methods it satisfies the interface
26314;we don't mind helping
26315;??
26316;but I don\'t understand doesn\'t mean anything
26317;an empty interface describes any type with at least 0 methods aka everything
26318;An interface type is defined as a set of method signatures.
26319;i odnt get that
26320;i\'m having trouble understanding why interface{} and struct{} are different
26321;there you go
26322;that's a specific question we can answer
26323;what is a set of method signatures
26324;do you know what a function signature is?
26325;do you understand method signature
26326;no
26327;no
26328;do you know what a function is
26329;yeah
26330;a function signature is the type of the function
26331;reminder
26332;the parameters and the return types
26333;2 days to go
26334;:kek:
26335;ok im sorry
26336;when you create a new module is there a naming convention for the file that contains main()? foo/foo.go or foo/main.go etc
26337;it's okay everyone spends some time thinking they can do that
26338;that was before i realized that aliens invented go
26339;@beepsandboops nope doesn't matter
26340;as long as it's `package main` you can name the file `stinky_doo_doo_butts.go`
26341;an example of a function signature is `func(string) int` which is the signature of any function that takes a string parameter and returns an integer
26342;@other Go is objectively simpler than other languages but we can brush past that lol
26343;ohhh
26344;obivously `main.go` is like the default
26345;I would use main.go
26346;yeah ik then
26347;convention
26348;but there is no language requirement for that
26349;These are not concepts unique to Go
26350;i just didnt know what theyre called
26351;but theyre called differently
26352;ok i'll use foo/main.go thanks deezy
26353;in c# just call it a function type
26354;it's a common compsci term
26355;then everyone understands
26356;a function signature specifically means the name arguments and return values of a function
26357;well now we can move past that part
26358;function type is way more nebulous
26359;so an interface
26360;but yeah moving along
26361;so an interface is a group of function types/signatures?
26362;Yep
26363;more specifically methods
26364;but why would that be useful?
26365;ü§î
26366;time to check the tour
26367;You can have code that uses an interface
26368;and multiple different types that satisfy that interface
26369;so you can use multiple different types with that code
26370;it's an interface between behavior and implementation
26371;i know people say look at the tour a lot here and it comes across pretty passive aggressive but the go tour is actually a really good introduction
26372;it really is
26373;You don't care what the type is you just know it has method X
26374;it's a really good reference source.
26375;https://tour.golang.org/methods/9
26376;runnable examples for all the core language constructs
26377;how can you beat that
26378;A value of interface type can hold any value that implements those methods.
26379;this is the power
26380;There are interfaces in C# too
26381;they just work a little differently
26382;is this a hasa vs isa relationship thing?
26383;elaborate
26384;i mean this isn't really about
26385;identity
26386;this is more
26387;fuck
26388;i dropped out of community college before i could finish comp sci 101
26389;damn no job for you
26390;it's a decoupling of behavior and implementation
26391;polymorphism?
26392;yes
26393;:thonk:
26394;In programming languages and type theory polymorphism is the provision of a single interface to entities of different types or the use of a single symbol to represent multiple different types
26395;```gotype Duck interface{}```duck typing
26396;go does hasa
26397;dope
26398;not isa
26399;no inheritance here
26400;with interfaces you have an isa
26401;to a degree
26402;woaw
26403;spoilers: programming is hard
26404;`interface{}` is a godsend
26405;no it isn't
26406;but you'll see
26407;its so cool
26408;until it isnt
26409;so basically an `interface{}` is just a normal variable but you dont have to specify the type thus if you dont know you dont have to worry about that!
26410;thats epic
26411;quite the opposite
26412;if you don't know the type you can't use it
26413;at all
26414;until you assert it to a specific type theres nothing you can do with it
26415;i mean if you dont know the name of the type
26416;right
26417;yea still nothing you can really do with it
26418;if you don't know the type you can't use it
26419;"interface{} is a...""magic box that only turns into a usable value when you tell it what you think it needs to be"
26420;allow me to demonstrate
26421;```gofunc dosomething(thing interface{}) {}```
26422;or
26423;https://play.golang.org/p/DL_HzsHQ5kW
26424;```gofunc dosomething(thing interface{}) {}```
26425;interface{} is useless if you don't already know the underlying types being used.
26426;i do
26427;i just dont know the name of it
26428;that
26429;doesn't make sense
26430;the name of a type
26431;you know the type's name
26432;so
26433;you know the type
26434;because
26435;that's how names work?
26436;ü§¶\u200d‚ôÇÔ∏è
26437;ok
26438;look
26439;im using a 3rd party library right?
26440;still statically typed
26441;and it has something along the lines of `window err = library.NewWindow(windowConfiguration)`
26442;sure
26443;yes and you know what NewWindow returns
26444;so its 2 types returned
26445;the documentation will show the return types
26446;i dont know what the name of the type of `window` is
26447;bruh
26448;Check the docs
26449;"`fmt.Printf(""%T\ foo)`"
26450;look up NewWindow()
26451;that is....not how to use `interface{}`
26452;it'll literally tell you exactly what type it is
26453;surely coming from C# youd have some clue about how static types work
26454;seeing as C# works the same way
26455;i cant find the newwindow thing
26456;in the docs
26457;?go docs newwindow
26458;no?
26459;ok
26460;well that's not a standard library thing
26461;you're importing something
26462;yeah
26463;that's providing it
26464;what are you using
26465;ummm
26466;pixel
26467;just link to the docs
26468;how?
26469;what do you mean? do you not have the documentation opened somewhere in your browser?
26470;yeah i do
26471;okay
26472;link to the docs
26473;oohh
26474;docs of the library?
26475;oh my god yes
26476;the thing we're talking about
26477;im stupid forgive me
26478;https://github.com/faiface/pixel/wiki
26479;https://godoc.org/github.com/faiface/pixel/pixelgl#NewWindow
26480;yes that thing
26481;okay that's the wiki
26482;you want to read the actual documentation
26483;the godocs
26484;that's what will have the comprehensive listing of what you need
26485;as Ciaran helpfully pointed out
26486;i mean the wiki is useful i'm sure
26487;holy fuck im stupid
26488;but you can basically never use ONE reference EXCLUSIVELY
26489;wow i feel wasted
26490;you're almost always going to need multiple documents
26491;in some form
26492;To be fair if you're coming from C# I'm not suprised you're not familiar with how to use documentation
26493;yeah this is golang proptip #1
26494;the intellisense in c# is amazing
26495;every package has a godoc
26496;is it bad in c#?
26497;godoc is good
26498;godoc is your friend
26499;always always always always remember and use the godoc
26500;how does every package have docs?
26501;NuGet package manager and third party libs in general can be extremely tedious to dig into
26502;are they computer generated?
26503;Because godocs scans github for repos and automatically builds their documentation.
26504;oof
26505;wow
26506;especially as package structure and naming conventions aren't so heavily enforced by the community
26507;thats really smart
26508;So yeah
26509;reading this convo is a great xy example
26510;`godoc.com/site.com/username/repository` is the pattern
26511;any Go package you can import will have godocs at that URL
26512;well now i know how to use godocs at least...
26513;matching its import path
26514;reading this convo is a great way to raise my blood pressure this morning lmao
26515;also vscode will give you docs and type of any package that has it
26516;just mouse over the thing
26517;Yeah learning about how good godocs really are is one of the biggest first steps
26518;and it will tell you
26519;embrace documentation
26520;it tells you literally everything you need
26521;https://godoc.org/github.com/faiface/pixel/pixelgl#Window pixelgl.NewWindow() SHOCKINGLY returns a pixelgl.Window
26522;@other have you noticed your IDE complaining about exported types not having a comment? well that's where those docs come from
26523;so i've made a new module `foo` with `foo/main.go`  when would i ever change the `package main` to something like `package foo`?
26524;when its not the main anymore
26525;@beepsandboops if you wanted to import that package instead of executing it
26526;could you elaborate or link
26527;`main` cannot be imported and ONLY `main` can be built into a binary
26528;so
26529;that's it
26530;that's the only choice
26531;do you want this package to build into a binary or be imported
26532;if foo was designed to be imported as a package and not compiled directly to an executable you would use `package foo`
26533;does that mean the fact i have a func main() means it has to be package main then?
26534;no
26535;or am i misunderstanding something
26536;main() can exist in a package
26537;it just won't be automatically executed
26538;because it's not `package main`
26539;oh i see
26540;it's because i'm using go run
26541;that needs a main
26542;correct
26543;`go run` compiles the provided arguments to a binary
26544;it has to in order to run the code
26545;so
26546;the code has to be `package main`
26547;am i able to run without package main somehow?
26548;nope
26549;only `package main` can be built into binaries
26550;that package has to import or define whatever it needs
26551;so do you normally test with package main and then rename or compile each time?
26552;no i have separate unit tests
26553;or a separate `cmd/testWhatever/main.go`
26554;isolated from my real app
26555;`cmd/testCustomJsonMarshaler/main.go`
26556;i'm not meaning unit tests
26557;for a oneoff test of some new feature
26558;i know what you mean
26559;"Hi there Im trying to serve a Vue SPA through gin in the SPA I have the homepage (/) which works. But when I go to /login gin returns a 404.I have this serving the static .html file`r.Use(static.Serve(""/admin static.LocalFile(paths.Admin() + /dist true)))`"
26560;and i answered
26561;or i stand by my answers
26562;fair
26563;if you're constantly renaming your package back and forth between `main` and whatever
26564;you're doing it real wrong
26565;isn't the convention to have the tests in the same dir?
26566;yea
26567;i think
26568;iirc the testing suite looks for specific names
26569;correct
26570;and the compiler will exclude test code from the build
26571;but you probably don't actually want unit tests in `main` anyways
26572;@beepsandboops If I'm writing a package I sometimes include my working code of how I expect it being used under a `cmd` directory which I also knida use to test it as I go (outside of unit tests) however I have no idea if that's an acceptable way of doing it
26573;cause `main()` probably shouldn't be defining anything new
26574;just importing existing pieces from packages which have tests
26575;?go layout
26576;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
26577;take a look through this
26578;great example of how a main package is used
26579;so I'd have `myparser/parser.go` for example and then `mypackage/cmd/main.go` that is a package main that imports `myparser` and can be compiled
26580;> An application may produce multiple binaries so we‚Äôll use the Go convention of placing our main package as a subdirectory of the cmd package.this is the first i've heard of cmd
26581;yep
26582;you can have any number of `package main`s
26583;as long as they're all in separate directories
26584;is cmd where the bootstrapping goes then?
26585;no clue what you mean
26586;`cmd/` only contains other directories
26587;possibly a README file
26588;but it's short for command no?
26589;yes?
26590;because it's a folder where you keep the commands you want tobuild
26591;cmd is just a folder but kind of ppl put ./cmd/app1 ./cmd/app2 there
26592;not necessary a rule too
26593;oof
26594;app1/cmd app2/cmd or above?
26595;kinda confused
26596;i mean
26597;like i said
26598;you can have `package main` anywhere
26599;yeah what you said is on the link too deezy
26600;a project can result in different binaries
26601;there's no rules as long as each package is isolated perdirectory
26602;each would need its own main
26603;if you see /usr/lib/go/src/cmd there's a couple of things there
26604;so different main packages go in different cmd/ folders
26605;https://github.com/kubernetes/kubernetes/tree/master/cmd
26606;example
26607;"> Hi there > Im trying to serve a Vue SPA through gin in the SPA I have the homepage (/) which works. But when I go to /login gin returns a 404.> I have this serving the static .html file> `r.Use(static.Serve(""/admin static.LocalFile(paths.Admin() + /dist true)))`Any ideas?"
26608;here is how kubernetes organizes its huge constellation of API services
26609;vendor/cmd/app
26610;each one of these directories builds out to a binary that imports different subsets of the kubernetes codebase
26611;dont look at vendor
26612;ü§î
26613;and provides a unique subset of functionality
26614;@Ainsley might need to do some `'/ serveIndex.html`
26615;"@stdio I tried doing this but no luck `r.Use(static.Serve(""/admin/ static.LocalFile(paths.Admin() + /dist true)))`"
26616;reason is that browser is looking for a /login in backend
26617;while the frontend have some routing that says /login is something when you refresh it tries to fetch from backend
26618;Ah ok
26619;Any way to resolve this without getting nginx involved?
26620;if you serve `/admin/` it won't care about `/login` /admin/login might work
26621;so having `/` to handle the catch all index.html might work too (depends how you setup your routings nad all)
26622;can you use http.StripPrefix or am I misunderstanding the problem?
26623;```beep/ custompkg/ cmd/ .readme main.go```like this?
26624;@stdio Im routing /admin and /admin login so I dont see why the /shouldnt work
26625;because /login doesn't exists?
26626;But if / works for static assets surely it would work for /admin/login
26627;There must be a way! haha
26628;but browser wants `/login ` is there an asset for that?
26629;Nope just goes through Vue's router
26630;but eventually (on refresh) browser will try to fetch it from backend
26631;expected declaration found InitPlayer
26632;how is this incorrect?!
26633;@beepsandboops sure
26634;like WHAT?!
26635;@other gee man i dunno havent exactly shown us any code
26636;```goInitPlayer()// InitPlayer  Initiate some player variables and do extra startup proceduresfunc InitPlayer() { sprite.CircleArc(32 32 32 0) sprite.Push(pixel.Vec{X: 32 Y: 32})}```
26637;cant call a function like that globally
26638;put it in `init()`
26639;i dont have an init() function
26640;lol
26641;then....add one
26642;:robpike:
26643;do i call init?
26644;no
26645;@stdio How do I route everything then?
26646;or is it builtin?
26647;like main?
26648;its called automatically on startup
26649;@Ainsley I would do it like backend > asset exists? return asset : return index.html
26650;the index.html could handle the not found routes
26651;ah
26652;ok
26653;so if you fetch /style.css (file exists return it) if doesn't it will load index.html the vue router will try to route through `/style.css` if doesn't exists on vue shows a 404 page
26654;Thanks @stdio is there an example you can send over? Not sure how to would translate to go
26655;@other you're going to find it very tough to get a good handle on any programming language if you have to ask questions you can find the answer to yourself. Asking when you're stuck or cant find something that's applicable to your problem is one thing but a lot of programming is solving problems not asking everyone else to solve them for you
26656;Ah ok
26657;```beep/ custompkg/ cmd/ .readme main.go app/  foo.go bar.go testing/ foo.go bar.go```@Str≈ìm could you modify this appropriately so i have a decent template
26658;is that formatting messed up or intentional
26659;you want the dirs at the top?
26660;same indent yes
26661;you dont really have subfolders of cmd/<xyz>
26662;(generally)
26663;> @other you're going to find it very tough to get a good handle on any programming language if you have to ask questions you can find the answer to yourself. Asking when you're stuck or cant find something that's applicable to your problem is one thing but a lot of programming is solving problems not asking everyone else to solve them for you@misterturtle im not asking for EVERY error if only you saw me code i get errors like every 2 lines and like every 20 i run into something that i dont understand
26664;how would you structure it?
26665;gonna link this again
26666;?go layout
26667;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
26668;i'm going through that and the kubernetes thing so that's just passive aggressive at this point doad but thanks
26669;I'm not being passive aggressive your architecture does not follow that
26670;Yeah me too don't worry! but most of the time googling the error and a bit of time and effort and you'll get to the solution yourself which a lot of the time means it will stick with your more as well
26671;the kubernetes link does not follow that
26672;@other is that InitPlayer() call just in the open?
26673;like not in a function
26674;yeah
26675;well
26676;you just cant do that
26677;@Ainsley https://github.com/gingonic/contrib/issues/90
26678;some one explaining it there I believe
26679;i cant call exported functions in the open?
26680;no
26681;oh ok
26682;how would they be called
26683;Thanks @stdio
26684;there are only 2 magic function calls to worry at this level: init and main
26685;in a regular program those are going to be the only functions called outside of a another function or declaration
26686;<https://golang.org/ref/spec#Package_initialization>
26687;init explained there
26688;what happens exactly when you do `import github.com/aws/awssdkgo/aws/request`<https://github.com/aws/awssdkgo/tree/master/aws/request>
26689;what do you mean happens exactly
26690;there are multiple levels of depth to that question
26691;what is the entry point etc
26692;its just a library
26693;it doesnt have an entry point
26694;so you use the file.go as methods?
26695;you're gonna have to help me here i don't know how to ask the question properly
26696;lets take the SPrintError function as an example
26697;in that link
26698;you would just do request.SPrintError(...)
26699;when you need to call it
26700;i don't see SPrintError
26701;https://github.com/aws/awssdkgo/blob/master/aws/awserr/types.go#L12
26702;oh you are on the link before i edited
26703;sure go with that
26704;its the same in the new link
26705;if there is no package main and a func main
26706;there is no entry point
26707;its just a lib you import and use
26708;to find func main() all the files need to be scanned no?
26709;are you talking about by go or the person using the lib
26710;go
26711;all those files are compiled down into a binary? i don't see any binary
26712;Please can someone help me!!
26713;i dont know much about specifics in compliation but all files are scanned and built
26714;If i have less than 30 results it just goes strange
26715;it does some optimization to take unneeded code out
26716;only updates the last result
26717;generally though
26718;is the binary always built locally?
26719;when i have more than 30 results it skips the first 30
26720;you need to stop thinking of individual files and thing in terms of packages
26721;@KirkFletcher you are reusing the same variable in all goroutines
26722;@KirkFletcher https://github.com/golang/go/wiki/CommonMistakes#usinggoroutinesonloopiteratorvariables
26723;you need to scope it
26724;yeah that
26725;@beepsandboops that link you posted doesn't build to a binary
26726;it's a package
26727;you have explicitly told go every piece of code that you need
26728;i thought everything needed to be built to binary?
26729;> @KirkFletcher you are reusing the same variable in all goroutines@Doad oh interesting i see I need to pass the var x to the func as a copy?
26730;youre conflating two seperate things
26731;building a binary
26732;It will get included in a binary if you import it into a project and have a `package main` for that project and you run `go build`
26733;and something being included in a binary
26734;but you can't pull that package on it's own and build it to a binary because it is not a `package main`  and as @deezy pointed out only `package main` will produce an executable
26735;an entry point is only needed when you are building a binary because it tells the program where to start
26736;how would i then use the built binary for something like deployment? i'm only familiar with go run
26737;everything that you import baring optimizations is included in that binary that is built
26738;go build
26739;will give you a os appropriate executable
26740;ok
26741;so that file has `package awserr`how come `request.SPrintError` works?
26742;i'm not really understanding how the packages link
26743;keep in mind all the things you import are packages so for example you wouldn't be able to build the `fmt` package because what would it do? It just exposes methods like `fmt.Sprintf` for you to use in your program.
26744;because i read the name wrong lol
26745;oh it should be awserr.SprintError?
26746;yes
26747;so the `package <name>` is the grouping?
26748;i read the changed link when i typed it out to get the package name
26749;its the compilation unit. I believe that is the correct word
26750;yeah. go code is made up of: a Module which can contain 0 or more Packages
26751;everything that is under `package <name>` is treated as one unit
26752;^
26753;there is no logical seperation lower than a package
26754;and you can have multiple files under one package
26755;also packages must be in their own directory (named after the package)
26756;seperating things out into files just makes it easier to code
26757;"and you run main.go (you can only run main.go; you can test other files though)"
26758;so if i were to create a package for godoc for example i wouldn't be exposing the module would i?
26759;"what do you mean by exposing the module""? @beepsandboops"
26760;yeah i dont understand
26761;you can have internal modules that you don't reveal to the world (if you want your module to be public you have to do some work/do it explicitly first)
26762;i would only push the package and subfolders
26763;even if you initialize go modules it won't make it a public module by default I think
26764;```ideas/ package_foo/ package_bar/```ideas would be the module with go.mod
26765;so theoretically i'd just push package_foo
26766;sure but why
26767;i'm trying to get my head around modules in this sense
26768;it's not really obvious to me what is going on
26769;"that's not the ideal way to do it; your structure should look more like this: ```package_foo/package_bar/main.go```"
26770;https://github.com/kubernetes/kubernetes is 1 module
26771;@beepsandboops https://thenewstack.io/understandinggolangpackages/
26772;I feel like linking to the k8s repo for a beginner is a real trial by fire
26773;do you know golang encapsulation yet? (like what typing actually exports fields/items) or not?
26774;it isn't helping me tbh
26775;yes
26776;because knowing how encapsulation in golang works will help you a lot
26777;ive been doing this for 2+ years üôÇ
26778;I was asking beep not you
26779;oh
26780;you tagged me lol
26781;capitals letters
26782;oh my bad
26783;i was confused
26784;welcome to my world mike
26785;sorry that's on me
26786;i wanted to work on a toy package today and end up down another rabbit hole and more confused than when i started
26787;okay https://github.com/therealfakemoot/gocollections is 1 module
26788;made up of 2 packages
26789;ah I didn't know you could do that nowadays. I guess cause of gomod right?
26790;do what exactly?
26791;put multiple packages within 1 module. Or like I didn't know that the modules we use are comprised of multiple packages
26792;thought it was all just 1 package with lots of files in it
26793;you always have been able to nest packages
26794;What's the most idiomatic way to build up json strings in Golang
26795;"so the import path looks like```import ( github.com/therealfakemoot/gocollections/counter"" github.com/therealfakemoot/gocollections/lmru"")```?"
26796;build a struct
26797;in particular
26798;ah shit. I haven't done that before. I don't nest packages üòÇ
26799;"```go { title : ` + title + `  mappings"": { properties"": { title"": { type"": text }, date"": { type"": date_nanos }, } }}```"
26800;and json.Marshal
26801;you could use Gin @mmacheerpuppy
26802;This elasticsearch shit
26803;take the schema off @beepsandboops
26804;"@stdio not sure if your still there,Ive added some logic to the no route function to see if the path is admin if it is return the index html file``` exploded := strings.Split(path /"") if len(exploded) > 0 && exploded[1] == admin { g.File(paths.Admin() + /dist/index.html"") }```However I get this: `ViewEngine execute template error: http: wrote more than the declared ContentLength` when visiting the url"
26805;@Madxmike TBH that example confuses me as well that module has 2 main packages in it.. how are they imported by someone into their project?
26806;ok so if i only want a oneoff package i'd have to consider the namespacing
26807;seems like there's something more about modules I don't get yet as well
26808;main only matters if you are building it at that point
26809;"I don\'t know gin much but I would set to set the appropriated `w.Header().Set(""Contentlength"",...)`"
26810;but i did pick a bad package for an example
26811;not sure about ViewEngine tho
26812;i just grabbed something that was open lol
26813;so importing `github.com/therealfakemoot/gocollections/counter` would work even though the package `counter` isn't defined anywher?
26814;i really dont know
26815;i dont think so
26816;i'll find a better one hold on
26817;Yeah maybe that was a bad example üòÑ
26818;i need to afk i'm feeling very dizzy (not your fault)
26819;how about that? https://github.com/knodesec/initfuncarrays
26820;i'll probably ask questions later but will read through everything
26821;sure
26822;looks better lol
26823;2 packages and a main
26824;but this convo has meandered very far
26825;as long as it's all being absorbed it's useful I guess üôÇ
26826;TBH I often find bits I either don't know about or misunderstood when people are helping others
26827;i think the main thing to learn from this is that packages are really the piece that matters
26828;individual files do not
26829;i beleive in something like java the file is the compliation unit which is why you do an import like `com.organization.project.folder.fileName`
26830;but thats above my knowledge üòõ
26831;`com.holder.company.team.project.service.feature.unit`
26832;"```go r := struct { Title string Mappings map[string]struct { Properties struct { Title map[string]struct { Type map[string]string `json:""type""` } `json:""title""` Date map[string]struct { Type map[string]string `json:""type""` } `json:""date""` } } }{Title: title Mappings: {}}``` Trying to enter values for title and date here :PepoThink:"
26833;sure
26834;Is this the right lines
26835;r.Mappings[key1].Properties.Title
26836;Ah
26837;idk
26838;you tell me
26839;i guess i'll know
26840;when the json
26841;gets spat out
26842;"```goPUT /myindex000001{ mappings"": { properties"": { user_identifier"": { type"": keyword"" } } }}```"
26843;is kind of what i need
26844;https://www.elastic.co/guide/en/elasticsearch/reference/current/indicesputmapping.html
26845;are you recieving that json or creating it
26846;creating
26847;turn that shit into an actual full type
26848;with some methods to easily set the data
26849;imo
26850;Everything in properties is arbitrary
26851;really annoying
26852;@mmacheerpuppy you should really use a library for this
26853;This is the library
26854;https://github.com/olivere/elastic/
26855;use olivere
26856;beats the official one
26857;oh not allowed to use that
26858;because its not official
26859;what
26860;if its that dynamic then yeah use something designed to do this
26861;yeah the official library
26862;what kinda fucknut is tellign you you cant use it
26863;makes me do this
26864;tech lead
26865;its easier but you dont know the side effects
26866;tell your tech lead hes a fucking knob jockey
26867;Which i kinda get
26868;But this is cancer
26869;lmao
26870;levels of dsl
26871;legit go to his face and tell him
26872;hes a knob jockey
26873;this is how you end up with a half baked roll your own version
26874;that you definitely dont know the side effects of
26875;complex software has complex solutions
26876;q.e.d.
26877;https://github.com/elastic/goelasticsearch
26878;this is the one im using
26879;https://github.com/elastic/goelasticsearch/blob/master/.doc/examples/src/indicesputmapping_1da77e114459e0b77d78a3dcc8fae429_test.go
26880;ig this is what im trying to do
26881;and the official way to do it
26882;is to plug strings
26883;like a madman
26884;its bad
26885;tell tech lead to use olivere and suck it up
26886;genuinely no excuse
26887;you could try copying bits of the lib
26888;https://github.com/olivere/elastic/blob/23827ac404c9d5ee230c313860142b6f49af10f2/indices_put_mapping_test.go#L40
26889;it doesn't look much differenty
26890;:thonk:
26891;maybe i should just type these strings out
26892;mhmm
26893;you can make a custom builder for it
26894;with a custom marshal function
26895;idk
26896;how can i use the default golang reverse proxy with https requests?
26897;Just learned abt this https://tinygo.org/
26898;Pretty good stuff
26899;:)
26900;The reverse proxy docs should have an example
26901;if I want a `Close() error` method on an interface and the interface has nothing to do with closing an `io` stream should I not use `io.Closer`?
26902;```gotype Service interface { io.Closer}// ortype Service interface { Close() error}```
26903;:blobscreenshot:
26904;Seems fine. Close doesn't limit itself to io
26905;I guess I can't just demarshal into these arbitrary types
26906;found is not a type
26907;but struct { Found bool} is
26908;`f.(struct { Found bool })`
26909;ugggh
26910;just use named types people
26911;does anyone has any experience in designing a plugin system for go apps?
26912;I did some brief experiments but since buildmode plugin is not widely supported gave up
26913;there is no plugoff in that regard
26914;Mattermost has a neat plugin system
26915;Go check their repo
26916;seems like microservices and connecting tiny services with stuff does the job too
26917;Is there anything similar to roundtrip for hijacker?
26918;Once you hijack you're no longer in HTTP land. You just have a raw connection.
26919;What exactly are you trying to do?
26920;I'm trying to make a reverse proxy that can handle http and https traffic and forward the response sent by another library
26921;Is there any particular reason that `httputil.NewSingleHostReverseProxy` doesn't work for you?
26922;it doesn't work for proxied requests to urls with https
26923;Why not?
26924;not sure
26925;it doesn't even show up
26926;I'm not really sure what to say if you're not sure. üòõ
26927;time for curl V etc etc
26928;but with hijack https work
26929;Once a request makes it to your handler you don't interact with HTTPS at all. It's all HTTP.
26930;The TLS is terminated before it gets to your handler and that TLS session is managed by the underlying stdlib flow.
26931;i also keep getting this as an error message for some reason
26932;connection has been hijacked
26933;Didn't you mention this was to proxy requests from a module that doesnt handle TLS well .... maybe this is the wrong approach
26934;2020/08/26 11:17:01 http: proxy error: http: connection has been hijacked
26935;seems like a reasonable error when you're literally trying to tamper with a tls connection
26936;You can't use the `ResponseWriter` once you hijacked the connection.
26937;"I wouldn\'t really say they\'re tampering with anything; the underlying TLS is still there they\'re just proxying the HTTP"
26938;is there another way to reverse proxy requests to https urls then?
26939;I'm still not sure what the issue is here.
26940;Reverse proxying HTTPS requests works just fine.
26941;Don't hijack the connection before you try to do so.
26942;so i just restarted and just gonna use the default golang library
26943;but i get this from curl
26944;Received HTTP code 404 from proxy after CONNECT
26945;for https urls
26946;That sounds like you're setting up a forward proxy.
26947;That's where the client requests the proxy from the server on its behalf.
26948;A reverse proxy is where the server makes some request to some upstream on its own behalf and relays the response to the client.
26949;"In a normal (forward) HTTP proxy the client knows that it's connecting through a proxy and wants to get to some other resource it can't access. In a reverse proxy the client has no idea that its request is being proxied; it just sees the request to the server as a normal request and response and the server is the one doing proxying behind the scenes."
26950;yea i had the function on / instead of the port
26951;"```func ServeHTTPS(w http.ResponseWriter r http.Request) { fmt.Println(""hi"") hij ok := w.(http.Hijacker) if !ok { fmt.Println(""http server does not support hijacker"") return } clientConn _ err := hij.Hijack() if err != nil { fmt.Println(""http: proxy error: %v err) return } response _ := sendRequest(r) response.Write(clientConn)}```"
26952;except with this i get invalid memory address
26953;https://discordapp.com/channels/118456055842734083/118456055842734083/748215281179951164
26954;I still don't see why you're hijacking here.
26955;ignored an error btw
26956;probably returns nil + err
26957;which causes the panic
26958;But yeah not sure why you need to hijack the connection
26959;A proxy normally creates a new connection and ties the response from the new connection back to the original request
26960;Yep and that's exactly what `httputil.ReverseProxy` does
26961;so i should just use the response writer that‚Äôs already there?
26962;Yes.
26963;That's a parameter to `(httputil.ReverseProxy).ServeHTTP`.
26964;(and a cool artifact of that method being called `ServeHTTP` is that you can actually use the `httputil.ReverseProxy` as a handler itself and you don't need any additional functions to handle the connection once you set up the `Director` and `ModifyResponse` fields if desired)
26965;"e.g. ```goproxy := &httputil.ReverseProxy{ ... }http.Handle(""/some/route proxy)```"
26966;And boom the reverse proxy is set up
26967;Hi all. I'm working on a personal project. It was originally written in JavaScript (Node.js and Express) and I am now rewriting it using Go (with chi). I have this method that list all files in a repository similar to git lsfiles. However this makes the request take about 300ms.. Whereas the same request takes about 50ms using Node.js. Obviously I am doing something wrong and I think it's because of my creating a string slice and filling it up in a ForEach loop. This is the code: https://gist.github.com/jillesme/3a21603452f6c977ba0bea2dc4f8a648#filegetrepositorycontentgoL25L30 Is there a way to turn an Iterator into a []string faster? Any guidance would be greatly appreciated!
26968;there's a well known issue with os.Walk where it calls os.Stat on everything somehwat needlessly
26969;this causes extra disk i/o
26970;but uh
26971;i HIGHLY doubt 250ms is going to matter in the slightest
26972;any database or network activity will end up an order of magnitude slower anyways
26973;vastly overshadowing this detail
26974;@Jilles do you have the profiling output?
26975;that will tell you if the bottleneck is IO or slice alloc
26976;https://github.com/golang/go/issues/16399
26977;i mean they're using Walk()
26978;and here's the github issue about the performance problems
26979;still better to have hard evidence of what's taking time
26980;pretty well understood at this point. an unfortunate artifact of early development
26981;yeah profiling is definitely called for if you actually care
26982;seems like he does
26983;@_diamondburned_ not yet I will have a look on how to profile exactly. That's a great idea.@deezy I understand. The goal of rewriting the app in Go is to 1. learn and use Go. and 2. to make it really fast (so I can run it on a $5 DigitalOcean Droplet). It's quite frustrating to see a request take 300ms which takes anywhere between 30 and 50ms in Python/Node.js. I understand that these milliseconds are trivial but performance. is one of the reasons I am interested in Go.
26984;that's fine
26985;that's one tiny piece of your program
26986;you can impl your own Walk btw
26987;don't get hung up on tiny details
26988;Write the whole program
26989;and you'll almost definitely beat anything except deliberately consciously optimized C
26990;node doesn't stand a fucking CHANCE
26991;as long as you don't do anything silly like needless quadratic time loops
26992;i wouldn't be that confident
26993;but sure
26994;The godoc of Walk also specifies it is slow üòõ
26995;> Walk walks the file tree rooted at root calling walkFn for each file or directory in the tree including root. All errors that arise visiting files and directories are filtered by walkFn. The files are walked in lexical order which makes the output deterministic but means that for very large directories Walk can be inefficient. Walk does not follow symbolic links.
26996;@deezy thank you for linking that GitHub issue. There was a mention of https://github.com/karrick/godirwalk and I may try that out in the future. For now the 300ms response will do.. This is the 45ms JavaScript equivalent if anyone was wondering https://gist.github.com/jillesme/d80b4a054a1abd0fb85bafc3e808f5ca
26997;Yeah this is a very well understood edge case in perofrmance problems
26998;is defer professionally used?
26999;Yes
27000;of course it is
27001;All the time
27002;it's part of the language
27003;Aha
27004;A+ language feature
27005;yeah defer is GREAT
27006;it's new concept to me
27007;Today I learned: Walking large directories in Go is fairly slow
27008;so it's wait to the next function to end
27009;@Jilles you kinda accidentally stumbled on one of the most hilarious obvious performance failures in Go
27010;then run
27011;Open resource > I will probably have to close it at some time. Lets defer that.
27012;boom problem solved
27013;it's really hard to fault go's performance almost anywhere
27014;and this Walk function is one of the very few that are like glaringly bad and wrong
27015;so don't take this as representative of the language
27016;any real word case uses
27017;Would you believe it's the first endpoint I converted from JavaScript to Go for performance! What are the odds. Also in my app I will just cache the response so it's not that big of a deal üôÇ
27018;For defer @oni chan? Any time I do `os.Open` and have to close it after reading in the same function I use `defer file.Close()`
27019;This was one of the first things I messed with in Go as well
27020;Same with other `Close` operations
27021;So I came across it the same way you did more or less
27022;so I will defer file.Close() then read the file
27023;Uhu and then when the function returns it automatically runs the file.Close
27024;Even if you have 4 different return paths
27025;Aha I will put it on list
27026;to read more about it
27027;The tour covers it as well
27028;tour refered to a blog
27029;Yea
27030;I really need to move from noobie level to a pro
27031;where I can know how to refactor my code
27032;which thing I need to use and When
27033;it take to long to reach that level
27034;:3
27035;You'll get there. Mostly by trying and failing
27036;rewriting your hobby project for the 50th time
27037;yea I should start doing this
27038;I am out of time
27039;I start programming early  time pass so fast
27040;> rewriting your hobby project for the 50th timethis
27041;rewrites are always good
27042;I should stop moving from language to another I will stack to GO
27043;good idea
27044;I have a professional training for it
27045;also
27046;I have an algorithms book  I will try to solve them using GO
27047;Or a better habbit to learn pros code
27048;dunno what is better to move to next level
27049;Not a great fan of learning algorithms to learn a language. Usually find a hobby project to work on
27050;And then learn from the mistakes I make
27051;^^^^^^^^^^^^^^^^^^^^
27052;to each their own ofc but yea
27053;Algorithms are what I am looking in Phd that's why
27054;algorithms won't teach you anything but basic syntax
27055;I like them
27056;just following a book gets boring eventually
27057;not what defer is and when it's useful
27058;yea agree
27059;I find an graphics library called gg
27060;I read some of it's code
27061;I think I should practice on moving to next level
27062;and stop watching youtube
27063;oh yeah gg is p nice I think
27064;I mean those channels who aren't specified to a language like random content
27065;pure Go image libraries aren't super fast but they're pretty decent nonetheless
27066;also same guy build an emulator
27067;NES emulator
27068;so he did
27069;tbh I think as long as you can find an application for your algos and not just implement them for the sake of implementing them
27070;then you'll get along fine
27071;can also do the Advent of Code I guess üòõ
27072;what is Advent
27073;of code
27074;A yearly programming challenge which doubles as an advent calendar
27075;https://adventofcode.com/
27076;Aha
27077;25 challenges each day getting progressively more difficult
27078;oh yeah would recommend AOC
27079;isn't the same as other platforms?
27080;like hacker rank
27081;if you're not up for dumb web stuff and more for puzzle solving and such then +1 AOC
27082;and those gang
27083;it is ranked when it's still ongoing
27084;but after the event has ended it's just open for everyone
27085;lol at last year when I made my server an AOC leaderboard
27086;and I was like dead last
27087;Aha good thing  I will put into bookmark
27088;It is just like any challenge website I guess. I like the format
27089;I use it to solve the puzzles in weird languages
27090;yea I am taking an full course including Datastructures > Algorithms > Job interview preparation
27091;I wanted to use bash until there was float
27092;and I was like
27093;üôÉ
27094;for an Indian guy who get 99.64 in GATE and exsenior in Cisco
27095;he is good and smart
27096;Ha awk beats bash I guess üòõ
27097;floating point no problem
27098;good bye guys it was good short talk
27099;0/10 would zsh again
27100;gonna go back to learn
27101;yea gl
27102;:doggowaveGIF:
27103;I am bash user
27104;I am busy to setup a zsh
27105;:p
27106;also zsh doesn't have ctrl+r shortcut by default
27107;It does though?
27108;ctrl+r = recursive search try it if you don't know it
27109;yes it does
27110;you can search through history of commands
27111;with out retype them
27112;I'm well aware üòõ
27113;also ctrl+L to clear
27114;those are 2 main reasons why I am still on bash
27115;They work fine though.
27116;just like ctrl + W ctrl+A etc etc
27117;literally all that works in zsh lmao
27118;lol dunno
27119;I am just fine with bash
27120;Should be a good out of the box experience
27121;what make zsh better?
27122;I like having the git status in my term
27123;better autocomplete
27124;yea I have one also
27125;showing what branch I am on if it is dirty and stuff. Nicer autocomplete
27126;some nifty commands
27127;this in normal where no git
27128;git
27129;setup fzf a well so good
27130;this when I enter git
27131;you can change your own shell to be as good as zsh
27132;on bash
27133;hell i\'ve had people ask me what zsh theme I use
27134;and I was like :stare:
27135;HA HA
27136;Ive never code in front of someone before
27137;so no one ask me anything
27138;nah it was on discord nobody irl cares about that here
27139;sry offtopic
27140;HAHHAHA
27141;@deezy so I managed to get it to work except since it's https I'm not able to get stuff like the path from the proxy
27142;and req.Method also becomes CONNECT
27143;what should I do?
27144;oh not a clue
27145;anybody know how to execute various commands with elevated permissions in windows with go?
27146;so I only have to ask for elevated permissions once
27147;that'd be to start the go application as a user with elevated privleges
27148;otherwise windows will require UAC for whatever actions it insists on
27149;yep but I need to execute a separate file various times inside my code but that file needs elevated privileges
27150;like is there any way to create an elevated session?
27151;yeah start the root process with elevated permissions
27152;and then it can do whatever it wants with its children
27153;because it already has elevated permissions
27154;unless you mean i keep typing `go run` and i have to keep clicking UAC prompts
27155;and the answer to that is make yourself a user with elevated privlieges or disable UAC
27156;this is exactly how access control is supposed to work
27157;so all the processes spawned by the elevated process will also be elevated?
27158;in theory
27159;windows is very bad
27160;imma try that out
27161;so i can't really promise anything will ever work the way it should or the way you'd hope
27162;I'm trying to switch to arch but I've got everything in windows lol
27163;windows is just straight up bad
27164;yeah it's pretty much worst case scenario for software work
27165;you have to support windows which in turn is trying to support like 40 years worth of hardware and software configurations
27166;lol
27167;aight imma try that out
27168;i just turn UAC off on all my machines
27169;because i'm a big boy and i know what i'm fuckin doing
27170;Yeah UAC promps every time you `go run` something that contains http
27171;p = &Vertex{1 2} // has type Vertex
27172;printing p
27173;&{1 2}
27174;why?
27175;What did you expect
27176;"```gopackage mainimport fmt""type Vertex struct { X Y int}var ( v1 = Vertex{1 2} // has type Vertex v2 = Vertex{X: 1} // Y:0 is implicit v3 = Vertex{} // X:0 and Y:0 p = &Vertex{1 2} // has type Vertex)func main() { fmt.Println(v1 p v2 v3)}```"
27177;not sure what to expect
27178;I should use p
27179;"`fmt.Printf(""%#v thing)`"
27180;very useful
27181;Println()'s output is basically useless
27182;`&{1 2}` indicates that it's a pointer to a struct with two fields with the values 1 and 2
27183;based `%#v`
27184;why isn't printing the address?
27185;why would it?
27186;^
27187;that's not useful information
27188;p = & something
27189;you can't do anything with the memory address
27190;you can do things with the pointer
27191;but go won't let you do anything with raw memory addresses
27192;It‚Äôs only a top level print thing iirc
27193;it can but Println is too smart
27194;If you have a member that‚Äôs a pointer it will print the address
27195;if you want the address either cast it to an actual pointer (uintptr/unsafe.Pointer) or use println()
27196;the builtin println not fmt.Println
27197;though printing a raw address isn't very useful most of the time unless you're in a debugger
27198;in which why even rely on print debugging
27199;yea println print the address
27200;Yeah it‚Äôs very nonuseful
27201;Except for the specific cases you know you need it
27202;wait I am lost
27203;let's make things clear
27204;"```gopackage mainimport fmt""type Vertex struct { X Y int}var ( v1 = Vertex{1 2} // has type Vertex v2 = Vertex{X: 1} // Y:0 is implicit v3 = Vertex{} // X:0 and Y:0 p = &Vertex{1 2} // has type Vertex)func main() { fmt.Println(v1 p v2 v3)}```"
27205;this code can be read like
27206;I need to init 4 vars
27207;and p can be read as ...
27208;replace
27209;hey does uh `go/sql` automatically do connection pooling?
27210;whoop
27211;fuck i need to stop sending emojis after every message
27212;"replace `fmt.Println()` with `fmt.Printf(""%#v thing)`"
27213;seriously
27214;just do it
27215;I do it
27216;you'll see why it's so useful
27217;it's toor code not mine
27218;> very nonuseful
27219;nonuseful
27220;yeah i know
27221;you can change the code
27222;bruh
27223;or run it in play.golang.org
27224;i aint no english major
27225;you understood what the words meant üòõ
27226;that was clear when you said aint
27227;welcome to development. you gotta start experimenting
27228;southman
27229;yes
27230;&main.Vertex{X:1 Y:2}
27231;output of p
27232;:BCS_PepeLaugh: im not an english major either
27233;there you go
27234;now you can see what type it is and which fields are which
27235;%#v with new lines when
27236;down here in dixie we use words to express meaning how we want not how them libruls up in the north say we should
27237;anyway does go/sql use connection pooling or some other magic by defaultwhen i set a sql variable and check it in what should be another connection it still exists
27238;:5_bugcatstare: which isnt how that works at all
27239;it's not really clear what you're doing
27240;minimal reproducing code sample
27241;for your benefit and ours
27242;sql does pooling by default afaik
27243;ah that would explain it
27244;that's why closing is important
27245;:BCS_PepeLaugh: didnt think id be doing garbage collection in sql
27246;i think
27247;rows open a second connection apparently
27248;I remember reading a post about partial row reading and people not closing that
27249;so they ended up reading invalid data when reusing that conn
27250;```DB is a database handle representing a pool of zero or more underlying connections. It's safe for concurrent use by multiple goroutines. ```
27251;https://golang.org/pkg/database/sql/#DB
27252;i figured that out rows opens a second connection because it doesnt get all the data instantly that would be slow it opens a connection where you can read the tables and results its just like that so it doesnt return millions of tables unless you specifically specify to go next the whole time
27253;idk was weird when i looked at it
27254;but yeah rows is seperate
27255;wow godocs is great
27256;:KM_Dorime: we need vscode godoc extension
27257;ngl
27258;omg yes
27259;wait
27260;that already exists
27261;wdym
27262;it already does
27263;it does? i mean like a browser that opens in a second tab where you can read docs and see code and shit not like Go to definition
27264;hover over hte thing
27265;it'll pop up docs
27266;it has the ability to open a godoc from source
27267;just hover the mouse over the method struct or whatever and it shows the exact same description it would show for that function or struct on godocs
27268;well thats not really godoc thats just the comments over definitions
27269;or just open godoc in the browser lolmao
27270;:stare:
27271;godoc is just comments over definitions
27272;yeah
27273;for the whole package
27274;yeah but its sort of like a halfhearted godocs
27275;i mean like for browsing the whole thing
27276;from a tree view
27277;not just things in front of you
27278;None
27279;click on this
27280;but if you hover over the whole struct
27281;None
27282;it will open the docs
27283;eww pkg.go.dev
27284;im sure you can change it lmao
27285;:KM_Dorime: fuckin ive almost switched to Plasma 5 times but im like configuration takes time ill stick with gnome and then i try to switch anyway and people here be using gnome and im like i guess people use gnome normall so i should be able to
27286;anxiety over fucking DE
27287;:Gun:
27288;https://drewdevault.com/2020/08/01/pkggodevsucks.html this 95%
27289;would it be bad practice to make a new draw object every frame or just make one and edit that but if i do the former i dont know how to do a specific thing
27290;is it normal for my database middleware file to be 500 lines and not separated
27291;:stare:
27292;bruh
27293;ok fine
27294;what is your middleware doing
27295;500 LOC is fine
27296;not sure about a single middleware though
27297;i dont directly access sql i have a file of methods on the db instance to prevent sql access
27298;500 loc in a handler sure
27299;but middleware seems a bit extra
27300;nah 500 LOC in a single function is horrible
27301;go is awesome üòä
27302;i agree
27303;I'd only accept 500 LOC or around that if it's multiple large functions
27304;if it's a single pls no
27305;something is very wrong
27306;its not a single func
27307;its a single unorganized file with minimal comments of random things that access the db
27308;oh
27309;its the whole file
27310;i just call it middleware because meh
27311;not the single middleware function
27312;yeah
27313;thats a lot less concerning
27314;im not a complete idiot :BCS_PepeLaugh:
27315;who was it here that wrote a bot that used some google language intent to figure out the command? I wonder what that google service is called
27316;https://cloud.google.com/naturallanguage/docs/basics probably
27317;dialogflow
27318;when protobuf script language
27319;that sounds horrible actually nvm
27320;huh
27321;thats really cool
27322;dialogflow that is
27323;is this how you would make one of the voice services that ask you what the hell you are calling for
27324;and they match it up
27325;it processes text too and transform into intents with params
27326;but no intents are designed to connect you to an actual person that can solve your problem
27327;so you just sit there angrily searching through the options
27328;üò°
27329;program machines to solve problems
27330;im just thinkin so i ported a basic javascript runtime to Go :KM_Dorime: and it has require support and promises and its basically just V8 nowso why dont i just port all the standard library of node.js
27331;:stare:
27332;does go have some sort of google virus that preys on our data?
27333;because they're bad
27334;that's why
27335;@other yeah it does
27336;yup
27337;Go is totally closed source
27338;all the viruses
27339;holy shit
27340;and it spies on your files everytime you run it
27341;No way to audit the stdlib or compiler
27342;none
27343;yeah no shit
27344;go off with you data
27345;i know!
27346;lol
27347;how does go compile btw do they just compile go inside the original go compiler made in c because go is made in go now :stare:
27348;Can confirm its a virus
27349;or do they have a makefile to run steps
27350;Some rust dude randomly dm'd me to tell me that
27351;The Go compiler sends your code to Google so they can copy your products
27352;:kkk_clueless:
27353;but i mean it kind of seems like what a tech giant would do
27354;it's open source dude
27355;there's nothing in there
27356;wait Go isnt owned by google is it? I thought it was seperate and google was just an investor
27357;@Riku go <1.4 is compiled through C and thats used to bootstrap go >1.4
27358;:AYMenheraConfused:
27359;ah got it
27360;I mean..maybe we just all assume someone else has audited the source
27361;so probably a makefile to run all the steps in order
27362;I have
27363;there's a bootstrap script
27364;I have personally read every single line of Go code and can say with certainty it ships your code to google for ads and AI purposes
27365;> wait Go isnt owned by google is it? it is but it's more impacted by the senior developers than Google themselvees
27366;the blog I posted actually brings up this
27367;> Go is a pretty good programming language. I have long held that this is not attributable to Google‚Äôs stewardship but rather to a small number of language designers and a clear line of influences which is drawn entirely from outside of Google ‚Äî mostly from Bell Labs. pkg.go.dev provides renewed support for my argument: it has all the hallmarks of Google crapware and none of the deliberate good engineering work that went into Go‚Äôs design.
27368;Sok windows sends your binaries to Redmond for analysis who knows what they do with it
27369;ah
27370;Hi guys. I recently started learning go. I watched the basics from free code camp and now I am reading book on concurrency in go. I have a small doubt related to a fairly simple code snippet regarding concurrency
27371;@+X ask away
27372;Ok
27373;Turtle you have the floor
27374;:micdrop:
27375;Stand back guys
27376;I got this one
27377;lol
27378;also from playing around with JS vm i have realized that you end up writing primative libraries in the host language for the language you are writing. Then you make a library in your language/runtime that wraps around your host language library to make it more compatible for the environment
27379;weird cycle
27380;good night im too sleppy
27381;"I'm already getting ready to @ deezy or basically anyone else ;)"
27382;wasted your energy going through tour? :p
27383;This is the code image of first case
27384;Screenshot of text good start :)
27385;> wasted your energy going through tour? :p@stdio me? i didnt finish lol
27386;you dont wait for routine to close
27387;:Gun:
27388;no gofmt
27389;unsynchronized variable access
27390;:dyingfish:
27391;not waiting for the goroutine to finish
27392;Result of case 1 execution
27393;Well I understand that. I was writing an example for race condition
27394;bruh i realized `printf` is made in C and is accessible in Go the whole point of fmt.Printf is to wrap printf and make it better/compatible :stare:
27395;Data race
27396;Printf doesn't wrap around C's printf
27397;nono
27398;it has the same API reimplemented
27399;you can literally use
27400;@Riku that is untrue
27401;Here we can see that number of times that loop will execute is unpredictable. Because of race condition
27402;cant you use printf inside Go?
27403;just printf
27404;not fmt.Printf
27405;no?
27406;you can import Cgo and use libc
27407;:stare: ive seen it exploring Go stdlib
27408;It's not a race it's just non deterministic how long the goroutine will take to execute and increment the value surely?
27409;But I have case 2 execution as well where I added an `else` block and then something strange happened
27410;"```gopackage main// #include <stdio.h>import C""func main() { C.printf(C.CString(""%s"") C.CString(""moment""))}```"
27411;@misterturtle exactly
27412;Let me share case2 code and execution results
27413;fuck
27414;what's wrong with fmt.Printf ü§î
27415;is there an async write buffer in Go?
27416;that'd be pretty cool
27417;Case 2 with an `else` block
27418;Case 2 results
27419;Please take a look at case 2 results. It is almost predictable.
27420;You're printing in every step of the loop
27421;True or false so you will always have 100 lines of output
27422;Yep to see if it is printing 100 times or not
27423;But without else block the number of print is random
27424;because you only print if it's 0 in the first 1
27425;Because only your if true statement prints a line
27426;What is happening here exactly if I add an additional `else` block?
27427;which is for an undetermined amount of time
27428;You are printing a message every loop iteration
27429;you are not in the first example
27430;that's all that's different
27431;If you add a `| grep is 0 |` you\'ll see the same sporadic output
27432;Oops. I got it. I thought else block is Messing up with GO routine maybe the time it takes. But I WAS DUMB
27433;Yeah
27434;@misterturtle @Doad thanks a lot
27435;Pffft I'm 100% sure I've done something dumber
27436;Dont worry
27437;Yeah it happens every now and then.
27438;"Hahaha.. sure....now and then.... ;)"
27439;Will continue with my reading. Thanks a lot guys
27440;Guys do I get a point?
27441;Or a gold star or something
27442;Bitchin
27443;:gopherballSweat:
27444;have a gopherball
27445;Sweet!
27446;üèÖ
27447;reddit gold
27448;:gopher:
27449;:Diamond:
27450;yo is the go proposal for `handle` and `check` happening
27451;nah
27452;doubt it
27453;russ talked about it in 2018 but no one is now
27454;not in a million years
27455;yeah because most of them are instantly shot down
27456;"Hi people üëã I have a question how can I validate that a struct is constructed with all the required fields. I\'m essentially wanting to do the following```type UsersRepository interface { GetByID(id string) (string error)}type Application struct { Users UsersRepository}func (a Application) SomeBuinessLogic(userID string) (string error) { user err := a.users.GetByID(userID) if err != nil { return  err } // do some other business things return user nil}func main() { t := &Application{} t.SomeBuinessLogic(""234"") fmt.Println(t)}```However there is a problem I\'ve spotted with this approach The compiler won\'t warn me that I\'m not creating an implementation of the UsersRepository. Is there anything I can do to help me catch these kind of errors?"
27457;make a constructor
27458;and make your struct private
27459;so the only way to make your struct is through the constructor
27460;you should also make an interface and return that interface
27461;don't return an unexpected struct
27462;like ever
27463;i mean interfaces don't validate
27464;they don't have to be validated
27465;and you can make the interface implement an unexported method
27466;wait
27467;Hmm accept interfaces return implementations. Usually
27468;not when it's unexported
27469;Ow yeah not in that case
27470;honestly I'd say just use it as it is
27471;don't try to cover all cases
27472;that'll take a lot more effort than it's worth
27473;cover 80% of the cases with 20% of the code
27474;diamond now has a phrase üòõ
27475;yeah that's pretty much Go's as well
27476;there aren't 10 string types for different things because Go's covers 80/20
27477;"check your assumptions  deezy""cover 80% of the cases with 20% of the code  diamond""bruh  mike"
27478;bruh
27479;here's an example
27480;https://github.com/golang/go/issues/32334
27481;https://github.com/rustlang/rust/issues/12056
27482;I think Rust decided to make a new Path type that allows weird invalid UTF8
27483;ahhh
27484;good old windows
27485;a lot of go code i've seen is a lot less handholdy than other languages too
27486;where something like initializing the struct wrong is just user error
27487;instead of something that is tightly controlled
27488;i forget the word for it
27489;Yeah I was wondering whether to handle this or not because it should only be an issue when constructing the struct and to be honest I don't think its worth the hassle either. I was just wondering if there was something I was missing in Go that would handle this for me.
27490;the thing is if you are initializing a struct as a user of some lib
27491;you should know which things you need to give it
27492;and if you dont give it those things
27493;well then thats kinda your fault
27494;not the lib
27495;this
27496;vs something like java where you provide 1700 constructors for every variation
27497;or some factory
27498;or builder
27499;to make sure the user could never ever possibly even think about initializing this class incorrectly
27500;and if foo != null checks everywhere
27501;Yeah for sure I didn't want to go down that road hahah
27502;It was just a question if I could be missing something obvious but thanks for answering
27503;yeah np
27504;what happens if I have a json object that contains an array of 6 elements name that internal array for Thingies
27505;say I unmarshal that onto a object where Thingies has 9 elements
27506;are only the first 6 elements overwritten from the json?
27507;is the rest removed?
27508;try it out üôÇ
27509;I believe it removes but still worth to check
27510;unmarshalling operates at the field level
27511;yeah it will
27512;"```gotype Content struct { Name string `json:""name""` Thingies []string `json:""thingies""` Ok bool `json:""okay""` Age uint `json:""age""`}func main() { data := []byte(`{""name"": kek thingies"":[""ein swei drei""] okay"":false age"":12}`)  var t Content  if err := json.Unmarshal(data &t); err != nil { panic(err) } fmt.Println(t)  data = []byte(`{""name"": kek thingies"":[""test haha""] okay"":false age"":32}`) if err := json.Unmarshal(data t); err != nil { panic(err) }  fmt.Println(t)}```"
27513;```&{kek [ein swei drei] false 12}&{kek [test haha] false 32}```
27514;I actually had no idea it did that
27515;uuuugh gc
27516;does it just send the entire old slice to gc
27517;or overwrite the slice length after unmarshjal
27518;p sure it overrides the old slice
27519;so the old one is GC'd
27520;I think
27521;im checking the asm rn
27522;``` movq AX 24(SP) movq DX 32(SP) call encoding/json.Unmarshal(SB) movq 40(SP) AX movq 48(SP) CX```
27523;but it doesnt seem to show me the unmarshal code
27524;bruh why does it matter
27525;honestly just wonder
27526;yes it's collected by the GC
27527;would like to know how it works internally
27528;since nothing references it anymore
27529;unmarshal uses reflection
27530;naiiis
27531;so I have a main.go and an additional file where I define a struct I use. Both are in the same package.How can I start this with `go run`? And is that actually how you should structure a project
27532;`go run .`
27533;in general you should build your app first then run the binary
27534;OK. But the structuring into one package is ok? I have seen quite a few projects where main was a seperate package and the rest was imported
27535;this package thing confuses me quite a lot
27536;?go layout
27537;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
27538;depends what your project is
27539;its only 600 SLOC so not too much. But I moved that struct out of the way since I only need one method call after initialisation.
27540;Rule of thumb for me is keep main package light and procedural
27541;bring in structs types etc from other packages
27542;I do config parsing setting up the structs and the main loop (which runs multiple times at once). If I add new features that would go to a different struct again
27543;also what to put as module name in go.mod? The repo that is referenced there is long gone but whenever I change it VSCode spamms me with error messages `<repo> has no metadata`
27544;In general what is the standard for writing doc strings or documentation in general with Go?
27545;`// MyType is a...`
27546;`// MyFunc does x...`
27547;as a start
27548;doc.go file for the intro text: https://github.com/bojanz/currency/blob/master/doc.go
27549;is there a simple shortcut for multi line comments? GoLand specifically
27550;like rust has `///` or python with multi line strings
27551;```go/multi line comment/```
27552;oh nice
27553;ty
27554;does that work in Go?
27555;Yes
27556;hi
27557;can I `go build` without link?
27558;just like `gcc c`
27559;so i'm playing around with unexported fields. why is it if i print a struct with an unexported field i can see the field value even though i can't access it?
27560;@Groszek a simple google on that subject brings up this: https://golang.org/cmd/compile/
27561;> However there is a problem I've spotted with this approach The compiler won't warn me that I'm not creating an implementation of the UsersRepository. Is there anything I can do to help me catch these kind of errors?@jake.lacey sometimes you'll see something like this
27562;```govar _ UsersRepository = &myImplementation{}```
27563;and a compiler will throw an error if the implementation does not implement the interface
27564;https://play.golang.org/p/R6xGLGzFINRthis example shows what i mean... if i print i can see both `test.A` and `test.b` but i can only access `test.A`. is this normal/desired? is it possible to hide the unexported field completely?
27565;No it isn‚Äôt possible
27566;Exporting rules are supposed to help you keep a structure to your code not prevent anything from accessing things manually if they really want to put in the effort to do so
27567;At the end of the day `unsafe` is going to foil pretty much any plan anyways :p
27568;(Murphy not Machiavelli etc. etc.)
27569;so if i would like to have a private variable is the answer to not put `b` inside the struct at all and just keep it as a variable within the package instead?
27570;I'd say the answer is to not really worry and just rely on the export mechanism üòÑ
27571;If someone is running your code on their machine they have access to anything there period
27572;You can obfuscate all you'd like but that's just an inherent truth
27573;so how would you suggest to approach this from the idea of exposing an api and an object with a set of methods operating on a value where the value should be private
27574;That's what an unexported value is
27575;I'm not really following what the issue is here
27576;fmt.Print can access the unexported variable because fmt.Print uses reflection. Java reflection would do the same thing also.
27577;i think the issue is printing an unexported value is kind of confusing
27578;Try to assign your unexported variable to another and it will not assign.
27579;you can impl custom GoString and String if you think the default prints are too confusing
27580;yep
27581;but worrying about unexported fields being printed is very much a nonissue
27582;Yeah `reflect` can skirt the issue and cheat a bit but that doesn't really mean that you should just give up on leaving things unexported
27583;is there a decent way when printing to see if something is unexported apart from lower/upper?
27584;i.e. is there an alternative
27585;not really?
27586;the compiler will tell you that. just try using the unexported variable and see what you get
27587;upper and lower completely determines if a variable is unexported or not
27588;yes i'm aware i'm just wondering if there's another way to see via print debugging if something is unexported aside from `%#v`
27589;i'm kind of glad i stumbled onto this quirk
27590;i don't think so no
27591;any pretty printer will print the field name and it's up to you the reader to determine if it's exported or not
27592;I imagine that you could implent your own Print and using reflection determine whether to print based upon whether the name of the variable is initial cap or not
27593;oh yeah totally
27594;would be a pretty big waste of time tho
27595;Does anyone have experience with tuigo? I have multiple menus or layouts that I change by calling a different function with the new menu. Anyway the first menu that loads always works perfectly regardless of which one I choose but the subsequent menus are very laggy and usually end up freezing. Am I missing a step or is this entire approach flawed?
27596;Hmmm I think it might be something to do with the `ui.Run()` function
27597;I'm learning go rn this stuff is so cool!
27598;and it's so much faster than python! lol
27599;oneofusoneofus
27600;justkiddingisuckatgo
27601;go is super neat.
27602;It's like a mixture of the speed of C and the ease of python
27603;that's my initial experience so far
27604;Python is still a bit easier for me even after several months of using Go. But I prefer go for almost everything. I still like python for any kind of calculation
27605;yea python is easier but go is faster
27606;you got to sacrifice some ease of use for speed
27607;That's fair
27608;me slep now adios üëã
27609;does anyone know if its possible to modify the response of the proxy from this library https://github.com/elazarl/goproxy?
27610;`proxy.OnResponse(Some RespConditions).Do(YourRespHandlerFunc())` leads me to say yes but I'm not familar with it
27611;I found this issue has an (broken) example https://github.com/elazarl/goproxy/issues/263
27612;it seems like the proxy isn't really able to modify https requests
27613;that is part of the core concept of TLS
27614;1) ensure that the entity you're talking to is the entity they claim to be2) ensure the communications with an entity cannot be modified inflight
27615;look at my profile picture I join the gang
27616;TLS is terminated at the proxy though
27617;depends on what type of proxy
27618;but this avatar doesn't give me lot of options anyone know a good avatar generator
27619;a PROXY will forward the request transparently
27620;a reverse proxy IS the endpoint
27621;True but from ealier conversation it's a reverse proxy
27622;yeah i'm not convinced
27623;It would suggest somethings changed üòâ would need to see code
27624;@oni chan nice. I failed at an attempt to make a gopher in a linux tux yesterday.
27625;yea need a tux also
27626;but failed also
27627;just saying there\'s a bit of a gap between i need to proxy traffic and i need to MITM and modify https traffic
27628;well i found a way to hijack https traffic and modify it but couldn't figure out how to get the response from httpclient for http2 as the response since the hijack required a net.conn
27629;If you truly want a reverse proxy no hijacking needs to occur. Given that you were seeing CONNECT methods earlier I‚Äôm with deezy‚ÄîI think you might be confusing the terminology here and aren‚Äôt looking for a reverse proxy.
27630;Right.
27631;I think there's a lot of confusion on both ends about exactly what's happening
27632;I feel like we've been hearing a LOT of Y and very little X
27633;If you really think a reverse proxy is what you need I‚Äôd take a step back. I promise no hijacking needs to happen.
27634;i think it's more of mitm but i've been using reverse proxy since that's what i thought it was
27635;yeah that's the exact opposite of a reverse proxy
27636;a reverse proxy is an explicit middleman. You send a request to the reverse proxy which will then route it somewhere and then return the response to you
27637;the reverseproxy just forwards shit
27638;i needed to modify a request sent from another client with a library that fixes the tls ciphers and forces the go proxy to use http2
27639;there's the X
27640;üëü üëÄ
27641;:kek:
27642;yea
27643;so what should i be doing?
27644;i still don't really get the core problem> modify a request sent from another client with a library that fixes the tls ciphers and forces the go proxy to use http2there's so many ambiguous antecedents in this sentence it's really hard to parse out what's broken and where
27645;the original code making the https requests is using the wrong ciphers?
27646;so basically in java some cipher suites just arent supported
27647;why are you using code that's so old or bad it doesn't support good ciphers
27648;and golang conveniently already has libraries with everything done
27649;and java can use http2 but cipher's are still a big problem
27650;well my real suggestion is stop using shitty tls libraries
27651;golang's tls stuff is modern and correct
27652;so unless you're using go 0.0.1 you should have all you need
27653;yea java just doesn't have much support for most tls ciphers
27654;yeah java bad
27655;don't use java
27656;that's why i'm trying to make a golang proxy
27657;i super duper promise learning to write basic go http code will be 1000x easier than figuring this out
27658;you can munge a lot of shit but this is just throwing good developer time after bad
27659;@Nascent the question is  what exactly are you gonna do? What do you want to do with cipher? Do you want to decrypt and encrypt again?
27660;yea i tried to but it was just really hard to find the basic http code
27661;i wanted a simple solution for the requests to be sent with good ciphers
27662;this isn't simple tho
27663;but
27664;now that you have described the problem correctly
27665;you could set up a reverse proxy
27666;another reason im using java is because gui and headless browsers arent well supported in go
27667;the reverse proxy can be configured to accept whatever ciphers the bad java code uses
27668;and then for OUTGOING requests it can use real modern technology
27669;and then proxy the responses back to the java
27670;but
27671;yea that's what i've been trying to do
27672;this is profoundly gross and will almost certainly make you hate your life
27673;but like
27674;when i say reverse proxy
27675;i mean nginx or caddy or fuckin
27676;anything
27677;there's so many off the shelf solutions for reverse proxying
27678;"```package kataimport (""strings"")func ToCamelCase(s string) string { var y string words := toArray(s) numberOfWords := len(words) firstWord := 0 firstAlpha := 0 for a := 0 ; a < numberOfWords ; a ++ { alpha := arrayToAlpha(words[a]) numberOfAlpha := len(alpha) if a == firstWord { for firstWordLoop := 0 ; firstWordLoop < numberOfAlpha ; firstWordLoop++ { x := alpha[firstWordLoop] } } else { for otherLoop := 0 ; otherLoop < numberOfAlpha ; otherLoop++ { if otherLoop == firstAlpha { x := strings.ToUpper(alpha[otherLoop]) } else { x := strings.ToLower(alpha[otherLoop]) } } } }}func toArray(sentence string) []string { replace1 := strings.ReplaceAll(sentence   ) replace2 := strings.ReplaceAll(replace1 _  ) arrayResult := strings.Split(replace2  ) return arrayResult}func arrayToAlpha(wordsArray string) []string { return strings.Split(wordsArray )}```Where should I put the return in the func ToCamelCase""?"
27679;or maybe should i just make another way for the go to receive and send the proxies like a socket?
27680;You could but that'd be infinitely more work
27681;than using an actual production grade reverseproxy
27682;there was another solution where someone made a tcp socket and sent the request to that
27683;https://github.com/0mkara/fuhttpclient
27684;i mean you can do anything you'd like go is a very good language
27685;Oh look utls
27686;yeah go figure
27687;Just curious what are you doing this for
27688;sneaker bot ü•∫
27689;and that's a bazinga
27690;Every time @deezy
27691;everyone take a shot
27692;At this rate we will have enough knowledge of how to make a sneaker bot in this channel by the end of the year
27693;That you can just tell people to search it
27694;a channel called gosneakerbot üòÜ
27695;Yeah. My recommendations are1) drop java write it in go2) if you can't drop java use an actual real reverse proxy like nginx or caddy or something
27696;Extrapolating data leads to nothing but sneaker bot talk in this channel by 2022
27697;yea i'd like to work on go but headless browsers are still only good in java
27698;well
27699;ehhhhh
27700;thanks for your help anyways
27701;you can absolutely super duper use chromedp in go
27702;yeah use nginx their reverse proxy are very easy to setup
27703;Chromedp
27704;look at my pp
27705;yea but some of the java headless browsers already have really good anti bot built in
27706;I make one
27707;@oni chan Nice really good drawing skill. Make it pink üôÇ
27708;yea le artist
27709;yer pp
27710;in this code snippet why do you have to use `make` to create a new empty map? why not just do the same but without make?``` // keys of map are strings values are int // make creates a new empty map counts := make(map[string]int)```
27711;Make allows you initialize a map with a certain capacity
27712;because maps need make()
27713;because that's how maps work
27714;there are Language Reasons
27715;You can do a initialization like Map[string]int{}
27716;Too
27717;but you probably don't care that the runtime represents maps as a pseudopointer type and treats it as a reference instead of a value even when you aren't explicitly using it as a pointer
27718;But that‚Äôs really only if you need to preload your map with data
27719;and make() is necessary for initializaing it all properly
27720;yes you can also do the literal too
27721;maps are weird
27722;it's easier to just accept that you use make() for maps channels and slices and just
27723;move on with your life
27724;I was reading into how go manages to do generic maps without genetics
27725;Neat stuff
27726;hm ok thanks for being straightforward @deezy
27727;like you can read the language spec if you want the actual real reasons
27728;but even MY eyes glaze over when i read some of that shit
27729;do you guys know if roundtrip follows redirects?
27730;There\'s a point where it\'s perfectly okay to say I don\'t know how it works but I know how to use it correctly
27731;cause it doesn't seem like it does for me
27732;Ahhh
27733;Golang golang golang
27734;What a wonderful name
27735;Godocs Godocs Godocs
27736;What a wonderful thing
27737;Oh but interfaces are a bit hard to tame
27738;Wait I'm making a poem
27739;Are variables share between functions in the same package?
27740;Yeah
27741;Well it depends
27742;If they are exported or unexported they are still visible inside the same package
27743;But they have to be exported to be seen by other packages
27744;You interrupted my poem
27745;Okay üòÜ  Sorry~
27746;Global variables are package scoped
27747;It's ok lol
27748;Ooh I got the last line
27749;```Golang golang golangWhat a wonderful nameGodocs Godocs GodocsWhat a wonderful thingOh but interfaces are a bit hard to tameAnd some libraries need the W of mings```the last line is so shitty lol I ruined it
27750;I was trying to make it rhyme
27751;Oh fuck
27752;Ludum dare!
27753;In a month?!
27754;how would i initialize a varable that has a type of a map and who's return is a string for the key and map for the value?
27755;i can't seem to be able to do it
27756;"```package kataimport (""fmt""""strings"")func ToCamelCase(s string) string { var x,y,result string words := toArray(s) numberOfWords := len(words) firstWord := 0 firstAlpha := 0 for a := 0 ; a < numberOfWords ; a ++ { var firstWordSum,elseWordSum,elseWordLetter string alpha := arrayToAlpha(words[a]) numberOfAlpha := len(alpha) if a == firstWord { for firstWordLoop := 0 ; firstWordLoop < numberOfAlpha ; firstWordLoop++ { firstWordLetter := alpha[firstWordLoop] firstWordSum += firstWordLetter x = firstWordSum fmt.Printf(""Loop %d of FirstWord\ firstWordLoop) } } else { for otherLoop := 0 ; otherLoop < numberOfAlpha ; otherLoop++ { fmt.Printf(""Loop %d of ElseWord\ otherLoop) if otherLoop == firstAlpha { elseWordLetter = strings.ToUpper(alpha[otherLoop]) } else { elseWordLetter = strings.ToLower(alpha[otherLoop]) } elseWordSum += elseWordLetter x = elseWordSum } } y += x fmt.Println(y) } result = y return result}func toArray(sentence string) []string { replace1 := strings.ReplaceAll(sentence   ) replace2 := strings.ReplaceAll(replace1 _  ) arrayResult := strings.Split(replace2  ) return arrayResult}func arrayToAlpha(wordsArray string) []string { return strings.Split(wordsArray )}```OMG Finally it works!!!"
27757;oh those are long var names
27758;yeah XD I thought it will be less confuse but end up with more confusing
27759;You can eliminate the else{} statement if you `continue` at the end of the if block
27760;Ah actually oyu have some logic underneath it too
27761;indenting is shit on mobile
27762;Ok on my list I need to learn proper bitwise operators maps and interfaces
27763;> indenting is shit on mobile@misterturtle ikr
27764;@other give me 2 minutes and I have some examples of simple things to do with bitwise operators in Go
27765;> You can eliminate the else{} statement if you `continue` at the end of the if block@misterturtle What u mean ?
27766;It's ok Bryan you can ignore my comment üòâ
27767;Na i want to improve
27768;Yeah but my comment was wrong üôÇ
27769;@tio what are you wanting? Can you give an example because what you said is very unclear
27770;Erm okay üôÇ
27771;Also important disctinction Bryan those are slices you are working with not arrays
27772;@other bitwise AND https://play.golang.org/p/6qX6Jbs4UO8
27773;biwise OR https://play.golang.org/p/_eoytrpPmli
27774;@misterturtle https://www.codewars.com/kata/517abf86da9663f1d2000003/train/goThe question I solved just now
27775;"Good work! That question thoough... `ToCamelCase(""The_Stealth_Warrior""); // returns TheStealthWarrior""` I thought for camel case it would have to return theStealthWarrior"
27776;"```package kataimport ( regexp"" strings"")func ToCamelCase(s string) string { words := regexp.MustCompile(""|_"").Split(s 1) for i w := range words[1:] { words[i+1] = strings.Title(w) } return strings.Join(words )}```Damn... ^The other\'s work ü§ØBut mine 3x efficient/faster üôÇ"
27777;What's verbose?
27778;Usually means over descriptive in the context though I think I meant that the integer is representing the state of multiple things
27779;Ummm
27780;it's regex obv it's going to be faster
27781;i meanslower
27782;fuck i need sleep
27783;Lol
27784;just wanna say that regex speed sometimes is fine
27785;also you should've compiled the regex outside the fn
27786;"```govar wordRegex = regexp.MustCompile(""|_"")func ToCamelCase(s string) string { words := wordRegex.Split(s 1) for i w := range words[1:] { words[i+1] = strings.Title(w) } return strings.Join(words )}```"
27787;> Usually means over descriptive in the context though I think I meant that the integer is representing the state of multiple things@misterturtle what?
27788;Don't get it
27789;None
27790;so pin 1s state is represented by the least significant digit pin 2s state is represented by the second digit from the right etc
27791;so if the number was b0000 pin 1 would be set to off. If the number was b0001 then pin1 would be set to on
27792;Ima watch a tut
27793;Also why did you put b at the beggining of a number?
27794;just to show in the comment that itw as binary
27795;Do you actually do that In real code?
27796;I would use constants with bit shifted iota for this
27797;It feels good when someone says something and I understand them üòä
27798;@Sgt_Tailor did you see the link? If there's a better way to do the example I'm all ears because this is just random bits I've found looking around
27799;But should be able to use 0b001 in Go as well
27800;How do I make a binary number in go?
27801;Literally my last sentence
27802;Like that?
27803;So like this `b0001`?
27804;`0b0001`
27805;Why the first 0?
27806;Because that is how you define number literals according to the spec
27807;Eh?
27808;Used in other languages as well
27809;0x0fd for hex for example
27810;https://golang.org/ref/spec#Integer_literals
27811;None
27812;I made a list of things to learn
27813;```const ( Flag0 Bits = 1 << iotaFlag1 Flag2 )```
27814;That works as well @misterturtle
27815;instead of the weird iota  2?
27816;Yeah
27817;yeah I thought that was a bit odd
27818;Why is that odd?
27819;Iota2 is the same as <<
27820;2 is incorrect as well. Should be power of two
27821;It would still work
27822;No. Times two doesn't work as it can set multiple bits
27823;Is bits a type?
27824;2 4 6 8 is what you get when multiplying by two
27825;No
27826;2 4 8 16 is what you get when multiplying by two
27827;Ahh
27828;2 4 8 16 32 when using it as a power/bit shift
27829;> Is bits a type?
27830;No a bit is not a type
27831;> ```> const ( > Flag0 Bits = 1 << iota> Flag1 > Flag2 > )> ```But why then
27832;Why is flag0 the type `Bits`
27833;I think that's a typo? I certainly didn't put it in when I modified the code just now
27834;So  2 only works for the first couple of numbers in the sequence
27835;??
27836;But after 4 it breaks down
27837;Ah
27838;So it's a keyword in go
27839;https://play.golang.org/p/74hgDiyEsuW that's what I changed it to which works
27840;That makes the iota break after 4 iterations?
27841;And `Bytes` does the same but with 8 iterations?
27842;When using bitmasks flags you need the flags to be a power of two that way one bit is set for each flag
27843;When using multiples of 2 you will get 6 as well
27844;I have so much to learn
27845;Which is 0b110
27846;Two bits set
27847;What is what you are doing called?
27848;With the 00b01 stuff?
27849;Bit shifting
27850;Ok noted
27851;I take 1 and shift it left with ioata positions
27852;So it starts as 0b00000001
27853;What's with the b?!
27854;Why is it randomly placed around
27855;And then when shifted left 4 times you get 0b00010000
27856;Around the binary representation
27857;That isn't random
27858;Like 0b001 or b0010 what is that b?
27859;It is a prefix to indicate it is a binary representation
27860;I think part of this is learning how data is stored and represented by programming languages.
27861;> It is a prefix to indicate it is a binary representation@Sgt_Tailor why is it placed sometimes at the beggining or sometimes in the middle etc?
27862;It isn't
27863;Yeah it is
27864;Always at the start
27865;0b
27866;Sometimes it's at the start like b0001
27867;Sometimes it's somewhere else like 0b001
27868;That's not the start anymore
27869;It's one spot away
27870;```number := 5number := 0b0101number := 0x5``` are the same
27871;Always at the start but when typing in discord sometimes we drop the first 0
27872;@other the b0101 in my code was just a comment not in the actual code. It was just so it was obvious it was a binary number.
27873;> Always at the start but when typing in discord sometimes we drop the first 0@Sgt_Tailor why
27874;It confuses me
27875;Why put the extra 0 at the start
27876;Because we're lazy. Just look for the b or x and ignore the leading zero
27877;Wait so you guys are lazy so you put an EXTRA thing in?
27878;Usually people do less if they're lazy
27879;Sometimes we even drop the prefix altogether and you have to decude from context what it is
27880;It isn't that hard
27881;Not more
27882;0010011
27883;FFCD06
27884;24636
27885;There are 7
27886;|:
27887;The code requires 0b0001 sometimes in conversation you drop the leading 0 because b0001 is obvious that is binary. The code will still require you to write 0b0001 though.
27888;Why the extra zero?!
27889;This is so mindfucking
27890;I hate it when there's no reason
27891;It is just a leading zero. No big deal lmao
27892;BUT WHYYY
27893;I couldn't tell you the reason the language require the leading 0 as just a complete guess it could be because octacl is represented with an O?
27894;Oh fuck
27895;0b1 and 0b001 is the same as well
27896;I'm gonna explode
27897;What the fuck
27898;Oh
27899;Ohoh
27900;so without the leading 0 O15 might get confused with the numer 015. Where as 0O15 or 0o15 is more obvious? I have no idea
27901;Yeah to distinguish between hex and decimal turtle
27902;So 0b11 is the same as 0b00000011?
27903;Otherwise it would be a guess
27904;Yeah leading zeros are ignored
27905;As they have no value
27906;in the same way that 1.1 is the same as 1.100
27907;How do I make a binary variable?
27908;this is why I recommended looking into how programming language store and use data...
27909;Like `var bin binarynumbertype = 0b0011`
27910;data is stored as binary your strings integers everything. What you're talking about is the representation of that data
27911;eg if the binary data 00100100 was stored in memory that is the int8 36 it\'s also the hex value 24 it\'s also the ASCII character $
27912;What do I replace binarynumbertype with? Like int string etc
27913;well thats 4 bits of data so could be stored safely in an int8
27914;binary is just a representation of the data
27915;It is just and int still
27916;there is no binary type
27917;Oh so it's not actually a binary
27918;It is
27919;Like 0b001 actually is just an int and has its own binary representation
27920;it has a binary representation because it has to be stored as binary by the computer because thats how they work
27921;but it\'s actually the other way round the binary data has an integer representation which is designed to make things easier for you
27922;So 0b001 is just an int and represented by 0001
27923;"!go```goi:=7fmt.Printf(""%d\ i)fmt.Printf(""%b\ i)fmt.Printf(""%08b\ i)```"
27924;None
27925;All the same
27926;"!go```goi:=7fmt.Printf(""%d\ i)fmt.Printf(""%b\ i)fmt.Printf(""%08b\ i)fmt.Printf(""%x\ i)```"
27927;None
27928;Lets pick a more interesting number
27929;16
27930;254
27931;thats numberwang
27932;https://tenor.com/view/nonumberwangnumber10smilenumbersgif15685939
27933;"!go```goi:=15fmt.Printf(""%d\ i)fmt.Printf(""%b\ i)fmt.Printf(""%016b\ i)fmt.Printf(""%x\ i)```"
27934;None
27935;73
27936;f in the chat
27937;@other those are all just different ways to represent the same number: 15
27938;I like binary palendromes üôÇ
27939;the important thing there is it's not converting it it's the same underlying data it's just showing you what it looks like when represented as an int binary 16 digit binary and hexidecimal
27940;How does 1111 represent 15?
27941;In binary
27942;That's 1+2+4+8 oh yeah
27943;```1 1 1 18 + 4 + 2 + 1```
27944;How do you guys memorize which binary thing represents which Number?
27945;I mean
27946;Which letter
27947;The easiest way todo it is hex
27948;How does 1111 represent f?
27949;How do you guys remember that?
27950;F is 15 in Hexidecimal
27951;You know that every nibble will be a f and they are 16x larger each nibble
27952;What's hex?
27953;Hexidecimal
27954;What's that
27955;Binary for humans basically
27956;?
27957;Ima watch a video
27958;09 is base 10
27959;Videos always help
27960;```0 1 2 3 4 5 6 7 8 9 A B C D E F0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15```
27961;09af is base 16
27962;Oh
27963;binary is base 2
27964;Wow that's simple
27965;How do I represent bigger numbers with hex?
27966;put more numbers in it
27967;You carry
27968;?
27969;Same as in decimal
27970;374ff
27971;If you want bigger than 9 in decimal you carry the 1 to the next column and start over at 0
27972;?
27973;I know but isn't that going to be a?
27974;If you want bigger than 15 in hex you carry the 1 to the next column and start over at 0
27975;10 is a
27976;```0 1 2 3 4 5 6 7 8 9 A B C D E F 10 110 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17```
27977;etc
27978;How would I represent 22?
27979;17
27980;16
27981;Is it?
27982;Umm
27983;I'll watch a video
27984;Ah you are right... it is 16
27985;16+6
27986;Lol
27987;Math is hard at midnight
27988;Maths is hard anytime
27989;this
27990;for hex encoding you take chunks of 8 bits and transform them into a char
27991;Is it possible to make java understand .exe/golang ?So I can make a Minecraft Server Plugin with golang instead of Java
27992;anytime i need to manually convert something I just do `echo $[0xhex]` lmfao
27993;and printf ofc
27994;lol
27995;Lol
27996;I usually have a python terminal open
27997;Isn't it chunks of 4 bits
27998;4 bits of base 2 (nibble)
27999;I use the browser calculator
28000;Uhm yes
28001;smh use a physical scientific calculator
28002;casio gang
28003;I need my coffee xD
28004;Yes hex is 4 bits per char
28005;In the search bar if you type something it will show the answer as a popup
28006;`bc` has entered the chat
28007;So if I type 5+5 into google it will output 10 without me having to hit enter
28008;but you don't get any nerd swag using a browser over CLI
28009;I'm extra lazy
28010;I don't have to hit enter üòé
28011;echo 5+5 | bc. Or whatever the bash equivalent is
28012;That's the nerdiest swag ever
28013;$[5+5]
28014;I like using the python interpreter for math stuff...
28015;`5+5`
28016;lol
28017;I don't even have Python installed globally
28018;@_diamondburned_ I don't have any languages installed I use docker for everything
28019;I think we are a little offtopic...
28020;The other day I needed 2^2561 python interpreter saved the day as I wasn t doing it in go lol
28021;Yeah you're right why don't I download a whole fucking language to use it's terminal as a fucking calculator lmao
28022;I use Nix shell for everything
28023;@other your distro likely has Python globally installed unless you're not on Linux or you're on Nix
28024;I'm on fucking Windows lol
28025;Windows has nothing installed
28026;rip
28027;Except for candy crush saga
28028;The least wanted preinstalled app ever
28029;Give it long enough and someone will make (prove) candy crush saga turing complete
28030;Sure
28031;Skype for business
28032;ok we're really offtopic lol I apologize
28033;Yeah ikr
28034;Skype for business like what the fuck
28035;Lol
28036;Microsoft has horrible taste in preinstalled apps
28037;is there a way to iterate through a list multiple times?
28038;Solitaires a classic tho
28039;let's say i have a list of 3 variables
28040;yeah just run the range in another loop
28041;i'd like to print them out ad infinitum
28042;how would i do that?
28043;just nest the for loop
28044;list is this: [greenIndex redIndex blackIndex]
28045;it's already nexted
28046;where do I find usage/documentation of below in playground?``` go.mod module foo foo/foo.go ...```
28047;it's already nested im not sure what you mean
28048;nest it more
28049;you can infinitely nest loops
28050;```for { for i item := range list { // cool stuff }}```
28051;we need a 3D loop
28052;a loop that does all loops
28053;I left a space for you to put cool stuff in
28054;ignore my message it's offtopic
28055;and it will keep looping as long as it's in another loop?
28056;Lol
28057;Yeah
28058;how do i make arrays in golang?
28059;Or```goAlive := trueFor alive {} ```and control the infinite loop with alive or whatever you name it
28060;` list := {greenIndex redIndex pinkIndex}`
28061;for example these are all constants
28062;No
28063;but i want to use them in an array
28064;A list of what
28065;this is a list of constants
28066;theyre just color values
28067;I mean an array of what
28068;What types
28069;ints
28070;Let's say ints
28071;`var array []int = []int{}`
28072;I think
28073;but its inside a function
28074;That‚Äôs a slice
28075;Btw
28076;whats the way to make this declaration on the fly
28077;And put your stuff in the curlies
28078;```list := []int{greenIndex redIndex pinkIndex}```
28079;Do you want an array or a slice? (the answer is usually a slice)
28080;i got this ` cannot use item (type int) as type uint8 in argument to img.SetColorInde`
28081;What's the difference lol
28082;Bruh
28083;yeah whats the difference between `uint8` and `int`
28084;Then make the list uint
28085;Uint8
28086;I mean
28087;`uint8` is an unsigned 8 bit intiger`int` is a 32? bit signed integer
28088;No
28089;Int32 is 32 bit
28090;I don't know actually what int is
28091;Int is either 32 or 64 bit depending on your arch
28092;```The int uint and uintptr types are usually 32 bits wide on 32bit systems and 64 bits wide on 64bit systems. When you need an integer value you should use int unless you have a specific reason to use a sized or unsigned integer type.```
28093;What's the difference between slice and array
28094;I would check out the go tour on that one
28095;They have some pretty clear slides
28096;I hate the tour
28097;Bruh
28098;Bruh
28099;Gobyexample
28100;> `uint8` is an unsigned 8 bit intiger> `int` is a 32? bit signed integer@Dusty.P int depends on the architecture
28101;Bruhs
28102;Why golang(and others) coded apps are not compiled on GitHub. And do Servers run apps on compiled or noncompiled raw codes?
28103;Golang is not an app
28104;Lmfao
28105;Why would they be. For Golang the server is running a compiled version of the code
28106;It's a language and I think it's integrated into an app?
28107;> where do I find usage/documentation of below in playground?> ```>  go.mod > module foo>  foo/foo.go > ...> ```bump
28108;Like go.exe
28109;Is that correct?
28110;> Like go.exe@other lol Windows
28111;Yeah stfu
28112;@func there isn‚Äôt much more than that
28113;It literally just says ‚Äúcode below this line belongs in this package/file‚Äù
28114;"Install bash for windows; it will never be the same. In a good way."
28115;To mock that out
28116;how do people figure that out theirselves? I only find the feature today
28117;I don't think I ever used bash
28118;> What's the difference between slice and arrayHere is the basic statement from the tour```An array has a fixed size. A slice on the other hand is a dynamicallysized flexible view into the elements of an array. In practice slices are much more common than arrays.```
28119;it's not like there's help in playground?
28120;It‚Äôs one of the options you can choose on the playground site
28121;Oh yeah
28122;Is a multiple files/package example
28123;But no darkmode tht'll blind kill ur eyes
28124;Yeah
28125;MY EYES
28126;I use VS Code
28127;Same
28128;> Why golang(and others) coded apps are not compiled on GitHub. And do Servers run apps on compiled or noncompiled raw codes?@BryanC12 Github is for source code storage. You can compile applications and host them as releases if you want but generally it's revision control for development. Go is a compiled language and so when you run an application (on a server or locally) it is a a compiled executable.
28129;With vim plugin
28130;I use vim mostly now... sometimes I will use GoLand on my desktop
28131;ohhh yes you're right it's in the multifile example
28132;> @BryanC12 Github is for source code storage. You can compile applications and host them as releases if you want but generally it's revision control for development. Go is a compiled language and so when you run an application (on a server or locally) it is a a compiled executable.@misterturtle I see :thinkingo:
28133;> I use vim mostly now... sometimes I will use GoLand on my desktop@Dusty.P vscode with vim plugin!
28134;Same keybinds but better go integration
28135;I don't like vscode... I tried it for a while but doesn't work very well
28136;Wdym
28137;And I use Pycharm for work so GoLand is more familiar
28138;|:
28139;Jetbrains tools are too bloated
28140;And iirc vscode uses the exact same integrations as vimgo does
28141;I mean at least they aren't electron
28142;> Jetbrains tools are too bloated@other and cost $
28143;I mean goland isn't all bad mostly the part where it charges you 150 bucks a year
28144;I mean
28145;perks of being in school
28146;:blobshrug: my company pays for it lol
28147;Thank God I'm still in school
28148;I can get it for free
28149;Also vscode is made by Microsoft...
28150;And?
28151;I don't like Microsoft
28152;Ever heard of Embrace Extend Extinguish?
28153;Why not
28154;No
28155;EEE is pretty 1990
28156;90's MS
28157;It is one of Microsoft's policies,Embrace a piece of software/platformExtend said platform so it can only be used with their productsExtinguish said platform...
28158;not anymore under new CEO I'd say
28159;I saw a news article about how learning go will get you in google
28160;vs code has an open source version so that can be maintained by the community right?
28161;I wanna work at google
28162;Yeah he is doing better
28163;They can't extinguish that easily.
28164;but has a lot of ground to make up before I will trust them again
28165;when i do something like this: `io.Copy(os.Stdout resp.Body)` where does the resp.body go? in other words what is `os.Stdout`?
28166;`os.Stdout` will print to the standard output where the program was run... If you run it in a linux terminal then `os.Stdout` will print it out in the terminal
28167;so no need to print the result then
28168;ok nvm that q doesnt make sense
28169;thanks!
28170;Yeah. If you look at the source for `fmt.Println()` it does basically the same thing```gofunc Println(a ...interface{}) (n int err error) { return Fprintln(os.Stdout a...)}```
28171;"os.Stdout stands for standard out"". This can be configured to output to a file or the terminal."
28172;this is invalid go ` _ err := io.Copy(os.Stdout resp.Body)`
28173;how would i ignore the first value that is returned
28174;Hey is anyone on to help me out
28175;https://dontasktoask.com
28176;@tio what is invalid about it?
28177;@tio looks okay. It's just ignoring written and storing the error in `err`
28178;i get this: `no new variables on left side of :=`
28179;for that line
28180;Oh
28181;Remove the `:`
28182;you need to use = because err is already defined
28183;:= is only for new variables.
28184;ok that worked thanks
28185;i did this same thing previously though and it worked
28186;You only need to use `:=` if you are defining a new variable. If you are only assigning to an existing variable (or ignoring anything that wouldn't be existing) just use `=`
28187;im following along in `the go programming lang` book and it has it like that
28188;You were probably shadowing err in that case.
28189;this book has an instance ofwhere it defined it twice using the `:=` notation
28190;> i did this same thing previously though and it worked@tio I can gurantee you didn't.
28191;The first time you assign to `err` you will need to use `:=` every time after that in the same scope you just need `=`
28192;ok i will find a copy of the book. challenge accepted
28193;None
28194;the book might contain a typo
28195;but I can gurantee you didn't do the same thing before and it worked
28196;see this line in particular:
28197;:= is allowed to shadow a var a long as there are new variables on the left
28198;None
28199;If there are not new variables only = is allowed
28200;something would have been different or yo uwould have had the same error
28201;https://play.golang.org/p/Jp5lVMhUsGT this explains it well
28202;Unless the variable has been declared in a different scope
28203;Basically if it's in a different scope you can shadow a variable
28204;In that case the first one is defining a new `resp` and the second one is defining a new `b`
28205;in that case `b` is a new variable
28206;but htis is the exact same scope
28207;so you only have to have one new variable
28208;Yeah
28209;It's probably a typo
28210;i mean it worke dan compiled
28211;i doubt it
28212;Naw what's in the book is valid
28213;@Dexti https://play.golang.org/p/lMV3uAD1x4U is allowed as well for example
28214;even though test was defined earlier
28215;ah
28216;cool learned something new üòé
28217;as long as you're also assigning another var it's okay
28218;Yup
28219;Yep
28220;If you are assigning any new variables use `:=` if there aren't any new variables (ignoring stuff with `_` counts as not a new variable) then use `=`
28221;why doesn't this work? https://play.golang.org/ i'm trying to replace `http` with `https`
28222;it's part of a larger piece of code but isolated the problem area in the playground
28223;Bad link
28224;https://play.golang.org/p/rhno9Mjy7Um
28225;strings.Replace returns a new string
28226;Read the function signature
28227;got thank you!
28228;im used to immutability this is my first lang where that is not the case
28229;Strings are immutable üëÄ
28230;But yes the variable isnt
28231;sweet
28232;"``` // Catch ctrlc and shutdown gracefully or not var ctrlcCount int signalChan := make(chan os.Signal 2) signal.Notify(signalChan os.Interrupt syscall.SIGINT) go func() { for { select { case <signalChan: ctrlcCount++ if ctrlcCount >= 2 { log.Warn(""Ungraceful shut down complete."") os.Exit(1) } log.Infof(""Ctrl+C pressed: shutting down gracefully. Press Ctrl+C again to force exit."") go func() { // Stop ticker that calls monitorPairs() ticker.Stop() log.Debugf(""Waiting on %d pair(s) to swap. len(pairDataChan)) // Sleep until pair data channel is empty for len(pairDataChan) != 0 { time.Sleep(time.Microsecond) } // Send quit signal to swapPair() quitChan < true wg.Wait() log.Info(""Graceful shut down complete."") // Now exit os.Exit(0) }() } } }()```Getting this to work was an adventure. Wouldn\'t have thought it required an inner go routine."
28233;Seems it could be trimed down but meh
28234;does this mean that http.Get returns a pointer for the response ```func (c Client) Get(url string) (resp Response err error)```
28235;this is taken from the official docs
28236;what im confused about is why i can just do `resp.Status` on the return value and get what's expected
28237;wouldn't it be more accurate to do `&resp.Status` since it's returning a pointer?
28238;It does the dereference for you
28239;how would i know that?
28240;Know what
28241;It‚Äôs in the spec
28242;On how accessing things work
28243;oh so if a function returns pointers go will dereference for you?
28244;No the thing will still be a pointer
28245;But when you access a member or a value receiver method on a object
28246;It will do the (foo).bar
28247;For you
28248;But foo is still a pointer
28249;go will also do `(&foo).bar` for you. Helpful
28250;If you want a source on how it all actually works
28251;https://golang.org/ref/spec#Selectors
28252;Read the next like 3 sections
28253;perfect thank you!
28254;It‚Äôs all somewhere around there
28255;this is was extremely helpful
28256;You literally could read the whole spec in a couple of hours
28257;It‚Äôs very small
28258;ya thats whats awesome
28259;im so glad i stumbled upon this language
28260;So I am trying to abstract away a bit of code that is likely to get repeated a lot. That is getting objects from a database (mongo db). Trying to reduce the number of lines of boilerplate.Anyway I have a function`func GetOne(targetCollection string pattern bson.D object interface{}) error { }`It successfully grabs a value from the collection and stuffs it into object which the code is able to use.The problem is that I cannot figure out how to do the equivalent with an array. So my GetAll function is not coming along so well.Any advice? :)In case it is useful: https://hatebin.com/uphdceubre
28261;This gets tough because the only generic array you can have is []interface{}
28262;Assuming thats ok have the last param be of type []interface{}
28263;Then you can do \\array = append(array value) @burlingk
28264;Thanks. I will give that a try. And yes I am using interface{} at the moment. It is like for calls to get groups of objects this will theoretically save a lot of lines of boiler plate.For single objects which I got working already... It saves one line per call.
28265;Then again long run I either have to be very careful what I allow into my database or replace half the removed lines with assertions.. So I might not be doing myself any favors at the moment. Heh
28266;hello
28267;how would i check if a firewall rule exists (on windows) ?
28268;With Go?
28269;yes sir
28270;https://github.com/iamacarpet/gowin64api
28271;Maybe this has something?
28272;FirewallRulesGet etc
28273;thank you sir
28274;@Str≈ìm üòõ databasefunctions.go saved just fine. usermethods.go however does not like the idea of passing []User or []User as []interface. ^^
28275;Yea heres the issue
28276;Youd have to make a new slice of type []interface{}
28277;`e := append(make([]interface{} 0 len(a)) ...a)`
28278;I think?
28279;Yay. ^^ This is one of those things where it may just be less confusing in the long run to do the normal way and then if I ever get time to come back to it mess around later. üôÇ
28280;I am also grateful for version control. It helps me to undo the big mess ups. üôÇ
28281;@Str≈ìm ok so that returns various formats: e.g. 554,85548558,9912
28282;which is basically 6 ports
28283;how would i check if all of the values include my port ?
28284;For loop?
28285;oof ok so i split using commas and then check if string includes hypen and then run a new for loop
28286;any simpler way ?
28287;Can a function closure be returned with an error variable? I can't figure out the syntax for the return.
28288;Not sure what you mean exactly
28289;```func GetNextNonce(ec ethclient.Client address common.Address) (func() uint64 error) { nonce err := ec.NonceAt(context.Background() address nil) if err != nil { return nil err } return func() uint64 { nonce++ return nonce, } nil}```
28290;I don't get warnings on the signature but I'm am with the last return statement
28291;surrouding in () didn't help
28292;https://play.golang.org/p/otvmCfFXqdv
28293;Thanks that's what I was just working on üôÇ
28294;https://play.golang.org/p/o77sGl9IjL
28295;https://play.golang.org/p/6LjYStnGRs shows the closure actually working
28296;Damn you're fast @Sgt_Tailor
28297;lightning fast üòÑ
28298;especially given the editor
28299;i forgot how to append to a slice
28300;?go tour
28301;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
28302;`slice = append{}` like that?
28303;```a := append(yourSlice items...)```
28304;dammit
28305;ah
28306;ok
28307;i remember now
28308;thanks
28309;I noticed that bot had a bad url
28310;?go
28311;Working with Errors in Go 1.13 <https://blog.golang.org/go1.13errors%20>  stdio
28312;If only there was some sort of knowledge base where knowledge was written down in case you forget stuff üòâ
28313;the %20 at the end needs removing
28314;ironic when the link is about errors
28315;Yeah some urls are wrongly encoded. We poke skippy once in a while to fix them
28316;That link doesn't have a keyword either which is weird
28317;since we have this one
28318;?go errors
28319;Don‚Äôt just check errors handle them gracefully. <http://dave.cheney.net/2016/04/27/dontjustcheckerrorshandlethemgracefully>  SkippyWorking with Errors in Go 1.13 <https://blog.golang.org/go1.13errors>  stdioProgramming with errors <https://peter.bourgon.org/blog/2019/09/11/programmingwitherrors.html>  SkippyWorking with Errors in Go 1.13 <https://blog.golang.org/go1.13errors%20>  stdioError handling and go <https://blog.golang.org/errorhandlingandgo>  Sgt_Tailor
28320;There is the broken URL as well
28321;@Skippy Can you remove the broken one?
28322;@Sgt_Tailor you can make links editable üëÄ
28323;bot code is on ghub
28324;Yes yes that is on my todo list
28325;how do i iterate through a slice?
28326;`range`
28327;https://tour.golang.org/moretypes/16
28328;thanks
28329;im so hyped
28330;go is awesome
28331;stll think its made by aliens?
28332;i mean thats part of the awesome part üòú
28333;can i remove an object from a slice by making it `nil`?
28334;Is tehre a reason you ask here instead of looking for the answer yourself?
28335;i do look for the answer myself
28336;https://lmgtfy.com/?q=hello+google%2C+how+do+I+remove+an+object+from+a+slice+in+golang+thank+you+love+you
28337;its just most of the comprehendible answers are 15 minute long videos
28338;first answer is 2 ways to delete elements from a slice second answer is idiomatic deletion from a slice
28339;wow thats a cool site ima bookmark it üòõ
28340;https://github.com/golang/go/wiki/SliceTricks
28341;unfortunately
28342;the answer you just told me to look at doesnt work
28343;you see
28344;im not working with strings
28345;im working with structs
28346;which you cant as easily `= `
28347;sorry what is your question?
28348;and if i make it a new empty struct im not quite deleting it am i?
28349;> can i remove an object from a slice by making it `nil`?
28350;no you cannot
28351;i need to delete an object from a slice
28352;see slice tricks
28353;that i just posted
28354;what does `:` do?
28355;https://lmgtfy.com/?q=hello+google%2C+now+i+need+to+know+what+%3A+does+in+a+slice+in+golang
28356;first result
28357;yeah...
28358;umm
28359;i didnt find anything on `:`
28360;Not even here?
28361;: is for reslicing
28362;https://golang.org/ref/spec#Slice_expressions
28363;https://tour.golang.org/moretypes/7
28364;what editor your using boys
28365;I am using VIM + VimGo
28366;vscode for bigger projects vim for knocking stuff together
28367;vim or goland depending on complexity
28368;intellij
28369;had a good IDE
28370;but it's paid
28371;I might actually jsut grab the goland beta
28372;Yeah that is goland
28373;Ah
28374;I have student plan for it
28375;but I need to practice vim more
28376;I think vim also can move a peice of code to a new function
28377;for refactoring and stuff
28378;Damn they really hide the beta download link
28379;https://play.golang.org/p/yo3pqZaybX9
28380;per user first yearUS $199.00
28381;why does this return false ?
28382;god damn
28383;goland alone
28384;That is the enterprise version @oni chan
28385;check the personal one
28386;there is?
28387;@Deleted User any reason you can't use parseInt?
28388;US $89.00
28389;GoLandfirst yearUS $89.00second yearthird year onwardsUS $71.00US $53.00
28390;parseint gives error on chars
28391;That is what you want right?
28392;i just want a function that checks if a string is only numbers hyphens and commas
28393;https://golang.org/pkg/strings/#IndexAny
28394;hmm how do i use it then
28395;Ah right you don't want that. You want to check if it contains any other char
28396;No
28397;You're going to end up with a double range over the runes
28398;Well yea
28399;If its any other than that return false
28400;And return true if its only numbers hyphens and commas
28401;more printf required
28402;So whats the best solution for this?
28403;vscode gang
28404;debug the function you have
28405;check what rune fails using good old printf
28406;im having a huge mindfuck
28407;Hmmm
28408;@Deleted User I botched an example https://play.golang.org/p/idSXmrdPHEJ
28409;https://tenor.com/view/catmindfuckuniversegif4981198
28410;Is that what you mean?
28411;Also ignore your original func in there at the top
28412;and the name of isAlpha
28413;Yea but shit i just left the house
28414;Ill try once im back ty anyways
28415;np there might be a better way to do it anyway
28416;Which?
28417;imagine
28418;if you know it should work but it doesnt
28419;it just fucking doesnt want to listen to you
28420;even though IT SHOULD WORK!
28421;@Deleted User If you didn't want to use regexp you could also do it like this: https://play.golang.org/p/XMCiINwPEEs
28422;Ok ty ill use that
28423;The best part about computers is they do exactly what you say to do
28424;The worst part about computers is they do exactly what you say to do
28425;xd
28426;computers are evil
28427;If something isn‚Äôt working check your assumptions
28428;except for literal hardware bug lol but is rare
28429;also compiler bug
28430;also rare
28431;only answer is do it on paper by hand
28432;Computers are a work of lucifer
28433;In that case your assumption is that hardware is infallable
28434;goto: check your assumptions
28435;"`goto hell;`"
28436;xd
28437;"`goto have_a_nice_day;`"
28438;hahaha
28439;"goto check_for_solarflares;"
28440;"`goto the_answer;`"
28441;"`goto the_past;`"
28442;"`goto back_to_the_future;`"
28443;A bit too cringe
28444;oh it's massive cringe
28445;`goto togo`
28446;palindromic programming
28447;I am trying GoLand
28448;he have vim extension
28449;those guys behind intellij know what programmers need
28450;oh my fucking god!
28451;> those guys behind intellij know what programmers need@oni chan everything has vim extension vscode vs goland etc
28452;i cant get it to work!
28453;i just want to pick a color with 0 alpha
28454;but no the fucking library wont fucking listen
28455;welp
28456;im breaking down
28457;11/10 chance you're not using it properly
28458;well then the fucking docs are stupid
28459;im literally reading the docs word for word
28460;you dont have a particularly good track record when it comes to reading things :P
28461;What are you trying to do and with what library?
28462;im trying to make a fucking fading circle
28463;wait
28464;when i use `for i p := range pops {}` how can i go about NOT using `i`?
28465;_ p
28466;ah ok thanks
28467;im broken
28468;this fucking library without good docs is killing me
28469;what lib
28470;pixel
28471;@Madxmike https://github.com/faiface/pixel
28472;these look like reasonable docs to me
28473;i mean
28474;check out imdraw
28475;would do with some examples
28476;try to make a fading figure
28477;i just want to make a ring that fades out and also becomes bigger over time
28478;i got the bigger part working
28479;now try to get it to fade out
28480;i dare you
28481;fading you just change the alpha channel
28482;its the hardest thing ever
28483;yeah
28484;thats what i thought
28485;> fading you just change the alpha channel@Madxmike show me
28486;you think i dont know how to change an alpha channel its so easy yet so hard here
28487;ima go out for a bit
28488;dm me if you did it
28489;Show us your code
28490;so we don't have to spoonfeed
28491;looks like you can just set a color mask
28492;and have the alpha multiplied by the mask
28493;```gofunc drawPops(win pixelgl.Window) { popRenderer.Reset() popRenderer.Clear() // iterate through every single pop and draw it for _ p := range pops { popRenderer.Push(pixel.Vec{X: p.position.X Y: p.position.Y}) p.life++ p.alpha = 10 if p.alpha <= 0 { } popRenderer.SetColorMask(color.RGBA{p.alpha p.alpha p.alpha p.alpha}) popRenderer.Ellipse(pixel.Vec{X: p.life Y: p.life} 2) popRenderer.Draw(win) }}```
28494;```gotype pop struct { position pixel.Vec life float64 alpha uint8}```
28495;```govar popRenderer = imdraw.New(nil)```
28496;ok ima go out
28497;what is `pops`
28498;looks like a circle that pops on the screen and fades slowly over time
28499;from what they said
28500;I mean the type
28501;I bet it's a slice of values
28502;oh lol
28503;not pointers
28504;yeah
28505;probably
28506;also you should just mask the alpha channel not the whole thing right?
28507;im not very knowledgeable on how color things work
28508;yeah
28509;well this will transition from white to black as well
28510;not sure if that's what they're going for
28511;mhmm
28512;not sure how this package's renderering works overall but I bet a dollar this doesn't work because he's not using pointers
28513;so the alpha is reset every time
28514;i'd bet so too
28515;especially considering the pop struct
28516;basic debugging would help a lot EG if it's not working how you expect check the values of the things in the loop
28517;https://github.com/golang/go/wiki/CommonMistakes#usingreferencetoloopiteratorvariable
28518;i'll just leave this here
28519;Also he's creating a new pixel.Vec in the first line of the loop instead of just passing in p.position
28520;probably missing a `continue` from the empty if block
28521;passing the alpha value to RGB as well as alpha channel
28522;The drawloop also happens 60 times a second so the alpha will be gone in notime
28523;and has no lower bound
28524;and is also a uint8
28525;so... bad times
28526;Thing is though that's gonna die in < one second so that code can't be the code he's running
28527;uints rollover in Go
28528;also I think we said it's likely not a slice of pointers so it gets reset each time anyway
28529;Ah I tried it with assigning makes snse
28530;sense
28531;Don‚Äôt need to make it pointers though
28532;Just do a normal for loop
28533;but the value would never decrement? https://play.golang.org/p/TlQ4gX9PgqS
28534;ooooh you mean a C style for loop and access the elements directly instead of a for range
28535;like this https://play.golang.org/p/Kef3zpiE1t
28536;yes
28537;exactly
28538;no need to add the extra complexity of pointers to that data when you can just change your loop
28539;Yeah I prefer that way of doing it
28540;unless someone has a particularly compelling reason why storing a slice of pointers to the data would be beneficial
28541;Exactly why add a `` when you could just have very specific access requirements and change all your loops? :thinksmart:
28542;if you're loops were written without range in the first place then that wouldn't make a difference.
28543;and I'm not sure what you mean very specific access requirements
28544;specific access requirements like understanding how for range works?
28545;You have to index the slice or retrieve a pointer to an element
28546;instead of it always referencing the element in the slice
28547;well yeah
28548;but i jsut dont understand the logic of how that means you should make it a slice of pointers
28549;why not?
28550;if we follow it then we should make any slice that we would ever loop over and change the value pointer
28551;To me it seems two different ways of doing the same thing so comes down to personal preference
28552;It's generally a bit simpler
28553;with no real downside
28554;for these kind of use cases
28555;lib seems easy and the API clear as well
28556;Got a fading circle
28557;then value slices should be reserved for only read only data?
28558;pot head be faded
28559;syntacticly I prefer the look of the for range.
28560;I mean https://play.golang.org/p/bRhWahuf23h does look nicer
28561;> lib seems easy and the API clear as well@Sgt_Tailor Can I see your code? Never done any visual stuff with Go but don't have time at the moment to knock together this just for the sake of it
28562;I just yoiked some stuff from their wiki lmao
28563;mhmm i guess i can see it
28564;https://github.com/faiface/pixel/wiki/DrawingshapeswithIMDraw
28565;the true secret to development
28566;steal and tweak
28567;90% of the time if you are modifying a thing in a slice anyways
28568;you are calling some pointer reciever
28569;Only need to push one point for a circle
28570;then set the colour and mask
28571;ez
28572;Ah I won't be able to do it on this laptop anyway on Windows and need gcc etc for some of the packages
28573;mingw?
28574;@Madxmike im back
28575;check the discussion since you left
28576;i sort of got it
28577;but no
28578;now i get this pulsating thing
28579;can you put this on a gist or something
28580;where it pulsates between visible and invisible
28581;if i have a struct Foo that has a method receiver that creates struct Bar but Bar needs access to Foo's methods how should this be achieved? embedding Foo inside Bar? a package scoped variable holding Foo?
28582;cycles are generally a bad sign
28583;it's awkward because i'm trying to create ooplike behaviour for a small toy project
28584;yeah that's the problem
28585;don't do that
28586;go is going to fight you every step of the way
28587;OOP :BanHammer:
28588;ok now it just doesnt lower the alpha
28589;Composition and Interfaces ‚ù§Ô∏è
28590;can you put this on a gist or something
28591;I'm tryna make a function to fill and interface{}
28592;gist?
28593;like scanf
28594;pastebin
28595;Sure you can do that if you want
28596;can i just send the .zip?
28597;Scanf()'s source code is available
28598;no because phone
28599;just the relevant parts
28600;delcarations and functions that matter
28601;They have created this wonderful thing: source control
28602;that makes it easier to share code
28603;ok
28604;@deezy so if the cycle is a bad sign how would this be best fixed? put everything into the same struct? the issue there is Foo should have its own methods and Bar should have its own methods. they share an instance though
28605;a git repo or gist/paste would be nice
28606;do they have any common methods?
28607;https://pastebin.com/pT6z9ECk
28608;any common members?
28609;anyways the answer is composition and interfaces
28610;yeah the instance could be a member but Bar is only created from a Foo method
28611;it sounds like you need to extract the methods needed by both into a separate struct
28612;or to standalone functions
28613;that's the solution to all cycles
28614;extract the common code and put it somewhere else
28615;ima go away again for maybe 3040 mins please tell me if you have any groundbreaking results i would like to know
28616;the scan functions just use []interface{}
28617;i need to know what to pass
28618;it worked with int
28619;i don't understand the question anymore
28620;You're using the mask wrong @other
28621;are you having problems using Scanf or are you trying to implement your own version of it?
28622;Mask _multiplies_ it by that number
28623;you're making it all white I think
28624;no just tryna make something that puts a result into the specified variable
28625;(so it can infer type)
28626;okay so
28627;the latter
28628;https://golang.org/src/fmt/scan.go?s=3401:3463#L141
28629;start here
28630;enjoy
28631;ik
28632;but thats []interface which is automatically a reference right?
28633;yes slices and interfaces moreorless behave as references
28634;so i can do it pointerless? that didn't work?
28635;i don't know
28636;you're not giving me any useful information to work with
28637;it sounds like you have code that you're working on that isn't working
28638;protip
28639;"if you literally have code that isn\'t doing what you want it to don\'t ask how do i whatever"". show the code explain your desired intent and how that differs from the actual results."
28640;ok
28641;can't usually treat interface as reference since often it's a dynamic object made at the call site and not something that i'm hanging on to. Basically can't rely on it.
28642;interface{} is pretty bad
28643;ik but if you want to scan into something it's necessary right?
28644;not really no
28645;even scanf takes pointer
28646;it only requires a pointer
28647;`func Scanf(format string a ...interface{}) (n int err error) {`
28648;yeah the pointer gets wrapped in interface{}
28649;https://golang.org/src/fmt/scan.go?s=3401:3463#L1181
28650;here's how it works
28651;there's no point speculating or guessing
28652;you can literally read the exact things that Scanf is doing
28653;yeah i love that about the go ecosystem
28654;https://golang.org/src/fmt/scan.go?s=3401:3463#L953
28655;can't rely on undocumented behaviour tho ofc
28656;here we go
28657;"```go default: val := reflect.ValueOf(v) ptr := val if ptr.Kind() != reflect.Ptr { s.errorString(""type not a pointer:  + val.Type().String()) return } switch v := ptr.Elem(); v.Kind() { case reflect.Bool: v.SetBool(s.scanBool(verb)) case reflect.Int reflect.Int8 reflect.Int16 reflect.Int32 reflect.Int64: v.SetInt(s.scanInt(verb v.Type().Bits())) case reflect.Uint reflect.Uint8 reflect.Uint16 reflect.Uint32 reflect.Uint64 reflect.Uintptr: v.SetUint(s.scanUint(verb v.Type().Bits())) case reflect.String: v.SetString(s.convertString(verb)) case reflect.Slice: // For now can only handle (renamed) []byte. typ := v.Type() if typ.Elem().Kind() != reflect.Uint8 { s.errorString(""can\'t scan type:  + val.Type().String()) } str := s.convertString(verb) v.Set(reflect.MakeSlice(typ len(str) len(str))) for i := 0; i < len(str); i++ { v.Index(i).SetUint(uint64(str[i])) } case reflect.Float32 reflect.Float64: s.SkipSpace() s.notEOF() v.SetFloat(s.convertFloat(s.floatToken() v.Type().Bits())) case reflect.Complex64 reflect.Complex128: v.SetComplex(s.scanComplex(verb v.Type().Bits())) default: s.errorString(""can\'t scan type:  + val.Type().String()) }```"
28658;for anything that isn't a builtin/primitive
28659;yea go is good
28660;godoc is a godsend
28661;so i pass a `&x` and recieve and `interface{}`
28662;and assign?
28663;scan does the assignment
28664;okay so
28665;i still don't understand
28666;are you trying to use Scanf?
28667;no i'm tryna create a function to fill an interface
28668;okay
28669;no scanf
28670;just makin sure
28671;welp
28672;the code is above
28673;i mean you're literally going to copy scanf
28674;all those links show all the work you have to do to interact with interface{}
28675;well functions can't fullfill interfaces
28676;ok nice
28677;```switch v := result.(type) {```
28678;case int:
28679;v = 67
28680;}
28681;can add more later
28682;@qrpnxz false
28683;https://play.golang.org/p/h7JTKnhsmhK
28684;well partially false
28685;that's a type that holds a function
28686;not a function
28687;you have to make a type
28688;ye
28689;but it's still a function
28690;it's not a type that holds a function it's a type that _is_ a function
28691;but semantics
28692;i guess
28693;much like you can't add methods to any built in types
28694;but you can when you create types based on them
28695;Ewwww. A function type with methods
28696;Burn the witch
28697;https://play.golang.org/p/qSTngdnL1aD
28698;yeah i'm not sure how i feel about that
28699;like you can call that type just like a function
28700;i'm trying to think of a legit use case outside of that one http handler thing
28701;it's cursed
28702;I can make it more cursed!
28703;ServeHTTP does that iirc
28704;Yup
28705;right
28706;https://play.golang.org/p/dJwJ0Ul08gF
28707;dunno why you aren't doing as expected https://play.golang.org/p/WHeDjaA_cZM
28708;Look how cursed that is
28709;Satisfies the interface by calling itself üòÑ
28710;cursed
28711;yall are perverts
28712;Learn this simple trick to satisfy an interface! Code reviewers hate it!
28713;üò†
28714;MODS ban this heretic
28715;:ablobhammer:
28716;The Codex Astartes does not condone this behavior
28717;is interface same as other languages I didn't reach it yet  like take all what this class have an the child should have same stuff  I know go isn't OOP
28718;it is not the same as other languages
28719;lots in common many things different
28720;I need an animated emote of reinhardt performing an earthshatter. But his hammer has been replaced with a banhammer
28721;```gotype ReaderFunc func(p []byte) (int error)func (rf ReaderFunc) Read(p []byte) (int error) { return rf(p)}...io.Copy(os.Stdout ReaderFunc(func(p []byte) (int error) { for i := range p { p[i] = \' } return len(p) nil}))```
28722;thanks im scared
28723;what are u working on guys
28724;work stuff
28725;I don't have a job
28726;are you >18 tho
28727;20
28728;I was engineering
28729;loads of time yet
28730;change to science
28731;what science
28732;fail science
28733;pass science
28734;now I am second year
28735;on computer science
28736;first one was 7 courses maths  2 physics  1 stat  2 cs
28737;it was hard as f
28738;Sorry for interrupting a conversation but I have a question about working with SQL dbs in go
28739;jawad where are u from
28740;UK
28741;"Would it be recommend to write raw SQL queries or use an o""rm like gorm"
28742;Or something like sqlx
28743;`invalid composite literal` what does this actually mean?
28744;i mean
28745;you did your syntax bad
28746;generally
28747;you didn't show any code so
28748;really hard to get more specific than that
28749;it means you have an invalid composite literal
28750;quite literally
28751;not meming
28752;> You're using the mask wrong @other@Sgt_Tailor wdym?
28753;you arent making your ting correctly
28754;im back
28755;Tailor did elaborate
28756;in the messages following that
28757;oh wait let me read that then..
28758;> Mask multiplies it by that number> you're making it all white I think
28759;thats what he said
28760;"> Would it be recommend to write raw SQL queries or use an o""rm like gorm@jawad Raw queries should be ok. Just make sure you escape them etc"
28761;is their any open source project
28762;for noobs
28763;to contribute to
28764;or someone need to moderate me
28765;@evandocarmo would it be practical though?
28766;@Sgt_Tailor wait so how do i NOT multiply it then?
28767;give me a role for `useless member`
28768;read the documentation and find a method that does that
28769;find a thing you are interested in
28770;some topic
28771;> @evandocarmo would it be practical though?@jawad yep. Look into sqlx or sqlc which add some nice helpers and code generation. In general the community avoids orms because they tend to add unnecessary complexity etc
28772;and then find a project in that topic
28773;and then start using it and fix things
28774;@oni chan
28775;nice new name
28776;Ok I kinda fell into a rabbit hole with ORMs in js so I think it would be best to avoid them for go
28777;Yep. Start simple. Only add stuff you really need.
28778;I am interrested in game dev  or linux stuff
28779;@oni chan i know
28780;try raylib
28781;is `%p` the correct/only verb for printing an address?
28782;or raylibgo bindings
28783;those can be always improved on
28784;its open source
28785;the point is if I am the worst how I can contribute
28786;üòÑ
28787;you start using the lib
28788;so you can contibute to it
28789;and finding bad points
28790;yeah
28791;then fix those bad points
28792;i got a bad point
28793;its very hard to just say ifound you lib and im going to change stuff but ive never used it before
28794;@jawad I started web apps w/o using any packages that abstract over SQL to try and learn a bit more about hwo to structure the projects properly and the only thing I would say is you end up with a fair bit of boilerplate
28795;the drawing functions in raylibgo are too limited
28796;what are the steps
28797;first download code
28798;should I read code
28799;i mean
28800;or just read a function
28801;like literally make a project that uses the lib
28802;and start to fix things
28803;`go get github.com/gen2brain/raylibgo/raylib`
28804;I still haven't tried gorm or anything else yet as I jump between different scratch projects testing ideas and am currently on Elasticsearch. If I did SQL now though I would proabably try Gorm
28805;never mind
28806;so let's go back
28807;first when I download the code
28808;i try to make a project
28809;oh shit
28810;if I find something missing or slow or bug
28811;i got it to work
28812;try to fix it
28813;holy fuck
28814;YES
28815;but
28816;it loops
28817;thats a great idea @oni chan
28818;when it reaches 0 alpha it goes back to 255
28819;@oni chan so are you going with raylibgo?
28820;@other yeah we covered that as well
28821;proba need to learn go first
28822;thoo
28823;I am learning it
28824;i just finished the slices part
28825;> composite literal uses unkeyed fieldsthis is new. what causes that?
28826;you are building a composite literal with unkeyed fields
28827;please do fix it i might as well come back to using it and be your first customer of the new and improved raylibgo @oni chan
28828;"aka foo { banana }notfoo{ bar: banana""}"
28829;the fields can be positional too though?
28830;> when it reaches 0 alpha it goes back to 255@other this problem?
28831;yes but vet doesnt like it iirc
28832;no
28833;thats something else
28834;theres quite a few problems with raylibgo
28835;this is a go vet message so sounds right
28836;like not enough drawing shapes
28837;i cant draw ellipses
28838;Aha so you want ellipse to be builtin
28839;i always just key the fields unless its something super simple like point {x int y int}
28840;theres a lot of stuff i cant do in raylibgo because it isnt all ported over to go just the main parts
28841;"```(base) in ~> task add add more shapes for the raylibgo library""Created task 9.```"
28842;task added
28843;sounds fun to work on
28844;I'm seeing some weird behaviour its as if doing a JSON unmarshal mutates the contents of a body
28845;just try different functions and if they dont exist maybe port the function over to go etc until most of the functions are ported over
28846;"Like I'm calling```go if err := json.NewDecoder(response.Body).Decode(f); err != nil { return err } return nil```and once ive done so"
28847;yea this is very good start
28848;by porting
28849;things
28850;I'm no longer able to fmt.println the body of the response
28851;@mmacheerpuppy it does
28852;but why
28853;most readers are 1 time read only
28854;None
28855;i got my own list of stuff to do
28856;I use task command on linux
28857;trello is quite nice tho
28858;I like airtable more
28859;airtable?
28860;@mmacheerpuppy I believe it's because you can't always gurantee the data is there to be read depending on the underlying Reader.
28861;I might be wrong though
28862;Its especially annoying right now because im trying to debug why my struct won't read this JSON response
28863;https://play.golang.org/p/o_39jN8C74in this code what difference would `return Wrapper` and `return &Wrapper` make?
28864;trello is really easy to use tho its simple and quick
28865;> most readers are 1 time read onlyi guess this isnt exactly true
28866;but generally when you are working with readers from streams of data its a 1 time read
28867;like in resp.Body
28868;Is there any reason you're not reading out the source of the JSON into a variable you can use again later?
28869;(or as many times as you want)
28870;Because I didn't expect it to consume üòõ
28871;what is the error you are gettind doggy
28872;if its not decoding correctly it will give you an error
28873;Yeah it will consume because if you're reading off the wire for example you cant just go back and reread that.
28874;i need to afk could someone ping me if they want to answer i'll read when i'm back
28875;` json: cannot unmarshal object into Go struct field HitsWithDate.hits of type []elasticsearch.HitWithDate`
28876;Now to find out why im getting this error i have to go on an absolute mission
28877;but you can read off the wire into a variable and use that as many times as you want
28878;You are trying to marshal into a slice @mmacheerpuppy
28879;i still dont know what `:` does
28880;But the json isn't a slice
28881;@other in a slice context? it reslices
28882;it fuckin is
28883;reslices?
28884;wtf
28885;@Madxmike we already told him and gave him like 3 links to read
28886;Explained that twice already today @other
28887;https://tour.golang.org/moretypes/11
28888;bruh
28889;I genuinely think he's just a trol,.
28890;well im really stubborn and stupid ok?
28891;:cmonbruh:
28892;its hard for me to understand stuff like this
28893;"```[200 OK] {""took"":1,""timed_out"":false,""_shards"":{""total"":1,""successful"":1,""skipped"":0,""failed"":0},""hits"":{""total"":{""value"":20,""relation"":""eq""},""max_score"":0.02409755,""hits"":[{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908293342916"",""_score"":0.02409755,""_source"":{""date"":1598539450206349500,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908494669508"",""_score"":0.02409755,""_source"":{""date"":1598625850323347400,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908528223940"",""_score"":0.02409755,""_source"":{""date"":1598712250348229200,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908578555588"",""_score"":0.02409755,""_source"":{""date"":1598798650370230700,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908612110020"",""_score"":0.02409755,""_source"":{""date"":1598885050394941900,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908645664452"",""_score"":0.02409755,""_source"":{""date"":1598971450412941900,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908679218884"",""_score"":0.02409755,""_source"":{""date"":1599057850430940900,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908695996100"",""_score"":0.02409755,""_source"":{""date"":1599144250446552600,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908729550532"",""_score"":0.02409755,""_source"":{""date"":1599230650465158200,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908763104964"",""_score"":0.02409755,""_source"":{""date"":1599317050482938100,""food"":false,""title"":""test_title""}}]}}```"
28894;INTOI
28895;"```gotype HitsWithDate struct { Hits []HitWithDate `json:""hits""`}type HitWithDate struct { Date uint64 `json:""date""`}```"
28896;via
28897;"```godefer response.Body.Close() c := response fmt.Println(c) if err := json.NewDecoder(response.Body).Decode(f); err != nil { fmt.Println(response) return err } return nil```"
28898;b/c you don't take your time to read it. We all had to read it that's why we understand it. Read it try it if it doesn't work read more.
28899;that hit struct does not look like it matches the data
28900;yeah sorry it did i was trying to copy some es docs
28901;mb
28902;It should be date uint64
28903;> well im really stubborn and stupid ok?i mean so am i but i also like to accomplish things eventually
28904;so you gotta ask how badly do you actually want to do the thing you want to do
28905;"even if i use ```gotype HitWithDate struct { Date uint64 `json:""date""`}``` i get the same message"
28906;i do too thats why i didnt give up on the circle thing the whole day
28907;you didn't give up asking I don't think you ever even started reading
28908;hard to say without actually seeing the body you are getting
28909;"This is the body ```{""took"":1,""timed_out"":false,""_shards"":{""total"":1,""successful"":1,""skipped"":0,""failed"":0},""hits"":{""total"":{""value"":20,""relation"":""eq""},""max_score"":0.02409755,""hits"":[{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908293342916"",""_score"":0.02409755,""_source"":{""date"":1598539450206349500,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908494669508"",""_score"":0.02409755,""_source"":{""date"":1598625850323347400,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908528223940"",""_score"":0.02409755,""_source"":{""date"":1598712250348229200,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908578555588"",""_score"":0.02409755,""_source"":{""date"":1598798650370230700,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908612110020"",""_score"":0.02409755,""_source"":{""date"":1598885050394941900,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908645664452"",""_score"":0.02409755,""_source"":{""date"":1598971450412941900,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908679218884"",""_score"":0.02409755,""_source"":{""date"":1599057850430940900,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908695996100"",""_score"":0.02409755,""_source"":{""date"":1599144250446552600,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908729550532"",""_score"":0.02409755,""_source"":{""date"":1599230650465158200,""food"":false,""title"":""test_title""}},{""_index"":""test_317105907806803652"",""_type"":""_doc"",""_id"":""317105908763104964"",""_score"":0.02409755,""_source"":{""date"":1599317050482938100,""food"":false,""title"":""test_title""}}]}}```"
28910;oh wait
28911;Oh
28912;can you prittyprint that
28913;and put it on a gist
28914;i see
28915;:squints:
28916;also you are missing a level there
28917;@mmacheerpuppy I dunno if this is useful but this is how I return the raw JSON when using Elasticsearch ```for { dbResults err := scroller.Do(db.Ctx) if err == io.EOF { break // all results retrieved } if err != nil { return nil err } for _ hit := range dbResults.Hits.Hits { results = append(results hit.Source) } }```
28918;your DateWithHit is _source
28919;thats where date exists
28920;> you didn't give up asking I don't think you ever even started reading@misterturtle i did but im not asking you to believe me if it matters that much to you
28921;None
28922;üôÄ
28923;I need to create a generic way of dealing with these
28924;This is disgusting
28925;:thinkingo:
28926;this is why i ask
28927;we pasted you links to docs that show you what it is how it works and what it's called
28928;should have added the slice context in the question üòâ
28929;yes but how did i know its about slices?
28930;i just saw that symbol in the `len` docs i think how did i know if the 2 are related
28931;i mean i know now but didnt know before
28932;generally googling a symbol is futile ask what does a colon do in golang
28933;well context
28934;"or just do the tour ;)"
28935;> what does colon do in golang
28936;`len(foo[3:4])` is several different things
28937;is a much better search btw
28938;Because you saw the : inside a slice
28939;None
28940;> Because you saw the : inside a slice@Sgt_Tailor i didnt actually
28941;bruh
28942;where did you see it then
28943;what are you asking then
28944;there are only 2 instances of : in the spec
28945;:= and [:]
28946;somewhere deep down in docs
28947;Don't think there are other valid operations using :
28948;and cases i guess
28949;:=
28950;[:]
28951;case:
28952;and after a struct key
28953;labels? for goto?
28954;"never used them can;'t remember"
28955;okay there are more than i thought lmao
28956;hehe anythign to prove you wrong Mike
28957;ew labels
28958;goto end
28959;like 4 uses
28960;"Not being able to break 2 sucks; labels made me think of that."
28961;i found a site but dont understand a thing because they dont explain what a colon does just tells me to use it
28962;None
28963;https://tour.golang.org/moretypes/7
28964;None
28965;None
28966;like the tour has interactive runnable tweakable examples
28967;i'm fairly sure it's localized to a fair number of languages
28968;so if you're just struggling with the English of it
28969;there may be a version that works better for you
28970;ah so it makes a slice out of an existing one
28971;wow it's almost like the tour is a good resource üôÉ
28972;"remember what i said about wanting to actually accomplish things""?"
28973;Yes which the tour covers. It also links to an _excellent_ blogpost
28974;could have just said that in one sentence instead of sending me around sites for a few hours
28975;i mean
28976;if you read the tour link someone sent eight hours ago
28977;we wouldn't have had to spend eight hours trying to explain it
28978;We have linked to _the same page_ multiple times
28979;this is a golang server after all
28980;i was gone half of the time
28981;If you don't take the time to _actually_ read what we link to you we have to take more drastic measures to get through to you
28982;and also its not like im going to click on every single link when you guys send me like 20
28983;some i click some i miss
28984;i mean that's part of the problem
28985;Most of the times we've linked the page you were still responding to messages so you definitely were there
28986;jesus im not a clicking bot
28987;You are a repeating question bot
28988;you're trying to be a developer
28989;development is 90% reading
28990;im a hobbyist
28991;that's fine that doesn't change how programming works
28992;you don't do carpentry different if you're doing it for fun versus doing it as a job
28993;for me it does
28994;i dont have the whole day to search docs
28995;you don't have to. if you ask a question here that is answered by the tour or official documentation someone will be very happy to link you directly to it.
28996;i dont even understand half the docs
28997;i know
28998;that's normal
28999;then whats the point
29000;you aren't supposed to understand them the first time
29001;you're supposed to read them many many times
29002;and practice
29003;and experiment
29004;i only understood this time because i watched a video that had it in it so i already understood a little peice of it
29005;> and practice@deezy sometimes i dont wanna just make a new project and practice making slices
29006;¬Ø\\_(„ÉÑ)_/¬Ø
29007;you can't get better without practice
29008;Playground works wonders for testing things
29009;and you can't learn without absorbing information from documentation
29010;Like that
29011;https://play.golang.org/
29012;i can practice by integrating the feature into my own current project
29013;the playground is your friend
29014;you could
29015;but that also means you're juggling all the things you're doing in your code
29016;‚ÄúRead docs‚Äù‚ÄúWhat the hell is this‚Äù‚ÄúMake some playground test‚Äù‚ÄúOoh okay‚Äù
29017;ON TOP OF trying to learn a new thing.
29018;Like a 15 minute process
29019;it is normal for that to be challenging
29020;it's usually better to practice the new thing in isolation
29021;yeah but its also possible to make it a 2 minute process
29022;if you say so
29023;¬Ø\\_(„ÉÑ)_/¬Ø
29024;by just giving an answer i mean this chat is literally for golang users to share information with each other about golang
29025;i mean theres no help channel
29026;Giving the link to the tour is THE answer though
29027;yeah the 15 minute answer
29028;compared to the 2 minute answer
29029;But you realize that you're being incredibly selfish right?
29030;You're insisting that we sit here and be ondemand problem solvers for you
29031;And perfectly explain everything you need to know to you
29032;Something 70% of questions here are answered by something directly in the tour.20% are answered by a doc5% are answered by the specAnd the last 5% are genuinely tough questions
29033;yuuuup
29034;Sorry actually
29035;5% are sneaker bots
29036;:kek:
29037;look bud we're more than happy to point you to the resources you need to learn Go. you are not paying us to teach you go
29038;I am not a copy paste bot from the tour
29039;so we're not going to be your ondemand mentor
29040;The tour and spec and docs say the words more eloquently than I can anyways
29041;Because they were written by people trying to teach this stuff
29042;Well the tour at the least
29043;like holy shit dude i showed you a screenshot of ONE SENTENCE of the tour and you immediately grapsed EVERYTHING you had been trying to find. and you're still refusing to use it as a resource
29044;it worked in real time in front of everyone
29045;The tour is very good. The tour is our friend
29046;Stuff not covered by the tour or more intricate we'll gladly answer
29047;What good is a2 minute process if it's obvious you dont learn something from it
29048;But for basic questions you'll get linked to the documentation 11/10 times. Because documentation should be your friend
29049;It is there even when we are not
29050;I think we‚Äôve said enough about it though
29051;Yeah I'm done on this topic
29052;yeah i just got pretty cheesed
29053;That‚Äôs cause your old and grumpy deezy
29054;Go2 when?
29055;Got2Go
29056;Should be the name
29057;Or just Goto
29058;Got2Go Fast
29059;Just O
29060;Go 2: Generic Boogaloo
29061;The g is still catching up
29062;Because it‚Äôs so fast
29063;I've learnt one thing from all this never cheese the deez
29064;i been doing this 20 years i know some stuff
29065;literally
29066;never
29067;cheese
29068;the
29069;deez
29070;never.
29071;It‚Äôs like the old wise master in a fighting movie
29072;Calm and peaceful drinking tea
29073;Until they are needed to fight
29074;i do aspire for the Uncle Iroh aesthetic
29075;does anyone else feel like go 2 is going to be wayyy different from go 1?
29076;like closer to revolutionary than evolutionary
29077;Not sure what you mean by that
29078;You mean breaking backwards compatibility?
29079;Go 2 is just a name
29080;Elasticsearch is weird man
29081;They are just going to release the stuff until it‚Äôs like a ‚Äúgo2l
29082;Eventually they will bump the major version though right
29083;I forget
29084;When they add stuff that won‚Äôt be backwards compatible
29085;One of the major proposals I know they are doing a 3 stage update on it
29086;Where the first allows you to do it
29087;The 2nd tells you to do it
29088;And 3rd removes the old way
29089;I forget which it is though
29090;But I may be wrong
29091;So according to semver that last step should come with a major version bump
29092;Yeah
29093;> Go 2: Generic Boogaloo@misterturtle üòÅ
29094;I'm glad someone enjoyed it
29095;of course
29096;I'm now generic doad
29097;I'd just move to a new language tbh
29098;I'm honoured
29099;move to Vlang
29100;where every optional is 400 bytes
29101;no more no less
29102;besides the incompetence vlang is pretty much just rusty go
29103;with some swift in there
29104;Sounds like my kinda jam
29105;https://play.golang.org/p/o_39jN8C74could someone help me by explaining what the difference is between `return Wrapper{}` and `return &Wrapper{}`
29106;the former is a value the latter is a pointer
29107;well that much is given
29108;why would you do one over the other
29109;because values are copied
29110;changes made to a copy aren't reflected in the original
29111;you just look at the function signature
29112;but if i'm calling `Test()` multiple times the `&Wrapper{}` is a different instance each time
29113;if it wants a pointer then return a pointer
29114;if it's a different instance each time i can't see a difference atm between Wrapper and &Wrapper
29115;https://play.golang.org/p/jUuAuZg7RHD
29116;i know this
29117;i don't think i'm getting my question across
29118;yeah it was confusing
29119;it sounds like your question is i\'m writing some loop and getting new instances of my thing not what\'s &Thing{} mean
29120;i don't understand the problem tho
29121;you're creating 4 different Wrappers
29122;so you have 4 different pointers
29123;is there a specific reason you'd choose &Wrapper{} over Wrapper{}
29124;```[1:05 PM] deezy: because values are copied[1:05 PM] deezy: changes made to a copy aren't reflected in the original```https://play.golang.org/p/jUuAuZg7RHD
29125;if you need to pass a thing around and modify it you could use a pointer
29126;it makes no difference in my first link
29127;could you use that example rather than this new one since it's not relevant
29128;you aren't doing anything in your example where pointers matter
29129;you're just creating a thing and printing its memory address
29130;right
29131;so from that point going forward
29132;at what point would i say that it should be a pointer or not
29133;https://play.golang.org/p/HdCcb3vg47Q
29134;> if you need to pass a thing around and modify it you could use a pointer
29135;i know this. i'm not seeing how it's applied to my example
29136;that's because it can't be
29137;your example isn't doing anything
29138;you're not modifying the values you're not using them
29139;you're just creating an arbitrary pile of bits and then printing its memory address
29140;so is the idea to return a pointer just in case someone wants to modify it?
29141;it's generally better if that's a deliberate decision
29142;and not a just in case one
29143;I had a good example earlier beep but I'm on mobile and cant find it
29144;I had pointer vs no pointer
29145;and you don't HAVE to return a pointer
29146;because
29147;i'm happy to be pinged whenever. this is a howtoapproach question that i'm definitely happy to hear advice on
29148;if I call `NewThing()` and it returns `Thing` ( as opposed to `Thing` ) I can still call `DoThing(&thing)`
29149;and pass the pointer down if i need it
29150;ok i'll just digest what you said
29151;could you write a quick example of that approach?
29152;```gotype Thing struct {}func NewThing() Thing {return Thing{}}func DoThing(t Thing) {}func main() { t := NewThing() DoThing(&t)}```
29153;https://play.golang.org/p/HdCcb3vg47Q also this example that i've already written
29154;@beepsandboops https://play.golang.org/p/TlQ4gX9PgqS https://play.golang.org/p/bRhWahuf23h
29155;Deezys example is pretty clear though
29156;i really wish playground had syntax highlighting
29157;:robpike:
29158;yeah i'm not a big fan of rob pike i guess
29159;he'll probably have a strong opinion on that too
29160;A lot of people use hatebin for posting code. It has syntax highlighting but I don't think it runs code for testing.
29161;I wish playground had muktiline tab indent
29162;there\'s a better playground thing
29163;but eh i prefer regular playground
29164;Sometimes after deleting a block of code ctrl+z doesnt work
29165;https://goplay.tools/
29166;no vim mode tho
29167;i want vim mode
29168;@deezyhttps://play.golang.org/p/sJziRgIxrUWis this the idea you're getting at?
29169;i have to use a function and not a method
29170;i mean both work
29171;@_diamondburned_ that's much easier to read. i have no idea why they don't just do it on the playground
29172;protip
29173;methods are just functions
29174;functions that automatically have an extra argument stuffed into them
29175;I thought a method was a function defined on a struct?
29176;it is
29177;How do you mean have an extra argument stuffed into them?
29178;it's a function that automatically has an extra argument ( a copy/pointer of a specific struct ) injected into it
29179;the receiver
29180;`func (t Thing) Foo(arg1 string arg2 string)`
29181;Ooooh gotcha is that how it works under thr hood?
29182;yeah the compiler just shoves `t` into the scope
29183;where `t` is a copy of or pointer to a specific instance of Thing
29184;Can anyone help me out with a sql issue with golang I'm also asking if we can keep it in dms.
29185;yes and no respectively
29186;i mean it's a free country but DMs is generally against protocol
29187;@tindolt
29188;> that's much easier to read. i have no idea why they don't just do it on the playgroundunnecessary bloat
29189;:robpike:
29190;syntax highlighting is bloat? good one
29191;according to the commander
29192;it is bloat though
29193;you need javascript on the page
29194;and adding highlighting adds a lot of overhead to the text input box
29195;because web
29196;this is a ridiculous argument. they could easily add a checkbox to turn it on and have it default off and everyone wins
29197;it isn't even really an argument. the solution you want exists
29198;¬Ø\\_(„ÉÑ)_/¬Ø
29199;<https://github.com/golang/go/issues/21123>
29200;None
29201;I literally just explained to you why and you just ignored it saying it\'s ridiculous but sure
29202;:robpike: has spoken
29203;:kek:
29204;good grief rob
29205;None
29206;this thread is so good
29207;is this satire?
29208;nope
29209;just developers having opinions
29210;None
29211;you'll get used to it
29212;i won't ever get used to rob pike being an idiot
29213;he can't be serious
29214;`spitzensparken blinkelichtzen` :ayy:
29215;syntax highlighting?
29216;CRINGE
29217;That thread is 100% serious btw
29218;Banter among devs
29219;yeah it's completely real
29220;So yeah if you want syntax highlighting for the playground: <https://goplay.space/> has your back
29221;But if you put so much code there that you need it you're probably abusing it xD
29222;pooop
29223;Nice input as always Vasily xD
29224;i really wonder what went through his head when rob pike posted the syntax highlighting thing
29225;Went full hyperbruh
29226;spitzensparken blinkelichtzen is now my favourite phrase
29227;yeah i tried to translate that what the hell
29228;it doesn't exist
29229;all it could give me was something about parking
29230;https://news.ycombinator.com/item?id=18732228
29231;fascinating
29232;language is weird
29233;spitzen sparken blinke lichtzen gives me pointed sparks blink light lights
29234;so I\'d assume is just a word for fancy flashy stuff
29235;It is a wordplay in German although my German is a bit rough these days
29236;I see
29237;It isn't really german though
29238;https://en.wikipedia.org/wiki/Rinderkennzeichnungs_und_Rindfleischetikettierungs%C3%BCberwachungsaufgaben%C3%BCbertragungsgesetzhttps://en.wikipedia.org/wiki/Donaudampfschiffahrtselektrizit%C3%A4tenhauptbetriebswerkbauunterbeamtengesellschaftreal german
29239;Unlimited compounding is a neat trick some germanic languages do
29240;https://opensource.googleblog.com/2020/08/newcasestudiesaboutgooglesuseofgo.html Go projects at Google
29241;still a minority it seems
29242;Kindercarnavalsoptochtvoorbereidingswerkzaamhedencomit√©leden is a valid Dutch word for example
29243;> still a minority it seems@func that minority contains some key components of major projects though
29244;Nearly as long as the Welsh town
29245;no doubt about it
29246;Children\'s carnival parade preparation work committee members
29247;Indeed terra
29248;Oh it's longer actually
29249;Welsh town is 58 letters
29250;I could keep adding more compounds though
29251;Llanfairpwllgwyngyllgogerychwyrndrobwllllantysiliogogogoch
29252;would
29253;could
29254;yes
29255;should
29256;Taumatawhakatangihangakoauauotamateapokaiwhenuakitanatahu
29257;Hill in new Zealand
29258;just a hill
29259;Wonder if the longest
29260;these convo are more suitable in #offtopic
29261;Yeah moved it there
29262;Hey I'm searching a SQL library which can be used with various SQL databases (sqlite mysql postgresql etc). Do you guys know one?
29263;database/sql
29264;then check the different drivers on the wiki
29265;yeah but is there any driver which supports multiple database types?
29266;probably not no
29267;drivers are kinda by definition for specific targets
29268;I could use gorm but that would be kinda overkill for my situation so I asked myself if there's a more lightweight version. But okay then I'll need to implement multiple drivers. Thanks üòÑ
29269;Database/sql abstracts a lot of the stuff away
29270;You may have to pay attention to specific bits of syntax though
29271;mhm. I use it to support multiple storage drivers for <https://github.com/Lukaesebrot/pasty> and so it would be cool to have a single storage driver which supports multiple kinds of SQL databases. But I think it's no problem if I just add multiple sql drivers then
29272;well I see database/sql just supports exactly what I need
29273;how would I get go to pass flags to the c compiler?
29274;The cgo reference page should specify CFLAGS and LDFLAGS
29275;check the docs of `go build ` you can provide cflags and ldflags
29276;thanks and also how would I change the default compiler?
29277;CC=compiler?
29278;> check the docs of `go build ` you can provide cflags and ldflags@Sgt_Tailor where do I find this?
29279;https://golang.org/cmd/go/
29280;should have gcflags somewhere
29281;ldflags will be passed to the `go tool link` command
29282;which is documented here <https://golang.org/cmd/link/>
29283;and gcflags will be passed to <https://golang.org/cmd/compile/>
29284;Are libraries aka prebuilt ready to use Functions? And Framework r just something like Wordpress drag and drop. Just have to tell it how many button here and what colors.
29285;?
29286;Not entirely no a library (package) is usually fairly narrowly focused and implements things needed to achieve its purpose and a framework would be a collection of packages joined together to make a specific bigger task easier
29287;Eg there is an http router package called gin which provides easier ways to handle routing http requests and generating http responses. There's a framework called a buffalo which aims to bring specific packages related to most aspects of creating a web server together including gin for routing and ultimately is designed to create simple web services quicker
29288;I think I understood the question...
29289;generally it's said that frameworks call your code but library code is called by you
29290;well I stole this from the Vugu readme
29291;I wouldn't call Vugu a library it feels like a framework
29292;but that's what they claim
29293;Doesn't react call itself a library too?
29294;yeah it does
29295;which is weird to me
29296;I feel like everything is a library and some libraries (ones that do a lot) are also frameworks
29297;React was more of a library than Angular
29298;There isn‚Äôt really a formal definition I don‚Äôt think
29299;React calls itself a library because it concerns itself with just the presentation layer of the app
29300;While angular and other frameworks also determined how you‚Äôd be doing DI service logic etc
29301;So at least in the frontend web app space that‚Äôs where the distinction lies
29302;I think Vugu also determines how you'd do those stuff
29303;iirc there's a dedicated page on the API for DI
29304;```panic: runtime error: invalid memory address or nil pointer dereference[signal 0xc0000005 code=0x0 addr=0x40 pc=0x9aa54d]```and apparently this is the line ```defer resp.Body.Close()```
29305;what could this mean ?
29306;Maybe `resp.Body` is already closed?
29307;it isnt
29308;What type is `resp.Body`?
29309;```goresp err := client.Do(req)```
29310;Did you check `err` before deferring that call?
29311;yes
29312;Could you show a more complete picture of that flow?
29313;And what package you are using so we can see what `client.Do()` returns?
29314;yes
29315;sec
29316;ok i figured out the issue
29317;i think
29318;prob net/http
29319;it was a proxy issue
29320;@Deleted User why do you need someone to fork net/http
29321;for a job
29322;to modify some stuff
29323;curious why that would ever be necessary :thinkingo:
29324;unfortunately it is
29325;dm me if you are interested
29326;Somehow I doubt it
29327;and my guess is if you just said it here someone would have an answer lmao
29328;nah they already did
29329;it was bypassing Akamai for the nth time this month
29330;lmaoo
29331;:facepalm:
29332;its not for akamai
29333;> and my guess is if you just said it here someone would have an answer lmao@Doad already tried but they just told me to make it myself
29334;something to do with the lame bypassing anti bot stuff
29335;sneakernet #312
29336;thus i came to the conclusion that i dont know how to do it myself
29337;so i need someone else
29338;can't you just like
29339;https://golang.org/pkg/net/http/#Header.Write
29340;or maybe not
29341;hmmmm
29342;The problem is probably the header order
29343;yea
29344;yeah
29345;i wouldnt say simple but at the same time not extremely hard
29346;couldn't you just like
29347;use newlines
29348;and add one big header
29349;:what: that works ?
29350;yeah like isn't the raw data for headers just a text blob
29351;lol
29352;i'd die if that works
29353;i mean there are at least 10 convos here about HTTP libraries that preserve header orders
29354;I don't think they're willing to learn it though
29355;nah
29356;net/http validates the header field and value
29357;@_diamondburned_ i would do it if didnt just start with go
29358;so why not get someone experienced to do it
29359;is it a crime to hire people ...
29360;not really
29361;I just don't think you'll have much luck here
29362;I might be wrong
29363;well i dont know where else to look than the golang discord
29364;wow it would work if header syntax wasn't validated
29365;Just remove that and you're good to go lol
29366;gib money now
29367;if its so simple go fork and ill give u money
29368;ü§è üí∏
29369;What even
29370;```func isCTL(b byte) bool { const del = 0x7f // a CTL return b <   || b == del}```
29371;._.
29372;> well i dont know where else to look than the golang discordmaybe sites that are actually made for hiring people to work on projects?
29373;:Thonk:
29374;@_diamondburned_
29375;tried
29376;rip
29377;indians dont understand what header order even means
29378;smaller than space or del
29379;there were like 6 guys who all flaked
29380;@Sgt_Tailor huh surprised they didn't just use unicode.IsControl?
29381;ig that's faster?
29382;since it works on byte and unicode is for runes
29383;and it only covers ASCII
29384;\x99
29385;0x99 lol
29386;pretty sure if you change this```Gofunc (h Header) Add(key value string) { textproto.MIMEHeader(h).Add(key value)}```to this```Gofunc (h Header) Add(key value string) { h[key] = append(h[key] value)}```it'd sorta work in a really hacky way lmao
29387;key has to be the first header key you want
29388;and value is its value plus all the other headers delimited with newlines
29389;100% untested 90% guestimation
29390;I'm genius :thinksmart:
29391;gentlemen may I introduce the forbidden black magic
29392;https://github.com/bouk/monkey
29393;ah yes
29394;someone at work asked me if he should use that
29395;this would be a perfect use case
29396;no fork necessary :ayy:
29397;lmao yeah
29398;did you shoot it down immediately btw
29399;please tell me you did
29400;yes
29401;epic
29402;yes I did
29403;I didn't even wait for him to tell me why
29404;lol nice
29405;okay I might have to try monkey patching this and see if it works
29406;it sounds just awful enough to have my attention
29407;lmfao
29408;can you üêíü©π types too?
29409;or nah
29410;Monke
29411;"imagine a library like `import _ github.com/bruhmoment/orderedheader""`"
29412;and it just swaps the entire Header type out with a []string
29413;:OMEGALUL:
29414;man that'd be so clean
29415;hmm monkey not working
29416;ah had to disable inlining
29417;alright time to try something cursed
29418;@_diamondburned_ stop imagining
29419;and go to work
29420;:aNGERY:
29421;no
29422;:sadclown: the disrespect
29423;im sad now
29424;@Doad let me know how it turns out
29425;You might be solving the biggest problem of all time. Making a sneaker bot compatible http lib
29426;:dogekek:
29427;he didnt want to do it
29428;told me to monkey it
29429;Aww
29430;I'm trying to monkey it now lmao
29431;hmm okay so the header validation occurs elsewhere
29432;this is like half working lmao
29433;im praying
29434;Start writing those checks
29435;cheques
29436;then keep it on the down low
29437;there are atleast 20 leechers reading this rn
29438;someone help me find this shitty validation function
29439;:kek:
29440;invalid header field value
29441;help me find this string lmao
29442;name ?
29443;just grep R the string
29444;or sourcegraph
29445;does sourcegrpah even do go stdlib
29446;I gotta clone it
29447;lazy
29448;@Str≈ìm fix
29449;alright I found it
29450;this is going to be so cursed if it works
29451;:dogekek:
29452;fork it
29453;you will get million stars
29454;what are you doing üò†
29455;it looks like the dog has a tophat
29456;haha
29457;what are y'all's favorite thing of working with Go?
29458;the toolchain
29459;no makefiles no hassle
29460;my favorite thing is getting the seniors to do all of the work for me
29461;`go build .` full stop
29462;this is why i'm not doing anything
29463;wym @Deleted User
29464;its a joke
29465;> this is why i'm not doing anything man really thought he is a senior....
29466;the joke went past me
29467;hmm monkey isn't patching this function
29468;ah you are trying a plug in solution ?
29469;"> invalid header field value""@Doad in httpguts iirc"
29470;Ah you already found it
29471;well that's where the check function is yeah
29472;I'm patching that to always return true but it doesn't seem to take
29473;fork time ??
29474;otherwise I have to patch the roundTrip function
29475;I'm not forking you twat
29476;Remove unlines?
29477;:dogekek:
29478;let me monkey
29479;I already am
29480;Inline
29481;i mean monkey is better true
29482;I'm successfully patching other funcs
29483;like the header set func
29484;so it doesn't canonicalize it
29485;Hmmm
29486;I wonder if it's because `net/http` is imported before guts
29487;hmmm
29488;What function are you patching exactly?
29489;`httpguts.ValidHeaderFieldValue`
29490;Oooh hello @Deleted User
29491;told you they were watching
29492;@Willl hi
29493;gonna sell to the highest bidder
29494;they never sleep bro
29495;always lurking
29496;no
29497;I came here bc I needed something
29498;dont interupt now
29499;something magical is happening
29500;Need to create a blank array.
29501;very strange that `net/http` isn't using the patched function
29502;`make([]Whatever 0)`
29503;Go converts empty slices into null though right?
29504;uh
29505;Im home
29506;unlikely
29507;but maybe
29508;depends on what you're doing and how you're doing it
29509;¬Ø\\_(„ÉÑ)_/¬Ø
29510;convert means nothing without context
29511;convert tooo...a string? json? gob data?
29512;almost none of these will result in null because an empty slice is not nothing
29513;it is an empty slice
29514;if you have an empty box you still have a thing
29515;it just doesn't have anything inside it.
29516;an empty slice is not nil
29517;"Well I am using a struct to create the json.Names []string `JSON""Names""` is giving me \'null\"
29518;sure because you're not initializing your slice properly
29519;ah.
29520;`var x []string` WILL be `nil`
29521;you need to use `make()`
29522;sup deezy
29523;weird it seems that `net/http` is getting a copy of this function
29524;because if I call it directly it hits the patched version
29525;oh no way do they vendor this package?
29526;try patching the parent function
29527;Good ideas only
29528;you don't even know why that would suck
29529;well my dumb ideas will inspire your good ideas
29530;ah it is because they vendor it
29531;hmmmmm
29532;how to do this
29533;havent you ever watched doctor house ?
29534;im new to golang and was wondering if i could add new values to a struct? i couldn't find anything online üòÉ
29535;like add a field to a struct that isn't defined in the struct?
29536;no you can't
29537;hmmm alright i'll have to think of another way then. thanks tho
29538;does anyone know how to send http requests to the minecraft website to login to an account?
29539;@Deleted User just use a map
29540;@Doad alright thank you
29541;> does anyone know how to send http requests to the minecraft website to login to an account?@kulfi chrome dev tools network tab
29542;what's that
29543;inspect element
29544;I want to create a program that sends name change requests to minecraft.
29545;well you're going to have to figure out how to get past captcha
29546;I'm a beginner
29547;there is none
29548;@_diamondburned_if its on github you can search it
29549;Eventually we'll have gotodefinition into stdlib probably
29550;holy shit I think this works
29551;what the actual
29552;wow
29553;https://www.youtube.com/watch?v=qFFdWg0ZgbI is there anyway to make a software like this on go?
29554;go can do anything
29555;proof or fake
29556;None
29557;it's stripping the newlines out
29558;@kulfi you will need to learn mux library etc and basic http functions you can research
29559;but we close
29560;how long will that take?
29561;ü§§
29562;@kulfi depends on you.
29563;actually
29564;depends on whether you're willing to read documentation or not
29565;mostly
29566;I'm willing to
29567;https://golang.org/pkg/net/http/
29568;https://godoc.org/net/http/httptest
29569;I personally havent gotten down to read any docs
29570;i should actually just busy
29571;@Doad time to patch the round tripper transport
29572;But you're close
29573;this is so cursed now
29574;it's half a cloned `net/http` package
29575;and half monkey
29576;monkey isn't really needed anymore though
29577;would've worked if they didn't vendor deps in the stdlib
29578;Make a pr after you successfully do it
29579;eee
29580;stackoverflow
29581;üôÇ
29582;send the full thing
29583;let me assess
29584;hm
29585;thats iteration
29586;you can research programming iterations then apply your knowledge
29587;fuck.
29588;one sec
29589;@deezy come here
29590;yes i assume
29591;let me look closley
29592;for is a loop statement
29593;A for statement specifies repeated execution of a block. There are three forms: The iteration may be controlled by a single condition a for clause or a range clause.
29594;ohhhh https://goproverbs.github.io/ is good but somehow I've never seen it before
29595;psalms
29596;We quote them fairly often
29597;yea but I didn't realize there's a collection of it ~~maintained by robpike himself~~
29598;Clear not clever. Reflection is never clear
29599;clever code is bad
29600;functions can return any amount of values
29601;https://gobyexample.com/multiplereturnvalues
29602;can have functions that return 5 or more things if you wanted
29603;Yes
29604;TargetCustom returns multiple things
29605;2 things
29606;x y z a b c := BonkersFunction()
29607;not many languages support it natively
29608;JavaScript and python support it by destructuring
29609;Multiple return types thats a
29610;all
29611;I think this is working :ayy:
29612;holy fucking shit
29613;nil represents nothingness
29614;true and false dont they represent something
29615;:hypedpepe:
29616;None
29617;wow this is so cursed
29618;works ?
29619;yup
29620;gg lol
29621;notice the order of C B and A
29622;yea i see it
29623;I have to clean this nightmare code up
29624;and remove monkey
29625;amazing
29626;remove monkey ?
29627;oh you cleaning for a pr or ?
29628;monkey is unnecessary now
29629;because I had to clone `net/http`
29630;told you
29631;:sadclown:
29632;not like you had any clue why
29633;:peeposhrug:
29634;alright now selling to the highest bidder
29635;1 week bidding time
29636;:cringe:
29637;@Doad 5 dollars and a subscription to meatbox to a fake address if you sell to me
29638;alright pretty good pretty good
29639;$7
29640;and a picture of my dog
29641;not bad
29642;A blowie + previous
29643;:kkk_hmm:
29644;oooo
29645;blowie + rug n tug
29646;:cereal:
29647;@Willl you want in?
29648;this is getting good
29649;prob should take bids in #offtopic
29650;`fmt.Println(targets)`?
29651;what no
29652;that line prints a variable called `targets`
29653;yup
29654;x is whatever the first return var is
29655;and y is the second return var
29656;they're variables
29657;returned from a function
29658;functions often return errors
29659;so you check them
29660;`err` is just a common name for it
29661;since it makes sense
29662;Yo
29663;wtf
29664;I don't want to involve myself in any sexual activites with Zed
29665;If he's in I'm out.
29666;got unordered headers working taking bids
29667;:partygopher:
29668;???
29669;it's a map
29670;gives the key type
29671;https://tour.golang.org/moretypes/19
29672;there\'s also a whole page titled creating a slice with make if you\'re wondering about slices: <https://tour.golang.org/moretypes/13>
29673;Yes
29674;go through the whole tour in order
29675;Absorb the tour
29676;yeah that's what the tour is for!
29677;it covers all the core language features
29678;i don't remember
29679;2 years
29680;i've gone through it about 150 times
29681;¬Ø\\_(„ÉÑ)_/¬Ø
29682;:kkk_LOLTROLLFACELOL:
29683;that's the thing about documentation
29684;you don't read it once
29685;unless you have eidetic memory you will and must come back to documentation more than once
29686;I think the go tour is my most used bookmark oo
29687;It's one of the most convenient quick references
29688;is there a way to recover in a defer statement and return an error?
29689;"```gofunc foo() error { var err error defer func() { if r := recover(); r != nil { err = fmt.Errorf(""panic occurred: %v r) } }() panic(""test"")}```"
29690;I've never done the tour completely... I read 1 one page tutorial and then started playing with it and looking up the docs for anything I didn't know.
29691;But that was after I have done Python for about 15 years and taught myself Java and enough C C++ C# and Haskell to understand what I am reading...
29692;> JavaScript and python support it by destructuringYeah in Python you return a tuple or list and it can deconstruct it into multiple variables like```pydef foo(): return (1 2) # The parens are optional 1,2 is also validx y = foo()print(x) # prints 1print(y) # prints 2```
29693;Basically the same thing Go does
29694;```package targetsapi.Method(arg1 arg2)```if that's the only contents of the file that won't even compile
29695;so
29696;Unless `api` is defined in another file in the targets package
29697;you still can't just call methods in the top scope
29698;https://play.golang.org/p/AIRZSif28jp
29699;```./prog.go:9:1: syntax error: nondeclaration statement outside function body```
29700;right that still won't compile
29701;if that's the only code defined the whole package
29702;okay that should compile
29703;Oh yeah... forgot about that
29704;now on to the question
29705;> where does api come from
29706;you tell me you wrote this code
29707;all files sharing a package all share a scope/namespace
29708;yeah that's not really
29709;you could import it
29710;you could have it defined in the same package
29711;there's a few possible answers
29712;there's lots of ways to define names
29713;assuming you haven't imported something called `api` then yes the name comes from the package.
29714;check the docs or the source or use your editor tooling
29715;you can but it's not really worth the effort.
29716;i know about dir()
29717;and i do miss it sometimes
29718;`reflect`
29719;have fun with your madness
29720;OR you can just read documentation
29721;üôÉ
29722;bummer
29723;time to read the source then
29724;yeah
29725;sounds like it's time to read the source
29726;Like I said you can use `reflect` if you want
29727;Do you have access to the source?
29728;nah reflect is the introspection library
29729;you can use it
29730;but it fucking sucks
29731;Then why not use godoc?
29732;and it will make your life miserable
29733;Do you have access to the source code of the api?
29734;protip: writing go documentation requires writing comments that precede type/etc declarations
29735;so
29736;you're going to be in there anyways
29737;nah it's
29738;100% direct
29739;the documentation is DIRECTLY above the thing it's documenting
29740;and godoc is very good
29741;But if all you need is having a list of the methods printed out and you have access to the API's source code then running godoc on it will give you all the exported methods even if you don't have comments documenting them...
29742;it'll give you a list of the exported types/methods
29743;in a webpage
29744;with hyperlinks
29745;it's quite nice
29746;sometimes you just have to do work dawg
29747;i'm sure you've googled around if you haven't found a thing that automatically generates rst ocumentation from go source code
29748;it doesn't exist
29749;and you'll have to do some legwork
29750;Like this that I pushed to git a couple days ago has 0 comments but all the methods are shown with their definition https://pkg.go.dev/github.com/dustinpianalto/rpnparse?tab=doc
29751;it could
29752;it doesn't
29753;that's what i'm saying. most of the basic pieces are there you just have to glue them together
29754;also like
29755;if you want to be obtuse about it
29756;you could use an html scraper to pull the godoc page
29757;and then generate stubbed out RST blocks
29758;¬Ø\\_(„ÉÑ)_/¬Ø
29759;That sounds like more work than just doing it by hand... lol
29760;exactly
29761;i mean yes godoc is automatic documentation generation it doesn't generate rst tho. it COULD generate rst but nobody has added that feature
29762;?
29763;no godoc should pull any available repo
29764;No versioning doesn't matter for go doc
29765;yeah. i think godoc is aware of versioning but it can always at the very least pull master
29766;If you have the versioning then it will use it... but it doesn't need it
29767;and generate docs for that
29768;F
29769;fun fact you can run godoc locally
29770;and just use it over localhost
29771;uh
29772;it's either `go tool godoc` or `godoc`
29773;you run it locally
29774;it's just the godoc server but running locally
29775;i mean you could also google run godoc locally
29776;100000% chance there's a thousand stackoverflow answers
29777;yeah that's...a very vague query
29778;which is fine you're figuring things out
29779;it's just super ambiguous
29780;btw godoc has moved to https://pkg.go.dev
29781;+
29782;in the most trivial case
29783;try it and see üôÉ
29784;https://play.golang.org/
29785;it really is
29786;nice
29787;sure doesn't seem like it
29788;but
29789;yeah idk what to google for that
29790;i haven't fucked with jupyter yet
29791;noice
29792;go is a really good language
29793;when you stop fighting it and just do things the way it likes
29794;"I\'m refactoring one of my old projects and I have no idea what this does```gofunc clear() { value ok := clear[runtime.GOOS] if ok { value() } else { panic(""unsupported platform"") }}```"
29795;checks if a key exists if it does it calls the function for that key
29796;I have no memory of this :thinkingo:
29797;¬Ø\\_(„ÉÑ)_/¬Ø
29798;i never knew about it so
29799;you're asking the wrong person
29800;yeah that's it
29801;substitutions?
29802;don't know what you mean
29803;`fmt.Sprintf()`?
29804;https://golang.org/pkg/fmt/#Sprintf
29805;Sprintf() returns the formatted output as a string instead of just printing it to stdout
29806;nope
29807;inside
29808;think about it
29809;Sprintf() returns a string
29810;api.Function() neeeds a string
29811;because those are different verbs
29812;you should probably read the docs fam
29813;i'm not teaching you how printf works
29814;it's exactly the same
29815;Yes it is
29816;there's a 100% chance that Debugf() calls Sprintf() or similar
29817;sure you can put as many substitutions in as you want
29818;https://golang.org/pkg/fmt/ Read the top section about the verbs
29819;That will work fine if both `name` and `age` are strings
29820;it mean it doesn't
29821;right
29822;it depends on the types you pass in
29823;Scroll all the way to the top of the page
29824;There is a big long section about the different verbs
29825;Yeah. First step is to learn that the verbs exist and have different meanings
29826;Second
29827;`const name,age = Kim 22`
29828;a string and an integer
29829;different types
29830;types matter in go
29831;quite a lot
29832;I know it is probably bad practice but I find myself using `%v` a lot unless I know I need a specific format...
29833;`%#v` is my goto for debugging
29834;see everything you could possibly need
29835;That is generally what I need it for to print something out for debugging
29836;I forgot about the `#` until I looked up the page just now... I will have to remember that
29837;"This is a little weird imo... It adds the prefix to everything except it supresses it for pointers...```alternate format: add leading 0b for binary (%#b) 0 for octal (%#o), 0x or 0X for hex (%#x or %#X); suppress 0x for %p (%#p);```"
29838;You can use Sprintf anywhere that something expects a string as input
29839;sure
29840;oh well
29841;that's
29842;kinda not how pagers are supposed to work
29843;at all
29844;although git diff and so on do this sometimes
29845;hmm
29846;but they may have their own pager
29847;and not use less via os.Exec
29848;In that example on SO they create a `strings.NewReader` with a string that they feed into the pager... Just replace the string with a call to Sprintf
29849;So you have a function that outputs a string?
29850;well it's important to think about this in terms of types
29851;this function returns a string
29852;presumably
29853;"Just taking the example from SO```gofunc IOutputText() string { out := The text to output..."" return out}func main() { // Could read $PAGER rather than hardcoding the path. cmd := exec.Command(""/usr/bin/less"") // Feed it with the string you want to display. cmd.Stdin = strings.NewReader(IOutputText()) // This is crucial  otherwise it will write to a null device. cmd.Stdout = os.Stdout // Fork off a process and wait for it to terminate. err := cmd.Run() if err != nil { log.Fatal(err) }}```^ this works fine. It opens less and sends The text to output..."
29854;why is dms not protocol?
29855;It locks one person into being committed to answer and it prevents anyone else in the channel from learning from the interaction
29856;I usually prefer dms due to less distraction and the conversation can always be put into the public if someone else needs to read it over
29857;If you‚Äôre helping and you‚Äôre fine with that sure feel free
29858;If I‚Äôm the one helping personally I prefer to not do it in DMs but that‚Äôs not stopping you
29859;I am looking for help with managing data and mysql stuff for web page go stuff can anyone help?
29860;No...
29861;You don't even have to version a release to use `go get`
29862;No you can just use commit hashes
29863;v0.11.0
29864;0.11 is invalid semver
29865;yea hthat's it
29866;what rules cause go vet to give an unkeyed composite literal error? i am having issues reproducing it
29867;when the struct is from another package iirc
29868;that might do it
29869;how come it doesn't care if it's local?
29870;you're generally in control of changes to your own package and errors resulting from such changes are visible immediately
29871;also it's easier to find the struct definition
29872;thanks guys
29873;yea np
29874;Hello,I'm new to `go` I'd like to read an integer n then a list of n integers from stdin any thoughts?```42 3 4 5```
29875;A scanner would work <https://golang.org/pkg/bufio/#Scanner>
29876;It will scan line by line by default. The second line you can split by whitespace and parse the int using the `strconv` package I think
29877;`fmt.Scan` would work as well I guess
29878;wow `switch` `case` is very powerful
29879;its so hard having clean code
29880;:thinkingo:
29881;@Sgt_Tailor trying that thanks
29882;is it possible for an exported struct to have unexported variables in it?
29883;Sure
29884;Often in the godoc you'll see `//unexported fields`
29885;Is go called go or golang if you would reference it?
29886;Go
29887;how can i access the unexported field then?
29888;You can't
29889;So golang is just the webpage then?
29890;oof
29891;thats not good
29892;https://golang.org/doc/faq#go_or_golang
29893;@other It is great feature to hide implementation details from users
29894;Allows for guarding a field with a mutex without the user having to think about it
29895;Whats the point in unexported fields if you can access them lol
29896;i mean
29897;i need to
29898;Why does java/c#/insert language here have private protected public etc
29899;99% chance you don't
29900;https://godoc.org/github.com/faiface/pixel/imdraw#IMDraw.Circlethe imdraw struct has a slice called `points` i need to access that but it returns an error when i use it
29901;because its unexported
29902;Open a PR to add a method to be able to read them
29903;¬Ø\\\\_(„ÉÑ)\\_/¬Ø
29904;i need to iterate through it
29905;pr?
29906;Pull request
29907;Surely youve used GitHub before
29908;yes ive used github
29909;You push the points using the exported methods
29910;You shouldn't need access to them afterwards
29911;They are guarded by the exported functions
29912;yeah but i want to iterate through every pushed point
29913;to offset them
29914;because im making a camera
29915;that draws with the camera's offset
29916;Shouldnt you offset the points before you add them
29917;:robpike:
29918;and i know i can just push them with the offset
29919;yes
29920;but no
29921;Thats a yes
29922;You'll have to create a new draw object then
29923;i want to learn more by trying something like this
29924;There are working game engines using pixel
29925;> You'll have to create a new draw object then@Sgt_Tailor i did
29926;You shouldn't keep state in your draw buffer
29927;Offset them before creating the IMDraw
29928;Simples
29929;i know but i want to see if i can go past my laziness and make a proper camera function
29930;This is more effort
29931;So idk how this is getting past your laziness
29932;most camera functions have a `drawWithCamera` function and just draw with the offset
29933;pixel is a simple library to draw geometry. It doesn't have a camera
29934;You will have to implement that and perform the transformations
29935;i know thats what im doing
29936;even if there was a camera i would still most likely do it myself
29937;Ok so you would calculate what to draw
29938;and then draw it
29939;Not create the drawing and then shift points
29940;Apparently thats too much efforr
29941;:robpike:
29942;all i need to do is make a copy of the imdraw object then iterate through every point and then add the offset
29943;wow
29944;You are using a library explicitly created for 2D stuff to do 3d transformations
29945;im doing 2d stuff not 3d
29946;this is not a very ideal thing to have ima learn opengl and make my own library
29947;and make it the most fucking easy to use library ever
29948;hell i wont make a library i'll make a whole engine!
29949;and then i will grow old and realize i wasted my life
29950;Lets turn it down a notch.
29951;pixel has some simple transformations available for the objects as well. If you need more complex transformations they will have to be orchestrated outside the lib itself
29952;Check the example directory for examples of projects already doing this
29953;<https://github.com/faiface/pixelexamples/tree/master/platformer> for example
29954;Or any of the other ones
29955;<https://github.com/faiface/pixelexamples/tree/master/community/gojetpack>
29956;None
29957;That was made using pixel as well
29958;called raycaster
29959;It is all possible but you'll have to read the library the documentation and the examples to figure out how to use it instead of trying to force it to work the way you think it should.
29960;you made that?
29961;No
29962;<https://github.com/faiface/pixelexamples/tree/master/community/raycaster>
29963;oh
29964;theres also the fact that the stuff is draw incorrectly
29965;i mean not incorrectly
29966;x doubt
29967;but usually the x and y points 0,0 are in the top left corner
29968;and x becomes bigger as it goes to the right and y becomes bigger as it goes down
29969;not always
29970;usually
29971;mostly
29972;commonly in 3d games y goes up
29973;im talking 2d
29974;opengl doensn't care
29975;it doesn't so they make some kind of standards
29976;left hand right hand
29977;although old fixed pipeline defined somethings
29978;but this is a huge turn off for me because all the time when i did game dev this has been the case
29979;So apply a transformation
29980;but the the math would be incorrect
29981;and i dont know how to anyways
29982;In that case you'll have to learn
29983;ugh i hate learning
29984;ive been learning for 2.5 years and i still suck
29985;how do i access the main package?
29986;the question cannon is back
29987;whatever you need to access in the main package put it in a pkg and make main access it
29988;lets say my project folder looks like this```main.gogo.modgo.sum< camera >  camera.go```
29989;> the question cannon is back@misterturtle one question and you start shaming me again wow
29990;ok lets see if your question is something than can be answered by either the go tour or one of the many links pasted to you already
29991;shoot
29992;i already asked
29993;You've also already been answered
29994;:kkk_LOLTROLLFACELOL:
29995;@misterturtle i demand you change your name to icecoldturtle
29996;as you demanded it
29997;@other To explicitly answer your question: you can't import main. You will have to move the stuff away from main into a different package import that
29998;tldr is if you could import main youd have an import cycle
29999;thank you a straight decent answer
30000;Just rephrasing what stdio _already_ told you
30001;oh dammit when stdio said that i thought he meant make a .pkg file or something when he said pkg so that confused me
30002;it only hit me that he meant package
30003;context changes the meaning of words
30004;.pkg make no sense here
30005;i know but i got confused
30006;:gopher:
30007;:eyesshaking:
30008;k so  is Write from io.Writer expected to write all buffer stuff? it still returns (int,error) like the reader but for example when we write a smaller buf than the incomingthe io.Copy(writer,reader) fails with ShortWrite ü§î
30009;I didn't find anything related to that
30010;while Read can return whatever 0 <= n <= len(param) it wants ü§î
30011;I'm not sure to be honest
30012;Yes!
30013;Writer is expected to write _all_ data
30014;When you can't an error is expected explaining _why_ it failed
30015;> Writer is the interface that wraps the basic Write method.> > Write writes len(p) bytes from p to the underlying data stream. It returns the number of bytes written from p (0 <= n <= len(p)) and any error encountered that caused the write to stop early. Write must return a nonnil error if it returns n < len(p). Write must not modify the slice data even temporarily.> > Implementations must not retain p.
30016;https://golang.org/pkg/io/#Writer
30017;@stdio ^
30018;Note this part: Write must return a nonnil error if it returns n < len(p)
30019;aha
30020;even with non nil err the io.Copy just fails so I guess it should stop anyway
30021;Guess the io.copy checks the int returned to len(p) as a safeguard for bad Write implementations
30022;Is it possible to deserialise a struct with a partial JSON raw message
30023;into a new struct
30024;"```gotype SearchHit struct { Score float64 `json:""_score,omitempty""` // computed score Index string `json:""_index,omitempty""` // index name Type string `json:""_type,omitempty""` // type meta field Id string `json:""_id,omitempty""` // external or internal Version int64 `json:""_version,omitempty""` // version number when Version is set to true Source json.RawMessage `json:""_source,omitempty""` // stored document source}```Like this"
30025;Where I have _id blah blah but i take the source and the ID and ram it onto a new structure
30026;Not sure what you mean
30027;Well I've decoded some json raw message into the struct above
30028;mm
30029;Its tricky because the above is the metadata of an elasticsearch response
30030;and I need to decode documents from elasticsearch into it
30031;But then the source data is the _actual document_
30032;so im not sure if its really that bad to be looping and unmarshalling json twice
30033;Like once to unpack all the search hits and again to convert search hits into your document here
30034;So you need a slice of whatever struct holds your elastic search document and unmarshal the SearchHit.Source into it
30035;And the ID
30036;Probably
30037;Lemme DM you some code
30038;because I have some nonpublic stuff but its across multiple files and I don't wanna dump it in this channel if it's not useful
30039;if it turns out it's useful we can paste the relevant bits in here
30040;I'm not sure what the best way to go about doing this
30041;sure whynot
30042;wait wtf you can define types in funcs
30043;Sure
30044;Thats mad
30045;https://developer.mozilla.org/enUS/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test
30046;golang equivalent ?
30047;https://golang.org/pkg/regexp/#Match ?
30048;thanks
30049;Best database / storage solution to log requests for an rest api ?
30050;I like influxDB + prometheus
30051;maybe influx
30052;ye
30053;I mean depending on scale a log file could be asbolutely fine
30054;but if you want something on the cloud go for papertrail
30055;Papertrail is the one good thing solarwinds ever made
30056;if it's literally just a time series log influxDB good
30057;well yea just want to store each request  ip body and time
30058;is it best practice to always name your keyed fields?
30059;`Foo{Bar:1}` vs `Foo{1}`
30060;pretty much
30061;i ask because of the go vet error which does not apply locally
30062;Vscode I know had a feature that will automatically fill out the keys then you just put in the data
30063;is there a way to make a login system for username and password using a text file?
30064;right now i am using this
30065;if username != root || password != root { return }
30066;however i am looking for a way to have a text file with multiple logins
30067;Sure thing. You can store them as user:password. Where password is the _hash_ of a password
30068;I am not quite sure where to begin with that as I couldn't find anything online about it
30069;Or I am just not looking in the right place
30070;The problem is twofold. Reading data from a file
30071;And having that data be something useful
30072;I'm a bit busy atm but other people might be able to point you in the right direction
30073;ok
30074;is this correct?https://play.golang.org/p/Xhaq3_n4Z_1 if a keyed value isn't provided the given value is assumed as the key and a type is inferred and its zero value taken then standard uppercase export rules apply is it ever a useful pattern to actually export a nonnamed keyed field in order to enforce a zero value or should this be considered bad practice/a code smell?
30075;@Deleted User do you know how to read a file in Go
30076;Nonnamed fields are called embedded fields btw
30077;And are still initialized to their zero value
30078;Anything you do not explicitly set is always initialized to its zero value
30079;@Doad kinda
30080;No type is being inferred there either
30081;So I‚Äôm not sure the first part of your question
30082;"`int` and `string` became `int:0` and `string:""""`"
30083;there seems to be some inference
30084;Because those are the zero values
30085;Of int and string respectively
30086;That‚Äôs literally what their zero values are defined to be
30087;Just as bool is false
30088;first step is reading the contents of a text file
30089;so something like this
30090;"``` file err := os.Open(""file.txt"") if err != nil { log.Fatal(err) ```"
30091;also things being set to their zero values have nothing to do with export rules
30092;a member that is not explicitly assigned to a value is ALWAYS set to its zero value
30093;Are variable names shared between functions in the same package?
30094;if they are global yes
30095;valueX = !global  ValueX = globalright?
30096;is there a way to see what methods are attached to a type through code? something similar to `dir()` in python
30097;sure?
30098;im not sure
30099;"can someone help me understand why this is not working ? ```go build o ./bin ldflags=""X \'defaults.version=${version}\ ./...```It does not overwrite the defaults.version with my env var"
30100;You can probably get the method set of a type using reflection
30101;reflect
30102;@beepsandboops for what reason do you need it at runtime?
30103;i dont believe its right to say any methods are attached to a type
30104;is reflection going to be a lot of code?
30105;its gonna be ugly
30106;functions can be bounded to a type
30107;@Str≈ìm laziness if i'm being honest
30108;wa?
30109;what kinda laziness
30110;if you know the types ahead of time you can check the docs what methods they have :robpike:
30111;`print(dir(a))` in python whilst coding is convenient and low effort
30112;@Madxmike a function attached to a type _is_ a method
30113;you know all the methods are right there in the docs
30114;yeah but they arnt a part of the type
30115;The set of methods a type has is the method set
30116;like you would have in java for instance
30117;because a method is really just `func Foo(t T)`
30118;the implementation yes. But when talking about them the implementation isn't relevant
30119;mhmm
30120;makes sense
30121;does `go doc` interpret a package's methods each time it is run?
30122;is there some sort of cache?
30123;`go doc inprogress` is different to `go doc fmt` etc
30124;so i'm curious how it works
30125;What's the best way to convert a JSON response to a string
30126;I have an io.ReadCloser
30127;ah nvm
30128;need the buffer
30129;if someone replies to my question about go doc could you please ping me i need to afk so thank you in advance üôÇ
30130;You can check the code @beepsandboops
30131;It isn't that big
30132;https://github.com/golang/tools/tree/master/cmd/godoc
30133;ah god dammit
30134;I'm trying to get the raw JSON as a string so i can check it in the debugger and simultaneously unmarshal it into a struct
30135;"```go defer response.Body.Close() c := response.Body defer c.Close() if err := json.NewDecoder(response.Body).Decode(s); err != nil { return err } buf := new(bytes.Buffer) _ err := buf.ReadFrom(c) if err != nil { return err } s.raw = buf.String() return nil```"
30136;is this not correct? I'm just getting empty strings bak
30137;Did you expect c to be a copy of the contents?
30138;Because the decoder drains the response.Body
30139;which means the buffer won't get any
30140;Yes i did
30141;It is a copy of the _reader_ not the contents
30142;We do have some GalaxyBrain level shit available in stdlib though
30143;`Tee`
30144;tee?
30145;based `Tee`
30146;https://golang.org/pkg/io/#TeeReader
30147;You can pipe the contents and decoder together
30148;whatever is passed between them is written to the the buffer as well
30149;`go vet v ./...` started giving me an error this morning on my macos builds
30150;any ideas on how to debug this issue?
30151;You can also use `ioutil.ReadAll()` to buffer the entire request body
30152;unix.SYS___SYSCTL is defined in the syscall package on darwin
30153;so I am pretty baffled
30154;this is very confusing
30155;so
30156;i have to
30157;```go defer response.Body.Close() w := new(bytes.Buffer) r := json.NewDecoder(response.Body) io.TeeReader(response.Body w) err := r.Decode(&s) if err != nil{ return err } s.raw = w.String() return nil```
30158;Like this?
30159;```go defer response.Body.Close() w := new(bytes.Buffer) r := io.TeeReader(response.Body w) d := json.NewDecoder(r) err := d.Decode(&s) if err != nil{ return err } s.raw = w.String() return nil```
30160;you read from the teereader
30161;which causes it to write to the buffer also
30162;> You can check the code @beepsandboops@Sgt_Tailorthank you for the link although it's a bit above my head...on my system i found `/usr/local/go/src/fmt/doc.go` so there are templates provided too
30163;Mega based @mmacheerpuppy https://play.golang.org/p/p6Mekw_oMgK
30164;are you supposed to be able to access godoc via browser?
30165;This is mad
30166;@Ryanar are you sure this popped up out of nowhere? Did your dependencies or dependency versions change? (oops wrong tag sorry)
30167;The constant has two underscores not three
30168;https://godoc.org/golang.org/x/sys/unix#SYS__SYSCTL
30169;I am building a cli app that has register login system can anyone tell me how can I keep the user logged in? In browser I use sessions jwt cookies etc. . Can I do the same thing in terminal?
30170;like a terminal console ?
30171;@Carson ok my dependencies did change but how do I debug something like this? I guess this is caused by a different version of golang.org/x/sys/unix being used now that I added a new dependency
30172;yeah a simple cli app in linux
30173;A database so... sqlite? plain text? ...
30174;would it be safe tho ?
30175;@Ryanar I don‚Äôt see how this is a version issue the constant is just wrong
30176;None
30177;it used to be ___
30178;With the compatibility guarantee it isn‚Äôt going to just change out of nowhere
30179;No it didn‚Äôt
30180;https://github.com/shirou/gopsutil/blob/v2.20.7/internal/common/common_darwin.go
30181;Are you the owner of whatever you're logging in to?
30182;this code has been untouched for 6 years
30183;There‚Äôs `syscall.SYS___SYSCTL` but `unix.SYS__SYSCTL`
30184;oh 3 years
30185;@lieuwe_berg the app will have many users each user will log in from terminal and access their data by communicating with an api
30186;most cli's i have used that have some login use a token given from the provider
30187;You could store session ids in the database too.
30188;like digital ocean for example on doctl uses a token from them on all your requests
30189;to auth you
30190;I think this was a bug
30191;https://github.com/golang/sys/commit/82aafbf43bf885069dc71b7e7c2f9d7a614d47da
30192;@Ryanar are you sure that it ever actually built? It seems to me that the 2017 change from syscall to unix may have broken it and it was simply never tested
30193;yeah but database will be on another machine. Is there any other way to solve this in order to be more time effiecent maybe?
30194;I have been using this dependency for months now it wasn't until I added a new dependency that made a change to golang.org/x/sys that it has broken
30195;@Sneaxby is the cli just doing http request to some api endpoint?
30196;None
30197;hey that might be it
30198;https://github.com/golang/sys/blob/master/unix/syscall_darwin_arm.go
30199;None
30200;yep they removed it
30201;Was just about to link that. üòÑ
30202;so the new dep I added updated to the latest x/sys and it broke
30203;@Madxmike yeah
30204;@mmacheerpuppy The name Tee is derived from a similar command on linux btw
30205;I would PR on that dependency it should be using `unix.SYS__SYSCTL` instead
30206;im no professional but the standard ways of auth over http would still work
30207;really neat command to put between pipes
30208;ok that makes sense
30209;is there anything I could do in the meantime or should I just wait?
30210;I am not entirely sure how to pin a downgraded version of x/sys
30211;you can still generate a jwt and send it with your requests in a cli for example
30212;You can just revert the go.mod change
30213;oh true
30214;I see but since I use terminal instead of browserr where should I store the jwt token ?
30215;in memory?
30216;its just some bytes
30217;just using jwt as an example here because ive been working with it the last week
30218;the main thing here is to stop thinking of the browser as a magical device that can handle jwt's or other auth systems
30219;if you strip away all the extra bits it just a bunch of http calls going back and forth
30220;yo guys whats that website called to make gophers again
30221;@hhhapz https://gopherize.me/
30222;thanks üòÑ
30223;no prob
30224;I started around december 2019 and I'm pretty proficient
30225;proficiency in go is definitely months maybe even weeks if you spend enough time on it
30226;go is designed from the very beginning to be easy to learn
30227;‚òùÔ∏è
30228;that's an explicit goal
30229;> the main thing here is to stop thinking of the browser as a magical device that can handle jwt's or other auth systemsgot it! thanks a lot
30230;Are this function going to work? It split a string to Slices[] for every 4 words.
30231;How can i make it ignore unused var cause i want to trim the first 4 words after every loop
30232;Maybe. But you can write some simple unit tests to find out
30233;You can't make it ignore unused vars those are compiler errors
30234;you probably don't want to shadow the morseIn with :=
30235;use just `=`
30236;i use ```_ = morseIn``` to solved
30237;That won't work
30238;The compiler gave you an error for a reason üòâ
30239;:kek:
30240;`_ = morseIn` is a noop
30241;does literally nothing
30242;but it dont return error?
30243;right
30244;You were redeclaring morseIn in the scope of the for loop. It doesn't change the value of the original morseIn
30245;cause it's not doing anything
30246;Which you will find out when you test this functioin
30247;You'll get duplicate words
30248;Only the first 4 chars
30249;okay
30250;"How am I supposed to read in a config with go test? I usually supply the path to a .toml file with a command line flag `config=""D:\\...\\config.toml""` and I read that with viper"
30251;@Dexti Are you just making sure your config parsing works? or what kind of testing are you doing? Generally what I will do for config files is generate a good and a bad one parse them in and make sure the code is doing what I expect it to do. Doesn't cover every edge case but covers that 80% that I'm aiming for.
30252;I think they're probably using the config for the tests
30253;you can probably just pass flags after the package name in `go test` check `go help test`
30254;Are Slices start from 1?
30255;the answer is you're not supposed to tbh
30256;"I need to pass a config file in to start the app for testing. This is what it looks like:```go cmd | api |main.go server | server.go | user.go // contains routes for /user/:id"" config.toml config_test.toml```"
30257;@BryanC12 slices start from 0
30258;then don't make it part of the test
30259;@Dexti good practice is to not test things that need configs
30260;Okay
30261;or just use config structs
30262;pass in hardcoded config values if you really need to test that part
30263;make config files part of main scope not package
30264;then you test the packages
30265;Ah. Okay. But then how do I know if the routes are returning the right values? I'm planning to start the app then make http requests and validating the results.
30266;Do I just assume they're working because all my other tests passed?
30267;package httptest
30268;or separate logic out of the router
30269;then test the logic
30270;latter is what I did
30271;you shouldn't really run tests against an external endpoint ... that could potentially cause failures that aren't code related üòÑ
30272;Thanks
30273;> you shouldn't really run tests against an external endpoint ... that could potentially cause failures that aren't code related üòÑIt's internal. Same package
30274;üëç now we are talking e2e testing üòÑ
30275;hey there newbie here
30276;Im trying to import dashboard usi a go package
30277;https://play.golang.org/p/MdtSyStHfK
30278;still don't understand some concepts like structs/types
30279;<packagename>.<structname>
30280;so gapi.Dashboard
30281;something like this? https://play.golang.org/p/3Z3m1453SLW
30282;then I will get d is not a type
30283;Im just trying to import dashboards for grafana their sdk for go is broken üò¶
30284;https://hastebin.com/eniqikizis.cs <=== My Codehttps://www.codewars.com/kata/54b72c16cd7f5154e9000457/Solved this for hours do u think i should give up :thinkingo:```1100110011001100000011000000111111001111111100000000000011001111111111110000110011001111000011111100110000001100```I think the answer paper are wrong I use the bits i translate by hand^ it works. üê≤
30285;i just said `gapi.Dashboard` bruh
30286;you did it right on top of func main
30287;Why do i get this when iam trying to run sql
30288;/go/pkg/mod/github.com/mattn/gosqlite3@v1.14.0/backup.go:14:10: fatal error: stdlib.h: No such file or directory
30289;seems like you don't have C dev stuff installed
30290;install `musldev` or something
30291;i installed gcc
30292;@_diamondburned_ yep but it will fail anyway
30293;that doesn't include stdlib headers
30294;okay
30295;it's going to fail for sure
30296;because playground doesn't have internet access
30297;I tested locally..
30298;@ikieMee8 get buildessential
30299;./main.go:17:16: d is not a type
30300;yeah @_diamondburned_ thanks
30301;yea np
30302;well anyway I figured it üôÇ
30303;@BryanC12 Wouldn't it be easier to scan the input 2 characters at the time
30304;What you mean?
30305;It always starts with 11. Keep reading until you find a 0 while keeping track of how many 1s you read
30306;Once you hit a 0 you know if it was a dot or a dash
30307;then the length of the zeroes determines if it is a space or not
30308;```1100 = . ``` ```1111 =  ``` Because i use this üò¢ and ``` 0000 =  ```
30309;But a dash is 6 1s
30310;not 4
30311;It isn't a nice split of 4 chars each
30312;I thought i have to translate 1100 => .
30313;Dash ‚Äì is 3 time units long.
30314;but a unit is 2 chars
30315;Time wasted üòµ
30316;misread the specs it happens
30317;Yeah üòÜ
30318;I didnt get what it means then i ignore it
30319;Should be able to translate it in a single pass but I won't spoil it so you can try solve it yourself
30320;What u mean single pass
30321;I meant reading the input once from left to right
30322;Google it please #hussain_day
30323;#offtopic
30324;I get what u mean convert 1s to symbols once touch zero and convert zero to space once more than a value
30325;Something along those lines yes
30326;https://play.golang.org/p/JCT0lqqKS_2 I need to create a struct like line 26
30327;for can't figure how
30328;map[string]interface{}{} is that the type ?
30329;https://bitfieldconsulting.com/golang/mapstringinterfacehttps://bitfieldconsulting.com/golang/mapstringinterface
30330;is the json data regular
30331;like it has a regular structure to it
30332;aka not super dynamic
30333;damn its a fucking json I just need it to send it over http why this is so hard
30334;should be trivial
30335;I will come back to python and problem solved in 4 lines
30336;not sure why Im doing this to myself
30337;interface{} is the problem probably. Should just create a normal type and let the marshaler do its magic
30338;interface{} stinkyyyyyyy
30339;if you just need to read a file and send its contents over http its like 5 lines in go too
30340;but that doesnt seem to be what you are doing here
30341;https://mholt.github.io/jsontogo/
30342;this will convert your json to go
30343;might have to tweak it a bit
30344;but will get you there
30345;https://opensource.googleblog.com/2020/08/newcasestudiesaboutgooglesuseofgo.html :robpike:
30346;been wanting to read that
30347;@Madxmike thing is Im relying on a go package to avoid creating json's structs
30348;what do you mean
30349;that graphana package?
30350;yep
30351;> relying on a go package to avoid creating json's structsyeah that's going to make your life so much harder
30352;everyone thinks oh it\'s so much effort to make all these structs
30353;and it is
30354;but you know what's even worse? having to fuck with interface{} at every single API surface
30355;the client looks like it wants a structured data thingy sent to it
30356;to work
30357;oh i see
30358;it uses `map[string]interface` for its dashboard model
30359;so this client defines a Dashboard struct
30360;"```gotype Dashboard struct { Meta DashboardMeta `json:""meta""` Model map[string]interface{} `json:""dashboard""` Folder int64 `json:""folderId""` Overwrite bool `json:""overwrite""`}```"
30361;that I assume is the json you are trying to load
30362;right @pathcl ?
30363;yep
30364;```govar dashboard gapi.Dashboarderr = json.Unmashal(rawBoard &dashboard)if err != nil { panic(err)}```
30365;bam now you have a dashboard filled from your json data
30366;if python is perfect for your task why not use python
30367;makes sense to learn different languages and Go is prominent among lots of things
30368;then you should learn the proper Go ways of doing things instead of trying to clutch things together the Pythonic way
30369;Going from Python to Go at first I hated having to type everything and make all the structs but it really makes everything a lot nicer in the end. I don't have to have 5 checks to make sure something is the right type or catch exceptions if it's not. I know what type it will be. It can make working with JSON a little difficult because JSON was designed for a language that is even less typed than Python (JS) but you can find ways to make it easier.
30370;"Python is dynamically typed; Go is statically typed"
30371;@_diamondburned_ no need to mansplain anything I already know that
30372;dynamic typing was a mistake
30373;What does mansplaining have to do with anything?
30374;ok
30375;then you should stop complaining
30376;I can complain as much as I'd like thats what internet for
30377;k
30378;the only real time i find json difficult in go is when its coming from some dynamic mess of an api
30379;_like one written in JS_
30380;My API is a absolute mess
30381;So much needs to be cleaned up but got bigger issues to deal with
30382;is it fine to build a library on top of another?
30383;Most libraries also use libraries
30384;everything is just libs all the way down
30385;like can i use a game library like pixel to make my own game library with easier to use functions?
30386;but opensource it?
30387;yeah
30388;yay
30389;For example `net/http` and `fmt` both use `io` in the go standard libs
30390;just look at the lisence first
30391;okay
30392;that's quite literally what my game engine does
30393;lmao
30394;except it's not necessarily easier it just adds a bunch of stuff
30395;It would be strange to find a lib that doesn't use any other libs...
30396;spoilers: all software is just an api wrapped around an api written by someone else
30397;and it doesnt even end at the hardware because most hardware is based on designs and ideas from other people
30398;and its goes and goes
30399;basically its all been a big mistake
30400;computers were a mistake  alan turing
30401;i remember reading something recently about how very very few of our thoughts are genuinely unique
30402;computers were a mistake  ted
30403;its all been influenced and morphed by other things
30404;wars between dynamic and typed languages are pointless
30405;go is not ideal for everything
30406;thats a fact
30407;It is _terrible_ at xml parsing
30408;Such a pain
30409;well thats because xml is terrible
30410;Hey
30411;xml not that bad
30412;:Doubt:
30413;The virsh xml definition is 100% readable
30414;and it is xml
30415;> wars between dynamic and typed languages are pointlessnot true
30416;> wars between dynamic and typed languages are pointless@pathcl on what basis
30417;can you make sql return 0 rather than null for globs
30418;in a query like `SELECT SUM(x) from y where z glob hjkl`
30419;i can't find the right error to check for it in go
30420;An idea building on my conversation from the other day:Is it possible for a function to return []interface{} and then have a range loop loop do something like:endarray = append(value.(.Type) endarray)Where type is of course the type of endarray? ^^
30421;your append is backwards
30422;but yes that is how you convert the type of one slice to another
30423;is through a loop
30424;but if your function is returning `[]interface{}` i would question your function
30425;this function returns a list of stuff
30426;you know nothing about what stuff it is
30427;I am attempting to find a way to create a function to pull a list of objects from a database and stuff them into an array in a generic manner.It works fine with a single object because you just give it a pointer to the appropriate type and it doesn't care.Arrays don't want to work that way. ^^
30428;variadic functions?
30429;that's how scanf and stuff works
30430;are you using database/sql
30431;I may need to look closer at scanf. üôÇ
30432;mongodriver
30433;im 95% sure mongo has a way to decode the data you recieve into a structure
30434;Basically my GetOne function accepts a collection name and a pointer to a variable. Its signature is actually func(string interface{}).The system doesn't complain about passing pretty much any single pointer to that but it doesn't like doing arrays the same.
30435;is there a GetMany function
30436;ive never worked with mongo
30437;oh you wrote it
30438;i see
30439;look into how encoding/json handles slices
30440;it will give you an idea on how to build it so it can handle slices
30441;Thanks for the advice. üôÇ
30442;youre just doing some standard encoding/decoding stuff
30443;i would very much reason that mongo driver has some way of doing this for you
30444;It does but it involves a lot of boilerplate that I was hoping to abstract away. :)It is becoming clear that the functionality of DRY is cituational.
30445;your acronyms are general guidelines
30446;not end all be all truths about the world
30447;I know. üôÇ It is still fun to try sometimes. Overall my GetOne method works but it basically reduces the overall code by one line per instances which means it is probably causing more overhead then it is worth. üòõ
30448;probably lol
30449;also dry is more about situations like ```gofunc DoFoo() { //whole bunch of stuff on foo}func DoBar() { //Whole bunch of stuff on bar but very very similar to the stuff in DoFoo()}```
30450;as a quote that I ripped off the internet says: sometimes a bit of copypasting is better than dealing with the wrong abstraction
30451;not ```goerr := doThing()if err != nil { panic(err)}err = doThing2()if err != nil { panic(err)}```
30452;https://sandimetz.com/blog/2016/1/20/thewrongabstraction found it
30453;That\'s kind of the point I\'m getting to. I may address this issue again when I am more experienced with the language but for now I\'m just better off doing it the normal way.
30454;Of course I realize that the drivers abstract away a LOT already.
30455;sounds plan
30456;> well thats because xml is terrible@Madxmike I've used it for both structured and non structured XML and not had too many issues
30457;it was mainly a meme
30458;Any recommendation on the most effienct way to autoupdate application during runtime ?
30459;That's a fairly complex requirement and depends on what needs updating
30460;Are you talking about building and releasing a full binary that needs to replace an existing service or maybe a particular module or just sole other assets that are on the file system
30461;lol I had to parse gir files as XML
30462;I wanted to die
30463;"```gotype Class struct { XMLName xml.Name `xml:""http://www.gtk.org/introspection/core/1.0 class""` Name string `xml:""name,attr""` CType string `xml:""http://www.gtk.org/introspection/c/1.0 type,attr""` CSymbolPrefix string `xml:""http://www.gtk.org/introspection/c/1.0 symbolprefix,attr""` Parent string `xml:""parent,attr""` GLibTypeName string `xml:""http://www.gtk.org/introspection/glib/1.0 typename,attr""` GLibGetType string `xml:""http://www.gtk.org/introspection/glib/1.0 gettype,attr""` GLibTypeStruct string `xml:""http://www.gtk.org/introspection/glib/1.0 typestruct,attr""` Implements []Implements `xml:""http://www.gtk.org/introspection/core/1.0 implements""` Constructors []Constructor `xml:""http://www.gtk.org/introspection/core/1.0 constructor""` Methods []Method `xml:""http://www.gtk.org/introspection/core/1.0 method""` Fields []Field `xml:""http://www.gtk.org/introspection/core/1.0 field""` // Functions []Function `xml:""http://www.gtk.org/introspection/core/1.0 function""` // Callbacks []Callback `xml:""http://www.gtk.org/introspection/core/1.0 callback""`}```"
30464;namespace moment
30465;:kms:
30466;That looks like a nightmare
30467;Bascially there is a file containing a list of items and users are able to remove or add news items and these changes would be reflected during the lifetime of the application
30468;:kms:
30469;damn
30470;that gif is cool lol
30471;or emote whatever üôÇ
30472;> It is _terrible_ at xml parsingThis remains true for Go
30473;Are you stuck with a file over a database or can you change the implementation
30474;I don't think there's any sane way to parse XML properly without abstracting it to hell and bodging it so that it no longer even remotely resembles anything XML
30475;as I've said before I'd prefer long and verbose JSON than dealing with XML
30476;the hardest part about generating libhandy bindings from gir isn't even the bindings part
30477;nor is it the cgo part
30478;it's genuinely just parsing XML that's tedious
30479;note that I didn't even have to write most of the XML stuff myself
30480;thankfully someone did some of the XML model structs already
30481;So I have an application right now which is web scraper and it spawns a go routine for each item but the current setup requires the application read from a local json file. I wanted to allow users to create their own personalize list so I connected it to a database so now their changes have persistence but my issue is When a user adds or removes items from their list I want the application to stop scraping that item or begin scraping that new itembut I don't want to have to go in manually and pause the application and reboot it.
30482;use contexts for cancellation
30483;If you're not familiar with contexts it's a great thing to learn
30484;does this apply with the addition of items
30485;you can have some goroutine that is resposible for periodically polling the db and starting/stopping the goroutines doing the scrapping
30486;thank you mike
30487;üôè
30488;like a controller goroutine of sorts
30489;As your in control of the application adding and removing the sites you wouldn't necessarily have to poll the DB.
30490;Youd still need something to track and start/stop goroutines as necessary though
30491;yeah that's what I am thinking
30492;if you're not polling the database how are you going to know get the new items ?
30493;yeah i wouldnt necessarily poll any db in the same place as the controller
30494;you just need it to recieve a list of active items from somewhere
30495;I see I could poll the db and store the values in a global var
30496;not sure if that's bad
30497;more of pass the values over a channel
30498;ahh
30499;i see
30500;alright thanks fellas
30501;got a lot to learn üôÇ
30502;andf that way the controller has no idea where its getting the values from
30503;because it doesnt need to know
30504;So one go routine that is getting the info and pass the val over chanel to the controller go routine
30505;which will stop/start go routines according to the values
30506;am i understanding that correctly ?
30507;> if you're not polling the database how are you going to know get the new items ?@Subi I assume they're added / removed via the application which means you can start and stop them from that point instead of from polling the DB
30508;their added via discord
30509;I have a bot
30510;so users
30511;Yeah that seems reasonable as long as it fits in with the rest of your application
30512;do something like this
30513;!add `item_name`
30514;wait ü§î if it was added via the application wouldn that mean no persistence ?
30515;There might be a few task manager style packages that make managing go routines like this easier although it's not too complicated so I'd probably do it myself
30516;what happens if app just died randomly
30517;I assume you're still using the database
30518;ye
30519;Just not polling to decide when to start or stop jobs
30520;is there a golang text table lib that can do like ```‚ï™ Key ‚ï™‚ï™ Value ‚ï™ ```
30521;basically so its like cells of a key (on top) and value (on the bottom)
30522;> wait ü§î if it was added via the application wouldn that mean no persistence ?its called materializing the state
30523;basically you take the event coming in
30524;‚úçÔ∏è
30525;say your !add item_name
30526;and it would 1) be sent to the worker controller to do its thing
30527;and 2) be materialized to some state store
30528;aka wrote to the db
30529;when you restart the app
30530;I see
30531;the app can read from that store
30532;and create the state again
30533;thats also why we were saying seperate the controller from the db
30534;the controller doesnt care if the items are coming from your bot
30535;or reading from the db
30536;Okay gonna give it a shot
30537;how I can incluce % in a formatted string?
30538;I already had created the db and all the crud operations üò≠ but I will keep this advice in mind
30539;you still will need them lol
30540;probably
30541;> how I can incluce % in a formatted string?@minish `%%`
30542;thanks
30543;@‚Éü‚Éü tabwriter
30544;"Hey guys Im using gorilla mux and im trying to setup a uri path of /user/. Ive read through the documentation but something is just not clicking. I want paths that look like this‚Ä¶/user/settings/user/free/user/isdumbThis is the last thing I have tried```router := mux.NewRouter()router.HandleFunc(""/createUser wrapper(database createUser)).Methods(""POST"") << this works just fineuserRoute := router.Path(""/user"").Subrouter() << trying to setup a subrouter to handle all /user/ requests userRoute.HandleFunc(""/test wrapper(database test)) << Path is not found and does not execute my functionhttp.ListenAndServe("":5000 router)```What am i missing????"
30545;Also tried with router.PathPrefix
30546;what is the request your doing
30547;http://0.0.0.0:5000/user/test
30548;is the path being hit
30549;i know you say the handler isnt executed
30550;but thats different from the path being hit
30551;yea getting a 404 page not found
30552;no
30553;on the server
30554;make a logging middleware if you havent
30555;the funny thing is i can still hit it if i use http://0.0.0.0:5000/test
30556;I have not
30557;```gofunc loggingMiddleware(next http.Handler) http.Handler { return http.HandlerFunc(func(w http.ResponseWriter r http.Request) { // Do stuff here log.Println(r.RequestURI) // Call the next handler which can be another middleware in the chain or the final handler. next.ServeHTTP(w r) })}```
30558;put that middleware on your root router
30559;and it will log out every request coming in
30560;you can also move it to only a specific route if you want to see if a route is being hit
30561;ok one sec
30562;because your routing not working and your handler not working are two seperate issues
30563;that will look the same without proper logging
30564;im adding the middleware with router.Use() but nothing is getting printed out currently
30565;even on the good routes?
30566;yea im trouble shooting now
30567;I have something funcky going on with paths... I moved some files around because i broke an old git repo. ill be back after i figure this out.
30568;thanks for the help thus far
30569;@Madxmike got it working It was a wired issue with servers proccess stuck in the background and still running. reboot fixed it.
30570;does golang have any predefined errors anywhere?
30571;Some packages provide error constants
30572;something like an out of range error
30573;That would be a panic
30574;But yes that does exist
30575;i'd quite like to return an error similar to an exception here
30576;Yeah that'd be error constants
30577;ok where do i need to start for those?
30578;https://godoc.org/github.com/bwmarrin/discordgo#pkgconstants
30579;there's an example here
30580;just scroll down to the part where they start calling errors.New
30581;They are variables I guess because you can't create a constant that way but the same applies
30582;"``` ErrJSONUnmarshal = errors.New(""json unmarshal"")```so something like this"
30583;Yeah. Just declare your errors
30584;could you elaborate on that distinction tailor
30585;and then you can return `ErrJSONUnmarshal` and consumers of that code can specifically check for that error case
30586;const vs var
30587;no meaningful difference here
30588;Yeah minor detail that isn't relevant for this discussion
30589;"```goimport io""func init() { io.EOF = nil}```"
30590;guys i wrote a new package
30591;shhhhh
30592;do i need to worry about error wrapping or is errors.New() enough
30593;uh
30594;"worry""? probably not"
30595;"```var ( ErrOutOfRange = errors.New(""Index value is out of range.""))```"
30596;wrapping is something the consumer does
30597;for their needs
30598;if you\'re the consumer of your own code then you are making the choice to further wrap that base error
30599;If you aren't it isn't your responsibility
30600;gotcha
30601;@deezy want to see a great way to break a lot of code?
30602;other than io.EOF = nil?
30603;so what's the best practice in a func that returns string errordo you return nil for the string?
30604;https://play.golang.org/p/0WdNAsEFf1H
30605;it depends
30606;on paper if `err` is nonnil you shouldn't trust anything else that came back
30607;period
30608;just override error vars
30609;:KEKW:
30610;because if something went wrong you've got inconsistent state
30611;yeah so nil should be the best practice?
30612;and proceeding might blow your shit up
30613;or some default string like yeet
30614;if you've already built shit out
30615;there's no harm in returning it
30616;since you've done the work already
30617;In theory depending on the error you may still be able to use the results
30618;someone needs to make an alignment chart of go error handling
30619;see: Read() with EOF
30620;lawful good is fmt.Errorf with wrapping
30621;chaotic evil is ignoring errors
30622;if Read() returns an EOF it can STILL return valid data that it read
30623;yeah that's fair
30624;in my instance it is unable to provide a value
30625;fair enough
30626;return check the error ErrFoo
30627;Basically as long as you return an error when something actually went wrong it's the consumer's responsibility to use that responsibily
30628;`func Foo(s str) (string error)`do you ever need to change `error` to something more specific?
30629;@Septapus chart up Amount of weird stuff happening number of errors ignored
30630;None
30631;Close enough @weenie xD
30632;no you should really stick to `error`
30633;it's the standard library interface
30634;everyone else uses it
30635;error is an interface anyways. It can be anything
30636;It is _the_ way to handle errors
30637;i'm assuming you return nil always for success or do people define a `ErrNoError` type of thing
30638;nil for no error
30639;Any non nil value should be an actual error
30640;`if err != nil{}`
30641;yep
30642;ANYTHING except `nil` means hey you should probably look really closely at what just happened here
30643;> cannot use nil as type string in return argument
30644;wat
30645;a string doesn't implement the`Error() string` method. Use `errors.New` or `fmt.Errorf`
30646;`fmt.Errorf` allows for error wrapping as well using %w
30647;```goif n > len(m.Output) { return nil ErrOutOfRange}```return signature is (string error)
30648;nil isn't a valid string
30649;You can return an empty string
30650;None
30651;"```gofunc (m match) Group(n int) (string error) { if n > len(m.Output) { return nil ErrOutOfRange } return m.Output[n] nil}var ( ErrOutOfRange = errors.New(""Index value is out of range.""))```"
30652;is the error coming from return 1 or return 2?
30653;the line number isn't actually accurate
30654;first
30655;ok so it\'s `return  ErrOutOfRange`
30656;Yeah
30657;is there an easy way to return the zero value of a type?
30658;You _can_ declare a var or use named return values but it isn't worth it imo
30659;Btw you code doesn't check for n < len(m.Output)
30660;so you can still trigger a panic
30661;If the length of the output is 0 it will still panic as well
30662;is there a convenient way to abstract multiple calls to len
30663;do i need to worry about DRY?
30664;e.g.if n < len(foo) || n > len(foo)
30665;abstract how
30666;`switch len(thing) {}`?
30667;switch seems a bit overkill for this
30668;```gon := len(thing)switch { case n > x || n < x: // handle default:}```
30669;i mean
30670;there's nothing else
30671;you can call len() over and over and over
30672;or call it once at a central location and branch out from that
30673;good old `if` works fine as well
30674;yep
30675;isn't n > x || n < x just n != x
30676;i did not write correct code
30677;too lazy
30678;bad deezy
30679;if we're specifying a return value let's say a struct
30680;in python you can return value or None
30681;what's the analogous way in go?
30682;None isn't strictly an error
30683;an empty struct is also probably not the right idea
30684;if it's a pointer you can return nil
30685;if it's a struct returning the empty struct is fine
30686;generally if i have a function of the form `Foo() (Thing error)` I have `var t Thing` at the top of my function
30687;the value should be considered invalid by the caller
30688;so at any point i can just `return t err`
30689;is it a code smell then to convert a struct to a pointertostruct in order to be able to return nil
30690;yes
30691;if that's the ONLY reason you're using the pointer
30692;i have never known the answer to that honestly
30693;it's probably not a good reason to use a pointer
30694;at least IMO
30695;you CAN use pointers to differentiate between an empty string and a string has NOT BEEN PROVIDED AT ALL
30696;for example
30697;but that's a really specific situation
30698;i feel like the opposite like if you need semantic nullability for structs changing it to return a pointer is a good enough reason? imo
30699;i know different people have different opinions
30700;Point is it is not a hard and fast rule
30701;It won't BREAK things necessarily
30702;I think having nullability overlap with allocation in this way is like
30703;weird and wild and i wish the designers didn't do that
30704;But I usually advise against using pointers unless you very very very specifically need a pointer
30705;yeah that was a goof em up for sure
30706;> weird and wild and i wish the designers didn't do that@weenie agree
30707;how hard could it be to make all types nillable?
30708;returning nil when my signature is returning somestruct is leading to a segfault
30709;Deezy why not use named returns at that point?
30710;nil pointer derference
30711;i bet
30712;you're probably using the value
30713;Does the var for you
30714;yeah i know
30715;i just
30716;never got into the habit of named returns okay
30717;get off my back mom
30718;As long as you don't use a naked return
30719;Hehe
30720;it's a nil pointer dereference but i'm not following what the issue is
30721;that means you're doing `a.bar`
30722;where `a` is nil
30723;you're using the nil value you've returned
30724;ah
30725;which means your error check is bad or your function is returning a nil error AND a nil value
30726;the code is all over the place atm
30727;lmao
30728;panics are usually a good sign of that yeah
30729;so this is like an attributeerror for None in python
30730;more or less yeah
30731;i've just noticed vsc is no longer converting tab to space since i updated it
30732;grr
30733;weird the settings are normal it's just not doing them
30734;"Why do i can\'t run http.ListenAndServe("":80 nil) but if i change port to 8080 it is ok."
30735;because 80 is in the list of privileged ports
30736;I use linux ubuntu 20.04
30737;https://stackoverflow.com/questions/10182798/whyareportsbelow1024privileged
30738;So for learning i cant use port 80? Is it just for real server?
30739;you can use 80 it's just a lot of effort to set up for learning only
30740;you can
30741;so just stick with a higher port
30742;yeah
30743;you can just sudo
30744;but
30745;learn to get used to ports
30746;they're important
30747;and you're going to need to be comofrtable with specifying them
30748;"```ErrOutOfRange = errors.New(""Index value is out of range."")```if i want to add some additional data rather than the generic return message how would i do that?```return  ErrOutOfRange```"
30749;that'd be a wrap
30750;OR
30751;defining a custom error type
30752;```gotype ErrOutOfRange struct { Context string MagicErrorCode int WhateverElseYouWant Stuff}func (e ErrOutOfRange) Error() string { return blah blah + e.Context}```
30753;so much to take in
30754;error is an interface
30755;remember that
30756;custom error type might be alright
30757;```gotype error interface { Error() string}```
30758;that's it
30759;Wrap() is fine too but using a real struct lets you be
30760;well
30761;more structured
30762;an error type lets you programmatically inspect properties of the error and act on them without having to do shitty string parsing
30763;https://play.golang.org/p/TNxrnCviYTRthis really threw me
30764;is there a way to unpack a multiple value func within a printf?
30765;not within it
30766;you'd need intermediary variables
30767;python has really spoiled me
30768;shame
30769;it's literally one more line üòõ
30770;you _can_ expand slices into multiple arguments though
30771;yeah if it fits into the variadic thing
30772;so you can't mix them
30773;yeah i'm aware of that at least
30774;`var val string err error`can i do something similar to this?
30775;to declare multiple vars with type
30776;ah wait i'm mixing up multiple assignment
30777;this needs ()
30778;i think it's time for sleep
30779;"```var (val string; err error)```is that bad practice on a single line?"
30780;i wouldn't
30781;lines are free
30782;and i despise semicolons
30783;that looks confusing
30784;yeah that's a stinky line of code
30785;if they're of the exact same type sometimes I do a multiline assignment
30786;like
30787;`x y := 0 0`
30788;^
30789;you can convert while doing that too
30790;`x y := int64(0) int64(0)`
30791;+1 lines are free
30792;more lines > more columns
30793;> and i despise semicolons@deezy well you know what they say: a semicolon is just an emoticon without a mouth
30794;though once it starts getting like that I'm more likely to just use more lines yeah
30795;it's easier to scan code vertically than horizontally
30796;yeah I agree with that
30797;strong preference for vertical over horizontal
30798;"does go have something akin to python\'s ```print(f""{foo = }"")```"
30799;Printf
30800;yeah but without declaring the variables
30801;yeah printf
30802;er
30803;no
30804;no that's not the same
30805;wait
30806;what
30807;> without declaring the variables
30808;"you can do `Printf(""%s"")`"
30809;vet will complain
30810;but it'll compile
30811;¬Ø\\_(„ÉÑ)_/¬Ø
30812;furthermore
30813;"```f""{foo = }""```"
30814;"that would be `Printf(""foo = %s\ foo)`"
30815;does declare a replacement
30816;{}
30817;that's what {} means in fstrings
30818;so
30819;the `=` changes the interpolation since 3.8
30820;it's great for debugging
30821;i have no idea what that means
30822;%#v is what you'll use for debugging though
30823;"```print(f""{foo}"") # something""print(f""{foo = }"") # foo = something""```"
30824;the fuck?
30825;"why not `f""foo = {}""`"
30826;python protip for you
30827;that feels so excessive
30828;hard pass
30829;is this to just quote/escape the argument to the fstring?
30830;it's meant for debugging
30831;i don't see what value this adds
30832;yeah that doesn't clarify
30833;it seems like a very not straightforward way to do it
30834;it's like an explicit inversion of how fstrings typically work
30835;how is it an inversion? the output is still a string
30836;either way it's fine if that's how python does it but that can't be done in go
30837;well that's the thing
30838;i don't know what it's doing
30839;for debugging
30840;all i see is a string being quoted
30841;want a couple examples to paste into your terminal?
30842;although it won't work unless you're on 3.8
30843;which you're probably not
30844;"i mean like i said i just don\'t understand how it\'s different than `f""foo = {}""`"
30845;or even
30846;`{}` is the old style formatting not fstring
30847;uh
30848;wow if python changed its string interpolation api a third time it's gone really fuckin downhill
30849;there's old `{}` with .format or %
30850;None
30851;fstrings came in 3.6
30852;iirc
30853;None
30854;looks like they're still using {} to denote substitutions
30855;yeah except you're not passing a tuple
30856;> Hello Eric. You are 74.
30857;what is python's target demo lmao
30858;:thonk:
30859;"idk man your question doesn\'t make a lot of sense. can i use the function that looks for substitution tokens without defining substitituion tokens""?"
30860;"there\'s also walrus so you can do```print(f""{(foo := 1)} {foo+1} {foo}"")```"
30861;sure
30862;those are arbitrary expressions
30863;although tbh i've not seen anyone use walrus within an fstring yet
30864;behold
30865;`{foo = }` is not
30866;None
30867;that's
30868;nothing
30869;that's so good weenie
30870;:^)
30871;we're gonna put it right on the fridge so everyone can see it
30872;`_ = err`
30873;I love that
30874;gonna release a package called `errignore` with that
30875;errignore.Check
30876;it returns http statuses
30877;alright guys thanks for the advice today i should try sleep now
30878;isn't chaotic good the recommended way
30879;if you need to distinguish your errors it's eh
30880;`errors.Is`/`errors.As`
30881;wrapping is a paridigm
30882;but you can only take the underlying error right
30883;i guess i'm lawful neutral
30884;i mostly just log and then return
30885;not a construct to build your own error types
30886;im chaotic good because im lazy
30887;B)
30888;a fixedsize array of interfaces is an interesting concept
30889;hwat
30890;like a `[4]error` or smth
30891;hrm
30892;can't say i'm as interested
30893;not sure i see it
30894;same
30895;not why it's any more interesting than []error at least
30896;what do y'all dislike most about go?
30897;now THAT is a good question
30898;the type system is a little minimal
30899;things like the lack of generics and sum/enum types
30900;fstring is good but I feel like the way it works is against go's explicitly verbose philosophy? so printf
30901;I hate cgo
30902;cgo is genuinely painful to deal with
30903;idk as far as i'm aware fstrings still require at bare minimum {} to do any substitutions
30904;which makes {} just shorthand for %s
30905;%v but yeah
30906;Rust has something like {}
30907;I kind of want string interop with backticks
30908;The nice part about fstrings is that the variable is placed in the string where the value will end up. Making it more clear what goes where
30909;yes and it addresses all shortcomings of its print predecessors
30910;But other than that there aren't really any benefits and there are some downsides to using fstrings over .format
30911;what downsides?
30912;you know what
30913;i owe you guys an apology
30914;im sorry for asking too many questions
30915;We don't mind answering questions!
30916;You just have to understand that sometimes the answer is here is a document answering your question
30917;yea at worst nobody answers (and then you try to do a little more research and maybe refine the question and ask again) no need to apologize
30918;"> what downsides?@func 1. You have to make sure your quotes are right or you will break the whole string and you can only use one set of quotes2. You can\'t use a `\\` inside the `{}` in an fstring so you can\'t do things like `f""Some random text {\'\\'.join(list_of_things)}""` There are ways to get around this but they are cumbersome and just using `.format()` is a lot cleaner3. If you need to reuse a string with different values you have to have a literal string in every location which is a pain to refactor. With `.format()` you can reuse the base string as many times as you want.```pystring = Key: {} Val: {}""print(string.format(""test 4))print(string.format(""Foo 5))```"
30919;I like the ES6 string interop
30920;"yeah i don't know what was wrong with `template = r'\ {0} {3.butts} this is a raw string fuck the police \\t \\t \\t';template.format()`"
30921;automagically interpolating variables from local scope is just too magical
30922;@other for me it was more asking so many questions and not taking tbe time to understand the answers
30923;I sometimes ask then figure out just after the question some rubber duck magic right there
30924;yeah we don't take any issues with the asking
30925;it's what happens after the answering that really makes the difference
30926;Sometimes just not looking at the problem for a few minutes or writing it out will make it click
30927;Sometimes I try and solve a problem by taking the dog for a walk (not a euphemism)
30928;"Im not good at programming so the dog gets a lot of walks ;)"
30929;hiya
30930;when I run the test
30931;in vim
30932;in do test coverage for other thing
30933;before
30934;after
30935;sure looks like you got a bunch of failing tests
30936;it's doing a test coverage
30937;for another file
30938;yeah go test is probably configured to just run `go test .` or whatever
30939;honestly don't even know how to restrict test runs below the package level
30940;if I run in terminal```bashgot test run=NumInList```
30941;it run the thest
30942;yeah
30943;that's what i'm saying
30944;. should just do the current package only
30945;i think it's doing stdlib tests
30946;not sure why?
30947;idk
30948;how I can run it inside vim
30949;directly
30950;check the GoTest docs
30951;¬Ø\\_(„ÉÑ)_/¬Ø
30952;not sure I use GoCoverage or sth
30953;it almost certainly lets you pass arguments
30954;just read the help section on it
30955;yea
30956;let's see
30957;gocov
30958;this is the only test i have in the editor lol
30959;else I just run tests in the terminal
30960;```:GoTest[!] [expand] Run the tests on your _test.go files via in your current directory. Errors are populated in the quickfix window. If an argument is passed [expand] is used as file selector (useful for cases like `:GoTest ./...`). You may optionally pass any valid go test flags/options. For a full list please see `go help test`. GoTest times out automatically after 10 seconds. To customize the timeout use |'g:go_test_timeout'|. This feature is disabled if any arguments are passed to the `:GoTest` command. If [!] is not given the first error is jumped to. If using neovim `:GoTest` will run in a new terminal or run asynchronously in the background according to |'g:go_term_enabled'|. You can set the mode of the new terminal with |'g:go_term_mode'|.```
30961;Cz `go test .`
30962;> You may optionally pass any valid go test flags/options
30963;yea
30964;I do
30965;`:GoTest run=NumInList`
30966;it say success without report
30967;are you sure that's the flag you want to pass
30968;dunno
30969;look at the `go test` command you ran for comparison
30970;I am watching algo training
30971;that's what he do to run his tests
30972;yeah just compare the working go test command to what you just pasted
30973;```:GoTest run=NumInListgo test run=NumInList```
30974;first give a success message
30975;second run fully
30976;weird
30977;idk this is why i don't fuck with editor tooling that much
30978;None
30979;i just use tmux
30980;pop open a new window or a split pane
30981;e z
30982;None
30983;None
30984;I use kitty it has split window also
30985;Ctrl Z
30986;it literally minimizes vim
30987;fg to restore
30988;:kek:
30989;ctrl z
30990;> minimize vim
30991;is kill
30992;no it's not
30993;not in linux
30994;ctrl+z is bg
30995;ctrl+c is SIGINT
30996;yea it is still in background
30997;^
30998;but said stopped
30999;yeah
31000;fg to restore bruh
31001;and then you fg to bring it back
31002;like the fg command
31003;aha
31004;cool
31005;we live and learn
31006;fuck
31007;i corrupted all of my drives
31008;F
31009;all i wanted was a dual boot
31010;and always always something so fucking bad happened
31011;this time the bad thing is the corruption of EVERY FUCKING DRIVE I CAN FIND
31012;welp
31013;this is the weirdest snake ever
31014;F
31015;life is fucked
31016;are u sure that drives are corrupted
31017;try to live boot from linux
31018;and see
31019;if they open or not
31020;try mxlinux it had pretools to fix stuff
31021;mxbootrepair
31022;is life safer for me
31023;> this is the weirdest snake ever@other he's so beautiful
31024;> are u sure that drives are corrupted@oni chan im really sure my pc wont even detect them when i plug em in
31025;uhhh quick question whats the function in the `time` package that returns whether or not the time is pm or am
31026;btw i first checked docs before coming here
31027;Generally it isn't the drive that is corrupted but rather the partition table or the filesystem both of which can often be recovered with the right tools
31028;If they are not detected by the PC that wouldn't be corruption and wouldn't be a side effect of trying to dual boot
31029;But it depends on whether you mean they are not detected or when you plug them in windows doesnt automatically give them a drive letter
31030;Ladies and Gentlemen i proudly present: my horrible binary day clock! :gopher: `made with go`
31031;oof 10MB
31032;I am on linux thoo
31033;can u send video or ss
31034;ten 10 mb?!
31035;wtf..
31036;ouch
31037;yea
31038;after unzip
31039;umm
31040;it's 9.9MB not ten
31041;XD
31042;i sort of deleted the src
31043;lol
31044;Yeah there's no way anyone is gonna run a binary sent over discord
31045;ok sure
31046;yea
31047;send us an ss
31048;Or code
31049;ss to show case
31050;where are the mods
31051;we need a showcase channel
31052;#showmewhatyougot
31053;ok mods
31054;kick me
31055;:p
31056;ok
31057;do it
31058;just do it
31059;don't let your dreams be dreams
31060;jussst doo itttt
31061;https://tenor.com/view/doitgif4445204
31062;> Hint : Don't do it
31063;Noooooooooo
31064;The actor for black panther died
31065;RIP
31066;I feel sad
31067;suicide or normal death
31068;https://mhindustantimescom.cdn.ampproject.org/v/s/m.hindustantimes.com/hollywood/chadwickbosemandiesat43avengersunitetopaytributetoblackpantherstarrestinpowerking/storyFznIJ8Js7629lExpkSAEnO_amp.html?amp_js_v=a3&amp_gsa=1&usqp=mq331AQFKAGwASA%3D#referrer=https%3A%2F%2Fwww.google.com&amp_tf=From%20%251%24s&ampshare=https%3A%2F%2Fwww.hindustantimes.com%2Fhollywood%2Fchadwickbosemandiesat43avengersunitetopaytributetoblackpantherstarrestinpowerking%2FstoryFznIJ8Js7629lExpkSAEnO.html
31069;Cancer death
31070;RIP
31071;I already miss him I was looking forward to another back panther movie
31072;He was great
31073;I didn't watch the movie
31074;my self
31075;:0
31076;I watch the infinite war he appears in it
31077;that thanos movie
31078;Watch black panther
31079;It's so good
31080;There's also black panther 2
31081;yea I will when I have free time
31082;Ok
31083;actually I have all the time rn  but need to be psychologically ready
31084;to watch a movie
31085;XD
31086;|:
31087;yesterday I watch a movie I was in the mood
31088;It was really good
31089;wait it is golang
31090;#offtopic go here
31091;:gopher:
31092;what Sscanf
31093;I am trying to scan an float64
31094;from the command line
31095;```bashgo run converter.go from=ft to=in 45```
31096;"```govar num float64 n err := fmt.Sscanf(""string to scan Format string  %f &num) if err != nil { fmt.Println(from to n) }```"
31097;"```var num float64 n err := fmt.Sscanf(""string 45.0 scan string %f scan &num) if err != nil { fmt.Println(from to n) }```"
31098;Sscanf https://golang.org/src/fmt/scan.go?s=4522:4597#L103
31099;https://golang.org/pkg/fmt/#Sscanf
31100;Not sure if sscanf is what you want but that's how it works
31101;https://tenor.com/view/hackermanmrgif12747764
31102;None
31103;Good work :)
31104;@oni chan Akkakakakak how did you do it
31105;Get the waifu on terminal
31106;1920x1080 background
31107;png thoo
31108;`reflect.MakeChan(t 0)` is unbuffered yes?
31109;Bruh
31110;Hey gophers I just pushed a simple package that provides a single pane of glass across all runtime metrics https://github.com/ppwfx/pprofrec
31111;please let me know what you think
31112;> idiomatic fast and boring waywell you've got the right spirit that's for fuckin sure
31113;haha cheers! üôÇ
31114;Is that Vendor Directory using for declare/store  which package u r using to prevent version incompaitible issue?
31115;@dgo gopher
31116;Sorry you must be in a voice channel to hear the mighty gopher.
31117;meh
31118;@dgo gopher
31119;HAHHAHAHA
31120;@dgo gopher
31121;do u think context.Context is going to be enforced in Go2?
31122;or will we still use .WithContext
31123;in general
31124;i'm not sure i follow
31125;say the http pkg
31126;"instead of just .NewRequest(string string"",..."
31127;u have to inject the context.Context as the first arg
31128;Unless some go routine canceling system is put in place
31129;instead of calling .WithContext after
31130;Which I haven‚Äôt seen a proposal
31131;The actual value passing part of it I highly doubt will be changed
31132;welp
31133;.WithContext would require adding a new method to goddamn almost everything
31134;hmm
31135;i don't recall anyone even proposing WithContext
31136;and i'm not seeing a lot of value added
31137;i think i remember someone saying WithContext was just added to avoid a breaking change
31138;so i wondered if that would change
31139;Especially since `NewThing().WithContext()` has no guarantees that WithContext() happens before goroutines start doing stuff
31140;which is kinda antithetical to the whole point of contexts
31141;The only real issues I‚Äôve seen with contexts is that they perform two jobs: goroutine timeline management and contextual value passing
31142;But it‚Äôs probably a bit late to undo that. If it‚Äôs even really needed
31143;Is there an actual Proposal for this?
31144;I‚Äôve seen one or two? Maybe they were just annoyed blog posts
31145;i ask because i've paid very little attention to proposals
31146;so it's entirely possible that it exists and i just haven't heard of it
31147;There‚Äôs been a few things to create a built in goroutine lifetime management thing
31148;To make goroutine cancelation part of the language
31149;that i'd like to see
31150;hmm
31151;> Sorry you must be in a voice channel to hear the mighty gopher.@dgo :thinkingo:
31152;Please visit https://discordapp.com/oauth2/authorize?client_id=173113690092994561&scope=bot to add dgo to your server.
31153;bruh
31154;@andersfylling there's NewRequestWithContext
31155;I personally don't like APIs that force contexts as first arguments
31156;yeah disgord is being reworked to use group the REST methods into resources
31157;and theres WithContext within those now
31158;https://github.com/golang/go/tree/dev.go2go/src/cmd/go2go/testdata/go2path/src
31159;:pogfish:
31160;@zephyrtronium
31161;`func Foo[T any](t T)`
31162;it reads so much better every change they make
31163;any of you guys have strong opinions about GoLand? I have a PyCharm subscription already and was thinking of upgrading to the IDEA Ultimate
31164;if you like the jetbrains products
31165;its very good
31166;if you dont liek the jetbrains products
31167;its still okay
31168;Go doesn‚Äôt need a whole bunch of ide tooling to work well
31169;But it‚Äôs nice to have
31170;fair enough. ngl jetbrains feels pretty damn nice to use after getting used to it for work. they definitely got me hooked in their ecosystem for pycharm/webstorm/datagrip
31171;I have found it‚Äôs much more useful in some languages than others
31172;Like using intellij is fantastic for java
31173;In go it‚Äôs more of just a personal preference thing
31174;Personally I‚Äôm using vscode
31175;But lots here use vim
31176;Mostly because they are nerds
31177;But can‚Äôt help that üòõ
31178;haha
31179;nano gang
31180;@andersfylling yeah WithContext is what I do
31181;It's nice
31182;Do compiler compile commented lines or codes?
31183;well
31184;well yeah but actually no?
31185;iirc it does retain some information in the final output but you can strip those debugging symbols
31186;ok I don't think it pertains code wordbyword
31187;so I don't think that applies for comments
31188;the compiler might read magic commments though
31189;alos https://en.wikipedia.org/wiki/DWARF
31190;why is b empty here``` a := []int{1,2} var b []int copy(b a) fmt.Println(b) // []```
31191;copy can only copy up to the cap of b
31192;ohhh
31193;to len
31194;yeah
31195;interesting ok
31196;`The copy builtin function copies elements from a source slice into a destination slice. (As a special case it also will copy bytes from a string to a slice of bytes.) The source and destination may overlap. Copy returns the number of elements copied which will be the minimum of len(src) and len(dst). `
31197;since len(b) is 0
31198;well nothing is copied
31199;if you want a shorter way you can append to a new slice
31200;`b := append([]int{} a...)`
31201;nice I saw this usage from time to time but never really remember it
31202;doesn't `[]int{}` allocate?
31203;`[]int(nil)` would work right
31204;but presumably that may be slower than copy if copy is doing some underlying magic?
31205;since it's builtin and maybe there are optimizations
31206;I don't think I've seen `[]int(nil)` used before isn't `[]int{}` more idiomatic
31207;i mean you could make a benchmark if you wanted to know for sure
31208;I'm doing that now :P
31209;it doesn't matter if it allocates or not
31210;both would allocate
31211;I just thought it'd unnecessarily allocate the `[]int{}` before passing as an arg
31212;obviously that's optimised
31213;```goos: linuxgoarch: amd64pkg: copybenchBenchmarkAppendNil 683278 1570 ns/op 160 B/op 11 allocs/opBenchmarkAppendZero 800486 1510 ns/op 160 B/op 11 allocs/opBenchmarkCopy 802437 1490 ns/op 160 B/op 11 allocs/opPASSok copybench 4.025s```
31214;looks like the nil append is actually a tiny bit slower
31215;how many times did u run that?
31216;can be simply noise
31217;683278 times
31218;800486 times
31219;ran it about a dozen times all with similar results
31220;802437 times
31221;run it 10 times and look at the average
31222;well yeah lol
31223;if u wanna be accurate to less than 100ns you need to store all those results and generate the error margin
31224;then youll be able tell if it's significant
31225;there's a tool in cmd that does this iirc
31226;hmm
31227;what's your benchmark code
31228;yeah its fairly striahgt forward
31229;```bash#!/bin/bashgo test bench=BenchmarkNil count 10 > resultsnil.txtgo test bench=BenchmarkZero count 10 > resultszero.txtbenchstat resultsNil.txt resultsZero.txt > diff.txt```
31230;smth like that
31231;count 10 is too low bruh
31232;stock benchmark does hundred thousands
31233;why is that too low?
31234;look at the 2nd column
31235;that's the total benchmarks ran
31236;yeah so this runs the benchmark 10 times
31237;one benchmark runs the same func N times
31238;but those N times are damn fast
31239;this isn't `benchtime 10x` it's `count 10` :P
31240;so doing it like this u can detect noise
31241;benchtime affects the 800486 or whatever
31242;maybe another program was active or something affected the result somehow
31243;count just runs that 10 times
31244;https://blog.jiayu.co/2019/05/benchmarkinggocode/
31245;i just linked smth random
31246;http://www.inanzzz.com/index.php/post/yz8n/usinggolangbenchbenchstatandbenchcmptomeasureperformance
31247;okay so those benchmarks were fukt
31248;```goos: linuxgoarch: amd64pkg: copybenchBenchmarkAppendNil 130494985 89.6 ns/op 32 B/op 1 allocs/opBenchmarkAppendZero 130074849 91.9 ns/op 32 B/op 1 allocs/opBenchmarkCopy 707617197 17.1 ns/op 0 B/op 0 allocs/opPASSok copybench 53.513s```much better results here
31249;nil is faster but copy is fastest
31250;this is just with `[]int{1,2,3,4}` tho
31251;whats the p value tho
31252;its also good practice to show the code used in a benchmark so it can be evaluated by others
31253;> the p valuethe what
31254;i linked a few articles about it
31255;aight
31256;```goos: darwingoarch: amd64BenchmarkCopy12 126 9813474 ns/opBenchmarkAppend12 171 6978136 ns/opPASSok commandlinearguments 4.380s```
31257;"```govar x []int = rand.Perm(10000000)func BenchmarkCopy(b testing.B) { for i := 0; i < b.N; i++ { y := make([]int len(x)) copy(y x) }}func BenchmarkAppend(b testing.B) { for i := 0; i < b.N; i++ { _ = append([]int{} x...) }}```"
31258;copy is quite faster
31259;well yeah
31260;yeah generally that's what we're seeing
31261;one allocates a lot of heap while the other just does it once
31262;it's the nil vs zero append that we're trying to compare rlly
31263;and ure just using primitie values
31264;so its a simply memcopy
31265;yee
31266;if u really want to compare u gotta change ur append test
31267;I think generally copy is the way to go
31268;"```gofunc BenchmarkAppend(b testing.B) { for i := 0; i < b.N; i++ { y := make([]int 0 len(x)) _ = append(y x...) }}```"
31269;i wouldnt be surprised if it does a memcpy here as well
31270;I don't like the way make does magic tbh
31271;its not really magic
31272;is it not?
31273;it creates a slice
31274;what are its argument types then :P
31275;and deals with capacity and length of that slice
31276;capacity and length
31277;`make(map[string]bool)`
31278;https://tour.golang.org/moretypes/13
31279;not magic at all
31280;and make is faster because it allocates exactly n amount of items as specified
31281;append allocates to the nearest class or whatever I forgot
31282;inb4 make accepts generic types so it\'s magical
31283;I mean yeah
31284;also its a function that makes use of optional params which you dont see that in typical go api
31285;make should be a generic function that works like other functions
31286;if you want to have it do compiler magic of course do that
31287;just because u dont typically see it doesnt mean it's not there
31288;https://golang.org/pkg/builtin/#make
31289;i dont like inconsistencies
31290;yeah
31291;same with print println etc
31292;why then cant i make a function with optional params
31293;builtin is a bunch of magic
31294;@Coin Operated you can tho
31295;`...interface{}` üòî
31296;with the Option pattern
31297;even append has optionals
31298;ew no
31299;append uses variatric param
31300;I know right
31301;apparently make does too
31302;`func make[T](...int)` then
31303;that's the closest u get to the concept of optional in Go
31304;generic make feels a lot nicer
31305;and the fact that i _cant_ make my own func like `make` is weird to me
31306;I mean you can kinda
31307;i should specify
31308;i mean make type safe optional params like by using function overloading or something like that
31309;that u cant directly deal with raw memory like u can in say c++?
31310;the point is that it\'s moot to say omg magic!!!
31311;`func make(t interface{} size ...int)` :^)
31312;k
31313;"im curious then cause ive never seen it used  what would it be then if i passed more than one size""? what does it do?"
31314;I mean with slices it's `len cap`
31315;yes
31316;and more is just a compiler error because it's magic
31317;did u even read the link i sent for make? xD
31318;but what does `make([]int 4 5 2)` do
31319;it's a compiler error
31320;ew
31321;```./test.go:4:10: too many arguments to make([]int)```
31322;that feels hacky to me
31323;exactly
31324;by the functionality of the `...` i should be able to pass in however many i want and have it handled the same
31325;in general builtin functions are not really functions they're special expressions that use function call syntax
31326;> `make([]int)`üëÅÔ∏èüëÅÔ∏è is this a generics
31327;the documentation in pkg/builtin is only documentation
31328;> in general builtin functions are not really functions they're special expressions that use function call syntax@zephyrtronium yeah and I think that's kinda wack and that generics should help fix some of that
31329;@zephyrtronium very true  thats why we try to avoid them when it's reasonable
31330;the actual specification of how builtin functions behave is in the language spec
31331;by we i mean the company i work for
31332;you haven\'t actually given any reasons not to use them just they don\'t behave like real functions which yes correct
31333;I will say builtins do appear to be better for performance
31334;but they just give me weird feelings
31335;oh its 100% style preference
31336;can u even program without the builtins
31337;for consistencies sake
31338;@andersfylling is that a challenge
31339;yeah
31340;okay what should I make without builtins
31341;hello world
31342;anything involving channels üôÇ
31343;`reflect` time
31344;channels i think u have to use the make  theres no other way
31345;well u can do _anything_ with reflection
31346;reflect is full of builtins internally
31347;I took> program without the builtinsto mean not writing any builtins myself
31348;if stdlib uses builtins that's their problem lol
31349;which because my stance on not using them (when feasible) is because i dont like seeing them lol
31350;inconsistent
31351;linter that replaces every builtin with reflect calls
31352;inconsistent in what ways?
31353;inconsistent and hacky
31354;is it worse for builtins to be almost invisibly inconsistent with real functions or for your code to be inconsistent with all other go code that uses the language's dedicated facilities to solve basic problems?
31355;again we avoid it when feasible
31356;is `make([]int 0 n)` really worse than `[]int{n1: 0}[:0]`?
31357;we just use []int{}
31358;that means something different
31359;unless we know the cap we need
31360;we dont bother instantiating slices with 0 cap
31361;cap != len
31362;i know
31363;hmm
31364;I'm gonna have some tea
31365;> is it worse for builtins to be almost invisibly inconsistent with real functions or for your code to be inconsistent with all other go code that uses the language's dedicated facilities to solve basic problems?this
31366;i provided two equivalent expressions to allocate a zerolength slice with cap `n`
31367;one uses a builtin function
31368;the other is extremely nonobvious to most go programmers including apparently you
31369;so if i were mapping a slice of one type to a new slice of another sure i would use the make func to instantiate a slice with that length and cap. otherwise id just use []<type>{}
31370;sure but that\'s different from avoiding builtins when feasible
31371;i mean
31372;it's totally feasible to use the second expression i gave
31373;in literally any situation
31374;but like u said its really going out of the way to avoid a built in
31375;and confusing at first glance
31376;which i would say is not feasible
31377;that\'s not what the word feasible means to me
31378;hmm  what i mean then is if its the difference between using two idiomatic go uses ill chose the one that _isnt_ a built in
31379;both for performance and readability
31380;> avoiding builtins for performance/readability:kek:
31381;i don't think there is any such situation
31382;go is usually good at having exactly one idiomatic option
31383;but also the term idiomatic isn\'t descriptive and is ultimately more of a sociological concept than a programming one
31384;copy just proves that builtin has way better perf
31385;you don't want to avoid that
31386;is ther a difference betwen make([]int) and []int{}? i do agree that i the majority of cases go does provide only one way to do something (which i very much like)
31387;yes ive used copy too
31388;> is ther a difference betwen make([]int) and []int{}?@Coin Operated bench it
31389;yeah if the performance implications actually matter to you you can put the time in to write a benchmark
31390;there's no difference between those two but also i've never seen the former in real code so i'd argue the latter is the idiomatic option
31391;if you can't put the effort in it probably doesn't actually matter
31392;I use `[]int(nil)` a lot when it makes sense to return nil if none of the iterations end up performing an append
31393;because it'll allocate on the first append otherwise I can just return the nil slice I already made
31394;technically `append([]int(nil) stuff)` can have slightly better performance than `append([]int{} stuff)` because the latter has to create a slice structure even if it doesn't have to allocate
31395;I've never seen `[]int(nil)` used in real code personally
31396;i remember seeing it somewhere in stdlib code
31397;yikes
31398;never seen that one before
31399;usually i prefer `var anime []int` in situations like that though or just ignore the difference and use `[]int{}`
31400;"> technically `append([]int(nil) stuff)` can have slightly better performance than `append([]int{} stuff)` because the latter has to create a slice structure even if it doesn't have to allocate@zephyrtronium my bench earlier proved that ;)"
31401;in our use case performance between []int{} and make([]int) are insignificant. however i am curious if a benchmark will show any. ill get some up when i get to my desk
31402;it's almost definitely going to be a difference of microseconds
31403;at worst
31404;these are deep deep deep language internals
31405;true true
31406;they're not going to be slow
31407;hmm i know i wrote a playground thing to investigate whether it's the case before but `make([]int)` might allocate a nonzero cap for the backing array
31408;"it's negligible I think```BenchmarkAppend12 160 7238042 ns/opBenchmarkAppendNil12 169 6939878 ns/op``````govar x []int = rand.Perm(10000000)func BenchmarkAppend(b testing.B) { for i := 0; i < b.N; i++ { _ = append([]int{} x...) }}func BenchmarkAppendNil(b testing.B) { for i := 0; i < b.N; i++ { _ = append([]int(nil) x...) }}```"
31409;yeah fuckin one microsecond difference
31410;if i'm reading it correctly
31411;(‚ïØ¬∞‚ñ°¬∞Ôºâ‚ïØÔ∏µ ‚îª‚îÅ‚îª
31412;those benchmarks aren't written correctly
31413;oh wait
31414;the interior of the loop can be completely removed
31415;yeah that's getting noop'd
31416;assign the result to an exported packagelevel variable
31417;"like this?```govar A B []intfunc BenchmarkAppend(b testing.B) { for i := 0; i < b.N; i++ { A = append([]int{} x...) }}func BenchmarkAppendNil(b testing.B) { for i := 0; i < b.N; i++ { B = append([]int(nil) x...) }}```"
31418;sure
31419;don't really need separate variables for each but doesn't matter
31420;about the same```BenchmarkAppend12 152 6972546 ns/opBenchmarkAppendNil12 152 6956951 ns/op```
31421;also yeah i should have observed that it's only running 160 iterations which indicates that it was not being eliminated my mistake
31422;still good practice to do that trick to make sure though
31423;so I don't see the benefit of `[]int(nil)` myself
31424;this is why it\'s so hilarious when people get all twisted around the axle about oh bluh bluh but it\'s slower
31425;which is why i just prefer using []<type>{} (unless of course i need to specify len or cap)
31426;<https://godbolt.org/z/xa8bzj> indicates that using `[]int(nil)` is indeed very slightly more efficient
31427;in the sense that `append([]int{} x)` does slightly more work than `append([]int(nil) x)`
31428;but if the difference actually makes an impact on your program then that means you have allocations in the hot path which probably could be rewritten to avoid the whole situation üôÇ
31429;I honestly almost never use []int{}
31430;I only do that if I need to actually differentiate between nil []int and a nonnil zerolength slice
31431;so it's part of the API
31432;"its prolly different in each company  for the one im at its prefered to use []int{}. If i go to another and they want me to use make the sure ill do that there. Im just not a fan of the whole two (or more) ways of doing something"". _thats_ that part that bothers me mostly."
31433;I don't think it has to do with different companies
31434;well at least in our style guide it specifies that here
31435;it's `[]int{}` for a zerolength `make([]int len)` for a length `make([]int n cap)` for capacity and `var n []int` for a nil slice
31436;this just goes for almost all code bases out there
31437;so then what does make([]int) do
31438;it does what `[]int{}` does but few prefer it
31439;yeah so like i was saying> which is why i just prefer using []<type>{} (unless of course i need to specify len or cap)
31440;and two ways of doing the same thing üôÅ
31441;Is there a package that let's me end and begin tasks?
31442;Like open and close given exes
31443;`os` has Exec or Command or whatever
31444;godspeed
31445;Huh. Ok
31446;`os/exec`
31447;oh whoop
31448;os/exec yes
31449;<https://golang.org/pkg/os/exec/>
31450;os/exec
31451;how does one write raw bytes to a device with gobluetooth
31452;bluez too high level
31453;üòî
31454;ugh
31455;golly
31456;if there isn't a Write() method i don't even know how you'd do it
31457;yeah dude
31458;there isn't
31459;sounds like a bad library
31460;nah it's just bluez being too high level
31461;not necessarily bad
31462;yeah it's effectively just a wrapper around bluez
31463;huh that's funny
31464;a Writer API is either super low level or super high level
31465;lmao yeah
31466;there's an obex example
31467;not sure if that's what you wnat
31468;yeah not even sure what obex is
31469;I have a bluetooth module that just spits out serial bytes to an arduino
31470;all I want is to give it bytes lol
31471;hmm obex might be what I need
31472;eh I don't think so
31473;I might just skip a desktop control system for now and just make a mobile one lol
31474;I dunno what your setup is but could you sacrifice interoperability and use something like this http://www.userk.co.uk/arduinobluetoothlinux/
31475;I've never used bluetooth on linux but is it as easy as setting up as in the article and writing to /dev/rfcomm0
31476;That's not the issue
31477;The issue is specifically doing it with Go
31478;I'm able to connect and control it manually doing stuff like that
31479;So when I say sacrificing interoperability I mean calling OS commands from go to set it up
31480;Yeah not doing that
31481;Its cheaty but then you could just write to the device
31482;Can just use a shell script
31483;Can you set up the connection with gobluetooth which wraps bluez and then just write to the device under /dev/ ?
31484;I'll probably just use a shell script to setup the device and baudrate and then just write to that file from Go
31485;Cool it sounds like a neat project though. I'd not thought of using bluetooth as remote control for stuff before.
31486;just had a bluetooth chip laying around
31487;Thinking about it I have 5 esp32s not doing anything st the moment
31488;hmm writing bytes to the dev file from Go isn't working
31489;but echo does
31490;:thonkthonk:
31491;ay it works just a bad file descriptor lol
31492;you're a bad file descriptor
31493;Anyone have experience with goquery?
31494;ask away
31495;So i'm trying to get the elements of
31496;Name and Time of Availability on the page
31497;But i'm unsure what i'm doing wrong to print the responses
31498;Starting with name anyhow.
31499;https://namemc.com/minecraftnames?length_op=&length=3&lang=&searches=50
31500;Thought that was the containerd logo
31501;Shame
31502;wow this html is bad
31503;gl
31504;any advice at all? XD
31505;you havent actually given us the problem you are having
31506;also reading from a resp.Body empties the body
31507;so when you pass it to goquery its reading from an empty reader
31508;because you read it all in ioutil.ReadAll
31509;@Deleted User
31510;hmm o
31511;so i need to read from string(body)
31512;no
31513;thats just a string
31514;Where exactly do i read the document from? I succesfully get it from the request.
31515;buffer := bytes.NewBuffer(body)
31516;then pass that buffer to goquery
31517;None
31518;Like so?
31519;yes
31520;I have to select the HTML elements within the doc.Find of what im wanting to read is that correct
31521;i have no idea
31522;never used the lib
31523;Thanks for the information üôÇ
31524;but that should atleast give you a working document
31525;Going to try print the buffer now and see the result
31526;it will be the same as the print above
31527;its the same data
31528;Nothing is printing unsure why though.
31529;Code?
31530;None
31531;@evandocarmo This is the code
31532;No errors?
31533;no.
31534;I mean nothing even prints.
31535;Yes
31536;Because you have read from the buffer
31537;Which means it‚Äôs empty
31538;So there is nothing to print
31539;When it‚Äôs read again
31540;What happens if you print doc
31541;Right after you declare it
31542;> What happens if you print doc@evandocarmo Checking
31543;&{0xc0003a14a0 <nil> 0xc0001712d0}
31544;This is the response
31545;Is the buffer consumed when its read?
31546;I don't think it's actually getting any data from the page unsure actually.
31547;Can you print the actual error
31548;After the request
31549;Instead of ctx.showError
31550;@misterturtle I may be wrong on this but generally io.Readers are 1 time reads unless stated otherwise
31551;Holy shit i managed to get a response
31552;None
31553;Now i just somehow how to work out how to get the names listed in the table..
31554;When used by Printf itll use the String() method I think
31555;yes of the unread portion
31556;> String returns the contents of the unread portion of the buffer as a string
31557;so if you've read all the bytes
31558;then there is nothing to string
31559;If it's all unread though it doesnt look like itll consume it... is that right/interesting?
31560;yes
31561;I wonder what the decision behind Read consuming but String not
31562;technically println(buffer) does not read the buffer
31563;Does any of your know the best way to progress and read these two rows
31564;well probably io.Readers are generally thought of as streams of data where fmt.Stringers are thought to give a representation of the available data
31565;if i hazard a guess
31566;Yeah that makes sense I guess I thought any attempt to retrieve data from something that conforms to a reader would consume the data but I guess it's not using the method that conforms to the reader interface
31567;does net/http use http2 by default ?
31568;if you look int the net/http docs it explicity states which things need to be tweaked to use http2
31569;most of it will try to use it if available iirc
31570;@Madxmike yea i read that
31571;but idk if i should use golang.org/x/net/http2 to make a transport
31572;or stick to normal http transport
31573;> Starting with Go 1.6 the http package has transparent support for the HTTP/2 protocol when using HTTPS. Programs that must disable HTTP/2 can do so by setting Transport.TLSNextProto (for clients) or Server.TLSNextProto (for servers) to a nonnil empty map
31574;> The http package\'s Transport and Server both automatically enable HTTP/2 support for simple configurations. To enable HTTP/2 for more complex configurations to use lowerlevel HTTP/2 features or to use a newer version of Go\'s http2 package import golang.org/x/net/http2 directly and use its ConfigureTransport and/or ConfigureServer functions. Manually configuring HTTP/2 via the golang.org/x/net/http2 package takes precedence over the net/http package\'s builtin HTTP/2 support.
31575;ok so any advantage or disadvantage on using golang.org/x/net/http2 ?
31576;The default roundtripper wil force a http2 attempt
31577;ah ok
31578;documentation of the golang.org/x/net/http2 says the same
31579;> This package is lowlevel and intended to be used directly by very few people. Most users will use it indirectly through the automatic use by the net/http package (from Go 1.6 and later). For use in earlier Go versions see ConfigureServer. (Transport support requires Go 1.6 or later)
31580;Didn't know this until I hit Ctrl+F on the net/http page and read the documentation a couple of minutes ago
31581;yea read it aswell
31582;i think like 80% of the time we just read whatever the docs say and give you the answer from there lol
31583;unless its a super specific question
31584;but the website detected the go http2
31585;so thats why i was asking
31586;i wasnt sure why guess i will have to debug it later
31587;doing the Go tour```In the playground the time begins at 20091110 23:00:00 UTC (determining the significance of this date is an exercise for the reader).```
31588;hummm
31589;Yeah time is fixed in the playground. There are some other things that you can't do on the playground
31590;The random source is the same very time as well for example
31591;<https://blog.golang.org/playground> gives some insight about why this is
31592;determinism is nice
31593;Yeah they also fake sleeps on the playground to reduce cpu time used
31594;The playground has some modifications to the runtime to facilitate this
31595;It basically runs the entire program as fast as possible and creates timestamps for any output that should be delayed
31596;oh that's cute
31597;It used to have its own runtime using nact but that has been removed
31598;It now uses the fakeTime buildflag
31599;<https://github.com/golang/go/blob/a38a917aee626a9b9d5ce2b93964f586bf759ea0/src/runtime/time_fake.go> for example
31600;<https://github.com/golang/go/blob/5c2c6d3fbf4f0a1299b5e41463847d242eae19ca/src/runtime/proc.go#L4576>
31601;This the right place to ask for some help?The tldr is  I want to compile for Windows a project that use the gousb library  this requires some C compiling and the libusb1.0 C library. I just can not for the life of me figure it out.In Linux ( ‚ù§Ô∏è ) it's not a problem and everything works as intended  my problem is getting the üå©Ô∏è Windows compile to work.
31602;You need to setup a gcc or other C compiler using mysys or mingw
31603;There are windows setup steps in the readme
31604;install pkgconfig and libusb
31605;It is a bit of a pain to get started initially but the steps are pretty well documented
31606;pkgconfig installed mingw64 with GCC as well. libusb1.0 reside in the mingw directory.
31607;what does `pkgconfig cflags libusb1.0` show?
31608;I@includedir@/libusb1.0
31609;I assume pkgconfig is in your PATH or do you have to provide the exact location?
31610;pkgconfig should be ok. When I try to compile I get this error:invalid flag in pkgconfig libs: L@libdir@Which is a step forward as previously I got this error:invalid flag in pkgconfig cflags: I@includedir@/libusb1.0That got solved by adding the env variable CGO_CFLAGS_ALLOW with I@includedir@/libusb1.0
31611;Anyone got a useful link with detailed stepbystep on how to use C libraries for Go projects in Windows?!
31612;(running go1.14.6 in Windows btw  if it matters)
31613;Oh and running pkgconfiglite installed using chocolatey windows packet manager.
31614;None
31615;How exactly can i do this?
31616;Do what?
31617;Make it so i can output the name + dates
31618;None
31619;Together
31620;You are already iterating over the names
31621;I have managed to get both after some trial and error ^
31622;Instead of _ there put name
31623;And then fmt.Sprintf(‚Äú%s%s\‚Äù name dates[i])
31624;That will give you the string you seem to want there
31625;uhhh
31626;that pfp really infuriates me
31627;:sadnigga:
31628;what's the best way to make a program handle both SIGTERMs and goroutine errors?
31629;By not causing the latter
31630;And by signal catching the first
31631;well it wouldn't make sense to keep running a program if an important goroutine died
31632;i mean it won't die
31633;unless you kill it
31634;Have you considered not making it die
31635;or it panics
31636;and a panic() will terminate the program
31637;an uncaught panic at least
31638;Fix yo code if goroutines are dying
31639;yep
31640;It really boils down to that
31641;yeah i dont see how a goroutine dies and doesnt either panic or you killed it
31642;Fix yo damn code
31643;what about `http#Listen`
31644;what about it?
31645;Irrelevant
31646;Fix your code
31647;i want to handle errors from it
31648;my code doesn't crash
31649;it's just i want to handle cases where it gets an error from server handling
31650;All Listen() does is call your http handlers
31651;so
31652;Then check for errors
31653;again
31654;:robpike:
31655;well if your getting an error from listen then your server is dead
31656;you have to fix your code
31657;i said. my code does not have errors.
31658;Then wheres the issue
31659;I saw. But if your goroutines are dying and you don\'t know why
31660;your code is broken
31661;log.Fatal(http.Listen)
31662;dont do that lol
31663;maybe
31664;i mean i want the server to exit if the server goroutine exits but also listen for SIGTERMs
31665;`os.Signal` is what you're looking for
31666;Stop your program from exiting while waiting for a signal to get sent on a channel
31667;discordgo has a nice example of how to handle signals actually
31668;https://github.com/bwmarrin/discordgo/blob/master/examples/pingpong/main.go#L48L50
31669;i steal this all the time
31670;You actually only need to signal on `os.Kill` I believe
31671;what if I want to gracefully shut down a server when a specific goroutine exits
31672;Write to that channel
31673;then that goroutine has to send a signal indicating that it has done so
31674;usually by writing to a channel
31675;@read the status one quick Google later and https://stackoverflow.com/questions/31235211/gotemplateshowdoiaccessarrayitemarr2intemplates/31235243
31676;"is abstracting a string into a template something that is seen as ok to do in go? is there an alternative/better way? ```govar msgFoo = foo %d""fmt.Sprintf(msgFoo bar)fmt.Sprintf(msgFoo baz)```"
31677;thats kinda the whole point of the verbs
31678;is to apply the same string to different inputs
31679;"is there any reason when using `panic()` to do something like `panic(errors.New(""foo""))` vs `panic(""foo"")`?"
31680;if you\'re using panic() you\'re explicitly saying i\'m not using errors
31681;so
31682;i'm wondering more in terms of recovering
31683;I'm doing the go tour and just learned about the `defer` statement... That's super crazy
31684;It's pretty handy
31685;as far as i'm aware recovering from a panic gives you no explicit context except the panic string
31686;nah it gives you whatever is the argument to panic
31687;if you do `panic(nil)` the result of `recover()` is `nil`
31688;never ever do `panic(nil)`
31689;i personally like to panic with an error rather than a string in most cases but i don't know of any situation where it will actually matter
31690;oh fun
31691;that raises an interesting question
31692;if you return an error or panic with error and wish for it to have some context in the form of Sprintf verbs does it then make sense the have that error listed as a public var?
31693;sometimes
31694;"```goErrFoo = errors.New(""foo"")ErrBar = errors.New(fmt.Sprintf(""bar %d""))ErrBaz = fmt.Sprintf(""baz %d"")...return errors.New(ErrBaz someval)```"
31695;since ErrBaz is the logical route to take (i think?) it's not really an ErrX anymore
31696;if you have an error like this it would be better to just create a custom error type imo
31697;should you always have captialised fields in a custom error struct?
31698;```gotype ErrCustmoFoo struct { something string}```
31699;https://play.golang.org/p/ImU9NbtRmSjis this ok if the panic is desired behaviour?
31700;panics are correct when the error is with the programmer
31701;if someone arranges code into an invalid or nonsense situation when using your api then you should panic
31702;index out of bounds is a frequent such example
31703;great
31704;go has me overthinking things a lot
31705;thinking doesn't mean overthinking üôÇ
31706;what's the reason `:=` only works inside a function?
31707;`x := 1` has the same semantic as `var x = 1` no?
31708;spec doesn't allow it
31709;yea but any reason behind the decision?
31710;probably because it's inconsistent
31711;everything in the global scope usually has a keyword that starts the statement
31712;e.g. package func type var etc
31713;allowing the walrus shorthand would be inconsistent as the variable name would be the first word
31714;"@beepsandboops I think this would be what you\'re looking for:```govar ( ErrFoo = errors.New(""foo"") ErrBaz = errors.New(""baz""))...return fmt.Errorf(""some value %d: %w someval ErrBaz)```"
31715;that way you can unwrap to `ErrBaz` and you get the extra info about `someval`
31716;huh do you get the extra info tho :Thonk:
31717;and `some value %d` would describe what you were doing that produced the `ErrBaz`
31718;I don't think you do
31719;I mean in the error message yes
31720;if you need to extract the data later use a custom type of course
31721;is it bad practice to create an empty map like this?```m := map[string]string{}```
31722;should i be using `make()`?
31723;i prefer make
31724;but it's just aesthetics
31725;i prefer `var t Thing` over `t := Thing{}`
31726;`make(map[string]string)` has no squigglies
31727;just like var
31728;I do whichever aligns better
31729;:bigbrain:
31730;:thinksmart:
31731;```got := NewThing()t.DoMethod()```
31732;```govar t = NewThing()if !not_boolean { t.DoMethod()}```
31733;alignment good
31734;`:=` whenever possible
31735;me personally
31736;this isn't exactly gospecific
31737;but would it be possible to load wasm from a wasm program at runtime?
31738;I mean I know you could go via `syscall/js` but is there a wasm mechanism for this exposed
31739;i don't think so
31740;there's nothing much exposed to wasm to begin with
31741;not even DOM üòî
31742;true true
31743;is there a convention amongst go programmers to prevent shadowing of names
31744;I mean yeah shadowing is generally unintuitive
31745;e.g. map > map_ or somethingSpecificMap
31746;eh?
31747;that's just called naming your variables properly
31748;which I totally do not do lol
31749;had `i` shadowed a couple of times before
31750;in python it's a convention to name variables that could shadow builtins with a postfix _
31751;if you're talking specifically about things that may conflict with builtins no
31752;"e.g. `list_ = [""foo bar""]`"
31753;you either capitalize the first variable (which exports it) or you just name it differently
31754;though that rarely happens
31755;yeeeeah if you're shadowing something
31756;and the syntax highlighter would usually indicate when it does
31757;you probably want a different name
31758;like shadowing append or copy is pretty obvious
31759;I usually call my variable `cpy` for a copy
31760;none of you are actually reading my question
31761;because if shadowing them is a bad thing they're probably different things
31762;k
31763;We're not giving you the answer you want
31764;because Go\'s convention is name your stuff better
31765;you've not given any answer you're just monologuing
31766;k
31767;if there's no convention if i want to name map `_map` or `map_` or `myMap` just say so
31768;i don't need a monologue for this
31769;I usually use `m` for a temporary map
31770;I
31771;literally
31772;just
31773;did
31774;you what
31775;diamond you didn't
31776;lmao
31777;sure
31778;there's not much of a convention as long as it's clear
31779;it happens a lot on this server that you guys _think_ you are answering what is being asked but you're not
31780;> you either capitalize the first variable (which exports it) or you just name it differentlysounds like a description of conventions to me
31781;not everything is an XY question
31782;thank you Boogaloo
31783;and thank you diamond and deezy even though you misunderstood
31784;i'm sure i did
31785;i appreciate you
31786;other languages i've used had no convention
31787;it's only python
31788;due to its underscore quirks and snake case
31789;so i just wanted to ask quickly
31790;yeah `m` in my code is usually what I use for a map
31791;i've noticed there is a convention in golang to use short variable names... is there a big reason for this or is just a habit carried over from method receivers?
31792;otherwise I just get specific with what the map is used for
31793;like `srcMap`
31794;i elected for `nameMap` in my case
31795;the general idea is that your functions are short enough and in concert with the type system
31796;short variable names are adequate
31797;`t Transport` in the function signature makes it completely unambiguous what `t` is
31798;as opposed to `def foo(t): t.butts()`
31799;I like short variable names because it makes stuff like indexing easier to read by making the code more narrow
31800;i believe short variable names are mostly ok but can become difficult when the logic becomes more involved with loops etc
31801;that's fine name your variables whatever you need
31802;so there\'s no gospecific convention for s := some string etc
31803;and yeah basically if the code has a lot of stuff going on it can be appropriate to be more verbose
31804;i mean yeah. the convention is make your names as short as you think is managable
31805;one go semiconvention I see (and use) is `s` equals type whatever and `ss` equals slice of that type
31806;shit i picked that up from haskell
31807;i say semi convention because like not everyone uses it and it's not gospecific
31808;but it's something you see in the standard library
31809;I picked it up from go üòÑ
31810;ok interesing sidequestion
31811;"since `_""fmt""` in import has specific meaning does a prefix carry over to mean anything special for variables?"
31812;no
31813;`_` is only special when used as a name
31814;all _ is doing when importing is running that package's init functions afaik
31815;so you\'re not going to think `_foo` is is this blankfoo?
31816;no?
31817;i'd be really weirded out
31818;to see a name prefixed with an underscore
31819;ok so underscore prefix bad?
31820;confusing
31821;it isn't a thing in go
31822;yeah you basically never see it
31823;well that's an answer anyway
31824;good to know
31825;There are some places in the stdlib where they suffix with an underscore but it is very rare
31826;btw is there a way to get go to relax about imports and unused variables temporarily for the purpose of prototyping or is it something i just have to get used to
31827;gotta get used to
31828;some things it'll allow
31829;like an empty unused function
31830;or an unused global
31831;thank you
31832;if it's tangled up with other stuff you can get around it temporarily by doing `x = x`
31833;better to just finish what you're doing though imo
31834;if what is tangled up with what?
31835;if you've declared something and it's tangled up with some code
31836;so it's not easy to comment it out without causing other compiler complaints
31837;Can't believe someone said the go tour takes 15 minutes
31838;```fooAnyfooStartsWithfooEndsWith`...foo_anyfoo_startsWithfoo_endsWith```if these are being used as fields in a struct would the underscoring be ok/helpful or will it be frowned upon to mix camel case with the prefix?
31839;basically never use underscores
31840;unless you don't need to use something returned from a function
31841;Speaking of case should constant variable names and values be all caps?
31842;No just stick with the standard naming convention
31843;^
31844;lowerCamelCase for unexported variables/function/constants/etcUpperCamelCase for exported
31845;Ok
31846;Go's naming conventions are very simple: camel case everywhere and only start with a capital if you're exporting
31847;Ty for help @Madxmike progress is being made
31848;None
31849;"How would I override the `Path` string which is present on `XStruct`?```go res := struct { XStruct Path string `json:""""` }{Path:  XStruct: xstruct}````Path` is not `""""` its `xstruct.Path`. I would like to remove `Path` from the json response. Maybe there\'s a better way?"
31850;?
31851;@Deleted User how is that at all related to Golang?
31852;@Deleted User 2nd time you've posted this. If you want to talk about it take it to #offtopic. If you just want to drop links well don't
31853;Hello,Are we able to make Registery changes in Go?
31854;Like deleting,editing things in registery
31855;https://godoc.org/golang.org/x/sys/windows/registry
31856;is there a builtin input library?
31857;oh wow
31858;fmt
31859;thats old fashioned
31860;lol
31861;nvm
31862;the fmt thing sucks
31863;fmt is amazing
31864;What's the question / problem
31865;"Greetings citizens.As newfag go programmer I have some questions.I am trying to write network scanner. To check if host is alive I want to send icmp packet (or several). I was trying to use net.DialIP(""ip:icmp:"",laddr,raddr)  but dialing to invalid ip does not return any error. Am I being stupid here?"
31866;are there plans on the go team implementing more data structures in the stdlib with generics?
31867;There is no ping utility in stdlib @Rin. There is however an icmp package but it is fairly low level
31868;@Sgt_Tailor I noticed that ping does not exist in stlib. :) I am messing with net package and dial method right now but i dont understand how to properly send icmp to remote host to get a response.
31869;You can see how a other library handles this: https://github.com/sparrc/goping
31870;By sending an ICMP packet and awaiting a response
31871;Okay thanks. I'll chek it.
31872;It is pretty strange that net package easily can check port availability but does not have ping method.
31873;It is a bit strange that it doesn't facilitate ICMP out of the box
31874;I dont think icmp is in the std but I might be wrong
31875;https://pkg.go.dev/golang.org/x/net/icmp?tab=doc
31876;Yeah that is part of the extended group. Not stdlib by definition but pretty close to it
31877;What is the extended group? ü§î
31878;/x/
31879;didn‚Äôt know about it either
31880;Anything that doesn't really fit in the standard library but is managed by the go team is put in the /x/ module
31881;It doesn't follow the Go 1 compatibility promise
31882;Oh nice. It is managed by go team. This is pretty good.
31883;Yes as described here <https://github.com/golang/go/wiki/SubRepositories>
31884;hey all. I just joined the server. Looks like a great group here. üëç I've been getting more familiar with Go over the last couple of months and I would liketo solicit code review / feedback from the community here if that's a thing.So...1) is that a thing here to help peeps newer to Go improve?2) if yes  where would I post a request for feedback?
31885;Here
31886;Everything related to go here
31887;Else in #offtopic
31888;If you just want to show your projects you have #showmewhatyougot
31889;thanks!
31890;Yeah I'd like to show with the intention of getting code feedback to help me (and others) learn.I'll try the showme.. channel. Thanks üëç
31891;are
31892;clousre functions
31893;commonly used?
31894;http middleware uses it a bunch
31895;https://raw.githubusercontent.com/Alikhll/golangdeveloperroadmap/master/golangdeveloperroadmap.png
31896;GO can be used for graphics programming?
31897;I mean it is fast to do those stuff
31898;like game engine
31899;I pick go because I need to use for web and game dev
31900;You can make games in Go sure. There are a couple of libraries out there
31901;That roadmap is pretty weird
31902;Some fundamentals are all the way down: concurrency and synchronisation
31903;If you don't know those you're going to have a bad time
31904;yea I am not following this roadmap
31905;just found it now
31906;And testing is way too far down as well xD
31907;anyone have go notes
31908;like cheat sheet
31909;I just refer to the tour the spec and godoc all the time
31910;Haven't needed much else
31911;yea I mean to keep the info all the time in front of me
31912;because my memory is f bad
31913;Best I have
31914;https://devhints.io/go
31915;ohh yea I have it installed locally
31916;I totally forget that I have it
31917;:3
31918;oh no I have devdocs
31919;it allow to download docs also
31920;> like game engine@oni chan https://gameswithgo.org/
31921;man i need to download Git for every module i need from github
31922;you just need git installed
31923;Which as a developer you should anyways
31924;¬Ø\\_(„ÉÑ)_/¬Ø
31925;hm it says git cannot be found in %PATH%
31926;Add it to path
31927;probably gotta add it to your path then
31928;I'm guessing you're on windows then
31929;yup
31930;I think the windows installer has a checkbox to add it to your path
31931;otherwise you can just add it manually
31932;imma see if i can find it
31933;thanks guys
31934;thanks @pathcl
31935;> man i need to download Git for every module i need from github@!!!.SC4R afaik go get d should do the same
31936;don't know if this changed due to gomodules
31937;go get uses git@pathcl
31938;i just downloaded the package that i need manually
31939;Install git man
31940;and created a folder
31941;Youre going to be needing it
31942;works fine
31943;its not working lmao
31944;gonna uninstall it
31945;You and i have a different definition of fine then
31946;Did you install git from the github website
31947;Or wherever its from
31948;yeah
31949;https://gitscm.com/downloads
31950;why would i need it if i can get the packages manually lol
31951;https://gitscm.com/download/win or with github desktop
31952;Why? Because why would you wanna do that
31953;i wont loose anything
31954;When you could issue 1 command instead
31955;Waste of time
31956;> Waste of time@Str≈ìm bruh its just 30 seconds
31957;> go get uses git@pathcl@Str≈ìm I know but I just wondering if it can be a replace for git clone
31958;Id almost guarantee youll need git once you use modules
31959;i just got the color package from fatih manually
31960;Look mate
31961;Get git
31962;Save yourself the hassle
31963;i just download it when i need it
31964;Im not saying this for the good of my health
31965;you'll need it for almost everyday development workflow
31966;i use C#  C++(Learning) and Go atm
31967;No version control?
31968;lol
31969;i dont need git for now
31970;what do you rely? cvs? mercurial?
31971;Itd really make life a lil better for you if you installed git when using Go
31972;lol
31973;Inb4 dropbox versioning
31974;good path to become proefficient üòÑ
31975;Im adding this to my list of why to recommend against windows for development
31976;I mean git is added to the path by default iirc
31977;nvm kek
31978;fasthttp and discordgo didnt work manually
31979;rip
31980;oh no. refuses to use git using fasthttp
31981;this is gonna be a real rough ride for you dawg
31982;Oh boy
31983;lmao
31984;aight gonna install again
31985;@Sgt_Tailor thats what i wouldve thought but clearly its more non trivial than i wouldve thought
31986;¬Ø\\\\_(„ÉÑ)\\_/¬Ø
31987;I'm not making fun of you I'm just sayin that git is a pretty core part of Go development. And that fasthttp is probably not what you actually want
31988;fasthttp will make my program 10x faster!!! except it doesnt
31989;does it matter where i am gonna download Git?
31990;you'd download it from the git website typically
31991;yes
31992;waiting rn for downlaoding the package
31993;i think it installed the package
31994;no succes message or something üòÑ
31995;how do you think
31996;it's a windows installer
31997;Did you run the installer or not? lmao
31998;its already installed
31999;Downloading what package
32000;discordgo
32001;Ok then theres no output on success
32002;Did you do `go get`
32003;yup
32004;Its that easy innit
32005;i installed it and then runned git bash or something there i typed go get packagelink
32006;ezpz
32007;"also if you use modules you usually don't have to go get ;)"
32008;yeah manually fetching dependencies is soooooo 2018
32009;Go mod :HYPERCLAP:
32010;‚úä
32011;the occasional pinned old or early version is necessary but typically not
32012;I recall I've used prerelease ebiten versions on occasion
32013;but you can also just change the version in the go.mod :P
32014;I use go get to add them to go.mod
32015;:robpike:
32016;yeee same difference
32017;well technically not but yknow
32018;:ceasebullying:
32019;editing the go.mod defers the version resolution and downloading to build time
32020;Gohack is so good
32021;gohack gud
32022;`go get d` will perform the resolution but not download iirc
32023;and `go get` does both
32024;would a function called on a type be a method or is it still only referred to as a function?
32025;it's just splitting hairs
32026;methods are functions
32027;like in java method is specifically part of a class
32028;so i was just curious
32029;they just happen to have an extra parameter ( the type it's bound to ) injected as an extra argument
32030;wanted to get my terminology correct
32031;i mean methods are specifically part of a struct
32032;yeah its mostly just sugar
32033;but they're also functions
32034;so it wouldn't be right to refer to it as a method?
32035;it is a method
32036;kk
32037;`m.Foo(a b)` is the same as `Foo(m a b)`
32038;Given the same function body.
32039;kk
32040;If we‚Äôre nitting: methods don‚Äôt deal with structs they deal with types
32041;yeah but can structs actually be meaningfully semantically extracted from types?
32042;Methods can have a receiver of any type not just structs
32043;(any ~~named~~defined type more correctly)
32044;Java only has methods because (almost) everything is an object
32045;If we are going for extra cursed: a function type can have a method üòâ
32046;some extra cursed example: https://play.golang.org/p/J5k1ZmA0bpK
32047;This is cursed
32048;blursed
32049;why I can't convert a string in a [32]byte?
32050;There's no guarantee that a string will always be 32 bytes. When moving data from variablesized sources to arrays you'll usually want to make use of `copy`.
32051;It will copy at most 32 bytes (in this situation) but if the string is fewer than 32 bytes it'll only copy up to the length of the string.
32052;the string is 32 length
32053;(technically you\'d have to copy the string converted to a byte slice but I was just using string for simplicity)
32054;Sure you might know that but that's not encoded in the type system.
32055;That's not known to the compiler.
32056;so
32057;what I have to do?
32058;Something like ```govar arr [32]bytecopy(arr[:] []byte(str))``` would satisfy the points I laid out above.
32059;ok thanks
32060;Guys help! I've updated yesterday my golang from 1.11 to 1.15 and I'm getting EVERYWHERE after `go build/go test` what have I done incorrectly?
32061;And first file and I think others too seems like normal files.
32062;did you completely remove the old installation before upgrading per the install instructions?
32063;em when I was trying to run setup program It has asked me: remove old installation? and I answered  yes.
32064;that should be sufficient yeah
32065;May be AGAIN run setup and try to reinstall?
32066;With same folder
32067;i don't see `atomic_amd64x.go` in the actual current source tree so yeah i'd suggest deleting `C:\\GoLang\\Go` entirely and reinstalling afterward
32068;wdym? deleting manually?
32069;Or from installer?
32070;as in go into the file explorer and delete the directory
32071;or whatever your preferred method is for deleting files
32072;"go into cygwin stop all golang builds and do `rm rf Go; echo Goodbye""`"
32073;the installer probably didn't remove files from 1.11 because 1.11 hasn't been supported for a while
32074;Thanks a lot It helped.
32075;people who have built/maintained a fairly straightforward rest api in a production setting which routing library do you recommend? I was reading https://github.com/julienschmidt/gohttproutingbenchmark and it looks like he recommends Goji or httprouter but curious to see what you guys think
32076;Go chi
32077;Or mux
32078;gochi gang
32079;favor ease of use over performance in most cases
32080;and chi isn't even that slow tbh
32081;Gin is popular too but it‚Äôs more of a framework than a router
32082;Hello again.
32083;Hello
32084;exactly what i was looking for thanks as always
32085;yeah np
32086;How do I properly install from godoc? I am trying go get u <package> but receiving an error in return.
32087;from godoc? :Thonk:
32088;https://godoc.org/golang.org/x/net/icmp
32089;This for example.
32090;oh so this part?
32091;`go get golang.org/x/net/icmp`
32092;Sorry for terminology I suck at go.
32093;`go get github.com/gotk3/gotk3/glib`
32094;Oh god thanks.
32095;yeah np
32096;I feel so ashamed right now
32097;Don‚Äôt lol
32098;everybody's gotta start somewhere üôÇ
32099;Welcome to your Go journey
32100;:micdrop:
32101;aye thank
32102;is there a similar function to python's groupby in go? https://docs.python.org/3/library/itertools.html#itertools.groupby
32103;there isn't
32104;I don‚Äôt believe so but wouldn‚Äôt be terribly hard to replicate
32105;Atleast for specific types
32106;A generic interface{} version of it would be a bit of a mess
32107;just avoid generic abstractions in Go tbh
32108;Yeah
32109;Just generate the map by iterating over your data slice with your key function
32110;And then range over that map
32111;Or just generate the key while ranging over the data
32112;The more I think About it the less I see the use of this function
32113;it's like uniq quite useful for some cases
32114;Maybe I‚Äôm misunderstanding it
32115;¬Ø\\_(„ÉÑ)_/¬Ø
32116;or sets but that one is not that hard to create it
32117;they're all useful it's just whether or not it's worth adding it
32118;totally did not rip that one off of Rob Pike
32119;generics ring a bell ? üòÑ
32120;not sure if the concept of iterators its the same in Go @func itertools is such a powerful module
32121;I am aware of the generics draft
32122;yes itertools is powerful I don't use it very often but I'm glad it's there when I need it
32123;Does someone here know a good open api middleware for go gin ? I am not looking to generate documentation but use the openapi spec as a source of truth
32124;similar to: https://github.com/atlassian/oas3chowchow
32125;defer occurs at the end of the function why does the placement matter
32126;because if the error happens then you'd be closing a nil resp
32127;it\'s not the end (bottom) of function it\'s when the function exits
32128;which isn't always the bottom
32129;ohh
32130;the explanations i read of defer were wrong then
32131;The function call itself is executed at the end but the rest of the expression is evaluated immediately
32132;i.e. `resp.Body` is immediately evaluated right then
32133;If `resp` is nil like diamond mentioned boom
32134;@Easy just put defer after first iferr.
32135;Or.
32136;yeah just defer after the first if err
32137;or replace your defer with ```godefer func() { if resp != nil { resp.Body.Close() }}()```
32138;Yea that looks bad.
32139;@Easy why would recommend go fiber?
32140;fiber hype PogChamp
32141;keep in mind their docs is still not complete. Gin is as same as fiber. I would generally recommend everybody to wait on fiber until their docs are completely finished
32142;uhm..
32143;Well we already have a couple of middlewares written for gin .. but yea maybe we will check again at somepoint
32144;I'd say just stay with net/http unless the bottleneck is an issue
32145;hopefully you have instrumented your code to prove that the http library is an actual bottleneck
32146;I mean I am not looking to switch .. I am just looking to do validation on requests with open api documentation
32147;What is fibre
32148;fasthttp abstraction w/ express.jslike API
32149;no nested routing which sucks
32150;biggest reason to use gochi for me is 100% the mounting
32151;kringe
32152;gochi groups/mounts are god tier
32153;this
32154;"any of you guys ran into the `standard_init_linux.go:211: exec user process caused no such file or directory""` error when trying to run a container built with nonalpine base images?"
32155;"```FROM golang:1.15.0alpine as buildStageWORKDIR /go/src/apiCOPY . .RUN go get d v ./... && \\ go build o app ./cmdFROM alpine:3.12.0WORKDIR /go/src/appCOPY from=buildStage /go/src/api/app ./app""CMD [""./app""]```"
32156;this seems to be working fine (its just a little hello world api app). but when i try to use anything other than alpine in either stage i get that 211 error
32157;my quick google searches seem to suggest that windows users get this 211 error often but i'm on linux mint atm
32158;> defer after the first if errwould that work if it returns in iferr?
32159;@The Great Ratsby try building with `CGO_ENABLED=0`. I ran into this a few weeks ago.
32160;`alpine` lacks libc which other containers will build with if you don't set that environment variable.
32161;oh maybe I misread it means```a err := foo()defer a.Close()```not``` if err != nil { ...}defer a.Close()```
32162;@Carson that worked thanks!!
32163;"```FROM golang:1.15.0 as buildStageWORKDIR /go/src/apiCOPY . .RUN go get d v ./... && \\ CGO_ENABLED=0 go build o app ./cmdFROM scratchWORKDIR /go/src/appCOPY from=buildStage /go/src/api/app ./app""CMD [""./app""]```"
32164;takes a little longer to build but not really a concern at all
32165;None
32166;Anyone know FASTHTTP and knows how to solve such error?
32167;Step one of solving fasthttp errors: don't use fasthttp
32168;Any reason you're using it instead of the standard library?
32169;I don‚Äôt get why you added all this complexity of fasthttp when you had a working bit of code yesterday
32170;Your entire http stuff is like 3 lines
32171;Also your error has nothing to do with fasthttp
32172;You are trying to pass a byte slice to a function that accepts a io.Reader
32173;It isn't a http related error btw. Your providing a byte slice to a function that expects a reader
32174;I told you how to do that correctly yesterday too btw
32175;Phone is an inferior input device
32176;> I don‚Äôt get why you added all this complexity of fasthttp when you had a working bit of code yesterday@Madxmike Yeah i suppose it's not the hassle it's because i want to be fast as possible when getting the request from the mojang API to beable to claim the name before anyone else that's all in reality.
32177;I understand that it's not much of an improvement vs nethttp but realistically every milisecond counts
32178;its got fast in the name i dont blame you
32179;Then upgrade your internet connection
32180;You don‚Äôt even know if it‚Äôs giving you benefits
32181;I'm using proxies for connections to the API
32182;You‚Äôre just assuming it does
32183;The difference between fast http and http if there is any is when you are serving thousands and thousands of requests a second
32184;And even then the difference is on the order of hundredths of a second
32185;Anyways
32186;The answer to your problem is up above
32187;> The difference between fast http and http if there is any is when you are serving thousands and thousands of requests a second@Madxmike I'll be serving about 10,000 requests per second just thought it would be quicker than nethttp
32188;If you actually are hitting thousands and thousands of requests a second your http router isn‚Äôt going to matter on the order of magnitude anyways in comparison to the doc parsing
32189;Yeah. Vanilla `net/http` can easily make it into the hundreds of thousands of requests per second. Your bottleneck is probably elsewhere.
32190;Not to mention your connection.
32191;Thanks i'll stick with net/http just thought they was a significant advantage overall.
32192;Just for future reference: for things that are not bottleneck operations like http routing choose something that makes your code clear and easy to understand first
32193;performance gains are just imaginary numbers unless you have benchmarks to prove them
32194;Thanks for the advice appreciate it,.
32195;Np
32196;Did the fix work
32197;Well I guess if you are using nethttp you won‚Äôt need the fix
32198;Because it‚Äôs reasonable and gives you a io.reader lol
32199;11/10 times you don't need fasthttp
32200;I‚Äôm going to make a lib that‚Äôs called fasterhttp
32201;That just routes all calls to net/http
32202;It's a fork of `net/http`
32203;Lmao yeah
32204;Lol
32205;Fork would be better
32206;be anyone: i will use fasthttp because itll make my program fastergopher herders: have you got figures to back up that?
32207;9.9/10 they dont
32208;profile your damn code
32209;know the bottlenecks
32210;optimize with data
32211;In my time of using Go I've only needed to profile my code a couple times as most of the time it's not necessary to be super fast or efficient. If there's a point where it needs to be improved then that's the time to worry about any of that AFTER profiling and reviewing the data.
32212;golang users
32213;hypotehitcally
32214;if u couldnt use golang what would u use
32215;probably Rust or C
32216;Rust
32217;With a side of JVM
32218;Maybe id be a filthy nodejs evangelist
32219;yeah I'd use JS because that's one of the only other things I'm fine at lol
32220;Gradle and maven make me cry hence i dont use jvm much
32221;But currently my work involves understanding both well so...i guess soon thatll be a non issue
32222;> Well I guess if you are using nethttp you won‚Äôt need the fix@Madxmike Yeah thanks.
32223;probably kotlin or swift
32224;would do mobile if i wasnt doing the stuff im doing now
32225;Elixir
32226;Or I'd go back to being a C dev maybe
32227;c or python
32228;i'm really the only python answer huh
32229;dynamic languages are a disease :monkaS:
32230;i think python has a sprinkling of type safety features now
32231;but really my reasoning is that i'd prefer c but i don't want to manipulate strings in c so if i need to manipulate strings and can't use go then python would be my next choice
32232;"Im sending a Cookie back with my response and i can see it in the browser storage but im still not able to access it via document.cookie. I have HttpOnly set to false. ``` http.SetCookie(w &http.Cookie{ Name: USER"", Value: testStering"", SameSite: 3, HttpOnly: false, })```anyone have any ideas why i still cant reach that cookie in my JS?"
32233;If `w` is your `ResponseWriter` the cookie is in there
32234;I figured it out
32235;spoke to soon I needed to set the Path: /
32236;still going through the go tour lots of little things that im liking a lot like removing parenthesis from some keywords like for/if removing while
32237;no classes is super mint
32238;method receivers are like `this` in javascript so that's dope
32239;switch statements without constant cases is sooooo neat
32240;Been picking up go for two weeks now and love it too. Might be my new favorite language.
32241;Took a little while to stop thinking about problems in the traditional approaches of other languages though
32242;i feel like it's very friendly to me coming from javscript
32243;well
32244;javascript is a bit of a mess
32245;tbf
32246;i guess anything would be friendly to me then
32247;From a php/python/java background I first kept trying to abstract a lot of the boilerplate
32248;And then would spend two hours playing with reflect which is when you know you lost
32249;haha but in all seriousness it shares some features that are similar to JS stuff not that those are exclusive JS features or anything other langs have some of them too
32250;Just have to start thinking in go if that makes sense to anyone
32251;oh yeah that's kind of what i like about it there's no inheritance so it feels more like JS to me hehe
32252;which is how you usually abstract things in OOP programming
32253;Kept finding myself trying to reinvent generics over and over again
32254;right!
32255;I‚Äôve never been one for a lot of stringy inheritance
32256;But still just wanted to create some like basic db wrappers and it was a losing battle lol
32257;gorm v2 is out
32258;And I caved and used Gorm ü§¶\u200d‚ôÇÔ∏è
32259;right before i decide to use gorm v1 perfect timing
32260;ive had little desire for generics outside of some specific datastructures
32261;I sometimes do want generics but it's honestly not that big of a deal tbh
32262;they make a few specific things way easier
32263;I've learned to just do it and waste my time on other less trivial things
32264;but most everything else is just fine
32265;It‚Äôs not a big deal to me for like 90% of situations but there are a few things I wish i did have it
32266;Like for injecting db model structs for struct scans
32267;as long as you arent doing mvc we can be friends
32268;Hate mvc
32269;I typically employ a hierarchical mvc approach for work. Not sure how anyone builds larger systems with mvc
32270;ddd is the way to go
32271;if implicity in programming is bad then mvc is death
32272;?go layout
32273;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
32274;for the viewers at home
32275;Mvc is just sloppy
32276;And not scalable whatsoever
32277;tell that to the .Net suite
32278;lol I can not read C# and Java projects
32279;The amount of logic I‚Äôve seen in outlandishly bloated controllers have made me cry at times
32280;i gave up on c#
32281;every time I want to read its source code of any project I always tell myself that death is a better alternative
32282;java is fine ost of the time
32283;because holy fucking shit
32284;they are filled with implicit mappings between their paths and files
32285;navigating around thousands of directories and looking at short files that are only short boilerplate abstractions of other tidbits
32286;is fucking
32287;annoying
32288;For like real basic crud mvc is whatever
32289;for mvc you have to spend a lot of time understanding how microsoft decided to layout their stuff and the microsoft docs are awful
32290;> navigating around thousands of directories and looking at short files that are only short boilerplate abstractions of other tidbits@_diamondburned_ you probably wouldn‚Äôt like a lot of my architecture in the past üòÇ
32291;I honestly just do whatever
32292;which involves lots of interfaces
32293;but once I get the interfaces cleanly set it's fine
32294;That‚Äôs typical interface sub class setup
32295;there are also like four ways of doing everything in .net projects
32296;I prefer that to overextension of classes just for the sake of file reduction
32297;I was having too many files that are too long
32298;like even with that structure I posted each file is still ~200500 LOC
32299;and each package has like 1 or 35 files
32300;What language?
32301;Go
32302;i saw 4k loc files at my last job
32303;do autogenerated files count?
32304;None
32305;i wouldn't say so until you have to solve merge conflicts in the autogenerated ones
32306;haha
32307;lol fair
32308;idk how people see a file grow that much and are perfectly okay with it feels like poor foresight i believe they put it off for later because it doesn\'t affect them? then wonder why it takes too long for new developers to do anything
32309;Project managers
32310;And deadlines
32311;Laziness lol
32312;4k? I know at least 4 of our files are over 10k at work lol
32313;2 are Python and 2 are Javascript
32314;I'd say mostly laziness tbh
32315;why bother splitting and rewriting code to be more coherently abstracted when you can just `/`
32316;10k!
32317;the ones i saw were javascript
32318;python and javascript are so popular rn
32319;im surprised by the amount of backends written in python
32320;gotk3's gtk/gtk.go file is 10k LOC of manually written code
32321;I think
32322;yup
32323;10k....
32324;tbf gtk is also huge but yeah all that is manually written
32325;I can understand the longer python files they like to have multi class for the modules but 10k lines of js...
32326;This one that I was working in the other day is almost 10k lol
32327;Is that like a bundle or straight up single file?
32328;That is a single file
32329;Here is one of the 10k JS files
32330;> gotk3's gtk/gtk.go file is 10k LOC of manually written code@_diamondburned_ about to start a go gtk project soon. Is the lib for it nice?
32331;But like why? Lol what single responsibility requires 10k lines
32332;it's not that nice
32333;it leaks in some places it's missing APIs in others
32334;and it's not generated
32335;not a single line
32336;I actually wrote an autogenerated libhandy thing the other day
32337;so I do plan on generating Go gtk4 bindings w/ the glib library
32338;but that's in the future
32339;Python gtk+ better?
32340;yeah
32341;py gtk is official
32342;Eh I‚Äôm not building anything too fancy. Trying to find more go projects
32343;The software is for insurance agencies. That file is all of the frontend logic for building insurance policies... There is no reason it should all be in one file though except that people just kept adding to it for the last 11 years
32344;https://github.com/diamondburned/cchatgtk
32345;Will checkout it out. Could use some examples to start it. Just trying to build a chat interface on my desktop to train an nlp program I‚Äôve been working on
32346;Also wanted to give him a voice and have a synth visualizer for it
32347;Right now we‚Äôve been stuck training in a web portal üòÇ
32348;lol gl
32349;you may have more luck with https://github.com/andlabs/ui if you're not looking to build a complex UI
32350;Naw just need to have a chat system and a couple of buttons to bind to some update actions
32351;None
32352;Was going to use Lebrosa lib for the voice synth
32353;Not sure if there is a go equivalent
32354;> The software is for insurance agencies. That file is all of the frontend logic for building insurance policies... There is no reason it should all be in one file though except that people just kept adding to it for the last 11 years@Dusty.P that's hilarious the large files i saw were in a frontend for insurance companies too
32355;code was 2 years old tho haha
32356;idk why you would use go for a UI interface ._.
32357;if you want to make a UI app it's probably better to decouple the UI events from the logic then you can write the logic in Go
32358;Just looking for more go stuff to build (go noobie here). I have another project as well to build a lstm network from scratch but the more projects the merrier
32359;I would use glade for the ui itself and go for the handlers
32360;make the UI part as easy as possible for yourself n_n
32361;there really is little as annoying as getting stuck in the UI part of coding
32362;I cheat with gtk and I have no shame
32363;Building ui solely with python is even a pain sometimes
32364;yes
32365;Glade or xml idc. Just not taking 5 minutes to code the dimensions of a button
32366;hello
32367;im just starting to learn go
32368;hello
32369;Como
32370;was going to learn rust
32371;but decided with go
32372;Why not both?
32373;thats a possibility
32374;but i think they accomplish the same things
32375;so id rather learn something else that complements go rather than copies it
32376;that and the rust team just lost all their funding so
32377;go will have a lot more support
32378;rust team just lost all their funding? wha
32379;wat
32380;I don't think that's true
32381;maybe the news where Mozilla fired some people got mixed up w/ it?
32382;also Rust's community is p big
32383;also no Go and Rust don't accomplish the same things
32384;I heard firefox was going broke but does that involve rust?
32385;they accomplish almost the opposite things
32386;well
32387;both are general purpose languages so there's a large overlap
32388;but there are things that can be done easier in Go and other things that can be done easier in Rust
32389;Rust isn't garbage collected so starting there I feel like you already have large differences in usecases? but I wouldn't know I am merely learning Go
32390;yeah sometimes not having GC is better
32391;eg when your work largely involves working with C code having an automatic memory management model that isn't GC is better
32392;Mozilla's website says they still sponsor Rust```Mozilla was the first investor for Rust and continues to sponsor the work of the open source project.```
32393;Big companies still sponsor it and they are setting up a foundation for rust by the end of the year
32394;I think Rust and Go can overlap quite a bit in what they do
32395;i just learned you can have type switches i guess this is how you get around not having generics sometimes?
32396;Hey I'm having some trouble running a go program on a new ubuntu install. I extracted the go tools to /usr/local with the command on the docs. And I added the path to my .profile. But when I run a go program it's not doing anything.
32397;It seems to build fine
32398;Hi
32399;hi üòÑ
32400;I want to get started with go
32401;Any resources?
32402;I realized my problem
32403;I'm stupid
32404;Thats happens a lot in programming
32405;üòÇ
32406;I actually like this video @Good^~^ https://youtu.be/C8LgvuEBraI
32407;not super in depth but good for a start
32408;there's a follow up solely about concurrency too
32409;Thankyou
32410;.profile
32411;100% go tour
32412;?go learn
32413;Gopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Go by Example <https://gobyexample.com/>  SkippyA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  Skippy
32414;3rd link
32415;I think it should be either .bash_profile or .bashrc
32416;im on my third day on the Tour of Go taking so long grr
32417;Yup it does
32418;super complete tho
32419;Hmm
32420;I dont like reading
32421;yeah the tour is very complete
32422;So i might go with the vid first
32423;it's long but you don't have to do all of it
32424;I use tour of go when I need to look something up
32425;you can start a project once you feel like you know enough
32426;Vaylin how did u fix ur issue?
32427;I wrote an entire bot without looking at the tour more than a few times
32428;it was a non issue
32429;I just didn't understand the code
32430;Hmm ok
32431;you can go with the vid for a general sense of general stuff like loop array functions that u see on every programming language which is nice and lets u do a lot
32432;buuut the cool stuff tho
32433;So the thing is
32434;I know the concepts
32435;Its just the syntax
32436;But u are more experienced than me so i will try the tour first
32437;Maybe complete it by this weekened
32438;yeaaah
32439;syntax is like:walrus operator for declaring and assigning a variable at the same timeno parentheses for `for/if/switch`types are declared after names in functions and then the return value
32440;but if you do the tour you'll learn them easily
32441;then there is syntax that does special things even tho it doesn't look special so if you haven't seen the feature you wouldn't be able to guess what it does
32442;I always find it best to take a good amount of time to study a language gives you a huge boost when you start coding
32443;Thanx that was really helpfull
32444;No semicolon nice
32445;Help me out here
32446;The function was not called
32447;It was still executed?
32448;Or main func always gets executed
32449;Yes the main function is always executed. It is the entry point into the program. Similar to C etc
32450;I was gonna type that but technically if there is an init() wont that get called first?
32451;yes
32452;Yes
32453;main func is always executed in a package main
32454;So init() is an optional entrypoint
32455;init is always executed before main in any package as long as it's imported
32456;(Just wondering on the terminology)
32457;That isn't what it is there for
32458;It's primary purpose is to initialize global variables that can't be initialized in the global context iirc
32459;init counts more towards load time I suppose
32460;using it as the entry point would be abusing it
32461;But an enteypoint is the start of program execution  I guess actually that would technically be something in the go runtime that's in the executable. So would you just call init() an optional entrypoint?
32462;going by that technical definition then main isn't necessarily the entry point in some cases
32463;maybe a runtime library is calling main
32464;err talking about in C for example
32465;I would consider init to be preexecution... It is setting up the stuff that you need to start execution.
32466;I guess the more correct definition would be the function that gets executed to start the actual peogram meaning it runs from when the program starts until it ends
32467;as for Go even init isn't the first instruction of the program
32468;it's somewhere in the runtime library
32469;True... When main ends the program as a whole exits
32470;Bro go is easy
32471;per Wikipedia:> In computer programming an entry point is where the first instructions of a program are executed and where the program has access to command line arguments
32472;I have basic c knowledge maybe thats y it seems very easy
32473;Python is hard for me
32474;Yeah so technically that's the runtime
32475;going by this definition a `var _ = func() { fmt.Println(os.Args) }()` (pseudocode) would count as the entrypoint
32476;but it doesn't match my improved definition
32477;Python has a different philosophy than other ctype languages.
32478;I'm happy with the phrase preexecution I was just wondering how it would be referred to
32479;Ans as far as you're concerned when writing an application main is your codes entrypoint regardless of how much runtime stuff has happened before to set up the environment
32480;Diamond if i show u a tool
32481;Will u be able to tell me ehat kind of knowledge is required to write them
32482;I mean go basics intermediate or advance
32483;just do the go tour
32484;üòÑ
32485;not right now since I'm about to go to bed
32486;I'm sure others can help you
32487;https://github.com/jaelesproject/gospider
32488;also yeah just do the tour
32489;Hmm
32490;Thats a valid point
32491;I'll let you know that knowing how to read GoDoc is a must though
32492;I am not even gonna figth
32493;so you should definitely check it out
32494;maybe that library's docs will even help you
32495;I'll tell you writing a spider gives you some interesting problems to solve
32496;"First problem how do you know a page exisist. And dont say http status codes ;)"
32497;tbf go is so minimal that it would be a waste of time to not understand the tour firstif it was like a super huge language then sure just learn the basics
32498;a webcrawler is difficult to solve regardless of the language
32499;@misterturtle i know them all
32500;Almost
32501;Like idk 502 or 503 like that but mains one ya
32502;What I mean is a server could return 200 ok when serving a page not found
32503;What
32504;It's true... I've actually made that mistake before lol
32505;Id say 1/3 of apps I test dont implement status codes properly
32506;Idk about that
32507;I forgot to change the return code when the page wasn't found lol
32508;Thats should be 404
32509;Should be yes
32510;"Don't think people read specs properly ;)"
32511;Should be relied on 100%? probably not
32512;"> Don't think people read specs properly ;)@misterturtle especially JS devs lol"
32513;Theres also recursion to think about (with link spidering) dynamic URLs being generated and a number of other problems
32514;Yup
32515;> Id say 1/3 of apps I test dont implement status codes properly@misterturtle that's a lot of apps implementing status codes properly
32516;I kinda read the main.go its def not basics
32517;As far as go is concerned though the http std library is a good starting point channels and go routines if you wanna make more requests at once
32518;That's a complete guess at the statistic of around 90 or so web app tests I've done in the last 3 years.
32519;The mains ones when it comes to web apps are 80 and 443
32520;And maybe 8080 or 8000
32521;It's a great starting project though
32522;Goquery could help you parse the html and pull out links
32523;Ok i have asked this question everywhere
32524;Or there is an html tokenizer in the html std library
32525;Now maybe its time i ask it here
32526;So
32527;I come from infosec field
32528;Me too :)
32529;Cybersecurity ahcking and stuff ya
32530;Great
32531;So
32532;Python or go
32533;Now lemme give all the details
32534;Go is concurrent
32535;Ai is the future so python
32536;For me its whatever helps you prototype faster as most things I do are to solve a problem quickly
32537;Not full releasable programs
32538;So python?
32539;I'm more comfortable in go
32540;Great
32541;Cause nowdays
32542;I use it for something on every engagement
32543;Every tools is being rewritten in go
32544;I could use python for the same things I'm just not as good at python
32545;Aah
32546;But python is not scalable
32547;It's as scalable as go depending on what you mean
32548;Ok so is there any dis advantages in any of them while it interacts with the applications
32549;Or parses through
32550;Is there?
32551;Go is generally faster than python and more portable
32552;Ya its 20 times faster actually
32553;Quick facts
32554;Becuase concurrency is build with in go
32555;In python u have to install lib and stuff
32556;And even then its slow
32557;U wrote any tool icecold?
32558;Yeah I've done a number of tools we use internally
32559;Wow
32560;I'm hoping to get a good project out and released at some point
32561;Getting time to do it though
32562;Ah
32563;Hmm
32564;Internally
32565;U mean company or team
32566;?
32567;Company
32568;Great
32569;Generally just parsers for tool output a reverse dynamic ssh socks5 proxy some jwt stuff
32570;Reverse ssh proxy sounds fun
32571;üò¨
32572;It's worth noting that performance is very often overplayed. For most web applications it doesn't matter too much most of the bottleneck is gonna be at the database
32573;Hmm kinda tru i guess
32574;cue everyone using python as their backend
32575;@viktor io is always going to introduce latency however the processing of the data in and out can be a lot faster.
32576;Agree
32577;Http tools like ffuf can get some really good throughput with go's concurrency model and results and metrics are less of an impact to each thread running
32578;100 percent
32579;There were many tools written in python even with threads
32580;Most failed
32581;Sure there are upsides to it i'm not disagreeing with that but does it matter for most web projects though? Most projects are just CRUD applications with fairly low usage
32582;and its still possible to scale python although maybe not as straight forward as Go
32583;Yeah I agree with you 100%
32584;The thing is
32585;If u are good with a lang
32586;U can do anything
32587;U can use it to its maximum
32588;Use the right tool for the right job but its common that people are biased and use their most comfortable language for almost everything
32589;To emphasize that point its possible to make a bash IRC client one liner
32590;Also i think python is like gaining a lot of attention and its mostly because of ai and stuff
32591;It's super easy to read and maintain too ( Django is a great framework )
32592;But yeah it's whatever your more comfortable with that's appropriate for thr task
32593;I'd disagree with python maintenance I find a lot of projects subject to code rot and wont build with dependency issues when they've been left alone for 6 months. That could just be bad package creation without pinned dependencies but seems quite common
32594;Hmm
32595;I haven't really noticed it but im also kinda strict about dependencies
32596;But i think thats applies to even go
32597;Cause they are constantly updating it
32598;Developing it
32599;As far as i know ive seen dependency issues in all languages at some point
32600;U gotta have them thats how u will be able to use new features
32601;I don't like virtualenv and how dependencies are done in python but it works fine and i havent really had any major issues with it
32602;Go has maintained backwards compatibility and with gomod using specific versions is really easy. That and dependencies are cached on the go mod proxy so they don't just disappear
32603;Makes it less likely with go
32604;any go graphics library
32605;https://github.com/fogleman/gg
32606;I see this it's not being updated in 3 years
32607;I don't quite like how dependencies are done in Go either
32608;I think Rust does it much better
32609;Omg u said that didnt u
32610;I think go is superior than rust in every way
32611;Not hating on u rust
32612;But thats how its gotta be
32613;üòÆ
32614;Screw all lang i am going back to bash
32615;üòÇ
32616;It does the job
32617;You dont have to fan boy a language acknowledging its weakness just means you know when to use it and when not to
32618;If it was true it was superior in every way then rust wouldn't exist
32619;Hmm than y does it exits
32620;Maybe becuase of the learning curve i guess
32621;> I think go is superior than rust in every wayI wish
32622;Make it happen
32623;üò¨
32624;I have to disagree with that
32625;Go's biggest strength (simplicity) is also its weakness imo
32626;Aye
32627;What about its simplicity creates a weakness? Are you referring to missing features of the language?
32628;I think so
32629;Its type system can be a bit weak compared to rust
32630;Lets not start a debate
32631;Rusts type system is incredibly powerful
32632;rust is hard
32633;Every lang is good
32634;I'm not bashing Go rust isnt perfect either
32635;But bash does it better
32636;ü§Ø
32637;üòÇ
32638;Lol this isnt a debate I'm asking questions to learn
32639;Bash is so easy bro
32640;How is it different @Str≈ìm ?
32641;Go => Simple and powerfulRust => Hard but sometime even more powerful
32642;from my experience rn
32643;Yup
32644;I think so
32645;c
32646;@misterturtle ask me after ive woken up lol
32647;Rust gices u control on every single detail every single thread
32648;Also rust name conventions are fucked up
32649;I'm about to go for a nap lol I'll google it later
32650;SCREAMING_SNAKE_CASE
32651;@Karitham i like it its more in line with Python
32652;but some people hate snake case overall üòõ
32653;idk I've just started and can't fucking work with types
32654;I hate snake cases
32655;Rust isn't this low level usually
32656;Y guys are serious coders ha know every language
32657;The fact there are 2 string types confuses me
32658;https://media.tenor.com/images/eb6e798774afb1b86ab89484a1977617/tenor.gif
32659;:fepher:
32660;:gorris:
32661;Isn't String a growable string much like string in go and str a reference to a string much like in C ?
32662;I think so but I'm not sure
32663;I finished the tour! Yay
32664;Congrats@interwebs
32665;congratz u now a senior go dev
32666;Wow it hurts how noone has even talked about bash
32667;üòÇ
32668;Anyway how did you come to the conclusion that X is better in every way than Y in programming?
32669;Idk maybe it was because the learning curve i guess
32670;I like simple
32671;I also said imo
32672;I know thats not true
32673;But bash just does it better
32674;Dont worry bash i am not gonns leave u
32675;@interwebs you got an idea for your first project?
32676;Just curious is this the right channel to talk about it
32677;Just a few things about Python1. It is generally easier for a new programmer who doesn't know any other languages to pick up and start using. Go is pretty good at this as well but I would argue Python is better.2. It is slow... Like snail or turtle slow... At runtime but it is faster to write a piece of software than most other languages. That is part of why it is gaining popularity it is faster to get devs up to speed and faster to implement changes.3. It is interpreted so you can actually make code changes while it is running4. It does have concurrency built in using the asyncio threading and multiprocessing libs which are all part of the standard lib5. It had a Global Interpreter Lock which means only one thread can execute Python code at a time. But considering most performance driven code isn't written in Python this generally isn't an issue.I could add some more but I think that is the gist of it... Lol
32678;He did it
32679;no idea probably gonna wait til i have to use it at work just wanted to learn it now im gonna go learn another language teehee @misterturtle
32680;We got our python soldier
32681;Eh I prefer Go actually
32682;Ooh u were against python
32683;Ya
32684;I am sorry
32685;Naw
32686;I'm a Python dev for my day job
32687;wait is GO easy?
32688;It has its place.
32689;Like everyone else
32690;Go is cool
32691;I came from OOP background and I am finding GO hard to learn
32692;> wait is GO easy?@oni chan compared to some languages yes compared to others no
32693;maybe not hard but new concepts
32694;or different vision
32695;I would say out of the languages I know it is easier than C C++ Java Javascript. And harder than Python
32696;Most systems Programming Languages and low level languages aren't Object Oriented it's (iirc) because that model can be slow or inefficient to use in such languages
32697;Go seems easy if you know pointers and interfaces and closures
32698;C++ has a lot of oop in it
32699;I work on JS
32700;and python
32701;and Java in old days
32702;introducing: types
32703;js for phaser(game dev)  React
32704;and python for general purposes and Backend
32705;now GO for all of them
32706;JS is just really weird in how it does things...
32707;I am still new here
32708;Ah. Funny enough I work on a project with a phaser/react front and go backend
32709;JS is the mother of the web
32710;Hey guys I'm new to Go and doing the tour  coming from TypeScript the types make it feel much more at home for me but what I'm finding is that go is all about `func`'s... does this make it a functional programming language or its just design ?
32711;TS is good
32712;I been working with JS my whole career it's a fun language but i hate to read other people's code
32713;It's not a pure functional language like Haskell and it's not pure oop like TS. It's in the middle
32714;funcs are functions if you're seeing a lot of them it's probably because it'd be good to split the code into seoerate functions doing what they're supposed to do
32715;You can write code kinda in either form but it does lean more functional
32716;@M.A By seeing a lot of funcs I just mean everything is a function
32717;Not as in the code it self
32718;Types aren't functions
32719;"```gofunc main() { fmt.Println(""Hello World"")} ```"
32720;^ not types
32721;Yes those are functions
32722;I wouldn't say it's functional nor OOP it's minimalistic which sometimes doesn't let it reach that far in either side so I like to think its just procedural
32723;Sorry for the way I constructed it. What I am saying is  I come from a type safe language which makes it familiar. Then I digressed and spoke about it being FP or not
32724;I'd say Go is imperative if anything
32725;So the thing that makes a language a pure functional language is no side effects. When you run a function it can't change anything outside that function.
32726;any one here have vimrc specified for GO
32727;need to get some ideas to bind them with my vimrc
32728;@M.A That's a great way to put it. Thanks. That was the my main question. As the lack of the typical object structure makes it seem more functional simply because you could put pretty much everything into `func`'s
32729;Kh look at the `vimgo` plugin. It will do pretty much everything you need.
32730;yea I have it
32731;@Dusty.P  Amazing. Thank you!
32732;but need to see how people bind their maps to it
32733;And another noob question would we say Go is lower level or closer to most scripting programming languages?
32734;Oh... I don't think I rebound anything... I'll check
32735;@thabang Yeah procedural stuff is basically stitching things into functions and it's also imperative because functions are built out of statements which are imperative commands
32736;It is lower level than Python and JS. Higher than C C++ Rust
32737;I use vim extensively for go and I completely gave up on vimgo I use ale with gopls instead
32738;and just the terminal for tests etc
32739;Why did you give up on vimgo? I've never had a problem with it
32740;I used cocgo and vimgo and they kept putting annoying virtualtext whenever I'm writing
32741;@M.A Amazing thanks for that
32742;does too many things
32743;tries to do
32744;@Dusty.P Alright clear. Let me get back to the tour
32745;just gopls is good tbh
32746;I hope that if GoLand is free  it is the best
32747;I've had it break on me between updates
32748;> I hope that if GoLand is free  it is the best@oni chan beta version is free
32749;trail
32750;every jetbrains product is free beta
32751;i have premium goland from work and I still prefer vim with gopls
32752;didn't worth it to use beta
32753;like building muscle memory
32754;idk I just use vscode
32755;then boom it gone
32756;it's beta not alpha
32757;vim is Good
32758;it's pretty stable
32759;not for stability
32760;This is the only config I have for vimgo```let g:go_fmt_command = goimports let g:go_auto_type_info = 1```
32761;I mean that I can't use it when they clost beta
32762;I need to specify a day to configure vim
32763;@Karitham they've buried the beta link do you know where you can get the beta goland from? I couldn't find it
32764;> does too many things@awoo like what? I've found it really only checks syntax and manages the imports. A little autocomplete but that is usually only within the open buffer...
32765;https://www.jetbrains.com/resources/eap/
32766;uh I'm not sure where to go from there tho
32767;all the bindings and commands annoying pop up definitions
32768;Oh I don't get those at all lol
32769;I wish vim wasn't painful to set up
32770;It's not really...
32771;vim have big learning curve
32772;^
32773;I use vanilla neovim on all my servers
32774;I slowly build my configs
32775;Works just fine
32776;I didn't know how to do most stuff but when I learned neovim configuring it was very cool
32777;it a pain in ass to configure vim . But once you do it . You Will have best tool ever
32778;Using vim as a whole ide is difficult
32779;nop you can do it but need time and practice
32780;honestly 90% of the magic is the movement goland emulates it half decently
32781;It's not made to be an ide... It's a text editor
32782;That's why it's difficult
32783;good thing go doesn't really need an ide
32784;I need a whole ide with directory tree and lookup of declarations across imports
32785;And and search for the whole project
32786;Yeah open file write file run file in other terminal window
32787;you can get directory tree
32788;you can search for whole project files
32789;But need....all...features
32790;NerdTree is pretty good
32791;nerdtree  ctrp
32792;"In vscode I get em with 0 effort haha ;_;"
32793;HAHAHAHHA agree
32794;vscode isn't that bad
32795;but if you work with servers a lot
32796;the best tool is vim
32797;I would probably still be using GoLand but it doesn't play nicely with tiling window managers...
32798;I use both vim & vscode
32799;I tried using emacs with vim keybidings... impossible
32800;but for heavy lifting I'd rather go vscode
32801;So I switched back to vim on my laptop and just started using it on my desktop too...
32802;Oh yeah autocomplete is also something a bit difficult to get in vim right like the IDEs do it
32803;Intellisense or whatever
32804;I use goland when I need to refactor a lot of code
32805;I think the only thing I have opened GoLand for in about 2 months is to get env variables out of my build config lol
32806;Vim can do autocomplete with plugins
32807;https://gist.github.com/cridenour/74e7635275331d5afa6b
32808;My vim setup for Python has better autocomplete than PyCharm does
32809;yeah I've been using ale's built in autocompletion and it works pretty good
32810;I might give ale a try...
32811;Has any of u done JS development on vim?
32812;i don't have autocomplete enabled as default
32813;I hate it
32814;i press Cx Co
32815;Yeah but mostly basic stuff... I don't have any plugins specifically for js stuff.
32816;I need to find a good Vue.js plugin
32817;I should go to sleep... I need to get up in 6 hours for a meeting in 7 hours...
32818;https://www.youtube.com/watch?v=7BqJ8dzygtU
32819;Good talk
32820;that I didn't complete yet
32821;because I am lazy
32822;if I am not wrong he is the author of vimgo
32823;idk why but i feel like vim becomes less useable when working with web frontend like setting it up with typescript and eslint and all that jazz
32824;sounds like a lot of effort
32825;yea lot of effort
32826;to setup
32827;probably way more usable with backend languages
32828;it work with front end
32829;you can do
32830;emmet
32831;in it
32832;I think ale does TS and eslint ootb
32833;üòÆ
32834;TS used to be laggy in vim
32835;but they fix it
32836;i think
32837;slow is the word not laggy
32838;vim is not actually doing much of anything though
32839;it just uses tsserver
32840;at least in ale and other language server based plugins
32841;maybe this conversation belongs in #offtopic
32842;hi all whats the best practice to print byte slice
32843;string() ?
32844;@Easy depends on how you want to format it
32845;You can just toss it in `fmt.Println`
32846;alrighty
32847;That will output it as a byte slice still. You can force string with printf %s or string(your slice)
32848;Hi all! anyone tried goswagger ? is there any way to keed the custom code after modifications in the swagger json file ?
32849;@interwebs you tried spacemacs?
32850;I enjoyed it much more than I enjoyed vim with plugins
32851;bump on spacemacs. I've used it for over a year now for JS PHP and now Go. Love it. and it's pretty easy to set up.
32852;?go structure
32853;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
32854;afaik thats not how computers work at a fundamental level
32855;C doesnt do that either
32856;i dont know of any language where you can pass by either value or reference where reference is the default
32857;90% of the time a parameter is used as a value
32858;I'd prefer not to add syntax to 90% of my parameters saying it's a value lol
32859;why would i want to pass an int by reference by default
32860;I'd much prefer indicating 10% of the time that something is a reference
32861;yeah exactly
32862;i've just started learning go and i love it
32863;its honestly amazing
32864;nice
32865;Hmm
32866;I've created a list of zero value strings that I'm trying to build a string set of
32867;Like this
32868;```goss := make(map[string]struct{} len(in)) for _ s := range in { ss[s] = struct{}{} } has := make([]ContentType len(ss)) for k _ := range ss { }```
32869;And I'm trying to work out what the best way to iterate over the string set and append to has is
32870;I guess I would keep a counter of which i I\'m on in my string set to then set has[i] to?
32871;I'd need to create that variable
32872;sets don't require counters
32873;not intrinsically
32874;"``` has := make([]ContentType len(ss)) for k _ := range ss { if k ok := mapA[k]; ok { has[k] = struct{} // or whatever your key type is } }```"
32875;that's all you have to do for the subset
32876;Right but then I want to turn that into a list
32877;And you already know the length from the set
32878;So you don't wanna use capacity
32879;But if I range over the map I don't get any kind of index out the box
32880;> turn that into a list
32881;a list of what? keys? values?
32882;Just a list of ContentType which is aliasing a string
32883;i just don't know where you're getting hung up on len()s
32884;when you haven't even constructed your subset yet
32885;unless you don\'t mean mathematical sets
32886;No I mean like a Java Set
32887;hang on while i fiddle
32888;anyways
32889;```For example make([]int 0 10) allocates an underlying arrayof size 10 and returns a slice of length 0 and capacity 10 that isbacked by this underlying array.```
32890;3 argument make lets you control length and capacity
32891;so set length to len(whatever) and cap to 0
32892;or vice versa whatever
32893;https://play.golang.org/p/oVxlNb8HVuY
32894;So when making out surely I should be using index?
32895;But to do that I need to keep my own int boy
32896;i don't understand the problem
32897;your code works
32898;you use the map to collapse unique keys and then make a []string containing the keys
32899;it does work i just didnt know if it was correct
32900;Guys I'm developing game with go and I need quite fast keyboard event listener.Which packages would be helpful for me? Would these 2 packages be good?https://pkg.go.dev/golang.org/x/sys/windows?tab=dochttps://golang.org/pkg/os/signal/#pkgsubdirectoriesAnd I've found the following module but this doesn't look much reliable imo and hard to understand how it works.https://github.com/eiannone/keyboard
32901;I don't think os/signal is what you're looking for
32902;how about https://pkg.go.dev/golang.org/x/sys/windows?tab=doc ?
32903;have you looked into things like ebiten or pixel?
32904;ive seen ebiten already and currently developing using it
32905;but ebiten's keyboard API isn't fast confirmed by author himself
32906;if you only need to target windows then you can do anything the system can do through `x/sys/windows` or `syscall` because you can load kernel dlls and perform whatever syscalls you need
32907;those packages are painful to use though
32908;im currently trying on targeting windows only rn for simpleive seen that package syscall is now deprecated
32909;and the official doc shows golang.org/x/sys one
32910;package syscall is deprecated but there are some things that can\'t be completely ported to x/sys/windows for compatibility reasons
32911;i think if you're just using dlls you'll be fine with the x/ one though
32912;ive tried finding keyboardrelating constant or functions at `x/sys/windows` with the keyword `key` or `keyboard` but none of them showed proper results that i wanted
32913;@Deleted User is it for sneaker botting : )
32914;do u know what the name of dll relating to this is?
32915;funnily enough I was about to tell you to read the dev input file
32916;@Str≈ìm 100%
32917;someone know why ioutil.WriteFile can create file and write but can't write a file if it alredy exists?
32918;probably your permissions your passing it if i hazard a guess
32919;Access is denied.
32920;But it can create a file and write them but can't write a file if it alredy exists?
32921;what perms are you passing into the function
32922;0
32923;what number do i have to enter to get an absolute permission?
32924;os.ModePerm iirc
32925;works
32926;0 gives you no permissions to the file
32927;thanks a lot
32928;@MuangMuangE Don't think you need to read any faster than once a millisecond
32929;fwiw
32930;yup actually i need around 1ms speed
32931;1ms is the shortest
32932;is there a big difference when declaring a struct type in a function \\and using the name vs name
32933;what?
32934;func (aggs AggregatesResponse)
32935;vs
32936;func (aggs AggregatesResponse)
32937;yeah
32938;one is a pointer
32939;and the other is not
32940;whtas the key difference
32941;in like usage
32942;one is a pointer
32943;one is not
32944;thats the key difference
32945;if you need to mutate the struct in the method
32946;u can modify field value when using pointer method
32947;thats all
32948;use a pointer reciever
32949;oh makes sense so if i am in the funciton where i declared it i can just modify it
32950;but if i have a method modifying it
32951;i have to use a pointer recivever
32952;yeah
32953;https://golang.org/pkg/fmt/
32954;ngl i just use %v for almost everything
32955;wrong ch sry
32956;%#v is the best
32957;those 2 are more for debugging
32958;pointer receivers are run more efficiently also because Go copies values on function calls making a copy of a struct is no efficient compared to copying a pointer.
32959;not necessarily
32960;copies are not very expensive
32961;thats a big benchmark moment
32962;pointer dereferences can be very expensive
32963;do not use that logic to make a decision between the two without proper benchmarking
32964;generally just use a pointer when you need a reference and a value when you don't
32965;takes longer to copy more bytes than it does less. it is simple
32966;false
32967;There's more to it
32968;the cache laughs at that statement
32969;You're not just copying bytes when you use a pointer
32970;you're copying bytes and dereferencing a pointer
32971;pointer dereferencing is cache infriendly and can cause an expensive cache miss that copying doesnt have
32972;dereferencing a pointer can take a lot of time
32973;yes copying less bytes is simpler
32974;but that's not the only thing happening
32975;the pointer is just the base address of the struct.. very efficient
32976;ok this is trolling now
32977;None
32978;im goingback to work
32979;Does discordgo get a callback when people react to a message?
32980;nice troll gg
32981;@NoNameNamer #discordgo for discordgo related questions : )
32982;but yes
32983;I thought I was there lol
32984;that graph needs a depression curve
32985;lol
32986;@James8880 but dereferencing a pointer to use it takes time
32987;for that huge bit of time you feel completely dumb
32988;and if the CPU has a cache miss the time it takes is waaaay longer than a copy
32989;cache miss fake news
32990;:kkk_clueless:
32991;if cache misses were such a big deal they would move ram closser to the cpu so the data has to travel less
32992;my ram is like atleast 3 cm from the cpu
32993;you want a nobel peace prize award?
32994;when it could be 1 cm
32995;if computer slow why not make computer fast
32996;:kkk_genius:
32997;> pointer receivers are run more efficiently also because Go copies values on function calls making a copy of a struct is no efficient compared to copying a pointer.this is false yeah
32998;"there is no as you say dereferencing"". There is the address of the struct and then then a list of offsets from that base address to each field."
32999;:kek:
33000;:KEKW:
33001;no derferencing
33002;BRUH
33003;okay bud
33004;this has to be bait
33005;im convinced this is epic bait
33006;@Doad surely youre convinced now
33007;this has to be
33008;Uh oh..  I think the deez has been cheesed
33009;the CPU doesn't copy 1 byte at once bruh
33010;:redditGold: @James8880 heres your reddit gold for epic bait
33011;ever noticed the more expensive mobos havec their ram slots closer?
33012;@James8880 what do you think the process of accessing that data is?
33013;it has to find that address in your RAM aka dereferencing
33014;he has cheezed the doad
33015;I'm cheezed
33016;there's one thing about Go imo
33017;is that people might be dereferencing 8 pointers
33018;without even knowing it
33019;yup
33020;The doad has been goad
33021;it's really easy to just make field types pointers when they don't have to be
33022;and the `.` implicitly dereferences them
33023;@_diamondburned_ is there an easy way to debug that? Like using the profiling tooling?
33024;What is a good way to embed files into my binary .. like for example a openapi spec?
33025;https://github.com/markbates/pkger
33026;okay I see where using heap can cause the garbage collector to do more work.
33027;@misterturtle not that I know of
33028;I mean the profiling tooling will probably tell you whether or not the memory layout is a huge issue or not
33029;but it doesn't tell you if you're unnecessarily dereferencing a lot or not
33030;> okay I see where using heap can cause the garbage collector to do more work.worth mentioning that in Go pointers don't necessarily point to the heap
33031;same for nonpointers really
33032;What would drive my implemenation is merely whether the process needs to work on the same thing or a copy of it.
33033;I should really start playing with the profiling tools a bit never really dug into them
33034;I mean that\'s what you\'re supposed to do. People just took umbrage with the way you said this particular thing is always a performance improvement period
33035;which is extremely incorrect
33036;@deezy yeah
33037;it was
33038;it's okay
33039;live and learn
33040;just remember: all absolute statements are wrong
33041;wrong
33042;correct
33043;Also if there are options then there is a good reason for that. :p
33044;yeah correct
33045;> What would drive my implemenation is merely whether the process needs to work on the same thing or a copy of it.also keep in mind if a field could be copied and whether it should be or not
33046;e.g.
33047;```gotype T struct { mu sync.Mutex}func (t T) Method() { t.mu.Lock() }```
33048;this is fine
33049;but
33050;```gotype T struct { Mutex sync.Mutex}``` this might not be fine
33051;because you can copy t.Mutex
33052;the linter will warn you
33053;but you can do it
33054;you shouldn't be able to
33055;note that 1 is fine because the receiver is a pointer
33056;yep well taken and there are business process reasons also besides the technical ones.
33057;so an instance of T is not copied
33058;(whether it is actually copied or not is up to the caller they can try hard enough to copy it)
33059;That's my policy. Whoever's using your shit can always find a way to break it or use it wrong. Make doing the right thing as easy as possible and save yourself a nightmare
33060;^
33061;80/20
33062;but that's a bit of a tangent
33063;now I am thinking. And forgive me because work has made me unhappy by having me step away from using Go as of late. The thought that I am having is would an interface have to be implemented on both the struct and the pointer to the struct?
33064;depends
33065;you can have a struct (nonpointer) implement an interface
33066;but it would be copied around
33067;as for implicit (de)referencing I think there's a rule for it
33068;so the methodset of `T` is a superset of `T`
33069;I forgot which direction that goes though
33070;for the purposes of pointer vs value receivers and interfaces
33071;thanks deezy. cool
33072;pointers dont have methods
33073;types do
33074;ok so implicit dereferencing is allowed https://play.golang.org/p/FjbyDhht8P
33075;implicit referencing is not: https://play.golang.org/p/HEJ0UMFQssp
33076;if you have a pointer to an instance of a type depending on how its methods are defined it may have a different set of methods than a value/copy
33077;ah yeah I remember using the implicit dereferenceing and at the time thought this is nice.
33078;I am wasting bandwith here...
33079;aren't we all
33080;atleast you arent asking how to circumvent a billion dollar security system
33081;> if you have a pointer to an instance of a type depending on how its methods are defined it may have a different set of methods than a value/copy@deezy that's another thing I'm gonna have to look up.
33082;üëü ü§ñ
33083;hey i\'ve never programmed before but this youtube video told me I can make millions reselling sneakers so how do i
33084;yeah we are I would rather be using Go than talking about it here. I want to pick up a Go project in Git.
33085;It is sad to love a language and tool set but I admit it here I love Go
33086;> sad to love a language and tool setyou'll get over that sentiment real quick
33087;go does do implicit referencing too in method calls on addressable objects
33088;especially once you start using GOOD ones
33089;`As with method calls a reference to a noninterface method with a pointer receiver using an addressable value will automatically take the address of that value: t.Mp is equivalent to (&t).Mp. `
33090;like i said
33091;good tools
33092;but the Go tool set is like a most bestest one no?
33093;it's a strong contender
33094;syntax/language is overrated programming tools/environment is underrated
33095;well that's where go strikes its balance
33096;thisssssssssssssssssssssssss
33097;Go tools are fucking great
33098;Deezy what should I look up to see an example/docs for how a pointer to a type could have different methods than a copy of that type? I feel that's something I need to understand
33099;I don't think there are many languages out there where compiling is just `go build` running is just `go run .` and imports are literally super duper automated with `goimports`
33100;Go tools are fucking great.
33101;it minimizes syntax/language overhead to reduce developer cycles and also makes tooling infinitely better
33102;it's honestly brilliant
33103;its in the go tour iirc @misterturtle
33104;I don't need an IDE I can just make do with vi and it would still play very nice
33105;and I really like that
33106;https://tour.golang.org/methods/4
33107;They are cadillac
33108;`go test` is also great
33109;that shows the difference between pointer and non pointer receiver
33110;I have to give go test a whirl
33111;hi how I can change the current console title?
33112;You can go to page one of that section for an introduction
33113;which platform
33114;windows
33115;cursed
33116;example?
33117;windblows
33118;..sorry I could not resist
33119;Oh ok this is something I've known for a while sometimes I just get confused when things are put in their technical terms
33120;how I can change the current console title? (windows)
33121;if you read the spec you get used to all the technical terms quickly
33122;like when it says `addressable` somewhere before that it is defined
33123;Yeah I have been meaning to do that
33124;I feel I've dived deep enough into thr language that it would make sense now lol
33125;the trick is whenever someone asks a specific language spec question in here
33126;pull it up
33127;and look for it
33128;eventually you piece the stuff together
33129;@minish i wouldn't bother
33130;and if you get it wrong someone here will nicely tell you your wrong lol
33131;https://docs.microsoft.com/enus/windows/console/setconsoletitlehttps://docs.microsoft.com/enus/windows/terminal/tutorials/tabtitlehttps://docs.microsoft.com/enus/dotnet/api/system.console.title?view=netcore3.1
33132;it is non trivial
33133;assuming you\'ve already googled golang change windows console title and found no results this is what you\'ll have to work with to accomplish what you want
33134;i strongly advise not bothering
33135;and actually making a thing that works
33136;Go is the first language where I've had in inclination to look under the hood so to speak and use the language beyond just achieving usually fairly narrow easy takds
33137;So I dont really have any familiarity with a lot of the concepts of a compiled language
33138;you'll be surprised to know
33139;it takes a lot shorter time to understand than you would think
33140;there's fewer differences than you'd think
33141;python is compiled
33142;reading Go source is ridiculously easier than most other languages imo
33143;java is compiled js is compiled
33144;it's all compiled üôÉ
33145;there's less abstraction and magic
33146;well except for certain parts of the runtime
33147;Does anyone have any resources on how to make a rest API from the bottom up using chi (and possibly sqlx) I'm struggling to find any beginner friendly videos or articles or anything like that
33148;"Replace compiled with languages in general ;)"
33149;I understand the basics of net/http but there are a few little things that I don't get
33150;the chi docs are pretty great
33151;look at their examples
33152;Ok
33153;I'm stupid why didn't I look there in the first place lmao
33154;the problem is REST API doesn\'t actually mean anything
33155;it\'s like saying chinese food or a car
33156;?
33157;the only thing rest api actually means is uses http
33158;ok a CRUD rest api is that better?
33159;there are peole who sell books and training courses that will tell you REST means something specific
33160;tbf crud is the same level as rest üòõ
33161;anyways
33162;o
33163;just google rest api principles or rest api tutorial or something and start reading
33164;read many things
33165;read them multiple times
33166;ok
33167;the thing about getting good at stuff is there will never be One Thing that makes everything easy and obvious.
33168;You're going to have to learn from multiple sources practice what you've learned figure out what parts do or don't work for you or your specific situation
33169;also is it idiomatic to decouple a frontend fileserver (serving a vue or react app) from the business logic?
33170;i would
33171;ok
33172;thank you
33173;those sound like two entirely different docker images
33174;yeah you can have a webserver serving your frontend and then an api gateway server that does your logic stuff
33175;and then you can scale the two independently
33176;and then use some sort of proxy to deal with samesite cookies and cors
33177;but honestly unless this is a business thing i would start smaller than that
33178;just a go server that does server side rendering
33179;its a pretty complex app that I'm thinking of so I don't think that would be the best also I have 0 experience in ssr
33180;the funny thing about complex systems is that they are usually just a bunch of very small systems all jingling about
33181;you just need to break your app down into smaller parts
33182;and those parts are probably still to big
33183;yuuuup
33184;its like that old phrase how do you eat an elephant? one bite at a time
33185;eventually you get down to one single thing
33186;> complex systems is that they are usually just a bunch of very small systemsThe human body is incredibly complex but it can be analyzed as a system of organs interaction or even as collections of cells or collections of proteins
33187;like for instance i spent a few days last week on JUST doing jwt auth
33188;it's all just lots of little pieces
33189;hidden inside boxes
33190;nothing else in the app
33191;how would one find the balance between having a mess of microservices and a huge monolith
33192;experience
33193;yeah was about to say it negates that it's very hard to know where you draw the line except for with experience
33194;both have unique problems
33195;that dont appear until you have the problem and it crashes the whole thing
33196;so i guess i'll just get to it then
33197;try things fail learn
33198;that's all there is to it
33199;there's no secret formula to doing things Correctly
33200;It's just a matter of whether your solution is the worst
33201;as they say you can always rewrite your application but you shouldn't in most cases
33202;i've already rewritten the backend once while switching databases so why not completeley switch languages too and hope for the best
33203;I think you should just pick a stack and go for it the why not mentality is where you get endless feature creep
33204;so lets say this: you want to build a server that will handle some pizza ordering shopso we take that shop and break it downwe have a front end and backendthe front end probably doesnt need to be a spa to be workable so lets just keep it simple and do a ssrokay so how do we setup a ssr in gowell ssr is really just serving a whole bunch of html files rendered outso how do we serve a single rendered fileso how do we render a single fileand so on
33205;and you iterate from there
33206;> how do you eat an elephant? you get someone large enough to eat it
33207;@omarhachach but the thing is i can't just pick a stack in a language i have no experience in
33208;vertical scaling moment
33209;lol
33210;noice
33211;i mean you have to start using a thing you know nothing about at some point
33212;otherwise you never learn anything new
33213;I need 20 commits on github STAT. Anyone need help with anything?
33214;for what
33215;just commit 20 line changes
33216;if someone is counting your commits you need to walk away quickly
33217;i really need to learn regex lol
33218;bruh
33219;just write docs
33220;one thing at a time lol
33221;add comments
33222;@jawad https://regex101.com/
33223;danke
33224;there's a Golang mode too
33225;@Tarek do you know how to make a sneaker bot
33226;many people here need help with that
33227;:lol:
33228;good suggestion
33229;lmao holy shit is this the guy from benawad's server? üòÇ
33230;"lmao everyone wants to make a sneaker bot; cringe moment"
33231;@Madxmike Go is incredibly popular for that I've made 3 for 3 competitors at this point. Send help
33232;i don't even want to know who that is
33233;no seriously though if you need help with anything hit me up
33234;if he's responsible for the sneakerbots
33235;CEO of sneakerbot
33236;:robpike:
33237;Pob Rike
33238;yeah i know it is
33239;any robbers? :robpike:
33240;but 90% of the people making them have no clue of how to even start doing it
33241;TRUE üòÇ
33242;so its just how do i http2
33243;they just want easy money but are retarded and don't know how to program
33244;oh my god
33245;guys
33246;i just came up with the perfect new cryptocurrency
33247;just cringelord normiem zoomers who wanna act like hackers üòÇ :robpike: style
33248;SneakerCoin
33249;WOPAM :robpike: STYLE
33250;akami is killing my connection pls help
33251;https://tenor.com/view/dawsongoschdancinggangamstylefriendsclassmatesgif17164587
33252;Hello it's me again.Who is familiar with net package?
33253;everyone
33254;lol
33255;ask away bud
33256;just ask the question
33257;Good.
33258;Why go going panic when I dial to ip with invalid port?
33259;cause you're not checking errors
33260;probably because you didn't check errors
33261;yeah
33262;Like  port is closed and u got panic.
33263;100%
33264;paste code
33265;@Rin if the port is invalid then it should üòÇ :robpike: brain
33266;yeah sounds about right
33267;> SneakerCoin@deezy https://twitter.com/sneakercoin?s=09
33268;ROBBERS IN CHAT :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike: :robpike:
33269;sec
33270;tf is that
33271;no more sneakers pls
33272;SNEAKER COIN OMEGALUL
33273;ENOUGH WITH IDOLIZING SHOES
33274;IDOLIZE ROB INSTEAD :robpike:
33275;we get enough with the people coming in asking for help for their bots
33276;"``` conn err := net.Dial(""tcp4 192.168.1.1:83"") defer conn.Close() if err != nil { fmt.Println(""FUCK"") } fmt.Println(""alright"")```"
33277;okay let's move msot of this to #offtopic
33278;you're possibly closing nil
33279;yo can we get an auto ban on people trying to make sneaker bots?
33280;move the defer to after the error check
33281;@Tarek no
33282;@Rin you're dereferencing a nil connection on error
33283;wait you're just printing it üòÇ
33284;yeah you have to `return` or something
33285;no wait
33286;it's a few things
33287;you can `log.Fatal()`
33288;move the defer bloew the error check
33289;or `errors.New()`
33290;I thought it does not matter when u write defer
33291;it does
33292;and put a return in the errorr check block
33293;ok this is kind of a newb question but what are the ways to serve/handle errors in go and when should you implement each way?
33294;@Rin if you have an error you're conn is gonna be nil
33295;so you don't want anything to use it
33296;including a deferred function call
33297;else statement?
33298;If the connection errors then Conn will be nil. But if the defer is before the error check it will still try to close the nil.
33299;But why my `err` is empty?
33300;I dont get it
33301;https://dave.cheney.net/tag/errorhandling @Tarek
33302;if there is no error then err = nil üòÇ :robpike:
33303;because maybe a closed port isn't an error
33304;ty @Madxmike
33305;idk
33306;"if there is no error then there is no error therefore err will = nil; nil = nothing"
33307;can you post the actual panic
33308;@Rin
33309;try checking if conn is ~~null~~ nil too
33310;Hold up.
33311;I got an idea
33312;I'll just check of conn = nil
33313;Why?
33314;Can you post the actual panic message?
33315;Are you sure that this is what's panicking?
33316;ah shit go finally did big cringe üòÇ https://golang.org/ :robpike: would not approve
33317;```panic: runtime error: invalid memory address or nil pointer dereference[signal 0xc0000005 code=0x0 addr=0x0 pc=0x51cbdf]goroutine 1 [running]:main.main() R:/Job/Code/Go/Testing/main.go:144 +0x83fexit status 2```
33318;what's on line 144?
33319;bruhhhhhhhhhhhhhhhhhhhhhhhhhh
33320;just
33321;defer after the if
33322;??????????
33323;why are you trying to make things harder
33324;Already did it. Relax.
33325;Same panic message.
33326;show code
33327;@Tarek what's big cringe?
33328;None
33329;why?
33330;"```conn err := net.Dial(""tcp4 192.168.1.1:83"")if err != nil || conn == nil { fmt.Println(""Port is clossed"")} else { fmt.Println(""Port is open"")}```"
33331;thought go devs were better than being sjw political activists
33332;guess not :robpike:
33333;wow
33334;imagine being this dumb
33335;@Rin you're not breaking control flow
33336;if you have nothing else to contribute than saying durr BLM bad head off to #offtopic or head out
33337;@Rin where's the defer
33338;Gone.
33339;bruh
33340;lmao why are you so triggered? üòÇ PepeCry
33341;@Tarek saying black lives matter does not make you an sjw
33342;#offtopic
33343;damn didn't know I'm triggered now
33344;@Tarek let's chill out buddy
33345;"it's pretty cringe and is distrating; I just wanna read go docs not donate to a fucking EJI org ffs üòÇ"
33346;also `else` :feelsbadman:
33347;durr fucking sfw
33348;@Rin tbf what did you expect the code to do
33349;"imagine using else in go; else needs to be removed üòÇ :robpike:"
33350;Checking if port open or closed.
33351;right now all it does is print a message about whether or not the Open fn has succeeded
33352;anything you do afterwards on conn is invalid
33353;if that's all you care about then that code is exactly what you want
33354;@Tarek it's legit 52 pixels if it's really that infuriating send an email to the website maintainers
33355;but I don't think that's the case
33356;What
33357;actually you have to close conn if err is nil
33358;What
33359;@jawad just don't even bother
33360;"it's just annoying; btw generics draft finalized üôÇ :robpike:"
33361;@_diamondburned_ ok
33362;if its annoying just close your eyes :aylmao:
33363;dont even respond to that
33364;hm... I am thinking how to handle these erors
33365;errors
33366;:blobbanhammer:
33367;so it is an error?
33368;üëå üòÇ how to learn go: close your eyes :robpike:
33369;so your objective is not just to check if a port is open or not
33370;How to say
33371;Right now  only to check.
33372;I am just learning dont expect some spaceships from me
33373;what do you expect the output to be
33374;Maybe paste all of the code for context
33375;a boolean to indicate whether or not hte port is open or close?
33376;Bool ofc.
33377;a message string? integer? error?
33378;```goc err := net.Dial()if err != nil { // probably closed return true}// clean up immediatelyc.Close()return false```
33379;not the best way but it demonstrates the fact that you have to close when using dial
33380;We aren't expecting spaceships. Just trying to understand what you are trying to do because that will change the advice.
33381;Thanks mate.
33382;But when i got an panic right there when port is not aviable.
33383;just
33384;try my code
33385;you can ask more questions when you've tried it
33386;Why
33387;because i'm tired
33388;It is the same i was using.
33389;it is not
33390;In his code he breaks the control flow when there is an error
33391;Well
33392;Actually I tried using `return` yesterday and it panicked inside a function.
33393;Well this code prevents a panic on `c.Close()` when there is an error
33394;not sure what your code looked like yesterday
33395;Cant debug code we cant see
33396;Then you have a problem somewhere else too. Fix this one first then we can look at the other one.
33397;Wanna see my full code?
33398;just what's important to the issue
33399;if you're having a panic show that line and the surrounding code
33400;the difference between your yesterday code and mine is that your yesterday code deferred prematurely
33401;Alright boys
33402;meaning if the function returns before conn is not nil the defer will be executed
33403;on the nil
33404;Here is my code
33405;None
33406;oof
33407;damn that looks good
33408;i haven't had spaghetti in a while
33409;Wait how did you get my code
33410;Tbats not even public
33411;I've been breached
33412;I might have to make spaghetti for supper now lol
33413;Heh I understood where i was mistaken.
33414;nice
33415;This is dangerous I'm getting my laptop out to work on code. First time in a while
33416;:hugged:
33417;dont use an apple tho u cant code with a fruit
33418;damn didn't think of that
33419;?go structure
33420;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
33421;My work provided me a MacBook pro... I haven't actually turned it on in about 2 months.
33422;i wanna try something like this I always use the rails style layout
33423;which one?
33424;oh that one
33425;yeah you should
33426;My problem is I don't understand some of the concepts well enough so I'm just going to plough ahead and see what the fuck happens
33427;yeah def practice imo
33428;I can relate the article to its own example but struggle to apply it to my use case. Expect some horrific attempt in #showmewhatyougot at some point :D
33429;Hello gophers what language faster : C or Golang?
33430;depends
33431;depends on how you write it
33432;:partygopher:
33433;depends on what you use to write it i.e. the set of libraries etc
33434;NOICE
33435;depends on where you run the code
33436;etc
33437;@_diamondburned_ in mathematics faster then C?
33438;a naive port of a Go program from C would probably be about 14% slower in most cases
33439;depends on math as well?
33440;Yes
33441;you can use SIMD/AVX/whatever instructions in Go and it would probably be fast as hell
33442;but the difference would probably be around 14% vs same code in C
33443;I say probably because it's a super vague estimate
33444;C is Just an high level assembler xDDDD
33445;So maybe I have problems with English language because i‚Äôm from Russia
33446;Man I have a guy at work who wrote graphical interface on assembler.
33447;@Rin wtf
33448;btw
33449;https://github.com/minio/simdjsongo
33450;Maybe it do hard
33451;I am from russia too. It is all crazy here.
33452;–¢–æ–≥–¥–∞ –ø—Ä–∏–≤–µ—Ç
33453;Nyet. This is English speaking discord server.
33454;Ok
33455;But maybe we can speak Russian in #offtopic
33456;yall can just DM
33457;lol
33458;@_diamondburned_ so I really scared that Google can R.I.P Golang. Because Dart and other Google projects has been dead :((((
33459;Don't expect much help from me. lolI am pretty new in go.
33460;Yes I‚Äôm to Rin
33461;the thing with Go is that Google's influence on it is pretty small
33462;it's mostly influenced by the engineers from Bell Labs
33463;So ye
33464;You‚Äôl right
33465;Golang is going strong not like GoogleCar.
33466;go language is open source google can't kill it
33467;lol google car
33468;So yes
33469;It‚Äôs true
33470;And one question
33471;u know how many captchas i have done for google car with traffic lights and buses and they put no product out
33472;What is Go for?
33473;I don‚Äôt no
33474;best for web servers and backends really
33475;mostly used for web stuff
33476;^
33477;Go is for writing programs
33478;it's generalpurpose so really most stuff you could think about
33479;@Dusty.P GENIUS
33480;but mainly server
33481;@_diamondburned_ so ok
33482;Am...
33483;You can do just about anything with it.
33484;To do BackEnd web development on Golang I need any libraries or modules?
33485;nah
33486;no
33487;Need? Only the standard libraries that are pre installed
33488;stdlib is already almost perfect
33489;you don't need any external library/module
33490;it might be worth trying after you've tried the stdlib and stuff
33491;@_diamondburned_ thank you so much
33492;yeah np
33493;But
33494;I programming 4 years
33495;But I think go
33496;Is fast simple and other good parameters
33497;And I want to learn Golang
33498;?go tour
33499;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
33500;?go learn
33501;Gopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Go by Example <https://gobyexample.com/>  SkippyA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  Skippy
33502;No
33503;I learned go with https://golangs.org/ and https://golang.org/ (with official documentation)
33504;Oh nice. I should read that.
33505;Go Tour has Russian translation p sure
33506;@_diamondburned_ so ye it‚Äôs cool but I use golangs.org and golang.org
33507;Usually russian translate freaking sucks
33508;And I have a secret
33509;BIG secret
33510;So ye i start programming at 7 ye I‚Äôm 12 years old
33511;So web developing for 4 years is so interesting
33512;surprised web hasn't become so grueling for you after that amount of time
33513;Why you does not shocked that I 12?
33514;Because it is average age for Russian hackers.
33515;I mean people can start at any age as long as they could read
33516;if enough time is dedicated I think anyone could do it
33517;the hard part is the dedication
33518;@_diamondburned_ I think 5 years of programmer job has dedicated me
33519;:bongo:
33520;I cannot use vim
33521;am I just incompetent lol
33522;Idk I just find it so useful to use a mouse
33523;I use (n)vim with a mouse
33524;for file tree stuff?
33525;Because he does can‚Äôt exit bla bla bla and other Vim jokes
33526;yeah for file tree stuff as well
33527;I use mouse for buffer interaction and NERDTree
33528;the rest is kb
33529;I can see how it's fast for like competitive/ short scripting stuff but for large apps like bots I just find vscode or IDEs better
33530;i just like my editor not taking up a quarter of my RAM
33531;and freeze my PC in the process
33532;lol electron yea
33533;although I haven't had an issue with that
33534;but I have 32gb of ram
33535;@Deleted User what language do you use?
33536;To edit in Vim
33537;I was doing it with go and c
33538;None
33539;is that just in the terminal?!
33540;yeah
33541;cus that looks nice
33542;@Deleted User Golang  JetBrains Goland IDE. C  JetBrains CLion IDE
33543;yea jetbrains has some good stuff
33544;I can also do C with cquery but I don't do much C
33545;I was using idea for minecraft stuff recently
33546;@Deleted User why
33547;but java is pretty annoying
33548;well I like minecraft
33549;Use IntelliJ idea
33550;I was
33551;Well I like osu!
33552;lol osu
33553;kms
33554;weebs
33555;yeah i am a weeb
33556;pretty obvious
33557;@_diamondburned_ tomorrow your nitro has been deleted
33558;So
33559;i have auto pay
33560;Maybe I can buy nitro for you
33561;lol sure if you want
33562;I barely have money for rent someone gotta get me nitro lol
33563;> barelyI completely do not have any
33564;I just don't need rent rn but I will soon
33565;can't get job tho because virus
33566;also uni started
33567;work at ups
33568;they always hiring
33569;second person ive met that does
33570;they're paying for my current semester
33571;although I'm probably gonna leave school for the 3rd time
33572;oof
33573;lol
33574;I just really don't enjoy it
33575;same but I have to put up w/ it anw
33576;then you look back and see your skills only matter not some degree
33577;usually
33578;Oof fuck I have second stage at school
33579;I figure I can just work at ups and keep getting raises and become a supervisor until maybe one day I make a company and people maybe give me money
33580;üòî
33581;Ya you‚Äôl said Go can do BackEnd can you write and share with me simple code that write Hello World on main page @_diamondburned_?
33582;nah i'm lazy and busy rn
33583;you can find that on go by examples
33584;well
33585;go web by example
33586;https://gowebexamples.com/
33587;@_diamondburned_ thank you
33588;np
33589;Can somebody throw at me good article which explains how goroutines work?
33590;and ofc how to use them
33591;go tour?
33592;yeah you'd start with the tour
33593;?go concurrency
33594;Kavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_TailorUnderstanding channels <https://www.youtube.com/watch?v=KBZlN0izeiY>  Sgt_TailorRob Pike  Concurrency Is Not Parallelism <https://www.youtube.com/watch?v=cN_DpYBzKso>  Skippy
33595;?go goroutines
33596;i guess not
33597;there is nothing like goroutines in any other langs it's very sad
33598;gonna have to add them to my language
33599;that's probably not true
33600;lots of languages have green threads
33601;those are totally diff tho
33602;Python has Coroutines which are basically the same just a worse implementation
33603;No goroutines are green threads...
33604;the cool part of goroutines is (1) that they get multiplexed to threads (2) yielding is automatic via channels
33605;and ofc it's totally natural no manual stack management of any kind
33606;ye but I need to understand how to use them first (:
33607;yes
33608;do the tour
33609;will do
33610;https://tour.golang.org/concurrency/1#:~:text=A%20goroutine%20is%20a%20lightweight,happens%20in%20the%20new%20goroutine.
33611;words don't mean anything anyways
33612;¬Ø\\_(„ÉÑ)_/¬Ø
33613;gophers
33614;let's make things clear
33615;Official tour of go is actually meh.
33616;goroutines aren\'t green threads isn\'t a particularly productive conversation
33617;what are the types that are pass by value
33618;and what those who don't
33619;> words don't mean anything anyways@deezy lol
33620;the ones you pass by value
33621;that's a thing you control
33622;maps  arrays  slices  variables
33623;slices maps and channels are...weird
33624;but
33625;constants
33626;slices are passed by pointer right?
33627;no
33628;not really no
33629;unless you want to
33630;then they are
33631;slices are copied but that copy includes a pointer to an array
33632;so it's a new slice pointing to the same backing array
33633;yea that's what I am asking for
33634;any one have a table for those?
33635;automated yielding is called preemption
33636;like cheat sheet if not I am going to create one
33637;but goroutines behave very similarly to threads
33638;no table necessary
33639;maps slices channels
33640;so other languages definitely have similar things
33641;3 things
33642;you could put it on a sticky note
33643;> automated yielding is called preemption@_diamondburned_ it\'s not preemptive tho it\'s a manual yield it\'s just automatic in that i\'m not explicitly writing yield (unless i want to) because the channels take care of that
33644;Isn't a copy of a pointer still just a pointer or do slices also include the length?
33645;no it is preemptive
33646;> it's manual it's just automatic because i'm not manually doing it
33647;slices are a struct of many different members
33648;:thonk:
33649;just like other structs
33650;your goroutine might yield at any point in the goroutine
33651;only in the sense that they get put into threads automatically not within a thread
33652;they follow the same rules as other structs when passing around
33653;single thread they are not preemptive in anyway
33654;slices are a struct? I need to go look how they are implemented
33655;no the scheduler can yield the goroutine preemptively
33656;even in a single thread
33657;source please
33658;sure
33659;https://stackoverflow.com/questions/37391009/islocknecessarywhengomaxprocsis1
33660;dawg did you think goroutines were pinned to OS threads?
33661;that would be so bad
33662;go wouldn't have lasted a year
33663;maps are structs too but im not sure if thats particuarly relevant to how the things are used
33664;they probably thought only 1 goroutine can execute in a thread at a time all the way until it dies
33665;which is false
33666;the scheduler can and do yield goroutines for others to run
33667;even if there's only a single OS thread
33668;can you quote a particular part because i don't see where it contradicts me
33669;yeah the scheduler mostly doesn't give a fuck
33670;i mean
33671;literally the entire part wdym
33672;you can test this yourself
33673;set GOMAXPROC=1
33674;how does it not contradict you
33675;and then write some concurrent code
33676;everything about it screams preemptive scheduling
33677;Ah ok... a slice has a pointer to the first element the length of the slice and the capacity of the slice...
33678;yes
33679;the threads are preemptive by the os
33680;and the goroutines are multiplexed onto those
33681;go has a scheduler
33682;it literally has an internal preemptive scheduler that schedules the goroutines
33683;you effectively have 2 schedulers running
33684;one to schedule the OS thread pool that Go has
33685;that is the OS
33686;if i put an infinite loop in a goroutine with one thread it's gonna hang forever
33687;ok do this
33688;because the others won't get preempted
33689;no that's not true
33690;go try that right now
33691;but the specific implementation details of slices are only relevant in certain situations tbh
33692;i would but i have class in a bit but please remind me if i don't ping you later because i wanna do the test
33693;really
33694;if you just look at a slice as a view into a array
33695;it simplifies a lot of things
33696;imo
33697;@deezy would you do the honor
33698;run 2 goroutines printing stuff with GOMAXPROCS 1
33699;they will both print stuff out
33700;need one also for semantics of GO
33701;because go is preemptively scheduled
33702;hey look its the entire golang spec lmao
33703;nah i'm lazy
33704;and i got nothin to prove
33705;?go tour
33706;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
33707;for semantics
33708;the tour is not one peice
33709;Where do you set the GOMAXPROCS?
33710;it's like a book
33711;https://golang.org/ref/spec if you want a deep dive
33712;https://play.golang.org/p/t16W3ZGlz4P
33713;there are several places you can set it
33714;@_diamondburned_ https://play.golang.org/p/t16W3ZGlz4P
33715;env var flag(?) import `runttime`
33716;I'll try that on my PC
33717;I don't think the playground is reliable since it uses a modified runtime
33718;fair
33719;smart
33720;also the scheduler became even more preemptive after 1.14
33721;fair
33722;so it'll actually yield during hot CPU loops
33723;but I'll still try
33724;yeah they run on my machine so i guess it's both
33725;None
33726;> :wq
33727;`:x` gang
33728;Wtf is :x
33729;save and close
33730;I feel like ive encountered rare knowledge
33731;so i guess green threads are the feature to look for
33732;it's the vim secret that really gives you an edge
33733;good convo gtg
33734;I learned about that a while ago... but I guess there are so many times that I just want to write or just want to close that I still just use wq
33735;:x is wq with an exception
33736;it doesn't force write when there's no change
33737;the rest behaves the same
33738;bros
33739;how to manage health to learn
33740;?
33741;I am litterry can't process 1+1
33742;answer undefined
33743;woot
33744;oh now I get it
33745;see I am late
33746;can't process will
33747;why my name is white
33748;modes
33749;gimme a color naaww
33750;https://tenor.com/view/customerservicekarenskbozstlouisiwanttotalktothemanagergif17655801
33751;sleep
33752;nice one
33753;got a bit more time um who was saying that other langs have things like goroutines because even with the term green threads as reference i can\'t find any that do
33754;most seem to just be coroutines
33755;goroutines are meant to behave mostly like threads do
33756;normal OS threads
33757;right but the cool part is that they are cheap and are integrated with channels anything like that elsewhere
33758;well
33759;a combination of those 2 not really
33760;at least the first part
33761;2 things that come to mind are libdill and OS threads + FIFO pipes
33762;and selecting them is probably epoll
33763;dill is ok but i think it has manual stack management
33764;anyway gtg again thanks
33765;https://en.wikipedia.org/wiki/Green_threads
33766;Also using this definition `In computer programming green threads are threads that are scheduled by a runtime library or virtual machine (VM) instead of natively by the underlying operating system (OS).` In Python asyncio (standard lib) coroutines/tasks are also green threads
33767;I wonder if there's a dropin Java VM that uses greenthreads
33768;ehh?
33769;coroutines aren't really scheduled automatically are they
33770;they require yielding manually
33771;and I don't think event loops count
33772;Correct...
33773;event loops being async fn/promises
33774;But it doesn't say `scheduled automatically` it's just scheduled
33775;it says by the runtime library or virtual machine
33776;having yield in code isn't really done by either
33777;I think it is... Just because the schedule doesn't break into a running process doesn't mean it isn't scheduled
33778;huh
33779;wdym
33780;Scheduling to me means that it tracks what processes are running what needs to run and what is going to run next
33781;You can enhance that by overriding a running process to let another one execute but that isn't scheduling perse
33782;no I mean an executing coroutine will block every other coroutine until it is yielded somehow
33783;Yes
33784;The others are still scheduled
33785;meaning there's no internal runtime deciding when a coroutine is yielded
33786;Correct
33787;But that doesn't affect whether or not the other coroutines are scheduled or not
33788;They just have to wait until either the current one yields or finishes...
33789;The scheduler doesn't pause the execution of a coroutine by force it lets the coroutines decide when they can break and let the next scheduled process have their turn
33790;More of a loose schedule than a hard and fast schedule
33791;ehh
33792;the single `yield` call could do all that
33793;Not really
33794;no really
33795;scheduling is kind of vague since it could mean preemptive or cooperative or something of those sort
33796;There has to be something in the background that tracks what is next... yield just says i\'m done for now who is next
33797;a global array?
33798;Yeah Go has preemptive scheduling and Python has cooperative scheduling. I consider both to classify as green threads
33799;Go's green threads are a lot cleaner and easier to use than Python's
33800;"Go had cooperative scheduling; that was when Go yields the goroutine after each function call"
33801;not on an explicit yield call
33802;"> By contrast coroutines can exit by calling other coroutines which may later return to the point where they were invoked in the original coroutine; from the coroutine\'s point of view it is not exiting but calling another coroutine.[3] Thus a coroutine instance holds state and varies between invocations; there can be multiple instances of a given coroutine at once. The difference between calling another coroutine by means of yielding to it and simply calling another routine (which then also would return to the original point) is that the relationship between two coroutines which yield to each other is not that of callercallee but instead symmetric."
33803;source: <https://en.wikipedia.org/wiki/Coroutine>
33804;seems like coroutines can still be implemented with a scheduler
33805;but it doesn't have to be
33806;Yeah
33807;any `Just people who know a little bit about a few things` here
33808;need to start doing live stream
33809;for the noobs
33810;:gopher:
33811;No no pros here... Just people who know a little bit about a few things
33812;now better?
33813;lol
33814;Most streamers and youtubers seem interesting until they cover a topic you know about and you realise they just BS through it
33815;```go json.NewDecoder(res.Body).Decode(&car)``` using address here is better or pointless?
33816;it won't work if you don't use a pointer.
33817;:jaja:
33818;Or it won't do what you want it to.
33819;watch me stream sitting there staring at code before writing a single line for hours
33820;it'd populate a copy of `car` if you didn't use a pointer
33821;was thinking of doing a sysadmin set of streams but its boring if you have no viewers and are alone
33822;actually I have bad connection
33823;@deezy the car is a struct which is a return type of the function as car
33824;I can't even watch streams all time
33825;my internet has also been crap lately
33826;what im wondering if passing as &car or just car is better in json.NewDecoder.Decode
33827;examples online i've seen use the latter
33828;Depends on the type
33829;Is car a pointer type?
33830;Or a value type
33831;an empty car is initialised at the start through new function and the return type of the function is car
33832;``` gocar := new(Car)```
33833;What type is the variable `car`
33834;Ok so Car
33835;car is struct
33836;In that case only pass car
33837;Not &car
33838;both work but i dont understand why
33839;Probably because if its a pointer to a pointer itll deref twice
33840;hate to be that dude but I'm having difficulty performing go get on a private repo of mine. Currently using a .netrc file in $home but it keeps returning status 128 remote invalid username or password. Anyone have an idea on what I should do/how to see a log of the creds that are being passed when golang is getting the repo?
33841;use ssh keys
33842;how do i get intellisense in vsc for go
33843;install the vscodego plugin
33844;i did
33845;@_diamondburned_ will that work for docker? I think I know the reason: two different accounts one for work one for personal. Trying to figure out the best way to tell golang to use personal. Setting local git config doesn't seem to work.
33846;add the directory containing your module root to your workspace
33847;not sure I don't use Docker
33848;i know in javascript there are string literals where instead of string concatenation u do this ```jsconsole.log(`hi ${name}`)``` is there anything like this in golang?
33849;Hey how can i get Desktop Documents directory of a computer? in C# you would just do like Special.Enviroment.Desktop
33850;"`fmt.Printf(""hi %s\ name)`"
33851;ah ok
33852;thanks
33853;more specifically Sprintf
33854;@Bart short answer no
33855;they're different across all platforms
33856;the closest you could do is os.UserHomeDir and etc
33857;but Go has a strong preference towards UNIX systems and not Windows (thankfully) there\'s not really a function for a desktop folder
33858;i want for just windows OS
33859;not linx or mac
33860;you can however grab a library
33861;i tried searching for one but had no luck finding one for windows os
33862;welp
33863;see how C# does it then
33864;Go is a native language right?
33865;https://golang.org/pkg/path/filepath/
33866;native language?
33867;what does that mean
33868;I mean can Go be decompiled
33869;i know how that package works coil but sometimes it dosent get the right desktop ill show my code later
33870;you can decompile anything
33871;ah
33872;Lol dont think so
33873;really?
33874;how so?
33875;The only way is using x64dbg snowman decompiler but its not really good
33876;not true
33877;that's one of the many possible decompilers
33878;and decompilers do not get you the original source code
33879;there's a difference between decompiling a binary and getting the source code of a binary
33880;Show me a Go decompiler please
33881;read its assembly instructions
33882;:Shrug:
33883;"Still not sure what Go is a native language right?""Did they mean like a language compiling to an executable binary?"
33884;this is what they followed up with:> I mean can Go be decompiled
33885;im in love with go ‚ù§Ô∏è
33886;which still doesn't make any sense lol
33887;you can decompile anything
33888;binaries are literally just CPU instructions in the end
33889;there's no reason you can't decompile them unless you don't have anything (not even a binary) to start with
33890;then you can probably still speculate what it is
33891;aight imma decompile main.go real quick
33892;hexdump main.go LOOOL
33893;absolute h4ck3r
33894;"```gopackage mainimport ( fmt"")func main() { fmt.Println(""Hello nope"")}```Compiled to"
33895;And decompiled
33896;@!!!.SC4R ^
33897;You just killed my windows notepad
33898;lol > notepad
33899;vim gang
33900;rip notepad
33901;lol it's only 7.7mb
33902;Sublime > All
33903;:cereal:
33904;lmao fucking sublime
33905;is this 2009
33906;ah yes I love it when my editor nags me to buy a license of itself
33907;üòõ
33908;i must be the weirdo using vscode
33909;i use vscode
33910;vscode is the superior editor
33911;vscode is the most popular one
33912;no something like 25% of go users use vscode
33913;was thinking of trying emacs doom
33914;@Madxmike over 25 iirc
33915;yeah
33916;emacs: eight megs and constantly swapping
33917;great vscode ooesn't start either
33918;:sueur:
33919;bruh
33920;I think the string is inlined
33921;dude
33922;is it that hard
33923;I figured out how to do websockets for my mmo incase u wanna see :)https://github.com/sandbloxofficial/game
33924;It took me so friggin long
33925;Now I gotta figure how to scale haha
33926;prolly just gonna do a load balancer that picks a server that a world is active on
33927;does this just send every message to every client
33928;no that was the tricky part haha
33929;you join test 1 or test 2 to get that set of messages
33930;I'm a noob tho so yeh
33931;oh but within the world it does
33932;yes
33933;quadratic scaling :bongo:
33934;:))
33935;nah I'll just upgrade the hell outta my servers haha
33936;(jk)
33937;"```gopackage mainimport fmt""func calculator(number1 int number2 int) int { return number1 + number2}func main() { var number1 int var number2 int fmt.Println(""Enter a number"") fmt.Scanln(&number1) fmt.Println(""Enter another number"") fmt.Scanln(&number2) fmt.Println(calculator(number1 number2))}```ya know im something of a go programmer myself"
33938;ah yes calculator
33939;am i an intellectual no?
33940;lmao
33941;sees channel topic
33942;doesnt do multiplying :jaja:
33943;üëÄ
33944;does golang have decorators?
33945;sounds fancy probably not
33946;oh
33947;if you mean a special syntax for defining a function as the output of a function like python has then no
33948;there are closures which allow you to do the actual thing
33949;no i mean like these decorators in javascript/typescript
33950;that just looks like closures?
33951;oh
33952;https://tour.golang.org/moretypes/25
33953;thanks
33954;as someone whos used javascript for a while this looks like nonsense
33955;where are the parentheses
33956;guys guys. Live example of my greatness http://sandblox.herokuapp.com/
33957;this is better than wow currently
33958;cool
33959;"yes ;;"
33960;this is gonna take me a while to get used to
33961;what parentheses are you talking about
33962;`Println(sum)` these?
33963;"these are literally just function calls; they're the same as JS"
33964;for ( )
33965;^
33966;go has no () for for loops
33967;yeah?
33968;I liked it
33969;less syntax
33970;i remember spending awhile trying to figure out functions outside the main body before i realized theyre almost identical to powershell
33971;bruh
33972;what language did you even use before that
33973;CoilDomain
33974;I actually recall my first time using Go and I thought goroutines are literally just upgraded `&`
33975;like it's Bash's fork but it actually makes sense
33976;and it's not async/await
33977;which I hate
33978;none
33979;ok fair
33980;never did a function inside of bash
33981;also the problem i had was defining variables in the outside function to be used later in main
33982;the idea of functions outside wasnt the hard part
33983;also this is like week 2 of me trying it out maybe 3 days of actual research
33984;https://github.com/CoilDomain/downbooru/blob/master/src/main.go speaking of weeb stuff i was rewriting my danbooru scraper from bash
33985;I always do main() in Bash now
33986;just need to add in the sqlite and download portions later
33987;get it functional then clean it later :jaja:
33988;so never
33989;bruh
33990;rewriting is great
33991;bash is my favorite cuz u can run everything else with it in one script easily
33992;:))
33993;./runAllApps.sh
33994;after thats done im planning on writing a Go Go client for the KGS Go server
33995;wdym
33996;"run everything else with it in one script easily""?"
33997;you can run everything else with Go in one binary easily :^)
33998;./binary
33999;oh ya duh
34000;I like bash cuz uh
34001;Because you have full access to everything os related
34002;üòõ boom
34003;it's a shell language so for some tasks it is easier to write in some cases
34004;yee
34005;nah you do with Go too it's just more (or less) work
34006;wait I can make my terminal full go?
34007;which part
34008;No I'm asking lol
34009;like php a
34010;yeah but which part of the terminal
34011;there's the terminal emulator
34012;there's the shell
34013;there's the utilities
34014;how do i get the shell
34015;I've nvr tried
34016;the shell is literally just what you type on
34017;it takes input and runs binaries
34018;it has its own syntax
34019;bash is a shell
34020;Is there something for a go shell
34021;elvish iirc
34022;you can write one yourself too
34023;that'd be a cool project
34024;gotta go full go write an ide in go in a go term
34025;ide bloat
34026;there's a terminal emulator in Go
34027;https://github.com/liamg/aminal
34028;Oo me likey
34029;it's pretty unstable though
34030;it turns out Go isn't the ideal language for writing anything UI
34031;and the ecosystem is pretty undeveloped
34032;because Go people aren't UI people
34033;True. And I hope that nvr changes ahaha
34034;kek
34035;Eventually tho I bet it will be much more common with ui
34036;Especially with mobile apps. There's already been a lot of development there
34037;I think the mobile dev ecosystem is pretty locked tbh
34038;locked into Swift/ObjC and Java
34039;there's Qt in Go but that's probably the only properly developed one
34040;and you still need Java
34041;Tru
34042;Well I think u can go full kotlin now can't u
34043;well that's just slightly better Java
34044;Jvm is jvm :P
34045;Haha tru
34046;Java with slim syntax boi
34047;> I think the mobile dev ecosystem is pretty locked tbh@_diamondburned_ [ looks up from my flutter ]
34048;[ barfs up some react native ]
34049;I literally just said there\'s Qt in Go
34050;and I said pretty I did not say completely
34051;you still need some Java tools to deploy Android applications
34052;hi does mongodb throw an error if no documents are updated through the updateOne function?
34053;I think that no they will return that 0 documents where updated.
34054;why does go for loops use float64 as iterators instead of ints?
34055;does it?
34056;https://docs.mongodb.com/manual/reference/method/db.collection.updateOne/ @Flexagon
34057;I've seen that and that's probably the right answer
34058;it doesnt
34059;does that mean I have to created a modified count handler for every update database function ?
34060;PTAL @Flexagon https://github.com/mongodb/mongogodriver/blob/c1d560769a77e8ff7a7b4cd8fe6ee288316a6d61/mongo/integration/collection_test.go#L360
34061;PTAL?
34062;Please take a look
34063;oh
34064;so it does throw an error?
34065;`assert.Nil(mt err UpdateOne error: %v err`
34066;it's kinda funny
34067;the idea of go on the jvm comes up occasionally and is turned down because the jvm has an instruction set suited specifically for java types etc
34068;but what if rather than making go run on the jvm we made a jvm lang like go
34069;See: graal native image toolkit for creating static native binaries out of jvm languages
34070;"> Go had cooperative scheduling; that was when Go yields the goroutine after each function call@_diamondburned_ i don't think it is so liberal. My understanding was that it basically yielded when a channel operation would block."
34071;@Str≈ìm wait can you do unsigned types on the jvm
34072;@qrpnxz https://github.com/golang/go/issues/10958
34073;prior to 1.14 goroutines are only preemptible at function call points.
34074;yeah preemptible i was talking about yielding
34075;but indeed now it's a lot more preemptive than i thought earlier today
34076;thanks for finding the particular issue
34077;preemptible just means it may yield
34078;this is fun
34079;lmao
34080;what
34081;what
34082;why are you laughing
34083;do I really have to explain my sense of humor now
34084;i just don't get the joke are you gonna take it so personally. No feel free to not answer
34085;sure then
34086;How can I make golang accept websocket connections only 1 per ip or client
34087;keep track of what ips you've already accepted and reject a new connection
34088;oh psh
34089;duh
34090;Hey guys I have been doing some daily coding problems just to get more familiar with Go. Today's was a little tricky to figure out so I wondered if you guys had any better ideas on how to do it. https://github.com/dustinpianalto/DailyCodingProblems/blob/master/problem3.go The problem is in the comment at the top of the file.
34091;@_diamondburned_ i dont think jvm has native unsigned ints
34092;So I managed to get chi and gorm set up with a basic project structure and I was wondering if there's any way to share a gorm Model with a JSON decoder/encoder (I'm using chi but the usual encoding/json package)Edit: I should've made it clear that the struct has pascalcase fields whereas I would like the JSON keys to be lowercase with words separated by underscores
34093;https://github.com/fogleman/gg does this library only draw graphics and save them or can it do something like tkinter in python where it opens it up in a new window or something
34094;also are there any other better 2d graphics libraries?
34095;isnt there a mod for using electron?
34096;but obviously then you need to know/learn electron
34097;@festiveelephantseal that only draws it doesn't render
34098;it's not a GUI framework
34099;you can use something like Ebiten to draw the image context
34100;whoa lmao
34101;I tried putting a user id in front of a message and a type error happened. Now I'm just getting random symbols ahaha
34102;\x08Hello! Here's some random data>8544
34103;\x10Hello! Here's some random data>6075
34104;what the heck
34105;What
34106;idk what I did wrong
34107;ok so id is type int```id := string(c.ID) message = []byte(id + string(message)) w.Write(message)```
34108;message is byte obvi
34109;how would I link someone's discord account to anexisting account?
34110;currently my callbacks has it where if the discord id isnt in the database it attempts to look up the existing user with their email
34111;however what if the user isnt using their discord email with my app?
34112;when i compile my binary and i hex edit it
34113;go build ldflags s w H windowsgui
34114;my computers file path to my libraries have my computers name
34115;is it possible to remove that from the build?
34116;when using go get I get an error that looks as so import path does not begin with hostname
34117;@Bart trimpath
34118;@Dane Zaddy string(int) is invalid
34119;it's strconv.Itoa or strconv.FormatInt
34120;```go build ldflags s w H windowsgui trimpath```
34121;like this correct
34122;why is it a and not s ü§î
34123;trimpath has an arg I just gave you a clue to Google
34124;@CoilDomain because it's called that in C
34125;ASCII to Integer
34126;I think it originally meant int to ASCII
34127;ok ty @_diamondburned_
34128;ah
34129;> you can use something like Ebiten to draw the image contextaight
34130;thanjs
34131;"Hey. I have this running on Linux. ```gocmd := exec.Command(""monolith bookmark.URL o +filepath)stdout err := cmd.Output()fmt.Println(cmd)fmt.Println(stdout err)```Output:```sh/usr/bin/monolith https://google.com o /home/a/b/c/d/e/f.html[] exit status 101```It\'s not executing. Not sure what exit status 101 is I\'ve tried Googling a bit. Pasting the first line of output into a shell runs the command successfully. Code above is ran in a goroutine."
34132;"`""o filepath`"
34133;and do `cmd.Stderr = os.Stderr`
34134;don't just rely on the returned error
34135;Thanks it worked. How is the command itself different with supplying filepath as an argument?
34136;Because other than 2 spaces after `o` it looks the same
34137;"`""o  + filepath` is a literal single argument"
34138;"a flag parser may look for `""o""` literally but not `""o <whatever string follows it"">`"
34139;Makes sense. Thanks üòÉ
34140;np
34141;Another thing `cmd.Stderr = os.Stderr` just redirects the output to stderr right? If I want to return an error (if there is one) can I just return `err` from `cmd.Output()`?
34142;you can but it will be ambiguous
34143;any error will just be something like `exit status 1`
34144;`cmd.Stderr = os.Stderr` is useful for debugging
34145;if you want to actually handle stderr and use it as part of the error do ```govar buf bytes.Buffercmd.Stderr = &buf```
34146;Ok üëç
34147;does your delve have `rev` and `rewind` commands?
34148;hi
34149;yall think golang is a good first language
34150;sure
34151;learning go as a first language won't be any harder than any others
34152;some languages are hard to learn because of how permissive they are. some are hard to learn because of how restrictive
34153;etc etc
34154;kk thanks
34155;will look into go
34156;I'd recommend Go as a first language if one wants to get seriously into programming for various reasons
34157;for example explicit control flow explicit error handling static typing good and elaborate documentation etc
34158;I think it could be a bit too explicit for a new person sometimes
34159;I like the idea of python for a first language
34160;Mainly because there are a whole bunch of libs that make it easy to get some type of neat output out of your program
34161;eh python ends up hard because everything's dynamic and there's no fucking rules
34162;so you start off thinking oh this is easy i can just shove anything anywhere
34163;and now you've written code that shoves arbitrary shit in arbitrary places
34164;Golang would be alot easier to keep organized with gofmt for beginners as well no more weird ass manual indenting :^)
34165;yeah if teaching programming involves learning how to do a hello world then it's a waste of time imo
34166;and now your codebase is trash
34167;I think starting either is equally as hard for a beginner tbh
34168;I think getting stuff that works and displays on the screen is more important than good code style for a brand new person
34169;but Golang shapes them better than Python does
34170;i'm just saying you can learn both
34171;> I think getting stuff that works and displays on the screen is more importantI don't think so
34172;Code style is 50% of programming and it can make code way easier to debug and problem solve. It's also is just one less thing to worry about when writing code
34173;especially in academia it's more important to teach someone how things work rather than how to jank things together until it works
34174;it\'s also why I\'m largely against just teaching students how to durr make web fronen in js expresjs
34175;or make mobile ap with swift/java/c#/????????????????
34176;I didn't know what pointers mutexes and atomics were until I touched Go :KEKW:
34177;funny because my uni's beginner class is C++
34178;so youre saying i shouldnt copy everything from stackoverflow? :thunking:
34179;meaning we will be touching pointers
34180;no
34181;you should not
34182;:jaja:
34183;I think good structure and well formatted code are really overblown for the first few months you are doing stuff and barely figuring out what maps and arrays are
34184;The difference between a beginner and a professional programmer is one knows what to copy from StackOverflow :KEKW:
34185;From my experience working with people learning this stuff
34186;it's not overblown when half the work is done for you
34187;it's literally not possible to autoindent in Python
34188;That‚Äôs okay
34189;Speaking from experience I wish I would've had automatic formatting or a set of rules to follow for code styling when learning
34190;hell an indentation mistake will completely change how the code executes
34191;it'll take forever to debug
34192;Go's compiler will literally tell you if you miss a curly brace
34193;Was constantly confused on brackets and shit not being properly indented or in the right place
34194;Python bad
34195;Yes it is
34196;@Doad I started with Python
34197;I hated it
34198;I would not recommend anyone to start with Python unless they're not seriously getting into programming
34199;I used it for a single project in Django and I will never touch it again üòÇ
34200;in that case sure get what works
34201;This conversation seems to be heading towards #offtopic
34202;Delphi is legit I learned some english from it
34203;how do you check whether an int has been set?```var foo int{... might set foo to other integers including 0}// how to check foo?```
34204;From my experience people being able to easily make something and show it off even if it‚Äôs dumb is orders of magnitude more important to the learning process than any book on clean code a person would read during that time
34205;But anyways
34206;well
34207;technically you can't
34208;because `int`'s zerovalue is still a valid int
34209;ideally you'd have some sort of out of band indicator
34210;but you can also use int
34211;and set nil when the value hasn't been provided
34212;but then you have to derefernce the int pointer everywhere
34213;I don't think there's anything worth showing off in a classroom
34214;and even if it's outside the classroom I'd still look at them with disappointment
34215;I'd rather have people hate Go and move onto Python than using only Python and be defendant about it
34216;Yeah ‚Äúcheck if something is set‚Äù you need to define what set means
34217;like being touched at all
34218;this is a very common question in go
34219;like i said you can1) have an outofband indicator ( a companion `bool` that you set to true or false as an example but not the ONLY option )2) use WhateverType and set nil
34220;i'm not a fan of using pointers like that
34221;but it exists
34222;Could also encapsulate the data in some type of struct so the only way you can change the data is calling a method if you are wanting to do something like on change
34223;But that‚Äôs a bit extra
34224;yeah you can abstract the ugliness away
34225;but is 0 a valid value?
34226;and where is this int made?
34227;if 1. how the int is made can be controlled and2. that returned value is an invalid valuethen you can use a constructor that returns an invalid int
34228;well the 1st is ugly
34229;but the gist is that you check fo ran invalid integer
34230;if it's the zerovalue that's easy
34231;I'm also probably lowkey complaining there's no option type :robpike:
34232;we all feel it
34233;there's a reason i had an answer on deck
34234;I too want Option[T]
34235;after having to make a package that's just an abstraction on int
34236;horrible
34237;well someone else made it for me
34238;kudos to them
34239;but it's still painful
34240;avoid pointers when possible üôÉ
34241;life is simpler with copies
34242;Does optional work cleanly without the optional operators found in other Lang‚Äôs: ? ! !! etc? Java is the only language I‚Äôve used that has the type but not the operators but didn‚Äôt use it much there
34243;i mean
34244;i don't see why like
34245;```v ok := //something```
34246;not quite sure what the syntax would look like
34247;but we have precedent
34248;Mhmm
34249;`v,ok := m[key]`
34250;so we wouldn't strictly NEED a new operator
34251;cant avoid
34252;if only json can differentiate between []string(nil) and []string{}
34253;it'd probably be nice syntax sugar
34254;@Madxmike I don't think there's anything that dictates how that'll be managed in the proposals
34255;yet maybe?
34256;but I think it'll be something that the user is expected to implement themselves
34257;so really whatever you want
34258;I'd probably use .Unwrap()
34259;I‚Äôve just never used one in a serious capacity without the other
34260;It‚Äôs nice for certain things likefoo = someOptionalString ?? ‚ÄúFoo‚Äù
34261;.UnwrapOr
34262;Just of the top of my head
34263;oh hey https://doc.rustlang.org/std/option/enum.Option.html#method.unwrap_or
34264;Mhmm makes sense
34265;Is there an active proposal for this
34266;not sure
34267;I'm just saying that's what I'll do if Go 2 were to come out as it is
34268;when ppl submit language proposal that includes syntax/how it works etc. would the submitter also be responsible for the implementation/integration? or it falls on golang core team or something?
34269;I'd imagine when you propose you roughtly have design+implementation in mind but not entirely sure
34270;"How did I mess up returning a game in this?```gopackage gameimport github.com/sandbloxofficial/game/server""//Game is the struct that makes sure no one cheats in the gametype Game struct { Owner Player Players map[string]Player Map [][][]int}//Player ...type Player struct { Name string Position Position}//Position ...type Position struct { X float32 Y int Z int}//IsClean returns whether or not the game is contaminated with cheatersfunc (game Game) IsClean() bool { return true}//CreateGameInstance returns an empty game to be populated by playersfunc CreateGameInstance(world server.World owner string) Game { return &Game{ Owner: owner, Players: { Name: owner, Player: { X: 2, Y: 0, Z: 2, } } Map: nil }}```"
34271;I feel like i just initialized wrong
34272;missing trailing commas
34273;oh lol ty
34274;Shouldn't it say that when you try to compile it?
34275;it should yeah
34276;well in a kind of vague way
34277;I might rewrite part of my bot
34278;For the 10th time
34279;the more rewrites the better
34280;Lol but I feel like I never actually move forward that much
34281;eh maybe it'll click some time
34282;I'm really only gonna use this bot for one server but I've kinda started writing it around multiple servers
34283;that's what I do too lol
34284;I always feel weird putting a bunch of db stuff in a ready handler tho. Is there a better way?
34285;Like for updating discord side changes that occurred while the bot was offline
34286;I'm tophy btw idk if you remember me. I ask lots of questions.
34287;> I always feel weird putting a bunch of db stuff in a ready handler tho. Is there a better way?abstract the db stuff in another package
34288;dunno
34289;lol
34290;just don't do raw db stuff in main ig
34291;Well
34292;I often find it useful to be able to do transactions around multiple db functions. And I always see people say you shouldn't put business logic in the datalayer so I don't want to be manipulating guild objects in my db package.
34293;¬Ø\\\\_(„ÉÑ)\\_/¬Ø
34294;you can still use transactions though
34295;there's nothing stopping you
34296;https://godoc.org/github.com/diamondburned/smolboard/server/db
34297;What is a library to build a command prompt ui that refreshes data? Similar to top linux command
34298;a TUI library
34299;tview tcell/views termbox etc
34300;forgot some
34301;thank you. that should point me in the right direction
34302;yeah np
34303;I end up having to pass in the transaction as an argument tho
34304;no?
34305;I don't have to do that
34306;How tho?
34307;read the godoc i linked
34308;> This bugs me so much. Why did I do this?:kek:
34309;Oh so the idea is that you have a function that creates a transaction and then the CRUD stuff is done as methods on that transaction?
34310;yep
34311;you start with the transaction
34312;and then everythign that needs it has it
34313;thanks to the magic of methods
34314;Ye I should do that lol
34315;the same principle applies everywhere
34316;11th rewrite
34317;my http handler needs access to whatever
34318;the http handler can be a method on a type that has a Whatever member
34319;sweet smolboard looks like a good example of the project structure I was looking at. Thanks @_diamondburned_
34320;yeah np
34321;Where you guys learnt golang from
34322;Videos books etc
34323;The Go Tour is a good start
34324;Go by example is good too
34325;Can someone explain to me why brackets are on a separate line in examples like https://github.com/gingonic/gin#usingmiddleware ? Haven't done real golang in 5 years so I'm assuming it's something newfangled
34326;because that's how gofmt formats it
34327;Right but for what? It's not for functions is it because it's a struct?
34328;idk dawg there's a lot of brackets on their own line
34329;gotta be more specific
34330;also it super duper is for functions
34331;it's a scope
34332;you mean it's forced for functions now?
34333;what do you mean forced
34334;nobody HAs to run gofmt
34335;but it's a good idea
34336;no that isn't any fancy syntax it's just a new scope
34337;idk it's still not clear what youre actually asking about
34338;https://play.golang.org/p/MDDz3eyNljH
34339;"you keep saying it but as far as i can tell it only refers to brackets are on a separate line"". that applies to all instances where brackets are applied"
34340;all of them
34341;that's how gofmt likes to have brackets laid out
34342;it's unnecessary in the code example I think they use it there just for formatting
34343;Thank you @1lann. So from my understanding the line preceding the scope has no influence on the following scope on a newline correct?
34344;correct
34345;if you have a new `{ }` block you have a new scope
34346;whether the brackets appear on a newline or not is irrelevant
34347;So a struct is just a named scope in that logic?
34348;with a type obviously
34349;that it inherits struct from
34350;(type == other struct)
34351;yeah you could say that
34352;a struct defines a very confined scope that can be passed around
34353;So what makes a scope different from an object in other languages?
34354;semantics
34355;i.e. nothing
34356;it's all words
34357;names mean almost nothing
34358;you have to observe function and action
34359;ok calling the inside of a struct a scope is a bit misleading
34360;spec is here: https://golang.org/ref/spec#Declarations_and_scope
34361;it's a stretch yes
34362;it's not really correct
34363;basically a scope just defines what identifiers are accessible within it
34364;but practically speaking each instance of a struct has its own scope
34365;its methods
34366;etc
34367;and what happens to identifiers defined in them
34368;@deezy would an ordinary statement execute in that scope at definition?
34369;which scope
34370;it'd probably be better to have even a pseudocode example
34371;the question is too vague
34372;That last one was kind of an offshoot based on what you had said about scopes but to rephrase the original which I think @1lann answered well: what relation if any does a scope have to the line preceding it and would the relation define it as a scope
34373;THanks again @deezy and @1lann for the help
34374;standard rules. scopes inherit the parent scope
34375;mostly
34376;can't think of any exceptions off the top of my head
34377;but a { on a newline is a scope not an object definition with horrible syntax right?
34378;struct
34379;None
34380;no any `{ }` block ( mostly ) is a new scope
34381;again
34382;the newlines are not relevant
34383;the only thing that matters is pairs of {}
34384;go doesn\'t have object definitions
34385;you can define a struct
34386;which uses the `struct` keyword
34387;so there's really no ambiguity about when that's happening
34388;and there's functions for loops select/switch
34389;hmm
34390;> no any { } block ( mostly ) is a new scopecan you elaborate on mostly or is there documentation on that
34391;i think those are the cases where {} is introduced as scopes
34392;"```gofor { fmt.Println(""butts"") }``````gofor {fmt.Println(""butts"")}```"
34393;these are identical
34394;there is no difference
34395;ok great. And is that still synchronous? I don't remember that being in goroutines
34396;THAT snippet is because there's no `go` statement
34397;but you never know if the things you're calling are using goroutines themselves
34398;also strongly recommend refreshing yourself on the tour
34399;?go tour
34400;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
34401;lots of good information on this stuff
34402;but if there is a `go` before `{` the scope becomes asynchronous?
34403;not even remotely
34404;what does become asynchronous mean?
34405;and you can't do `go {`
34406;i mean you know what they mean
34407;and that they're also wrong
34408;tru
34409;I am both
34410;you can't spawn a goroutine on a scope you need a function of some sort
34411;so `go func() {}()` for an anonymous function
34412;it's okay i'm not dunking on you
34413;which is also a new scope
34414;but you need a function
34415;it just seems like you're getting a little ahead of yourself here
34416;if you don't know the difference between a struct and a loop you probably aren't ready for goroutines
34417;fun fact: i didn't use goroutines myself until a year and some change into using Go
34418;so don't think you're on a timer
34419;@deezy no worries I dunk on myslef üòõ
34420;you're not asking bad questions but they're based on really shaky knowledge of go
34421;if that makes sense
34422;if you can firm up your fundamentals you'll probably do just fine
34423;No that makes sense. The last time I did golang was high school five years ago. I'm mostly exposed to python now because work TT_TT
34424;i started with python
34425;it's hard to clear out the brain worms
34426;but it's doable
34427;I don't think it's python doing me in though as much as people starting new lines with `{`..... I just don't know what to expect anymore.
34428;don't over think it
34429;it doesn't mean anything
34430;literally nothing
34431;it's 100% aesthetic
34432;5 years ago :cereal:
34433;there are few reasons to use a `{}` block by itself
34434;it's usually to avoid variable collision of some sort
34435;but yeah not a good thing
34436;so to put it in simple terms it scopes line an anonymous function in other languages?
34437;eh?
34438;roughly speaking a new `{ }` pair creates a new scope
34439;structs aren't ACTUALLY scopes because you can't execute statements in struct definitions
34440;if you see someone open a { that's a new scope as far as i can remember
34441;but is that not to say scopes are inputless lambdas
34442;that's nowhere near what they are no
34443;they're just a section of code with its own namespace
34444;and how is that fundamentally different from a lambda if you don't mine me asking?
34445;if you want to split hairs yes functions are blocks of code with their own namespace
34446;but {} doesn't have its own stack
34447;it is not a function
34448;in any way
34449;ah ok so it's more lowlevel?
34450;Apples in many many ways behave identically to oranges
34451;but they're not oranges
34452;makes sense
34453;It\'s not more low level it\'s just a different thing
34454;but they share some of the same principles?
34455;you could say that if you wanted to keep reaching yeah
34456;ok but for educational purposes would you mind explaining the difference of linking the relevant docs as I am unfamiliar with the terms required for adequate gooling? üòõ
34457;i mean functions as a general rule have a stack
34458;that's compsci 101
34459;for loops don't have their own stack
34460;yes there's a parallel
34461;that conclusion doesn't actually go anywhere
34462;you could describe any block of code as a nullary lambda
34463;no matter how small or large
34464;Yarrr everyone good morning!
34465;:facepalm:
34466;hello all i am a soon to be new gopher üòÑ
34467;üëã
34468;my college is using go for distributed systems how often is go actually used irl?
34469;i thought most companies used java
34470;I'd kms
34471;it depends on the country
34472;and the market
34473;and everything else really
34474;> I'd kms@_diamondburned_ why
34475;popularity wise Java is more popular than Go
34476;but that doesn't necessarily make it better
34477;because I'd rather starve to death than installing IDEA or JetBrains or some huge IDE tbh
34478;> because I'd rather starve to death than installing IDEA or JetBrains or some huge IDE tbh@_diamondburned_ elaborate?
34479;can't rn
34480;doesn't matter
34481;not related to the question
34482;u ok?
34483;wat
34484;I'm taking a shower I'm not going to rant on trivial things
34485;it's also mostly offtopic
34486;so #offtopic
34487;> my college is using go for distributed systems how often is go actually used irl?@R4BB1T More and more all the time https://github.com/golang/go/wiki/GoUsers
34488;Although I just looked at one of the UK government sectors on that list and out of 3 pages of projects 2 were using Go one to proxy VoIP through Twillio and another for VMWare OVH tool > Packer
34489;> Hey guys I have been doing some daily coding problems just to get more familiar with Go. Today's was a little tricky to figure out so I wondered if you guys had any better ideas on how to do it. https://github.com/dustinpianalto/DailyCodingProblems/blob/master/problem3.go The problem is in the comment at the top of the file.@Dusty.P the goroutine does nothing there
34490;The goroutine reads the slice into the channel one value at a time as it is requested essentially turning the channel into an iterator over the slice. I could use a buffered channel the length of the slice but I thought this would be a better way to do it.
34491;Unless I am completely wrong... Which is also a possibility
34492;It is a single producer feeding into the next function. Reading it again it is a neat trick to directly feed the recursion as well I guess. So it isn't pointless
34493;The problem I was running into was after it recursed through at `root.Left = processNode(sc)` I wouldn't know where in the slice it had processed up to could only be one node or could be almost the whole slice as per the example so I wouldn't know where to start when recursing in `root.Right = processNode(sc)`. But the channel as an iterator solves that by not caring who is reading it it just provides the next value.
34494;hey guys im giving a talk about websockets. it'll be focusing mostly on its positives of course but before i give my demo i wanted to include this slide. should I? or just omit it:
34495;hmm maybe i should move to #offtopic
34496;the first point is weird
34497;how come?
34498;reconnection isn't a magical thing so nobody should expect things to magically reconnect
34499;it's also better to handle reconnections manually as not all disconnections are unintentional
34500;3 is eh
34501;it's to be expected
34502;and frankly it's not that much work either
34503;i guess thats true. should i just skip the slide then?
34504;hell afaik Caddy 2 requires no extra configuration w/ websocket proxying
34505;no 2 is kind of a valid point
34506;I'd probably have a slide explain why that's the case
34507;the color on the `bit of extra` is strange
34508;hmm i would but my audience for this talk is beginner
34509;doesn't highlight the right parts I guess
34510;just do diagrams lol
34511;use diagrams to explain why scaling ws might be a pita
34512;hmm okay
34513;lol i think i could spende an entire hour talking about making websockets scalable
34514;fair
34515;hi all is there a way for a ServeMux to have an error handler or must each .Handle have error checking
34516;You could have a middleware for each
34517;alright
34518;What does this mean when using os.OpenFile?
34519;Tried to google it but I couldnt find it on the docs
34520;\xa0If the file does not exist and the O_CREATE flag is passed it is created with mode perm (before umask).\xa0
34521;From the godoc
34522;Specifically the circled thing is a file permissions umask https://wiki.archlinux.org/index.php/Umask
34523;Yeah I meant to the unmask Thank üòÑ
34524;So
34525;Hello everyone
34526;Fuckin first September killed me
34527;Banter
34528;hi is there a easy way to write a channel to the file system? I want to have a persistent channel
34529;no theres no such thing
34530;sounds like you want something like rabbitmq or the like
34531;I'm using a channel as send puffer. But when my application restarts I want the old unsent stuff again in the puffer
34532;At the moment I write the stuff from the puffer into the file system when the application stops. But if it crashs there is no way to restore the data
34533;you mean buffer?
34534;load the data back into a channel on startup?
34535;This is the current solution
34536;But I want it always in the file system
34537;defer saving to filesystem?
34538;That isn't called if the application crashs
34539;defers are called if an application panics :robpike:
34540;?go methods
34541;!go methods
34542;```code block was not foundStatus = 0```
34543;?doc methodes
34544;?godoc methods
34545;there is none
34546;:robpike:
34547;bruh what is the command
34548;there is no ?go methods
34549;?go help
34550;bruuh
34551;#testing2
34552;You guys
34553;Really seem to like
34554;:robpike:
34555;This
34556;This image
34557;pobrike
34558;Brikepob
34559;https://images.app.goo.gl/ee7kzZe7rbtZCxwV7
34560;Woaweeeeeee
34561;#offtopic
34562;"Hi I have a problem after updating go.I\'m using: ``` github.com/eclipse/paho.golang v0.9.0``` But when I call```goimport ( cardatatransmit/internal/data_collector/configreader"" context"" crypto/tls"" crypto/x509"" errors"" io/ioutil"" log"" net"" sync"" time"" github.com/eclipse/paho.golang/paho"" mqtt github.com/eclipse/paho.golang/paho"") client := paho.NewClient(mqtt.ClientConfig{ Conn: conn, OnDisconnect: onDisconnect, })``` I get following error:```bashinternal/data_collector/synced/synced_mqtt.go:167:26: too many arguments in call to paho.NewClientinternal/data_collector/synced/synced_mqtt.go:167:27: undefined: paho.ClientConfig```"
34563;why do you import the same thing twice as different names :robpike:
34564;I don't know
34565;But it worked last week
34566;you must have been pretty drunk
34567;Now I am here and get this error which is strange because there is definitily a paho.ClientConfig: https://github.com/eclipse/paho.golang/blob/master/paho/client.go
34568;```go client := paho.NewClient(paho.ClientConfig{ Conn: conn, OnDisconnect: onDisconnect, })```
34569;> you must have been pretty drunk@Karitham I think vs code did it because some reason
34570;change that
34571;to what?
34572;replace your bottom part with the thing I sent
34573;you actually import the same thing twice and alias it
34574;already did
34575;nothing changed
34576;```internal/data_collector/synced/synced_mqtt.go:166:26: too many arguments in call to paho.NewClientinternal/data_collector/synced/synced_mqtt.go:166:27: undefined: paho.ClientConfig```
34577;None
34578;None
34579;whats the underlines say
34580;None
34581;whats the underline say
34582;> whats the underlines say@Str≈ìm Some spelling problem
34583;the red one
34584;The same error I already printed:
34585;None
34586;still no fix üò¶
34587;I think this error occured after I installed go 1.15
34588;go is backwards compatible so i dont think so
34589;Why does go clearly say it doesn't know the ClientConfig ?
34590;Also vscode wont complain about spelling what's that blue line say exactly?
34591;It is there: https://github.com/eclipse/paho.golang/blob/master/paho/client.go and with `paho.Client` go has no problem
34592;> Also vscode wont complain about spelling what's that blue line say exactly?@misterturtle Its a addon which give me spelling faults
34593;None
34594;oh
34595;I am an idiot
34596;The v0.9.0 doesn#t have the class
34597;So I need to choose master
34598;Go doesn't have classes üôÇ
34599;yeah specifying master in go mod file worked
34600;"```For example:f := library.func()func func(x string) { fmt.Println(x)}```How can i call the function using f""?"
34601;"```f(""Hello World!"")```?"
34602;calm down deezy
34603;`f` isnt a function you can call @BryanC12
34604;> f := library.func()that IS calling the function
34605;how can i shortcut it then so dont have to type multiples
34606;although it wouldn't work the way you've typed it out anyways
34607;because lowercase names are unexported
34608;anyways
34609;you can alias your imports
34610;> although it wouldn't work the way you've typed it out anyways@deezy Yeah I see the problem  its assigning value to f
34611;"```goimport ( shortName github.com/user/longRepoName/WithLongAssPackageNames"")```"
34612;but the thing you're wanting isn't particularly useful
34613;`f := library.func` ?
34614;and if you do what you're trying to do you're going to make your code a lot harder to read after the fact
34615;What if only the function?
34616;sorry you're missing a few key components of that sentence
34617;¬Ø\\_(„ÉÑ)_/¬Ø
34618;> `f := library.func` ?@Str≈ìm yeah something like this
34619;right
34620;> 9:16 AM] deezy: and if you do what you're trying to do you're going to make your code a lot harder to read after the fact
34621;> and if you do what you're trying to do you're going to make your code a lot harder to read after the fact@deezy OKay then use Ctrl+V
34622;yup
34623;typing less is an admirable goal but achieving that by aliasing your imports to singlecharacter names is not the way
34624;any decent editor will let you have moderately useful copy/paste buffer mechanisms macros etc
34625;also code completion
34626;because gopls is bangin
34627;The better way around this is to set your editor up a little smarter more so than changing the actual shit you type into your files.
34628;go language server
34629;you can google it
34630;it has documentation
34631;no
34632;its a language server
34633;no it's a tool that helps editors interact with static analysis shit
34634;https://langserver.org/
34635;to paint very very broad strokes
34636;like i said there's documentation
34637;protip: programming is 90% reading
34638;i learnt to write before i learned to read so they call my code the big bang
34639;mmmm 5.5/10 . keep workshopping it
34640;It seems like something similar to IntelliJ
34641;yeah
34642;it's a code completion thing
34643;just a newer generation
34644;and independent of any specific editor
34645;i think vscode does this by default no
34646;an open standard etc etc
34647;it installs all the shit for u
34648;But why make it online instead of local
34649;it isn't?
34650;it runs locally
34651;that'd be ABSURD
34652;Why they calll it Server
34653;the latency would obliterate your ability to write anything
34654;because it's a server
34655;a server is a process that is communicated with by other processes
34656;that's it
34657;it has nothing to do with the internet
34658;to explain it simple it's just a service that runs on your computer for displaying help when you code
34659;like code highlighting autocompletion warnings etc
34660;I see i thought its like hosting a public server for everyone to use/enjoy it
34661;server doesnt imply remote
34662;gopls is just a process that runs on your computer that your editor talks to to say hey what names start with `somepackage.Ba`
34663;and so on
34664;its a program that listens for requests and sends responses
34665;aka a server
34666;who says that
34667;thats just blatantly not true
34668;i read like 1 week ago in this chat
34669;microsoft invented the language server protocol
34670;oh god
34671;really?
34672;yea
34673;time to uninstall
34674;:kkk_LOLTROLLFACELOL:
34675;lmao
34676;lol Why hate windows
34677;embrace extend extinguish
34678;LSP is a noble initiative üò§
34679;:zoomerTune: windows too mainstream
34680;so was <marquee>
34681;in the beginning
34682;deezy
34683;I have a lot of respect for you
34684;don't start chatting shit about <marquee>
34685;üê∏ üî™
34686;Then what OS u guys using? Ubuntu / Arch ?
34687;arch
34688;Zorin
34689;:nixparrot:
34690;Built from ubuntu ofc
34691;<marquee> was the tits when I was 10
34692;An older version tho cuz new ones suck
34693;all my apps electron
34694;Whoa
34695;@Easy Runing on i910900k with 80Celsius idle ? And 8GB ram usage while idle
34696;@Str≈ìm ü§ù
34697;#offtopic üôÇ
34698;@Easy Wait there's such thing Electron OS ? I thought u joking :thinkingo:
34699;#offtopic
34700;"Just signed up for my first conference ;;"
34701;GoWest
34702;nice one dude
34703;Yeshh
34704;Might do the hackathon too
34705;Itd be my first time tho so idk
34706;ioutil.ReadFile closes the file by itself right no need to defer or anything?
34707;yup
34708;it just returns some bytes and an error if there is one
34709;"Hello I have a question about trying to execute an interactive process using `exec.Command()` . I\'m attempting to write a Golang CLI utility which has the ability to drop into the shell of an embedded device using telnet/netcat and my `exec.Command(""nc localhost 19021"").Run()` seems to work and is interactive after attaching Stdout/Stdin but when I press CTRL+C how do I know if I\'m exiting netcat or my Golang command?"
34710;Or perhaps there is a better way to handle this type of thing other than using `os/exec` directly?
34711;Try it and see üôÇ
34712;Should be pretty easy to tell if it closes your app or not
34713;I've never tried it before but since stdin is piped to the command I'd assume the signal goes to nc
34714;but if there's nothing preventing your program from closing after the nc command exits it will close too
34715;Is this just illegal af because json.Marshal calls marshalJSON ```gofunc (m MessageSearchDocument) MarshalJSON() ([]byte error) { return json.Marshal(m)}```
34716;As in
34717;do i need to come up with a different method name
34718;like toJson
34719;that will probably overflow your stack limit yes
34720;also
34721;try it and see
34722;you literally have the code right there
34723;oh it did overflow
34724;I was just wondering if that was why
34725;and if there's a good way around it
34726;don't write code that uses infinite recursion :ayy:
34727;problem solved
34728;i don't know why you're doing this in the first place
34729;you're relying on the default json marshaling anyways
34730;so why define MarshalJSON
34731;Ye
34732;that code effectively does nothing aside from breaking your program
34733;MarshalJSON calls json.Marshal which calls MarshalJSON ad infinitum
34734;without doing anything else
34735;also does the google uuid type under the hood identify itself against JSON as a uuid string i just threw the google UUID at ElasticS and it ingested no problem :monkaHmm:
34736;YOU TALKIN SHIT BOUT ELASTICSEARCH???
34737;üëä
34738;pointerize
34739;in some cases you want to reference a specific instance of the struct without copying in another struct
34740;elasticsearch is a huge pile of poo
34741;or you want the field to always point to the same thing despite being copied around
34742;:cereal:
34743;elasticsearch gud
34744;youre justbad
34745;its java so you just throw more ram if there's any issue
34746;um
34747;I tried doing what dia said with crud methods defined on a transaction
34748;But I kept having issues with import cycles cus I'm trying to maintain a format. But I got it to where it compiles. And now it causes a stack overflow lol.
34749;https://github.com/TinyTophy/gobot/tree/dev
34750;Anyone knew Golang Fiber Web Framework?How it is doing? i hv seen a reddit 4years ago many people dont like it.
34751;```‚ûú go test ./...# github.com/ory/dockertest/v3/docker/pkg/term../../../../go/pkg/mod/github.com/ory/dockertest/v3@v3.6.0/docker/pkg/term/tc.go:13:28: undefined: unix.SYS_IOCTL../../../../go/pkg/mod/github.com/ory/dockertest/v3@v3.6.0/docker/pkg/term/tc.go:18:28: undefined: unix.SYS_IOCTL../../../../go/pkg/mod/github.com/ory/dockertest/v3@v3.6.0/docker/pkg/term/termios_bsd.go:24:31: undefined: unix.SYS_IOCTL../../../../go/pkg/mod/github.com/ory/dockertest/v3@v3.6.0/docker/pkg/term/termios_bsd.go:37:31: undefined: unix.SYS_IOCTL? gitlab.com/spectrm/services/authmigration/cmd/api [no test files]? gitlab.com/spectrm/services/authmigration/internal/config [no test files]? gitlab.com/spectrm/services/authmigration/internal/defaults [no test files]? gitlab.com/spectrm/services/authmigration/internal/models [no test files]FAIL gitlab.com/spectrm/services/authmigration/internal/webserver [build failed]FAIL```In a different repo the same think works just fine any clues what might cause this behaviour?
34752;what platform? I recall seeing something like that a while ago
34753;it was a darwin thing
34754;darwin
34755;hmm
34756;I am just confused because in a different project the same thing works just fine.
34757;1:1 same code
34758;I tried the go clean modulecache
34759;are the versions the same?
34760;You're probably pinning against different versions of `x/sys/unix`
34761;Those constants were removed a week or so ago
34762;both of them do not ping against them
34763;:thinkingo:
34764;at least not in the go.sum
34765;The commit should be listed in go.mod.
34766;try manually pinning the latest perhaps?
34767;I will try that now.
34768;Well latest will guarantee that both versions get the error üòÑ
34769;None
34770;It comes from an indirect dependency then.
34771;Different versions of dependencies can pin against different versions of the ~~unix package~~ `sys` module
34772;On the right you're directly pinning against the version without the constant
34773;None
34774;Thanks a lot!
34775;Idea for a windows project```Basically i want to use Autorun.ini files on my windows 10 computer with flashdrives my idea is that i can write a go tool that will automatically detect a new usb device connected and check for an `Autorun.inf` file at the drive root if file does nto exist or there was an error do nothingif it does exist give a popup with the information in Autorun.inf with the options1) Open Folder2) Do nothing3) Run <Defined Autorun.inf action>[ ] Remember actionand if the Remember action button is pressed it will automatically create a 512k sized file with random text and then log its md5sum to the users localdata folder. And if that file exists `.goautorun` check its md5sum with a local list and if the md5sum is on the list perform action cached if not perform standard popup```
34776;So basically it will bring back the old popupdialog from windows xp
34777;Hello. Is there a way to get the seconds between now and 00:00 of tomorrow?
34778;https://pastebin.com/NbENWp3p and i have located autorun file
34779;@Merith use `log` instead of `fmt`
34780;alright
34781;thanks
34782;also i shrunk the code by just button the os.stat inside the forstatement in main()
34783;Oh and don't store logic in main  you can of course but it's a much better to separate to func or method
34784;for testing it's ok but for production not
34785;Well it works for me
34786;allows me to have nicer looking code and more room to work with expiriementing with GUI libraries
34787;and figuring out how the hell to parse ini
34788;right now i am focusing on the basic task launcher part
34789;does anyone have a link to the latest generics proposal document for 2.0 :PepoThink:
34790;i wanna see whats gowin one
34791;@mmacheerpuppy here you go https://go.googlesource.com/proposal/+/master/design/go2draft.md
34792;> Hello. Is there a way to get the seconds between now and 00:00 of tomorrow?
34793;Anyone can help me please?
34794;have you checked the time package
34795;its got a fairly comprehensive set of functions
34796;I need a library for a golang GUI menu
34797;ok
34798;for running time.now() code on a amazon ec2 server
34799;what is the default time zone?
34800;where the server is hosted?
34801;you'd be the one to decide that
34802;you set the zone your shit is created it
34803;the server?
34804;or the time.now
34805;yes
34806;you also have absolute control over how your assets are provisioned so
34807;whatever your system tells the runtime
34808;if the question is what\'s the default just cat /etc/timezone
34809;but you have control over this
34810;just convert to utc making your code dependant on os timezone sounds like a bad idea
34811;just use unixnano
34812;^
34813;so like this
34814;"```goto := time.Now().Format(""20060102"") from := time.Now().Add(time.Second  time.Duration(period360)).Format(""20060102"")```"
34815;thats whatever zone im in
34816;but unix nano
34817;isn't
34818;if you want a stringreadable format that is timezoneindependent then use UTC
34819;if you want to store a time use Unix/UnixNano
34820;i'm trying to create some unit tests.  would using lambas with an argument be ok if i'm trying to test methods? i am unable to use unexported types in my test  is this a common problem and is it a sign i should make the types exported? (it's a struct with method set)
34821;2. you can make the _test.go file in the same package if you want1. could you give context
34822;yeah use UTC everywhere let clients localize to their time zone
34823;and make clients give you UTC
34824;"@Aslandro ```go time1 := time.Now() time2 := time1.Add(time.Second  300) fmt.Println(time1) fmt.Println(time2) diff := time2.Sub(time1) fmt.Printf(""Difference after add 300 seconds between %v and %v is %v time1 time2 diff)```"
34825;e z
34826;"> @Aslandro > ```go> time1 := time.Now()> time2 := time1.Add(time.Second  300)> > fmt.Println(time1)> fmt.Println(time2)> > diff := time2.Sub(time1)> fmt.Printf(""Difference after add 300 seconds between %v and %v is %v time1 time2 diff)> ```@Umiesniony13 This is not what i would like to do"
34827;I would like to know the difference in seconds between now and tomorrow 00:00
34828;The main problem is that I don't understand how to get tomorrow 00:00 date
34829;time.Date()
34830;the math way is `tmrow := time.Now().Add(time.Day).Truncate(time.Day)`
34831;"@Aslandro Tommorow?```gofmt.Printf(""Yesterday: %v\ time.Now().Add(24time.Hour))```"
34832;`const Day = 24  Hour`
34833;And you'll get tommorow date from now
34834;"the package is the same already. i\'m working on a toy project so it\'s probably got some don\'t do that issues but it\'s just something to work on.i am trying to replicate some ooplike behaviour so i have a struct that has method set 1 which when invoked returns struct/method set 2.i\'m trying to replicate this in my tests but can\'t think of a decent way to do this apart from creating some mock object to then pass to some anonymous functions that i can use a range loop over```var tests = []Test{ Test{ run: func return result of mock.MethodFromStruct2 },}for _ test := range tests { mock := struct1.Method(""foo"") test.run(mock) // runs and returns mock.MethodFromStuct2}```hopefully the pseudo code clears it up. the code is way too messy to share or condense right now"
34835;> the math way is `tmrow := time.Now().Add(time.Day).Truncate(time.Day)`@_diamondburned_ Where time.Day is?
34836;None
34837;Where did you find that?
34838;`time.Day` doesn't exist. This is specifically described in the documentation.
34839;nowhere
34840;you make it yourself
34841;I added it for the sake of brevity
34842;and i have parsed the config now to get a GUI library that does what i want.
34843;thank u
34844;will be doing unix noano
34845;what would be the point to divide unixnano by time.millisecond
34846;tho
34847;```./foo.go // package foo./tests/foo_test.go // package foo```foo_test is unable to see the methods of foo.go unless i import
34848;> what would be the point to divide unixnano by time.millisecondprobably to round it to ms
34849;some languages store unix time w/ ms accuracy
34850;well isn't unix ms ?
34851;unix epoch is seconds
34852;oh
34853;".Unix() returns unix in seconds; .UnixNano returns unix in nanoseconds"
34854;I need some help finding a dead simple multiple choice menu
34855;which is mildy annoying since most system take in ms üò¶ had to fight with that not long ago
34856;blame that system
34857;do directories matter to be considered within the same package?
34858;yes
34859;why would `./tests/foo_test.go` not see the methods of foo.go?
34860;maybe because it's unexported?
34861;what's this method
34862;any it doesn't matter
34863;sentry said make them in the same package
34864;they have the same package name
34865;they shouldn't have the same package name
34866;"a directory is a package; 2 directories cannot be the same package"
34867;you either put tests in ./foo_test.go or you make a new package tests or something and use that
34868;if ./foo.go is a package then will subdirectories using the same package still be included in the package?
34869;not sure what you mean
34870;"well each directory is its own package; imports aren't recursively nested"
34871;./red/foo.go./red/a/bar.go./red/b/baz.goall using package `red`
34872;edited for clarity
34873;they're all different packages
34874;yeah dawg
34875;directories are packages
34876;one package per directory
34877;ok
34878;then it makes no sense to try and keep a test within the same package
34879;is it a good idea to always export your types if you need to test them?
34880;i can't use the type as a type within a lambda if it's not exported
34881;you can have a test package alongside a normal package in a single directory
34882;And it behaves like a different package
34883;Even though its in the same dir
34884;@beepsandboops
34885;it makes sense because1. it's in the same place as where it's defined so it's easy to find them2. it allows testing unexported functions and methods3. it allows more than just testing: go test allows adding examples for godoc and other shenanigans
34886;@deezy
34887;"`fmt.Printf(""%T \'a\') // int32` would it possible to to let it print rune? (yes type rune = int32)"
34888;string('a') prob
34889;would print string
34890;@Str≈ìm üê∏ üî™
34891;@deezy get shrekt
34892;```./app/red/foo.go./app/red/foo_test.go..../app/blue/foo.go./app/blue/tests/foo_test.go..../app/green/foo.go./app/tests/green/foo_test.go```which of these approaches is recommended/conventional then?
34893;the first
34894;First
34895;iirc i saw the separated tests in the kubernetes github a few days ago
34896;Google does what google does
34897;it happens
34898;but the first is recommended
34899;depends on your build tool
34900;technically you can put your tests in an entirely different repo
34901;if you insisted
34902;¬Ø\\_(„ÉÑ)_/¬Ø
34903;well let's say you're publishing a package
34904;you wouldn't want to publish the tests
34905;why not
34906;so a separate directory makes sense
34907;Eh?
34908;tests aren't included when you compile
34909;they're ignored
34910;oh
34911;:kek:
34912;Put em in the same directory mate
34913;tests don't get compiled into binaries
34914;i don't think i've seen any package on godoc using tests like that
34915;I have
34916;look man
34917;you asked us
34918;Ive yet to see a repo that doesnt
34919;if you want to do it different do it
34920;can you link one?
34921;don't argue with us about what convention is
34922;https://github.com/bwmarrin/discordgo
34923;i'm not arguing i'm going to put it in the same directory
34924;link the stdlib lol
34925;thanks
34926;https://github.com/strum355/log
34927;I can go on for years
34928;https://github.com/therealfakemoot/goquantize
34929;https://golang.org/src/image/
34930;https://golang.org/src/html/
34931;tests go in the same dir as the code
34932;https://golang.org/src/os/
34933;yep
34934;Especially if you wanna test unexported functions
34935;how come discordgo doesn't test every file?
34936;because writing tests is hard
34937;dgo isn't a really good example tbh it's written long ago when skippy (as he admitted himself) was still not very experienced
34938;writing tests to a network is very hard
34939;and that's why you don't trust 3rd party lib easily
34940;no not really
34941;there's no reason not to trust a library because it makes a few mistakes on package structure
34942;because I've seen much worse
34943;what's the correct terminology for a func that inits a struct?
34944;constructor generally
34945;ok
34946;how formal that is varies from place to place
34947;so if i have a struct and don't want someone doing Foo{} in their code i'd generally unexport the struct and use a constructor method correct?
34948;yeah that'd work just fine
34949;you'd want to avoid returning an unexported struct if possible
34950;if you really want people to use that constructor make it return an interface of that struct
34951;though you shouldn't have to care about it most of the time
34952;if people misuse the struct it's on them
34953;> if you really want people to use that constructor make it return an interface of that struct@_diamondburned_ could you elaborate
34954;preferring New functions in Go is common
34955;```gotype ThingInterface {}type thing struct {}```
34956;`func NewThing() ThingInterface`
34957;^
34958;why would you do that specifically?
34959;because dealing with returned unexported structs is painful
34960;to do the thing you said you wanted to do
34961;you can't store the struct value elsewhere since it's unexported
34962;again ask yourself if you really need to do this
34963;you want people to have access to the values but not the type
34964;i don't know what you mean exactly and it sounds important diamond
34965;don't try to cover every single cases it'll take forever
34966;instead cover 80% of c
34967;I'm gonna stop using that quote
34968;yeah it's nowhere near as important as you think
34969;there are valid but very specific cases where this would be legitimately useful/important
34970;so what is going on if i return an unexported struct vs an exported interface/
34971;if you aren't sure you need it you may not need it
34972;you can reference an exported interface outside the package but you can't with an unexported struct
34973;e.g.
34974;"```gopackage notpkgfunc thingHelper() (pkg.thing error) { return pkg.NewThing(""params"")}```"
34975;this doesn't work
34976;you cannot use `pkg.thing` even though that's what's returned
34977;if i'm trying to do something like foo.value rather than foo.method() i'd need to export a struct though right?
34978;right
34979;interfaces are just method sets
34980;yeah
34981;you can make getters
34982;which is why this is more effort than it's worth
34983;most of the time
34984;^
34985;you're adding a lot of extra wiring just to try to prevent someone from possibly doing something wrong possibly maybe eventually
34986;but you know what?
34987;if you provide a perfectly good NewThing() function
34988;and they still fuck up? that's not your fault or your problem
34989;You cannot stop people from doing things wrong. Make it as easy as possible to do the right thing.
34990;so generally it's best to return an interface but it's also fine to return a struct if i'm sure that is what i want for foo.value rather than foo.GetValue()
34991;generally: accept interfaces return types
34992;^ always return types when possible
34993;but it has to make sense
34994;that is the type has to be exported
34995;Okay so i have the majority of the logic there enough to make the program workhttps://pastebin.com/df93aFt5now i just need a way of making the `walk` library make the window nonresizable
34996;so is the rule: return exported types
34997;nah
34998;just types
34999;you can return unexported types
35000;@Merith is your question more specific than that? because you know the answer to what you\'ve typed out is well what do the docs say about controlling window resizing
35001;you can but you shouldn't
35002;because it's unintuitive
35003;Unable to find said docs
35004;¬Ø\\_(„ÉÑ)_/¬Ø
35005;then it may not be possible
35006;Well you know of any small and light window libraries for windows
35007;definitely not
35008;tkinter
35009;um
35010;i just posted a few in #offtopic when you asked this exact same question bruh
35011;https://github.com/andlabs/ui
35012;:kek:
35013;you posted that one and the examples are fucking way too excessive
35014;also it requires cgo.
35015;welcome to windows comrade
35016;nothing is easy
35017;more or less on purpose
35018;I just want three buttons some text and some images next to the text on the buttons
35019;The crustier your Windows application becomes the harder it will be to port it to a competitor's OS
35020;Yeap. Welcome to GUI development
35021;It's a nontrivial task
35022;Gotta do some work
35023;I mean you can see the logic in my program right?
35024;i didn't really look
35025;I've done this before
35026;well now thats just a tad rude
35027;I think i used GTK and Glade
35028;i don't really need to read your code to know how to use a gui library
35029;Well you need to read it to see how im doing things
35030;sigh
35031;Eh all the gui frameworks are the same. Widgets/boxes and callbacks
35032;it sucks but this is just how the available tools work
35033;one way or another you're going to have C bindings into a bulky library
35034;you just have to pick your poison. QT GTK windows native shit via C++ or .NET or VBScript or whatever other nasty stuff they have
35035;how devent are QT/GTK bindings... and how would one make a button
35036;and make the windo nonresizable
35037;gonna try https://github.com/gotk3/gotk3
35038;bruh
35039;are you being serious
35040;Burh serious (also turns out that one doesnt like windows as i dont have binaries in path needed,)
35041;I really wish I could find the dev blog post from a senior Windows dev talking through how a new colleague wanted to add an item to Control Panel in Windows 7
35042;lol
35043;The amount of steps involved legacy code from late 90s specific people who had to compile things (because only they knew how) and hoops they had to jump through anytime they wanted to add things to that control panel.
35044;windows stinkyyyyyyyyyyyy
35045;this is why i keep saying just write a web interface
35046;just use dlgs
35047;write it once use it fucking anywhere
35048;also gotk3 does use cgo
35049;so does andlabs/ui
35050;write it once use it fucking anywhere: assuming you have decent hardware
35051;like 4 cores and 8GB RAM minimum
35052;wut
35053;for a fucking web page?
35054;yes.
35055;:thonk:
35056;because it's not just a web page
35057;sure it's a browser
35058;it's the whole system what
35059;oy vey
35060;it's the web page AND the JavaScript runtime AND the JavaScript heap AND the browser
35061;yes
35062;that is correct
35063;which is fucking heavy
35064;still more universal than gtk
35065;¬Ø\\_(„ÉÑ)_/¬Ø
35066;welp DLGS has something CLOSE to what i want...
35067;Qt is more universal than web not sure what you mean
35068;Not exactly seperate buttons
35069;that doesn't really mean anything when one thing hogs a fuck ton of resources
35070;https://i.imgur.com/b9rd7ii.png
35071;if only they could be seperated a bit more
35072;Does electron do.. virtual lists? Eg let's say I wanted to do a hex editor in an election app
35073;isnt electron just html
35074;and css
35075;and JS
35076;for the UI
35077;It is basically Chromium
35078;Tru haha
35079;Hello it's me again. Your friendly commie.
35080;Just without some features
35081;there are hex editors for vscode
35082;Just got my hands of goroutines.
35083;what does virtual list mean
35084;I remember getting wet in the waters of the go keyword
35085;"I have this piece of code.```var outputArray []stringfor j := 0; j<3; j++ { go testChan(ch) outputArray = append(outputArray < ch)}```testChan is just sending string to the channelis it possible to catch loop of goroutines output outside of loop?"
35086;As far as I know @_diamondburned_ it's a way of being able to render a huge amount of data in a list view by only keeping enough data for reasonable scrolling in the actual list view at a time
35087;does that really matte ron the electron side tho
35088;seems like it would be a problem with Go not electron
35089;oh lazyloading of lists?
35090;Discord does that
35091;Electron also handles not drawing them
35092;so you can have a huge DOM tree of lists
35093;same goes for images too which is really tedious to do outside
35094;@Rin I'm not sure what you mean by `is it possible to catch loop of goroutines output outside of loop?`
35095;Cooool one of the projects on my ti do list is attempt an application for unknown binary data analysis in go
35096;Thr biggest hurdle (without too much thought) was how I could actually represent a lot of data from a go program
35097;I recommend making a TUI
35098;Ow
35099;Yeah that was one thought however I find exploratory stuff like this very visual and a polished gui would lend itself to the project
35100;@Dusty.P I just wanna run loop for a lot of goroutines but they are timed so running by one and awaiting for result is gonna be slow as hell.I just wanna tell Golang go nuts. Just run all these and later catch result.
35101;Did I explain better?
35102;you can have a very polished TUI
35103;Oh I think u wanna add a buffer to a channel
35104;I honestly have very few things I'd change in 6cord
35105;I believe without it waits till u output from a chan to be able to input
35106;Someone fact check that lmao
35107;This is one of the rare situations o think mouse interaction is actually beneficial
35108;What you probably want is another goroutine that just listens to the channel and does something whenever it recieves a new message.
35109;Oh duh
35110;"```gofor j := 0; j<3; j++ { go testChan(ch)}var outputArray []stringfor output := range ch { outputArray = append(outputArray output)}```"
35111;yes you can range over a channel
35112;I'm using 2 for loops in my current project with concurrency that run concurrent. One outputs the channel the other accepts inputs. Because they run at the same time it gets output as soon as possible
35113;hello everyone! today I decided learn Go. After going through the tour of Go on the official website I thought I should get a handson so I started practising some basic data structures and algorithms. But while implementing Dijkstra I don't think I have a set or something similar cause I need to get the smallest element in log n time while also being able to search and delete any element by value. Could you folks help me out?
35114;you'd use a map
35115;> yes you can range over a channelWhat sorcery is this?
35116;just go start on projects
35117;`map[whatever]bool` would be sufficient
35118;And what exactly range over channel do?
35119;revisit them if you feel lacking in knowledge
35120;@deezy so how do I get the smallent element by key?
35121;@Rin ```gofor { ev ok := <ch if !ok { break } // loop content}```
35122;that
35123;but sugared
35124;oh you just asked for a set
35125;use the map as a set to accomplish whatever you're doing
35126;i'm not familiar with any single data structure that does all of those things
35127;None
35128;wtf happened with this lol
35129;you presumably want a few different types
35130;Hello everyone i need some help with a bit of my golang code. Can anyone help me üôÇ
35131;I dont get it.
35132;You should just ask instead of asking to ask. Usually goes quicker @Pushpak
35133;Range over slices is understandable.
35134;But range over channels?
35135;yes
35136;So could you suggest how do I implement Dijkstra efficiently then? cause if I loop through the map complexity won't be very good
35137;@Deleted User looks like you had a goroutine with a stack over 1GB in size
35138;welp
35139;I have no idea how that happened lol
35140;it says response.Method is undefined. I know its wrong but what can i use for http.ResponseWriter to compare the incoming url with url i wish too ?
35141;oh
35142;```fatal error: all goroutines are asleep  deadlock!goroutine 1 [chan receive]:main.main() /tmp/sandbox251722582/prog.go:41 +0xd2```
35143;this is what your code doing
35144;You never close the channel
35145;Add buffer
35146;:P
35147;Prolly
35148;@Deleted User could you please have look at problem i just added a pic
35149;You need to close the channel when you are done with it
35150;@FuriousLad23 you'd want a graph data structure naturally
35151;This is making me mad.
35152;As with any other language
35153;you responding to me dusty?
35154;> use this code lmao> put it in code> it breaks everything> lmao add this
35155;@Pushpak you want it on request...
35156;Why are you checking the Method of the response
35157;That makes no sense
35158;yes it doesnt
35159;E
35160;but i want to check the url of repsonse
35161;Request?
35162;A response doesnt have a url
35163;how do i do that ? @Str≈ìm
35164;A response doesnt have a url
35165;@Str≈ìm could you please elaborate on that l cause like I said I'm new to Go
35166;@Pushpak your response writer is just called response and I think your getting confused with where and what you\'re looking for. I think you\'re after the request.URL.Path
35167;yes
35168;mostly
35169;i ill try that
35170;:)
35171;@FuriousLad23 this is not a Go specific issue. Dijkstra is a language agnostic algorithm
35172;It operates on graph abstract data types
35173;https://golang.org/pkg/net/http/#Request @Pushpak
35174;You need your data structure before you can decide what algorithm you need
35175;@Rin I'm nost sure what the rest of your code is like but you might want to use a WaitGroup and close the channel once all the goroutines have finished.
35176;So im assuming you have your data structure?
35177;Thanks I'll check what is WaitGroup.
35178;i think they're impling it for exercise
35179;It is in the sync package
35180;@Rin also check errgroup
35181;which is waitgroup but with error handling
35182;you'll get what I mean when you see waitgroup
35183;https://golang.org/pkg/sync#WaitGroup
35184;ayy got it
35185;I should prolly learn waitgroup for my mmo ahaha
35186;https://godoc.org/golang.org/x/sync/errgroup
35187;@Str≈ìm ok I have implemented Dijkstra in C++ there I used a set to perform all the required operations efficiently so I was looking for something similar in Go
35188;A map can act like a set
35189;set is just `map[T]struct{}` isn't it
35190;Basically
35191;where `struct{}` is an empty struct
35192;But maps don't have indexes do they?
35193;they don't
35194;maps have keys
35195;The index is the key
35196;as do sets
35197;Operations include finding minimum in O(log n)finding deleting elements by value
35198;I thought sets were indexed too
35199;Sets dont have finding minimum in O(logn)
35200;You can find minimum in O(n)
35201;> Sets dont have finding minimum in O(logn)@Str≈ìm In C++ they do
35202;@Dusty.P sets are just a bag of values
35203;@FuriousLad23 link
35204;https://github.com/tadvi/winc found a library i can use
35205;Either youre not being specific about what kinda set it is or something else
35206;this set?
35207;> Sets are typically implemented as binary search trees.
35208;http://www.cplusplus.com/reference/set/set/
35209;Hello everyone
35210;https://appliedgo.net/bintree/
35211;> @FuriousLad23 link@Str≈ìm http://www.cplusplus.com/reference/set/set/set.begin() gives the minimum value
35212;https://flaviocopes.com/golangdatastructurebinarysearchtree/
35213;So it's an ordered set
35214;Thats different to a standard set
35215;https://godoc.org/github.com/gyuho/bst
35216;Please be specific when taking about data structures
35217;I'm sorry my bad
35218;So basically that set is a balanced tree
35219;yupp
35220;Even better: use a min heap
35221;O(1) lookup of smallest value
35222;but then I can't search nodes by value required for dijkstra
35223;A min heap is again still a tree
35224;Apparently you can find minimum in O(logn) for anything with Binary Search...
35225;iirc optimized dijkstra utilizes a min heap
35226;Been a while since my algs classes but i remember that
35227;not sure about that
35228;I am sure about that
35229;I just googled it
35230;ok So is there an inbuilt min heap in go?
35231;Look what i found
35232;https://medium.com/@douglasmakey/simpleimplementationofdijkstrausingheapingofa6bea892909
35233;4th result for dijkstra min heap
35234;Go doesn't have a lot of builtin complex data structures
35235;I've noticed that contrary to C++ which has a fuck ton of data structures and those things in its stdlib Go only has a few
35236;on the other hand Go has a fuck ton of other stdlibs not related to data structure
35237;for example it has a library for image processing: https://godoc.org/image
35238;that said there are 3 of those data structure packages afaik
35239;https://godoc.org/container/heap https://godoc.org/container/list and https://godoc.org/container/ring
35240;Thanks folks üôè
35241;I did all the work really you're welcome.
35242;Nice one turtle
35243;Anytime sentry
35244;I dunno if you know but I'm kinda a big deal round here
35245;:HackerMan:
35246;oh talking of trees
35247;Seriously though you guys are great
35248;does anybody know of a library with the api of `b.Put(v1 v2 v3 ...)`?
35249;where each v descends a level?
35250;how do i check the http.ResponseWritter for the specific url ? ik the method function for a httpresponsewriteer doesnt exist but how can i achieve url routing ? ( without using any third party router i want to do it using stdlib router)
35251;Stop checking
35252;Response
35253;Response doesnt have a URL
35254;its just names repsonse
35255;Response doesnt have a Method
35256;named
35257;No
35258;It is the eventual response
35259;bro the type literally says ResponseWriter
35260;Stop checking it
35261;how is it just named response
35262;why do you thikn it\'s named response if it\'s just named response and not anything else
35263;so how do i check the url ?
35264;check `request`
35265;You know...the request
35266;> why do you thikn it\'s named response if it\'s just named response and not anything else@_diamondburned_ sorry I am a beginer forgive me
35267;"> check `request`@Str≈ìm request.Method gives me the method .. so for url i simply say request == /xyz""?"
35268;request.URL.Path
35269;i have the code working.. now to deamonize it and have it check for configs.
35270;None
35271;ignore my mouse
35272;How could you possibly ignore that mouse
35273;> request.URL.Path@_diamondburned_ Thank you !
35274;Awh man even when I do answer you still get thr credit @_diamondburned_
35275;Says my functions are undefined
35276;> Awh man even when I do answer you still get thr credit @_diamondburned_@misterturtle you too haha ! i know you answered the same thing before
35277;Ok at this point its worth just going through the tour from start to finish
35278;these are my funcs
35279;2 of them
35280;those are methods on a struct `urlHandler`
35281;you have to have a instance of urlHandler to use them
35282;Are channels and waitGroups are safe to use?
35283;Or it is a big NoNo?
35284;they're both threadsafe
35285;they're safe to use if you use them correctly sure
35286;So I am being dumb again.
35287;Send help.
35288;not dumb just asking tautological questions
35289;https://play.golang.org/p/tFGiaS7NsLY
35290;well for one
35291;You still aren't closing the channel
35292;you've got 3 channel writes
35293;and one channel read
35294;so
35295;that would deadlock
35296;so.. one thing that keeps bugging me. I understand that i can make a map with dummy values to essentially get a Set but why is there no Set construct in go?
35297;because generics
35298;but also
35299;because maps ARE sets
35300;or sets are maps
35301;sets are maps with no values
35302;where you don't assign a value to the keys
35303;right
35304;Hm
35305;all you care about is the presence of a key not associating a value to it
35306;It works with buffered channel.
35307;I cant rewrite as on mobile
35308;Well I'll give it a go
35309;lmao
35310;is it possible to get the caller as a function value using runtime reflect and/or unsafe?
35311;what a mouse lad
35312;Hm
35313;@superloach nope
35314;damn
35315;you shouldn't want to do that
35316;Sending second value to the unbuffered channel will rewrite first one?
35317;no
35318;nope they're all going into the channel
35319;one at a time
35320;only once per write
35321;a write will block until there is a corresponding read
35322;So with my spaghettis code I write 3 times but read only once. That's why it crash.
35323;Hey so i need to make a 512byte sized text file... I can make the file in golang no problem its more making it being exactly 512 bytes with random text
35324;So if I send N values to unbuffered channel i need to read N times right?
35325;actually nah im just gonna use UUID
35326;And buffered channel with N buffer allow me to read ONCE?
35327;Am I correct?
35328;@Merith have you considered...looping 512 times and writing a random value
35329;Really isnt hard
35330;meh
35331;good idea though
35332;just write 512 bytes?
35333;simple solutions are the best
35334;Its seriously elementary level stuff
35335;pls respond I am confused
35336;@Rin yes
35337;a write will block until there is a corresponding read and vice versa
35338;Thanks a lot.
35339;@Rin If I am understanding your code right what you want to do is have the goroutines append strings to `outputArray` and then later you want to read all the strings? If so try something like this https://play.golang.org/p/BFdkoHXeBqc might not be the best way but should work... (fyi the sleep is before the print because otherwise you might get a race condition and it prints before the last string is read from the channel. You can solve that in other ways though)
35340;> you shouldn't want to do that@deezy shhhh it's magic
35341;that's the problem yes
35342;I should make a pact with myself not to answer any of your Go questions tbh
35343;as a mean of telling you to not do it
35344;so generics would solve all of these limitations? I mean there are more advanced data struct that would be nice to have
35345;you can still write a set
35346;So far I have found it easy enough to just implement whatever datastructure I need for the problem at hand
35347;it's just not in the standard library
35348;most of my go questions at this point are could generics do this or how can I break the runtime so that\'s a fair enough decision @_diamondburned_
35349;Boog should only be able to ask questions to me
35350;:thinkingo:
35351;No one else is allowed to answer him from now on
35352;her
35353;and uhhh damn okay
35354;Oh I'm sorry. Her.
35355;@csgeek generics will make this stuff type safe
35356;no worries just correcting :)
35357;All of this is still possible
35358;But not compile time type safe
35359;don't talk to me or my daughter ever again
35360;I did wonder why you both had Doad in your name
35361;I'm doad 2
35362;electric boogaloo
35363;indeed
35364;or generic boogaloo
35365;Go 2: Generic Boogaloo!
35366;exactly
35367;Plus points if anyone can get that as the actual release name
35368;/ announcement header
35369;@Str≈ìm i see some collection projects around but they seem not very active.
35370;@Dusty.P Correct. You are the second guy who suggest to try range over channel. But I dont understand how it works and I never use the code I dont understand.
35371;Sure why would they be @csgeek
35372;or very hacky
35373;Once youve written the collections its not like they change very often
35374;ehhhh.. i dunno I used java for a good while... apache collections are still very active
35375;plus I dont undertand what is the purpose of this``` go func(c chan string) { for s := range c { outputArray = append(outputArray s) } }(ch)```
35376;Why do this in goroutine
35377;@Rin it works the same as a range over a slice except it just waits for a new value from the channel
35378;edit figured it out
35379;So it is locking if channel is opened?
35380;Wat
35381;Because if it isn't you would need to buffer the channel which you could do. Also I don't remember if you can close a channel before you read if it is buffered
35382;Rin lemme get my laptop out
35383;And I'll do a few examples for you
35384;Just making the fiance a coffee
35385;@Doad Sorry for the late response on you question to me but I don\'t hover over this channel. You may no longer care for an answer. I have not seen the code for the process but from my experience I would say that the new operator in go eventually does the sbrk call on the kernel and then the address from that is passed around functions that take address/pointer. The compiler has provided a memory space in the compiled code for the address to go during runtime. So the runtime code must get the address that is in the slot to locate the data. Then there is the runtime garbage collector that runs probably in its own go routine freeing any sbrked pointers that have 0 references to them. Your question was @James8880 what do you think the process of accessing that data is?[10:33 AM]
35386;Hm... Hard question now. What is more effective: buffered channels or range over unbuffered channel?
35387;If by locking you mean it waits and doesn't do anything until it gets a new value then yes.
35388;Which is more effective? it depends... In this case I would always range over the channel whether it is buffered or not.
35389;> If by locking you mean it waits and doesn't do anything until it gets a new value then yes.So how does Go understand if it should end RANGING ?
35390;The range will exit when the channel is closed
35391;when you run a test file are all exported functions automatically ran?
35392;But you are closing the channel after loop.
35393;That is why it is in a goroutine
35394;I don't wait for that goroutine to finish execution before continuing
35395;@beepsandboops if you mean `go test` it only runs the appropriately named test functions
35396;@beepsandboops No only Test functions are ran
35397;https://golang.org/pkg/testing/
35398;yes
35399;as clearly documented
35400;You should probably read this
35401;in the docs
35402;:thinkingo:
35403;I dont get it.
35404;So you run goroutine which locking itself while waiting.
35405;And in main you run close.
35406;Ok it will take a minute but I can type out a full workflow of what I wrote
35407;How do they correlate?
35408;Would be much appreciated.
35409;Range takes on different operations depending on what it's ranging over
35410;This avoids having 95 different keywords to do very similar things
35411;1. You create a waitgroup and channel2. Your code starts 3 goroutines that are added to the waitgroup and all write to the channel3. I start a 4th goroutine that is not added to the waitgroup and reads any value that is sent to the channel and appends them to the outputArray4. We wait for all of the goroutines that have been added to the waitgroup (your first 3) to finish5. Once all 3 goroutines are done we close the channel because no more will be written to it6. The goroutine I started sees that the channel is now closed so the range exits and the goroutine also exits7. We sleep for 1 second to prevent race conditions and then print out the outputArray
35412;is there an easy way to create a singleton constructor
35413;So basically when you send `close` from main goroutine  it closes channel wherever it is?
35414;Yep
35415;Thanks.
35416;When you close a channel it sends a special message to that channel telling everyone listening to it that it is now closed
35417;If you dont mind can you explain the difference between buffered and unbuffered channels?
35418;@Rin this is how I usually use channels https://play.golang.org/p/vbUBRmdNxML
35419;I'm fairly certain that's a normal way to do it but I'd be interested for someone else to weigh in
35420;Thanks.
35421;An unbuffered channel will only accept one value at a time any other attempts to write will block until that value is read from the channel.A buffered channel can accept the buffered number of values any writes after the buffer is full will also block until something is read.
35422;So the reason I pass the wg to the go routine is in my use cases I often process the output and then send more things onto the channel to be distrubuted to the go routines for processing. It's not in this example but I'd probably have a function that added something to the channel and called wg.Add(1) and that would be called from a go routine wanted to add more items for processing
35423;when the final item has finished processing the wg.Wait() stops blocking the main thread and the channel is closed
35424;But unbuffered channel can hold any amount of values?
35425;Wait.
35426;No
35427;:thinkingo:
35428;An unbuffered channel can only hold one value
35429;@misterturtle wouldn't you get a deadlock on the main thread because the channel never closes until after the range so the range never exits?
35430;In this case there is no deadlock on the main thread because the main thread is not ranging over any results
35431;Oh
35432;You aren't ranging over the channel
35433;So in your example you send me: that we got 3 strings by coincidence? In real life we should use buffer?
35434;No we got the 3 strings because as the value was getting written to the channel it was being read by the goroutine that I added
35435;Hmmmmmmmmmmmmm
35436;if i have `foo.go` and `foo_test.go` and `foo.go` imports something e.g. `fmt`  will `foo_test.go` need to also import that or should it have access?
35437;The goroutine I added just sits in the background and waits for a value on the channel and then reads it making the channel available again
35438;if the channel is buffered and that buffer fills you will not be able to write to it until it has space. So if you have some heavy computation in the threads consuming from the channel you may find your thread trying to send on the channel gets blocked
35439;as in this example
35440;https://play.golang.org/p/ieq4GWCQIc6
35441;I've set the number of threads to 2 and a 10 second timeout in each go routine.
35442;and the channel is now buffered
35443;Notice how it prints out Adding X to channel after each workload is complete? It\'s because the main thread is now blocking on sending to the channel because the channel buffer is full
35444;And if I have possibility that my goroutine finishes with delay? Like I launch 3 goroutines.1  coming in okay2 lagsThe reader is not fast enough to proceed the second request and 3rd goroutine returns the result tooWill it result in deadlock?
35445;No it won't deadlock the 3rd one will just have to wait to write until the 2nd one is read
35446;alot of deadlocks happen mostly with acquiring and releasing locks
35447;If you mean the 2nd one takes a long time to process after it is read it still won't deadlock you just might not get the 3rd value because the reader goroutine didn't have time to read it before the main thread exits
35448;But you can prevent that in other ways
35449;Bloody hell. Thanks mate.
35450;"okay... i know i am making a stupid mistake```PS D:\\_Workspace\\goautorun> go run .# goautorun.\\config.go:73:11: type AutoRun is not an expression``````gotype AutoRun []struct { UUID string `json:""uuid""` Action int `json:""action""`}func compareUUID(uuid string) { for k := range AutoRun { fmt.Println(AutoRun[k].uuid) fmt.Println(AutoRun[k].action) }}```"
35451;But say you start 3 goroutines1 and 3 finish quickly and get written to the channel and read out2 takes a long time but eventually gets written to the channel and then read
35452;You will get the values from 1 and 3 before you get the value from 2
35453;Hm...
35454;"Hey ! Is someone can explain and fix this custom trivial unmarshalling: https://play.golang.org/p/LLpEJ3LpSnGThis code should normally output: `Result {Metadata:{Hello: super World: hey""}}`Thanks üôÇ"
35455;@Merith because you didn't create an AutoRun. you're referring to the type. you want make()
35456;or rather
35457;maybe you want an argument to that function that is an Autorun value
35458;or i forgot to open and unmarshal json
35459;Mr deez is my go routine usage sensible? A colleague got a black hat go book and its http scanner launched a goroutine per url so...10s of thousands but my way seems neater.
35460;its called fanin fanout in both cases @misterturtle
35461;fyi unbuffered channels cannot hold any value
35462;10k workers or 10 workers is just an implementation detail
35463;https://blog.golang.org/pipelines
35464;take X units of work and fan out to Y number of worker goroutines
35465;"Interesting from a resources point of view is 10k go routines a...""worse practice"
35466;maybe
35467;¬Ø\\_(„ÉÑ)_/¬Ø
35468;If they were threads then yes...
35469;Green Threads... :blobshrug: It depends
35470;all http requests are on seperate goroutines by default
35471;for instance
35472;it just depends on a lot
35473;cpus performance how much work each one is doing how much work is coming in how fast you can fan in how long workers are sleeping etc
35474;Ok cool I guess the problem is 10k is a conservative estimate discovery wordlists could be 70k easy
35475;its a benchmark thing
35476;Yeah maybe I'll do a bit of a test tomorrow
35477;I have a client with UAT behind a load balancer so not much bottleneck on the backend
35478;youre basically just saying for each thingy process it concurrently
35479;and that just happens to be 70k thingies
35480;but you could easily say have 100 workers that you fan out into
35481;that process ~7k words each
35482;Yeah ffuf a respectable go tool uses 200 as a default
35483;what is the official
35484;library
35485;for desktop apps
35486;in GO
35487;there's none
35488;there isnt one
35489;goodluck with any of them
35490;woot
35491;wat
35492;https://play.golang.org/p/60SFiP1iPH9shouldn't these be returning the same address?
35493;so I still don't know where in my code I've caused this memory issue. Apparently it's using over 1gb of memory?
35494;heap profile it
35495;what's that
35496;Where are you getting that figure from @Deleted User
35497;someone told me after I posted the trace
35498;Thats informative
35499;Where in the trace did they get it
35500;idk let me repost
35501;None
35502;Hey! Is someone can explain why this isn't working https://play.golang.org/p/LLpEJ3LpSnG ?
35503;Top line `runtime: goroutine stack exceeds 1000000000byte limit`
35504;I tried having my crud functions as methods on a transaction like dia suggested but I must've messed it up
35505;Ahh theres your problem
35506;show code
35507;https://github.com/TinyTophy/gobot/tree/dev/bot here's the repo
35508;not sure where the issue is exactly
35509;bruh
35510;but likely has to do with bot.go database.go and postgres.go
35511;wut
35512;it's in the trace but I'll read it for you
35513;```gofunc (tx Tx) Commit() error { err := tx.Commit() return err}```
35514;this is calling itself
35515;https://play.golang.org/p/eHPcw7sIDKZwhy are these returning different addresses? please ping if you respond
35516;Line 37 postures.go?
35517;oh
35518;you're supposed to do `tx.Tx.Commit()`
35519;That's a lot of recursion on that trace
35520;or just remove that method altogether
35521;"you don't need that method; it's redundant"
35522;but
35523;jesus
35524;somehow I always end up with import cycles
35525;:how:
35526;did you look at my smolboard or was it someone else?
35527;If I define the transaction as a struct in my bot package and I define the methods on it in my postgres package then there's a cycle. If I define the methods on it in the bot package then I'm just doing datalayer stuff in the bot package.
35528;I did
35529;note how I have all my smolboard structs in its own package
35530;so even database?
35531;`smolboard.Token`
35532;`smolboard.Permission`
35533;wdym even database
35534;well someone posted a go package layout guide a while back that said you should organize by dependency. So I defined database an interface in the bot package and then go to implement it in the postgres subpackage.
35535;well yeah that's my db package
35536;Smolboard is now my favourite go to project for figuring out how the hell I'm supposed to structure a project
35537;So nobody could help me with my unmarshall problem ? üò≠
35538;the problem is that I want the bot to have a Database which is just an interface with all the services. But if I do this and avoid import cycles I can't access the attributes from outside the package.
35539;like I can't do tx.Tx.Commit()
35540;`tx.Tx undefined (type Transaction has no field or method Tx)`
35541;i don't get what you mean
35542;package postgres shouldn't import package bot
35543;so what's the issue
35544;@beepsandboops lemme check your code 2 sec
35545;It doesn't
35546;https://play.golang.org/p/YPhdPBfRRcm @beepsandboops fixed
35547;but how do I access the stuff I want from the Tx struct defined in postgres from the bot package when it implements a Transaction interface defined in bot
35548;you\'re already embedding sqlx.Tx so its Commit method gets inherited over
35549;@Str≈ìm could you explain what has changed
35550;@beepsandboops checkout the print statement
35551;Compare the whole line
35552;but my compiler says it's undefined
35553;`bot/bot.go:81:4: tx.Tx undefined (type Transaction has no field or method Tx)`
35554;@Deleted User you shouldn't be using a Transaction interface that is defined in bot in one of bot's dependencies
35555;but
35556;did you take the first link or second link from me?
35557;Pointer to a pointer?
35558;i have no idea what code you have
35559;post it
35560;Second
35561;You were taking pointers to pointers
35562;```gopackage bottype Database interface { BeginTx() (tx Transaction err error)}type Transaction interface { GuildService ModMailService MemberService QuoteService RankService ReactionRoleService RoleService UserService}```
35563;Each pointer to a pointer is a new pointer
35564;Hence each had a new address
35565;Why not move the database.go and all the postgres stuff to a database dependency
35566;and then in postgres:```gotype Tx struct { Tx sqlx.Tx}```
35567;well the guide that I saw said I should define the interfaces that bot needs in the bot package and then do the implementation in a subpackage
35568;as in i was looking at the pointer of test1 rather than the pointer of test1's value?
35569;Yes
35570;test1 is already a pointer
35571;i see
35572;okay go ahead and tell me how i can improve my code...
35573;"https://pastebin.com/bijW4wVx < main.gohttps://pastebin.com/6Sxt5GAm < config.go```json//test.json[ { uuid"":""12f0622372594a26b73537d714a6171b"", action"": 3 }]```"
35574;But bot doesn't need that the database logic does
35575;is it possible to see the address of the underlying values here somehow then? https://play.golang.org/p/60SFiP1iPH9
35576;???
35577;What underlying values
35578;@Deleted User add Commit into the interface
35579;well I want the bot to require some way to do all the crud
35580;Why not have all the crud in a dependency that is called from bot?
35581;abstract it away
35582;i don't even know what you're trying to do anymore
35583;if test1 test2 test3 are all {10 10 10} is it possible to see the address of the value they are looking at now or is it just a value?
35584;i'm terrible at trying to formulate questions to get my ideas across
35585;They are the address of their values
35586;Or rather the address to the first byte of their values
35587;Ok. I'm trying to have an interface that has all the crud operations the bot needs as a blueprint defined in the bot package. Then there will be an implementation of these functions as methods on a transaction in the postgres.
35588;test1 is the address of where the field a in foo starts
35589;That doesn't make sense to me...
35590;why do test1 test2 test3 have different addresses here then? is theInstance.instance being copied or something?
35591;someone posted the guide here
35592;let me find it
35593;the way i've understood it in my head is &test1 is the address of test1 not the value of test1
35594;test1 2 and 3 have the same address
35595;Theyre all the same pointer
35596;in the most recent link?`0xc00012c000 0xc00012c040 0xc00012c060`
35597;&test1 &test2 &test3 have different addresses because theyre all different pointers to the same pointer
35598;As i already highlighted after i sent you a link
35599;ok i think i got it
35600;how can i grab the address of the {10 10 10} part
35601;test1 2 and 3 are the address of that
35602;https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1
35603;here it is
35604;https://play.golang.org/p/YCHWGBWr7QT
35605;so like this guide I put my service interfaces in the bot package with the model types
35606;test1 2 and 3 are different objects here @beepsandboops
35607;Yeah a transaction isn't a domain type. Domain types are `It‚Äôs the stuff that doesn‚Äôt depend on your underlying technology.`
35608;Because youre returning `foo` which is a value type
35609;`your domain involves things like customers accounts charging credit cards and handling inventory`
35610;Aka it is copied on each return
35611;ok
35612;so i'd need to return a pointer and dereference it to do it properly?
35613;`In this approach to package layout subpackages exist as an adapter between your domain and your implementation.` A Transaction is an adapter between your bot and your database
35614;Dereference to do what
35615;ok so I can move transaction to the postgres package but what about Database
35616;I would move that to postgres too...
35617;I would acutally rename postgres to database
35618;But that is a naming choice
35619;my thoughts were `return foo` but then i realised that probably wouldn't work and that's why i made the wrapper in the first place... so the solution is the return a pointer to the wrapper and then grab the values within it?
35620;If you want
35621;is there an alternative?
35622;not using singletons?
35623;The Database is an implementation detail that you may want to change later. So abstracting it allows you the ability to change the underlying db without having to rewrite all your code
35624;I dont get the point of what youre trying to achieve here
35625;to create a singleton
35626;singletons are just a way to cheat yourself out of passing a parameter down through your call stack
35627;it's a toy project
35628;¬Ø\\_(„ÉÑ)_/¬Ø
35629;hmm
35630;yeah i suppose i could subdivide into another layer and pass the param
35631;why do you ned this wrapper for a singleton
35632;so I've abstracted it by having each model's service interface in the bot package so should I just have a bot require each service individually @Dusty.P ?
35633;i'm playing around with writing a unit test and don't want to keep making the same compiled regexp object
35634;thats not what i asked
35635;are you familiar with t.Run()
35636;nope
35637;specifically for regexp.Regexp you can just use a global for it
35638;since it's pretty much almost always compiled from a constant
35639;"```gofunc Test_Whatever(t testing.T) { pat := regex.MustCompile() t.Run(""testcase1 func(t testing.T) { pat.Whatever(""butts"") if pat.Thing() { t.Fail() } })}```"
35640;i'm not sure if you can actually call MustCompile at the package level
35641;so that's adding a closure?
35642;if you can that's certainly an option
35643;not a closure
35644;as a global var yeah
35645;a uh
35646;higher order function
35647;```gopackage mainvar wordRegex = regexp.MustCompile(`\\w+`)```
35648;oh nice
35649;yeah
35650;easy
35651;> so I\'ve abstracted it by having each model\'s service interface in the bot package so should I just have a bot require each service individually @Dusty.P ?@Deleted User Not sure what you mean by each service
35652;like if you look at that article it has the interfaces with crud functions defined in the root dir
35653;so for example I have ```gopackage bottype Member struct { ID string Warns int XP int Quotes []Quote Roles []Role}type MemberService interface { AddMember(Member) error GetMember(string) (Member error) GetAllMembers() ([]Member error) UpdateMember(Member) error RemoveMember(string) error}```
35654;i think the constant idea probably fits better
35655;singletons are idiot proofing
35656;and idiot proofing is
35657;something with VERY bad diminishing returns
35658;are you able to run the `t.Run` names from cli?
35659;the justification for a global regex variable is that the regex is compiled from a constant
35660;it's a pure function
35661;a database connection is not pure
35662;just use the package level variable
35663;it's fine for a regex
35664;right but when i ask such questions i'm not thinking about just regex but future implications also
35665;> like if you look at that article it has the interfaces with crud functions defined in the root dir@Deleted User That is fine those are domain interfaces. Then each of those would call the database package to do their crud
35666;the regex is just my toy project
35667;so then instead of ```gotype Bot struct { Token string Prefixes map[string][]string Database Database Cogs []Cog Router Router}``` Should database be replaced with just all the service interfaces?
35668;What do you use `Bot.Database` for?
35669;well I wanted a bot to need all of those services
35670;and to call db functions from
35671;in the bot package
35672;ü•¥
35673;How would you implement say the `MemberService`?
35674;I still have no idea what you're trying to do lol
35675;Well I already have some of the implenatations for a guild service
35676;"```gofunc (tx Tx) AddGuild(g bot.Guild) (string error) { rows err := tx.Query( insert into guild (id msg_xp level_msg muterole_id) VALUES ($1 $2 $3 $4) on conflict do nothing returning id"", g.ID, g.MsgXP, g.LevelMsg, g.MuteroleID, ) var insertID string if err != nil { return insertID err } for rows.Next() { err = rows.Scan(&insertID) if err != nil { return insertID err } } return insertID err}``` here\'s the add"
35677;hmmm
35678;ugh Im still gonna have an import cycle cus the db package has to import bot for the models
35679;Then I would say for```gotype Bot struct { Token string Prefixes map[string][]string Database Database Cogs []Cog Router Router}```it should be ```goDatabase postgres.Database```
35680;No you don't need to import the bot for the models
35681;@_diamondburned_ essentially all I'm trying to do now is get my bot so it's structured like that article wants and has crud methods on transactions
35682;> No you don't need to import the bot for the modelsbut they're defined in the bot package?
35683;split them out bruh
35684;if a type can be []string or nil how do i create a struct to reflect that?
35685;split the models out into another package and give the package a meaningful name
35686;don't call it models
35687;wait
35688;but then that's not the format from the article
35689;@beepsandboops slice can already be nil
35690;So... just have a slice
35691;a User for example is a domain type
35692;so shouldn't it be in the root package?
35693;huh... The example in that article will have a dependency loop lol
35694;wdym it's not the format of the article
35695;wait i need the link
35696;?go layout
35697;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
35698;he defines a user and user service in the root package
35699;None
35700;your bot package shouldn\'t be the root package
35701;Yeah`The root package should not depend on any other package in your application!`
35702;it should at best only has the User stuff
35703;it should not have the discord sessions
35704;Wait so what should the root be then? I'm beyond confused now.
35705;just the user and user service
35706;it's fine this takes time lol
35707;and it shouldn't be used as a full guide
35708;it should only be used for reference for ideas
35709;So should all my models and services go into the root package and then have bot as a subpackage??
35710;`slice can only be compared to nil` i don't understand this
35711;```nameofbot/ cmd/ bot/ main.go packages/ postgres/ all the postgres stuff domain stuff```@_diamondburned_ like this?
35712;kind of
35713;I'd do sth like
35714;```botname/ db/ postgres/ # optional driver.go crud.go discord/ botstuff.go main.go```
35715;https://play.golang.org/p/fLa8uCyDYsnwhat\'s the proper way to compare slices?
35716;loop through them
35717;i have to test for nil too then since i can't loop over nil
35718;sure
35719;len check first
35720;then loop
35721;also you can range over a nil slice without crashing
35722;it just wont do anything
35723;None
35724;does this work?
35725;oh I should move db out
35726;ehhh???
35727;not sure what that cmd/ is for
35728;there's no main in it
35729;cmd is used for compiling binaries
35730;Multiple subdirectories in cmd will produce multiple binaries
35731;well cmd is nothing but a convention
35732;I do not understand
35733;lol
35734;there's no go magic treating cmd/ specially
35735;so should I just not have it?
35736;@Deleted User why do you have a cmd/ is what I mean
35737;yeah you don't need it
35738;your main package is at project root
35739;ah ok
35740;so like this
35741;> there's no go magic treating cmd/ specially@_diamondburned_ True I got it from https://github.com/golangstandards/projectlayout
35742;if I do it like this aren't the models/services then defined in the main package and then if so do I have to import them in the db package?
35743;Yes but you don't import the db package in the main package so it is fine
35744;can you like
35745;run `tree`
35746;lol sorry
35747;it's really hard for me to read that pic since it's not indented enough
35748;Yeah vscode's directory structure is really weird
35749;```.‚îú‚îÄ‚îÄ bot‚îÇ ‚îú‚îÄ‚îÄ bot.go‚îÇ ‚îú‚îÄ‚îÄ cog.go‚îÇ ‚îú‚îÄ‚îÄ cogs‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ misc‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ commands‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ greet.go‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ ping.go‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ misc.go‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ modMail‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ commands‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ handlers‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ modMail.go‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ reactionrole‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ commands‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ rr.go‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ handlers‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ on_reaction_add.go‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ on_reaction_remove.go‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ reactionrole.go‚îÇ ‚îî‚îÄ‚îÄ router.go‚îú‚îÄ‚îÄ database‚îÇ ‚îú‚îÄ‚îÄ database.go‚îÇ ‚îî‚îÄ‚îÄ schema.sql‚îú‚îÄ‚îÄ gobot‚îú‚îÄ‚îÄ go.mod‚îú‚îÄ‚îÄ go.sum‚îú‚îÄ‚îÄ guild.go‚îú‚îÄ‚îÄ LICENSE‚îú‚îÄ‚îÄ main.go‚îú‚îÄ‚îÄ member.go‚îú‚îÄ‚îÄ modMail.go‚îú‚îÄ‚îÄ quote.go‚îú‚îÄ‚îÄ rank.go‚îú‚îÄ‚îÄ reactionRole.go‚îú‚îÄ‚îÄ README.md‚îú‚îÄ‚îÄ role.go‚îú‚îÄ‚îÄ tests‚îÇ ‚îî‚îÄ‚îÄ dao‚îÇ ‚îî‚îÄ‚îÄ guildDaoTest.go‚îî‚îÄ‚îÄ user.go13 directories 28 files```
35750;I'd put router in its own package
35751;@_diamondburned_ https://play.golang.org/p/b7aig09ZUfg is this alright or is there a better way that you'd suggest?
35752;then I'd move everything in root that's not main.go into bot/
35753;the idea is to
35754;well
35755;the idea is to have main link everything together but not contain everything
35756;for example here's my bot
35757;in your case ctx would be the router state
35758;`kv.Node` is passing in a databases
35759;@beepsandboops put it in a fn
35760;just return a bool
35761;anonymous func?
35762;nah its own global named fn
35763;but if I put those models/services back into bot then I just have the import cycle again cus the db needs the models and the bot needs the db
35764;thonk
35765;now this is a moment
35766;yeah ignore my bot's thing then
35767;it follows a slightly different layout
35768;i'm honestly not sure lol
35769;ig do like
35770;Maybe by the time Im 40 I'll start writing actual bot functionality lol
35771;tbf we're all being pedantic here
35772;I'm gonna be doing the package layout for ages
35773;``` main.go # join all db CRUD stuff into the router bot/  router/  router.go  bot.go # contain user and userservice  db/  db.go # contain crud stuff that implements userservice```
35774;note that router does not import either bot or db
35775;it's a generic router package
35776;what connects router and db together is main
35777;the problem youre having which is solved there is that the bot package IS your entire module. Your domains are the domains of the bot
35778;^
35779;like `guilds` would be a domain
35780;or `chat`
35781;and your db is just another domain there
35782;or `rankings`
35783;what handles all the shit to do with rankings
35784;your `bot` is not a domain
35785;well i could be
35786;if it was just one part of a larger system
35787;like say a website that had a bunch of functionality to interact with the bot
35788;yea cus the bot is really the whole app
35789;like mee6 does or whatever
35790;you could have a `bot` domain and a `web` domain
35791;I could have a web interface later but as of right now this is just a bot
35792;and each of those would be seperated into specific domains
35793;and then all of the stuff that article says will fall into line perfectly
35794;domains really just means context seperation
35795;if everything in your package is in the bot context
35796;then that is your package
35797;so should all the models be in the bot package then?
35798;if they operate on the bot level context
35799;something like a user sure
35800;but something like modmail
35801;would be specific to the modmail domain
35802;you dont need to know about modmail in the `rankings` domain
35803;for instance
35804;but you probably need to know about a user
35805;"if you have a func that returns a bool is it ok practice in Go to `if foo() {}` or do you expect `if ok := foo(); ok {}` ?"
35806;the second seems wierd
35807;well technically all of those things are attributes of a larger guild domain. The bot has guilds and users and the guild has a modmail channel quotes ranks members
35808;its like `if foo == true`
35809;sure
35810;right the second is for multiple return values?
35811;like i said its about context seperation
35812;if all your things operating in a guild context
35813;then a guild would be a top level type
35814;@beepsandboops depends
35815;if you don't need ok then first works
35816;yeah it depends
35817;yea I think there are only guilds and users at top in my app
35818;okay
35819;guys why errcheck complain about defer file.Close()
35820;because Close() returns an error
35821;just ignore it lol
35822;well
35823;top under bot
35824;yes but your bot is your entire app
35825;errs from file.Close rarely matters
35826;right
35827;the bot is your highest level context
35828;where your highest level types go
35829;does that clear it up for you
35830;A little
35831;but I'm sure it will become unclear very quickly when I start to move files around
35832;"can someone point me in the right directioni\'m trying to `t.Logf(""%v output)` but the output has `nil` in there somewhere... do i need to change the verb or function?"
35833;just to give a different example in a webapp im working on:the entire context of the whole package is this webappso i wanted to implement an auth systemso everything related to the auth context/domain is in the webapp\\auth packagein another package i want every route in there protected by authso i just import auth.ProtectedRoute middleware in that packageand that package doesnt have to know anything else about auth
35834;oh i just found out what the issue was... the output itself was nil since it was a pointer...
35835;but remember all this shit is all just guidelines on how to do things
35836;your app could easily be a flat structure
35837;so if I wanted to have a bot and a web interface that each interact with a db (whose implementation they are both agnostic about) the structure would be two packages or a third for the db?
35838;> your app could easily be a flat structurelike just everything in the main
35839;yeah so you would have something\\bot\\web\\dband you just give your bot and web a database to work with
35840;pointers are such a headache |:
35841;it obviously gets more complicated the larger the app is
35842;something of that scale is harder to explain in text here
35843;and in that scenario where would the models and service interfaces be?
35844;wherever their context is
35845;the bot and web probably would have different contexts
35846;so you probably wouldnt have many similar structs
35847;a user in the web side might literally be an id and a few bits of metadata
35848;where a user in the bot might be a whole bunch more
35849;> > your app could easily be a flat structure> like just everything in the mainyes
35850;yea but that would be a pain to navigate
35851;not really
35852;I would probably be doing bot functionality by now tho
35853;for some 500+ file thing sure
35854;but 2030 files its easy
35855;well
35856;you see a TON of golang packages like that
35857;my bot is gonna be quite large
35858;not 500
35859;maybe 100
35860;https://github.com/spf13/cobra
35861;for instance
35862;but even here
35863;this is all the same domain
35864;but i got to go do homework
35865;so
35866;o/
35867;I gotta sleep
35868;lol
35869;thanks tho
35870;you can look at 6cord
35871;https://github.com/diamondburned/6cord
35872;as a prime example of that
35873;I hilariously stretched the definition of everything in one package
35874;bruh
35875;how many chat clients have you wrote at this point
35876;about 10ish
35877;this is the first though
35878;> 6cord has been deprecated in favor of gtkcord3. Important bugs may not be fixed but PRs are still welcomed.
35879;how dare u
35880;So i noticed an issue wiht my code. the GUI library always returns false when i do `btn.Checked()` which returns a bool
35881;"```gobtnPersist := winc.NewCheckBox(mainWindow)if start !=  { btnPersist.SetPos(10 175) // (x y)} else { btnPersist.SetPos(10 110) // (x y)}btnPersist.SetText(""Remember?"")persist = btnPersist.Checked()```"
35882;`persist bool` in my var block
35883;fun fact: gtkcord3 is also deprecated
35884;in favor of something else
35885;https://github.com/tadvi/winc/ < gui library im using
35886;@Merith well my guess is that the button isn't checked when you create it
35887;In that code you're just checking that it's checked right after you make it
35888;Not by defualt but when i do check it nothing happens
35889;oh
35890;are you polling for its state?
35891;nope
35892;that would be why
35893;yeah you\'re checking if it\'s been checked immediately after creating it
35894;Yeah makes sense
35895;"Hi. why am I getting this error?```gofunc ExtractImage(body io.Reader) (imgURL string err error) { doc err := goquery.NewDocumentFromReader(body) if err != nil { return  err }  // works imgURL =  doc.Find(""meta"").Each(func(i int s goquery.Selection) { if name _ := s.Attr(""property""); name == og:image { // imgURL declared but not used imgURL exists := s.Attr(""content"") if exists { return } } }) return imgURL nil}```"
35896;and that fixed it...
35897;ok i think i need something fundamental cleared up
35898;https://play.golang.org/p/JELB0LagUciwhy would you return a pointer instead of nonpointer
35899;@// todo youre overwriting the variable
35900;shadowing it
35901;@// todo Because `imgURL` is only defined in the inner scope if you remove the first definition. And it isn't used in that scope
35902;Ok. So is there a cleaner way of doing```govar exists boolimgURL exists = s.Attr(..)```
35903;@Merith you probably only want to check it in the `OnClick` method so you're not constantly polling it
35904;@// todo that seems fine to me
35905;Yeah it isnt too bad
35906;Nah i have it set to when i check it and then click one of the buttons it works fine
35907;"```go// This for three buttons one wrapped in an if check btnNothing := winc.NewPushButton(mainWindow) btnNothing.SetText(""Do Nothing"") btnNothing.SetPos(10 60) // (x y) btnNothing.SetSize(100 50) // (width height) btnNothing.OnClick().Bind(func(e winc.Event) { persist := btnPersist.Checked() autoExec(2 persist) })func autoExec(choice int persist bool) { start _ _ := autorunInf() fmt.Println(persist) if persist == true { createJson(autorun[k].UUID) } switch choice { case 1: _ _ = exec.Command(""explorer.exe drive).Output() winc.Exit() case 2: winc.Exit() case 3: _ _ = exec.Command(drive + start).Output() }}```"
35908;Yeah that's what I meant
35909;The `OnClick` method
35910;i'd appreciate if someone could answer i've not got much laptop battery left so that's my last question
35911;üëç
35912;@beepsandboops when you want to return a pointer
35913;lol
35914;...
35915;If something returns a pointer the caller doesn't need to convert it to one
35916;if something is always going to be used as a pointer it's best to do that
35917;like in the case of types with pointer receivers on methods
35918;and what if there are no pointer receiver methods
35919;You likely don't need a pointer to the type
35920;does it boil down to pointer receivers there?
35921;Not always
35922;so what else should be considered
35923;If the type instance should pretty much never be a copy
35924;and always should be a reference
35925;it makes sense to only return pointers to it
35926;ok and never be a copy vs reference
35927;what reasons would you opt for that
35928;If you just need a reference to something
35929;and not a value
35930;if something is passed around a lot it's more efficient as a pointer?
35931;don't worry about efficiency
35932;If you need an instance to something and it's going to be referenced use a pointer
35933;If you don't need to reference a particular instance go with a value
35934;i'm getting lost in the jargon
35935;If you need a reference use a pointer. If you don't don't use a pointer
35936;ezpz
35937;future planning though
35938;for what
35939;what do you mean by need a reference?
35940;if it needs mutations to be done on the same value
35941;^
35942;mutations being changes
35943;ok let's use a db query as an example
35944;you query the db and you get a result object
35945;is that result object going to be a ptr?
35946;no
35947;querying to receive a user value should not be a pointer
35948;it came from the DB
35949;querying onto a user value should be a pointer
35950;"Can someone please help me with structs? How I can declare Technical as dynamic items? ```type AutoGenerated struct { Technical []struct { Techname22 string `json:""techname22,omitempty""` Techlocation string `json:""techlocation,omitempty""` } `json:""technical""`}````"
35951;you're not going to have a pointer to some field in the DB
35952;doesn't make sense
35953;receive: `func Query() (User error)`into: `func Query(user User) error`
35954;ok so why is the into using a ptr?
35955;i think if i crack this i'll understand pointers better
35956;because it's changing the given user value
35957;It is writing into the db
35958;"^ it's not; both of these functions are for getting a user"
35959;but they have slightly different usages
35960;say I have this code
35961;Oh
35962;I get it now
35963;"```govar user = User{Name: diamond""}if err := Query(&user); err != nil {}```"
35964;assuming Query does NOT error out my `user` will now contain the queried user
35965;in other words the Query function changed that user variable's underlying field values
35966;`Query()` returns a new object`Query(&user)` gets the user data from the db and writes it into an existing user object
35967;^
35968;like an in place op?
35969;Yeah
35970;so it's like saying use this template
35971;not necessarily
35972;No it's saying replace the data in this object with the data you get from the db
35973;using the existing user value for anything is an impl detail but it's not related to the code I made
35974;think json.Unmarshal
35975;the same thing
35976;you pass a pointer in
35977;The object could have something in it already that you are overwriting or it could be empty and you are putting new data into it
35978;so needing a reference means what exactly? writing? reading?
35979;"uhm itty bitty question how do i append data to json array?```gotype AutoRun []struct { UUID string `json:""uuid""` Action int `json:""action""`}``````json[ { uuid"":""12f0622372594a26b73537d714a6171b"", action"": 3 }]```"
35980;let's say you have a package that returns some object Foo{a,b int}
35981;you decide that it's best to use a pointer because you can reuse the struct?
35982;understand that Go (and C and a few other languages) pass parameters in by copying its value
35983;that's why pointers exist: although pointers are copied its location still points to the same value
35984;but what about if the fields are filled dynamically and it can fail and thus return nil... this could be considered bad and you'd rather have Foo.value or whatever
35985;huh?
35986;return nil?
35987;bad how?
35988;I don't get it
35989;@Merith That `AutoRun` is a slice of structs so what you would do is take your json string and `json.Unmarshal` it into a struct and then append that struct to the slice.
35990;you also have to separate that struct away into a named type
35991;Yeah
35992;"```gotype Action struct { UUID string `json:""uuid""` Action int `json:""action""`}type AutoRun []Action ```Something like that"
35993;ye
35994;`type Action struct {` but yeah
35995;Although probably with a different name
35996;That's what I get for copypasting lol
35997;nah i'd copypaste too
35998;I just didn't copy enough lol
35999;uhm... confused a little
36000;I need to beable to append to the json string
36001;i'm wondering now if my code is doing something fishy
36002;i'll start over tomorrow
36003;thanks everyone
36004;because right after it appends its goings straight to a file
36005;feel free to refer back to this conversation
36006;If you need to append to the string then you need to append to the slice of structs and then marshal that back into a string
36007;@Merith unmarshal add then remarshal ^
36008;its that middle step im stuck at
36009;Honestly Json is a pain to deal with in any language other than JS since it is added in by libraries rather than being baked into the language like in JS
36010;do what dusty did and just `autorun = append(autorun Action{UUID:  Action: 0})`
36011;etc
36012;assuming `var autorun AutoRun`
36013;Once you change to using a named type for the struct like in the example I posted It should be easy to just create a new `Action` and append it to the slice
36014;`fmt.Println([]string(nil) == nil)`how come this is true?
36015;youve just turned nil into a []string
36016;so nil of []string is..nil
36017;Because slices can be nil
36018;ok some output of `%#v` that i have is showing []string(nil)
36019;so that's not really casting
36020;is that saying it's supposed to be []string but it's actually nil?
36021;It's of type []string and of value nil
36022;^
36023;This is not JS or smth. nil is not it's own type
36024;"```govar foo []stringfmt.Printf(""%#v\ foo)```so it\'s like doing this?"
36025;Yeah
36026;https://play.golang.org/p/AIsp5V4oBvY
36027;shouldn't that be a zero value though?
36028;It is
36029;a zerovalue of a slice is nil
36030;oof
36031;ok time to turn off the laptop. thank you guys.
36032;```goslice == nillen(slice) == 0```Both are true for an empty slicehttps://play.golang.org/p/36diwMWWFC3
36033;what's the better practice to test against?
36034;len?
36035;I always use len
36036;ok thanks
36037;if anyone wants to message me please ping i'll check in the morning
36038;üëã
36039;got it so i just need to marshal and write to file
36040;but i know how to do that
36041;yes!
36042;it worked
36043;can someone help me with structs?
36044;ask away
36045;"I have this kind of structs  ```type MetadatumToSync struct { Fn int `json:""""` Property string `json:""property""` Value Values Type string `json:""type""`}type Values struct { Technical []struct { Key string `json:""key""` Value string `json:""value""` } `json:""technical""` Audio []struct { Key string `json:""key""` Value string `json:""value""` } `json:""audio""`}````"
36046;The question is how I can make the Technical Audio and Their key values Dynamic?
36047;"And I would like the Value of MetadatumToSync to be like this  `{""technical"":[{""techname1"":""techvalue1""},{""techname2"":""techvalue2""}]}`"
36048;looks like you want a map of sorts
36049;How I can do that?
36050;I think that's an array of maps
36051;`[]map[string]string`
36052;its a map of arrays of maps
36053;the surrounding object is already the Values struct
36054;ah
36055;So how I can have Array of Technical but I dont care if inside of it is key value or whatever?
36056;I just know that in one array object will be two items
36057;If you don't know the keys beforehand I reckon you'd be better off using `interface{}` to represent the object in your `Technical` slice
36058;Or better yet `map[string]interface{}` / `map[string]string`
36059;Well I am total noob with Go üòÑ
36060;Since you show on your example that the object will be a key (string) along with a string value go for `map[string]string`
36061;So
36062;(sec)
36063;"```gotype Values struct { Technical []map[string]string `json:""technical""` Audio []struct { Key string `json:""key""` Value string `json:""value""` } `json:""audio""`}```"
36064;Well I dont want the key key and value value
36065;Ok what this does?
36066;"This would parse the following JSON correctly```json{""technical"":[{""example"":""value1""},{""example2"":""value2""}]}```"
36067;(omitted `audio` for clarity)
36068;You can then iterate on the parsed struct this way:```gofor k v := range obj.Technical { // do something with k v}```
36069;`k` being `example` and `example1` and `v` being `value1` and `value2` for the JSON example I provided (and for each iteration)
36070;Does that make sense?
36071;Yes
36072;Ok I have another question
36073;what this does?
36074;filteredMetadata := make(map[int][]map[string]Values)
36075;https://github.com/MerithTK/goautorun
36076;From the go docs: `make`: `it returns an initialized (not zeroed) value of type T (not T)`
36077;So filteredMetadata in this case would be a map with keys being integers and values being (slices of maps with keys being strings and values being Values structs)
36078;so I have a format that seems to work
36079;although
36080;for some reason now my load schema function is doing nothing
36081;@rdnt Ok thanks
36082;This is still too big mystery for me to solve already written go code üòÑ
36083;"```gofunc LoadSchema() (Database error) { schema err := ioutil.ReadFile(""database/schema.sql"") if err != nil { return nil err } db err := sqlx.Connect(""postgres os.Getenv(""POSTGRES"")+""dev"") if err != nil { return nil err } db.MustExec(string(schema)) return &Database{db} err}``` it can\'t seem to get past the must execute"
36084;None
36085;If the code is not self explanatory whoever wrote it probably didn't do a good job üòâ
36086;is it giving you a panic or error
36087;neither
36088;it just sits
36089;doesn't do anything
36090;it builds but when I run it it just sits there
36091;I am not sure how to help with that @Deleted User  but you probably want to return `&Database{db} nil`
36092;(err will be nil from last declaration of it (since it didnt return on error check) but it's better to be explicit))
36093;ye
36094;I'm super confused cus I'm able to connect to the db in pgadmin
36095;and if I couldn't connect it should panic
36096;the code you provided establishes a connection executes the schema and returns a pointer to your database struct
36097;ye
36098;Does it get stuck right before the final return?
36099;yea it get's stuck on the must execute line
36100;where it tries to execute the schema
36101;ok now I'm having some trouble connecting on pgadmin
36102;maybe my db is fucked
36103;How long did you wait and how big is your schema?
36104;the schema isn't so big I posted above and I waited a minute. But it's run before in a few seconds.
36105;ima restart my vps
36106;I need to switch to like digital ocean or something
36107;ovh is slow
36108;schema definitely is not a problem (just tested on a local pg install)
36109;I rebooted my vps and somehow it's still not loading the db in pgadmin
36110;wtf
36111;I might as well just get a digital ocean instance now lol
36112;well
36113;when I ping it it seems fine
36114;Just ran your code (a little bit altered but should do the trick)
36115;"```gofunc main() { db err := sqlx.Connect(""postgres user=postgres dbname=test3 sslmode=disable"") if err != nil { panic(err) } db.MustExec(schema) fmt.Println(db)}```"
36116;db was printed successfully
36117;with the tables being successfully generated
36118;None
36119;wait ok now it's working
36120;still tho I should switch vps when my thing cancels with ovh lol
36121;It's a timeout
36122;Use `ConnectContext` with a timeout context instead
36123;the bot is running but pgadmin is still lagging
36124;tf
36125;A timeout takes 30 seconds from `Connect` on my machine
36126;DO's droplets start from 5$/mo
36127;More than enough to run a small postgres server plenty of tutorials out there
36128;ye although I need to run the bot too
36129;Wouldn't need more than a few dozen MBs of RAM
36130;Since it's go üòâ
36131;they have droplets for $5 a month and their own psql dbs for $15/mo ü§î
36132;why would anyone do that
36133;Managed hosting is another story
36134;even if you needed a separate instance for the db why not just get another droplet for $5 lol
36135;You don't have to provision/setup servers they do it for you but it comes at a cost
36136;I mean it takes like two seconds to setup a psql server and run it as a service
36137;I see your point and totally agree no idea why they would price it that higher (I mean alright for managed kubernetes there is a minimum RAM requirement smh)
36138;what do I use to create a timeout context? context package? never done much with context before
36139;`context.WithTimeout(context.Background() 5  time.Second)`
36140;package `context`
36141;ah I was close
36142;didn't know I had to multiply by seconds
36143;Yeah the 2nd argument is `time.Duration`
36144;what is cancel func?
36145;`defer cancel() // releases resources if operation completes before timeout elapses`
36146;I see that it wants me to defer it
36147;ah
36148;I reckon it does some cleanup if the operation actually completes in time
36149;wow I have a working structure now
36150;this is unbelievable
36151;```‚îú‚îÄ‚îÄ bot.go‚îú‚îÄ‚îÄ cog‚îÇ ‚îî‚îÄ‚îÄ cog.go‚îú‚îÄ‚îÄ cogs‚îÇ ‚îú‚îÄ‚îÄ misc‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ commands‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ greet.go‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ ping.go‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ misc.go‚îÇ ‚îú‚îÄ‚îÄ modMail‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ commands‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ handlers‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ modMail.go‚îÇ ‚îî‚îÄ‚îÄ reactionrole‚îÇ ‚îú‚îÄ‚îÄ commands‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ rr.go‚îÇ ‚îú‚îÄ‚îÄ handlers‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ on_reaction_add.go‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ on_reaction_remove.go‚îÇ ‚îî‚îÄ‚îÄ reactionrole.go‚îú‚îÄ‚îÄ database‚îÇ ‚îú‚îÄ‚îÄ database.go‚îÇ ‚îî‚îÄ‚îÄ schema.sql‚îú‚îÄ‚îÄ gobot‚îú‚îÄ‚îÄ go.mod‚îú‚îÄ‚îÄ go.sum‚îú‚îÄ‚îÄ guild‚îÇ ‚îú‚îÄ‚îÄ guild.go‚îÇ ‚îú‚îÄ‚îÄ member.go‚îÇ ‚îú‚îÄ‚îÄ modMail.go‚îÇ ‚îú‚îÄ‚îÄ quote.go‚îÇ ‚îú‚îÄ‚îÄ rank.go‚îÇ ‚îú‚îÄ‚îÄ reactionRole.go‚îÇ ‚îî‚îÄ‚îÄ role.go‚îú‚îÄ‚îÄ LICENSE‚îú‚îÄ‚îÄ main.go‚îú‚îÄ‚îÄ README.md‚îú‚îÄ‚îÄ router‚îÇ ‚îî‚îÄ‚îÄ router.go‚îú‚îÄ‚îÄ tests‚îÇ ‚îî‚îÄ‚îÄ dao‚îÇ ‚îî‚îÄ‚îÄ guildDaoTest.go‚îî‚îÄ‚îÄ user ‚îî‚îÄ‚îÄ user.go```
36152;";D"
36153;"Hi can I get some feedback on this code?```go// ExtractImage attempts to extract an image for a url. It looks in this order and returns blank if none are found.// 1. og:image meta tag// 3. thumbnail meta tag// 3. Site faviconfunc ExtractImage(body io.Reader) (imgURL string err error) { doc err := goquery.NewDocumentFromReader(body) if err != nil { return  err } var ( ogImage string favicon string thumbnail string ) // Fetch tags doc.Find(""meta"").Each(func(i int s goquery.Selection) { if name _ := s.Attr(""property""); name == og:image || name == appletouchicon || name == thumbnail { u exists := s.Attr(""content"") if exists { return } switch name { case og:image"": ogImage = u case appletouchicon"": favicon = u case thumbnail"": thumbnail = u } } }) if ogImage !=  { return ogImage nil } if thumbnail !=  { return thumbnail nil } if favicon !=  { return favicon nil } return  nil}```"
36154;do you wanna return on the first one found?
36155;"```u exists := s.Attr(""content"") if exists { return }```typo? (shouldn\'t it be `if !exists { return }`?)"
36156;> do you wanna return on the first one found?I want to return based on a priority. If ogImage is found return that. If not return thumbnail if not that then favicon
36157;And yea that is a typo. Whoops
36158;üòÖ
36159;got it
36160;seems reasonable
36161;no need to name the return types here tbh
36162;True was left over from a previous iteration. This is where JS `||` operator would work really well shame we dont have it in Go
36163;Could just do `return opImage || thumbnail || favicon`
36164;That would be really nice to see introduced at some point in time.
36165;never going to happen though
36166;go is straightforward and the `||` operator having multiple meanings is not straightforward
36167;Fair point^
36168;Yeah its a slippery slope shorthand operators like `||` `??` and `if (x) y()` make code less readable imo
36169;"```go// ExtractImage attempts to extract an image for a url. It looks in this order and returns blank if none are found.// 1. og:image meta tag// 3. thumbnail meta tag// 3. Site faviconfunc ExtractImage(body io.Reader) (imgURL string err error) { doc err := goquery.NewDocumentFromReader(body) if err != nil { return  err } var ret string // Fetch tags doc.Find(""meta"").Each(func(i int s goquery.Selection) { if name _ := s.Attr(""property""); name == og:image || name == appletouchicon || name == thumbnail { u exists := s.Attr(""content"") if exists { return } switch name { case og:image"": ret = u case appletouchicon"": ret = u case thumbnail"": ret = u } } }) return ret nil}```why not that ^?"
36170;there's probably more improvements
36171;@// todo Since AFAICT you can't bail early from iterating I don't see a cleaner approach
36172;@stdio that would overwrite an `og:image` if a `appletouchicon` was found afterwards in the DOM
36173;which does not satisfy the priority requirement og:image > appletouchicon > thumbnail
36174;Ye
36175;overwrite how?
36176;ah I get it
36177;"```html<meta property=""og:image content=""urlA""><meta property=""appletouchicon content=""urlB"">```"
36178;on the foreach
36179;"If you have ```html<meta og:image value""><meta appletouchicon value"">```It will ultimatley `ret` to the second meta tag when `og:image` should be prioritized"
36180;so break early then
36181;best thing you could do is bail early from the iteration if you found og:image
36182;yeah
36183;Good idea I'll do that
36184;and return it right away
36185;Actually I can't because its inside a function
36186;But I'm not sure if it would stop the iteration (probably wouldn't since it apparently follows js semantics)
36187;you did return on exists
36188;does it have something like return true or false to stop .Each?
36189;probably not
36190;`els.forEach(function() { ... })` equivalent I guess
36191;`EachWithBreak`
36192;there's EachWithBre
36193;yeah
36194;didn't even finish typing haha
36195;My laptop's battery is down to 5%
36196;Gotta be fast
36197;brrrrrrr
36198;Cool thanks
36199;I would also invert the if and also return early (without breaking)
36200;less nesting
36201;"```go doc.Find(""meta"").Each(func(i int s goquery.Selection) { name _ := s.Attr(""property"");  if !(name == og:image || name == appletouchicon || name == thumbnail"") { return }```"
36202;That would work. I would need to add `|| exists` to the condition though
36203;Thanks for the help guys üòÉ
36204;only after
36205;hello
36206;how to install golang application from github
36207;i think there was a way to do this before
36208;Doesn't `go get` install them?
36209;thx
36210;https://i.imgur.com/hYW9mYQ.png
36211;Anyone know how to fix this>
36212;i cant find anything online
36213;Do you have opencv2 installed?
36214;yup
36215;You need to link against the opencv source
36216;Did you follow the windows installation steps in the gocv readme?
36217;https://github.com/hybridgroup/gocv#windows
36218;trying to figure out how to parse this:
36219;"```xml<metadata xmlns=""http://linux.duke.edu/metadata/common xmlns:rpm=""http://linux.duke.edu/metadata/rpm packages=""55327""><package type=""rpm""> <name>0ad</name> <arch>x86_64</arch> <version epoch=""0 ver=""0.0.23b rel=""13.fc32""/> <checksum type=""sha256 pkgid=""YES"">0e3ea0515f8e1d5c2683cd7c00290f0144850daaf2ea3336810406bdfedcdcc4</checksum> <summary>CrossPlatform RTS Game of Ancient Warfare</summary> <description>0 A.D. (pronounced zero eydee"") is a free opensource crossplatformrealtime strategy (RTS) game of ancient warfare. In short it is ahistoricallybased war/economy game that allows players to relive or rewritethe history of Western civilizations focusing on the years between 500 B.C.and 500 A.D. The project is highly ambitious involving stateoftheart 3Dgraphics detailed artwork sound and a flexible and powerful custombuiltgame engine.The game has been in development by Wildfire Games (WFG) a group of volunteer,hobbyist game developers since 2001.</description> <packager>Fedora Project</packager> <url>http://play0ad.com</url> <time file=""1585670275 build=""1585667753""/> <size package=""6720902 installed=""21984998 archive=""22017048""/> <location href=""Packages/0/0ad0.0.23b13.fc32.x86_64.rpm""/> <format> <rpm:license>GPLv2+ and BSD and MIT and IBM</rpm:license> <rpm:vendor>Fedora Project</rpm:vendor> <rpm:group>Unspecified</rpm:group> <rpm:buildhost>buildvm04.phx2.fedoraproject.org</rpm:buildhost> <rpm:sourcerpm>0ad0.0.23b13.fc32.src.rpm</rpm:sourcerpm> <rpm:headerrange start=""4504 end=""39220""/> <rpm:provides> <rpm:entry name=""0ad flags=""EQ epoch=""0 ver=""0.0.23b rel=""13.fc32""/> <rpm:entry name=""0ad(x8664) flags=""EQ epoch=""0 ver=""0.0.23b rel=""13.fc32""/> </rpm:provides> </format></package></metadata>```"
36220;this is my current go stuff:
36221;oh man i remember playing 0 AD
36222;lawd
36223;"```gotype RPMEntry struct { Name string `xml:""name,attr""` Kind string `xml:""kind,attr""` Flags string `xml:""flags,attr""` Epoch string `xml:""epoch,attr""` Version string `xml:""ver,attr""` Release string `xml:""rel,attr""`}type Primary struct { Package []struct { Name string `xml:""name""` Arch string `xml:""arch""` Version struct { Epoch string `xml:""epoch,attr""` Version string `xml:""ver,attr""` Release string `xml:""rel,attr""` } `xml:""version""` Summary string `xml:""summary""` Description string `xml:""description""` URL string `xml:""url""` Size struct { Package uint64 `xml:""package,attr""` Installed uint64 `xml:""installed,attr""` Archive uint64 `xml:""archive,attr""` } `xml:""size""` Location struct { URL string `xml:""href,attr""` } `xml:""location""` Data struct { Provides struct { Entries []RPMEntry `xml:""rpm entry""` } `xml:""rpm provides""` } `xml:""format""` } `xml:""package""`}```"
36224;this parses everything but the `<format> <rpm:...>` stuff
36225;okay so first off you have a bunch of anonymous structs
36226;lift those out and make them named types
36227;that's going to make things a lot easier to reason about
36228;of course the first thing is a code style thing lmao
36229;sure
36230;you're asking me to read your code
36231;fair enough
36232;this will make it easier to read your code
36233;for both of us
36234;personally i make my xml schemas in go mirror their xml equivalents
36235;and once you have those named types I can talk about them more specifically
36236;i think it's easier to read
36237;ALSO i'd strongly recommend simplifying your xml input as much as possible
36238;as far as i can tell you could make do with `<package><format></format></package>`
36239;for testing this
36240;wait what if I just see what go puts out if I marshal an instance of this into xml
36241;you can't go wrong with more logging
36242;"```xml<Primary> <package> <name>0ad</name> <arch></arch> <version epoch= ver= rel=""""></version> <summary></summary> <description></description> <url></url> <size package=""0 installed=""0 archive=""0""></size> <location href=""""></location> <format> <license xmlns=""rpm""></license> <requires xmlns=""rpm""></requires> <obsoletes xmlns=""rpm""></obsoletes> <provides xmlns=""rpm""> <entry xmlns=""rpm name=""0ad kind= flags= epoch= ver= rel=""""></entry> </provides> <recommends xmlns=""rpm""></recommends> <supplements xmlns=""rpm""></supplements> <conflicts xmlns=""rpm""></conflicts> <enhances xmlns=""rpm""></enhances> <suggests xmlns=""rpm""></suggests> </format> </package></Primary>```"
36243;"is `item xmlns=""ns""` equivalent to `ns:item`?"
36244;it...should be?
36245;ok
36246;i don't even want to
36247;what is going on here
36248;"```xml<metadata><package type=""rpm""> <name>0addata</name> <arch>noarch</arch> <version epoch=""0 ver=""0.0.23b rel=""4.fc32""/> <checksum type=""sha256 pkgid=""YES"">4eac58c716160b051f5ab40773ba28a38a48c4afbd456083c7cae826f6d403d4</checksum> <summary>The Data Files for 0 AD</summary> <description>0 A.D. (pronounced zero eydee"") is a free opensource crossplatformrealtime strategy (RTS) game of ancient warfare. In short it is ahistoricallybased war/economy game that allows players to relive or rewritethe history of Western civilizations focusing on the years between 500 B.C.and 500 A.D. The project is highly ambitious involving stateoftheart 3Dgraphics detailed artwork sound and a flexible and powerful custombuiltgame engine.This package contains the 0ad data files.</description> <packager>Fedora Project</packager> <url>http://play0ad.com</url> <time file=""1580208414 build=""1580202831""/> <size package=""769170488 installed=""2104146639 archive=""2104157784""/> <location href=""Packages/0/0addata0.0.23b4.fc32.noarch.rpm""/> <format> <rpm:license>CCBYSA</rpm:license> <rpm:vendor>Fedora Project</rpm:vendor> <rpm:group>Unspecified</rpm:group> <rpm:buildhost>buildvmarmv710.arm.fedoraproject.org</rpm:buildhost> <rpm:sourcerpm>0addata0.0.23b4.fc32.src.rpm</rpm:sourcerpm> <rpm:headerrange start=""4504 end=""17308""/> <rpm:provides> <rpm:entry name=""0addata flags=""EQ epoch=""0 ver=""0.0.23b rel=""4.fc32""/> </rpm:provides> <rpm:requires> <rpm:entry name=""dejavusansfonts""/> <rpm:entry name=""dejavusansmonofonts""/> </rpm:requires> </format></package></metadata>```"
36249;this literal XML
36250;gets parsed into
36251;"```xmlpkgman.Primary{ Package: []pkgman.RPMPackage{ pkgman.RPMPackage{ Name: 0addata"", Arch: noarch"", Version: pkgman.Version{ Epoch: 0"", Version: 0.0.23b"", Release: 4.fc32"", }, Summary: The Data Files for 0 AD"", Description: 0 A.D. (pronounced \\""zero eydee\\"") is a free opensource crossplatform\realtime strategy (RTS) game of ancient warfare. In short it is a\historicallybased war/economy game that allows players to relive or rewrite\the history of Western civilizations focusing on the years between 500 B.C.\and 500 A.D. The project is highly ambitious involving stateoftheart 3D\graphics detailed artwork sound and a flexible and powerful custombuilt\game engine.\\This package contains the 0ad data files."", URL: http://play0ad.com"", Size: pkgman.RPMSize{ Package: 769170488, Installed: 2104146639, Archive: 2104157784, }, Location: pkgman.RPMLocation{ URL: Packages/0/0addata0.0.23b4.fc32.noarch.rpm"", }, Data: pkgman.RPMFormat{ License: CCBYSA"", Requires: pkgman.RPMEntryList{ Entries: []pkgman.RPMEntry{ pkgman.RPMEntry{ Name: dejavusansfonts"", }, pkgman.RPMEntry{ Name: dejavusansmonofonts"", }, }, }, Obsoletes: pkgman.RPMEntryList{ }, Provides: pkgman.RPMEntryList{ Entries: []pkgman.RPMEntry{ pkgman.RPMEntry{ Name: 0addata"", Flags: EQ"", Epoch: 0"", Version: 0.0.23b"", Release: 4.fc32"", }, }, }, }, }, },}```"
36252;but as soon as more `<package>`s join the party
36253;the `rpm:` namespaced stuff just doesn't even
36254;what's the basic but not naive hash function to use sha256 md5 or..?
36255;tbh i feel a bit uncomfortable dealing with 150MB strings in memory
36256;i'm just going to assume `xml` bails on namespaces for large documents
36257;since1) it works fine on small documents2) breaks on large documents3) replacing the namespace colon with a `__` makes the thing parse correctly
36258;this is the first time I'm directly invoking `runtime.GC()` in a go program
36259;these data structures and strings are so massive I'd rather not lazily free them
36260;@func for passwords?
36261;Standard is bcrypt or argon2 both of which have a stdlib implementation
36262;am i trying to put in the json wrongly ?
36263;Can anyone find the mistake in here ?
36264;No comma after the closing `]`
36265;Thank you.
36266;np
36267;"argon2 is fairly new; I don't think it qualifies as a standard at all"
36268;it's also pretty hard to use
36269;bcrypt is the common one
36270;and argon2 doesn't have an stdlib implementation
36271;it's only in /x/
36272;https://godoc.org/golang.org/x/crypto/argon2
36273;oh bcrypt is also in /x/
36274;https://godoc.org/golang.org/x/crypto/bcrypt
36275;I'm using argon2 atm. I like how much control you can have over the usage. i.e. how many cycles the amount of memory threads etc.
36276;I'm pretty sure that's because it's actually a parameter to the algorithm
36277;correct
36278;it has a significant meaning and the wrong value may
36279;eh sure
36280;Hi someone can help me with custom unmarshalling? I don't understand why this isn't working: https://play.golang.org/p/LLpEJ3LpSnG
36281;I'm surprised that didn't crash
36282;you're calling Unmarshal onto e inside e's UnmarshalJSON
36283;meaning it's calling itself
36284;yeah but it's the type what's the problem ?
36285;ow
36286;i see
36287;And how I can force the unmarshal to use the real json unmarshaller on my struct @_diamondburned_ ?
36288;you can't really
36289;the two ways I can think of is to make a copy of that type without the method or separate the struct into its own type then embed it inside a parent struct with the method
36290;Ok fine üôÇ
36291;Thanks
36292;yeah np
36293;oh man i merged 600+ go files that use cgo into 1 go file and compile times went from 8 minutes to under 5 minutes. as a sideeffect it fixed compiling from windows because of an argument length limitation. woot!
36294;Bruh is cgo that slow
36295;Ive been convinced to never use cgo. Not giving up my 1s compile times
36296;I mean it takes less than 30 seconds to download dependencies compile my bot build a docker container and upload it to AWS ECR...
36297;Can I group a bunch of packages during import?
36298;Like
36299;```import ( Group { Package1 Package2 } ) ```and then be able to access package 1 and package 2 features through one package which is group?
36300;Why would you want to do that?
36301;Idk
36302;But is it possible?
36303;Does it mention it anywhere in the tour or the spec?
36304;^ what if functions or variables override.You can't do that
36305;Oh ok
36306;`If an explicit period (.) appears instead of a name all the package's exported identifiers declared in that package's package block will be declared in the importing source file's file block and must be accessed without a qualifier.` Huh there's always more to learn
36307;Yo this is amazing
36308;when is that used :thinkingo:
36309;Hi all quick question. Supposing I go with a SQL solution such as postgres is your experience that it's better to go with a ORM like GORM2/boiler or more bare metal?
36310;gorm sucks
36311;wouldn't recommend
36312;I'm not familiar with boiler but generally orms try to be generic in a way that doesn't really work well with go
36313;and end up with lots of empty interfaces everywhere
36314;Fair thanks Awoo.
36315;if you really don't want to write SQL I'd look at query builders dbr is one I've used in the past and liked
36316;I come from a node.js/mongo stack and am looking at a bit more structure in my life considering for that purpose I'm considering Postgres. Is the community leaning toward any specific DB solution these days?
36317;Ideally I want as minimum management of the DB itself.
36318;I like the look of sqlc
36319;> if you really don't want to write SQL I'd look at query builders dbr is one I've used in the past and liked@awoo I don't mind writing SQL honestly.
36320;> I like the look of sqlc@Str≈ìm interesting seems like an automatic ORM of sorts
36321;How to create a file of certain size using go
36322;Write that many bytes to a file
36323;how do i query for a certain email and then match it with all records and return in mongo db ?
36324;ok
36325;@Pushpak why mongo :P
36326;Are you writing this entire application without running it? It seems like there is a lot in there that will stop compilation. Usually if you're trying something like this you do it one step at a time
36327;Or use TDD to verify individual bits of functionality work before putting them all together
36328;Can someone show me a quick example of a dockerized gRPC microservice app?
36329;what part are you stuck on?
36330;this sounds like a specific question for a generic answer
36331;The thinking about it part for now. REST microservices seem quite easy and I have the understanding of how to build those with python but I haven't touched RPC/gRPC yet. I've read a bit about them but I didn't really understand how it works so I thought if I've seen an example it would be easier to understand
36332;https://tutorialedge.net/golang/gogrpcbeginnerstutorial/
36333;gRPC is just over TCP
36334;so no different than doing REST
36335;Thanks I'll check that
36336;Maybe it's actually easier than I thought
36337;Dot imports have their use case but are discouraged
36338;Hey can somebody help me? What type is this: ` [][]interface {}` the documentation says I'll get 20 entrys with timestamp and a string : (a(ss)) . I don't know how to handle this
36339;https://github.com/golang/go/issues/29326 links to some use cases
36340;Hi I am Go noob but how I can remove key value from this?[map[value:{[map[key:techname22 value:test] map[key:techname22 value:red] map[key:techlocation value:usa]] [{techname22 test} {blah blahValue}]}]]
36341;`delete(...)` function
36342;or is it del
36343;I mean how I can leave it as [techname22 test]
36344;I just dont want to use key value
36345;Don't use a map which is a key value store. Slices don't have keys
36346;`cannot convert a value of [][]interface {} into [][]string`
36347;Double slice can't be converted to single slice
36348;None
36349;None
36350;this is my get all meeting in a certain time period func
36351;i have posted many meetings
36352;but in postman when i do get for a time frame
36353;http://localhost:8083/meetings?start=20180922T12:40:31Z&end=20200922T12:44:31Z
36354;like this ^
36355;it simply says null
36356;you should start by logging things
36357;currently you have 0 visibility into whats happening
36358;are the time stamps not parsing? was there an error querying mongodb? You have no clue currently
36359;"Okay maybe my message was lost. I want to make a dbus call to get the result state (string) and a list of the last shutdown reasons (arr) which contains a timestamp and a string. I tried: ```go var arr [][]string call := dbusObject.Call(""object.interface.address 0) err := call.Store(&result &arr) if err != nil { log.Println(""Error:  err) } for _ s := range arr { log.Printf(""Timestamp %v Reason %v s[0] s[1]) }```But I get this error:`type mismatch: slice: cannot convert a value of [][]interface {} into [][]string`I tried following too:```2020/09/02 11:10:18  Started Signal Listener 2020/09/02 11:10:18 Error: dbus.Store: type mismatch: slice: cannot convert a value of [][]interface {} into []string2020/09/02 11:10:45  Started Signal Listener 2020/09/02 11:10:45 Error: dbus.Store: type mismatch: slice: cannot convert a value of [][]interface {} into [][]struct { value string }2020/09/02 11:11:15  Started Signal Listener 2020/09/02 11:11:15 Error: dbus.Store: type mismatch: slice: cannot convert a value of [][]interface {} into [][]struct {}2020/09/02 11:11:38  Started Signal Listener 2020/09/02 11:11:38 Error: dbus.Store: type mismatch: slice: cannot store a value of [][]interface {} into [20][2]string```"
36360;Does anyone has experience with Go and Elastic Search?
36361;yes
36362;I have some specific issue here is the code  https://pastebin.com/k8rKdAwKThe Elastic Search mapping is returning mapping with key value in objects as you can see in image.
36363;Though when I remove Key Value from the structs there is not key value in the mapping
36364;"But what should I do If I would need to make mapping like this  ""technical"": [{""techname22"",""test},{""techlocation"":""usa""}]"
36365;create a new struct or use a map where the value of key is the key and the value of that key is the value of the new key
36366;Create new struct in Values struct?
36367;no separate
36368;Can you please tell me how to do it?
36369;no im working rn
36370;Ok
36371;ive given you the lead im sure you can figure it out from there
36372;Ok ty
36373;its just basically copying data into a new data structure
36374;How I can get out of this  [map[value:{[{techname22 test} {techname22 red} {techlocation usa}] [{techname22 test} {blah blahValue}]}]]Only this [{techname22 test} {techname22 red} {techlocation usa}] [{techname22 test} {blah blahValue}]
36375;in your output of the JSON from elasticsearch technical is a JSON array. As Sentry said you can unmarshal that into a new Struct which would contain a slice of structs representing the key value pair.
36376;I understand but I dont know how to do that.
36377;do you have your raw json data @Ramix ?
36378;https://mholt.github.io/jsontogo/
36379;"Theoretically it is structs I posted above in the pastebin. But I want to Index to ES just {""technical"":[{""key1"":""val1""},{""key2"":""val2""}]}"
36380;Though all of these should be dynamic...
36381;dynamic in what sense ?
36382;technical could be audio,video etc...
36383;And key and value could be anything
36384;the structs you sent on pastebin look right
36385;Yeah but I got in the mapping
36386;key and value
36387;None
36388;you know you can just paste your whole json in the website I sent right ?
36389;It will build the struct for you
36390;How can I convert a string like `20200827T10:26:18+0000` into a time object ?
36391;Yeah but it built it differently than I have it here
36392;To measure the elapsed time
36393;`time.Parse` @∆íTockra∆í
36394;you may need to derive the format string yourself I'm not sure if that's standard
36395;the thing the website built is based on your input so either your input is wrong or you don't unmarshall correctly
36396;Well I am once again too confused
36397;what's your goal
36398;@superloach how can I set the times format?
36399;the `layout` argument is the format
36400;check the docs for how the formats work
36401;https://pkg.go.dev/time?tab=doc#pkgconstants
36402;So with the current way I have now I can use elastic query like  metadata.value.technical.key(someKeyValue) But this would find only values based on the key value that would be techname22 for example. But I dont want to change existing query code that is working fine. On the old table  metadatas I could query with  technical.techname22(SomeValue) Right now I have new table json_metadatas that has different json.
36403;Ugh
36404;there are too many things
36405;welcome to computer science where there are always too many things
36406;"So the new table each record has values like  {""technical"":[{""key"": techname22"",""value"": test""},{""key"": techname22"",""value"": red""},{""key"": techlocation"",""value"": usa""}],""audio"": [{""key"": techname22"",""value"": test""},{""key"": blah"",""value"": blahValue""}]}"
36407;The old table had columns  propery value
36408;And the property was techname22 and value was test with the example above
36409;yeah it sounds like you just have
36410;`[]map[string]sting`
36411;¬Ø\\_(„ÉÑ)_/¬Ø
36412;"please make this as easy as possible for us ```{ technical"": [{ key"": techname22"", value"": test"" } { key"": techname22"", value"": red"" } { key"": techlocation"", value"": usa"" }], audio"": [{ key"": techname22"", value"": test"" } { key"": blah"", value"": blahValue"" }]}```"
36413;"```[{""key"": techname22"",""value"": test""},{""key"": techname22"",""value"": red""},{""key"": techlocation"",""value"": usa""}],""audio"": [{""key"": techname22"",""value"": test""},{""key"": blah"",""value"": blahValue""}]```"
36414;single line JSON arrays are pretty horrific to understand
36415;that's the part that matters
36416;hey deezy can you initialise the ?go with some text ?
36417;like ?go code
36418;i could if i could ever remember how that ding dang command is invoked
36419;if you want to present code or any for of textual data please present it in the form\\`\\`\\`goCode\\`\\`\\`
36420;anyone with a blue name can add stuff to the bot if you'd like
36421;oh
36422;yeah idk about that
36423;And so if I use the old way I can easely search with technical.techname22:(someValue)
36424;we'll talk about how to execute that
36425;None
36426;for sure
36427;it's doable to some degree
36428;> And so if I use the old way I can easely search with technical.techname22:(someValue)you can't really do it via unmarshalling directly because the fields are bound to some types
36429;but if we\'re gonna do THAT we may as well have a proper Here\'s a list of tips for asking questions here sort of thing.
36430;instead of JUST this is how you paste code
36431;a list of tips would probably get long but that's true too
36432;it's just that I see many people posting screenshots that are barely readable
36433;> I made a pastebin though I dont know if there is everything to understand whats happening :/
36434;https://pastebin.com/B45TeFyd
36435;just tagging the bot would force conventions
36436;@Ramix https://play.golang.org/p/QAir1_OgeY6
36437;Is that helpful?
36438;I'm not sure I understand your actual question ramix
36439;I don't think what you want differ from what Ice turtle did
36440;damn
36441;@misterturtle It kinda gives some idea
36442;@superloach I have no idea how to set my own format. There isn't a good example
36443;yeah there is
36444;"> To define your own format write down what the reference time would look like formatted your way; see the values of constants like ANSIC StampMicro or Kitchen for examples. The model is to demonstrate what the reference time looks like so that the Format and Parse methods can apply the same transformation to a general time value."
36445;https://golang.org/pkg/time/#pkgconstants
36446;check the link I gave
36447;yeah that
36448;dozens of examples in the docs
36449;and also explicit documentation of how to build your own format string
36450;where?
36451;Saw no
36452;Format()
36453;Or parse()
36454;one or the other
36455;you gotta learn how to investigate at some point
36456;I read that parts
36457;didnt understand
36458;you start with the reference time
36459;`Mon Jan 2 15:04:05 MST 2006`
36460;"```goconst ( ANSIC = Mon Jan _2 15:04:05 2006"" UnixDate = Mon Jan _2 15:04:05 MST 2006"" RubyDate = Mon Jan 02 15:04:05 0700 2006"" RFC822 = 02 Jan 06 15:04 MST"" RFC822Z = 02 Jan 06 15:04 0700 // RFC822 with numeric zone RFC850 = Monday 02Jan06 15:04:05 MST"" RFC1123 = Mon 02 Jan 2006 15:04:05 MST"" RFC1123Z = Mon 02 Jan 2006 15:04:05 0700 // RFC1123 with numeric zone RFC3339 = 20060102T15:04:05Z07:00"" RFC3339Nano = 20060102T15:04:05.999999999Z07:00"" Kitchen = 3:04PM"" // Handy time stamps. Stamp = Jan _2 15:04:05"" StampMilli = Jan _2 15:04:05.000"" StampMicro = Jan _2 15:04:05.000000"" StampNano = Jan _2 15:04:05.000000000"")```"
36461;and then you define a format string that uses the reference time
36462;See how they all reference Jan 02 2006?
36463;Yeah this I found too
36464;that's it
36465;but How can I use it to chose my own format?
36466;That looks like examples
36467;i don't
36468;i don't know how else to explain this
36469;those are strings
36470;you make your own strings
36471;with whatever contents you like
36472;"`customFmt := 2006""`"
36473;there you go
36474;I can't just make a random string
36475;there must be rules
36476;NO YOU CANT USE THE TIMES
36477;yes
36478;%mm%dd for example
36479;there are rules
36480;Use the reference time
36481;That's it
36482;there are reference times
36483;Go isn't using %s
36484;or whatever
36485;It uses the reference time.
36486;"```go customFmt := 2006""```"
36487;the place you want to place the month you write `Jan` just like the exemple
36488;this is a format string that extracts the year
36489;and only the year
36490;¬Ø\\_(„ÉÑ)_/¬Ø
36491;there you go custom time parsing
36492;basically put `01/02 03:04:05PM 06 0700` into your format and you're done
36493;"```gocustomFmt := Jan 2006""```"
36494;You have your month and year
36495;check the const in the chat
36496;for `20200827T10:26:18+0000` is the `+0000` a time zone or a subsecond unit?
36497;I'd assume time zone
36498;so `20200827T10:26:18+0000` becomes `20060102T15:04:05+0000`
36499;`Jan` and `2006` are basically used as placeholders
36500;i think so yeah
36501;> for `20200827T10:26:18+0000` is the `+0000` a time zone or a subsecond unit?@superloach I dont know. I just get this time from a library
36502;if it's a time zone the `+0000` should be `0700`
36503;why? Isnt the timezone information the time shift between this date and utc ?
36504;I mean
36505;yeah?
36506;and the reference time is `0700`
36507;> I don't think what you want differ from what Ice turtle did@Karitham It's MisterTurtle but I was asked to put IceCold in there after I called waxis a question cannon
36508;question cannon ?
36509;:turtwo:
36510;I dunno it seemed appropriate at the time because he just asks 1000 questions w/o listening to answers
36511;worst time of persons tbh
36512;asking questions and not listening to answers / not researching them
36513;What this would mean? ```cannot use m (type map[string]Values) as type []byte in argument to json.Unmarshal```
36514;`map[string]Values` isn't `[]byte`
36515;show code
36516;"When using this ```m := make(map[string]Values)data := Values{}err := json.Unmarshal(m &data)if err != nil { //log.Fatal(err)}fmt.Printf(""%#v\ data)for i v := range data.Technical { fmt.Printf(""%d : %s:%s\ i v.Key v.Value)}````"
36517;that's not how `json.Unmarshal` works
36518;https://golang.org/pkg/encoding/json/#Unmarshal
36519;first parameter is a `[]byte` which contains your JSON data
36520;Yeah how I can use struct here?
36521;the second parameter is the type you want to unmarshal into
36522;You have to have a byte slice of JSON first
36523;then the second parameter points to what you want to unmarshal into
36524;Yup
36525;so I need to make m into slice of json ?
36526;`json.Unmarshal` takes in a byte slice of json
36527;well technically you got your json from something no ?
36528;just input that
36529;^
36530;I got it from metadata
36531;so
36532;when I use that is tells  cannot use metadata (type []MetadatumToSync) as type []byte in argument to json.Unmarshal
36533;because it's not JSON
36534;`json.Unmarshal` is for well JSON
36535;what is it exactly that you want to do?
36536;And specifically that function expects a `[]byte` of JSON data so you can't just try to use a different type for it
36537;> I got it from metadatawhat's metadata ?
36538;you cannot unmarshallJSON something that's not JSON
36539;metadata := b.getMetadata(b.metadataForFilesQueryString())files := b.addMetadataToFiles(metadata)
36540;"And getMetadata ```func (b FileSyncBatch) getMetadata(query string) []MetadatumToSync { var metadata []MetadatumToSync rows err := b.Db.Query(query) if err != nil { panic(err) } for rows.Next() { var value string var fn int rows.Scan(&fn &value) data := Values{} _ = json.Unmarshal([]byte(value) &data) fmt.Println(""TESTING3 data); metadatum := MetadatumToSync{ Fn: fn, Value: data, } metadata = append(metadata &metadatum) } rows.Close() return metadata}```"
36541;so you've already unmarshalled the JSON
36542;None
36543;If you want to get JSON from `[]MetadatumToSync` you'll have to marshal it back into JSON
36544;Ahh ok
36545;"I have such code now  ```c _ := json.Marshal(metadata) fmt.Println(""JJJJ c) data := Values{} err := json.Unmarshal(c &data) if err != nil { //log.Fatal(err) } // fmt.Printf(""%#v\ data) for i v := range data.Technical { fmt.Println(""ZZZZZ"") fmt.Printf(""%d : %s:%s\ i v.Key v.Value) fmt.Println(""ZZZZZ"") }```"
36546;The JJJJ prints this
36547;And I cant even see the ZZZZZ
36548;output
36549;makes sense
36550;that's a byte slice
36551;Okay
36552;So if I want key values from it
36553;how I suppose to do that?
36554;unmarshal it to a map
36555;You should try to explain your end goal
36556;because you had data unmarshalled
36557;does the JSON structure match your struct?
36558;you marshall it
36559;and now you want to unmarshall again
36560;> does the JSON structure match your struct?@Doad I think so
36561;@Karitham Previously I wasnt able to do loop through data because the info was not byte[].
36562;I am looking for simplest solution
36563;"> You should try to explain your end goal@Karitham The code before I started to touch it was  https://pastebin.com/rqcAg3vKAnd now it is like this https://pastebin.com/NP406QeiThe thing I want is not to use MetadatumToSync Value string but this  {""technical"":[{""blaK"",""blaV""},{""blaK2"",""blaV2""}]}"
36564;use MetadatumToSync Value for what ?
36565;the thing you sent is json
36566;so why are you unmarshalling into marshalling without making modifications ?
36567;idk men
36568;I just wanted to get all the key values
36569;well trying to do things based on guesses from random people on the internet is not the best
36570;get all the keys or all the values ?
36571;Both
36572;you have them already don't you ?
36573;Yes
36574;> idk men@Ramix nobody does kek
36575;I will leave this
36576;then what's the problem ?
36577;I am going crazy
36578;I'm trying to help but you don't make that easy
36579;üòÑ
36580;Yeah I understand
36581;if you have unmarshalled your data in a struct
36582;you can get a key by using dot notation
36583;if you have a slice/array you need `Audio[index].Key`
36584;@Ramix How is what you want to do different from the example I posted?
36585;maybe I could adjust the example based on what you want the end result to be
36586;@misterturtle I dont know the data is incorrect? It does not output anything in the last loop.
36587;How can I check type?
36588;of Variable?
36589;ok so from this example I wrote for you: https://play.golang.org/p/QAir1_OgeY6 what do you want to be able to do with that data
36590;I need to get that far to pass inside the data
36591;Inside the data ?
36592;https://play.golang.org/p/es4i2HcreAM
36593;pass data to loop
36594;Ok so that doesn't make any sense to me. Are you trying to say there is more data taht you're retrieving and you want to collate it with that data? So all the data is under one struct?
36595;Yes
36596;That is just part
36597;part of what
36598;Are all the keys going to be different?
36599;> Are all the keys going to be different?@misterturtle Yes
36600;in the example you have a key techname22 and a value red and a key techname22 and a value test
36601;those duplicates are wrong
36602;ok cool
36603;each key will be different
36604;"So before marshalling anything I am running this  fmt.Printf(""metadata = %T\ metadata)"
36605;and it gives me  ```metadata = []search.MetadatumToSync```
36606;So how I can know If I need to marshal or unmarshal it to get to the keys and values?
36607;http://www.catb.org/esr/faqs/smartquestions.html
36608;@Ramix Ok I've tried to separate the concepts my code is generally terrible but you can see what I've done
36609;https://play.golang.org/p/j49U8Gs4hB5
36610;You'd be better off using methods on the structs to add to the map for example but the concepts are there
36611;@misterturtle Ok thanks
36612;"Is there any reason why I cant range this ```search.Values{Technical:[]struct { Key string json:\\""key\\""""; Value string json:\\""value\\ }(nil) Audio:[]struct { Key string json:\\""key\\""""; Value string json:\\""value\\ }(nil)}```"
36613;show your code
36614;what are you trying to range over
36615;"```for k v := range data.Technical { fmt.Printf(""BEHA: %s Value: %s\ k v)}```"
36616;@Str≈ìm
36617;whats the problem
36618;its not outputting
36619;"fmt.Printf(""BEHA: %s Value: %s\ k v)"
36620;`(nil)`
36621;"Your slice is `nil`; what are you expecting to range over? üôÇ"
36622;Try v.Key and v.Value
36623;> Try v.Key and v.Value@misterturtle k.Key undefined
36624;"> Your slice is `nil`; what are you expecting to range over? üôÇ@Carson Idk"
36625;Look at my frist example where I ranged over the unmarshaled json
36626;k.key is undefined yeah what about v.Key
36627;It does not tell undefined but nothing gets outputted
36628;Compare to the code I showed you that works I guess
36629;holy shit why are arrays so confusing
36630;üòÑ There is no way to tell if the array/slice is empty?
36631;I mean unmarshalled stuff
36632;Or length of it ?
36633;You are setting the slice to nil
36634;`(nil)`
36635;Allright
36636;that's why nothing is getting output
36637;since there is nothing to range over
36638;I guess I have info here  ```map[14:[map[value:{[{techname22 test} {techname22 red} {techlocation usa}] [{techname22 test} {blah blahValue}]}]] 69:[map[value:{[{techname22 test} {techname22 red} {techlocation usa}] [{techname22 test} {blah blahValue}]}]] 70:[map[value:{[{techname22 test} {techname22 red} {techlocation loc}] [{techname22 test} {blah blahValue}]}]]]```Though should I unmarshal it?
36639;alr. It's time to completely rewrite https://github.com/sandbloxofficial/game
36640;oh and what kind of info is that @Ramix
36641;lol hi
36642;@dgo gopher
36643;damn son
36644;lol yo
36645;"I got that with this c _ := json.Marshal(metadatum)fmt.Printf(""LL!!!!!!! string(c))"
36646;Do compilers support multicore while compiling?
36647;Ramix I gave you all the code to go from a byteslice of the json from elasticsearch to a map of key value pairs I'm not sure what else we could do here
36648;@BryanC12 some do
36649;depends on the compiler and what language its compiling
36650;@misterturtle I still cant get to loop through variable that has the info üòÑ
36651;Look at my example where I do exactly that
36652;Well you have prepared array that is byte[]
36653;I see cause 4700u n 4800u are mostly just the different of hyperthreading
36654;If you csnt understand it maybe it's time to take a step back and understand types json marshalling unmarshaling before trying to put it into practice
36655;Maybe look at the code i did and put some debugging in so you can understand what the state of things are as its doing it
36656;"```# github.com/kyleconroy/sqlc/internal/engine/dolphin../../../go/pkg/mod/github.com/kyleconroy/sqlc@v1.5.0/internal/engine/dolphin/convert.go:197:13: n.Schema undefined (type ""github.com/pingcap/parser/ast"".FuncCallExpr has no field or method Schema)../../../go/pkg/mod/github.com/kyleconroy/sqlc@v1.5.0/internal/engine/dolphin/convert.go:216:14: n.Offset undefined (type ""github.com/pingcap/parser/ast"".FuncCallExpr has no field or method Offset)[bob@localhost chatsite]$ go install github.com/kyleconroy/sqlc/cmd/sqlc# github.com/kyleconroy/sqlc/internal/engine/dolphin../../../go/pkg/mod/github.com/kyleconroy/sqlc@v1.5.0/internal/engine/dolphin/convert.go:197:13: n.Schema undefined (type ""github.com/pingcap/parser/ast"".FuncCallExpr has no field or method Schema)../../../go/pkg/mod/github.com/kyleconroy/sqlc@v1.5.0/internal/engine/dolphin/convert.go:216:14: n.Offset undefined (type ""github.com/pingcap/parser/ast"".FuncCallExpr has no field or method Offset)```"
36657;why is this happening
36658;when installiing sqlc
36659;seems like broken dependency versioning
36660;bruh
36661;hi all. okay so I need to unmarshal a json object into a sturct. the problem is one of the json items is sometimes a string but most of the time an int so unmarshaling it into a struct field of one or the other type doesn't work. would I need to use something like json.RawMessage to delay decoding then using something like an ifelse block to determine if the item is a string or int?
36662;you could unmarshal that field to `interface{}` and type assert it
36663;or use `json.Number`
36664;awesome okay
36665;I'd def avoid interface{}
36666;https://github.com/golang/go/issues/41191
36667;hmm
36668;I wonder if all these bytes will be on memory on runtime
36669;here's the FS proposal https://github.com/golang/go/issues/41190
36670;does sqlc only work on go 1.15
36671;this shit just got posted how do you know about it already lol
36672;epic
36673;github notifications
36674;i replied to one of the older issues
36675;huh well thanks for sharing
36676;man this looks cool
36677;https://github.com/kyleconroy/sqlc/tree/v1.4.0
36678;how can i install this
36679;kind of overdue tbh
36680;note its 1.4
36681;not 1.5
36682;oh man i'm excited to see how people are going to use the FS interface
36683;anyone knows of a function in math package that rounds but for the lowest int? for example 1.9 = 1
36684;2.6 = 2
36685;2.2 = 2
36686;floor
36687;thats for float i think
36688;Yes you don't have to round integers. Because well they're ints
36689;Would a question about bcrypt be relevant here?
36690;Sure when in the go context
36691;thanks!
36692;Yeah
36693;I was wondering what number of rounds is a nice balance between speed and security
36694;I was thinking 10
36695;But some people recommend at least 15
36696;How much of an impact on performance would it have?
36697;Why not measure and find out :^)
36698;I have no idea how to set that up
36699;And my shitty laptop isn't much of a basis
36700;Go has built in benchmarking capabilities
36701;Just like testing
36702;O
36703;Interesting
36704;I may just stick with the default of 12 for now but i will try to measure the performance in a bit
36705;@jawad you can always update the rounds count in the future when people log in if necessary.
36706;That wouldn't mess with comparing any past passwords would it?
36707;I assume not
36708;Well you can check the rounds on a successful login and rehash with a higher round count. As the rounds are stored as a part of the hash it wouldn't mess up older passwords
36709;(past passwords as in before changing the rounds)
36710;Oh ok
36711;You'll notice the hashs look similar to $2a$12$.....
36712;Yeah
36713;The second field is the hash cost or the number of rounds
36714;Ah that makes more sense now
36715;Also is it a good idea to use godotenv?
36716;To load environment variables as configuration parameters sure.
36717;But if you're thinking of it from a security perspective it's not great. Anyone on the box could potentially enumerate environment variables however at least file storage is subject to access control restrictions
36718;What would you say is a more secure alternative for something like database passwords
36719;Perhaps using args when running the program?
36720;Pretty widely debated topic tbh args are enumerable in a process viewer (ps)  environment variables can be listed under /proc/ I believe
36721;Yeah
36722;If you have a configuration file at least you can run your application under a user with no login shell and file permissions so only that user / root could access it
36723;Shouldn't be stored in version control however
36724;Yeah that's a given
36725;Gitignore
36726;The big argument really is whether it's worth it. If someone has popped your box is likely only a matter of time before they get what they want
36727;But the thing is if they've popped the box I have bigger things to worry about haha
36728;Or do I?
36729;Databases are pretty important
36730;Hmm
36731;Partially true the security of the rest of the environment is at risk. So any attempt to delay efforts is worth it imo
36732;However at that point for me it's a suggested redeployment to a clean server once the attack vector has been determined
36733;And the extent of the compromise
36734;Depends on your deployment platform
36735;Anyone know how I would convert map[string]interface{} to JSON?
36736;Yeah there are a multitude of factors ultimately decided by the asset owners. All I can do is recommend the most secure course of action and if it's not applicable move to the next alternative. Rinse and repeat
36737;@Deleted User `json.Marshal` is the most direct way if you don't need super precise control over how the encoding is done
36738;okay thanks
36739;wtf there's a `goto` keyword
36740;yep
36741;has anyone ever used it seriously ?
36742;i remember seeing it in a couple places in the runtime
36743;don't remember where though
36744;I swear I saw it in stdlib... maybe a break label though thinking about it
36745;I have some goto code
36746;sometimes it makes flow control easier to visualize than making a lot of functions
36747;but that's just me
36748;https://github.com/golang/go/blob/b9d19eff7756aeabd35672f244fb60f45d0f86ee/src/net/mac.go
36749;oh shit that's smart
36750;I use it sometimes when breaking a double for loop
36751;goto or labeled break?
36752;Ow right that is just a labeled break. Don't think I've used goto before in Go
36753;`goto` is poor man's defer
36754;I mostly just use it to jump over conditions
36755;https://github.com/diamondburned/arikawa/blob/master/bot/ctx_call.go#L160
36756;Could probably just extract Call to a function
36757;That function is a bit big
36758;yeah true
36759;In the stdlib it is used a couple of times in the unmarshal functions and net/http iirc
36760;found one
36761;<https://github.com/golang/go/blob/f979d072d339a24e4938d46588c153587d61af19/src/runtime/map_fast64.go#L112>
36762;labeled break _and_ goto
36763;I wonder why that's necessary
36764;as opposed to just a function call
36765;probably speed
36766;If the function can't be inlined there is a bunch of overhead
36767;hm
36768;Since this is a supposed to be as fast as possible they probably didn't do it that way
36769;This is the runtime implementation of a map
36770;I guess they _could_ have made it yet another for loop with a different exit condition and a labeled break but that wouldn't increase readability much üòõ
36771;For this particular instance the goto originates from this commit in 2014 when the changed the map implementation <https://github.com/golang/go/commit/0c6b55e76ba6d59f57c81ca1160d833c79270753#diff221740160c698f2b2910783dddcbf2bc>
36772;they actually use it quite a lot in those massive functions
36773;It is perfectly fine in complex functions in hot paths where you want to squeeze as much performance out of it as possible
36774;what‚Äôs the word for when u have a for loop creating two instances of the same type but has the same variable name
36775;don‚Äôt know how to explain it
36776;but like it knows it has a diff binary location or smth
36777;what would be the right way to say that
36778;Perhaps you‚Äôre thinking of shadowing?
36779;It‚Äôs somewhat of a colloquial term but it describes having multiple variables with the same name present in any given scope
36780;ah could be
36781;ah could be
36782;ah could be
36783;ah could be
36784;ah could be
36785;cause each name is ‚Äúunique‚Äù to the time it‚Äôs declared
36786;rip why that print so many times
36787;Is there a way to `go mod download` to a specific directory?
36788;What do I do to a golang websocket connection to make it only connect to a specific origin
36789;and the origin is separate from the server's
36790;@jarl change GOPATH
36791;or use go mod vendor
36792;would be cool if local packages were a thing without having to put everything in one of the GOPATH folders
36793;why?
36794;it's more ideal to have them next to my src folder
36795;I don't see how it's more ideal
36796;my projects are in a folder on my desktop so i have to keep switching back and forth between the two folders
36797;have you heard of go modules
36798;i just started so i haven't really used them yet
36799;@hellothere vendor if you want
36800;But really its been a non issue to anyone ive spoken to that theyre central
36801;"```goworldsFromDB := []string{ cool"", world"", name"", here"", fishy"", gg"", world1"", helloworld"", } //Start all worlds for i := range worldsFromDB { worlds[worldsFromDB[i]] = server.CreateWorld() go worlds[worldsFromDB[i]].Run() http.HandleFunc(""/""+worldsFromDB[i] func(w http.ResponseWriter r http.Request) { log.Println(""Client joined world worldsFromDB[i]) serveWs(worlds[worldsFromDB[i]] w r) }) log.Println(worldsFromDB[i] instance created"") } log.Println(""All world instances complete"")```Why when I enter a handle every single time this is logged```2020/09/02 17:22:55 Client joined world helloworld```"
36802;check the Common Mistakes page
36803;https://github.com/golang/go/wiki/CommonMistakes#usinggoroutinesonloopiteratorvariables
36804;how would i get the clienthello from https://godoc.org/net#Conn
36805;When does the client hello occur conceptually?
36806;true
36807;i.e. on what layer after what event?
36808;before the connection
36809;Does it? How does information get transmitted if the connection hasn‚Äôt happened?
36810;Following that what is a ‚Äúconnection‚Äù? TCP? TLS?
36811;hmmm good question
36812;well first the handshake happens right ?
36813;I need to build traffic shaping into an existing application. I have another application that has it working but I didn't write it and they do things differently. That application uses Google's Martian repository's trafficshaping package to make a raw `net.Conn` that's limited to a certain bitrate. The application I'm trying to build this into uses a `net.Dialer`. Am I on the right track? Is there any way to make the dialer use this raw connection or is there an alternative way to rate limit a `net.Dialer` instance?
36814;make a custom resolver probably
36815;https://golang.org/pkg/net/#Resolver
36816;@_diamondburned_ Is that message directed at me?
36817;Whoops probably not
36818;I think they were but I'm not sure that really solves the problem‚Äîit's only used in the (name) resolving step as the name implies
36819;Okay that's what I was thinking
36820;"If the application you're tying in with uses the fields of `net.Dialer` there's not really any getting around it‚Äîusing the concrete type's features ties it to that type. If all the application is doing is using the `Dial` (or `DialContext`) function it should really be taking in an interface for that functionality; I know that might be out of your control but at a certain point it's not always easy to fix bad external design."
36821;(`Dialer` is unfortunately a tad of a misnomer not in the literal sense but in the sense that most other `er` types in the stdlib are interfaces which gets a tad annoying for comprehension purposes)
36822;Resolver has a custom Dial function field
36823;oh nvm
36824;Yes but `net.Dialer` only uses it for the name resolution
36825;That's for DNS
36826;Yeah
36827;I'm willing to go however far I need to go with modifying this application
36828;fork the library
36829;Then yeah‚Äîif all that it's doing with the dialer is calling `Dial`/`DialContext` it shouldn't take in the concrete type.
36830;It should take in an interface that describes the method.
36831;Unfortunately it's made more difficult by the fact that it's using Gorilla's websocket implementation. So what I'm really doing is hacking away at Gorilla websocket's client.go line 250
36832;So it's using net.Dialer's DialContext() function
36833;Notice a few lines above: ```go} else if d.NetDial != nil { netDial = d.NetDial} else {```
36834;It only uses `net.Dialer` if `d.NetDial == nil`.
36835;That looks like your way in to me.
36836;I put print statements in that if statement and found it to be calling the final else block
36837;Did you actually set the `NetDial` function?
36838;(or `NetDialContext`?)
36839;Also apologies in advance if I miss the point sometimes. I've never had to do this before.
36840;No I don't set that value as far as I can tell
36841;Then I'm not sure how you're expecting the custom dialer to happen üòÑ
36842;The block starting on line 240 is specifically for exactly what you're trying to do.
36843;It allows you to specify a custom dial function.
36844;Oh duh.
36845;`websocket.Dialer` has a `NetDialContext` field‚Äîset that.
36846;(or `NetDial` if you don't require a context anywhere)
36847;Okay I found out where I can do that in this application
36848;Now I just need to figure out how to limit it
36849;You already have your limited `net.Conn` no?
36850;If so just make your custom dial function return that.
36851;Sounds good
36852;I haven't looked at the library you mentioned for the limiting but I'm also willing to bet that if it's a decentlydesigned library it also provides a custom dialer function so you might just be able to directly use that instead of defining your own.
36853;This is the function I'm trying to move over: https://play.golang.org/p/IvTwfkYzSFj
36854;I put this in my application: https://play.golang.org/p/1a5KFx2YY4F
36855;I'm getting an i/o timeout from trafficshape now when it tries to write. But I'm closer to a solution I suppose
36856;how do you create a new time variable?
36857;like ```govar thing string```
36858;but for time
36859;```govar thing time```
36860;`time.Time`?
36861;```var myTime time.Time```
36862;https://golang.org/pkg/time/
36863;None
36864;How would I go about making dynamic routes like that? Also is there any point in doing it on the backend rather than just the frontend
36865;Depends what it‚Äôs for
36866;If you‚Äôre making a single page app you‚Äôd handle that mainly in your front end
36867;I'm terrible at programming but all I can think of is generate that when the page is created and store it in a struct then give that to the client
36868;And I'm doing a rest backend and vue forntend
36869;For the backend you can just route it yourself or use a router like gochi
36870;That's fair. I should probably get the frontend closer to finished before asking stuff like this anyways
36871;routes are meant to be done in the backend not the frontend
36872;so the entire point is to be in the backend
36873;frontend routes are implemented as either URL fragments or in a janky way with some JS code and NodeJS SSR
36874;url fragments?@_diamondburned_
36875;#
36876;i mean
36877;that's one way?
36878;there's normal ways to handle it
36879;normal
36880;i mean
36881;it doesn\'t look like that in fact almost nobody does it otherwise it looks like a normal url and isn\'t a janky way
36882;Most js frameworks support single page applications with url routing
36883;ye
36884;hash routers are old at this point
36885;it is janky in the way that it overrides the browser's traditional mean of handling routes
36886;though a lot more things in JS are janky by that definition
36887;> it is janky in the way that it overrides the browser's traditional mean of handling routes@_diamondburned_ wha
36888;#offtopic for more js shenanigans
36889;is there really no better way to parse json request responses than to use unmarshal with a struct or interface
36890;and if there is lmk if not can someone tell me how to parse an array of objects
36891;You unmarshal to a slice of structs
36892;how do i make the data type struct
36893;[]Thing
36894;Not sure what you expect to be better than using maps or structs to unmarshal into
36895;struct?
36896;where Thing represents the individual things
36897;well it‚Äôs just a lot mroe difficult than my experience with other languages
36898;it's different yes
36899;yes
36900;because you have to actually tell go upfront what your JSON looks like
36901;instead of relying on the library to guess
36902;it's quite nice once you get used to it
36903;yes
36904;i‚Äôll see i‚Äôm new to go
36905;it's okay it took me fucking AGES to get good with json
36906;Being explicit is good
36907;No guessing
36908;an embarassingly long time
36909;No random behavior
36910;true
36911;Welcome to static typing
36912;Youll come to appreciate it
36913;Everyone does
36914;yeah it requires more thinking up front but it makes doing stuff after sooooo gravy
36915;does golang have a library for dealing with websockets?
36916;gorilla/websockets is the go to option
36917;alright
36918;Static typing gang
36919;gradual typing gang
36920;this isnt a go question btu does 403 mean im rate limited? i put on vpn and it still didnt work
36921;plus i dont see hwo id be rate limited already
36922;plus plus i can still access the link on my pc but not requests
36923;nope
36924;i mean
36925;technically 403 could mean anything
36926;people return errorneous error codes all the time
36927;but 403 shouldn't mean rate limit
36928;Request blocked.We can't connect to the server for this app or website at this time. There might be too much traffic or a configuration error. Try again later or contact the app or website owner.
36929;welp
36930;that's coming from the server
36931;so
36932;something wentw rong
36933;idk qwhat tho :pepecry:
36934;yeah that's a bad error
36935;epic i have no solution
36936;yeah programming is a nightmare
36937;403 should be Forbidden```The HTTP 403 is a HTTP status code meaning access to the requested resource is forbidden for some reason. The server understood the request but will not fulfill it due to clientrelated issues.```
36938;but what does that mean
36939;That error looks more like a 503 to me
36940;It means you aren't allowed to access the resource
36941;Generally you haven't authorized.
36942;But it could mean you\'re authorized but you\'re trying to modify another user\'s resources
36943;and so on
36944;```The HyperText Transfer Protocol (HTTP) 503 Service Unavailable server error response code indicates that the server is not ready to handle the request.```
36945;so no fix
36946;no the server isn't telling you what the problem is
36947;so
36948;¬Ø\\_(„ÉÑ)_/¬Ø
36949;I would do what it says... Try again later or contact the server owner
36950;sometimes you have to interact with shitty software
36951;its mojang lol
36952;guess ill talk to mojanbhg
36953;> sometimes you have to interact with shitty software
36954;entirely possible it's shitty
36955;im not saying its not
36956;also entirely possible you've done something wrong without realizing it
36957;im just saying
36958;thats what i thouyght
36959;but
36960;an accidental loop that sends 10k requests in a second or somethin
36961;i've done it
36962;i literally copy and pasted the link
36963;oh
36964;LOL
36965;There are other things than just the link...
36966;yeah fam
36967;but we can only speculate
36968;shall i show code
36969;:evil:
36970;Are you trying to POST to a GET only endpoint? Are you not sending the right headers? We can't really tell
36971;i have idea
36972;Yeah if you're talking to a mojang service you almost certainly need to be authorizing and providing other relevant details
36973;if im not misunderstanding you its only an api for info
36974;well
36975;idk wym
36976;but i set headers to oand same rezsponmse
36977;Anyone have any reccomedation for creating a middleware or something that already exists for API call protection?
36978;For example limit certain api calls to 100 times in an hour per ip or something like was curious if something like that exists already
36979;https://www.alexedwards.net/blog/howtoratelimithttprequests
36980;is there a similar tutorial but for load balancing?
36981;that's a bit trickier
36982;that usually involves external orchestration
36983;when it's done correctly at least
36984;and as such it's not really a topic specific to Go
36985;It\'s mostly how to load balance http/database/file access/etc
36986;Load balancing usually means you have a server that recieves all the traffic and keeps track of how much traffic it has sent to each of the destination servers and it tries to evenly distribute the load across all of them.
36987;And there isn't just one way to do it...
36988;Even AWS has 3 different types of load balancers you can use depending on the type of traffic you need to balance
36989;it's okay
36990;words mean nothing
36991;the words of fools even less so
36992;exactly
36993;proving people wrong is one of the less productive ways to spend your time
36994;it is a fun way though
36995;lol not comparable to pthreads
36996;:kek:
36997;I mean ip rate limit is definetly possible with distributed balancers. You'll need an external program like redis
36998;Basic example https://redislabs.com/redisbestpractices/basicratelimiting/#:~:text=This%20service%20states%20that%20it,after%20one%20minute%20as%20well.
36999;Other software like haproxy have implemented their own way to keep track of state. Haproxy uses something called sticky tables. The concept is the same though
37000;> royal foolsYeah. I can concurrently eat my pasta and a side dish. Doing that in parallel creates a mess though as I can't shove that all in my mouth
37001;anyone use https://github.com/gopherjs/gopherjs before? im a little unclear how i can build javascript from my go code that I can serve in a browser or am i misunderstanding the purpose of gopherjs?
37002;is go > wasm then run in a browser a thing?
37003;yeah
37004;GOARCH=js GOOS=wasm or something
37005;ü•¥
37006;I wouldn't recommend it
37007;https://github.com/golang/go/wiki/WebAssembly
37008;I got the order wrong
37009;it's GOOS=js GOARCH=wasm
37010;@_diamondburned_ how would i use the built binary from `GOOS=js GOARCH=wasm go build`
37011;actually i should RTFM lol
37012;nvm
37013;How can remove `N` lines from fileMy dist file looks like```Opcode counts:local.get: 2980i32.const: 2291i32.add: 726end: 652....Opcode counts with immediates:i32.add: 726local.get 0: 679end: 652local.get 1: 623local.get 2: 552local.get 3: 396```I wanted to remove entire lines starting from the heading `Opcode counts with immediates:`
37014;do you just want to do this for one file or programmatically?
37015;> one file`:%s/Opcode counts with immediates\\[\\s\\S\\+\\]//g` :ThonkRotate:
37016;I hate vim's regex btw
37017;it's one of the worst regex variants I've ever used
37018;the day I can write a Go plugin for vim to utilize regexp is the day I praise vim as perfect
37019;So tomorrow?
37020;y not just search for the string and dG
37021;no need to write any regex that way
37022;because I don't actually know any of the vim shenanigans
37023;don't tell the vim people but I use vim with a mouse
37024;@Dusty.P I've tried writing one before and it was more experimenting than I wanted
37025;and I couldn't even get the plugin to run lol
37026;lol
37027;heretic
37028;I use vim with a mouse too lol
37029;I'm working on using a mouse less but I still do things like change panes and highlight text with my mouse
37030;I pretty much do all buffer interaction w/ a mouse
37031;pervert
37032;such heresy
37033;tbh when you get used to changing panes with the keyboard vim emulation in popular ides becomes very painful
37034;that part of it just never works as it should
37035;I'm looking at you goland
37036;lol
37037;I don't use vim emulation in IDEs... If I want vim bindings I will use vim
37038;I can't use text editors without at least vim cursor movement for extended periods of time
37039;it's so cumbersome
37040;II swear it's not a handicap
37041;hello guys
37042;i have problem with password validation using regex
37043;my pattern ^(?=.\\d)(?=.[az])(?=.[AZ])(?=.[azAZ]).{8,}$
37044;i just found out ?= cant be used in golang
37045;The pattern should validate:/  Password rules:  at least 8 letters  at least 1 number  at least 1 upper case /
37046;can anyone help me with this?
37047;my english not so good so... hope u guys can understand üò¶
37048;thanks
37049;oh my god
37050;why are you using regex for that
37051;why
37052;lmao
37053;my superior ask me to do that
37054;i think that doesnt work but yeah
37055;giv it a try
37056;weird guy he is
37057;just use len
37058;what is that ?
37059;just get the length of the string
37060;for range len of that string and check word by word ?
37061;for the first requirement use len
37062;for the second and third use strings.IndexFunc or sth
37063;package unicode provides functions to differentiate a digit and upper case rune
37064;use it
37065;yeah
37066;thanks
37067;mp
37068;np
37069;I want to store a protobuf in a file
37070;https://pastebin.com/1Yay3QFY
37071;what is the mistake in this?
37072;Your first mistake is not giving us info about its runtime behavior
37073;Does it log anything
37074;What happens. What doesnt happen
37075;You havent told us the actual problem or any observations
37076;I want to store the protocol buffer in a file
37077;but when im trying to save it is showing only the name
37078;In the file?
37079;yes
37080;No errors?
37081;no errors
37082;I want to save the object in the file
37083;this is the proto file
37084;"`syntax=""proto3"";package main;option go_package="".;main"";message Person { string name = 1; int32 age = 2;}`"
37085;ive no idea what Person struct looks like
37086;`int` is int64 on 64 bit and idk if proto likes mixing 32bit and 64bit
37087;Yeah that the problem
37088;then make it int32
37089;Still it doesn't work
37090;solved
37091;how
37092;protobuf doest seem to write age in the file
37093;but when im trying to retrieve the data by unmarshalling it returns the age
37094;it writes in binary
37095;:FUCKINGDOMINATINGTHEWORLD:
37096;:fellas: uhhh
37097;"Hi I have this object metadatum ```{""property"":"""",""Value"":{""technical"":[{""key"":""techname22"",""value"":""test""},{""key"":""techname22"",""value"":""red""},{""key"":""techlocation"",""value"":""usa""}],""audio"":[{""key"":""techname22"",""value"":""test""},{""key"":""blah"",""value"":""blahValue""}]},""type"":""""})```I am using this code to iterate over technical ```c _ := json.Marshal(metadatum.Value)data := Values{}err := json.Unmarshal(c &data)if err != nil { //log.Fatal(err)}for k v := range data.Technical { fmt.Printf(""FTW: %s Value: %s\ k v)}```But how I can iterate over Value items like Audio Technical etc...?It is not working if I use just ```range data```"
37098;Did you look at my examples yesterday where I used v.Key and v.Value?
37099;is there anyway i can get rid of /favicon.ico in while using r.URL?
37100;"`func test(w http.ResponseWriter r http.Request) { path := r.RequestURI w.Write([]byte(""Hello there"")) fmt.Println(list(path))}`"
37101;Oh wait hold on @Ramix I misunderstood
37102;@Dattebayo what do you mean
37103;They are separate fields of the struct so you can't easily iterate over them in their current form
37104;hm
37105;lets say the URL is localhost/users i want to save the /user to the map but when i request for the value it gives out 2 results /user and /favicon.ico
37106;however as ES suggests one data mapping per index you should know the structure of teh data coming back so you can get away with hardcoding Technical and Audio because you know they are goign to be there.
37107;Okay
37108;SO right now I have something like this in the output  Key: %!s(int=1) Value: {techname22 red}
37109;Do I need to iterate again to get the techname22 and red as key value?
37110;yes ```for k v := range data.Technical``` k is the index v is the value
37111;ahh lol
37112;so you need v.key and v.value
37113;I used v.Value
37114;and it was all fine
37115;Yeah
37116;thanks
37117;np
37118;Uhm
37119;you can discard k if you don't need teh index by using ```for _ v := range data.Technical```
37120;SO I would like now to replace something in array
37121;okay
37122;So there is that metadatum array above
37123;"I would like to change the Value"":... To Value"":{""technical"":[{""techname22"",""red""},{""techname22"",""red""}]}..."
37124;In this loop
37125;How can I do that?
37126;Should I make metadatum.Value empty?
37127;And then insert the key value pairs?
37128;I don't really understand what you're trying to do or what you're trying to achieve to be honest
37129;ok üòÑ
37130;I will try to explain
37131;"This is the code I have  ```c _ := json.Marshal(metadatum.Value)data := Values{}err := json.Unmarshal(c &data)if err != nil { //log.Fatal(err)} for _ v := range data.Technical { fmt.Printf(""Key: %s Value: %s\ v.Key v.Value)}fmt.Printf(""LL!!!!!!! string(c)) ```This last LL!!! print outputs this  ```{""property"":"""",""Value"":{""technical"":[{""key"":""techname22"",""value"":""test""},{""key"":""techname22"",""value"":""red""},{""key"":""techlocation"",""value"":""usa""}],""audio"":[{""key"":""techname22"",""value"":""test""},{""key"":""blah"",""value"":""blahValue""}]},""type"":""""})```I would like to wipe the Value value and recreate the object within my loop so it looks like this ```{""property"":"""",""Value"":{""technical"":[{""techname22"",""test""},{""techname22"",""red""},{""techlocation"",""usa""}],""audio"":[{""techname22"",""test""},{""blah"",""blahValue""}]},""type"":""""})```Then I will be able to use ES with query  technical.techname22:(red)"
37132;Is it clearer?
37133;@misterturtle
37134;I think I need to use append
37135;"Hi is there anyway to change this `sql.NullString` into a null value as opposed to this?```resource: {String:  Valid: false}String: Valid: false```Here is the field in the struct:` Resource sql.NullString `db:""resource json:""resource,string""``"
37136;"The structure you want to create isn\'t even valid JSON```{ property"":  Value"": { technical"": [{ techname22"", test"" } { techname22"", red"" } { techlocation"", usa"" }], audio"": [{ techname22"", test"" } { blah"", blahValue"" }] }, type"": })```"
37137;shit sorry
37138;there is : between each
37139;not comma
37140;Well that gets a lot more difficult because then your keys are arbitrary not structured
37141;Was the map I created for you yesterday not appropriate?
37142;What do you mean by map?
37143;üôÇ
37144;You mean structs?
37145;"Yesterday I showed you an example where it took all the data from the JSON objects you provided and put them into a map[string]string so you could access them like myDataMap[""techname22""]"
37146;hey can anyone help me?
37147;(type interface {} does not support indexing)
37148;yes because its of type interface{}
37149;you cant do anything with interface{} besides type assert or reflection
37150;interface{} is essentially a black box Go doesn't know what it is what's inside it or what it can do
37151;can't index something if you don't know anything about it
37152;"ohh kk i now fixed it with : fmt.Println(result[""Names""].([]interface{})[0].(string))"
37153;i just googled a little bit more
37154;"@misterturtle Allright I added like this ```myDataMap := map[string]string{}addToMap(data myDataMap)for k v := range myDataMap { fmt.Printf(""\Key: %s Value: %s\ k v)}```"
37155;How I can add each to the Value ?
37156;"To this Value  ```{""property"":"""",""Value"":{""technical"":[{""techname22"":""test""},{""techname22"":""red""},{""techlocation"":""usa""}],""audio"":[{""techname22"":""test""},{""blah"":""blahValue""}]},""type"":""""})```"
37157;But clearing the Value first
37158;`myDataMap[k] += whateverYouAreAddingToThisValue`
37159;You want to overwrite a previous value?
37160;Yes
37161;`myDataMap[k] = myNewValue`
37162;https://tour.golang.org/moretypes/19
37163;https://tour.golang.org/moretypes/22
37164;"Ok but what if I want to add it to  ```m := make(map[string]MyData)c _ := json.Marshal(metadatum.Value)data := MyData{}err := json.Unmarshal(c &data)if err != nil { //log.Fatal(err)}myDataMap := map[string]string{}addToMap(data myDataMap)fmt.Printf(""FTW myDataMap FTWAFTER\"")for k v := range myDataMap { fmt.Printf(""\Key: %s Value: %s\ k v) // HERE I WOULD LIKE TO ADD THE KEY VALUE // m[""value""] += }```"
37165;"If I put ```m[""value""] += v```Then it says ```invalid operation: m[""value""] += v (mismatched types MyData and string)```"
37166;"Well I am noob with GO. Is there a way to add these values to m[""value""] ?"
37167;1 json file?
37168;I was taking example of this https://play.golang.org/p/j49U8Gs4hB5
37169;@misterturtle Helped me with this we got this far
37170;But he used string I guess because he did not knew what I would like to do with that after
37171;"But I would like to add this to ```m := make(map[string]MyData)m[""value""] = ...```"
37172;"> Hi is there anyway to change this `sql.NullString` into a null value as opposed to this?> > ```> resource: {String:  Valid: false}> String: > Valid: false> ```> > Here is the field in the struct:> ` Resource sql.NullString `db:""resource json:""resource,string""``Does anyone have any idea regarding this?"
37173;"How It is different from this ```type MyData struct { Technical []Technical `json:""technical""` Audio []Audio `json:""audio""`}type Technical struct { Key string `json:""key""` Value string `json:""value""`}type Audio struct { Key string `json:""key""` Value string `json:""value""}```"
37174;@misterturtle Can you help me please?
37175;I guess It was bad that we are mapping to string because I want to replace other arrays value property.
37176;ok
37177;"So how I can add key value objects to m[""value""] if I have this code  ```func addToMap(data MyData existing map[string]string) { for _ v := range data.Technical { existing[v.Key] = v.Value } for _ v := range data.Audio { existing[v.Key] = v.Value }}...myDataMap := map[string]string{} addToMap(data myDataMap) fmt.Printf(""FTW myDataMap FTWAFTER\"") for k v := range myDataMap { fmt.Printf(""\Key: %s Value: %s\ k v) // HERE I WOULD LIKE TO ADD THE KEY VALUE arr[""value""] += v }```"
37178;I would need to change myDataMap type?
37179;@Easy
37180;Ugh
37181;"I guess addToMap wont be right either because I need in front of the items  technical"": ..."
37182;"I\'m confused. So you have the ability to do myDataMap[""techname22""] and get the result red"
37183;what is it that you want?
37184;"I just want this new recreated array to be like ```{""technical"":[{""techname22"":""test""},{""techname22"":""red""},{""techlocation"":""usa""}],""audio"":[{""techname22"":""test""},{""blah"":""blahValue""}]}```Without \'key\ \'value\ thats it."
37185;addToMap wont be good for this case because I would need to pass for example technical in front. Or it could be edited somehow
37186;Can I get it in one variable at the end? üòÑ
37187;@misterturtle
37188;Ok lets rephrase the question. why do you want it laid out like that.
37189;Because that would be the query from ES
37190;That would work
37191;this data has come from ES this is the query that works?
37192;the input you gave me to create that was JSON from ES
37193;Are you trying to do this because you want to access the data like: value := object.techname22 or something?
37194;yeah
37195;Wait a sec
37196;I will give more info
37197;You're in control of this data going into ES why don't you format it properly before it goes in
37198;Ideally use the same struct in Go on the way in and the way out
37199;"```for _ metadatum := range metadata { m := make(map[string]string) c _ := json.Marshal(metadatum.Value) data := MyData{} err := json.Unmarshal(c &data) if err != nil { //log.Fatal(err) } myDataMap := map[string]string{} addToMap(data myDataMap) fmt.Printf(""FTW myDataMap FTWAFTER\"") for k v := range myDataMap { fmt.Printf(""\Key: %s Value: %s\ k v) // HERE I WOULD LIKE TO ADD THE KEY VALUE LIKE THIS   {""technical"":[{""techname22"":""test""},{""techname22"":""red""}  {""techlocation"":""usa""}],""audio"":[{""techname22"":""test""}  {""blah"":""blahValue""}]} m[""value""] += v } fmt.Printf(""FTW m[""value""] FTWAFTER\"") // EVERYTHING BELOW WAS ORIGINALLY THERE. SO I AM USING m[""value""] TO ADD TO IT RECREATED ARRAY ABOVE. m[""value""] = metadatum.Value // I DONT KNOW WHAT THIS PART DOES. filteredMetadata[metadatum.Fn] = append(filteredMetadata[metadatum.Fn] m)}```"
37200;At the end there is code that was there before.
37201;why are you marshalling data then immediately unmarshalling it
37202;Idk I got this far it seems ok.
37203;But it is strange that it is so complicated to replace one array item with another array
37204;it isn't
37205;TBH I think it's worth going through the go tour again just to understand types and a few of the other concepts here
37206;`firstArray[0] = secondArray[0]`
37207;yeah
37208;definitely go through the tour again
37209;I did 2 examples for you showing you how to do what you asked but you're taking what I've done and then trying to force it into something else which doesn't make a huge amount of sense
37210;@misterturtle Well that is because I did not tell what I want to do with that info after.
37211;break down your problem simply
37212;EG you're using the function I showed you to add all the keys from multiple JSON objects into a single map but then youj're iterating over that map and trying to do somethign else with it tro force it into another data structure?
37213;and then adding it to another map[string]string (wrongly)
37214;A lot of these issues seem to be related to a misunderstanding of types
37215;and then assigning it to the same map again
37216;@misterturtle It is because I would like to change the structure after.
37217;So at that case I cant use the same struct?
37218;You can't change the structure of a struct
37219;So how I export values from existing struct and make new struct?
37220;you can copy the data into a new structure if you want
37221;"So If the new struct is this ```type AutoGenerated struct { Technical []struct { Techname22 string `json:""techname22,omitempty""` Techloc string `json:""techloc,omitempty""` } `json:""technical""`}```"
37222;Do I need struct if I dont know the fields at all ?
37223;You can't really use a struct if you don't know the fields
37224;So how I can make new array?
37225;It's _structured_ data not unstructured
37226;From existing ?
37227;if the fields are arbitrary you use a map or maplike type
37228;@Ramix you just make a new one
37229;"Do you mean something like this?```gotype MyFinalDataStruct struct { Technical struct { Techname22 string TechLocation string }}data := MyFinalDataStruct{}data.Technical.Techname22 = myDataMap[""techname""] //""red""data.Technical.TechLocation = myDataMap[""techlocation""] //""usa""```"
37230;"So how I can add these to array not string and in front add Technical and Audio before each subarray so it results in ```{""technical"":[{""techname22"":""test""},{""techname22"":""red""},{""techlocation"":""usa""}],""audio"":[{""techname22"":""test""},{""blah"":""blahValue""}]}```?```func addToMap(data MyData existing map[string]string) { for _ v := range data.Technical { existing[v.Key] = v.Value } for _ v := range data.Audio { existing[v.Key] = v.Value }}```"
37231;Honestly do the tour üôÇ
37232;"If the original data MyData is  ```%!(EXTRA string={""technical"":[{""key"":""techname22"",""value"":""test""},{""key"":""techname22"",""value"":""red""},{""key"":""techlocation"",""value"":""loc""}],""audio"":[{""key"":""techname22"",""value"":""test""},{""key"":""blah"",""value"":""blahValue""}]} string=```"
37233;`Technical map[string]string`
37234;99% sure that's all you need
37235;or uh
37236;`Technical []map[string]string`
37237;Do I need to change existing in here func addToMap(data MyData existing map[string]string) {
37238;to []map[string]string ?
37239;@deezy
37240;I need to make a request to a web server from my bot and I've noticed that the NodeJS version of my bot seems to send the requests up to five times as fast compared to my Golang rewrite. While I was looking it up I noticed that people were talking about net/http being slow at sending requests so I tried switching to fasthttp. That makes a bit of a difference but it's still much slower than NodeJS is. Does anyone know why this might be the case?
37241;Should be fast if not faster. Using fasthttp shouldn't change much and is generally a bad idea
37242;If you share your code we can check it for common errors
37243;If I have a slice of sentences and a slice of words would finding matches be best through converting the former slice into a set of words?
37244;Strings.Contains() is probably reasonably performant
37245;that would also match substrings
37246;I love coconuts would match with nuts
37247;Sorry üòÑ My stupid fault
37248;:OGeyes:
37249;"Here you go. The endpoint is also based off of received data so I can\'t hardcode it.```goreqStarted := time.Now()req := fasthttp.AcquireRequest()defer fasthttp.ReleaseRequest(req)req.SetRequestURI(""url"")req.Header.Set(""Authorization token)req.Header.SetContentType(""application/json"")req.Header.SetMethod(""POST"")req.SetBodyString(`{""id"":` + id + }"")res := fasthttp.AcquireResponse()defer fasthttp.ReleaseResponse(res)err := httpClient.Do(req res)if err != nil { fmt.Println(""Invalid auth."") return}reqFinished := time.Now()```"
37250;fasthttp makes me sad
37251;I just started learning Go today. I'll get what that means eventually won't I? lol
37252;Good point @Sgt_Tailor
37253;fasthttp has a right to exist for a very niche market. Everybody else is fine with just net/http
37254;What drove me to try to figure out what was up was the upwards of 500ms response times compared to my NodeJS version's consistent ~50ms.
37255;.Contains seems great I wonder if there's any good fuzzy searching library for my use case though
37256;what means []map ?
37257;slice of maps
37258;If fasthttp is an appropriate response to a problem you're having then that means there are no other performance gains to be had ANYWHERE in your program
37259;period
37260;Gotta go fast
37261;I doubt my code is perfectly optimized. lmao
37262;> 500ms response timesyour app is doing more than JUST handling http requests
37263;there's a lot of pieces in play
37264;also someone literally came in here saying the exact same thing last week
37265;and
37266;it was because they're using os.Walk
37267;which has a well known performance regression
37268;the company that made it uses it to serve 1.5 million concurrent connections at 200k rps
37269;At that scale and after you've optimised the hell out of everything else it could be worth it to swap
37270;I tried checking the time _right_ before making the request and it ended up being 0ms every time.
37271;net/http was giving anywhere between 500200ms and fasthttp is giving anywhere between 250150ms. These ranges are just completely throwing me off. It feels like I'm checking the time wrong or something. Whatever it is it has to be me.
37272;So how this would look like with values?  []map[string]string
37273;"[""test1"":""test2""] ?"
37274;"[{""key"": value""} {""key value""}]"
37275;"Okay how I can add to it so it looks like this  {""technical"":[{""key"": value""} {""key value""}]} ?"
37276;Are you trying to decode some json? Because at that point you should just create a struct
37277;With proper keys
37278;What if the keys/values are dynamic?
37279;Are they _all_ dynamic? What is the full json output you're working with
37280;"!go```go input := `{""technical"":[{""key"": value""} {""key"": value""}]}` data := make(map[string][]map[string]string) json.Unmarshal([]byte(input) &data) fmt.Printf(""%+v data)```"
37281;None
37282;"They all are. This ```{""technical"":[{""techname22"":""test""},{""techname22"":""red""},{""techlocation"":""usa""}],""audio"":[{""techname22"":""test""},{""blah"":""blahValue""}]}```Is what I want to create from this  ```{""technical"":[{""key"":""techname22"",""value"":""test""},{""key"":""techname22"",""value"":""red""},{""key"":""techlocation"",""value"":""loc""}]}```"
37283;because that isn't particularly nice to work with
37284;Ok so it is a list of keys and values cool
37285;"```type Resp struct { Technical []Technical `json:""technical""`}type Technical struct { Key string `json:""key""` Value string `json:""value""`}```"
37286;that would work
37287;used this website to create some quick structs <https://mholt.github.io/jsontogo/>
37288;And I have this func And I would like to pass it to existing variable ```func addToMap(data MyData existing []map[string]string) { for _ v := range data.Technical { existing[v.Key] = v.Value }  for _ v := range data.Audio { existing[v.Key] = v.Value }}```
37289;Yeah I have structs
37290;How Can I add that technical?!
37291;for example
37292;I've posted two examples
37293;[]map[string]string doesn't look like a struct to me üòâ
37294;Oki
37295;So how I can manually add technical:... in data.Technical loop ?
37296;Or actually I need to add it before loop
37297;Where are you actually trying to accomplish here? If you use the structs I posted you can decode the json right away. Then using a different piece of code you can modify it
37298;I just want to remove key value
37299;yes that's what tailor's code sample does
37300;"``` Key string `json:""key""````"
37301;you can change `Key` to anything you want
37302;"```type Technical struct { TechnicianID string `json:""key""` SomethingElse string `json:""value""`}```"
37303;anyone knows why go when parsing json converts my timestamp to float64?
37304;presumably because that's how it's represented in the json
37305;why that unmarshal returns this (EXTRA string=%+v map[string][]map[string]string=map[])
37306;> presumably because that's how it's represented in the json@deezy nope the json gives me int
37307;"When I do  ```input := {\'technical\':[{\'key\': \'value\'} {\'key\': \'value\'}]}""abc := make(map[string][]map[string]string)json.Unmarshal([]byte(input) &abc)fmt.Printf(""ADDDDDD %+v abc)```"
37308;does it though?
37309;None
37310;numbers in json are float64s
37311;period
37312;they might ALSO be valid integers etc etc
37313;but they are float64s
37314;oh but then how do i get a valid timestamp?
37315;(type net.Conn has no field or method readHandshake)
37316;> oh but then how do i get a valid timestamp?@R4yan i get this 1.598643105e+09 instead of 1598643105
37317;afaik the json spec doesn't actually say they are float64 you could parse with as much precision as you can
37318;though within actual javascript i guess they would be
37319;it's very implementationspecific
37320;@Sgt_Tailor That unmarshal gives me nothing.
37321;which is why IME most numbers that need precision preserved are given as strings
37322;"`""key"": 123""` instead of `""key"": 123`"
37323;https://play.golang.org/p/q2E5EmecwZ
37324;Then create a new type to match the other format and move the data over
37325;oh i fixed my issue ^^
37326;"@Sgt_Tailor How I can change ```{""key"":""techname22"",""value"":""test""}``` to ```{""techname22"",""test""}``` after unmarshalling?"
37327;> Then create a new type to match the other format and move the data over
37328;the format is the same  map[string][]map[string]string
37329;That isn't the same format
37330;so is there a way to specify how many items is in object?
37331;Not sure what you mean
37332;"What should the output be for this:```{""technical"":[{""key"":""techname22"",""value"":""test""},{""key"":""techname22"",""value"":""red""},{""key"":""techlocation"",""value"":""loc""}]}```"
37333;"```{""technical"":[{""techname22"":""test""},{""techname22"":""red""},{""techlocation"":""loc""}]}```"
37334;@Sgt_Tailor
37335;Cool let me cook something up real quick
37336;It would be great!
37337;Cause I am too confused with GO though I have learned something üòÑ
37338;This is some cursed json btw
37339;This is way how I am using ElasticSearch to search for values
37340;like tecnical.techname22:(test)
37341;"Well with no duplicates though  {""technical"":[{""techname22"":""test""},{""techname33"":""red""},{""techlocation"":""loc""}]}"
37342;Yeah not going to spoonfeed. Just making a barebones example
37343;https://play.golang.org/p/paKoA2emVu
37344;two datatypes with some conversion code
37345;Just like described earlier
37346;But if you have any control over the json make a beter schema
37347;@Sgt_Tailor Fantastic I will test it soon. Thank you very much
37348;strange format
37349;would it be so hard to just use the existing structure tho?
37350;"```json[{""key"":""techname22"",""value"":""test""},{""key"":""techname22"",""value"":""red""},{""key"":""techlocation"",""value"":""loc""}]```is just a```go[]struct{ Key string `json:""key""` Value string `json:""value""`}```"
37351;Yeah that is what I used for decoding
37352;if you need that to be a `map[string]string` just make a type with marshal/unmarshal methods
37353;But the output format is different
37354;well same format but dynamic keys
37355;they've got a `[]map[string]string` still but each map is just one entry for some reason
37356;why not just make the whole thing a `map[string]string` especially if they're looking to ignore duplicates (for some reason)
37357;Yeah not sure why you would need this format. It is cursed
37358;yup
37359;But hey I've said that a dozen times now
37360;¬Ø\\_(„ÉÑ)_/¬Ø
37361;I mean I don't even know if there can be duplicates in the source data
37362;but yknow
37363;yeah
37364;^^ I did do a map[string]string for the keys
37365;that wasn't what he was after
37366;Anyone wanna form a team for this https://www.gowestconf.com/gowesthackathon
37367;I'd be interested in contributing some massively sub par code but I dont have time :(
37368;tbf thats most hackathon code
37369;I'd set the bar even lower trust me :)
37370;Aw
37371;XD
37372;as long as you're quick it's fine
37373;Yeah but I don't have good ideas lmao
37374;What's the weirdest usage I can think of for Go
37375;Nothing too off the wall comes to mind tbh
37376;Yes same
37377;Omg how about a golang database
37378;A Go UEFI application? That's pretty dumb
37379;He its different
37380;i need to parse stuff
37381;basicallly its like `1 NAME`
37382;and it will be in normal speech for for example
37383;```some random words dont matter 1 NAME and more stuff blah blah```
37384;regex
37385;if i do regex
37386;i feel there will be some random edge case that i wont think of which will mess it up
37387;if that pattern could possibly appear somewhere else in the text and it's not the one you want you can't exactly parse that
37388;otherwise regex is fine
37389;what is `1 NAME`? A placeholder or what you're actually trying to match
37390;And the source of the data matters as you could fit your parsing to that domain
37391;the format is basically Bible verses
37392;it will be like `1 NAME 4:23`
37393;or possibly `NAME 4:23`
37394;regex is what you're going to need to use
37395;since you are parsing a regular expression
37396;probably something like this `(\\d?\\s?[azAZ]+\\s\\d+:\\d+(?\\d))`
37397;ill try that
37398;https://regex101.com/
37399;can test it there
37400;has the same problem as the one i posted in #offtopic
37401;it doesn't
37402;How I can get struct from byte[] ?
37403;whats correct way to install depencies after cloning existing project?
37404;@Ramix what does the data look like
37405;@Eudemon just building it
37406;dependencies listed in `go.mod` will be downloaded automagically
37407;None
37408;Magic
37409;is this actually using go modules?
37410;Probably not
37411;"@Doad ```{""Technical"":[{""techname22"":""test""},{""techname22"":""red""},{""techlocation"":""usa""}]}```I have this in byte format"
37412;Just decode it
37413;Using JSON decoder
37414;@Ramix I've already spoonfed you a solution
37415;i don't see a go.mod
37416;Please try that code
37417;I am using all of your code but further I need to get not byte but struct
37418;"So previously it was  m[""value""] = metadatum.Valuemetadatum.Value is struct.But I would likt to apply byte[] to m[""value""]"
37419;Then encode the data which I also do in the code
37420;Ramix to save us all answering the same questions again please just go redo the tour
37421;Allright
37422;I don't think the tour covers json decoding
37423;Anyway thanks guys
37424;It covers structs and types which is the core of the issue
37425;what can i do with dependencies without go.mod in an existing project
37426;But huh Marshal is giving me slice
37427;Yeah
37428;because you are marshal something to JSON
37429;which is stored in a byte slice
37430;@Eudemon what repo did you fork?
37431;Can I get that slice to struct?
37432;it's a private repo
37433;dude
37434;You are fundamentally misunderstanding the problem
37435;@Ramix unmarshalling json can give you a struct
37436;marshalling does the exact opposite
37437;@Eudemon try just making it a module and building it
37438;it should pull all import statements into the `go.mod` file
37439;after init go.mod how do i build it
37440;`go build`
37441;ah that worked except one ```go: finding module for package gopkg.in/imroc/req.v0main.go:31:2: cannot find module providing package gopkg.in/imroc/req.v0: gopkg.in/imroc/req.v0@v0.3.0: invalid version: go.mod has non....v0 module path github.com/imroc/req at revision v0.3.0Process exiting with code: 1```
37442;i guess i have to modify source code to point to correct path
37443;looks like that dep has changed
37444;https://github.com/imroc/req
37445;Yeah that module is now just github.com/imroc/req
37446;instead of the gopkg.in name
37447;thanks a lot
37448;How this  ```{[{techname22 test} {techname22 red} {techlocation usa}]}```Is different from this  ```{[map[techname22:test] map[techname22:red] map[techlocation:usa]]}```
37449;We've answered this numerous times already
37450;Its easy to say that when you know what is it üòÑ
37451;scroll up
37452;is it just me or is echo not present in this benchmark
37453;the github repo for gowebframeworkbenchmark says echo v2 is included
37454;by boy gochi holding strong there
37455;caring about http benchmarks is moot
37456;it's mostly a waste of time until proven otherwise with profiling tools
37457;benchmark which language can generate the first 1M digits of pi the fastest for the next one
37458;lol
37459;The code I wrap around a well optimised router will negate any benefit of using a well optimised router
37460;@Madxmike what algorithm tho
37461;the same for all
37462;to be consistent
37463;i do enjoy that the majority of those benchmarks are equal or worse than pure net/http
37464;I need to rate limit a net.Conn. Any ideas of how to do so?
37465;ratelimiting isn't typically done on the client side
37466;Do you mean to ratelimit the server?
37467;https://www.alexedwards.net/blog/howtoratelimithttprequests
37468;No I mean to rate limit the client
37469;well similar concept of implementation
37470;It's a speed test. It goes both ways
37471;https://pkg.go.dev/golang.org/x/time/rate?tab=doc
37472;pretty much just use the `Limiter` from that package
37473;rate limit a conn?
37474;like accepts?
37475;or throughput?
37476;kinda vague
37477;Sorry. I want to limit throughput of a connection to n bits/sec
37478;You can just write that many bits per second to the connection
37479;That might be a simple idea conceptually but once you put it into practice things get weird
37480;"hello :)I have a struct ```gotype RSS struct { XMLName xml.Name `xml:""rss""` Channel struct { Title string `fake:""{bs}""` Description string `fake:""{sentence:8}""` Link string `fake:""{url}""` PubDate time.Time `fake:""{date}""` LastBuildDate time.Time `fake:""{date}""` Item []Item }}```And I would like to be able to onrequest size my `[]Item` array can it be done ?"
37481;wrap the Conn and override its Write/Read method
37482;@Karitham That's a slice and it's already dynamically sized
37483;yeah
37484;If you're sending each piece of data as an individual packet and limiting it in realtime you might actually end up sending more data as you turn down the limit‚Äîsee packet overhead and Nagle's algorithm
37485;This depends on the underlying implementation of your OS sockets e.g. `TCP_NODELAY` and etc.
37486;I just need to be able to tell it make 5 Items or make 10 Items
37487;If you're going for more of an average (say limit the bits per second over a span of 60 seconds but instantaneously you can go over the limit) fragmentation becomes less of an issue but things get more complex :p
37488;@Carson üò¨ Ooookay...
37489;https://play.golang.org/p/8mNujcJEtv0
37490;:thinksmart:
37491;@Karitham why not add a boolean for that in struct
37492;Any type of limiting strategy is going to be a contention between throughput and latency
37493;boolean for that ?
37494;wait dafuq
37495;5/10 ur slice is already dynamic
37496;you can't close a ticker channel??
37497;bruh
37498;boolean for 5/10
37499;"```Gorate := 5ticker := time.NewTicker(time.Second)for _ = range ticker.C { for i := 0; i < rate; i++ { fmt.Println(""do stuff here"") }}```"
37500;Poor man's rate limiter
37501;Ha! My ES query does not work for some reason. @misterturtle
37502;`for range ticker.C` works
37503;I'll explain the full context sorry the idea is that I send a slice to `gofakeit` which essentially generates random things based on input struct. if I want 5 items I input `[5]Item` in my struct and I get five but would I be able to change that 5 to some `n` number in some way or another ?
37504;@Carson Okay I'm not sure then what to do. My overall issue is I have a speed test client that I need to rate limit to a speed I specify. I've nearly exhausted my options for wrapping the process and limiting that or the interface etc. So I'm trying to modify the client (which is open source). There's another version of the same client that has rate limiting but it works differently.
37505;Does anyone has exp with ElasticSearch?
37506;@Ramix Yes
37507;@vpseg just write at a certain rate
37508;"I have such mapping  ```""metadata"": { type"": nested"", include_in_parent"": true, properties"": { value"": { type"": nested"", properties"": { Technical"": { properties"": { techlocation"": { type"": string"" }, techname22"": { type"": string"" } } } } } }},```But I cant query it with metadata.value.Technical.techlocation:(usa) It returns 0 results @vpseg"
37509;Though the result exists
37510;Not sure honestly. My experience is minimal
37511;value is nested in properties
37512;@Doad it's really not quite that simple. If you're writing bytebybyte with `TCP_NODELAY` (the default setting for TCP sockets in Go) you're going to write literally 41 bytes on the wire for every single byte and throughput is going to go waaaaay down with acks
37513;If you're writing by chunk latency goes up. There's no super simple answer.
37514;> value is nested in properties@Karitham It should be nested because then all the properties are made dynamically.
37515;isn't it basically in your query that you write `metadata.properties.value.Technical.techlocation:(usa)` instead of `metadata.value.Technical.techlocation:(usa)` ?
37516;dunno never used it
37517;just looks strange to me
37518;Like I said‚Äîconceptually it's simple sure. Once you bring the real world into it things aren't quite as fun. üòõ
37519;This is what I'm trying to mimic: https://github.com/mlab/ndt5clientgo/blob/3ac1308c0bf99311032b945cdb5a1244bdb70c83/internal/trafficshaping/trafficshaping.go#L33
37520;No properties is built in ES.
37521;Is there any reason you can't just use that library?
37522;I'm not trying to say it's impossible or anything but notice that package is over 1000 lines long. It's not trivial to do it well.
37523;(which is even more reason to use the existing code :p)
37524;https://stackoverflow.com/questions/63714355/howcangosnetconnberatelimitedthrottled Yeah I got an error trying to use it
37525;I thought I was on the wrong track so I wanted to ask
37526;I'm stupid. My bitrate is too low
37527;Wow
37528;I impress even myself
37529;I'm back with my problem I just wanna know if it's doable
37530;"I have a struct ```gotype RSS struct { XMLName xml.Name `xml:""rss""` Channel struct { Title string `fake:""{bs}""` Description string `fake:""{sentence:8}""` Link string `fake:""{url}""` PubDate time.Time `fake:""{date}""` LastBuildDate time.Time `fake:""{date}""` Item []Item }}```The idea is that I send a this struct to gofakeit which essentially generates random things based on input struct. if I want 5 items I input `[5]Item` in my struct and I get five but would I be able to change that 5 to some `n` number in some way or another ?"
37531;Dynamically?
37532;I mean..when you allocated it.. for each instance of the struct you could
37533;I need to keep it an array and not a slice
37534;I dont follow
37535;I just want to set the size of the array
37536;the struct is defined in one location right?
37537;yeah
37538;then no.. an array is defined once.. slice you define dynamically
37539;short of a code generator..
37540;there's probably a fake thing for it
37541;not sure what fake thing is?
37542;I figured there was some kind of trick but I'm not sure
37543;Why not a slice?
37544;not sure what the issue is there.
37545;cus I need to set the size
37546;but be able to change it via parameters
37547;Do you need to set the size though?
37548;I can not do it but I'd like to
37549;I can just set it on 25 and that's it
37550;you want a slice mate
37551;you literally want a slice
37552;array needs to be known at compile time
37553;yeah but I can't configure the size of a slice ?
37554;yes you can?
37555;You dont need to
37556;`make([]int 5)`
37557;there slice of size 5
37558;how would I do that in my struct tho ?
37559;```goMyStruct{ MyField: make([]int 5)}```
37560;it really is that easy
37561;wait I can do that ?
37562;fuck me lmao
37563;:robpike:
37564;:pobRike:
37565;:pobrike:
37566;thank you couldn't bother to do it myself
37567;Just curious.. why couldn't you set it as a [] slice..then set the size later dynamically as needed?
37568;it sounded like you wanted to be able to change the size at any time.. which was what was confrusing to me about the ask.
37569;yeah
37570;I wanted to change it anytime
37571;but I want it to have a set size
37572;and I figured slice don't have set sizes
37573;so you could do that dynamically with say a CLI option.. which you couldn't do if you defined it statically as an array.
37574;yeah
37575;exactly
37576;Is there a reason you want it to have a set size?
37577;but I thought that my slice is infinite
37578;but then.. defining it as [] and setting it on start of app.. would have been fine.
37579;oh.. no.. [] is undefined
37580;you have to make the slice when ready to use it.
37581;if I don't have a set size the generator would generate just 1
37582;what generator? Sorry.. dont know what that is in this context
37583;my goal is to generate random like RSS feeds
37584;so I generate Items
37585;Gotcha
37586;but I need to have a set size
37587;so my feed look like normal feeds
37588;hm.. so I think just [] then as you generate some random number of items.. you set the [] with make() like BUILDIN showed you
37589;but you do it each time you randomize..
37590;yep
37591;if I understand you. üòÑ
37592;Well glad it worked out either way lol
37593;nah that's exactly it
37594;ok cool.
37595;yeah idk why I wanted to have an array
37596;sorry for the confusion
37597;meh.. we all gotta learn.. I am still learning.
37598;I am glad that what I was thinking was more or less right.
37599;kinda asserts that I know a little more Go than I thought I did. üòÑ
37600;It's a process.
37601;I would like to use net/http to create a file upload where I process the file without ever saving it to disk.I've found this: https://stackoverflow.com/questions/40684307/howcanireceiveanuploadedfileusingagolangnethttpserver as an example for file uploads I've looked into `ParseMultipartForm` which is used there and saw that it actually writes the file to disk if its above the given size and I would like to avoid that I've found this: https://medium.com/@owlwalks/dontparseeverythingfromclientmultipartpostgolang9280d23cd4ad is this the best way to do it?
37602;you can read the parts manually
37603;I\'m creating a cobra/viper CLI application... it looks like a subcommand PreRun is executed prior to the global root `initConfig()` where viper configuration is initialized?I was trying to verify flags are set correctly in my PreRun function but it looks like I cannot do this?
37604;this guy uses snake casing
37605;"hi I\'m currently building a console application which needs to read a password from stdin and of course I don\'t want to show the input.This is the code I wrote for reading the password:```goprint(""Enter your password: )tty err := os.Open(""/dev/tty"")if err != nil { return err}scanner := bufio.NewScanner(tty)scanner.Scan()println(string(scanner.Bytes()))```How can I hide the input?"
37606;use a terminal library
37607;@supermew10 https://stackoverflow.com/questions/38094555/golangreadosstdininputbutdontechoit
37608;?
37609;https://godoc.org/golang.org/x/crypto/ssh/terminal#Terminal.ReadPassword
37610;https://godoc.org/golang.org/x/crypto/ssh/terminal#ReadPassword
37611;it depends on your code
37612;bad don't bother
37613;that's not a good question
37614;@Lncn does this work without using os.stdin?
37615;@supermew10 sorry I\'m supernew too so not sure üôÇ I just did a quick google search for disable echo on input for golang.
37616;oh supermew nevermind haha
37617;the terminal package diamond linked is probs what you want
37618;my tool is a custom git credential helper which needs a master password to unlock the credentials store. The problem there is that git already EOFs the stdin before I ask the user for input
37619;@Karitham I already tried using it but get `inappropriate ioctl for device`
37620;> you can read the parts manually@_diamondburned_ Couldnt I just use MaxBytesReader with a bigger value first and ParseMultipartForm with a smaller one afterwards?This way ParseMultipartForm shouldnt write anything to disk or are there other side effects which cause some writing anyway?
37621;that's just working it around
37622;there's nothing wrong with just manually handling the parts
37623;xD well is there anything wrong with doing it that way tho?
37624;@supermew10 how did you get the fd
37625;if it works and it's what you want sure
37626;I wouldn't do it
37627;there's also a max body reader
37628;@_diamondburned_ I followed an example from StackOverflow `terminal.ReadPassword(int(syscall.Stdin))` . But it's not correct to use `syscall.Stdin` I guess?
37629;os.Stdin.Fd()
37630;@_diamondburned_ how can I get an `int` from `uintptr`?
37631;cast it
37632;@_diamondburned_ `terminal.ReadPassword(int(os.Stdin.Fd()))` get me the same error as before is there anything else I need to do?
37633;what OS?
37634;"@_diamondburned_ I got it:```goprint(""Enter your password: )tty err := os.Open(""/dev/tty"")if err != nil { return err}defer tty.Close()passwd err := terminal.ReadPassword(int(tty.Fd()))if err != nil { return err}println(string(passwd))```"
37635;thanks for your help
37636;btw try to use `fmt.Println & fmt.Print` rather than the basic println & print
37637;@Karitham this does not work in my case I need to write to stderr so the user can see the message
37638;use log
37639;println isn't in the specs and may be removed
37640;just made for dirty debugging
37641;@Karitham what should I use instead to write to stderr?
37642;log
37643;`log.Print` & `log.Println`
37644;can I somehow remove the timestamp?
37645;`fmt.Fprintf(os.Stderr,string args)`
37646;you can use that too
37647;there are many options
37648;I'm new to go so I don't know which is the best but overall `fmt.Fprint` just works
37649;"How can I add string technical to variable here?  ```m[""technical""+t.Key] = t.Value```"
37650;I tried Fprint and I does what I want it to. so I just use that
37651;"`os.NewFile(2 stderr"").Write(args)`"
37652;:sueur:
37653;os.Stderr.WriteString(string) works too
37654;Psssht
37655;^^ so many ways to do it
37656;@Ramix what are you trying to add it to
37657;Not sure your code does what you think it does
37658;I'm wondering why you are writing to stderr too
37659;"So if t.Key is for example  \'test\ I want m to be m[""technical.test""]"
37660;you can remove the timestamp
37661;log.SetFlags(0)
37662;@Ramix you want to replace that item in the map with a new key and value or just add a new entry to the map?
37663;@Doad New entry
37664;"`m[""technical. + t.Key] = t.Value`"
37665;Yup
37666;Ty
37667;@Karitham stdout is blocked by git
37668;Just tested and it works
37669;what
37670;what do you mean it's blocked out by git
37671;@Monique when my tool (credential helper) is used by git. git uses stdout and stdin for it's api
37672;huh
37673;what's that syscall called
37674;i forgot
37675;`git credential reads and/or writes (depending on the action used) credential information in its standard input/output`
37676;dup3
37677;https://linux.die.net/man/2/dup3
37678;magical stuff
37679;The fact I actually remember this because my next project is writing a shell is terrifying
37680;stderr and stdout is common knowledge bruh
37681;No
37682;dup3
37683;Along with the weird waitX calls
37684;i know this isn't very Go specific but i was looking for something to manage my database schema and saw dbmate which is written in go. Does anyone have any preferred tool?
37685;I strictly use perconaonlineschemachange for live db changes
37686;But don't have a tool that keep track of the different changes that have been done currently
37687;Does anyone know if the source code for `go mod vendor` is available anywhere?
37688;https://github.com/golang/go/blob/master/src/cmd/go/internal/modcmd/vendor.go
37689;Ty
37690;does anyone know where i can find an example of using the gorilla/websocket library
37691;Well the repo has an `examples` folder üôÇ
37692;ah didnt see that
37693;thanks
37694;my golang intellisense was working with vscode yesterday but now its not i checked if go.useLanguageServer was set to true in the settings.json and it was
37695;why do so many people here prefer gochi over gin?
37696;because chi is stdlib compatible and has nested routes and mounts
37697;ah well gin has nested routes and mounts as well
37698;so i guess the only upside of chi is the stdlib compatibility?
37699;that's a pretty big upside but yes
37700;Guys how much of this is true Slices maps channels strings function values and interface values are implemented with pointers internally and a pointer to them is often redundant.
37701;Is there any resource/cheatsheet for pointer receivers/returns
37702;the last part is true
37703;I mean false
37704;using a pointer to them is not redundant in some cases
37705;It's true it's often redundant. But not all of the time
37706;depends on the cases though
37707;there\'s not really an often here
37708;you do it when you have to
37709;is it possible to break and stop the code in a for loop?
37710;or would i have to return outside of it
37711;have u tried ...
37712;```gobreak```
37713;yes but break only stops the loop right?
37714;still continues with the code outside of it?
37715;You want to return from the function? Not break
37716;Just `return`
37717;that will work in a for loop? sorry for questioning i just know it doesnt work in the other language ik
37718;Yup
37719;That works in most languages I know of
37720;in js return doesnt stop for loop
37721;Anywhere within a function scope `return` will cause the function to return
37722;okay
37723;It doesn't in js? That doesn't sound right
37724;It works in js
37725;it def does in js
37726;Hi Guys! What is your preferred method of developing golang app with docker. Do you build the app outside docker then copy the binaries into docker? or you copy all source code into docker and build them in docker using multistage build? What is best practice especially for the deployment pipeline? Thank you.
37727;Multi stage Dockerfiles
37728;^
37729;"```Dockerfile FROM golang:alpine as builderENV GO111MODULE=onRUN mkdir p /app WORKDIR /appCOPY go.mod .RUN go mod downloadCOPY . .RUN go build o api .FROM alpineRUN mkdir /appRUN adduser S D H h /app appuserUSER appuserCOPY from=builder /app/api /appWORKDIR /appCMD [""./api""]```"
37730;"I\'m having trouble getting some stuff working for https and reverse proxy; I have it set up to redirect http to https but i can\'t get the requests to https to work. here\'s some snippets:```go// on port 80func httpToHTTPSHandler(rw http.ResponseWriter r http.Request) { u := r.URL u.Host = r.Host u.Scheme = https"" log.Println(""Redirecting to u) http.Redirect(rw r u.String() http.StatusMovedPermanently)}// on port 443 router.HandleFunc(""/ func(rw http.ResponseWriter r http.Request) { r.Write(os.Stdout) r.Write(rw) }) http.ListenAndServeTLS(fmt.Sprintf("":%v tlsPort) cert key router)```"
37731;router is gorilla mux
37732;"```curl http://foo.bar<a href=""https://foo.bar/"">Moved Permanently</a>.```"
37733;then a curl to the https just hangs
37734;no output from that handlerfunc i have setup
37735;eventually times out
37736;scratch that... i didn't have the port forward rule for 443 enabled
37737;though now it seems like it doesn't like my cert
37738;`that is not valid for foo.bar. The certificate is only valid for .foo.bar`
37739;why not do TLS in a webserver and proxy it over through a socket or sth?
37740;hm? i need a little more explanation
37741;am still baby at web related things
37742;especially tls
37743;are you suggesting i do tls in a nexisting webserver instead of rolling my own?
37744;"also that last tls error is an error on my part; i made the cert with .foo.bar but i need to also add foo.bar"
37745;> are you suggesting i do tls in a nexisting webserver instead of rolling my own?yeah
37746;your webserver should only concern itself with http
37747;whether that's over socket or tcp port
37748;Is there any reason why? For hobby projects it reduces complexity slightly but I dont see why the data shouldn't be protected in transit
37749;because it doesn't matter to protect the socket
37750;you can secure the socket by other means such as limiting what user can read it
37751;Assuming your SSL termination is on a different machine though and your app is http only you have clear text data on your internal network
37752;I'm not making that assumption
37753;that's a big assumption
37754;if I have to handle http across machines I'd use a webserver regardless
37755;and internal network is internal
37756;and socket is not a normal network connection it's a special file
37757;"```func isPalindrome(word string) bool { for i j:=0 len(word)1; i<=j; i j = i+1 j1 { if word[i] != word[j] { return false } } return true}func isPalindrome2(word string) bool { for i:=0; i<len(word)/2; i++ { if word[i] != word[len(word)1i] { return false } } return true}```which would you prefer or other ideas?"
37758;Internal network is internal but doesnt mean someone wont be able to access it. Via unix socket on a local machine is understandable but I was just wondering if there was any reason for not recommending go to use TLS
37759;needlessly complex as I said
37760;I never said anything about having multiple machines and having a single machine doesn't imply small scale at all
37761;again you could also use a webserver there with no issue
37762;and if your intranet can be accessed by someone not trustworthy then you have issues
37763;and given that point anyone could read anything
37764;you could read a secure socket file just be root
37765;hell if you're root already just read the server's memory
37766;Is it needlessly complex for Go? Generating certs for internal use isnt difficult. And as for needless I make a living accessing other people's internal networks and the state of security is usually abysmal because the assumption is that its a trusted network
37767;there are also servers with horrible security
37768;intranet is just one of many
37769;it is not difficult but it is mostly redundant
37770;web servers are made for this so why not use them?
37771;it's not like proxying web backends is a new concept?
37772;neither is load balancing with web servers
37773;But neither is TLS and encrypting inflight data. What about the process is complex maybe I could do a Go project to make it less complex
37774;I didn't say it's complex
37775;I said it's redundant because there are solutions that solve the problem already
37776;I really don't see why you have to bother with generating certificates and move them around and make the applications use them and give the applications either sudo (which compromises security) or properly sandbox them with the right privileges to run on port 80+443 (which webservers are already preconfigured with that) only to end up with a webserver anyway for load balancing or any of those purposes?
37777;when you can literally just have it listen to a high port and write 3 lines of webserver config
37778;I'm still suggesting reverse proxying from say nginx bound externally but proxying to a go app (which can be bound on a high port if you want) using SSL/TLS. I wouldn't bind my go app externally mainly because of flexibility. If the only reason for not proxying to the go app via TLS is complexity then that strikes me as an issue that can be solved with tooling. Unnecessary on a single machine good practice on anything more.
37779;@misterturtle Yeah generating the certs behind a reverse proxy pretty annoying not that it can be done but generating the certs with CRON job just on the reverse proxy machine is a lot easier. I use just http for my apps through my local network to the reverse proxy (nginx) that runs the certs over https and have them on their own VLANS on the internal network.
37780;Regardless of complexity. Serving tls content in Go isn't hard
37781;It is just adding a second http call. Http.ListenAndServeTls
37782;With the cert file and key
37783;Why use different tooling when this is perfectly fine for running a go http server on a single machine. Less moving parts :)
37784;I've just seen it mentioned a fair bit (on reddit SO and other places) not to bother with TLS for the Go application and use nginx or something similar for SSL termination then reverse proxy. I just wondered if there was a particular reason why when it shouldn't be difficult to setup to use TLS even internally and for anything dealing with sensitive data across a network is the right thing to do.
37785;Calling the tls function is literally it
37786;and the surrounding devops requirement for generating and maintaining certs
37787;Hey guys I wanred to ask is it possible to read file with photo name (test.jpg) one name in one line. Then create new excel file and add name in 1st collum and picture with same name in secod collum using go?
37788;Yeah but unless you're using a proxy that does LE renewals automatically you have to do that anyways
37789;Most servers I run have multiple http instances anyways so I need a reverse proxy
37790;You could setup certbot to restart the go application upon cert renewal
37791;Yeah getting go running in TLS mode is not hard at all single line Its just the renewal that's always been a pain for me at least internally.
37792;Hi Guys sorry for the very basic question but if I want to split functions between different files I need to make sure that the package name is the same and go run all of the files which contain my functions is this correct?
37793;They just need to have package main at the top
37794;and it just works
37795;Unless you have different packages
37796;@Sgt_Tailor That would cover external certs for termination at the reverse proxy what about internal if the go app was using TLS? Or can certbot generate self signed certs for internal use now too?
37797;@trini8ed  when I try to call the function from my main it comes back as undefined??
37798;Within the same folder?
37799;Yeah they need to be in the same folder forgot to mention that
37800;Yes
37801;Mister it can't. But I'm unaware of other programs doing that either
37802;And package main is at the top of both files?
37803;"```gopackage mainimport ( errors"" fmt"" net/http"")// NewUser creates a new user on the database & returns an error in the case of failurefunc NewUser(w http.ResponseWriter r http.Request) (err error) { fmt.Println(""Hey from newUser"") if 1 == 2 { err = errors.New(""New Error"") } return}```"
37804;The autocomplete does find the function in my main file but then it complains that it is undefined at compile time.
37805;Haha
37806;Sorry I'm a real newb here!!
37807;include your file in your build command
37808;make sure you specify all the .go files in the build command
37809;EG ```go build .go```
37810;@misterturtle I'm sure there is a way around it but regarding internal SSL certs I need to forward the web app outside of the reverse proxy to get the cert before I can put it back inside the reverse proxy I have not tinkered with alternatives but I've just done that manually for the things I have needed it for.
37811;"Or just specify the directory name ;)"
37812;doesn't just `go run .` work ?
37813;@trini8ed ofc u can generate openssl certs for internal network
37814;Ah!! so go run will only run the file that I pass and if it is the first time I have run it then it will have not built the rest of the go files yet?
37815;it will do the same thing every time you run it it will just build exactly what you tell it to
37816;Yeah I never tinkered to far into it I had issues with certbot when I was doing it
37817;`go run .` build the main function and every function called recursively into a binary that's placed into `/tmp` and ran
37818;Okay cool thanks.
37819;@trini8ed I assume that's for certs signed by a CA you could use selfsigned internally
37820;using ssl for internal network encryption / any kind of network encryption is a common approach
37821;and is not related to any certbots
37822;Yeah CA signed certs I have not messed around with internal certs yet
37823;"I have this ```gofunc main() { // instantiate mux router router := mux.NewRouter() headers := handlers.AllowedHeaders([]string{""XRequestedWith ContentType Authorization""}) methods := handlers.AllowedMethods([]string{""GET POST PUT DELETE""}) origins := handlers.AllowedOrigins([]string{""""}) fmt.Println(""Server running on port :8080"") err := http.ListenAndServe("":8080 handlers.CORS(headers methods origins)(router)) if err != nil { log.Fatal(err) } router.HandleFunc(""/ getPosts).Methods(""GET"")}func getPosts(w http.ResponseWriter r http.Request) { fmt.Println(""Hello from Get Posts"")``` and when I fire up my server I get no error but when I hit the endpoint I don\'t get anything logged to the console."
37824;Youre never listening
37825;Youre creating the endpoints and then the program closes
37826;Isn't the program blocking at the http.ListenAndServe line so never setting up the routes with HandleFunc?
37827;Oh it is
37828;Expected it further down
37829;Yes that is correct thanks.
37830;So the listen and serve has to be at the bottom of the main function?
37831;It will only return from the ListenAndServe function when it stops listening and serving so in this case it shoudl move (along with the error checking) to the bottom of your main function
37832;So the router is not calling the functions but instead setting up eventListeners for the different routes?
37833;"Hi I\'m looking into web development with Go. Is there any resource with comparison of different packages? web framework ORM"" template engine"
37834;Template engine exists in stdlib
37835;Web framework isnt a defined term
37836;orm theres a few to choose from of wildly varying user experience
37837;I wouldn't use the term event listeners probably better to use the term handler. Event listener would suggest there's a particular architecture behind the router and I'm fairly certain that's not the case
37838;but you register a handler to be called when the router encounters certain conditions with the request path.
37839;could be a static path could be a regexp match etc
37840;@Str≈ìm Thank you. I'm looking into frameworks such as Gin Echo Iris ...
37841;I've been trying to look up some comparison but haven't really found anything of sorts.
37842;Definitely dont use Iris whatever you do
37843;Unless you dont care about morals in open source ecosystem
37844;Would you mind elaborate on this please?
37845;Maintainers a shady slimy dishonest individual
37846;Stolen code fabricated benchmarks fabricated corporate support stories
37847;star botting alt accounts etc
37848;Dont use Iris
37849;Thank you this does help a lot!
37850;hey golang + gohtml or golang + react ? which is the better option?
37851;Depends on your site/application.
37852;Server side rendered sites tend to be more static whilst client side rendering proves valuable with dynamic pages.
37853;Could maybe mix even thats becoming popular
37854;Also if you plan to have an API for a mobile app or other API consumers it would make sense to use a frontend framework.
37855;yes maybe i should go for the framework because i have to use the api for the mobile too. thanks for helping out @Str≈ìm @casual
37856;If anyone knows about a good comparison of the Go web frameworks or share their opinion about them please ping me. üôÇ
37857;Big fan of the best http package
37858;Net/http
37859;What would be a good way to deploy a Go Rest API on multiple nodes? Just git clone each time I do an update on each one?
37860;Also curious on how to safely stop the API maybe just have a variable to be set to stop accepting future request and another when all requests have been process so it can be stopped not half way through a request?
37861;Best way would be with a load balancer switching between the new and old instance.
37862;Yeah Nginx would be load balancing between the different API's I have not delved into it to much yet I wasn't sure if there was a way for Nginx to check what version is going on to stop sending requests to and what not.
37863;Hi! Apologies if this has been asked before. I\'m looking for a way to architecture projects in Go and so far I\'ve seen all of these DDD or Clean Architecture attempts at writing Go code. I recognize their advantages and what not but (and this is a big but) they don\'t seem idiomatic Go to me. It feels like something\'s not right when writing Go code that adheres to one of these C#/Java types of architectures. Am I wrong about this? Anyway my main question is what kind of architecture do you guys recommend? Also do you have any articles/resources/open source projects that may be useful? Thanks!
37864;This was kind of my thought process for designing it but I was more or less curious on perhaps maybe an admin node whenever I push new version to auto deploy all the nodes or something along those lines
37865;?go structure @purpledeerz
37866;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
37867;Oh I\'ve seen this one. One question about it though is it really okish in terms of idiomatic Go to be placing those domain types in the root directory?
37868;That is the usual article people refer to for project structure so I guess so
37869;Ok thank you!
37870;@purpledeerz golang doesn't play that well with ddd but if you want you can have your own domain package
37871;Like there's nothing stopping you
37872;@mmacheerpuppy That was also my impression but so far all of these architectures use some form of domain architecture
37873;Yeah but they're all mock ups
37874;None of them deal with real problems :p
37875;So what's your suggestion for an architecture then?
37876;Just do whatever makes sense for your application. Don't overthink architecture as a first step. There's no way you will get it perfect first time unless you fully understand the domain
37877;Which is exceedingly rare.
37878;Maybe just start out with an api package for your API models and your external and internal api calls (so infra) and a server package for bootstrapping and a core or internal package for everything else
37879;Unless you're planning to write 20kloc right now that will help you deliver quickly enough
37880;The standard package is only a guide but if you're serious about doing domain driven design then you've missed a huge first step domain modelling
37881;There's no hard and fast rules as long as the code is readable. There's almost no consistency across go apps some of them are consistent but I can also pick out tonnes that are popular and exemplary enough and follow their own structure.
37882;Ok makes sense
37883;Yep do what makes sense and learn and refactor as you go along
37884;Ok thanks for your input!
37885;> There are no changes to the language.pog
37886;no changes :robpike:
37887;raw disk access seems pretty straight forward but you'll have to write an abstraction for each OS you want to support
37888;how would i automatically restart my script if it crashes due to
37889;panic: runtime error: invalid memory address or nil pointer dereference [recovere panic: runtime error: invalid memory address or nil pointer dereference panic: runtime error: invalid memory address or nil pointer dereference
37890;You should fix your code
37891;debug the issue so you don't have a panic would probably be step 1
37892;@Str≈ìm let me explain my fiber api
37893;so i take some parameters to my api and make a http request
37894;and i use the proxy provided inside parameters
37895;sometimes the proxy is not working and a lot of my request time out
37896;"with bash you could do ```while :; do ./badidea; sleep 5; done```"
37897;and if 2030 request timeout at once my whole fiber api crashes
37898;put it in a container and set `restart unlessstopped`
37899;but you should fix your code some way or another
37900;yea i see no reason why it crashes
37901;i have my http client a set timeout
37902;but for some reason if there are multiple http clients which all reach a timeout my whole process rashes
37903;```panic: runtime error: invalid memory address or nil pointer dereference [recovered] panic: runtime error: invalid memory address or nil pointer dereference panic: runtime error: invalid memory address or nil pointer dereference[signal 0xc0000005 code=0x0 addr=0x68 pc=0x52ef49]goroutine 658 [running]:compress/gzip.(Reader).Close(0x0 0xc000c49605 0x3bd) c:/go/src/compress/gzip/gunzip.go:292 +0x29panic(0xa16540 0xefdb40) c:/go/src/runtime/panic.go:975 +0x3e9io/ioutil.readAll.func1(0xc000919458) c:/go/src/io/ioutil/ioutil.go:30 +0x106panic(0xa16540 0xefdb40) c:/go/src/runtime/panic.go:969 +0x176compress/gzip.(Reader).Read(0x0 0xc0023ea600 0x200 0x200 0xc0023ea600 0x0 0x0) c:/go/src/compress/gzip/gunzip.go:247 +0x3ebytes.(Buffer).ReadFrom(0xc0009193e0 0xb5ff00 0x0 0xb5ff00 0x0 0x1) c:/go/src/bytes/buffer.go:204 +0xbbio/ioutil.readAll(0xb5ff00 0x0 0x200 0x0 0x0 0x0 0x0 0x0) c:/go/src/io/ioutil/ioutil.go:36 +0xeaio/ioutil.ReadAll(...) c:/go/src/io/ioutil/ioutil.go:45main.main.func1(0xc0004408c0) C:/Users/Administrator/Desktop/api/api.go:219 +0x97d```
37904;it seems its something with gzip right ?
37905;what ever is happening on api.go:219 is likely referencing something that doesn't exist
37906;^^^^^^^^
37907;bodyBytes err := ioutil.ReadAll(reader)
37908;aha means i should check if reader exists
37909;bingo
37910;(probably)
37911;"```go resp err := client.Do(req) if err != nil { c.Send(fmt.Sprintf(""{\\""error\\"":\\""%v\\""} err)) return } // log.Println(""here 7"") defer resp.Body.Close() var reader io.ReadCloser switch resp.Header.Get(""ContentEncoding"") { case gzip"": // log.Println(""here 71"") reader err = gzip.NewReader(resp.Body) defer reader.Close() default: // log.Println(""here 72"") reader = resp.Body } // log.Println(""here 8"") bodyBytes err := ioutil.ReadAll(reader) if err != nil { c.Send(fmt.Sprintf(""{\\""error\\"":\\""%v\\""} err)) return }```"
37912;how would i check if reader exists ?
37913;or if its valid
37914;do you close it ?
37915;close the body or ?
37916;Check the err for gzip.NewReader
37917;You never handle the error case for gzip.NewReader returning an error
37918;oh true
37919;people complain about Go's error handling verbosity but it does make things easy to spot
37920;granted sometimes when you look at the same code for a while it can take a fresh pair of eyes to spot the obvious
37921;ok i added the handler and also defer reader.close on the default case
37922;> granted sometimes when you look at the same code for a while it can take a fresh pair of eyes to spot the obvious@misterturtle haha thats so true
37923;ok i think this solved it its not crashing anymore
37924;ty everyone (for now)
37925;just need to figure out why the can't return a reader üôÇ
37926;yea idk its some kind of timeout issue
37927;`15:33] Admin: ok i added the handler and also defer reader.close on the default case` i you know when you are done close it yourself
37928;its cleaner
37929;hmm so I have code that looks like this ```gotype ChannelIDSnowflakeTuple interface { ChannelID() string Snowflake() string}type ChannelIDSnowflakeTuples = []ChannelIDSnowflakeTuplefunc (s MessageService) FindMany(ctx context.Context tuple ChannelIDSnowflakeTuples) Messages {// do the thing}```But I have a type in another package ```go type MessageSearchResults = []MessageSearchResult```Where MessageSearchResult implements that interface but I can't use MessageSearchResults as a parameter to the FindMany function?
37930;i see an extra s in the parameter type for the interface?
37931;ChannelIDSnowflakeTuple vs. ChannelIDSnowflakeTuples
37932;https://play.golang.org/p/1Lx3tvAaUlK
37933;Right but it also doesn't work with slice types
37934;Do I need to create an additional wrapper interface to return my types as an interface implementing type or can i do some kind of casting here?
37935;https://stackoverflow.com/questions/40806029/ingohowdoipassasliceofinterfacetosomethingthatexpectssliceofad
37936;looks like you cant do that. i've never actually tried myself
37937;thats dumb
37938;They do not have the same underlying memory representation
37939;You have to make a new slice with the correct type
37940;Type erasure would argue otherwise surely
37941;here is a good explanation of why https://stackoverflow.com/questions/12753805/typeconvertingslicesofinterfaces/12754757#12754757
37942;like the point of an interface is sufficiency
37943;If you have func a and func b on a struct then its sufficient to say it satisfies interface i
37944;But it's not an interface
37945;It's a slice
37946;Right
37947;And yet
37948;"```gotype Result struct { chanID string snowflake string}type Results []Resultfunc (r Results) AsChannelIDSnowflakeTuples() []ChannelIDSnowflakeTuple { var cidtupl []ChannelIDSnowflakeTuple for _ d := range r { cidtupl = append(cidtupl d) } return cidtupl}func (r Result) ChannelID() string { return r.chanID}func (r Result) Snowflake() string { return r.snowflake}func FindFrom([]ChannelIDSnowflakeTuple) bool { return true}func main() { data := Results{Result{chanID: blah snowflake: blah""}} fmt.Println(FindFrom(data.AsChannelIDSnowflakeTuples()))}```"
37949;This is fine
37950;So I can enumerate through each entry and append it to a slice but I can't consider a slice of type A that satisfies interface I similarly
37951;If they had different memory representations then why would I be able to append it at all?
37952;:ANGERY:
37953;because its converting each one to that interface one at a time
37954;as far as I understand It requires you to do that because its an O(n) operation. seems reasonable to me passing in a variable shouldn't be an O(n) operation and you should have to explicitly do it
37955;But how is it converting when my type implements the interface?
37956;you should read the article i posted
37957;like ```gotuples := make(messages.ChannelIDSnowflakeTuples len(m)) for i := range m { tuples[i] = m[i] // ok } copy(tuples m)// not ok```
37958;does anyone know of queues with cancellation?
37959;it's for Disgord. Hoping to queue requests sharing a rate limiter
37960;currently I figured a go routine is the way and then each call can use a select listening for when it's their turn or if the context is done
37961;the go routine would also just skip those where ctx is done
37962;but scaling that up feels iffy
37963;wdym scaling it up
37964;to N queues
37965;it's not a big jump. but i feel it can be way more efficient
37966;do you think you will create too many goroutines?
37967;there's just a lot of moving parts it feels like so wondered if anyone had seem someone that solved this already
37968;ah
37969;what's the most use cases for go in the market? so far I have only written lambda / kubernete scripts for specific purpose job runs on trigger
37970;did the github search get messed up
37971;if a go routine is calling a function is that function locked so that another go routine cannot call it until it‚Äôs over
37972;?
37973;or only code locked within the go routine
37974;it's not locked
37975;https://tour.golang.org/concurrency/1https://tour.golang.org/concurrency/9
37976;why would it be locked
37977;thonk
37978;idk lol
37979;just a thought
37980;Is this a good approach? only exporting the interface of the service and a function that instantiates an implementation of it.```golang// Interface is exportedtype Service interface { DoSomething()}func NewService() service { return service{}}// Concrete implementation is not exportedtype service struct {}func (s service) DoSomething() { // ...}```
37981;cause i thought it was locked
37982;so i had a goriutine with a buffer channel
37983;waiting
37984;but now i know it‚Äôs not so i can just call it
37985;since i have multiple gorotuines possibly calling
37986;@Etna make the ctor return the interface
37987;it's ambiguous to return an unexported type
37988;it's also unintuitive
37989;```func NewService() Service { return service{}}```This?
37990;Makes sense thanks
37991;keep in mind that it's still preferable to return a concrete type
37992;meaning you should export service
37993;@Etna I do this
37994;@_diamondburned_ What is the motivation behind exporting the concrete type?
37995;so you can reference it
37996;you can't reference an unexported type and having a separate interface is unclear
37997;even when explicitly documented
37998;I would also go the extra length of defining the said interface in the package where is needed not next to the struct which implements it
37999;It's also not advisable to circumvent go's default zerovalue constructor
38000;no
38001;as trying to cover all cases would be a lot of code
38002;this discussion happens like twice a week
38003;@_diamondburned_ you disagree with defining the interface in the package that needs it?
38004;no?
38005;> It's also not advisable to circumvent go's default zerovalue constructor@_diamondburned_ The example I provided is simplified in real world the constructor requires arguments
38006;that's not my point
38007;my point is it's a waste of time to try and cover cases where the zerovalue of a struct may be used as the method's receiver value
38008;https://discord.com/channels/118456055842734083/118456055842734083/750406564271357983
38009;https://discord.com/channels/118456055842734083/118456055842734083/748273168069951499
38010;Hello I'm trying to do the logic `stringA == stringB && stringC == stringD` in `html/template` but can't quite get it right.
38011;"I tried this last: `{{if and eq .StringA""page eq .StringB""about""}}`"
38012;"try `{{ if (and (eq .StringA page"") (eq .StringB about"")) }}`"
38013;That worked thanks!
38014;yeah np
38015;Among Gin Echo and Beego which would you recommend for a simple web app (45 entities)? I would have SSR and use an ORM.
38016;a simple web app? none
38017;router i would go with gochi or mux
38018;>simple web app>use an orm
38019;Chi is pretty simplistic and integrates well with usual net/http extensions
38020;Gin is a little much isn't it?
38021;gochi gang
38022;I'm aware both web framework and an ORM is an overkill for starting up something of this scope. But I'd prefer familiarizing myself with it as a starter project.
38023;familiarlize yourself with the standard library
38024;Also the project itself might grow depending on my needs.
38025;its far far far more useful to learn than any thing you can add ontop
38026;using a framework in go without good reason is a recipe for a long development process of not understanding anything thats going on
38027;how can i import a folder with a file with functions into my main.go
38028;I find it a bit easier to get to know a language and how it works since there's at least some structure to which to adhere to.
38029;thats what im trying to tell you
38030;the stdlib provides a ton of structure
38031;std
38032;go is unusual in that it's standard library serves as the best material to learn the language
38033;liek aids
38034;Interesting. So just dig into Go's docs and work out from their examples?
38035;how to import functyions from another file
38036;yeah also read effective go on the go blog
38037;But if you are deadset on this idea then go with gin
38038;gin bad
38039;No I'll try it out without a framework. üôÇ
38040;Thank you both.
38041;No
38042;I thought gin was good
38043;how to import functyions from another file
38044;@shaky import the package the file is in
38045;but
38046;it doesnt work
38047;You have to be more specific
38048;your go is broken :(
38049;Show your import and use and the function
38050;ok
38051;"```gopackage utilsimport( os"")func CheckFile(filename string) error { _ err := os.Stat(filename) if os.IsNotExist(err) { _ err := os.Create(filename) if err != nil { return err } } return nil}``` this is utils.go inside Utils folder"
38052;@casual I also recommend ditching the orm too. It‚Äôs very easy to do the stuff an orm usually does yourself in go
38053;I'll give it a Go. üòõ
38054;bchs
38055;None
38056;And remember these are not hard fast rules on everything but you will be surprised how effective the Stblib is
38057;"i want to import to main.go and how i tried to do it based on a google search was `import sys/Utils""` after go mod init sys"
38058;is p here pointing to an anonymous struct
38059;What is your module name shaky
38060;module name
38061;?
38062;pakcage name?
38063;Oh sys
38064;Okay
38065;utils
38066;h
38067;ph
38068;oh
38069;The package is utils not Utils
38070;As defined at the top of utils.go
38071;oh
38072;@oni chan no there are no anon structs here
38073;well now for some reason it says
38074;package regex is not in GOROOT
38075;lol
38076;wut
38077;@oni chan aren't Scale and ScaleFunc the exact same thing?
38078;so what is p pointing to
38079;> @oni chan aren't Scale and ScaleFunc the exact same thing?@Dusty.P yea bro it's tour
38080;A vertex instance
38081;that's the point two things do same thing
38082;That‚Äôs the point
38083;gimme a role
38084;Is that they are technically the same thing
38085;I need my name to be colorful
38086;Buy nitro
38087;wut
38088;Lol
38089;mods We need colors
38090;we love colors
38091;white is for L
38092;:facepalm:
38093;But yeah they are demonstrating that a pointer receiver acts like passing the receiver as a argument to the function
38094;yea
38095;Iirc
38096;so it's not an anon struct
38097;No
38098;just an instance of Vertex
38099;Yes
38100;An anon struct would be like
38101;https://kelcecil.com/golang/2015/01/08/anonymousstructsingo.html
38102;That
38103;thanks bru
38104;Hey everyone which uuid package should I use satori's or google's ?
38105;I need version 4 uuid since its safer and I know satoris package supports it but I dont know about google's
38106;I've tried both and they both work
38107;https://www.udemy.com/course/learnhowtocode/ do you guys recommend this or please tell me what resource is better I am semi noob in Golang wishing to do backend applications with it.
38108;@Madxmike thank you
38109;:peepoILuvU:
38110;@argahsuknesib todd is a gret teacher if you ask me but some people dont like the way he teaches
38111;buy it and refund it if you dont like it
38112;I personally bought his golang web course and relly happy with it
38113;okay okay. I heard that he is drunk or something on teaching
38114;I will buy it thanks because there aren't such detailed courses on golang anywhere.
38115;ahaha yeah and his humour is not for everyone else but I don't know I find it cool tbh.
38116;How familiar with programming are you?
38117;?go learn
38118;Getting Started with go.dev <https://learn.go.dev/>  DoadA Tour of Go <https://tour.golang.org/welcome/1>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyGo by Example <https://gobyexample.com/>  SkippyGopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Effective Go <https://golang.org/doc/effective_go.html>  Skippy
38119;> I will buy it thanks because there aren't such detailed courses on golang anywhere.in the beginning yeah but after I got used to it go's official documents are more than enough
38120;I code in Java and used to do ML with python currently learning React. @Dusty.P
38121;It's just Todd teaches you cool tricks here and there which are useful
38122;@Madxmike thanks mate I hope you get laid tonight
38123;Then I would just do the tour... It will cover all the syntax you need
38124;https://tour.golang.org/welcome/1
38125;amazing.
38126;I did the tour while googling at the same time cuz I didnt get things like concurrency at first
38127;bruh coding in python make me dump as shit
38128;never ever touch python again
38129;Python package management is so fucking bad
38130;a virgin promise
38131;lol why do you say that?
38132;because it is easy as f
38133;u forget the cost of your actions
38134;I mean it kinda depends on what you are coding.
38135;That is kinda the point of Python... quick and easy for things that don't need performance... If you need performance use a different language
38136;I only used Google Colab for all of my shit otherwise download every package then there are 4 version of python in your system you don't know where the package went. One thing to get pass this is use a venv but then that is fine and but then you still need to download everything you need into that venv
38137;_hint most of the time you don't really need performance_
38138;dunno don't need python anymore
38139;I use pyenv... keeps each install of python completely separate
38140;virgin promise
38141;I sometimes write pseudocode in python I am not confident about and it fucking runs it fucking runs
38142;But yeah I guess this is a little #offtopic lol
38143;I will use python on for AI and all that not using it if I have to write more than 30 lines of code.
38144;@Dusty.P oh yeah I am sorry
38145;> But yeah I guess this is a little #offtopic lol oh yeah sorry lol
38146;hey can someone help me with learning how to deal with mysql in go?
38147;https://github.com/gosqldriver/mysql
38148;That image is terrifying
38149;bruh
38150;Interfaces are collection of methods
38151;am I right ma man
38152;bruh all that shit  And I am going to use php and java in University
38153;Set is more correct
38154;god help mee
38155;sets like combination of stuff
38156;Like in set theory
38157;"E {x ; x >= 10}"
38158;y belong E
38159;like this
38160;In4 Venn diagram xD
38161;looking through gorm 2 docs
38162;I've used upper.io and manually wrapped my calls in transactions
38163;is the performance part true?
38164;https://www.percona.com/blog/2019/07/15/mysqltheimpactoftransactionsonquerythroughput/
38165;https://logicalread.com/optimizemysqltransactionperfpart1mc13/
38166;Rule of thumb would be: keep your transactions small
38167;and most cases you don't need transactions for reads just for writes (which seems to be what gorm does)
38168;thx
38169;how does it detect that?
38170;wouldn't there be a race condition where changes may happen after a read but before a write tx is acquired?
38171;and MySQL already starts a transaction on each call iirc
38172;just internally
38173;also isolation levels are probably worth taking a look at
38174;iirc they can reduce lock contention per Tx
38175;Are there any performance differences between raw and interpreted string literals?
38176;Identical
38177;Its just for programmers sake
38178;But I take it that the backtick is rarely used and that one should stick to double quotes?
38179;"I use backticks for multiline strings like SQL queries or if I need to use a `""` in the string..."
38180;same but I also use backticks for regex
38181;we need a new channel called
38182;meirl
38183;:no:
38184;where are the admins
38185;we need meirl channel
38186;roles
38187;:gopher:
38188;I need medals for only asking questions without helping any one
38189;because I don't know any thing yet about golang  not because I am a psycho who doesn't love help others
38190;I mean while I see why we do try to keep this server semiprofessional considering we're also linked from official Go resources.
38191;Aha!
38192;I appreciate this server a lot everyone has been really helpful even though I've asked really boring simple questions
38193;yea really good environement
38194;i followed a tutorial on worker pools but i dont rly understand the channel aspect could someone explain what the channels ae doing in my code
38195;None
38196;it works i just would like to know why lol
38197;the jobs channel is for distributing jobs across the earlier spawned workers
38198;the results channel is for said workers to send the finished stuff into
38199;but what do the channels actually do?
38200;you say its sending the results but the function prints the results so i dont understnad
38201;sorry if this is noob question i started 5 days ago and i want to learn
38202;channels are just first in first out pipes
38203;it prints the results then send it
38204;the last 2 lines of the range jobs loop in Snipe()
38205;so do i have
38206;to send it
38207;to results channel
38208;`results < j2`
38209;that's sending
38210;i know is that needed for it to work
38211;what is your goal?
38212;to make a worker pool
38213;for what to work?
38214;try removing it and see
38215;also do the go tour on channels
38216;yeah it worked wityhout sending to resulyt
38217;did it actually work though?
38218;your work is printing the result
38219;but you're not printing in the right place
38220;the whole point of this pattern is to collect the result at the caller level not inside the workers themselves
38221;but you're not doing anything to the collected results
38222;check the tour for a more barebones example of channels before diving into a worker pool
38223;&pun intended
38224;https://tour.golang.org/concurrency/2
38225;@shaky
38226;> the whole point of this pattern is to collect the result at the caller level not inside the workers themselves@_diamondburned_ talk to go by example
38227;https://github.com/go101/go101/releases
38228;bros
38229;what did you think about this book
38230;?go pipelines
38231;Go Concurrency Patterns: Pipelines and cancellation <https://blog.golang.org/pipelines>  technololigy
38232;excellent blog about concurrency patterns in Go
38233;"```gofunc AddToSlice(slice []string) { slice = append(slice Dynasty"")}func AddToSlice2(slice []string) []string { slice = append(slice Dynasty"") return slice}```"
38234;The second one should always be preferred right?
38235;often yeah
38236;not always but most cases
38237;when would the first be better?
38238;If slices are implemented with pointers internally it's a matter of readability only or?
38239;it's mostly a matter of preference but I do first when I have to return something else
38240;Ah
38241;functions with side effects are way less readable than functions with return values
38242;When there is a function where I have to pass a pointer to a slice or map a big question mark appears
38243;‚ùì
38244;`Unmarhal` and the likes are justified though
38245;If they were to return the value it would be `interface{}` which you then have to type assert. That is just painful
38246;where do i ask for help? üòÖ
38247;here
38248;oh ok
38249;i get this error idk why
38250;None
38251;`go run .`
38252;Not `go run `
38253;also you probably want to use modules
38254;Also this
38255;yes i was gonna use modules after i fixed this error
38256;now i get this
38257;Looks like you're failing to load a texture
38258;hm
38259;Or that raylib is just segfaulting for some reason
38260;yeah it works when i dont load the texture for some reason
38261;Is the path correct?
38262;it should be
38263;From where you're running it
38264;yes it is right
38265;/home/elric/Documents/GoGame
38266;maybe it has to do with global variable shadowing
38267;paste player.go
38268;paste player.go?
38269;As in paste the code for player.go
38270;"like this? ```gopackage mainimport ( github.com/gen2brain/raylibgo/raylib"")type Player struct { x y float32 frame float32 timer float32 FPS float32 maxFrame float32 sprite rl.Texture2D}var player Player = Player{0.0 0.0 0 0.0 0.08 6 rl.LoadTexture(""assets/hedgehog.png"")}func playerDraw() { rl.DrawTextureRec(player.sprite rl.NewRectangle(16player.frame 0 16 16) rl.NewVector2(player.x player.y) rl.RayWhite)}```"
38271;eh relative paths are fuckin with you
38272;most likely
38273;i think so too
38274;thanks for the help ill figure this out (somehow)
38275;`path/filepath` is real nice
38276;and os.Getwd()
38277;wait what!? it works if i type rl.LoadTexture(/assets/hedgehog.png)!?
38278;:thonk:
38279;agreed
38280;it uses LoadFileData
38281;but raylib's docs are too basic that it doesn't say anything
38282;I had to read the texture.c file lol
38283;:thonk:
38284;@elric do you have to run any command prior to go run?
38285;no?
38286;dunno then
38287;maybe C has some weird macro generation idk
38288;i think theres something wrong with the github repo
38289;it looks fishy
38290;ill figure it out
38291;ebiten shill time?
38292;Yes use ebiten
38293;Or use Ardent in like 3 weeks
38294;With ebiten backend
38295;release in 3 weeks? :cereal:
38296;Probably
38297;Then y'all can implement things I will use for profit
38298;Does anyone use notion
38299;using goroutines somewhere maybe
38300;or need to lock OSThread @elric
38301;maybe is gl out of context
38302;single threaded gl ü§∑\u200d‚ôÇÔ∏è
38303;i'd be surprised if the library doesn't do that if it has to
38304;though afaik the user controls the main loop so that should've worked
38305;@Doad that doesnt help with what I am trying to do it tells me diddly squat for how to temporarily store variables for a website to be displayed and/or modified by the user on the site
38306;Maybe you should\'ve led with that then rather than deal with mysql üòõ
38307;Is creating just a config.json somewhere and parse it in main fine for settings up global environment variables?
38308;Huh
38309;Why ping me?
38310;@trini8ed yup
38311;If you really want environment variables though use proper environment variable
38312;You can use something like godotenv to load a .env file into environment vars
38313;I would say my term of environment variables wasn't accurate more like user defined arguments like starting port and stuff like that or directories for alternate file locations I need to access
38314;You can use json configs sure
38315;Or flags
38316;Or environment variables
38317;Or many other options
38318;Yeah I noticed the use in angular where there's just a global envirnment.ts file was curious what people generally used for go.
38319;Really depends what you're doing
38320;I typically make containerized programs for servers for work so environment variables make the most sense
38321;Yeah I need to migrate my shit over the containers at some point. Such a pain to reconfigure it on each VM I need to throw it in and the two external programs I use are kind of a pain to build and get running lol
38322;Also the issues with going between windows and linux when developing and running into some weird bugs lol
38323;I'm assuming that would work fine too for version numbers on the config as well?
38324;Hmmm what's a good way to have a global variable across multiple packages? In package main the config file is parsed and saved to a global variable then in other packages that can be accessed? Or do I need to be passing this to each function?
38325;I just pass the relevant information when you wire everything up in the main
38326;https://play.golang.org/p/kr5xLXx8KUa
38327;buf is a `Buffer` shouldn't that make it format as an int there?
38328;use %p
38329;%X is for integers not pointers
38330;> The %b %d %o %x and %X verbs also work with pointers formatting the value exactly as if it were an integer.
38331;where
38332;https://play.golang.org/p/b_vIKHOhDbA
38333;None
38334;where
38335;scroll down to %p
38336;oh it prob means unsafe.Pointer
38337;bruh
38338;yup
38339;it means unsafe.Pointer
38340;aight then
38341;which makes sense
38342;it didn't explicitly say a pointer type
38343;it says pointer
38344;yeah fair
38345;just not very intuitive I guess
38346;That‚Äôs not why notice if you change it to an int it prints the address
38347;This is why:> For compound operands such as slices and structs the format applies to the elements of each operand recursively not to the operand as a whole.
38348;ahh
38349;I see
38350;is there any way around that?
38351;well unsafe.Pointer I guess
38352;%p
38353;```github.com/tcnksm/goinput (download)cannot find package github.com/gbrlsnchs/jwt/v3 in any of: /opt/hostedtoolcache/go/1.15.0/x64/src/github.com/gbrlsnchs/jwt/v3 (from $GOROOT) /home/runner/go/src/github.com/gbrlsnchs/jwt/v3 (from $GOPATH)##[error]Process completed with exit code 1.```
38354;jwt/v3 exists afaik
38355;it wont work in the github action though
38356;"```YMLname: Goon: push: branches: [ v2 ] pull_request: branches: [ v2 ]jobs: build: name: Build runson: ubuntulatest steps:  name: Set up Go 1.x uses: actions/setupgo@v2 with: goversion: ^1.13 id: go  name: Check out code into the Go module directory uses: actions/checkout@v2  name: Move run: cd ./src/server  name: Get dependencies run: | go get v t d ./... if [ f Gopkg.toml ]; then curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh dep ensure fi  name: Build run: go build v .```"
38357;Should I use a database written in go or stick with mysql for web apis
38358;ok
38359;https://i.kawaii.sh/1iLHoKF.png
38360;why
38361;is this not found on my other machine
38362;@Riku are you using go modules? otherwise every dependency has to be installed
38363;also unrelated but does anyone have recommendations on a toml lib for go? or would I be better off just using json
38364;pelletier
38365;aight
38366;@Riku enable module mode on the build
38367;anyone know how i can? cmdName := docker events format \'{{json .}}\ i mean add \'{{json .}}\ inside a string
38368;you're looking for fmt.Sprintf
38369;or if you want to keep the string exactly as you wrote it use backticks
38370;yea i just fixed it but i fond that the problem was another thing xd
38371;Has anyone successfully connected to googles cloud sql with golang that would be willing to help?
38372;You‚Äôll probably get more help if you lay out an actual issue with what you‚Äôve tried what hasn‚Äôt worked and why üôÇ
38373;Have I worked with Google Cloud SQL specifically before? No but I‚Äôve worked with plenty of general SQL and I‚Äôm sure there‚Äôs plenty of parallels even if there are certain idiosyncrasies. I‚Äôm sure a lot of others who would be willing to help are in the same position
38374;Yeah I didn‚Äôt want to flood up the chat with any nonsense. I have a question on stack overflow regarding this issue here: https://stackoverflow.com/questions/63749598/inputtingdatatocloudsqlmysqlfromagolangapplicationrunningonappeng
38375;I updated the code based on the help I‚Äôve already received
38376;I would separate the code so you test just a single thing
38377;instead of the entire application
38378;Start with a simple function that just inserts a row into the DB
38379;If that works get the handler to work
38380;You've got a bunch of stuff going on so you don't know what might be causing the problem
38381;Besides it doesn't work we don't have any information atm
38382;I‚Äôve narrowed it down to an issue with the connection. I can fill in my information hit submit but I receive a 500. I then opened up the console in the browser and after I hit submit it seems to be struggling with POST. The data is being stored and I had it so that it would post to the URL temporarily and the input values were doing so and being stored. I‚Äôm a recent graduate and have never worked with a live site and DBs only locally so this is all new. I‚Äôve done my best to read all the documentation and watch videos etc.
38383;Sorry not trying to be vague
38384;> receive a 500while doing SQL? that sounds exceedingly weird
38385;Some stuff to unpack there. The error 500 is from your html page to your go application? With the data is being stored you mean it has been inserted into the db?
38386;If your application generated an error 500 you should be logging the error somewhere
38387;Right. If you're seeing a 500 that means an http request is broken or breaking something.
38388;Nothing to do with SQL.
38389;At least you have to start with the 500 before you can troubleshoot the rest.
38390;My previous advise still stands. Isolate the problem. Either by starting with something simpler and making it bigger until it breaks or by adding more logging
38391;"Ok sorry had to switch over to other computer. So I hit submit and looked at the console again. my guess is that it is an issue with the HandleFunc on my Insert function ```http.HandleFunc(""/insert Insert)```"
38392;That's what we're saying yes
38393;a 500 error means http
38394;so the first layer of problems is in your http code
38395;There are probably more
38396;but you gotta start at the top
38397;Ok so lets isolate the problem
38398;```POSThttps://mysite.uk.r.appspot.com/insert[HTTP/2 500 Internal Server Error 1825ms]``` is the error in the console which leads me to believe that that is the handler with the issue
38399;yes
38400;it's in the http handler
38401;which you still haven't shared or talked about in any capacity
38402;¬Ø\\_(„ÉÑ)_/¬Ø
38403;It would be helpful to have the server side logs. The client saying it doesn't work says nothing
38404;is there an idiomatic way to handle url query parameters for REST apis?
38405;parsing or formatting?
38406;both
38407;url.Values for formatting
38408;and FormValue for parsing
38409;awesome thanks @_diamondburned_
38410;np
38411;"Hey !This feels so dumb is there any better way to do that ?```gofunc formatSideBar(rows []string) []string { for i row := range rows { rows[i] = fmt.Sprintf(""[%d]  %s i+1 row) } return rows}// SideBar displays the sidebarfunc SideBar(rows []string) { rows = formatSideBar(rows).......```I wanted to make a method but I can\'t make them on basic types"
38412;dumb how?
38413;I'm copying my whole array
38414;you're not
38415;I feel like I could use pointers and shit to make it optimal
38416;but it doesn't work
38417;you're copying the slice headers but not the backing array itself
38418;in fact
38419;"```gofunc formatSideBar(rows []string) { for i row := range rows { rows[i] = fmt.Sprintf(""[%d]  %s i+1 row) }}```"
38420;`formatSideBar(rows)` will change rows
38421;you can try by printing rows right after calling that fn
38422;don't actually do this though
38423;yeah I know but I'm copying `rows` when passing it aren't I ?
38424;`rows` being the slice header yes
38425;which contains 2 ints and a pointer
38426;I tried using pointers
38427;why?
38428;but I couldn't figure out a way it would work
38429;well I don't want to copy it
38430;it's just formatting
38431;you're copying the header not the backing array
38432;can't I just modify my values
38433;bruhhhhhhhhhhhhhhh
38434;I
38435;I'm so confused
38436;https://play.golang.org/p/yCT6EquzCX7
38437;oh
38438;fuck me lmao
38439;why isn't that advisable ?
38440;because it's not explicit that the function modifies the slice
38441;the name does imply it but changing the backing array without a pointer is kind of a side effect for most people most of the time
38442;ffs kar
38443;:kkk_ANGERYJONES:
38444;> the name does imply it but changing the backing array without a pointer is kind of a side effect for most people most of the timeyeah but if it's already a pointer I can't make it more explicit what would you recommend ?
38445;> ffs karyes
38446;just do `slice = format(slice)`
38447;return the formatted slice
38448;also keep in mind that a slice isn\'t really a pointer
38449;it\'s a pointer with 2 integers
38450;and the integers along with this pointer are copied
38451;meaning if you append to the slice and you do not return it the outside slice (having the old length integer) will not show the new item
38452;https://research.swtch.com/godata
38453;refer to Slices
38454;oh this makes sense
38455;thank you
38456;np
38457;There's a question I'm curious about. It's how developer will pick between (complicated + higheffiency + timeconsuming code) or (simple + way more less time consuming for developing but low effiency code )
38458;always the latter
38459;developer time is the most expensive resource
38460;by many many many many orders of magnitude
38461;a 20% decrease in speed is an acceptable trade for the ability to hire a 60k dev to own the product instead of having to hire a 120k dev
38462;Okay but like google engine they can probably save more than millions by just optimising it.
38463;yes
38464;because they're operating at a scale you're not even capable of comprehending
38465;Depends on if you actually need this performance gain
38466;when you're spending 100 million on hosting 1% savings is a LOT
38467;if you're spending 10000 a year on hosting
38468;1% is
38469;uh
38470;10 dollars?
38471;100
38472;Okay I got what u mean
38473;It's ok deezy
38474;> Okay but like google engine they can probably save more than millions by just optimizing it.this is done after the fact
38475;But I feel bad to run low efficient codeüòÇ
38476;almost always
38477;good
38478;premature optimization is a waste of time
38479;you should notice when there are optimizations to be made
38480;but don't get obssessed with making them
38481;generally the process goes1. write code2. write code that actually works3. instrument code by benchmarking and profiling4. identify problem and fix code
38482;the process does NOT go1. write optimized code
38483;nor does it go1. write code2. write optimized code
38484;Lol this made me remind the broken traffic light memeüòÇ
38485;Funny how (simple + way more less time consuming for developing but low effiency code ) is a prefered method for all go developers but then a lot of them smack on python for being slow :kappa:
38486;yeah because dealing with Python takes more time for me
38487;and there's a difference between optimizing for microseconds milliseconds and seconds
38488;We're not telling people to write inefficient code. The amount of time spent to squeeze every bit of performance out of the code is often not worth it
38489;and there\'s a difference between spending developer hours on optimization and having a program that is immediately orders of magnitude faster completely for free because you started it in a natively compiled language
38490;Bad code is still bad
38491;^ these
38492;I think go can do better work than python since it is fast and computer language compiled
38493;Sure but same can be said about rust vs go
38494;not really
38495;it can?
38496;yes really
38497;no
38498;links
38499;provide evidence for your claim
38500;i'm interested
38501;Rust takes exponentially more effort to develop because it has more checks
38502;What links do you want? That its faster than go lol?
38503;Go is the perfect middle spot
38504;Go is faster than Python while still not being too hard to develop
38505;which is its objective as a language
38506;that general programs written in rust are orders of magnitude faster than comparable programs written in go yes
38507;rust is harder to master tho
38508;1ms is orders of magnitude faster!!!!!! :strawman:
38509;lol 1msüòÇ
38510;https://www.techempower.com/benchmarks/#section=datar19&hw=ph&test=json,```JSON serialization  Rust is 3rd Go is 29th but with only 5% marginSingle query  Rust is 1st Go is 14th with 49% marginMultiple queries  Rust is 1st Go is 20th with 43% marginFortunes  Rust is 1st Go is 4th but with 38% marginData updates  Rust is 1st Go is 24th with wooping 57% marginPlaintext  Rust is 1st Go is 8th with almost 0% margin```
38511;I think every programming language have their purpose to assist/created
38512;the difference between and array and a slice is that slices are declared without the slice size and the append function can be used?
38513;> assuming most of the web's bottleneck isn't IO
38514;and look at algorithm benchmarks rust can be be sometimes x5 times faster than go sure there are cases when go could be faster but generally rust is a faster language in terms of execution speed its not news
38515;What kind of benchmark is this
38516;a shitty one
38517;most benchmarks that pair languages up against each other are usually shitty
38518;a prime example being benchmarkgames
38519;Sure isnt @_diamondburned_ which is why i use frameworks like django most of the bottlenecks i ever have to deal with is at the database
38520;ok cool
38521;end of discussion
38522;now if you don't mind I will resume writing code that isn't a web project
38523;because Go is more capable than that
38524;these are also still not differences in orders of magnitude they're differences of percentage points
38525;> the difference between and array and a slice is that slices are declared without the slice size and the append function can be used?@converge Yeah I think so but not sure about the append
38526;Bruh I\'ve had someone at my school making fun of me because \'wow you\'re using go for web? That\'s really niche no? Seems weird to use go for that
38527;So baffled at the cheer ignorance and audace
38528;"> Bruh I\'ve had someone at my school making fun of me because \'wow you\'re using go for web? That\'s really niche no? Seems weird to use go for that""@Monique Keep your mouth shut and master it. He/She will regret in the futureüòÇ"
38529;> rust is harder to master thoit's not just hard to master
38530;It's hard to even start
38531;the learning curve is no smaller than ASM
38532;Yeah the learning curve is STEEP
38533;@zephyrtronium Are you blindfolded? Rust takes more time to develop in but its no news that its faster than go https://benchmarksgameteam.pages.debian.net/benchmarksgame/fastest/rustgo.htmlSure Go is fast enough but to claim that other low level languages are not gonna be faster is just plain naive imo
38534;@BryanC12 I mean yeah tho sometimes it's hard not to just go apeshit at them
38535;you're ignoring my claim
38536;i'm talking about orders of magnitude
38537;Any reason why my school wanted to teach us VB .net I think that's sucks
38538;It's still not orders of magnitude faster
38539;you're talking about percentage points
38540;lmao
38541;whats VB.net
38542;Double the speed in some settings is a major deal breaker for some applications
38543;please don't @ me with insults thanks
38544;oh visual basic
38545;Also double the dev time and technical debt
38546;are you in 1985
38547;then don't claim non evidence based facts
38548;That's why I'm asking üòÇ
38549;And yeah @'ing someone in an offensive manner isn't adding much constructiveness to the discussion
38550;Teach us C++ or C will be better than that I think üòÇ
38551;I mean
38552;Learning C is great
38553;Actually
38554;yes
38555;just learn C
38556;wtf Visual Basic
38557;also
38558;arguing in the general case about performance is about as useful as arguing about how delicious food is
38559;if you prepare it correctly of course it's delicious
38560;but the details are what matter
38561;> arguing in the general case about performance is about as useful as arguing about how delicious food is@deezy true so true
38562;My car is better than this truck
38563;:sueur:
38564;Program into the language not in the language.
38565;> wtf Visual Basic@Karitham That's what I'm trying to say.
38566;@Karitham what school u in?Just curious if you're in a certain two digitsnamed French school
38567;I generally don't care because i find python to be fast enough for most of what i ever have to deal with. I'm not operating at the scale of big companies.Although that does not mean i invalidate that some languages could do the job much faster but i prefer the speed of development with python and django for instance
38568;or go if i need to deal with concurrency because it plain sucks in python
38569;nope not 42
38570;CESI
38571;private engineering school
38572;Noice!
38573;ü•ñ in chat üòõ
38574;Hell yeah
38575;it's a school that uses PBL as a learning method
38576;and I'm very fond of that
38577;(Problem Based Learning)
38578;Oooh so like you learn by doing projects?
38579;exactly
38580;each project is around 2 month time
38581;(Maybe switch to #offtopic )Niiiice we do the same at 42 this approach is great for me
38582;> the learning curve is no smaller than ASM@Karitham ASM learning curve isn't steep it just looks scary
38583;you talk like a rust programmer
38584;checks server in common oh god they're onto us already
38585;None
38586;he's a rust programmer
38587;be careful
38588;:ferrisRound:
38589;For example if Golang run after than X three times faster for DeepLearning does it mean we safe ~60% compute power/~ 3x faster
38590;^ impossible to understand
38591;Worth noting that some of the data processing in done through C bindings that you can access through python packages so its not as slow as native python
38592;but they seem to value fast prototyping over everything
38593;where do you host small go api's?
38594;I use to have my apis at netlify free account (using JS/node)
38595;Netlify allows hosting backends for free?
38596;:Thonk:
38597;I just host them on a VPS or my home server
38598;yes lambda / functions way
38599;can't you do the same w/ Go
38600;Go lambdas are a thing
38601;dont know... Im pretty new to Go I'll reactive my digital ocean account its pretty good and chea
38602;https://docs.netlify.com/functions/buildwithgo
38603;how would you guys fix the issue of duplicate types
38604;when using say
38605;gqlgen
38606;so you'd have 23 versions of the same type
38607;1. the gql generated types2. the main domain / business logic types3. optionally the db types (I've reused those with the main domain types when doing rest apis)
38608;what is nil
38609;like shortcut for what
38610;not inintialized lol
38611;:gopher:
38612;"`nil` means nothing"". nothing is here"". as opposed to `""""` which is a string with no contents"
38613;for example
38614;nothing is here
38615;h != l
38616;okay here's a different example
38617;let's say you have box
38618;whether that box is empty or has things inside of it you have a box in your hands
38619;now let's say you don't have a box
38620;that's nil
38621;Ah
38622;nil is null
38623;and what is full
38624;nothing special
38625;you just have a box
38626;with stuff in it
38627;zero or more stuff
38628;i mean as noun
38629;like what is the full name of it
38630;you got me
38631;n i l
38632;there isn't one?
38633;this is just a rough metaphor
38634;wat
38635;i mean
38636;full is an existent word
38637;null ?
38638;null no
38639;nil is not null
38640;that also exists? but it's not relevant to go
38641;Ah
38642;get it
38643;in go it's called nil
38644;I think rust have nil also
38645;or ruby
38646;forget which one
38647;most languages have a concept representing you are not holding a box
38648;rust doesnt have nil
38649;rust has None
38650;and it's not the same
38651;C has null
38652;rust has enums
38653;ruby then
38654;of which there is one that can denote None
38655;but it isnt null/nil
38656;either way you get the point
38657;``` nil is a frequently used and important predeclared identifier in Go. It is the literal representation of zero values of many kinds of types. Many new Go programmers with experiences of some other popular languages may view nil as the counterpart of null (or NULL) in other languages. This is partly right but there are many differences between nil in Go and null (or NULL) in other languages. ```
38658;https://go101.org/article/nil.html
38659;full article
38660;for those who are not lazy as f like me
38661;i gotta say coming from mainly dealing with typescript i always type stuff like `string[]` instead of `[]string` and get really disappointed in myself
38662;its like a mental block at this point
38663;hahahahha
38664;were all same I think
38665;go it's better I think
38666;like
38667;var []string
38668;unitil.. variable represent an array of type string
38669;var string[]
38670;i have the same issue with this pandas method called `value_counts()`... I always type it wrong 23x as `values_count()` or `values_counts()` or something even though I've specifically used it a billion times it just never sticks
38671;unitil.. variable of type string represent an array
38672;?!
38673;that's why we have auto completion
38674;and docs
38675;:p
38676;because we have 999999999999 problem in mind
38677;we can't remember sht
38678;Can I say `WE` or just `I`
38679;> It is the literal representation of zero values of many kinds of types.
38680;Well no
38681;The zero value of all primitives is _not_ nil
38682;Same goes for other types
38683;"!go```gotype Banana struct { Colour string}func main () { var b banana fmt.Printf(""%T b)}```"
38684;right that doensn't work
38685;"!go```gotype Banana struct { Colour string}func main() { var b Banana fmt.Printf(""%T b)}```"
38686;```./prog.go:10:8: undefined: bananaStatus = 0```
38687;¬Ø\\_(„ÉÑ)_/¬Ø
38688;Doesn't work when you define a main func for that command
38689;https://play.golang.org/p/GfR7U5LUAhe
38690;the type is wrong
38691;Yeah fixed that
38692;https://discordapp.com/channels/118456055842734083/123909027464871938/751895056469721168
38693;it does
38694;The value of `b` is the zero value of Banana which is just a struct with the zero value of string for `Colour`
38695;Which is
38696;"!go```gotype Banana struct { Colour string}func main() { var b Banana fmt.Printf(""%#v b)}```"
38697;None
38698;yes
38699;There we go
38700;That is _not_ nil
38701;which Docker image do you guys use to use for Go apis?
38702;golang:alpine into scratch
38703;multilayered build
38704;I mostly use alpine for my actual images as well since that has the cacerts and tzdata
38705;you ever have any issues using golang:alpine? the official notes on dockerhub say its not technically recommended iirc
38706;I build in golang:apine and then copy to normal alpine
38707;```golang:<version>alpineThis image is based on the popular Alpine Linux project available in the alpine official image. Alpine Linux is much smaller than most distribution base images (~5MB) and thus leads to much slimmer images in general.This variant is highly experimental and not officially supported by the Go project (see golang/go#19938 for details).The main caveat to note is that it does use musl libc instead of glibc and friends which can lead to unexpected behavior. See this Hacker News comment thread for more discussion of the issues that might arise and some pro/con comparisons of using Alpinebased images.To minimize image size additional related tools (such as git gcc or bash) are not included in Alpinebased images. Using this image as a base add the things you need in your own Dockerfile (see the alpine image description for examples of how to install packages if you are unfamiliar). See also dockerlibrary/golang#250 (comment) for a longer explanation.```
38708;im a go noob but ive just been doing golang > scratch
38709;disable CGO when doing that btw
38710;Ye
38711;I just use it for builds
38712;Otherwise it might just die on you when running in scratch
38713;Then use plain alpine
38714;yeah ur right
38715;there is one buster(debian) version sounds good
38716;something like this
38717;"```FROM golang:1.15.0 as buildStageWORKDIR /appCOPY ./go.mod ./go.sum ./RUN go mod downloadCOPY . .RUN CGO_ENABLED=0 go build o app ./cmdFROM scratchCOPY from=buildStage /app/app ./app""CMD [""./app""]```"
38718;Does alpine come with timezone data and ca certs?
38719;not by default right?
38720;But available as packages
38721;Yeah not by default
38722;You can install them
38723;My bot is still pretty small but using the `alpine` image it is still only `8.33MB` in size
38724;```FROM golang:1.12alpine as builderRUN apk update && apk add nocache git cacertificates && updatecacertificates```
38725;I just created a api hello world using goland:buster > 839MB
38726;a very old docker file
38727;And with Go 1.15 it doesn't matter if the tz data is included because you can imbed it in the binary
38728;but it's ez
38729;"```gofunc (app App) createQuote(b []byte) error { q := &Quote{} err := json.Unmarshal(b q) if err != nil { return errors.Wrap(err createQuote: cannot unmarshal the JSON data"") } // Now we can create the quote in the storage if it does not exist already. _ ok := app.storage[q.Author] if !ok { app.storage[q.Author] = q return nil } return errors.Errorf(""author %s already exists q.Author)}```"
38730;why he use q as address
38731;It won't be included by default and can only be embedded when the build image provides it
38732;because json.Unmarshal's second parameter requires it
38733;You can use `fmt.Errorf` to wrap errors and avoid pulling in the `errors` package
38734;aha
38735;so Unmarshal require an pointer
38736;https://golang.org/pkg/encoding/json/#Unmarshal
38737;`Unmarshal parses the JSONencoded data and stores the result in the value pointed to by v. If v is nil or not a pointer Unmarshal returns an InvalidUnmarshalError.`
38738;in the eample
38739;they pass &q
38740;directly without storing it
38741;?
38742;in the example of marshal
38743;he use directly the thing passed as parameter
38744;without storing it
38745;inside a variable
38746;Which example??
38747;"```gofunc (a Animal) UnmarshalJSON(b []byte) error { var s string if err := json.Unmarshal(b &s); err != nil { return err } switch strings.ToLower(s) { default: a = Unknown case gopher"": a = Gopher case zebra"": a = Zebra } return nil}```"
38748;oof
38749;my bad
38750;he store a variable
38751;not sure what the question is
38752;> like shortcut for what@oni chan nil is just English for zero
38753;it's not an abbreviation
38754;as you thought
38755;Except that in the context of Go the zero value and nil are not the same üòâ
38756;well yes
38757;but the zero value of a pointer is nil
38758;:02smug:
38759;anw
38760;None
38761;bumping my q
38762;Haven't run into that yet
38763;ü§î
38764;should I use gorilla/mux to create apis?
38765;"> ```go> func (app App) createQuote(b []byte) error {> q := &Quote{}> err := json.Unmarshal(b q)> if err != nil {> return errors.Wrap(err createQuote: cannot unmarshal the JSON data"")> }> > // Now we can create the quote in the storage if it does not exist already.> _ ok := app.storage[q.Author]> if !ok {> app.storage[q.Author] = q> return nil> }> return errors.Errorf(""author %s already exists q.Author)> }> ```@oni chan i same code here is the app.storage[q.Author] = q  q will be saved in the HEAP?"
38766;@converge Have you tried the standard library yet?
38767;not yet is it better?
38768;Most of the other libraries expand the stdlib one
38769;Once you need more functionality it can be worth looking at other muxes
38770;perfect! thx
38771;Anything idiomatically wrong with using a closure to do something simple like strip each digit off a number? ```gonextDigit := func() int { rem := x % 10 x /= 10 return rem }```
38772;Rather than just doing that logic within a loop or whatever
38773;Not necessarily
38774;I had a different closure pretty similar and someone said you\'d never see that in real code haha so just making sure it wasn\'t a faux pas or something to use closures like that
38775;i'd prefer a plain loop over a closure but that doesn't make it wrong to use one
38776;that looks like you can just use a normal fn
38777;Let me show another example
38778;```go curRow := 0 // true is up false is down direction := true  oscillate := func() { if direction == true { if curRow < numRows1 { curRow++ } else { direction = false curRow } } else { if curRow > 0 { curRow } else { direction = true curRow++ } } }```
38779;So in this case curRow just needs to oscillate up and down from 0 to `numRows`
38780;So I started writing a regular function to do it then when I realized I needed to keep track of whether it's currently going up or down what the current number is what the max number is etc I was like instead of passing in 4+ arguments to a regular function just close over a couple
38781;> t's currently going up or down what the current number is what the max number is etc I was like instead of passing in 4+ arguments to a regular function just close over a couplemake a struct
38782;that contains the data
38783;with methods on it
38784;to change that data
38785;You could eliminate the else statement s by returning in the ifs
38786;and then just pass the struct into the function
38787;Sure making a custom type would be a good way to go too. In this case this was only relevant in an outer function nowhere else in the code
38788;It\'d be cleaner if there was an oscillator generator that was a regular function that returned the closure so there aren\'t random variables like `direction` that are irrelevant to anything but the closure
38789;imho either works
38790;they just seem like preference
38791;I'd go w/ struct
38792;if ur returning a int and a error from a fucntion. for the non error outcome u would do the int and nil but what do u do for the error outcome
38793;cuase u cant do nil for the int types
38794;or it doesn't matter cause u wont be checking for that anyway
38795;zerovalue for the nonerror type so 0 for ints
38796;thanks!
38797;```gotype direction boolconst ( Left direction = false, Right direction = true)type oscillatingIndex struct { index int currentDirection direction }func (oi oscillatingIndex) Oscillate() { if(dirrection == Left) { ... } else if direcrion == Right { ... }}```
38798;üôÇ
38799;else if bad
38800;i know
38801;and that type feels redundant
38802;just do `isLeft bool`
38803;i didnt feel like going through the effort
38804;isLeft is meaningless
38805;what does false mean for isLeft
38806;is right
38807;you cant tell without looking at the doc
38808;yeah you can
38809;the opposite of left is right
38810;no you are assuming
38811;that is the case
38812;how
38813;it's impossible to know everything for 100% certainly
38814;sure
38815;you're always assuming
38816;if something is called oscillator how do you know it doesn't involve sine waves?
38817;how do you know it belongs to a specific domain?
38818;but you can make things clearer
38819;sure you can make things needlessly verbose to make sure everybody gets it even those who may never even look at the code
38820;whatever man
38821;or you can keep it clean and simple
38822;pointless argument
38823;it's literally part of Effective Go but sure
38824;okay
38825;thank you
38826;for the insight
38827;Haha thanks both of you for the input though
38828;any idea why the return of /ipaddress endpoint is returning empty array? https://pastebin.ubuntu.com/p/66gKhc4fX3/
38829;@fr3fou im not sure about go specifically but i know other languages like c# employ data mapping libs to translate your business domain objects to your dtos
38830;ik about c#
38831;@converge unexported fields
38832;but not go
38833;:blobpensive:
38834;unexported struct fields
38835;local error: tls: unexpected message
38836;damn it stroom too fast
38837;i mean you could do the same thing
38838;:kkk_LOLTROLLFACELOL:
38839;Just tell me im wrong and youre first @Sgt_Tailor
38840;im not sure if its the idomatic way of doing it
38841;but it works
38842;yes I've thought about it
38843;but toooo verbose
38844;:blobpensive:
38845;and
38846;mhmm
38847;more importantly
38848;local error: tls: unexpected message i didnt find a lot of info on this error anyone have a clue what it might be ?
38849;if i change something I'd have inconsistencies
38850;@Str≈ìm thx!
38851;i just dont know if you are going to get mapping system thats easy to use and have it not so rigid in go without a lot of work
38852;you would need a layer between your domain layer and dto layer that translates things
38853;maybe someone here has more insight on that
38854;is there a tool that helps you show files of a package?
38855;I can only come up with sth like `grep package mypkg'`
38856;all the files of a package are in the same directory
38857;the import path dictates where that directory is
38858;yeah but there can be multiple pkgs in a dir
38859;No
38860;there can't be
38861;if that happens then that package is invalid
38862;go list perhaps
38863;I think he means sub packages
38864;https://golang.org/src/sort/genzfunc.go has main package but others are sort
38865;does generated files behave differently?
38866;sort or sort_test
38867;oh
38868;`// +build ignore`
38869;ahh
38870;Getting this error when installing cobra cli in a `go mod init` project. I've removed `/home/x/go/pkg/github.com/spf13` `/home/x/go/src/github.com/` and `/home/x/go/pkg/github.com/` but the issue persists```ts$ go get github.com/spf13/cobra/cobrago: github.com/spf13/cobra/cobra upgrade => v0.0.02020082615185102a0d2fbc9e6go get github.com/spf13/cobra/cobra: ambiguous import: found package github.com/spf13/cobra/cobra in multiple modules: github.com/spf13/cobra v1.0.0 (/home/x/go/pkg/mod/github.com/spf13/cobra@v1.0.0/cobra) github.com/spf13/cobra/cobra v0.0.02020082615185102a0d2fbc9e6 (/home/x/go/pkg/mod/github.com/spf13/cobra/cobra@v0.0.02020082615185102a0d2fbc9e6)```
38871;there should be a `github.com/spf13/cobra` in your go.mod not `github.com/spf13/cobra/cobra`
38872;^
38873;oh no
38874;Yeah I've removed everything from `spf13`
38875;they are trying to get the cli
38876;Yep
38877;in that case run go get with GOMODULES=0
38878;and it will install it in GOPATH
38879;so you can build it
38880;GO111MODULE=0 iirc yeah
38881;or just cd out lol
38882;that is the one
38883;It's always installing in ~/go though right?
38884;Yeah to the location of $GOPATH/bin which is ~/go/bin by default
38885;yeah
38886;$GOBIN or $GOPATH/bin or ~/go/bin
38887;I get the same error```go: github.com/spf13/cobra/cobra upgrade => v0.0.02020082615185102a0d2fbc9e6go get github.com/spf13/cobra/cobra: ambiguous import: found package github.com/spf13/cobra/cobra in multiple modules: github.com/spf13/cobra v1.0.0 (/home/x/go/pkg/mod/github.com/spf13/cobra@v1.0.0/cobra) github.com/spf13/cobra/cobra v0.0.02020082615185102a0d2fbc9e6 (/home/x/go/pkg/mod/github.com/spf13/cobra/cobra@v0.0.02020082615185102a0d2fbc9e6)```
38888;run the command in a directory that doesn't have a go.mod
38889;I did
38890;run it in home
38891;```[x@y ~]$ go get github.com/spf13/cobra/cobrago: github.com/spf13/cobra/cobra upgrade => v0.0.02020082615185102a0d2fbc9e6go get github.com/spf13/cobra/cobra: ambiguous import: found package github.com/spf13/cobra/cobra in multiple modules: github.com/spf13/cobra v1.0.0 (/home/x/go/pkg/mod/github.com/spf13/cobra@v1.0.0/cobra) github.com/spf13/cobra/cobra v0.0.02020082615185102a0d2fbc9e6 (/home/x/go/pkg/mod/github.com/spf13/cobra/cobra@v0.0.02020082615185102a0d2fbc9e6)```
38892;bruh
38893;for fun: try setting GO111MODULE=off
38894;^
38895;export for good measure
38896;inb4 home is a go module
38897;xD
38898;I was just asked a simple question and I wonder which is better :```goif exp == nil || act == nil { return exp == act}```and
38899;aren't 2 nil checks faster than a comparison ?
38900;p sure 2nd is faster if we're being pedantic about performance
38901;Both are terrible
38902;but go with whatever is more clear
38903;pointless
38904;i mean
38905;2nd is slower
38906;If you already know both are nil return true directly
38907;Whats the point in comparing if you already know what both are
38908;nah the if checks if either are nil
38909;not both
38910;Je suis petit brain
38911;???```[x@y ~]$ set GO111MODULE=off[x@y ~]$ go get github.com/spf13/cobra/cobrago: github.com/spf13/cobra/cobra upgrade => v0.0.02020082615185102a0d2fbc9e6go get github.com/spf13/cobra/cobra: ambiguous import: found package github.com/spf13/cobra/cobra in multiple modules: github.com/spf13/cobra v1.0.0 (/home/x/go/pkg/mod/github.com/spf13/cobra@v1.0.0/cobra) github.com/spf13/cobra/cobra v0.0.02020082615185102a0d2fbc9e6 (/home/x/go/pkg/mod/github.com/spf13/cobra/cobra@v0.0.02020082615185102a0d2fbc9e6)[x@y ~]$ echo $GO111MODULEon```
38912;```if exp == nill && act == nil{ return true}```
38913;set?
38914;where's that from?
38915;lmao yes
38916;guess I'll try export as well
38917;do `export GO111MODULE=off`
38918;that works too
38919;or `export GO111MODULE=auto`
38920;actually it should always be auto
38921;@Sgt_Tailor that doesn't do the same thing does it
38922;idk what they need tho
38923;it looks like its on their system already
38924;Hey it worked
38925;just need to build/install
38926;üëç
38927;truth table should be the same right? Only returns true if both are nil
38928;yeah but false could be returned as well
38929;if one of them is nil but not the other
38930;Can you explain why I couldn't just install it from my go project?
38931;because you had GO111MODULE=on
38932;for some reason
38933;No it couldn't because it checks for equal or explicitly both nil
38934;Ok
38935;yeah it could
38936;that doesn't do the same thing
38937;```goif exp == nil || act == nil { return exp == act}```
38938;Thanks for the help
38939;because it doesn't return
38940;a == nil || b == 0 { a == b}that is only true of both are nil
38941;but you're not returning if a == b
38942;yes but then it returns false
38943;you're returning regardless if a == b
38944;while yours doesn't return at all
38945;Ah right
38946;ugly time :```goif exp == nil && act == nil { return true} else { return false}```
38947;probably the fastest I guess
38948;false will be returned of neither are true in that case
38949;else branch can be removed
38950;add return false after if
38951;If that is the desired result you can remove the else
38952;remove the whole if lol
38953;just return the expression
38954;lmao true
38955;yep
38956;```goreturn exp == nil && act == nil```
38957;what if neither is nil ü§®
38958;but then if none are nil it doesn't continue
38959;dude
38960;ok lemme ask this
38961;what significance does the boolean have?
38962;Can we not change the conditions of the code please üòõ
38963;does it indicate if both the return values are nil? or does it indicate if both the return values point to the same thing?
38964;if former `a == nil && b == nil`
38965;not sure
38966;if latter `a == b`
38967;well make up your mind
38968;I was just asked the best way to do this
38969;It must do X > code that does X has been provide. Ow it must also do Y
38970;> Can we not change the conditions of the code pleaseat this rate it will just be `return false`
38971;the best way to do it is the way that best explains your intentions
38972;I guess the point is to keep the original behavior
38973;also what's the type of exp and act? use len() == 0 to check empty if slice
38974;map
38975;honestly there's rarely ever a point in comparing a map/pointer/slice w/ `a == b`
38976;true
38977;the goals is just to make an assert function
38978;imo if you add a comment above a == b explaining that it's intended to check if both is nil then it might work
38979;something like
38980;```if a == nil || b == nil { // shorthand for checking if both are nil as one of them is. return a == b}```
38981;```if len(exp) == 0 || len(act) == 0 && len(exp) != len(act) { // assert}```
38982;len(exp) != len(act) || len(exp) == 0
38983;ultimately I think the check cares when one is empty while the other isn't
38984;nop
38985;or yes
38986;the check is if either are nil return false if both are nil return true else continue
38987;then if len(e) == 0 || len(a) == 0 { return len(e) == len(a) }
38988;btw slices and maps (and functions) can be compared only to nil
38989;makes sense
38990;a slice is just a pointer with 2 integers as diamond said
38991;for functions it's natural
38992;as for maps I'm not sure why we can't compare them
38993;but I have no idea how they're made so :NanaShrug:
38994;more slices
38995;And some more slices
38996;Lots of generated code lol
38997;Cant remember of the buckets are chained or contingous
38998;you'd compare maps roughly the same as you'd compare a slice
38999;make a new function for the nth time that does a len check and some loops
39000;Low key go‚Äôs map syntax is one of the undersold features
39001;.get .contains
39002;:noahsux:
39003;```#[derive(Eq)]type Map map[string]string```
39004;did i do it right
39005;it's not derive is it
39006;It is
39007;Lowercase
39008;nice
39009;What is this
39010;Rust
39011;Oh
39012;Gross
39013;yes
39014;Macros to automatically impl certain traits
39015;Don‚Äôt tell the borrow checker I said that
39016;Might come for me
39017;:ferrisballSweat:
39018;:gopherballSweat:
39019;:amegablobsweats:
39020;:CoconaSweat:
39021;üí¶
39022;If my go package isnt actually in the root directory do i change the module path to the exact path?
39023;or the repo path
39024;not really a dep just trying to organize to convention
39025;Is this Go related :fellas:
39026;It was in Go with Go AWS SDK and goformation. Couldn't find an AWS related topic. Message deleted.
39027;So I'm confused about interfaces. I'm under the understanding that you can store either a pointer or a struct in an interface. It seems like there are issues with storing a pointer in a map of [string]MyInterface and calling pointer methods on it.
39028;When I call pointer methods on the pointer returned from accessing it at the map it doesn't seem to commit the changes
39029;you can store any type in an interface as long as those types have the methods required
39030;> When I call pointer methods on the pointer returned from accessing it at the map it doesn't seem to commit the changessend code
39031;Well maybe I'm screwing something up somewhere else because I wrote a small snippet to display this and the snippet is working as expected.
39032;it's likely that you're trying to access methods on the pointer that aren't in the interface
39033;Well the pointer I'm calling the method on is pulled from a map as the interface not certain I follow what youre saying otherwise
39034;what is the code thats not working
39035;can you just snippet that
39036;JFC
39037;I'm so dumb
39038;ü¶Ü
39039;rubberduck moment
39040;I wrote a method to MAKE a copy of the struct at the pointer (For returning the details in an api) and the function that gets the pointer out of the map was calling that copy method on the pointer and returning the copy üòÑ
39041;IDK why I did that
39042;Hey! So I'm trying to output a JSON response from an API to a Go webserver and all I've managed to do is output it to the terminal. Whenever I try to do it to the actual webserver it doesn't work out. All I can do is a basic <h1> tag and not the actual JSON response to the webserver page. Here is the code:
39043;"```gopackage mainimport ( fmt"" io/ioutil"" log"" net/http"" os"")// Todo Structuretype Todo struct { userID int id int title string completed bool}func main() { http.HandleFunc(""/hello func(w http.ResponseWriter r http.Request) { fmt.Fprintf(w <h1>Todo</h1>"") w.Header().Set(""ContentType text/html"") fmt.Fprintf(w <h1>Weather</h1><ul>"") }) response err := http.Get(""http://jsonplaceholder.typicode.com/todos/1"") if err != nil { fmt.Print(err.Error()) os.Exit(1) } responseData err := ioutil.ReadAll(response.Body) if err != nil { log.Fatal(err) } fmt.Println(string(responseData)) if err := http.ListenAndServe("":8080 nil); err != nil { log.Fatal(err) }}```"
39044;Any idea as to what's going on?
39045;it's not really clear what you're trying to do
39046;right now you're sending an http request and then starting an http server
39047;your errors are being checked
39048;correct
39049;right
39050;so it's not clear what's wrong
39051;It doesn't actually output the JSON response to the server. All I have managed to output it to is the console
39052;yeah that's the problem
39053;> json response to the server
39054;typically servers are the ones resonding
39055;Whenever I try to replace `<h1>Todo</h1>` with the actual `responseData` variable it says responseData is undefined. But when I print it to the terminal it logs fine
39056;your code doesn't really demonstrate you doing that though
39057;so i can't comment on code i can't see
39058;"```gopackage mainimport ( fmt"" io/ioutil"" log"" net/http"" os"")// Todo Structuretype Todo struct { userID int id int title string completed bool}func main() { http.HandleFunc(""/hello func(w http.ResponseWriter r http.Request) { fmt.Fprintf(w string(responseData)) w.Header().Set(""ContentType text/html"") fmt.Fprintf(w <h1>Weather</h1><ul>"") }) response err := http.Get(""http://jsonplaceholder.typicode.com/todos/1"") if err != nil { fmt.Print(err.Error()) os.Exit(1) } responseData err := ioutil.ReadAll(response.Body) if err != nil { log.Fatal(err) } fmt.Println(string(responseData)) if err := http.ListenAndServe("":8080 nil); err != nil { log.Fatal(err) }}```"
39059;there it is with the <h1> tags in main replaced by the var name. It throws an error and says that responseData isn't defined
39060;"``` fmt.Fprintf(w string(responseData)) w.Header().Set(""ContentType text/html"")```"
39061;That var isn't defined before you try and use it
39062;` fmt.Fprintf(w string(responseData))`
39063;this shouldn't even compile
39064;and also you must write headers before writing content
39065;> That var isn't defined before you try and use it@Doad When I actually define it on top how would I log it to the HTML and display it with the header?
39066;very new with Go if you can't tell üôÇ
39067;Just get your response before setting up your handler
39068;right. so I moved the `http.HandleFunc` below everything else in `main`
39069;how can I actually refer to the `responseData` var in the header?
39070;It'll be in scope of you define the handler below it
39071;what exactly do you mean?
39072;You can reference it because it is in scope
39073;If you're not sure what scope is you might want to read up about it
39074;Basically if something is in scope you can access it
39075;And you can't access it if it's out of scope
39076;Yeah it should now be in scope bc the handler is after all of the declarations. This is what I've got now for the handler and it still says it's undefined...
39077;"```gohttp.HandleFunc(""/hello func(w http.ResponseWriter r http.Request) {  w.Header().Set(""ContentType text/html"") fmt.Fprintf(w responseData) })```"
39078;is it better to do
39079;```GOlist := new([]string)```or ```GOvar list []string```
39080;they do different things
39081;the first returns a nonnil pointer to a nil slice of strings (`[]string`)
39082;:PredatorCat: so one goes to stack and other to heap
39083;is that right?
39084;no not necessarily
39085;whether a pointer goes to the heap or stack is completely up to Go's escape detector
39086;Go doesn't give you explicit control over that
39087;> ```GO> list := new([]string)> ```> or > ```GO> var list []string> ```@Riku how exactly do I refer to that in the handler func?
39088;:BCS_PepeLaugh: i was asking a question not answering yours
39089;lol
39090;@_diamondburned_ have you used echo? It seems like it works nicer and takes care of alot of things for you on the http side but doesnt abstract too much. Are there downsides with it?
39091;i've not
39092;i usually make domainspecific abstractions in internal packages
39093;same here i just decided to use echo for the quickness and it seems alot nicer tbh
39094;https://i.kawaii.sh/v3Ttz4H.png
39095;and json marshalling is replaced by Bind but that doesnt really change anything its just slightly different so you dont do `r.body` so :5_bugcatstare:
39096;yeah my internal package does something close to that
39097;https://godoc.org/github.com/diamondburned/smolboard/server/http/internal/tx#Handler
39098;return type is json rendered
39099;status code is parsed from errors
39100;https://godoc.org/github.com/diamondburned/smolboard/smolboard#pkgvariables
39101;nice booru clone
39102;:BCS_PepeLaugh:
39103;me likey
39104;is there a public instance?
39105;@_diamondburned_ wanna check it out was thinking of making one myself but fancier style than most
39106;like still a booru just different organization
39107;```go var s int for _ n := range []int{1 2 3} { s = s10 + n } fmt.Println(strconv.Itoa(s))```from []int{1,2,3} to 123 thoughts?
39108;:5_bugcatstare: are you trying to cube a number by 10 and add the index to it?
39109;is that what that is
39110;you know... you could use for loops
39111;"```Go for i := 0; i < 3; i++ { s = s10 + i }```"
39112;@func
39113;yeah it\'s more general input can be []int{1,2,3,4,5} and I want 12345 for example
39114;ah
39115;@Riku my friend hosts one but the stuff there are slightly questionable
39116;i can dm link
39117;alright
39118;```gos := bytes.Buffer{}s.Grow(len(ints))for _ n := range ints { s.WriteString(strconv.Itoa(n))}return s.String()```
39119;that's what I'd do
39120;looks nice so far i like the interface :KM_Dorime:
39121;of the site
39122;yeah I used a CSS framework this time
39123;cba not to
39124;and this one was pretty nice too
39125;I personally would make it public upload and have verification for images
39126;has dialogs and stuff
39127;is it bulma?
39128;mini CSS
39129;the truth is
39130;someone commissioned me on this project :OMEGALUL:
39131;so I made it tailored to their request
39132;:KEKW:
39133;bruh i use vue now for frontend its easier to manage many components at once
39134;for projects that are simple and dont need open API's i dont bother
39135;but for larger ones with admin panels and shit i use vue
39136;and just make a dockerfile to host both at once in one container
39137;> ```go> s := bytes.Buffer{}> s.Grow(len(ints))> > for _ n := range ints {> s.WriteString(strconv.Itoa(n))> }> > return s.String()> ```@_diamondburned_ any specific benefit over my naive one?
39138;also check this out https://vuesax.com/
39139;:BCS_PepeLaugh: this is really really cool
39140;it looks really nice and I might use it on some larger projects in the future
39141;@func not really
39142;I just prefer it
39143;didnt know s.Grow or Writestring was a thing
39144;:5_bugcatstare: or that you could use bytes like that
39145;bytes.Buffer is very extensible
39146;smolboard does have an API btw
39147;and the site does use the API
39148;yeah i checked net tab
39149;its ssr
39150;check out vuesax tho
39151;its like the nicest css framework ive seen ever
39152;has that nice pop out style while still looking flat
39153;also for context @_diamondburned_ do you sometimes just write projects but they kinda suck so you rewrite them?
39154;:BCS_PepeLaugh: also how long do your projects take usually
39155;> do you sometimes just write projects but they kinda suck so you rewrite them?all the time
39156;> also how long do your projects take usuallydepends on how big it is how usable it is and how much effort I'm willing to spend on it
39157;yall is there some tool where i can slap in my struct def and it auto types the json tags for me? can goland IDE do this for me?
39158;https://mholt.github.io/jsontogo/
39159;close enough
39160;protobuf
39161;:stare: i think
39162;converts to both json and from json
39163;:BCS_PepeLaugh: waifu.pics is so simple yet im rewriting it again for the second time
39164;@_diamondburned_ trying to write my program in this type of stylehttps://i.kawaii.sh/QD2Ijj0.png
39165;you think its worth it or do you have other organization ways?
39166;i still cant structure packages right
39167;I'd move everything in pkg/ out to root
39168;and just keep cmd as cmd?
39169;and `cmd/main/` should be called something else
39170;if you do `go install ./...` you'll end up having a `main` in your terminal
39171;cmd/admin btw is argument to create a new admin user
39172;because Go uses the folder name as the binary name
39173;yeah my makefile does o
39174;so I'd move main to ~/ and change `admin` to something else
39175;```makefilebuild: @go build o goapp ./cmd/main/main.gorun: @go run ./cmd/main/main.go dev```
39176;dunno what this project is so I can't say
39177;`https://waifu.pics`
39178;i did it in cmd folder originally because command line args that go in a diff path
39179;the idea is `cmd` is stuff for itself and doesnt depend on `pkg` and pkg can be used for whatever else
39180;technically speaking
39181;stuff in cmd// doesn't depend on other packages in the same repo?
39182;how does that even work
39183;other way around
39184;pkg doesnt depend on cmd and cmd depends on pkg
39185;pkg is like the package stuff and cmd is the entrypoint/possible entrypoints that nothing depends on
39186;well that's obvious
39187;you can't import main
39188;got any suggestions for where the folders are located?
39189;i heard i should probably not be creating packages in packages if i dont need to
39190;and i should just make it all one package
39191;previously it was like`api>routes>admin`
39192;and shit like that
39193;should probably be like
39194;`api>admin.go`or `api>routes>admin.go`
39195;should routes be its own thing inside api?
39196;I wouldn't make a package routes
39197;I would if this package adds a generic route abstraction (but then I'd call it router)
39198;but I wouldn't do it if it's domainspecific
39199;alright yeah
39200;i just kinda thought make it one package and name shit better
39201;then you could put it in api/ altogether
39202;personally I do separate packages
39203;but this is pretty hard to do cleanly
39204;because one package may depend on another and you may end up with cyclical dependencies after a while
39205;for smolboard I have a separate `package smolboard` that describes all structures to do with that application
39206;so smolboard.User smolboard.Post etc
39207;What I try to do is one package per domain so all the database stuff in one package all the api stuff in one package all the bot stuff in one package etc
39208;yeah for this api each route only returns its own object so two routes dont send one same thing
39209;there's one case where I did what you said
39210;that's the db package
39211;"```GO// ResBasic : basic responsetype ResBasic struct { Message string `json:""message""`}// ResImage : send a single image urltype ResImage struct { URL string `json:""url""`}// ResManyImages : send many image urlstype ResManyImages struct { Files []string `json:""files""`}```"
39212;lol
39213;None
39214;only for the db package did I do this because it's better than fiddling with package relationship
39215;e.g. user might need permission session might need permission etc
39216;and I don't want a cobweb of imports
39217;yeah
39218;im just stressing about how i store shit
39219;for http routes I had them separated though just because I could
39220;there's really no better reason
39221;yeah im thinking of storing routes in its own thing but THEN the actual possible response and request objects are in api so it causes an import loop
39222;I did get a clean router mount though
39223;:stare:
39224;"```go // Alias the middleware function. m := rts.mw.M mux.Use( middleware.RealIP, middleware.Recoverer, middleware.Compress(5), limread.LimitBody(cfg.MaxBodySize), ) mux.Group(func(mux chi.Router) { mux.Use(limit.RateLimit(2)) mux.Post(""/signin m(user.Signin)) mux.Post(""/signup m(user.Signup)) mux.Post(""/signout m(user.Signout)) }) mux.Group(func(mux chi.Router) { mux.Use(limit.RateLimit(64)) mux.Get(""/filetypes GetTypes(cfg)) }) mux.Mount(""/tokens token.Mount(m)) mux.Mount(""/images imgsrv.Mount(m)) mux.Mount(""/posts post.Mount(m)) mux.Mount(""/users user.Mount(m))```"
39225;look at my last message ignore mike
39226;eh just do it all in api/ then
39227;not you mike
39228;other mike
39229;i was so confused
39230;:BCS_PepeLaugh: taking about mike emote
39231;"the frontend has sth similar ```gofunc bind(r render.Mux) { r.SetErrorRenderer(errorpage.RenderError) r.Get(""/ home.Render) r.Mount(""/posts gallery.Mount) r.Mount(""/posts/{id} post.Mount) r.Mount(""/signin signin.Mount) r.Mount(""/signup signup.Mount) r.Mount(""/signout signin.MountSignOut) r.Mount(""/settings settings.Mount)}```"
39232;but I think this is actually justified
39233;since I made each package contain its own HTML and CSS files
39234;whats mount?
39235;didnt know that was a thing
39236;None
39237;:stare: is it like subrouter?
39238;yeah
39239;kind of
39240;ah yeah i have that too
39241;it's a subroute but I use it as a subrouter
39242;maybe i could store responses and requests in a package outside of api?
39243;"here\'s signin.Mount: ```gofunc Mount(muxer render.Muxer) http.Handler { mux := chi.NewMux() mux.Get(""/ muxer.M(pageRender)) mux.Post(""/ muxer.M(handlePOST)) return mux}```"
39244;so like`api>routes>image` is image package and shit
39245;and then maybe?
39246;`responses>`
39247;i lost my train of thought fuck
39248;also how do i store unrelated utils like configs
39249;I just have a config struct in each package that needs them
39250;no like global config
39251;that gets read on load
39252;`config.yml`
39253;yeah global config
39254;the main package makes a composite config struct
39255;then the children packages have config structs that compose its children packages structs
39256;etc
39257;"main.go: ```gotype Config struct { SocketPath string `toml:""socketPath""` SocketPerm string `toml:""socketPerm""` frontserver.FrontConfig server.Config}```"
39258;server.Config: ```gotype Config struct { db.DBConfig http.HTTPConfig}```
39259;"db.DBConfig: ```gotype DBConfig struct { Owner string `toml:""owner""` DatabasePath string `toml:""databasePath""` MaxTokenUses int `toml:""maxTokenUses""` TokenLifespan string `toml:""tokenLifespan""` tokenLifespan time.Duration}```"
39260;:5_bugcatstare: oh that actually makes sense
39261;aite so maybe i structure my apps like this```api>routes>route_category_here>router.goapi>middleware>middlewares_here```
39262;any global response or requests or whatever data just go in... uh
39263;api>data?
39264;do `api/routes/routename/routename.go`
39265;i dont have many routes dont think that would be worth it
39266;that's what I did
39267;it's just naming your .go file something not `router.go`
39268;more like
39269;and what do the global responses do?
39270;what does that mean
39271;api>routes>route_category>files about this general route location can have more than one route
39272;router.go is just the subrouter i guess for all the routes
39273;oh
39274;also by global responses like global structs for responses and requests that many endpoints use for their structure
39275;I just throw multiple routes into 1 file as long as it doesn't reach like 500 LOC
39276;:BCS_PepeLaugh: thats what im doing here but its kinda an inconvenence to have all the routes in one dir
39277;no keep the separate folders but a single file is probably all you need
39278;yeah
39279;especially if it's just glue code that connects between db and http
39280;like this
39281;"```gofunc Signout(r tx.Request) (interface{} error) { if r.Tx.Session.IsZero() { return nil nil } if err := r.Tx.Signout(); err != nil { return nil errors.Wrap(err Failed to sign out"") } r.SetSession(nil) return nil nil}```"
39282;but repeated 10 or 20 times
39283;also i have a api struct which all routes are methods of
39284;so idk how to handle that
39285;use a context or give each package its own instance struct
39286;it has shit like https://i.kawaii.sh/gXo4cE.png
39287;oh man that repeat
39288;hmm
39289;maybe if I do `/routes/api` and `/routes/api/otherstuff`
39290;then I'd have package routes to glue all the routes together and package api to provide an instance per request
39291;:5_bugcatstare: gota be careful to not cause import loop
39292;Route btw is more like an option struct
39293;keeps options and things the routes use
39294;:stare: /api/routes/api isnt clean
39295;skip the top level api package
39296;"```gopackage apitype ctxKeys intconst ( routerKey ctxKeys = iota)type Tx struct { database.Transaction Config waifupics.Config}var ( ErrMissingRouter = httperr.New(500 route is missing router context""))func BeginTx(r http.Request) (Tx error) { v := r.Context().Value(routerKey) if v == nil { return nil ErrMissingRouter } t err := v.(Router).Tx() if err != nil { return nil errors.Wrap(err Failed to start transaction"") } return t nil}type Router struct { chi.Router Database database.Database Config waifupics.Config}func NewRouter(db database.Database cfg waifupics.Config) Router { r := &Router{chi.NewMux() db cfg} r.Use(r.txMiddleware) return r}func (r Router) Tx() (Tx error) { return &Tx{ Transaction: r.BeginTx() // obviously handle the error first Config: r.Config, } nil}func (r Router) txMiddleware(next http.Handler) http.Handler { return http.HandlerFunc(func(w http.ResponseWriter request http.Request) { // inject self next.ServeHTTP( w, r.WithRequest(context.WithValue(request.Context() routerKey r)), ) })}```"
39297;@Riku ^
39298;"you could do an AcquireTx API like I did; then you wouldn't have to worry about the caller forgetting to defer Rollback and call Commit"
39299;since that's handled in the Acquire fn
39300;but it adds a level of closure
39301;what is Tx btw :5_bugcatstare: i know context is a thing but never understood what it is
39302;transaction
39303;^
39304;sometimes can mean transmit
39305;oh :BCS_PepeLaugh:
39306;and transfer iirc
39307;but yeah transaction in this case
39308;you can use the full name
39309;typing json and tab in goland does it my qol has increased 10x
39310;"```gopackage routestype Router struct { api.Router}func NewRouter(db database.Database cfg waifupics.Config) Router { r := &Router{api.NewRoutes(db cfg)} // handle error r.Mount(""/user user.Mount) r.Mount(""/admin admin.Mount)}```"
39311;hm
39312;not completely understanding :BCS_PepeLaugh:
39313;``` routes/ < connect route packages together  api/ < provides transaction abstractions for other route packages to use  admin/ < route  user/ < route```
39314;oh so there is no root level
39315;wdym
39316;what about things like global objects all of them use
39317;don't do singletons
39318;pass the values down
39319;main.go initiates routes using NewRouter which takes in a db and a cfg
39320;api.NewRouter is then passed those values into the Router instance
39321;the router instance is stored into each request's context values
39322;the AcquireTx uses that stored router instance to initiate a transaction
39323;note that this does not break the stdlib HandlerFunc signature unlike what I did w/ smolboard
39324;but the structure is roughly the same
39325;hm
39326;interesting
39327;not sure completely understanding how this works :BCS_PepeLaugh:
39328;also i use echo now
39329;havent pushed yet
39330;i can make subrouters with it
39331;you can also make subrouters w/ chi but the same concept applies
39332;the biggest advantage of my internal router in smolboard is that I elided contexts completely
39333;I used contexts here because it's one of the only ways to pass a value into a HTTP handler while still keeping that function signature
39334;oh
39335;what i find weird is you doing a middleware before checking other routers
39336;wdym
39337;txMiddleware
39338;wdym by checking other routers
39339;im not sure entirely how your code works yet :BCS_PepeLaugh:
39340;it just extends the default chi router
39341;the extension inserts the database and the config
39342;the middleware is so it can insert itself into the HTTP handler
39343;this way you can get the full instance from a function only
39344;"```gofunc exampleRoute(w http.ResponseWriter r http.Request) { tx := api.BeginTx(r) u err := tx.User(r.FormValue(""username"")) renderJSON(u err)}```"
39345;for example
39346;notice how I pulled the database transaction from just the request itself
39347;there is no global variable
39348;there is no closure shenanigans nor struct receivers
39349;hm
39350;that is interesting
39351;https://i.kawaii.sh/2VL0BrQ.png
39352;@_diamondburned_ rate my way of serving vue
39353;:BCS_PepeLaugh:
39354;no idea what's wrong
39355;3/10
39356;0/0
39357;I thought it was kinda jank but after sending that message i realized thats literally how you do it with nginx
39358;:stare:
39359;just forward everything to index and serve the folder
39360;what do yall use for uuids
39361;has how to measure ping in ms?
39362;ping between what?
39363;bot ping
39364;@_diamondburned_
39365;There are different pings...
39366;Gateway ping
39367;API ping
39368;Message send ping
39369;api
39370;had forgotten the name
39371;¬Ø\\_(„ÉÑ)_/¬Ø
39372;api and gateway in real
39373;The easiest way to get that is probably by getting the current time send a message wait for the response check the time again and see how long it took and divide by 2. Unless you want round trip time then don't divide by 2
39374;Hmm
39375;okay
39376;when I run a stripped go binary and I get some runtime error in prints me which parts of my code caused it and I can also find namens of my function in the binary is there some easy way to avoid that to protect it from reverse engineering without heavy obfuscation?
39377;why?
39378;why would you want to hide the function names?
39379;yeah this
39380;Handle runtime errors?
39381;and you can\'t completely protect something from being reverse engineered
39382;there is always a way
39383;You can just deconstruct the binary
39384;Of course I cant protect it completly but giving the reverse engineer the function names should make it quite a lot easier
39385;Not really
39386;as long as the names exist the binary can be decompiled and give you the names
39387;Also its not only that the names are in there but also also at which place in the source they were called etc. seems like unnessecary information for a binary build for release
39388;if you just want to be like i dont want to show my full stack trace to the user thats a bit more manageable thing
39389;> Also its not only that the names are in there but also also at which place in the source they were called etc. seems like unnessecary information for a binary build for releasethat's a bit more reasonable
39390;use trimpath
39391;hm thx
39392;also not related but Nix builds stuff in a chroot sandbox
39393;so all you get is /run/currentbuild or sth
39394;it's probably the same w/ Docker if you build stuff inside one as well
39395;No shell no problem
39396;trimpath needs so much memory xD cant even compile with that flag on 256mb ram
39397;:Thonk:
39398;not sure why it would need a lot of memory
39399;you sure you're doing it right?
39400;> 256mb ram:PES_Monka:
39401;> you sure you're doing it right?@_diamondburned_ well I compile it without the flag and it works i compile it with the flag and i get `fatal error: runtime: out of memory`
39402;> :PES_Monka:@Madxmike 15‚Ç¨/year virtual server
39403;compile on your PC
39404;GOOS
39405;also paste build cmd
39406;does it come with a 56kbps connection too üòõ
39407;xD yeah could do that but wtf why does it need so much mem> compile on your PC@_diamondburned_
39408;> also paste build cmd@_diamondburned_ go build trimpath file.go
39409;pretty sure you have to give it a prefix to trim
39410;thats what the doc makes it look like atleast
39411;well should have looked into the documentation in that case
39412;xD
39413;yeah that's missing an argument
39414;shouldnt it tell you that here?
39415;"@Axelander ```By default,\xa0go build\xa0combines symbol and debug info with binary files. However you can remove the symbol and debug info with\xa0go build ldflags s w""```"
39416;Apparently you can omit w
39417;yeah thats basically the same as stripping it I tried `strip file` aswell as compiling it with these flags already it does reduce the size of the binary but doesnt remove that info
39418;https://golang.org/cmd/compile/ says there's a prefix
39419;something is wrong w/ your docs
39420;Looking into it I'm not sure s has done anything since go 1.2
39421;And it only worked in 1.1 because of a mistake
39422;> something is wrong w/ your docs@_diamondburned_ https://golang.org/cmd/go/ search for trimpath there when looking at the go build flags its without go tool compile its with
39423;oh I see why now
39424;it rebuilds the entire stdlib
39425;https://github.com/golang/go/issues/37158
39426;ok makes sense
39427;That makes sense... When I decompose a go binary it does show that info for all the std lib packages I used
39428;"Hey everyone huge GoNoob here. I hope this is the right channel for questions.I am trying to use container.ring and use its Value to store a struct called Hit (that has an interface with methods that use pointer receiver called HitInterface). So far so good.Now I want to access the struct I kept in Value and use a pointer receiver method. I find I must cast Value to the interface I use but then the server dies on interface conversion: main.Hit is not main.HitInterface: missing method incr""Some code:`type Hit struct { Count int Timestamp time.Time}type HitInterface interface { ts() int64 incr()}func (h Hit) ts() int64 { return h.Timestamp.UnixNano() / 1000000}func (h Hit) incr() { h.Count++}`and later...`r.Value = NewHit() /// method initialises a Hitr.Value.(HitInterface).incr()`Any obvious gaps? many thanks"
39429;what's the technical term for `...`? as in `func Foo(bar ...Bar)`
39430;@YonmaN I think your problem is that the ts method is defined on a value and the incr method is a pointer method. I'm not 100% positive that that matters but I would try making ts a pointer method as well then in your code do `r.Value = &NewHit()` and see if that works.
39431;You might not need to do the last part
39432;I'm still kinda a noob myself lol
39433;@Dusty.P you just got promoted it works
39434;Many thanks!
39435;@func I call it arg expansion... I think the technical term for a function defined with a `...` arg is a variadic function
39436;I am building a simple login/register system using mongodb and trying to implement a session based authentication system. In postgres I used to put sessions and users on different tables but in mongodb I cant decide what to do. Should I create two collections like `sessions` and ` users` or should I store sessionid inside users collection?
39437;The second option sounds easier but I am trying to figure out if there is a downside for it
39438;if there some easy way to check if a value exists into an array? I came from JS and we have a built in method for that I saw some examples with for loop/etc using Go but is there something more straight forward?
39439;loop
39440;loop
39441;and more loops
39442;I copied an example and changed it a bit is this ok? or am I doing something weird? https://play.golang.org/p/gSCX3si2Nl2
39443;Are any of the Go team on this server?
39444;does anyone here have experience with barcodes and qr codes and which libraries are good for that in go
39445;the problem is that its multiple qr and barcodes per picture
39446;andy I don't think so. There are/were some contributors though
39447;where is a good place to learn golang by building small projects?
39448;I have been watching some videos tutorials but the only one that really works for me was the videos of Carlos Souza at plural sight
39449;he has also some small project courses
39450;@suzzy
39451;thanx will look into it
39452;?go learn
39453;Getting Started with go.dev <https://learn.go.dev/>  DoadA Tour of Go <https://tour.golang.org/welcome/1>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyGo by Example <https://gobyexample.com/>  SkippyGopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Effective Go <https://golang.org/doc/effective_go.html>  Skippy
39454;Some exercises there as well
39455;"Question regarding parallel processing:I often face a situation where I want to request 3 different resources in parallel. They all return a different struct and I want to send these three resources back to the requester like this:```go response := struct{ Shoe Shoe Hat Hat Scarf Scarf Errors []string // All response errors } shoes err := client.GetShoe() // Returns a struct `Shoe` hats err := client.GetHat() // Returns a struct `Hat` scarfs err := client.GetScarf() // Returns a struct `Scarf````This always ends up in like hundreds lines of code where as in nodejs this would be a one liner with `await Promise.all[]`. Am I missing something?I'd either use a mutex and wrap each request in `go func() { // Req }` or I'd create a response channel with a custom struct type like `type ChRes struct { Shoe Shoe; Hat Hat; Scarf Scarf; Error string; }` ."
39456;why not a waitgroup
39457;How does the waitgroup help if I want to aggregate the responses into one struct? (Into my `response` struct). I'd still need a mutex to write concurrently into that?
39458;dont believe so
39459;if you do it right
39460;Care to explain how to do it right then? üòÑ
39461;A game written in Golang and I haven't finished it.
39462;i think the right way is the easy way tbh
39463;x.field = asdf
39464;if youre touching different fields no reason to mutex
39465;this belongs in #showmewhatyougot
39466;Ok
39467;Do running multiple goroutine = parallel computing = multi threading(using multiple cores for performanve advantages)
39468;not necessarily
39469;its concurrent not necessarily parallel
39470;But you do need to be just as careful üôÇ
39471;aye
39472;–®–æ?
39473;<https://en.wiktionary.org/wiki/%D1%88%D0%BE> ??
39474;> –®–æ?@Nameless Name Wow what language is that. So efficient
39475;> its concurrent not necessarily parallel@Str≈ìm What u mean.
39476;> @Nameless Name Wow what language is that. So efficient@BryanC12 It is Russian
39477;> @BryanC12 > It is Russian@Nameless Name i see
39478;@BryanC12 youve no guarantee that goroutines will run in parallel
39479;concurrency != parallelism
39480;i mean ```main() { go func(test1) go func(test2) go func(test3)}```Dont this code runin parralel
39481;yes they mightnt run in parallel
39482;`GOMAXPROCS=1`
39483;and now they don't
39484;1 core CPUand now they also dont
39485;32 core CPU with many active threadsand now they might also not run in parallel
39486;So this is depends on client or devops should configure it
39487;no this is outside anyones control
39488;```GOMAXPROCS=1``` I mean this
39489;9.9/10 out of 10 you dont need/want to touch that
39490;Yes but the point was: Don't assume things run in parallel as you have no control over that
39491;you can only tell Go it should run concurrently
39492;The scheduler then determines if it can multiplex it over multiple threads
39493;I see i see its automatically one
39494;no its not automatically 1
39495;default is = num cores
39496;2 then haha
39497;> default is = num cores@Str≈ìm Does the cores including hyper threading too?
39498;¬Ø\\_(„ÉÑ)_/¬Ø
39499;or multithread
39500;what
39501;what has multithread got to do with the number of cores you have
39502;because some cpu can do 4core/8threads
39503;thats hyperthreading
39504;yeah but thats for Intel AMD name it multithread
39505;link?
39506;https://bit.ly/3lY6mzh
39507;its called simultaneous multithreading
39508;https://en.wikipedia.org/wiki/Simultaneous_multithreading
39509;"> its called simultaneous multithreading""@Str≈ìm Okay sry :/"
39510;npnp
39511;So... erm...
39512;What does the cores stand for
39513;you know you can really easily google that
39514;Question about go design/philosophy
39515;If I have a `DB` struct
39516;And a `Book` struct
39517;And i am writing a function to get all the books from the db
39518;Should I write that as a pointer receiver from db or write it as a normal function with a db pointer as first parameter
39519;So `func (db DB) AllBooks()` or `func AllBooks(db DB)`
39520;you'd most likely want it as a method
39521;Why though?
39522;what would be a good bitrate to use with playing youtube videos?is there a default bitrate for youtube?
39523;I thought a function would be better because this method wouldn‚Äôt be directly related to the database
39524;It just happens to be using the database
39525;> What does the cores stand for@BryanC12 cpu cores
39526;The physical or virtual ones that your PC/Server has
39527;> I thought a function would be better because this method wouldn‚Äôt be directly related to the database@samjmckenzie Then write it as a normal function thats what I usually do
39528;especially if I'm writing a web api
39529;I do methods
39530;because this DB isn't a generic DB it's domainspecific
39531;@samjmckenzie it\'s not related to the database it\'s just using it
39532;and that function will ALWAYS be receiving a database value as an argument
39533;which sounds like a method to me
39534;especially since you'll probably want to layer mutexes onto accessing particular things at some point
39535;is there web crawler library for go?
39536;goquery
39537;and colly
39538;net/http :boomer:
39539;What url should I give as parameter to `cookiejar.SetCookies()`? I am just trying to save a session token to it. Would `/` work?
39540;I don't even understand why it takes url as parameter. Why doesnt it just saves the cookie inside cookiejar?
39541;> especially since you'll probably want to layer mutexes onto accessing particular things at some point@deezy What do you mean by this
39542;@Sneaxby because a cookiejar supports multiple sites
39543;not just 1
39544;you'd give it the URL you give to http.Get/whatever
39545;but it only uses u.Host and u.Scheme iirc
39546;I see thanks... :thinkingo:
39547;Can also use path too
39548;hey guys is there some kind of improvement I could apply here? or is this good already? (Im new to Go)```gore := regexp.MustCompile(`(25[05]|2[04][09]|[01]?[09][09]?)(\\.(25[05]|2[04][09]|[01]?[09][09]?)){3}`) if re.MatchString(mikrotikMessage.Message) { submatchall := re.FindAllString(mikrotikMessage.Message 1) var tmpArray []string for _ element := range submatchall { fmt.Println(element) tmpArray = append(tmpArray element) } fmt.Println(tmpArray) }```regex is just to match ip address
39549;oh god that regex
39550;why not just use the IP parser?
39551;is there one?
39552;https://golang.org/pkg/net/#ParseIP
39553;"If you're looking strictly for IPv4 check if the result of `parsedIP.To4()` is non`nil`; it will be `nil` if it is an IPv6 address"
39554;Lmao F to you converge
39555;F?
39556;:PayRespect:
39557;wow is that meme so old people don't know it anymore
39558;It's like 10 years old but it's still used a lot
39559;idk
39560;I mean I need to find IP's on a string ParseIP doesnt do what I need
39561;is there a Go way to do that instead of regex?
39562;Does your string have a reproducible schema
39563;you can probably do some preprocessing using go
39564;Like does it start with the same things / number of character etc
39565;IP address don't have spaces in them
39566;so you could probably split the input on whitespace
39567;and then you'd have much smaller inputs to work with
39568;you can loop through all the fields or if the ip address appears at a predictable place you can just grab it directly
39569;"I have a string like ```login failure for user converge from 192.168.0.0 via ssh;login failure for user converge from 192.168.0.0 via ssh```I'll collect the ip address and later count how many times they are repeated"
39570;yeah just split on whitespace
39571;and look for string containing a period
39572;call ParseIP
39573;if it succeeds it was an IP address
39574;if not it wasn't
39575;Im wondering if regex would work faster than loop over a long string
39576;split then loop
39577;`(\\d+\\.\\d+\\.\\d+\\.\\d+\\)`
39578;throw that into ParseIP
39579;you almost NEVER want to use regexes
39580;never say never Justin Bieber thought I think
39581;regex is gonna be slower
39582;well
39583;i don't even want to talk about performance
39584;than just splitting a string and checking each
39585;the smaller your inputs the easier it is to think about how you find what you need
39586;regardless of which exact tool you're trying to use
39587;How can I store an `[]rune` in a const? I know why I can't  apparently a slice is not immutable in nature but then how can I store a `[64]rune`?
39588;you can't
39589;aw üò¶
39590;Thanks
39591;actually
39592;i mean
39593;did you even try `const x [64]rune = [64]rune{whatever}`
39594;not sure what the syntax would be
39595;you can't do that
39596;you could store it in a const string and cast that const string to []rune
39597;That doesn't work wither. `Const initializer [64]rune{...} is not a constant`
39598;if you can use `.` or `[]` on it it can't be const
39599;actually no i'm dumb
39600;because you can use `[]` on strings
39601;i'm gonna make coffee
39602;> you could store it in a const string and cast that const string to []runeThat's my backup plan but I'd prefer not to.
39603;why do you need it to be const?
39604;idk why you even really need this
39605;damn it
39606;I mean I guess I can use var but I'd like to have the guarantee of immutability.
39607;"You're right; it's not completely necessary"
39608;just don't mutate it lol üôÇ
39609;if you need an absolute guarantee that it won't ever change you can make a file that builds only with some debugging build tag and has a `func init()` that launches a goroutine to check it from time to time
39610;That sounds like too much work for something that isn't super important it's just a nice to have. But thanks for the suggestion ‚ù§Ô∏è
39611;thanks guys it looks better now. pls let me know if there is something I can still improve```go // old var tmpArrayOld []string re := regexp.MustCompile(`(25[05]|2[04][09]|[01]?[09][09]?)(\\.(25[05]|2[04][09]|[01]?[09][09]?)){3}`) if re.MatchString(mikrotikMessage.Message) { submatchall := re.FindAllString(mikrotikMessage.Message 1) for _ element := range submatchall { fmt.Println(element) tmpArrayOld = append(tmpArrayOld element) } fmt.Println(tmpArrayOld) } // new var tmpArray []string splittedString := strings.Split(mikrotikMessage.Message  ) for _ item := range splittedString { err := net.ParseIP(item) if err != nil { tmpArray = append(tmpArray item) fmt.Println(item) } }```
39612;You might want to use `strings.Fields` instead. It does essentially the same thing as this without needing the ` ` and also splits across all whitespace boundaries (newlines tabs etc.)
39613;That said it does look a lot cleaner. üôÇ
39614;"(I wouldn't call the result of `net.ParseIP` `err`; that's quite confusing because it's essentially the opposite of what it's representing)"
39615;I agree then```go // new var tmpArray []string splittedString := strings.Fields(mikrotikMessage.Message) for _ item := range splittedString { err := net.ParseIP(item) fmt.Println(item) if err == nil { continue } tmpArray = append(tmpArray item) fmt.Println(item) }```
39616;isn't that so much nicer to look at than the regex code?
39617;I'd still recommend using a name like `ip`. It's just a name at the end of the day but names express intent. Here without knowing about the function already it seems to me like the append is happening if there is an error‚Äîthat is if the IP failed to parse.
39618;@deezy its much better. with JS sometimes instead of writting a lot of logical conditionals we use regex. but sounds like (at least this case) there is good functions to work with
39619;@Carson do mean `ip` instead of `item` ?
39620;you're still keeping the regex?
39621;Instead of `err`.
39622;at least move it out to the global scope
39623;`net.ParseIP` doesn't return an error‚Äîit returns an IP.
39624;Yeah the result isn't an error
39625;@_diamondburned_ no just using the strings.Fields() now
39626;cool
39627;got it I was starting to get used to have `err` everywhere following the examples I have seen so far
39628;It shows up a lot for sure because a lot of functions return errors. It also is a tad odd to see a `Parse` function not return an error.
39629;That's mostly an artifact of `net.IP` having its underlying type be a slice which means it can be checked against `nil`.
39630;Most parse functions do still return a nil for its return value because pointers are usually used
39631;they just also return useful errors
39632;Yeah. I just mean it's not unreasonable to expect that a return value from `net.ParseIP` would be an error so I get where the confusion might be coming from.
39633;yeah true
39634;well one way to know would be to ask yourself where the parsed IP goes to I suppose
39635;if parse IP only returns an error and only takes in a string then the parsed IP doesn't go anywhere
39636;> How can I store an `[]rune` in a const? I know why I can't  apparently a slice is not immutable in nature but then how can I store a `[64]rune`?@Dexti you should probably do what diamond said use a const string and cast to []rune where you need it
39637;hmm
39638;is there generic type parameter in go?
39639;not yet but it's coming in go2
39640;go2?
39641;don't recall the projected release date off the top of my head
39642;what is go2?
39643;it's the next major release
39644;ok
39645;i see now!
39646;we're on 1.15 now
39647;hmm
39648;we need wait
39649;and generics are in the go 2.x spec
39650;5 version?
39651;there's a release schedule I think let me look
39652;ok
39653;thank you
39654;I can't seem to find any estimates on go2 release
39655;but it'll probably be a year or 2 judging by current progress
39656;hmm
39657;ok
39658;i am expectancy now!
39659;Is there anyway to route a HTTP request using a proxy in GO I've done it in C# but can't find a way to do it in GO
39660;Are you trying to proxy an outgoing request or an incoming one?
39661;outgoing
39662;"All I am doing right now is ```gourl := https://ifconfig.me/ip_addr""req _ := http.NewRequest(""GET url nil)res _ := http.DefaultClient.Do(req)defer res.Body.Close()body _ := ioutil.ReadAll(res.Body)fmt.Println(res)fmt.Println(string(body))```"
39663;https://golang.org/pkg/net/http/#Transport.Proxy
39664;Thanks Imma have a read
39665;Which you can obtain easily from https://golang.org/pkg/net/http/#ProxyURL
39666;By default it reads it from the environment as well
39667;"```gofunc Compiler(a string)[]string{ b := []byte(a) c :=  var d = []string{} for i := 0;i < len(b);i++{ if string(b[i]) ==  { d = append(d,c) c =  } c = c + string(b) }  return d}```"
39668;can someone help me?
39669;i am gonna to seperate string when it's space
39670;`fields := strings.Fields(s)`
39671;?
39672;will seperate the string on spaces
39673;ok
39674;oh thank
39675;hmm
39676;if it\'s ?
39677;`strings.Split` iirc
39678;ok
39679;https://godoc.org/strings#Split
39680;oh thanks
39681;hmm
39682;what doex cannot refer to unexported name bot.crawling mean
39683;crawling is not exported
39684;hmm
39685;to export capitalize the first letter
39686;why?
39687;did you do the go tour?
39688;tour?
39689;?go learn
39690;Getting Started with go.dev <https://learn.go.dev/>  DoadA Tour of Go <https://tour.golang.org/welcome/1>  SkippyTutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyGo by Example <https://gobyexample.com/>  SkippyGopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355Effective Go <https://golang.org/doc/effective_go.html>  Skippy
39691;2nd link
39692;ok i see
39693;thank you
39694;what `a ...interface{}` mean?
39695;https://gobyexample.com/variadicfunctions
39696;its a variadic function that takes `interface{}`s
39697;ok
39698;ok
39699;ok
39700;When I start main.go it it gives me a 509x error
39701;And a github page
39702;Huh
39703;Like 509x certificates?
39704;What program? How are you building/running it?
39705;What is the actual output of the program?
39706;"@Laevus Dexter sry for pinging; how do I linkname to a struct method?"
39707;o I got it
39708;it's `os.(File).readdirnames`
39709;lol I can't optimize this
39710;I'm stuck
39711;darn I wanna get rid of this append in readdirnames
39712;no idea how
39713;might implement my own
39714;> it's `os.(File).readdirnames`@_diamondburned_ I'd say no way to linkname a method but does this work?üòê
39715;it did but it was kinda pointless
39716;since readdirnames still does the allocations
39717;oh no
39718;o h n o
39719;oh wait nvm
39720;@Laevus Dexter got it down to 6.59ms from ~22ms ish
39721;using worker pools
39722;üòê
39723;good enough considering it's resolving everything in `/proc//fd/`
39724;How do I run test from outside its directory?```bash$ > go test run Test_FileSystem # in filesystem folder works$ > go test run filesystem/Test_FileSystem # in filesystem parent doesnt work```
39725;`filesystem/filesystem_test.go` is the file
39726;`go test run Test_FileSystem ./filesystem`
39727;Its go test ./filesystem run Test_FileSystem
39728;Yea thanks I should of done a bit better googling
39729;I dunno how long they've been doing it for but Synk are now doing Go package vulns. https://snyk.io/vuln?type=golang
39730;damn top 3 is uroot
39731;"Hey all I\'m trying to test my http handlers in Go..Is there any way I can implement table driven tests and append path params dynamically? Right now I\'m doing this and my test fails.```pathParam := url.Values{}pathParam.Set(""uid test.uid)httpReq err := http.NewRequest(""GET /v1/ids/:uid"",strings.NewReader(pathParam.Encode()))```"
39732;doesn't sound right
39733;you want to test handlers?
39734;Is my path format correct `/v1/ids/:uid`? Or should it be `/v1/ids/{uid}`
39735;yes.
39736;you should do a normal request /v1/ids/1 I guess
39737;as for table driven you could pass full path
39738;so you mean `/v1/ids/ + test.uid` and then proceed?
39739;that should work yeah
39740;nothing in NewRequest (nor anything in net/http) parses `/:x` or `/{x}`
39741;and url.Values is for forms
39742;@_diamondburned_ yeah also featured are gorilla (websocket,handlers) gitea trafaik gin crpyto and x/crpyto gorm miekg/dns k8s docker
39743;> crypto x/crypto:cereal:
39744;good resource to be able to check go mod for affected packages
39745;if those 2 packages have any severe vulns we're all screwed
39746;the recent vulns were Improver Signature Verification and don't look too bad
39747;bruh snyk doesn't support modules outside of the cli version
39748;well
39749;their site doesn't inspire a lot of confidence in me
39750;it's aggressively well marketed and polished
39751;should i use influxdb for stats on website?
39752;was gonna just make a middleware to log routes
39753;what kind of stats?
39754;influx will prob work yeah
39755;what endpoint a user is visiting and for specific endpoints i need to log info about the endpoints
39756;and requests
39757;oh that kind of stats
39758;yuck
39759;yeah influx works
39760;any better option :BCS_PepeLaugh:
39761;i just using influx cuz cloud option
39762;postgres have a timeseries thing iirc
39763;Timescale?
39764;no idea
39765;i vaguely remember
39766;also I heard cockroachdb is a thing now for scaled SQL
39767;its slightly slower but its much more reliable
39768;influx is still ideal though
39769;https://i.kawaii.sh/SEYZocr.png
39770;i feel dirty
39771;some of the code I wrote is now in your app :^)
39772;hm?
39773;wym
39774;I made a PR to influxdb2
39775;:BCS_PepeLaugh: oh
39776;that was to fix v1
39777;my tech stack right now is a mutation
39778;https://i.kawaii.sh/1Dj57ku.png
39779;smh
39780;:stare: i have the app running in portainer on docker with client being run by server and automated updates from dockerhub to portainer
39781;on master branch
39782;@deezy it's pretty much the site for nodejs package vulns it's fairly comprehensive in that respect but I only just noticed they covered Go as well
39783;I don't node can't relate
39784;It may be terrible for Go but thought it was interesting at least. I'm not aware of any other similar resources
39785;"```go s := a"" fmt.Println(s[0]  \'a\') // 0```why does operation btn uint8 (byte) and int32 work without type casting? or it\'s always like this"
39786;> operation btn uint8?
39787;strings are just slices of runes runes are just numbers
39788;uint8 i think?
39789;when you access by index it's of type byte which is uint8
39790;whoops
39791;rune is int32
39792;hmm
39793;right
39794;"`s := a""; fmt.Printf(""%T %T %T\ s[0] \'a\ s[0]  \'a\') // uint8 int32 uint8`"
39795;yeah i'm not sure
39796;i imagine the compiler is doing some fudging to make life easier
39797;basically byte + rune = byte
39798;> Except for shift operations if one operand is an untyped constant and the other operand is not the constant is implicitly converted to the type of the other operand.
39799;https://golang.org/ref/spec#Operators
39800;it seems that mismatched types only panic when one of them is a variable otherwise it'll be converted
39801;untyped constants are special
39802;and of course https://golang.org/ref/spec#Conversions
39803;rune constants are also numeric constants
39804;and follow whatever rules they have
39805;it's numbers all the way down üôÉ
39806;we're all just bytes in the end
39807;https://medium.com/betterprogramming/learngobybuildingabusservice6c11e7b81b92
39808;How can I ensure that I'm using the monotonic clock  not the wall clock?
39809;I'm generating IDs and don't want to accidentally generate the same ID twice because of a wall clock reset.
39810;The monotonic clock is used for duration
39811;the time package documents when it is used as well
39812;Thank you üôÇ
39813;hi I just installed go and the getting started tutorial suggests I use the quote package as an example of how to use packages
39814;however it misses the quite crucial step of explaing exactly how i should install this package or the rsc.io/quote module
39815;i can't seem to find an easy answer on the internet that doesn't require reading 10 pages of documentation mostly about how to make modules
39816;run `$ go mod init`
39817;"and after you run that command just add `import rsc.io/quote""` near the top of the file"
39818;Then just go run
39819;so i need to manually download the module? there is no download manager?
39820;No you don't need to manually download anything
39821;@Mod Team
39822;running go mod init says it needs a path
39823;`.`
39824;goner
39825;oh you might need to do `go get u rsc.io/quote` after you init
39826;oh someone else deleted it. XD
39827;Pff
39828;ikea 1s too slow
39829;I was hovering on the delete button
39830;I kicked them Flore deleted it. Teamwork üí™
39831;powerful
39832;i didnt delete
39833;just ban :)
39834;oh.
39835;@RUWO how's it going
39836;go get is complaining it can't find my git in PATH but i for sure have git installed
39837;so trying to debug that at the moment
39838;ok a reboot fixed that
39839;great
39840;None
39841;go mod init still doesn't work
39842;OH
39843;do you have a github repo for your project?
39844;no
39845;i'm just messing around
39846;literally installed it 15 minutes ago
39847;just use a somewhat unique name for it
39848;yea
39849;so you're saying i need to make a github repo?
39850;no thats not what i said
39851;just use a somewhat unique name for it
39852;for what?
39853;one that won't conflict with something else you might use
39854;`go mod init <unique name>`
39855;the module path
39856;the very thing its complaining about
39857;ok keep in mind i was just told to run go mod init i have no idea what it is supposed to do
39858;sorry I forgot the exact usage of that command
39859;so is it go mod init and then the path where i want modules to go?
39860;you can just run `go mod init messingaroundlol`
39861;doesn't matter too much if it's not real
39862;ok
39863;ok thanks that works
39864;now run `go get u rsc.io/quote`
39865;without u
39866;yeah i got it to work
39867;oh why without u
39868;iirc that updates all the deps of that dep
39869;which you dont want
39870;"and after you run that command just add `import rsc.io/quote""` near the top of the file"
39871;yeah got that
39872;`u` updates. Don't need that now that we have modules and proper versioning
39873;Is it detrimental to include it?
39874;i think potentially
39875;None
39876;not the _all its depencencies_
39877;It will fetch  latest or everything
39878;even when it should be pinned to a different version
39879;it `example.com/package` will update to its latest version
39880;if `example.com/package`'s latest version has pinned dependency versions it will update those accordingly
39881;otherwise I'm pretty sure it will just update everything to latest? which doesn't work sometimes
39882;anything not using modules is kinda wack at this point so I'm not sure
39883;`json.InvalidUnmarshalError{}` is not an `error`. How else can I return an Unmarshal error when the []byte is invalid?
39884;`&json.InvalidUnmarshalError{}` is an `error`
39885;None
39886;Oh thanks! I was returning it as a value not a reference. Thank you ‚ù§Ô∏è
39887;if i had a variable that started with an underscore would that be unexported? or exported?
39888;probably unexported
39889;better idea dont do that
39890;i assume unexported but idk since i havent tried it nor do i know how to create packages
39891;yeah im not but i wish go allowed snakecase
39892;its easier to read compared to camel case
39893;i dont find that personally
39894;certain letters & fonts make camel case annoying to read but you can never_go_wrong_with_an_underscore
39895;is this a reasonable way to do this?```go// Chan prepares a Halt channel with running signal notifications.func Chan(ctx context.Context) chan Halt { halts := make(chan Halt 1) sig := make(chan os.Signal 1) signal.Notify(sig os.Interrupt) signal.Notify(sig syscall.SIGTERM) go func() { for { select { case s := <sig: halts < Halt{Sig: s} case <ctx.Done(): halts < Halt{Err: ctx.Err()} } } }() return halts}```
39896;It is only exported when the first letter is of the Unicode class `Lu`
39897;that's Latin Upper right
39898;nvm
39899;letter uppercase
39900;Letter uppercase
39901;_ (full length low line) is not part of that class
39902;It is part of the Pc class
39903;punctuation connector
39904;unicode is fascinating
39905;makes an exported function that starts with —¨ in production code
39906;That is valid
39907;I know
39908;·èú is a neatlooking one
39909;The real magic is that control characters aren't banned
39910;üëÅÔ∏èüëÅÔ∏è
39911;for function names
39912;lmaooo I can name a func `‚Ñ±oo`
39913;You can have a righttoleft character in your code
39914;https://play.golang.org/p/U0hkbFF9vMu
39915;```gofunc ùîâooùîÖar() {}```
39916;https://play.golang.org/p/ZqqPq7b0UMV
39917;discord's highlighting fails on those lol
39918;Actually identifers are limited to Lu + _ + digit
39919;The rest of the code can have other classes as well
39920;```gofunc ùôÅooùòΩar() {}```
39921;having a cancellable bot runner is fascinating lol```gofunc main() { ctx cancel := context.WithCancel(context.Background()) _ name := filepath.Split(os.Args[0]) go func() { time.Sleep(time.Second  5) cancel() }() bot.New(ctx name).Run(ctx)}```
39922;seems weird to pass the same context in twice
39923;hm yeah
39924;what does New do that requires it
39925;New opens a db connection
39926;which tests ping
39927;which needs a ctx
39928;what does Run do that needs it
39929;will there be any go conference this year online to watch for free?
39930;run waits for a cancellation signal
39931;makes sense then to have it in both
39932;either from an interrupt a context cancellation or an error elsewhere
39933;why use WithCancel when you can do WithDeadline or WithTimeout
39934;no need to do the goroutine then
39935;that was just a demo
39936;OK TERRA
39937;:agooglethumbsup:
39938;I know deadline/timeout would be better lol
39939;I cant run the program I ran like 1 minute ago why? Its a server program that supposed to listen for requests but now when I type go run main.go it just exits
39940;ok closing vscode solved my problem
39941;weird
39942;imagine expecting consistency from an electron app
39943;I mean here we are chatting on an electon app but yeah
39944;Yes
39945;Precisely
39946;Imagine expecting consistency from discord
39947;kek
39948;maybe I should switch to vim go
39949;"```govar ( jar err = cookiejar.New(&cookiejar.Options{PublicSuffixList: publicsuffix.List}) cookies []http.Cookie)func indexHandler(w http.ResponseWriter req http.Request) { c := &http.Cookie{ Name: session"", Value: test"", Path: req.URL.Path, } cookies = append(cookies c) jar.SetCookies(req.URL cookies) io.WriteString(w Hello world!"") cs := jar.Cookies(req.URL) fmt.Println(c.String()) fmt.Println(cs)}func main() { http.HandleFunc(""/test indexHandler) http.ListenAndServe("":8080 nil)}```"
39950;When send request via curl and print cookiejar its empty any idea why?
39951;probably due to `PublicSuffixList: publicsuffix.List`
39952;`localhost:8080` probably doesn't satisfy that list
39953;yeah it doesn't
39954;assuming that's x/net/publicsuffix you're using
39955;yeah
39956;then that's your issue lol
39957;nah its still the same
39958;I passed nil as parameter
39959;jar is still empty
39960;hmm
39961;What is `req.URL`?
39962;(what is its value I mean)
39963;lemme print and check
39964;it's just `/test`
39965;yeah
39966;it needs to be absolute
39967;See this comment on `SetCookies`:> It does nothing if the URL's scheme is not HTTP or HTTPS.
39968;Cookie jars aren‚Äôt really intended to be used on the server side‚Äîthey‚Äôre more a clientside construct for outgoing requests. That‚Äôs not to say that you can‚Äôt use it on the server but you‚Äôll have to work around some assumptions that make it easier to use on the client side.
39969;I am basically coding a terminal app that communicates with a server since I dont use browser I'm trying to store cookies in cookiejar
39970;any workaround you can recommend?
39971;why are you doing listenandserve in a client program :thinkingo:
39972;oh this is just for testing
39973;I see
39974;well trying to get a url from a server request is evidently gonna give you issues
39975;in a worst case scenario I'll just store it in a file but storing it in a ram would be better.
39976;maybe I should just store it in a global variable :thinkingo:
39977;I suppose the workaround is to...use it in client requests rather than in server handlers if that‚Äôs what you‚Äôre really trying to do üòÖ
39978;`http.Client` has a `Jar` field that will automatically manage cookies for you between requests
39979;thanks I dont know why I tried to test it that way. I am trying to build a session based authentication system. I guess I should just crete the uuid on server side and send the value back to the client or vice versa. The whole concept is kinda new to me so I make this type of silly mistakes
39980;Even though they‚Äôre part of one system they‚Äôre completely separate problems
39981;"The jar exists on the client so that cookies from one request persist to the next; it doesn‚Äôt know anything about sessions that is its one goal"
39982;Keeping track of sessions on the server is basically just reading cookies on incoming requests‚Äîjars don‚Äôt exist on the server. You can be confident that each subsequent request will contain the session cookie because of the jar but the server doesn‚Äôt actually know about that (it could be a browser that has similar functionality for example)
39983;another question does `http.SetCookie` send cookie to client side? I saw people use it in server handlers
39984;Yep.
39985;now it makes sense.. Thank you üëç
39986;"Hello is there a way to use struct like this ```type Values struct {  [] `json:"" `}```"
39987;what is this what are you trying to do???
39988;I am editing some big Go code. I just know that I need to do this. üòÑ
39989;what code has this? i have never seen ` []` before
39990;If I want this to be normal I will need to change 1000 related things.
39991;im not sure thats valid
39992;That is not valid
39993;is there a way to make the name as string or something?
39994;`myfieldname []mytypename`
39995;????
39996;I mean the dash
39997;to make as string
39998;Or any workaround
39999;no
40000;why would you ever want that
40001;Want what
40002;dash?
40003;dash for what?
40004;field name? type name? in the tag?
40005;youve got 3 dashses there
40006;please actually tell me what youre on about
40007;ok
40008;"So I am using something like this  ```type Resp struct { Technical []Technical `json:""technical""`}type Technical struct { Key string `json:""key""` Value string `json:""value""`}```This works fantastic. But there is also other key names in coming from db that has \'key\ : \' \'. Thats why I am using this kind of struct?!"
40009;next time please start with your question like that
40010;?go xy
40011;http://xyproblem.info/
40012;okay
40013;now can you show your data that as a key
40014;uhm
40015;I guess so
40016;I just need struct
40017;for it
40018;and then loop through that
40019;can you show
40020;your
40021;data
40022;ok
40023;"```"" :[{""key"":""filename"",""value"": /Users/Shared/lala/Rayday666.mp4""},{""key"":""nb_streams"",""value"": 2""}]```"
40024;maybe you want a map then
40025;because its not possible to have a struct field called
40026;or change your field name
40027;whats in the json doesnt have to match the struct
40028;"Ok how I can do that if I am doing it for technical like this  ```c _ := json.Marshal(metadatum.Value)data := Resp{}err := json.Unmarshal(c &data)if err != nil { //log.Fatal(err)}for _ t := range data.Technical { m[""technical. + t.Key] = t.Value}```"
40029;read what i just said
40030;ahh
40031;> or change your field name@Str≈ìm What field name?
40032;the dash?
40033;Not sure how I need to write struct for it if the json does not matter.
40034;How I would get it in loop then if the name of struct is wrong?
40035;You can have a dash as a key name in JSON that's fine
40036;"The tag for that is `json:"",""`"
40037;"Or if it\'s ` ` just `json:"" `"
40038;So that is how I can access it through data. ?
40039;No you'd need to give the field a valid (and exported) name in the Go struct
40040;It just doesn't have to match what it's called in the JSON as Stroom pointed out
40041;"e.g. ``TestField string `json:"" `` which you can access via `someStruct.TestField`"
40042;"Ok so could it be  ```Basic []Basic `json:"" ```And  ```for _ t := range data.Basic { m[""Basic. + t.Key] = t.Value}```"
40043;Sure
40044;Cool
40045;thanks ! üôÇ
40046;What Go packages are worth knowing? Besides standard library Sync Context what other are often appreciated and frequently used?
40047;Really depends on your problem domain
40048;^
40049;also strings fmt bytes bufio io ioutil log flag
40050;>besides stdlib
40051;Besides standard library Sync Context
40052;that's literally 2 packages
40053;im assuming theres supposed to be a
40054;but even then sync and context are stdlib @Shanduur
40055;Hi is there a way of establishing if go is running via go run main.go vs go build main.go progromatically?
40056;why?
40057;"```func Base() string { // Need to check current working directory for live/production //_ b _ _ := runtime.Caller(0) //filePath := filepath.Join(filepath.Dir(b) ../../.."") filePath _ := os.Executable() pathAbs _ := filepath.Abs(filePath) basePath := filepath.Dir(pathAbs) //fmt.Println(filepath.Clean(""/my/path/is/long/../../"")); return basePath}```"
40058;This function returns where main.go is located
40059;When building its fine
40060;why do you need that info
40061;When running `go build main.go`It comes back with `cannot load environment file: open /var/folders/1y/s7sb7frn78v5q8gtm7n9zc0m0000gn/T/gobuild301417718/b001/exe/.env: no such file or directory`
40062;Sorry go run produces that error
40063;again why do you need that info
40064;Its right there ^
40065;Because go run main.go is not getting the env file from the directory
40066;I need the base path from the project so I can resolve files and folders all over the place
40067;https://stackoverflow.com/questions/18537257/howtogetthedirectoryofthecurrentlyrunningfile
40068;first result on google
40069;did you try this
40070;this is probably a dumb question but is it a bad idea to have a go routine possibly sleeping for a week
40071;not necessarily
40072;hmm
40073;what if there‚Äôs like 4 of them waiting for ~1 week
40074;lol
40075;basically would sleeping hinder the performance
40076;no
40077;okay thanks
40078;cuz i saw a thing that said having a go routine that isn‚Äôt particularly useful could hurt your program
40079;thanks
40080;:blush:
40081;Thanks @Str≈ìm
40082;Had to change something but all good
40083;he has 5 badges
40084;crazy
40085;real gamer hours
40086;how long did it take for you to get bot dec
40087;dev
40088;few weeks
40089;wow
40090;as in i applied and waited a few weeks
40091;> cuz i saw a thing that said having a go routine that isn‚Äôt particularly useful could hurt your programI guess it means to keep your program as simple as possible
40092;but if you have to do it then do it
40093;Is there a way to write a http.Response to a http.ResponseWriter?
40094;the way im doing it only gives me a responsewriter for some reason
40095;??
40096;io.Copy the body
40097;"```log.Fatal(http.ListenAndServe("":8080 http.HandlerFunc(func(w http.ResponseWriter r http.Request) { fmt.Println(""New connection"") if r.Method != CONNECT { forward(w r) }else { fmt.Println(""Client attempted https connection"") } return })))```"
40098;what about the headers?
40099;you can copy that as well
40100;"response has a r.Header; loop over that and write them to w.Header()"
40101;Do people tend to structure logical entities by having a struct and attaching methods to it or just packages names with init methods on the package? Any preferences or recommendations?
40102;that's kind of vague
40103;I guess just asking if there's any tight way of doing things in go. I tend to code more in Java / python. So all my state of usually wrapped in class + constrictor. I don't believe a strict has any concept of init function so I'm just trying to figure out if I'm just pushing my old ways in go for no reason
40104;if you don't know what init() is used for then you should just avoid it as a whole
40105;side effects are only good for a very small niche cases
40106;there isn't a strict way of doing those in Go but you'd usually use a struct and constructor for states
40107;hi
40108;hi
40109;I\'m a jr software developer looking to toy around with go but I wonder what it is go good at? I have look on google and it says backend but what kind of backend does go do?
40110;backend means web backend
40111;but thats not all its good for
40112;can you tell me the whole history?
40113;eh?
40114;go is a general purpose language
40115;its concurrency model makes it good for anything that requires heavy concurrency
40116;I used pprof to check the memory usage of my program and I got this as the result
40117;None
40118;the whole program went from 10mb to 300mb after i sent 10k requests
40119;any idea of the cause?
40120;what are you writing to the request/response?
40121;the response was just welcome
40122;only showing that tiny fragment doesnt tell us much about its origin
40123;so basically it's a server that gets a request and then it checks the request and sends it again to another server with http.client
40124;the other server is just sending welcome
40125;it basically sends another request to another server and copies the data from that server to the response
40126;10k requests over what timeframe
40127;20seconds
40128;and then after it did some garbage collecting it settled at 280mb
40129;where are you getting that figure from
40130;task manager
40131;unreliable metric
40132;the runtime will release memory if it needs to
40133;to reduce the amount of times it needs to ask the OS for memory itll hold onto free'd memory
40134;so how do i properly check it?
40135;pkg/runtime iirc has functions to checkout
40136;Alloc = 173 MiB TotalAlloc = 342 MiB Sys = 580 MiB NumGC = 8
40137;does that meanb anything to you?
40138;and it's still aboout the same
40139;50mb for the two things in the screenshot
40140;Is there any way to read a file line by line and then select a random line that it prints out?
40141;I'd be worried if there wasn't
40142;you have to read everything into memory but yes
40143;Anyone good with docker? I have a shell in an golang alpine container,```go/go/src/x # lsapp/go/src/x # ./appsh: ./app: not found````app` is just the result of `go build`.
40144;do ``chmod +x app``
40145;Tried that
40146;If it doesn't work try ``chmod 777 app``
40147;Ok. I'm building with OOS=linux now
40148;`ldd app`
40149;GOOS
40150;It will be a linux build if you're building it in the container
40151;I don't think it's built in the container
40152;Yeah thats what I thought. Also running on a linux machine (btw)
40153;gonna guess it's trying to link to the nonexistent glibc
40154;Ok I have a shell
40155;Yeah chmod didnt work
40156;`ldd app`
40157;Error relocating app: fcntl64: symbol not found
40158;build with `CGO_ENABLED=0`
40159;or build with muslc
40160;Why do I need to build with CGO?
40161;Oh thats without
40162;Worked üéâ
40163;So does alpine not have correct c bindings or something @_diamondburned_ ?
40164;no Alpine uses muslc
40165;other distros use glibc
40166;Ok
40167;Thanks for the help
40168;> go: downloading go.opentelemetry.io/otel v0.11.0bruh what
40169;yeah yw
40170;lemme look into this lmao
40171;What deps you got
40172;go mod why?
40173;Someones pulling opentel
40174;Probably for good reason
40175;:kkk_hmm:
40176;deps```require ( github.com/bwmarrin/discordgo v0.22.0 github.com/dlclark/regexp2 v1.2.1 github.com/goredis/redis/v8 v8.0.0beta.10 github.com/logrusorgru/aurora v2.0.3+incompatible github.com/mattn/gocolorable v0.1.7 github.com/pbnjay/memory v0.0.020190104145345974d429e7ae4 github.com/superloach/nilog v0.0.02020081414165755dd271e9f84)```
40177;run go mod why
40178;Probably lobrusorgru
40179;> ru
40180;ü§®
40181;Because opentel supports logging
40182;So thatd be logical
40183;nope that only has stdlib imports
40184;r u sure
40185;Did you run go mod why
40186;working on that
40187;ahh it's the redis lib
40188;damn
40189;Makes sense
40190;Youd wanna instrument your network calls
40191;hmm
40192;but what's it doing
40193;Instrumenting
40194;right so that's just a local thing
40195;open telemetry sounds scarier than it seems lmao
40196;Its the good telemetry lol
40197;nice slogan
40198;. `panic: failed creating schema resources: Binary was compiled with CGO_ENABLED=0 gosqlite3 requires cgo to work. This is a stub`
40199;"hey everyone i got a questioni have a webserver and i have 2 endpoints with `handlefunc`example:``` http.HandleFunc(""/dashboards/versions env.RhVer) http.HandleFunc(""/dashboards/versions/report env.ExportReport)```both have functions have parameters `w http.ResponseWriter r http.Request`the first function can read the query strings with `r.URL.Query()` an do see the values but when i go the second URL i don\'t see any query strings in the map. I\'m wondering if it\'s becuase of having multiple request handlers?"
40200;lol sqlite3
40201;compile with CC=muslc
40202;wait is that right? I forgot
40203;/cc @sam!
40204;@// todo show entire dockerfile please
40205;```dockerfileFROM golang:1.15 as buildWORKDIR /go/src/fiberboilerplateCOPY . .RUN go mod downloadRUN go mod verifyRUN GOOS=linux CGO_ENABLED=0 go build o appFROM golang:alpine as runENV APP_HOME /go/src/fiberboilerplateWORKDIR $APP_HOMECOPY from=build $APP_HOME/app $APP_HOMEEXPOSE 3000CMD ./app serve```
40206;huh you didn't add sqlite as a dep?
40207;Dont mix debian and alpine please
40208;Its multistage does it matter?
40209;oh yeah this too
40210;Either make both images alpine based or both images debian based
40211;DONT mix
40212;Yes multistage absolutely matters
40213;Alright alright
40214;You build for glibc and then run with muslc
40215;Of course that is recipe for failure
40216;True lol
40217;I get the same error
40218;Maybe I'll just use the debian base
40219;kek sure
40220;Lol image size doubled to 900mb
40221;I don't think you should be too concerned about image size if you're using Docker
40222;Yeah but theres no harm in optimizing it if you can
40223;it's not worth the time
40224;Optimizing image size sometimes worth but only at work I think
40225;Use a common base and the layering takes care of everything
40226;"@// todo ik youre gonna use a debian image now but `CC=muslgcc go build ldflags \'linkmode external extldflags static""\ tags netgo` builds a binary that can run on any linux system regardless of whether its glibc or musl"
40227;god damn
40228;never seen that invocation
40229;oh it's `muslgcc`
40230;Got it thanks for the tip
40231;:butler1::butler2::butler3::butler4:
40232;At that point you might as well just disable cgo right?
40233;Same effect
40234;you need it for sqlite
40235;^
40236;gosqlite3 doesn't link against libsqlite3 by default so you don't need the library present to compile stuff with it
40237;Ah. Missed that part
40238;sqlite without cgo: <https://pkg.go.dev/modernc.org/sqlite>... by transforming c into go
40239;you can also build on alpine and get sqlite working
40240;I don\'t see where the transforming c into go part is
40241;you can build cgo on Alpine just fine
40242;the problem is building cgo on Debian and then using it on Alpine
40243;Debian uses glibc while Alpine uses muslc
40244;<https://gitlab.com/cznic/ccgo> / <https://gitlab.com/cznic/cc>
40245;wow this code is something else
40246;https://gitlab.com/cznic/sqlite//raw/master/lib/sqlite_linux_amd64.go
40247;```go if ((((((U32)(unsafe.Pointer(bp + 12 / iPageSize /)) < U32(512)) || ((U32)(unsafe.Pointer(bp + 8 / iSectorSize /)) < U32(32))) || ((U32)(unsafe.Pointer(bp + 12 / iPageSize /)) > U32(65536))) || ((U32)(unsafe.Pointer(bp + 8 / iSectorSize /)) > U32(0x10000))) || ((((U32)(unsafe.Pointer(bp + 12 / iPageSize /))  U32(1)) & (U32)(unsafe.Pointer(bp + 12 / iPageSize /))) != U32(0))) || ((((U32)(unsafe.Pointer(bp + 8 / iSectorSize /))  U32(1)) & (U32)(unsafe.Pointer(bp + 8 / iSectorSize /))) != U32(0)) { // If the either the pagesize or sectorsize in the journalheader is // invalid then the process that wrote the journalheader must have // crashed before the header was synced. In this case stop reading // the journal file here. return 101 }```
40248;feels unsafe üòâ but the translation is automated
40249;whack
40250;I know it's automated
40251;and I've generated unsafe code before
40252;just not sure why it's full of weird casts and magic constants
40253;hmm maybe its emulating the c stack
40254;> get an interesting result.:Thonk:
40255;None
40256;https://godoc.org/modernc.org/libc
40257;probably not yet production ready üòâ another one <https://github.com/crawshaw/sqlite>
40258;> This is not a database/sql driver.I'd stick to mattn's
40259;its a lower level api this article lists some of the considerations https://crawshaw.io/blog/oneprocessprogrammingnotes mainly Just as SQLite steps beyond the basics of SELECT INSERT UPDATE DELETE with fulltext search it has several other interesting features and extensions that cannot be accessed by SQL statements alone. These need specialized interfaces and many of the interfaces are not supported by any of the existing drivers.
40260;mattn's is probably a safe choice...
40261;https://crawshaw.io/blog/goandsqlite
40262;None
40263;is there a better way to implement this
40264;i basically need to draw an element from an array (well map in my case this has to be refactored anyway somehow (???)) based on a nonuniform distribution
40265;i.e i get an array of probabilities for each element
40266;<https://github.com/zephyrtronium/xirho/blob/master/system.go#L211> is how i do this in a performancecritical case
40267;iterator.next above it is the actual sampling method
40268;o
40269;that's an interesting project btw
40270;thanku
40271;None
40272;what's the point of the &
40273;:HomuMadoKiss:
40274;float64 values have 53 mantissa bits (including the implicit bit) which means if you use more than 53 generated bits then your precision exceeds what the machine represents
40275;which (very slightly) modifies the actual distribution
40276;oh
40277;well in my case i leave the accuracy to the caller
40278;which is eh
40279;like i can do 1000.0
40280;i.e. by restricting the integer values to 53 bits a single multiplication by a floatingpoint number in [0 1] is always exact
40281;so then 0.865 would mean that 865 elems
40282;that's another option but it uses potentially unbounded memory and causes (many) allocations with every invocation
40283;i mean i don't think my case is performancecritical
40284;it's a markov chain
40285;it's going to be very slow compared to my precalculation method and my solution doesn't trade off system resources for accuracy
40286;what about this> (well map in my case this has to be refactored anyway somehow (???))
40287;my thing is also a markov chain technically
40288;as this works for arrays
40289;o
40290;üëÄ
40291;> as this works for arraysand mine is a map
40292;i can think of a ghetto solution
40293;where i just do for range and increment a num until it's equal to the value returned from Sample()
40294;that sounds really bad üôÇ
40295;yes
40296;i know
40297;:HR_NayuSmile:
40298;introduce an association between your map keys and integer indices then sample from those indices
40299;None
40300;None
40301;here's my code
40302;which obviously doesn't compile
40303;i can make a temp slice which is index > state
40304;üëÄ
40305;None
40306;:Evil:
40307;i mean it works @zephyrtronium
40308;btw what is `it.w`
40309;in your case
40310;sure if you're very not sensitive to performance and can afford the allocations your approach will work
40311;it.w is the weights of each edge in the graph
40312;it's a linearized adjacency matrix to use some technical terminology
40313;üëÄ
40314;by linearized i mean it\'s a matrix but it\'s stored in a 1d slice for performance reasons
40315;tfw
40316;so
40317;flattened?
40318;sure that too
40319;to me flattened implies that it\'s being reinterpreted and actually used as a vector but it\'s still very much a matrix
40320;> it's going to be very slow compared to my precalculation method and my solution doesn't trade off system resources for accuracydoes it trade off readability tho
40321;ü§®
40322;üôÇ
40323;üëÄ
40324;question
40325;are your weights sorted @zephyrtronium
40326;no
40327;i'm using the cumulative sum of the weights when calculating the elements of it.w so the weights being nonnegative means the cumsum is sorted
40328;> float64 values have 53 mantissa bits (including the implicit bit) which means if you use more than 53 generated bits then your precision exceeds what the machine represents@zephyrtronium what about the other 11 bits
40329;sign and exponent
40330;10 bits for exponent?
40331;and 1 for sign?
40332;yep
40333;no
40334;11 bits for exponent
40335;53 mantissa bits includes an implicit 1 that isn't physically represented
40336;why were these numbers chosen
40337;52 and 11
40338;like
40339;:bruh:
40340;btw i was gonna go for a similar approach to yours but then i realized
40341;<https://en.wikipedia.org/wiki/IEEE_754>
40342;if my probability slice is `[0.8 0.2 0.2]` i'd never get to the 2nd 0.2
40343;as i'd do an early return on the first 0.2
40344;yep that's what the cumulative sum addresses
40345;üëÄ
40346;after cumsum the weights become [0.8 1.0 1.2] and then you divide by the sum in the last element to normalize to [0 1]
40347;the only requirement is that weights never be negative
40348;i mean they never will be in my case
40349;>and then you divide by the sum in the last element to normalize to [0 1]
40350;wouldn't i run in the same issue?
40351;sorry i used interval notation where it's confusing
40352;`[0.8 1.0 1.0]`
40353;1.2 / 1.2 = 1.0
40354;you divide every element by 1.2
40355;i see
40356;so it'll be [0.666666666667 0.833333333333 1.0] at the end
40357;this way you also ~~neglect~~ fix the sorting issue right
40358;what do you mean by neglect
40359;fix
40360;yea bad choice of words
40361;the cumulative sum is the part that makes the values be sorted
40362;yea
40363;how can i make a command handler for my discordgo bot so each command has its own file
40364;where did you find that idea btw @zephyrtronium
40365;or did you come up with it yourself
40366;(using cumsum to achieve nonuniform distribution)
40367;statistics class
40368;that's how you go from a probability mass function to a cumulative distribution function
40369;for a continuous distribution where you have a probability density function instead of a pmf you do an integral
40370;üëÄ
40371;where does nonuniform distribution come into play in those terms
40372;is that PMF
40373;nonuniform distribution is any probability distribution that is not a uniform distribution
40374;yea
40375;uniform distribution is very specific
40376;isn't uniform distribution such that every element has equal probability
40377;or very close to equal
40378;just the first of those two messages
40379;i mean in the case of go
40380;you can't really make that can you
40381;i don't
40382;sure you can
40383;üëÄ
40384;wouldn't there _always_ be some bias towards some numbers
40385;"the distribution is implied by how things are programmed; it's not very common that you encode a uniform distribution in anything other than support i.e. number of elements"
40386;Does anyone know if there is a setting in Goland/Intellij to align struct types? Can't find anything in code styleeg```gostruct { x string y string}```to ```gostruct { x string y string}```
40387;`gofmt` does that by default does GoLand make use of it (or is able to)?
40388;GoLand has its own toolings iirc but it should still be able to
40389;whats gofmt
40390;"its goimportsalternative is very weird though; the import sorting behavior is slightly different"
40391;I set the sorting type to gofmt at the advice from someone
40392;Goland has barely any search engine presence :/
40393;There's probably a way to run gofmt on save though
40394;@zephyrtronium
40395;seems ok right?
40396;any suggestions to improve this
40397;that name is intentional isn't it
40398;CONSOOOOOM
40399;yes
40400;every lib has it that way
40401;:SMUGGERED:
40402;numpy.math.cumsum
40403;https://twitter.com/ellesystem/status/1298355589983043584?s=19
40404;it's supposed to be cumSum or CumSum
40405;per Go's naming convention
40406;sad
40407;why do you divide it
40408;normalize [0 1]
40409;Goodnight yeezie
40410;but it's computing the cumulative function of a probability distribution right
40411;is there a way to run go on save
40412;there shouldn't be a need to normalize
40413;and is probably incorrect if you choose to use it over other functions
40414;depends on editor @shaky
40415;it won't be needed in other funcs
40416;one use case only
40417;i think the name is misleading in that case
40418;> there shouldn't be a need to normalizehttps://discordapp.com/channels/118456055842734083/118456055842734083/752677485606600825
40419;but i also question why you need to normalize it in the first place
40420;https://discordapp.com/channels/118456055842734083/118456055842734083/752678457980485682
40421;@_diamondburned_ vsc
40422;I'm confused why would you have 0.8 0.2 0.2
40423;probabilities
40424;how do you have a total chance of 1.2
40425;not sure probably some extensions
40426;what do you need to run go for
40427;oh
40428;that's just me giving a bad example
40429;it'd be
40430;0.8 0.1 0.1
40431;w/e
40432;nvm
40433;point still stands tho
40434;and that adds up to 1.0 right
40435;yes
40436;> how do you have a total chance of 1.2When its super probable :kkk_hmm:
40437;so the cumsum is 0.8 0.9 1.0
40438;yes
40439;so normalizing it seems extraneous
40440;wait yea
40441;strom are you 900% sure with that answer?
40442;üëÄ
40443;i was baited
40444;tfw
40445;baited to realization
40446;if you do need to normalize that is a different operation to cumsum
40447;that should probably be in a different function
40448;yea i was about to separate it then i realized my brainfart
40449;:partygopher:
40450;wait
40451;nvm it works
40452;> numpy.math.cumsum@fr3fou üò≥
40453;None
40454;hey does this look like a memory leak? This app has been running for 25 mins
40455;Go's GC generally increases the memory usage limit before it does a sweep over time
40456;To reduce GC cycles
40457;Are you continually adding stuff to data structures like slices or maps? Or continually spawning goroutines that don't finish? Those are pretty much the only ways to have a leak in a Go program
40458;Anyone know why gorm‚Äôs automigrate wouldn‚Äôt be creating a table for a model?
40459;What does the struct look like?
40460;Something like  type Comment struct { gorm.Model  Content string  UserID uint  PostID uint}
40461;How are you migrating it?
40462;Is your db actually connected?
40463;Are you ignoring any errors?
40464;Using gorm‚Äôs AutoMigrate func yes db is corrected no errors
40465;Pretty sure gorm has a debug output mode can try enabling that and seeing what it spits out
40466;Showing a minimal reproducible example could help too
40467;None
40468;None
40469;None
40470;welp nvm dropping tables in postgres and rerunning my server fixed it ü§∑\u200d‚ôÇÔ∏è
40471;it's good to have a setup/cleanup process for your infrastructure anyways
40472;i must have autism i still don‚Äôt understand channels
40473;it‚Äôs been 3 days
40474;:angry:
40475;they are hard
40476;yes
40477;:pepeSad:
40478;what dont you understand
40479;i don‚Äôt rly know lmao
40480;i get it when it‚Äôs in
40481;like single use
40482;but when you put it in a big piece of code i get lost
40483;i mean big pieces of code are just a bunch of little pieces of code
40484;you just have to break it down into its parts
40485;i guess
40486;i‚Äôll keep trying
40487;> i must have autism i still don‚Äôt understand channels@shaky already tried to watch talks?
40488;?go concurrency
40489;Rob Pike  Concurrency Is Not Parallelism <https://www.youtube.com/watch?v=cN_DpYBzKso>  SkippyKavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_TailorUnderstanding channels <https://www.youtube.com/watch?v=KBZlN0izeiY>  Sgt_Tailor
40490;They're all great
40491;I've been really wanting to watch the second but most of my scheduler knowledge came from petty bikeshedding arguments
40492;Second one is really good
40493;Great presenter
40494;has anyone used https://wails.app/ ?
40495;do you think i could make a notetaking app in it?
40496;and how good of an idea would that be?
40497;huh there's actually an app tutorial for this https://wails.app/tutorials/todo/
40498;never mind i'll probably do nodegui
40499;does it use chromium embedded framework?
40500;It used the gtk webview as fas as I can tell
40501;webkitgtk is a direct dependency
40502;how the heck do I setup VS Code to use the proper working directory?
40503;if I use `path/filepath`.Abs I get C:\\
40504;"tried adding `""cwd"": ${fileDirname}""` to launch.json"
40505;${workspaceRoot}
40506;also how do I specify that it should run `server.go` when I hit the Launch button instead of whatever i got open?
40507;specify the path to that?
40508;well where?
40509;"```{ // Use IntelliSense to learn about possible attributes. // Hover to view descriptions of existing attributes. // For more information visit: https://go.microsoft.com/fwlink/?linkid=830387 version"": 0.2.0"", configurations"": [ { name"": Launch"", type"": go"", request"": launch"", mode"": auto"", program"": ${fileDirname}"", env"": {}, args"": [], cwd"": ${workspaceRoot}"" } ]}```"
40510;using this now
40511;and filepath.abs still returns C:\\
40512;you know you can hover over those keys and itll tell you what theyre for
40513;I do
40514;I don't see them explaining what I need though
40515;None
40516;yep ive read that
40517;just wants a folder
40518;the path to the folder of main package
40519;how does it know which is the main then?
40520;because you pass it the path to main...
40521;not sure what you mean
40522;the main package
40523;you pass it the path to the main package
40524;so path\\main.go?
40525;i said main package not file
40526;a package can be composed of more than one file
40527;No clue then
40528;you need to refresh yourself on the concept of packages
40529;theyre a fundamental and basic necessity to programming in Go
40530;I mean request_handler tcp_server etc are packages
40531;and wheres your main package
40532;is it the root
40533;server.go
40534;is the main package
40535;is in the main package
40536;yeah forgot all go files are assigned to packages
40537;so youll probably want what i pasted at the very beginning
40538;on the program field?
40539;yes
40540;nice that worked
40541;now what about work directory?
40542;what about it
40543;`Abs returns an absolute representation of path. If the path is not absolute it will be joined with the current working directory to turn it into an absolute path. The absolute path name for a given file is not guaranteed to be unique. Abs calls Clean on the result.`
40544;this just returns based on C:\\
40545;well what do you pass it
40546;"if I do filepath.Abs(""folder"") it does C:\\folder"
40547;I want it to go to relative to the current file
40548;or atleast to the current folder
40549;its relative to the current working dir
40550;yeah and for some reason cwd is C:\\ ?
40551;apparently so
40552;"that\'s why I did `""cwd"": ${workspaceRoot}""`"
40553;did you open a single file or the whole folder in vscode
40554;whole folder
40555;"```{ // Use IntelliSense to learn about possible attributes. // Hover to view descriptions of existing attributes. // For more information visit: https://go.microsoft.com/fwlink/?linkid=830387 version"": 0.2.0"", configurations"": [ { name"": Launch"", type"": go"", request"": launch"", mode"": auto"", program"": ${workspaceRoot}"", env"": {}, args"": [], cwd"": ${fileDirname}"" } ]}``` current config"
40556;fileDirName is the type of cwd i want
40557;¬Ø\\_(„ÉÑ)_/¬Ø
40558;its true
40559;`Note that cwd must come before args or it won't work.`
40560;and just like that it was fixed
40561;rofl
40562;>m$
40563;ok zoomer
40564;have a pat on the back
40565;hmm so
40566;if I've got a list of things
40567;and I want to cycle through them randomly but ensure that they don't repeat too closely
40568;would that be kinda like a random lru?
40569;like randomly select from the N least recently used items
40570;What is ‚Äútoo closely‚Äù? Do you want to visit all elements once before repeating? If you do the scheme you suggested what happens when N elements are significantly less used so they get picked consecutively?
40571;> Do you want to visit all elements once before repeating?I don't need that guarantee no  I just want to continuously select one of the less recently used elements
40572;because if I just shuffle and visit them all I could end up with the last element of one shuffle being the first element of the next
40573;well  the problem is you need clearer parameters
40574;I suppose it wouldn't be hard to just check for that case and reshuffle
40575;"this is like saying i want to shoot one of the 1% and redistribute their wealth"". It\'s a valid thing to want but defining HOW you pick the thing will have a DRASTIC effect on your endgame"
40576;random but not quite sounds a lot like what most music services do?
40577;something like <http://www.ijmsta.com/Vol_1_2_Papers/IJMSTA_Paper_7.pdf>?
40578;> random but not quite sounds a lot like what most music services do?@jan blackquill similar idea yes
40579;I'll take a look at that
40580;I think I'll try to make a proofofconcept of what I'm trying to do here
40581;And yes lots of music services have written extensively about how they implement their shuffle algorithm to make it seem more random
40582;https://play.golang.org/p/UcU1SEUC41N
40583;I've got something working pretty well here
40584;I'd probably put a lock in `Select` and have an `Add` method for concurrent use
40585;actually I don't think I need that for my use case
40586;anyway
40587;https://play.golang.org/p/kM4Poxmcx_s here's a version using only copy so the shuffler is just a slice
40588;and here it is in prod :P<https://github.com/gosnart/snart/commit/6c57a8><https://github.com/gosnart/snart/commit/f79b65>
40589;I'm developing a client server application. For project structure should I just create two directories like `cmd/server/main.go` and `cmd/client/main.go` or should I just seperate the entire project into two projects like`myappclient` `myappserver`?
40590;They probably share a lot of the same code so I would have them in the same repo but with different main packages. Just like your first example
40591;what's the accepted standard for multiword filenames? word1Word2.go word1_word2.go ?
40592;You should avoid composed name but in the worst case snake case is better than camel case
40593;But keep in mind that you can't add _linux for instance because the file will only compile on linux
40594;So be careful üôÇ
40595;Most of the stblib does snake_case as well. But yeah the suffixes for build constraints are something to watch out for
40596;as well as the obvious _test.go suffix
40597;Hey how much the default int data type can store i mean like 32 bit or 64bit ?
40598;Vs code is saying it's at least 32 bit
40599;üëÄ
40600;That's how it's defined‚Äîat least 32 bits. It can be larger (namely: 64 bits) depending on the architecture.
40601;If you need a specific size use the sized types (`int8`/`byte` `int16` `int32` `int64`)
40602;Wdym by architecture My cpu architecture ?
40603;Specifically the CPU architecture that the program is built for yes.
40604;on 64bit architectures `int` is `int64` and likewise for 32bit architectures
40605;there\'s a lot of weird semantics behind the optimal sizes for arithmetic vs actual address sizes
40606;but that's not really an issue on the platforms go officially supports anyway
40607;Good but i think i need bigger than int64
40608;Any better way to store binaryes ?
40609;`math/big`?
40610;Binary
40611;binary what though
40612;if it's just a sequence of bytes use `[]byte`
40613;Like I'll only store binary
40614;if you're trying to do math with it use a primitive number type or `math/big`
40615;could you give an example of the data you have and what you're trying to do with it?
40616;Like 400 character long binary
40617;a 400digit binary number?
40618;> could you give an example of the data you have and what you're trying to do with it?@superloach i am solving a problem I'll send the link
40619;alright
40620;From leetcode
40621;https://leetcode.com/problems/sumofroottoleafbinarynumbers/description/
40622;See
40623;The constraints
40624;> The answer will not exceed 2^31  1.that's a signed 32bit integer
40625;you don't need anything more than an `int32`
40626;None
40627;One test case is like this
40628;> you don't need anything more than an `int32`See the number of nodes
40629;okay? the problem still states that you don't need more than an `int32`
40630;The answer will be in int32 but if you convert it to binary then look at that how big that is
40631;an int32 in binary is 32 bits
40632;I think you're misinterpreting the data format tbh
40633;it's all the levels of the tree in a single list
40634;> an int32 in binary is 32 bits@Doad i have like 300 to 400 bit long data
40635;that list is not a single sequence
40636;A root to leaf becomes very long
40637;you turn that list into a tree and then follow each path along the tree
40638;`[0 1 0 1 0 1 0]`becomes``` 0 1 01 0 1 0```
40639;I understand this
40640;excuse my bad formatting
40641;> excuse my bad formatting@superloach np
40642;so that list of 7 numbers only has a path length of 3
40643;and this is exponential
40644;Log 1000 base 2
40645;Max
40646;Thats ~10
40647;:GWllentThinkPika:
40648;well the list length is a sum
40649;I am confused now ill come back later :thinkingo:
40650;a 32bit value will have 32 nodes on a path
40651;well 31 or so if it's signed
40652;Yeah i understood
40653;a tree with 32 nodes will have 4294967295 elements in the list
40654;300 or 400 definitely fits in these constraints :)
40655;Yeah :GWslippyPeepoW:
40656;They specified the overall answer won't be greater than `2^31  1`. There are no negative numbers. If any individual path is greater than `2^31  1` the overall answer will be. Therefore no path will be greater than that so you only need 32 bits. That's all you really need to know here.
40657;exactly
40658;Could a (noncomplete) binary tree have a path length of 1000? Sure but the constraints disallow it.
40659;None
40660;But i got this
40661;:GWslippyPeepoW:
40662;well where is that coming from
40663;Should i try uint ?
40664;I think the issue is how you got that huge number not why it isn't parsing :P
40665;you shouldn't have any negatives so I'm not sure how that happened
40666;I'm not sure why `ParseInt` even would show up here lol
40667;After reaching the limit of signed int
40668;agreed @Carson
40669;You should be able to do everything in integers you shouldn't have to switch to strings
40670;build a tree then walk each path and set corresponding bits in an int32
40671;I have a feeling you may not have properly built the tree yet
40672;> I'm not sure why `ParseInt` even would show up here lol@Carson i am taking the int and transforming it into string then parse it to int base 10 to compute with it
40673;Not a good way to do it i know
40674;where are you getting these numbers though? your data is 1 0 null
40675;1011011010101010 numbers will the like this
40676;you need to process that list into a tree and then walk it
40677;Its already in tree
40678;is it?
40679;Yes
40680;Look at the link
40681;so you've got a struct type containing a value and 2 pointers to itself in your code?
40682;Yes
40683;Left and right child
40684;Binary tree
40685;and you've properly processed the data into that structure?
40686;Actually i haven't struct it leetcode did
40687;> and you've properly processed the data into that structure?@superloach thats leetcode is doing
40688;I am just making a function that solves the tree
40689;And there is like 63 test case tree pre built
40690;In leetcode
40691;hmm
40692;well that's convenient
40693;Yeah
40694;you're evidently not walking it correctly then
40695;Its working on small test cases
40696;I got 58 test cases pass
40697;Out of 63
40698;like lethal said it really doesn't seem like you're doing this the right way even if it does pass smaller cases
40699;I'll come back later i have some work
40700;:GWloopyOof:
40701;"Yeah. It really seems like you're way overthinking it not to give too much away but I would think of a way to build up the integer as you go; you shouldn't need to think in terms of bases at all really."
40702;If you're interested this was an entire solution I came up with: ```gofunc sumRootToLeaf(root TreeNode) int { return recurse(root 0)}func recurse(root TreeNode running int) int { if root == nil { return 0 }  n := running << 1 n |= root.Val  if root.Left == nil && root.Right == nil { return n }  return recurse(root.Left n) + recurse(root.Right n)}```
40703;lots of stack frames :goffer:
40704;Weeeeeelllll it's more supposed to be expressive than optimal üòÑ
40705;I found out what i was doing wrong I was storing every root to leaf binary in a array of integer And i totally forgot that i can convert to decimal right away when i am calculating the binary
40706;You shouldn\'t really have to think in terms of converting between binary and decimal‚Äînumbers are numbers. Notice in my solution that doesn\'t come up at all other than the implicit assumption that `root.Val` only possibly contains the lower bit high
40707;> If you're interested this was an entire solution I came up with: goWhat it will print in this case : 1 0 0 1 1@Carson
40708;Should be 12? Dunno Leetcode told me I passed 63/63 üòÑ
40709;Is there any way to convert []uinit8 to string
40710;`string(slice)`
40711;thk
40712;If I divide a float64 by a constant: let's say```var total float64fmt.Println(total/5)```
40713;It gives output with no problem. But if I divide this float64 variable with other type casted ``int`` variable it shows an error.
40714;Sure. Floats cannot be divided by integers. Like you pointed out `5` isn't an integer‚Äîit's a constant and constants can take on different types depending on the context.
40715;But I can\'t understand this behaviour üòÖ . I get that constant is not type casted like the integer but doesn\'t this go against 5 is a constant here and the value(5 or 5.0) is assigned during compilation depending on context
40716;5 is an untyped number
40717;its type depends on the context. in this case its type is assigned based on the fact that a float division is occuring
40718;Basically: the compiler sees that the only valid type of an operand would be a `float64` so it checks if the numeric constant is representable by `float64`. If it is that is its type.
40719;I am getting what you\'re trying to make me understand. But the confusion is regarding 5 being called a constant in GO. Lets say I divided an ``int`` with 5. So there that 5 behaves like a 5 but when it divides a ``float`` its behaviour is like a 5.0. So how 5 can be called a constant. (It may be a silly question from my side)
40720;I suppose it can be interpreted as semantically questionable but untyped constants simply are a thing in Go. Their type can change based on context. If there is no context (or I should say insufficient context to necessitate a specific type) they have a default type.
40721;I‚Äôd give this section of the spec a read: https://golang.org/ref/spec#Constants
40722;Cool. Thanks a lot @Carson and @Str≈ìm !
40723;its a constant because you declared that 5 in a float division scenario
40724;it cant magically turn into an int division scenario
40725;5 is a character. each separate use of 5 is a separate constant.
40726;@zephyrtronium that made it clear for me. Thanks!
40727;If I have a monorepo how can I organise that one go package always uses the go package in that version instead of downloading the released version from github every time?``` .git ... project1 go.mod ... project2 go.mod ....gitignore```This is what my directory looks like. I would like to import project2 in project1.
40728;you have 1 go.mod per repo
40729;that's it
40730;So I can't have submodules? üò¶
40731;huh?
40732;submodules as in modules nested from the parent?
40733;why can't you?
40734;https://eng.uber.com/gomonorepobazel/
40735;here might be a good read
40736;Thanks Stroem!
40737;you can just do a replace directive in your case actually
40738;with a relative path
40739;hey so I\'m doing writer := bufio.NewWriter(os.Stdout) and use it to write some bytes in it from stdout when I do writer.Flush() I can see the correct output has been written. Is there a way to access what has been written to the writer and assign the bytes to a variable? I can see the bytes are in writer.buf but how can I read what\'s in buf?
40740;I don't think bufio.Writer keeps the bytes after being flushed
40741;is there a way to get the bytes before flush?
40742;it doesn't appear so
40743;you can keep a separate `bytes.Buffer` or just a byte slice of stuff you've written
40744;actually big brain moment  you can use a MultiWriter with a Buffer and Stdout
40745;At that point it sounds like you'd just want to keep one buffer and copy to `Stdout` when you would've flushed
40746;if you would've flushed multiple times copying will end up writing the earlier data again unless you keep a counter of how much has already been written  or just use a writer that you can flush
40747;so yeah I'd say make a `bytes.Buffer` and a `bufio.Writer` and `io.MultiWriter` them
40748;ok to be precise it's from this line in gitea https://github.com/gogitea/gitea/blob/e8860ef4f9fe84aac856e354a897734aac7c279b/modules/git/diff.go#L89 this function gets an ctx.Resp which is an http writer so they don't care about accessing what's in the writer. But I would like to use this diff function in another function and so I'm passing a regular bufio writer but yeah can't read from it.
40749;I would preferably like not to modify this gitea function but it looks like that's not possible I'll try what you said thanks
40750;is it dangerous to override a map with another map using `m = m2` for example?
40751;nope
40752;the old map is collected by the GC
40753;has anyone used cobra cli? Planning to use that over flag library
40754;hmm so it's illegal to have `else` on its own line:```if true {} else {}```
40755;Yeah can't do that
40756;@patcito you can make your own bufio.Writer
40757;or you can even reimplement the whole buffer
40758;whatever the solution may be you'd want to keep an internal bytes.Buffer containing a copy of what has been written using Write
40759;@_diamondburned_ would that allow me not to rewrite that function?
40760;it should if it takes in an interface
40761;but i haven't looked at the fn yet
40762;@_diamondburned_ it takes a io.Writer
40763;https://github.com/gogitea/gitea/blob/e8860ef4f9fe84aac856e354a897734aac7c279b/modules/git/diff.go#L47
40764;yeah you can then
40765;write a bufio.Writer wrapper that implements its own Write that copies to a bytes.Buffer
40766;ok not sure how to do that though
40767;how come people in Go use many lines of comments of // rather than using / /
40768;It's just a convention
40769;I personally think it looks better
40770;Low key just learned go has multi line comments
40771;Don‚Äôt think I‚Äôve actually ever seen one used lol
40772;> write a bufio.Writer wrapper that implements its own Write that copies to a bytes.Buffer@_diamondburned_ ok found a way around it by using new(bytes.Buffer) it gets accepted by the function as an io.Writer and I can get it as string without touching the function.
40773;if i have 100 http routes how should i organise this is there any example for this
40774;nest the routes with go chi
40775;gochi gang
40776;Hello it's me again.
40777;I was messing with my previous project today.Can somebody help me with sending simple icmp request? Previously I used package from godoc. I do not like how it is working.
40778;What package? golang.org/x/net/icmp?
40779;https://godoc.org/github.com/sparrc/goping
40780;/x/net/icmp  is kinda messy for me I didnt bother to dig in
40781;you could fork it or find some other library
40782;I would use the x package
40783;Otherwise you're gonna be handrolling it
40784;The stdlib doesn't have a way to perform icmp requests. You have to setup a udp listener send the icmp request and check for a response
40785;Somehow net.Dial can dial via icmp protocol.
40786;The ping library you linked does just that iirc
40787;btw /x/net/icmp have no examples in docs which is kinda dissapointing.
40788;yes it does
40789;https://pkg.go.dev/golang.org/x/net/icmp?tab=doc#examplePacketConnNonPrivilegedPing
40790;I love long examples with no comments in code.
40791;You're implementing icmp. The protocol is well documented and so are the functions /shrug
40792;That whole example is pretty selfexplanatory too it's broken up into steps
40793;No examples I love doesn\'t always mean no examples üòõ
40794;Good for you. I dont have much experience in go so this example is pretty complex for me.
40795;If you have any questions feel free to ask here!
40796;:thinkingo:
40797;"```wm := icmp.Message{ Type: ipv6.ICMPTypeEchoRequest Code: 0, Body: &icmp.Echo{ ID: os.Getpid() & 0xffff Seq: 1, Data: []byte(""HELLORUTHERE""), }```the fuck is happening in Body?"
40798;https://tools.ietf.org/html/rfc792 (see page 13)
40799;It's using the bottom 16 bits of the process ID as the ID and setting the sequence number to 1
40800;Why pointer tho?
40801;You mean why `&icmp.Echo{...}`?
40802;yas
40803;Because `icmp.Message`'s `Body` field probably has type `icmp.Echo`.
40804;icmp.Message.Body is of the type `MessageBody` which in an interface
40805;defined here https://pkg.go.dev/golang.org/x/net/icmp?tab=doc#MessageBody
40806;icmp.Echo has a pointer receiver for those methods
40807;https://pkg.go.dev/golang.org/x/net/icmp?tab=doc#Echo
40808;None
40809;Passing a value instead of a pointer means it doesn't satisfy the interface
40810;Am I blind?
40811;See that Marshal function?
40812;Well yes
40813;<https://pkg.go.dev/golang.org/x/net/icmp?tab=doc#Echo> Implements it
40814;But only on the pointer type
40815;The hell?
40816;Echo implicitly implements the MessageBody interface
40817;MessageBody interface have 2 methods Len and Marshal
40818;The other message types in the package do as well: `MPLSLabelStack` `ExtendedEchoReply` `ExtendedEchoReply` etc
40819;Correct. The interface has those two functions
40820;Hold on
40821;@Rin and `Echo` implements both
40822;Message struct have Body which type is MessageBody
40823;correct
40824;which only have Len and Marshal methods
40825;correct
40826;What is next step?
40827;I dont get it
40828;MessageBody is an interface. In order to use it you have to provide the Message with an implementation of that interface
40829;Echo is one of those
40830;Why?
40831;None
40832;Because it implements the correct methods
40833;Because it implements the methods that the interface defines
40834;You may want to review how interfaces work
40835;That is fundamental to how interfaces work in Go
40836;Probably
40837;https://tour.golang.org/methods/9
40838;What black magic is this?
40839;This is like reverse structs with methods. If `something` can have same methods as interface it can be used in interface? Right?
40840;Yes
40841;This is really confusing.
40842;implicit interfaces are really neat once you get the hang of it
40843;They can be really handy.
40844;But I am not used to them yet.
40845;You'll get the hang of it
40846;I hope so.
40847;Oh btw is anybody tried to use golang for Machine Learning?
40848;it's not great
40849;You _can_ but they're aren't contrib packages like the python bindings for tensorflow has
40850;So you don't exactly have prebuilt LSTMs and whatnot
40851;Python still the top language for ML in terms of top level stuff
40852;obvs C++ and C is generally used for the under the hood computing
40853;So I just used cobra cli and it ruined my project structure lol. It creates .go files for each flag you add under a `cmd` folder which I use for main.go files (yep standard layout)
40854;yeah that's how cobra works
40855;maybe you didn't want to put it in cmd
40856;and perhaps in `cmd/cli/`
40857;or whatever else you'd like to name it
40858;https://github.com/spf13/cobra/blob/master/cobra/README.md#cobrainit yeah `cobra init` lets you specify where the cobra files go. so just tell it to put em somewhere else
40859;who is pro golanger and wants to help me improve my minecraft username sniper to make it the worlds fastest sniper
40860;:ThinkingFren3:
40861;Uhh
40862;I mean if you give us a repo or some snippet
40863;We can give some code review
40864;bet
40865;Just don‚Äôt get upset if we say mean things about it üòõ
40866;> minecraft username sniperbruh
40867;> bruh@_diamondburned_ what :pepecry:
40868;just post the code
40869;so we can look it over
40870;@shaky I would be willing to help
40871;has anyone used webrtc for clientserver stuff? unreliable channels do be tempting üëÄ
40872;TIL you can compare arrays directly (but not slices)
40873;like `fmt.Println([1]int{1} == [1]int{1}) // true`
40874;```gofoo := [5]int{1 2 3 4 5}fmt.Println(foo[:] == foo[:]) //refuses to compile```even same slice of underlying array won't be compared damn
40875;> You _can_ but they're aren't contrib packages like the python bindings for tensorflow haswhat does contrib package mean? I think I saw this term randomly but never get to know it
40876;contribution/contributed
40877;anyone knows if array comparison is more of a O(1) or O(n) operation?
40878;Its O(n)
40879;Hi what's the best way to iterate over a channel and break on ctx cancelation ?I found 3 ways to do it but I think they are not strictly the same.```goloop:for v := range c { DoSomething(v) // Dont know if this should be before or after the select block select { case <ctx.Done(): break loop default: }}``````goloop:for { select { case <ctx.Done(): break loop case v ok := < c: if !ok { break loop } DoSomething(v) }}``````gofor { var v int ok := true select { case <ctx.Done(): ok = false case v ok = < c: } if !ok { break } DoSomething(v)}```
40880;2
40881;Ok thanks!
40882;1 may block forever
40883;ah yes indeed
40884;i have another question in a select block if several channels are ready to be read is it guaranteed that the first one in the block will be chosen?
40885;No
40886;Its random
40887;As the paper of CSP declares it must be
40888;is there a way to make the ctx.Done() read in priority?
40889;No
40890;Handle potential timeout at the next logical place
40891;otherwise I guess it should work but it seems a bit redundant...```goloop:for { select { case <ctx.Done(): break loop default: } select { case <ctx.Done(): break loop case v ok := < c: if !ok { break loop } DoSomething(v) }}```
40892;if structs are like sets from math (sorta) what would interfaces be?
40893;Types are sets of values. Structs are product sets of their field types.
40894;Not sure there's really a meaningful comparison there for interfaces and mathematics
40895;Not sure what an interface type would be. I suppose maybe pi types?
40896;Maybe a function with ambiguous definitions
40897;Or sigma types. I can never remember which is which.
40898;Ooh yes pi types
40899;Or maybe more generalized dependent types
40900;I think sigma type is right. An interface value is a value and a proof that it satisfies a particular interface.
40901;https://manishearth.github.io/blog/2017/03/04/whataresumproductandpitypes/
40902;A neat little read
40903;Dependent types are pretty fun. Learning Coq with https://softwarefoundations.cis.upenn.edu/ was the most fun I've had in a while. I'd recommend it to anyone that likes math / formalisms. It's all about using computers to rigorously prove theorems/software correct.
40904;That series looks interesting might have to check it out
40905;After I finish reading this old OS concepts book lol
40906;"I found it really satisfying: if the compiler typechecks your proof then you know it's correct. (Or at least that you've proven the theorem as stated; but for the exercises they typically give you the theorems/lemmas to prove.)"
40907;Is there a good article/tutorial on Go for the ones that are familiar with C++ or Python?
40908;The Go Tour is generally a good place to start
40909;yeah just start with the tour
40910;?go tour
40911;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
40912;you\'re not going to find any here\'s how you do classes in go
40913;another question... any good IDEs out there which include reference tips (argument hints etc.) ?
40914;GoLand is the only one with argument name hints
40915;other editors can but nobody does it
40916;Ok
40917;Is there a wide string type in Go? and goland is pretty annoying when i select a text it goes to the insert mode cursor which i have to switch back.
40918;vscode with gopls gives me argument name hints
40919;i think i have it explicitly configured to do so
40920;"all strings in go are presumed to be utf8; for other encodings one generally uses []byte []uint16 or []rune depending on the encoded character size"
40921;So is there a built in function to convert between UTF8 UTF16 and UTF32?
40922;not builtin but there are a variety of such functions in package unicode/utf16 and x/text/encoding's subpackages
40923;see <https://godoc.org/golang.org/x/text>
40924;@Avaxar You can convert from `string` to `[]rune` and back and it will do UTF8 to UTF32 conversions.
40925;I was assuming the `fn(argName: parameter)` thing
40926;if you mean the autocompleter showing argument names yeah vscode and vim does that
40927;wow i also do conversions between string and []rune frequently and it just completely slipped my mind that that exists
40928;Also worth noting that `string`s are allowed to contain arbitrary binary bytes. They don't have to be UTF8 though a lot of functions do interpret them as UTF8.
40929;Is an array a pointer like in C?
40930;in almost every sense no
40931;arrays are passed by value in go so they're more like struct values with indices of a single type instead of fields of arbitrary types
40932;So... is it dynamic?
40933;why does the first snippet panic with assignment to entry in nil map while the second works?```var m map[int]intm[0]++``````m2 := map[int]int{}m2[0]++```
40934;"> Map types are reference types like pointers or slices and so the value of m above is nil; it doesn't point to an initialized map. A nil map behaves like an empty map when reading but attempts to write to a nil map will cause a runtime panic; don't do that. To initialize a map use the built in make functionhttps://blog.golang.org/maps hmm"
40935;> So... is it dynamic?@Avaxar like dynamically typed? no.
40936;it's also not dynamically sized
40937;idk why I said typed again
40938;> why does the first snippet panic with assignment to entry in nil map while the second works?@func because the second initializes an empty map which is different from the zero value of a map which is nil
40939;any case one would write `var m map[int]int` instead of initializing a map?
40940;when you'll initialize it later probably or marshal onto it with &m
40941;anywhere one would want to avoid a potentially unnecessary allocation
40942;how do you initialize/write later after declaration? like below?```var m map[int]int<something>m = map[int]int{}m[0]++```
40943;yeah p much
40944;`map[int]int{}` or `make(map[int]int)` yeah.
40945;Allocating a map with either of those requires heap memory whereas just declaring a map variable will typically (but not always) just get allocated on the stack. So if you're planning on overwriting it later anyway no point in making unneeded allocations.
40946;I wonder if they actually go to heap though if they don't escape
40947;Yeah maps are currently always allocated on the heap.
40948;Sorry I'm mistaken. Channels are always heap allocated. Apparently maps are sometimes stack allocated.
40949;Map keys and values always escape though.
40950;escape as in GC'd?
40951;Oh sorry. Escape here means heap allocated rather than stack allocated.
40952;The compiler has an optimization pass called escape analysis where it tries to allocate as many variables on the stack as possible. If the compiler can\'t guarantee a variable is safe to allocate on the stack we say it escaped and needs to be heap allocated instead.
40953;huh keys always escape?
40954;even integers?
40955;Ah I suppose more subtle compiler jargon. No value types like integers are just copied around. But if you used a pointer any pointedto variables would be heap allocated.
40956;oh yeah
40957;yeah that's what I thought
40958;(I wrote the current escape analysis implementation but I guess I'm not that good at explaining it lol.)
40959;:cereal:
40960;I'm quite surprised lol
40961;sry
40962;didn't expect someone this important to be here
40963;haven't seen someone like that since boschetar
40964;adg was here for a few days a couple months ago
40965;I figured I'd try lurking.
40966;good to know this Discord is getting lots more attention
40967;hope to see rsc or iant etc commenting some internals someday
40968;I'm afraid I'm not sure who/what boschetar is though.
40969;@func Do you mean explaining the internals here? Or adding more documentation (comments)?
40970;explaining
40971;I'd actually love to talk to talk to either of them
40972;but both are helpful
40973;I'd probably make myself look like an idiot but man it'd be fun
40974;probably
40975;I'm happy to explain what I can.
40976;I'm pretty familiar with the compiler language spec and at least highlevel details of the runtime.
40977;It's nice to have you here welcome :D
40978;Thanks. üôÇ
40979;Maybe dumb question... is spf13/viper really not good at writing config files? I was trying to create a TOML file without a toml extention (e.g. ~/.gitconfig or something). This seems super basic.
40980;I'd like to have Viper write a default configuration file if the config file doesn't exist. Is this possible?
40981;Hi
40982;If I want to print my error  I must call err.Error() ?
40983;You can typically just print the error directly.
40984;"```goerr := errors.New(""test"")fmt.Println(err)```Should work. No need to call .Error()"
40985;Yup: the `fmt` package checks for a bunch of different types to get a string representation. For `error` it automatically calls `Error()` for you üôÇ
40986;source if you're interested: <https://golang.org/src/fmt/print.go?s=7925:7974#L621>
40987;This behaviour and of other types is documented in the godoc of the fmt package: > 4. If an operand implements the error interface the Error method will be invoked to convert the object to a string which will then be formatted as required by the verb (if any). see <https://golang.org/pkg/fmt/> for the other types
40988;so I am reading about how to handle json data in golang and I was wondering if someone here could confirm that I understand the difference between using unmarshal and a decoderwhen reading from an http request it's better to use `json.NewDecoder(request.Body).Decode(&data)` because you are reading straight into the data instead of reading the body into memory first and then unmarshalling that data right?
40989;Yeah `unmarshal` requires you to pass the entire body at once. Whereas the decoder streams the data
40990;so basically if you have a reader then it's always more efficient to use a decoder right?
40991;Usually yes. Sometimes you want to log the body received as well. At that point it is easier to read the entire body and log it
40992;ok thanks
40993;what is ``` < ``` in golang?
40994;is it something like passing the value like == ?
40995;It receives a value from a channel
40996;oh thanks
40997;?go tour
40998;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
40999;you should do the go tour whisky
41000;I will now I was reading the Go Programming Language Book and there this came. I will finish a chapter and do the tour thanks
41001;:)
41002;I definitely recognise the name mdempsky but can't remember the context
41003;:peepoHugged:
41004;@misterturtle gocode
41005;That might well be it! üôÇ either way weclome
41006;Anyone know like a gui library for Go
41007;there's a few
41008;there are gtk and qt bindings that work pretty well
41009;Hmmm
41010;Never used either of them
41011;and then gio and fyne are written in go
41012;I'll have a look at gio/fyne
41013;Thanks
41014;no prob :)
41015;lxn/walk is another one
41016;that's only for windows but sure
41017;syscalls go brrrr
41018;I'd recommend fyne as the fyne guy is here
41019;@Lncn if you just want to create a TOML file  then don\'t use viper
41020;use a TOML library
41021;```func isCsv(path string) bool { if filepath.Ext(path) == .csv { return true } return false}```Does that work inline?
41022;You want to know if the function will be inlined by the compiler?
41023;"```Gofunc isCsv(path string) bool { return filepath.Ext(path) == .csv""}```"
41024;@_diamondburned_ thanks are you saying if using cobra/viper to manage flags and config of CLI app just use a TOML lib to write my default config or modify a key value (skipping viper for these functions)
41025;?
41026;what I'd do is to generalize both those flags and configs into my own config struct
41027;and skipping cobra and viper
41028;What is the correct method to initialize a map?``var x map[string]int`` (or) ``x := make(map[string]int)`` ?
41029;latter
41030;The first one doesn't actually initialise a map üòâ
41031;It creates a nil map
41032;Which you can't set values on
41033;https://play.golang.org/p/J88eK_EsmLO
41034;"@_diamondburned_ sorry can you clarify what you mean by generalize""? I\'m experimenting with Golang to create a CLI application to interact with something and so far i\'ve really liked Cobra/Viper but I\'ve hit a snag when trying to use viper to write the global config file I want. It\'s working great for a manually setup config file and reading it in! üôÇ"
41035;what I'd do is make a config struct w/ the appropriate tags and use that to both unmarshal flags and configs and remarshaling configs
41036;if you want to make flags declarative in the structs as well: https://godoc.org/github.com/jessevdk/goflags
41037;```seen := map[int]int``` why can't i do a hashmap int to int
41038;i guess technically it just becomes an array
41039;you can do map int to int
41040;your syntax is incorrect
41041;`seen := map[int]int{}`
41042;have you done the tour?
41043;yes while ago
41044;"Can anyone help me to figure out why the `GetFiledGroups` is getting called twice?```func newFields(db sqlx.DB) FieldsStore { fs := FieldsStore{ db: db, } fs.GetFieldGroups()  return &fs}// Get all fieldsfunc (s FieldsStore) GetFieldGroups() { fmt.Println(""IN FIELD GROUPS"")}```"
41045;Not from there
41046;Can you share more of you code?
41047;Sure thanks
41048;Master store is here: ```// Create a new database instance connect to database.func New(db database.DB) (Store error) { s := &Store{ Auth: newAuth(db.Sqlx), User: newUser(db.Sqlx), Posts: newPosts(db.Sqlx), Fields: newFields(db.Sqlx), Categories: newCategories(db.Sqlx), Subscriber: newSubscriber(db.Sqlx), Theme: newTheme(db.Sqlx), } return s nil}```
41049;Loading it here``` // Load Database db err := database.New() if err != nil { return err } // Set up stores & pass the database. _ err = models.New(db) if err != nil { return err }```
41050;what does models.New look like?
41051;Sorrt that is models .new ^ unders master store
41052;You can add more debugging statements so see what gets called right before the Getfieldsgroup functions. Without more context I won't be able to tell you what is calling it
41053;Thanks @Sgt_Tailor
41054;Looks like I was calling it a few times there
41055;np
41056;hmm
41057;golang for game development is good?
41058;depends on what game and what part of the game
41059;‚ÄúGood for game dev‚Äù is a massively broad term depending on games yeah
41060;im having trouble installing go on ubuntu
41061;i added it to the path but it doesn work
41062;why not just use the PPA
41063;None
41064;whats PPA?
41065;bruh
41066;external apt repository
41067;üò¶
41068;it's listed here https://github.com/golang/go/wiki/Ubuntu
41069;I'd recommend PPA over manually installing
41070;you mean like sudo apt
41071;huh
41072;thanks ill try
41073;PPA is a personal package archive. The one listed on the wiki contains up to date go packages
41074;after adding the repo apt will look there for software as well
41075;@misterturtle @Str≈ìm Yeah I worked on the mdempsky/gocode fork but I mostly work on cmd/compile (the main Go compiler). I only created that gocode fork because nsf/gocode hard coded assumptions about internal compiler details rather than using go/importer so it kept breaking every release when we improved the Go compiler.
41076;"How do I get go (gin specifically) to return null if it comes back from the database null? At the moment its coming back as:```""resource"": { String"":  Valid"": false},```And in the struct its```Resource sql.NullString `db:""resource json:""resource,string""````"
41077;Ideally it should be:```resource: null```
41078;How do you parse a pseudo csv file where people disrespected the format?Example:https://kopy.io/h15LK
41079;@Ainsley luckily you're not the first to run into this issue üôÇ https://stackoverflow.com/questions/33072172/howcaniworkwithsqlnullvaluesandjsoninagoodway
41080;Those are some options there or just falling back to `string` can work as well
41081;good ol strings.Split probably
41082;you'd think sql.NullString would go ahead and have convenient json methods
41083;you can change the comma rune in csv.Reader
41084;https://godoc.org/encoding/csv#Reader
41085;What would the difference of using the method above and using string?
41086;What would string produce for example?
41087;Thanks btw
41088;above method isn't a pointer
41089;more work though
41090;Oh wow string was amazing null straight away!
41091;Thanks!
41092;can i ask questions about
41093;discord dyno bot here
41094;?
41095;hi boys no you cannot xblooos
41096;"I want to add an header but it adds as an array when I just want it to be a string```goreq.Header.Set(""Authorization fmt.Sprintf(""Bearer %s flags.token))```produces ```json{ Header"": { Authorization"": [ Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJS"" ] }}```"
41097;the format is right except the fact that authorization is an array
41098;can I make it a string ?
41099;Guys I think I might do an electron tonight
41100;that is normal
41101;I'm not sure what you need the JSON for
41102;nor what you want to do with it
41103;that's just the representation
41104;I tried to find out what was wrong so I marshalled
41105;the API doesn't accept arrays here can I just make it a string ?
41106;If it's going to be sent via HTTP then the package will produce the right HTTP request
41107;you can have multiple values to the Authorization header
41108;well yes but I don't want that
41109;EG bearer basic ntlm all in one
41110;just do headers.Get or [0]
41111;I'm client side
41112;Are you making a request?
41113;yes
41114;So whats the problem you set the auth header and it will send the auth header
41115;yeah dunno what the problem is :Thonk:
41116;if you worried because when you inspect it it's stored as a slice or array well it can store it however it wants before templating the request
41117;yes but I don't want it as a slice
41118;nor array
41119;why
41120;why don't you want it as a slice
41121;what are you doing
41122;because it accepts string
41123;what accepts string?
41124;it will be sent as a standard header in the format Authorization: Bearer zzzzz
41125;> I want to add an header but it adds as an array when I just want it to be a string@Karitham what is the type of `flags.token`
41126;string
41127;then the code you shared does not produce an array in any sense
41128;@Karitham Are you worried that the request is going to contain array or soemthing?
41129;well I have an auth problem and my token is right and my auth header is a slice instead of a string
41130;HTTP has no concept of slices
41131;how the package stores the data before marshalling it into a request is entirely irrelevant
41132;have you tried using httputil.DumpRequest?
41133;you could MITM with Fiddler or BURP suite or look at server logs
41134;```gomap[Authorization:[Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsanR__REST_OF_THE_TOKEN]]}```
41135;that's what my headers look like
41136;Where are you seeing that
41137;I just printed my request
41138;which is sent to the API
41139;ok but printing a request is just going to print the structure that holds the data to make a request
41140;it's not going to produce an actual HTTP request as it would go over the wire
41141;btw I'm not sure if DumpRequest would work as intended since a Body would be a stream and you can't really reread that again
41142;try httputil.DumpRequest
41143;but http.Headers does not work like how you think it does
41144;"a ```gohttp.Headers{ key"": []string{""value value2""},}``` would be written like so ```Key: valueKey: value2```"
41145;that's why it's a slice
41146;@_diamondburned_ sounds like we're only interested in headers not body anyway
41147;@misterturtle the issue is when you actually perform the request after dumping it out
41148;just because it's stored as a map of []string doesn't mean it's printed literally with that structure in the HTTP request
41149;https://golang.org/pkg/net/http/httputil/#DumpRequestOut
41150;Could always call DumpRequestOut(req false) to ignore the body
41151;yeah that's what I'm doing
41152;is it ü§®
41153;but I go through some kind of small graphql util lib so I have to rebuild everything
41154;```txtPOST / HTTP/0.0Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOU__REST_OF_THE_TOKEN```
41155;oh
41156;:ReguMad:
41157;The auth being in a slice is the least of your problems there
41158;yes
41159;then I don't understand my problem
41160;I guess I'll just dm the API guy over there
41161;sorry for your time boys
41162;Try to watch your request over the wire
41163;something weird is happening my imported libraries get removed when i save
41164;"```goimport fmt""import time""```when i save it just becomes```goimport fmt""```"
41165;you're not using time
41166;"```gopackage mainimport fmt""import time""func main() { fmt.Println(""Welcome to the playground"") fmt.Println(""Hello World! time.Now()"")}```"
41167;this is my code
41168;yeah you're not using time
41169;OMG
41170;yes
41171;"that `time.Now()`is part of a string; it's not code"
41172;lol
41173;sorry
41174;brain fart
41175;no sleep thing
41176;Hi guys I am just building a BST in go and am now looking to print out the elements so I thought I would push an item to a slice then take the value from it and push its children to the slice then unshift the value from the front and bobs your uncle
41177;It occurs to me though that go doesn't apend in place. Is there an alternative to a slice or will I need to do this differewntly.
41178;I immediately regret the decision to try electron
41179;lol
41180;@mplayer78 you can just append for push and slice down for pop
41181;do a tree traversal and print?
41182;That kind of thing.
41183;Maybe make a function which flattens the tree something like that.
41184;Not quite a tree but I recently did DFS for a DAG in Go
41185;Iterative approach with slices to track paths
41186;Yep that kind of thing.
41187;"https://kopy.io/E6NKg```gofunc readCsv(filename string) ([][]string error) { file err := os.Open(filename) if err != nil { return [][]string{} err } defer file.Close() reader := csv.NewReader(file) reader.Comma = ;' lines err := reader.ReadAll() if err != nil { return [][]string{} err } return lines nil}```I changed the rune of the reader now but I think the header with `//` causes an error. Any ideas?"
41188;So
41189;This kopy link contains the csv file I'm trying to parse
41190;Are goroutines lightweight threads or not?
41191;goroutines are green threads The runtime maintains a pool of actual threads and schedules the goroutines on them
41192;You have have thousands of goroutines without having any issues
41193;?go routines
41194;?go scheduler
41195;Kavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_Tailor
41196;"```gopackage mainimport ( fmt"" math/cmplx"")var ( ToBe bool = false MaxInt uint64 = 1<<64  1 z complex128 = cmplx.Sqrt(5 + 12i))func main() { fmt.Printf(""Type: %T Value: %v\ ToBe ToBe) fmt.Printf(""Type: %T Value: %v\ MaxInt MaxInt) fmt.Printf(""Type: %T Value: %v\ z z)}```"
41197;`ToBe bool = false` this gives
41198;`exported var ToBe should have comment or be unexportedgolint`
41199;linter array
41200;golangcilint will tell you to have documentation for everything exported
41201;It isn't a compiler error merely a linter warning. Doesn't hurt to add it though
41202;I have succesfully gotten a blank electron window. The problem is it's not supposed to be blank
41203;@Dylan i dont think CSV comments are valid like that if at all secondly you have 2 heading separators but 4 separators in the actual CSV
41204;so this works https://kopy.io/F3rzU
41205;@Sgt_Tailor thanks man
41206;np
41207;@misterturtle Now you have two problems.
41208;lmao\\
41209;I can't change the pseudo csv files :CThey have a lot of them. Perhaps I should not parse it as csv at all
41210;@Dylan you can bypass col number validation
41211;read the docs for Reader
41212;@mdempsky heh yeah I don't really want to be using electron but I've done an entire API pentest engagement this week from within VSCode. It's made me want to start looking at GUI driven apps with terminal integration a bit more and as resource heavy and bad as it is I'm considering using it.
41213;for comments u can do reader.Comment but thats not multiline u would have to clean that before its parsed as CSV
41214;@misterturtle Yeah I'm just teasing. üôÇ I can understand the appeal of Electron for certain application domains.
41215;Not sure what you mean by col number validation
41216;Have you seen our lord and saviour: https://golang.org/pkg/encoding/csv/
41217;Im reading this https://golang.org/src/encoding/csv/reader.go
41218;Sorry guys this ```gofunc (b BST) flatten() []Node { Queue := make([]Node 1 16) Queue[0] = b.Head index := 0 for Queue[index] != nil { if Queue[index].Left != nil { Queue = append(Queue Queue[index].Left) } if Queue[index].Right != nil { Queue = append(Queue Queue[index].Right) } index++ if index >= len(Queue) { break } } return Queue}``` feels really janky but if I dont include ```goif index >= len(Queue) { break }``` to program doesn't terminate.
41219;I realise that probably sounds a bit strange but I'm contrained to Windows on my corporate machine so I came up with a workflow using Windows 10 WSL2 using VSCode with SSH sessions to different production boxes now being able to use SSHFS b/c FUSE in WSL2 but also being on the windows box with sharepoint libraries mounted and essentially using VSCode a project management
41220;"```for i := 0; i < len(Queue); i++ { n := Queue[i] if n.Left != nil { Queue = append(Queue n.Left) } if n.Right != nil { Queue = append(Queue n.Right) }}```"
41221;You may just be teasing but something like Microsoft Teams being an electron app means it sits @ 700mb ram usage just for being open
41222;Fair point @mdempsky  can I not check for the existence of a value in the next index position though?
41223;@misterturtle same for Discord
41224;@mplayer78 Sorry I don't understand the question.
41225;If `index >= len(Queue)`  then `Queue[index]` will cause a panic.
41226;this is taken just now but the highest I've had is like 4GB
41227;@_diamondburned_ you've done a lot of work with gtk bindings right?
41228;I mean I'm all open to alternatives
41229;not really a lot but yea kinda
41230;why?
41231;Yes sorry. I am being a dufus. Sometimes just having to rationalise your own argument is whats needed!
41232;I'm just considering options for GUI but I'm pretty inexperienced in building crossplatform GUI. Just wondering what the options are
41233;The only things I've written with UIs were quick internal C# utilities
41234;so I know nothing about the struggles of modern cross platform GUI libraries
41235;Gtk isn't particularly good for crossplatform UI
41236;you could use andlabs/ui or fyne or Qt for that
41237;Awesome I've just had a quick look at both of those projects
41238;It's done ship it.
41239;hello reddit
41240;"```gopackage mainimport fmt""func main() { sum := 1 for ; sum < 1000; { sum += sum } fmt.Println(sum)}```is this the same as `for sum < 1000 {}`"
41241;yes
41242;guys,....guys.... Electron supports <marquee>
41243;life is complete
41244;yeah it's chrome
41245;I didn't even think chrome supported marquee anymore
41246;It's been probably 20 years since I've seen it used
41247;nah it still does iirc
41248;it's the windows of browsers so much backwards compatibility
41249;at least it's open source
41250;yea and so much bending of web standards
41251;aint no bending if its got full market share
41252;hey Im trying to improve my Go skills but Im still quite new to it could you tell where I could improve here? https://repl.it/@converge/DistantPapayawhipZettabyte
41253;I would like to avoid these + + to concatenate string specially
41254;@Str≈ìm which it doesn't
41255;@converge https://golang.org/pkg/fmt/#Sprintf
41256;how would it be for variable assignment to have it (sprintf)?
41257;?
41258;@Albru not yet :kkk_hmm:
41259;Im attributing a value to a variable I see sprintf is to print to console
41260;sprintf returns a string
41261;`func Sprintf(format string a ...interface{}) string`
41262;@Str≈ìm look at the graph the market share's been basically stagnating the past 3 years
41263;printf prints to console
41264;sprintf prints to a string which it returns
41265;well technically it just returns the string it would print
41266;but w/e
41267;Chrome doesn't but Google does
41268;@Madxmike super! thanks looks way better now
41269;@Albru is only joek :peepoCri:
41270;am angery
41271;@Madxmike do you see something else that looks strange or could be improved?
41272;maybe avoid global constant I personally avoid `init()` as well
41273;You could implement the stringer interface on the struct I guess
41274;Chrome is going to pull a IE
41275;Add so many non standard stuff now that they have a majority market share that people will be vendor locked into it.
41276;safari has entered the chat
41277;Then at some point become obsolete and being be made fun of for not adhering to standards
41278;that's why Edge choosing chromium is a good thing giving Chrome a run for the money
41279;Yeah chrome has been turning into the new IE for a while.
41280;Disappointing
41281;I'm still running into this bug any ideas on why VS Code does this? https://github.com/Microsoft/vscodego/issues/1266
41282;bout to lose it üòõ
41283;@func why do you avoid the init()? just out of curiosity
41284;@dave what's happening exactly?
41285;@converge https://github.com/ubergo/guide/blob/master/style.md#avoidinit
41286;@misterturtle I'm trying my best to follow the style guide https://github.com/Manouchehri/tram/blob/master/cmd/get_ticket/main.go
41287;but that import doesn't work
41288;going slightly insane
41289;@converge If you do normal variable initializations the compiler can make sure things get initialized in the right order and emit an error if you get any initialization cycles. Whereas `init` functions just run in order as they're listed in source code.
41290;spent over an hour now just trying to make a boilerplate hello world repo with the proper folder structure
41291;What does your code look like before the import gets removed
41292;that.
41293;I disabled the golang vs code plugin
41294;```go run cmd/get_ticket/main.go # commandlineargumentscmd/get_ticket/main.go:9:14: cannot refer to unexported name scrape.doThingcmd/get_ticket/main.go:9:14: undefined: scrape.doThing```
41295;"if I change it to just doThing() instead of scrape.toThing(): ```# commandlineargumentscmd/get_ticket/main.go:5:2: imported and not used: github.com/Manouchehri/tram/internal/scrape""cmd/get_ticket/main.go:9:14: undefined: doThing```"
41296;`doThing` is a nonexported symbol. You can't access it from a different package.
41297;You need to export the function by starting it with a capital letter to access it from a different package
41298;Only symbols starting with an upper case letter can be accessed from other packages.
41299;Okay how on earth am I suppose to use the proper structure of having `internal` then?
41300;like...
41301;how do I access _anything_ from internal aside from within internal?
41302;Rename `doThing` to `DoThing`.
41303;AHHHH
41304;@func @mdempsky I have this API and one important information I load with `init()` is the allowList > IPs that shouldnt be blocked. Is it ok to have it there? or is there a better idea to assign them to a list inside `main()` ?
41305;How should I import the internal path?
41306;Like a normal import path.
41307;Not a fan of magic init functions
41308;"`""../../internal/scrape""`?"
41309;I think people tend to stay away from init() because you have no guarantee of order of execution and tracking down funky behaviour in larger packages that uses init() can be tricky
41310;@dave github.com/Manouchehri/tram/internal/scrape
41311;thank you!!
41312;Internal does restrict what can import it but anything in the tram module can use it
41313;@converge Not sure I follow. Can you do `var myVar = varInitFunc()`?
41314;"Like that\'s the top example from Lyft\'s style guide under Good"". Using `var _defaultFoo = defaultFoo()`."
41315;^^
41316;that should work fine I'll give it a try
41317;(I'll sometimes write `var foo = func() T { ... }()`.)
41318;How/ what does internal restrict?
41319;I've never actually used it before
41320;"foo/internal/bar can only be imported by other packages within foo/..."". But not like quux/xyzzy""."
41321;"For example the Go standard library has go/internal/gcimporter"". This can be used by the other go/ packages but not by anything else within the standard library or by user code."
41322;The only way to circumvent that is using unsafe and linkname I think but that is a story for another day xD. You can pull off all sorts of nasty stuff that way
41323;Ahhh cool I've never really noticed many internal packages. That's my BaaderMeinhof phenomenon for the day
41324;You also don't see them when browsing code as you can't use them anyways. It hides the implementation and prevents people from directly interacting with packages that they shouldn't be touching
41325;```panic: runtime error: invalid memory address or nil pointer dereference[signal 0xc0000005 code=0x0 addr=0x0 pc=0x10f6b0d]goroutine 38 [running]:src/handlers.CommandHandler(0xc000128480 0xc000586058) D:/Pather/src/handlers/handlers.go:248 +0x16edgithub.com/bwmarrin/discordgo.messageCreateEventHandler.Handle(0x11bab18 0xc000128480 0x113e7a0 0xc000586058) C:/Path/go/pkg/mod/github.com/bwmarrin/discordgo@v0.22.0/eventhandlers.go:497 +0x52created by github.com/bwmarrin/discordgo.(Session).handle C:/Path/go/pkg/mod/github.com/bwmarrin/discordgo@v0.22.0/event.go:171 +0x118exit status 2```help
41326;Well
41327;looks like you're dereferencing a nil pointer on line 248
41328;```247: Login := structs.Login{}248: Login.Email = strings.TrimSpace(Answer.Content)```
41329;Is Answer nil?
41330;`Answer` is likely the culprit
41331;oh
41332;yes
41333;hmm
41334;thank you i will fix now
41335;actuiallyu i dont know how to fix i know the problem just not the solution
41336;You're trying to use Answer before it has been instantiated
41337;So you'll want to instantiate it
41338;yes i know one sec
41339;"```goTimer = time.NewTimer(30  time.Second)go func() { <Timer.C CloseInput() embed := &discordgo.MessageEmbed{ Title: Out of Time"", Description: Response timer expired. Please restart the process if you wish to continue."", Footer: &discordgo.MessageEmbedFooter{Text: Shaky Sniper""}, Color: color, }  s.ChannelMessageEditEmbed(c.ID msg.ID embed) return}()if Stopped { CloseInput()}Login := structs.Login{}Login.Email = strings.TrimSpace(Answer.Content)```"
41340;so
41341;basically it waits for user input for a max of thirty seconds but because the timer is in a go function it continues to the rest of the code how can i make it wait for user input?
41342;goroutine not go function
41343;sorry
41344;mistake
41345;You can use `sync.WaitGroup`
41346;Or just don't use the goroutine since it seems like you want this to be synchronous
41347;the goroutine is strivtly for the timer i think waitgroup would be more effective
41348;How are you receiving user input?
41349;another message handler function
41350;i got it to work :pepeHappy:
41351;Hi guys did anyone already used jni with go ?
41352;the java foreign function stuff?
41353;with jni you can change fields of a java program
41354;it's called Java Native Interface
41355;oh no
41356;that sounds terrible
41357;?
41358;interacting with java
41359;no it's actually not sounds terrible
41360;nah sounds terrible to me too
41361;i'll take your word for it comrade
41362;I want to change fields of a java program in real time
41363;i mean i googled golang jni
41364;and there are more than zero results
41365;so it sure does seem like someone's already made at least an attempt
41366;jni is C library but there is a wrapper for golang
41367;https://github.com/juntaki/jnigo
41368;like for imgui there is a wrapper for go
41369;sure that's how you interoperate between languages
41370;but this guy doesn't even give exemples on how to use his wrapper
41371;so I went to the godocs of jnigo
41372;but I don't understand something
41373;when I modify a field which is a java variable I need to call a Jobject which is an interface he's calling but I don't know what the parameters inside Jobject means
41374;anyone is using jni there ?
41375;highly unlikely
41376;None
41377;the last commit was 3 years ago
41378;yes ik
41379;so i don't think many people want to do this
41380;but that was for testing purposes
41381;https://tour.golang.org/methods/9 anyways here's a crash course on interfaces
41382;I don't need a course on how works an interface
41383;i mean
41384;> t I don't know what the parameters inside Jobject means
41385;it's an interface
41386;so that'd be what you need to learn about to use it
41387;... I don't understand what that means
41388;https://gyazo.com/0d24733f814520b3557b50930d1c2340
41389;Right
41390;The section of the tour i linked to explains what that means
41391;he doesn't explain anything in his fucking library
41392;Yes his documentation is bad
41393;but you could also learn a bit about go and try to figure it out
41394;the documentation is auto generated by godocs btw
41395;yes
41396;they are
41397;ye I just need to figure out what signature govalue and javavalue means and I'll be able to change my walk speed in a game I could read the memory and then change at the adress the value there is but I want to see how does jni works because a lot of people are using it
41398;yes that's what i'm saying
41399;https://tour.golang.org/methods/9
41400;this explains what they mean
41401;at least in terms of go
41402;if you mean what does it mean in the context of JNI you\'d have to find docs on JNI for that
41403;this is a go server ¬Ø\\_(„ÉÑ)_/¬Ø
41404;yes
41405;oh lord
41406;https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html
41407;good luck friend
41408;I don't use jni in java
41409;that's the spec for JNI
41410;it describes how JNI works
41411;it isn\'t what library do you import in java code to use jNI
41412;oh ye ok
41413;this is how JNI works
41414;thank you
41415;you've chosen a phenomenally difficult and painful thing to do
41416;so
41417;good luck
41418;not that much the library will convert my code and translate it in java
41419;And it will all work as intended with no problems :)
41420;i'm sure it will
41421;but the doc u gave me will never explain me what a GoValue means
41422;probably not
41423;you'd have to make some deductions
41424;let's think about this
41425;this is a library designed to let you interact with Java values
41426;From Go.
41427;I will not use this shit fuck off. 1. it's too old and 2. there is no documentation
41428;Which also has values
41429;Perhaps the GoValue corresponds to the Go version of the value you're manipulating
41430;if the value at a field in java is a float how do I say it ?
41431;not a clue
41432;you'd have to read the JNI spec
41433;I don\'t understand what you meant Go version of the value you\'re manipulating
41434;you want to change a number in java
41435;so there's a java number
41436;but you're using go
41437;yes
41438;so you have to start with a go number
41439;yes I see
41440;so some sort of correlation has to be drawn
41441;ok I now understand
41442;thanks for your help I would not be able to figure out that üòÇ
41443;Deezy
41444;What kind of projects do you work on?
41445;https://github.com/therealfakemoot/
41446;exclusively bullshit
41447;you did coded a lot of golang things nice
41448;wow gocollections good
41449;A go gentoo installer
41450;I'm intrigued
41451;i don't recall it ever panning out
41452;alright really stupid question: if I have `map[element606611e4a52e4f735466cecf:79bbdcfeb4b14aa485aca13600dade67]` how do I just get the `element606611e4a52e4f735466cecf:79bbdcfeb4b14aa485aca13600dade67` in a variable?
41453;kinda confused what your asking
41454;is the `element....` a string value
41455;yeah
41456;is it the key or value
41457;type is `map[string]interface {}`
41458;"`fmt.Printf(""%T\ yay)`"
41459;"`whatever := yay[""element...""]`"
41460;i assume thats what you want
41461;I don't know what the exact value of element is going to be.
41462;"```internal/scrape/scrape.go:88:17: invalid operation: yay[""element...""] (type interface {} does not support indexing)```"
41463;"``` script := return arguments[0].shadowRoot"" args := []interface{}{mr_app} yay err := wd.ExecuteScript(script args)```"
41464;honestly i have no idea
41465;https://github.com/tebeka/selenium/blob/9a0798fcb455aca4de72bbe424f4bbb9cb021f53/selenium.go#L352
41466;I'm just trying to get a return value.
41467;oh
41468;u have to type assert it i assume
41469;since it returns just an interface{}
41470;`selenium.remoteWE` is what I want I think
41471;maybe
41472;bleh
41473;```internal/scrape/scrape.go:90:19: cannot refer to unexported name selenium.remoteWE```
41474;https://github.com/tebeka/selenium/issues/214
41475;hmm
41476;is there good game library for go?
41477;ebiten is a nice framework
41478;Built my engine on it
41479;ok
41480;but how to use it?
41481;You can read the docs and examples
41482;Much like how you'd learn to use any other package
41483;ok
41484;how to install ebiten?
41485;Much like how you'd install any other Go package
41486;It's also in the documentation
41487;yeah
41488;someone I know made a GUI for some classifier in Ebiten
41489;oh
41490;it was p funny tbh
41491;https://github.com/hajimehoshi/ebiten
41492;hmm
41493;My engine built around ebiten as one of the backends will be open sourced soon too
41494;what command use to install
41495;Have you ever used a third party package in Go before?
41496;yes
41497;It's just like any other package
41498;but i need link
41499;That is the link
41500;https://github.com/hajimehoshi/ebiten ?
41501;Yes that is ebiten
41502;like go get something
41503;`go get github.com/hajimehoshi/ebiten`
41504;ok thanks
41505;lmao
41506;hmm
41507;how to get only 1 return value from multiple return function?
41508;without using variable
41509;have you uh gone through the go tour
41510;Use `_` for values you dont need
41511;it feels like you haven't with these sorts of questions
41512;hmm
41513;yeah i know i can use _
41514;is it possible without using _ too?
41515;> have you uh gone through the go tour@jan blackquill yes
41516;no
41517;ok lol
41518;how would you know which return it would be
41519;and why don't you want to use _
41520;inb4 this is ignoring errors
41521;$5 says it's an ignored error :bongo:
41522;cuz i am thinking about if there is another way to do it
41523;why though
41524;if the right way works then just do it
41525;ok lol
41526;probably noob question and not necessarily specific to Go: what is the best way to cache/manage access and refresh tokens from an Oauth client?
41527;golang.org/x/oauth2 is actually super powerful. It features a `Token` type and all you need to do is plug in the access and refresh tokens‚Äîfrom there you can obtain an `http.Client` that will include the access token in all requests that it makes as well as automatically refresh the token if needed.
41528;In terms of caching them pick your DB I guess? üòÑ
41529;Once you pull the access and refresh tokens from the DB the oauth2 package will take care of the rest
41530;(from the docs:)> ```> // ReuseTokenSource [what's used by (Config).Client] is typically used to reuse tokens from a cache> // (such as a file on disk) between runs of a program rather than> // obtaining new tokens unnecessarily.> ```
41531;console input with go is stupid
41532;@shaky we do not appreciate that kind of language here
41533;Consider it a warning
41534;stupid
41535;Do you have any questions or suggestions about stdin input in Go? It's fairly similar to many other languages
41536;well not python python is literally input() and thats the only other lang ive messed around with input in i made a function for colored output but it doesnt combine well with that adn i get a random indent for some reason in the console ONLY on the first line
41537;"```gofunc main() { utils.Initialize() Info(""\\[+] How many accounts will you be sniping with?\\[] )  var accounts string fmt.Scanln(&accounts) var Accounts []structs.Account n _ := strconv.Atoi(accounts) for i := 0; i < n; i++ { var Account structs.Account Info(""\\[+] Enter your account email and password separated by a colon.\\[] ) var account string fmt.Scanln(&account) Info(account) credentials := strings.SplitAfterN(account : 2) Account.Username = credentials[0] Account.Password = credentials[1] Accounts = append(Accounts Account) }}```"
41538;brb
41539;Python abstracts _everything_ very heavily
41540;Sometimes that's simple but you lose control and performance in many cases
41541;And it's not what's actually happening
41542;^ abstract is the key here
41543;there\'s no literally input() there\'s Python does everything for you until you don\'t want it to and everything falls apart
41544;there isn't a magical input() function in the system that magically gives you the string exactly like how you want it to be
41545;because that would suck
41546;fair enough
41547;Isn't `fmt.Scanln` basically what `input` does though?
41548;Sidenote: almost none of those types and variables need to be exported. They're either in `main` or local to a function scope
41549;Should keep them unexported so their scope is more clear
41550;I want to write a small service in either go or rust that a python app can run. It's better to use Rust for that right?
41551;run how?
41552;run == imported through FFI?
41553;run == os.exec?
41554;run == IPC/microservice?
41555;and small how?
41556;small server aka aslongasit'snothundredsofmegs?
41557;or small client aka ifitshaves50kbthengoahead?
41558;and why not just pick what you're proficient w/ if none of the criterias I listed matter?
41559;I parse roughly 700 csv files and make one big file out of it then I create files based on that one file and its content.They want to be able to run the service through a GUI application where they specify a path of the folder. Anything else I can choose. I wanted to learn more about Rust and Go that's why I'm asking this question
41560;service: Go or Rust GUI app: Python?
41561;oh man
41562;just do the GUI in either language then
41563;don't mixandmatch like that
41564;both Go and Rust have Gtk bindings though Rust's bindings are far better because they're autogenerated
41565;hopefully I can have time to write my own bindings generator for Go too
41566;feel like either language would work for your case pick one you're most comfortable in if you just want it to be done
41567;hi together is someone of familiar with the MS RD Gayeway protocol?
41568;"Is it possible to omit data when returning json as opposed to reading it? Field group is a json file I would like to read `Locaton` but when returning it in the API omit it:```type FieldGroup struct { Key string `json:""key""` Title string `json:""title""` Fields []Field `json:""fields""` Location []FieldLocation `json:""location""`}```Im aware you can do Location `[]FieldLocation json:""""` but that prevents reading it"
41569;create a custom marshal method iirc
41570;Thanks @Madxmike have you got an example by any chance?
41571;https://github.com/golang/go/issues/28143
41572;Perfect thanks very much
41573;well thats the opposite of what you want i think
41574;Oh lol
41575;"maybe `json:""omitempty""`"
41576;@supermew10 how would that work?
41577;just clear the field before sending. it shouldn't be sent but you can read it
41578;Is there any extra implemntation that would be needed for that?
41579;i don't think so
41580;sure but now your response is sending back useless fields
41581;But its not empty when I send it back it has data in it I just want to process it but not return it to the api
41582;I have a technical question about go library module release management
41583;We have a repository manager which maintains all dependencies by version downloaded in this format
41584;go
41585;It has these files per version. Zip info and mod
41586;These are for modules downloaded from github
41587;My need is I have a private repo and when I release a version I want to build the same kind of files and maintain in our repository manager
41588;Because of permissions issues people migh have trouble downloding using go modules private repo proxy concept
41589;People from other teams can't access the repo
41590;So common package manager is my option to push library release
41591;How can I do this
41592;https://donatstudios.com/Gov2Modules
41593;just saw it lol
41594;Can I pick your brain on something? I loop over rows in a csv file and I want to merge the content of 2 rows if a condition is met. If the condition is met I want to combine the current iteration with the previous one.No idea how to approach this right now. Do you have an idea?
41595;Scrreee
41596;Wait
41597;Go 2 came out?
41598;@Str≈ìm how bad is it? I haven't faced that problem yet
41599;> Go 2 came out?@other no. V2 refers to the module versioning
41600;After v1 you have to include the version in the import path
41601;Oh
41602;The first paragraph explains this
41603;@Dylan Save a copy of the previous value. ```govar old whateverfor v _ := range things { // just remember to account for what happens if the condition is true on the first iteration if condition { } old = v}```
41604;https://play.golang.org/p/ARMXHMO6f_2
41605;Is this a number in go
41606;Or a symbol or
41607;wat
41608;it is just 5 milions or not? 5 000 000 üòõ
41609;It's a number
41610;510^6
41611;the printing threw me off
41612;It's explained in the go tour
41613;Keep it mind it is a float64 by default unless specified otherwise
41614;hello there's something I didn't understand in the examples of use of context.WithTimeouthttps://golang.org/pkg/context/#WithTimeout```gofunc slowOperationWithTimeout(ctx context.Context) (Result error) { ctx cancel := context.WithTimeout(ctx 100time.Millisecond) defer cancel() // releases resources if slowOperation completes before timeout elapses return slowOperation(ctx)}```Why here there is `defer cancel()` ? it is said it's to release resources if slowOperation completes before timeout elapses but what resources are we talking about?
41615;Hi I need to do some random things with data like hashing but more interesting. Do you have any ideas?
41616;define interesting
41617;similar time complexity as hashing or even bigger
41618;well Im sure there're good libraries for that
41619;what do you mean?
41620;which relies on kernel modules I think
41621;ive no idea what youre asking for
41622;there was a discussion about entrophy on /dev/random vs urandom
41623;can't remember too much üòÑ
41624;I got task in university to learn about concurrent programming so I need to do something with my data
41625;just to use different threads to that job
41626;https://golang.org/pkg/crypto/rand/ uses the random source provided by the OS
41627;On other Unixlike systems Reader reads from /dev/urandom
41628;https://www.2uo.de/mythsabouturandom/
41629;that is neat
41630;In golang is it possible to not define the return type in the function declaration?
41631;e.g.```func hey() (x) { return 3}```
41632;no
41633;crap
41634;?go tour
41635;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
41636;welcome to static type system
41637;the issue is that it's a type that isn't exported
41638;why not
41639;`selenium.remoteWE` is from an import
41640;If it's not exported by a thirdparty library they don't want you to use it like that.
41641;Maybe there's an exported interface you should be using?
41642;well crap
41643;https://github.com/tebeka/selenium/issues/214
41644;Or maybe you are just using their library in a way it's not intended to.
41645;that's how I was trying to use their library last night
41646;but I gave up on that and found a hacky workaround
41647;"``` script := ` shadow_node = document.createElement(""shadow_element""); shadow_node.append(arguments[0].shadowRoot); document.body.appendChild(shadow_node); ` args := []interface{}{app} returned err := wd.ExecuteScript(script args) if err != nil { panic(err) } linky err := mr_app.FindElement(selenium.ByCSSSelector header"")```"
41648;which works great
41649;linky is exactly what I need
41650;the thing is I need to do this like a dozen times
41651;it would be _nice_ to put this in a function? üòõ
41652;per the docs ExecuteScript returns `interface{}`
41653;so you could probably write a function that takes that
41654;if you really `need` to
41655;on a quick search though none of their examples seem to use `ExecuteScript`
41656;I added the workaround mentioned here on that ticket too
41657;so there's really no way I can refractor it into a function?
41658;that seems... very limiting?
41659;Like I said just have your function take `interface{}`
41660;and you should be fine
41661;It's just not really good practice because you lose all type safety etc
41662;But it's valid in some contexts
41663;"not sure I follow. I need to return too. e.g. something like this:```func hacky_workaround(input) (output) { script := ` shadow_node = document.createElement(""shadow_element""); shadow_node.append(arguments[0].shadowRoot); document.body.appendChild(shadow_node); ` args := []interface{}{input} returned err := wd.ExecuteScript(script args) if err != nil { panic(err) } new_dom err := input.FindElement(selenium.ByCSSSelector next_element"") return new_dom}```"
41664;Oops sorry. I was looking at ExecuteScrip rather than FindElement. Hold up.
41665;Docs say it returns WebElement
41666;which is exported.
41667;Like I said look for an exported interface. In your case it's WebElement.
41668;"I\'m confused again then because I can\'t figure out how to do this:```returned err := wd.ExecuteScript(script args)returned.findElement(selenium.ByCSSSelector next_thing"")```"
41669;Paste your function again
41670;the one you wrote and didn't work because of the unexported type
41671;And just replace the unexported type for selenium.WebElement which is an exported interface
41672;What's the most idiomatic way to add a newline char to the end of a JSON payload specified via json.Marshal
41673;smashing elasticsearch over the head
41674;"`[400 Bad Request] {""error"":{""root_cause"":[{""type"":""illegal_argument_exception"",""reason"":""The bulk request must be terminated by a newline [\\\]""}],""type"":""illegal_argument_exception"",""reason"":""The bulk request must be terminated by a newline [\\\]""},""status"":400}`"
41675;yaay
41676;kk I'll try that. Sanity check can I use the `returned` value instead though?
41677;do i just add the byte on the end
41678;i wouldn't
41679;sounds like something bigger is wrong
41680;@dave you should be able to yes
41681;i.e. you're sending malformed http
41682;or something
41683;if you return a type that satisfies the interface
41684;it won't complain
41685;the envelope in which your JSON is contained should be handling the padding newlines etc
41686;```internal/scrape/scrape.go:99:10: returned.FindElement undefined (type interface {} is interface with no methods)```
41687;yeah
41688;you have to coerce it to a concrete type or interface
41689;because it's interface{}
41690;How does one do that?
41691;`foo.(Whatever)` generally speaking
41692;it's covered in the tour section on interfaces
41693;```panic: interface conversion: map[string]interface {} is not selenium.WebElement: missing method CSSProperty```
41694;"``` testing := returned.(selenium.WebElement) testing.FindElement(selenium.ByCSSSelector header"")```"
41695;there ya go
41696;you don't have a WebElement
41697;you have a map[string]interface{}
41698;```map[element606611e4a52e4f735466cecf:26c61782b5634d1faa53069c3db46d34]```that's `fmt.Println(returned)`
41699;perhaps that map contains WebElement values
41700;@deezy https://www.elastic.co/guide/en/elasticsearch/reference/current/docsbulk.html#docsbulk says here ```The final line of data must end with a newline character \. Each newline character may be preceded by a carriage return \\r. When sending requests to the _bulk endpoint the ContentType header should be set to application/xndjson.```
41701;yes
41702;that's a map
41703;you know what a map is right?
41704;@mmacheerpuppy all this hassle just because you refuse to tell your boss to use olivere
41705;:kkk_hmm:
41706;I told him but he rejected
41707;dont let him reject
41708;your problem is accepting
41709;It sounds like you need to...add a newline after lol
41710;i mean he has a point i shouldnt need an entire lib
41711;to add a new line to json
41712;idk elasticsearch is weird and shitty
41713;sometimes software wants you to do stupid things
41714;It's not JSON it's newlinedelimited JSON
41715;just to make your life harder
41716;"``` for key element := range returned { testing := element.(selenium.WebElement) testing.FindElement(selenium.ByCSSSelector header"") }```"
41717;@deezy sort of? I know what maps are and have read a bit of go awhile back but using it seems to work less well.
41718;whaddya mean you shouldnt need an entire lib
41719;whaddya think the official lib is? fresh air?
41720;i don\'t really know what you\'re even having trouble with. the only actual error you\'ve shown so far is trying to use an unexported type. everything else is here\'s a code snippet i cna\'t figure out how to use it
41721;sorry
41722;it's okay
41723;```internal/scrape/scrape.go:95:22: cannot range over returned (type interface {})```
41724;asking good questions is hard
41725;@mmacheerpuppy ```gobody = append(body \')```
41726;again
41727;Boom
41728;you have interface{}
41729;you need to coerce it to a concrete type
41730;`panic: interface conversion: map[string]interface {} is not selenium.WebElement: missing method CSSProperty`
41731;the hint is in this error message
41732;"> ```> testing := returned.(selenium.WebElement)> testing.FindElement(selenium.ByCSSSelector header"")> ```@dave that\'s what I tried here"
41733;yes
41734;and that's wrong
41735;oh no
41736;check that error message from the panic when you tried that
41737;I see
41738;then I tried to iter through the map
41739;It wants newline delimited json for every insert
41740;it wants the request body to be multiple discrete json objects
41741;instead of being sensible and just accepting one fucking array
41742;(‚ïØ¬∞‚ñ°¬∞Ôºâ‚ïØÔ∏µ ‚îª‚îÅ‚îª
41743;(‚ïØ¬∞‚ñ°¬∞Ôºâ‚ïØÔ∏µ ‚îª‚îÅ‚îª
41744;do these people have no
41745;empathy
41746;for golang users
41747;like i said elasticsearch is stupid and weird
41748;sorry brb door
41749;this library
41750;lacks
41751;empathy
41752;THEN USE OLIVERE
41753;FUCKIN
41754;is ndjson really that hard
41755;encode write a \ encode write a \ etc etc
41756;newline separated json is pretty normal though
41757;exactly
41758;I'm trying to understand what's going wrong here
41759;i'm just not sure what the valueadded is
41760;ik es uses it for bulk inserts
41761;over a single json array consisting of zeroormoreinputs
41762;not sure what else
41763;even then i dont see what the problem here is lol
41764;ndjson allows you to send/process one document at a time rather than having to process the whole array
41765;It allows for streaming documents. As long as a json object isn't terminated you don't know when the document ends
41766;I suppose it's possible to process each array element as it decodes but that's not how any standard json libs work (as far as I'm aware)
41767;Like i understand its used for streaming
41768;but
41769;They should still provide
41770;an array interface
41771;Its weird not to
41772;then use olivere
41773;:kkk_hmm:
41774;(idk if it has that tbh)
41775;So you have a slice of objects and implode them with newlines
41776;¬Ø\\_(„ÉÑ)_/¬Ø
41777;what is so hard about sending some ndjson that you need some other lib lmao
41778;like bruh```goenc := json.NewEncoder(w)for _ elem := range slice { _ = enc.Encode(elem) _ _ = w.Write([]byte{'\'})}```
41779;right but
41780;> So you have a slice of objects and implode them with newlineswhy do the extra work
41781;what value is added
41782;by having them newline separated
41783;is my question/objection
41784;> It allows for streaming documents. As long as a json object isn't terminated you don't know when the document ends
41785;thank you
41786;> ndjson allows you to send/process one document at a time rather than having to process the whole array
41787;i know HOW to do it
41788;oy vey
41789;If the endpoint however _doesn't_ stream it wouldn't make sense to use ndjson over just having an array
41790;true
41791;@deezy appreciate the help so far back üôÇ
41792;@deezy I'm a bit confused about handling both the map and coercion
41793;oh are you saying that the coercion was correct but just that i\'m returning the wrong type of object?
41794;you're coercing TO the wrong type
41795;you're trying to coerce to WebElement
41796;` panic: interface conversion: map[string]interface {} is not selenium.WebElement: missing method CSSProperty`
41797;but it isn't a WebElement
41798;the type you have to coerce to is in that error message and there's only two types mentioned in it
41799;right and this is a document
41800;that makes more sense
41801;so once you coerce it to a map you can then range over it
41802;and coerce each value to what I assume is a WebElement
41803;dang it I got lost again. I thought it was already a map and that needed to be coerced into a WebElement
41804;no
41805;a map is a map
41806;maps contain OTHER things
41807;why can't I iter over the map?
41808;because it's hidden inside interface{}
41809;How do I access it if it's hidden? üòõ
41810;coercing it
41811;from interface{}
41812;to the map type
41813;whcih is given to you in the error message
41814;returned.(Something)
41815;```for key element := range returned.(map) {```
41816;nope
41817;` panic: interface conversion: map[string]interface {} is not selenium.WebElement: missing method CSSProperty`
41818;ugh
41819;you really need to
41820;pay attention
41821;to the contents of that error
41822;it tells you exactly what you need
41823;at least it tells you the exact name of the type you need
41824;okay but even if I add CSSProperty isn't that just the _first_ thing that's missing?
41825;not related
41826;i mean it is but that has nothing to do with fixing the problem you're having
41827;```testing := returned.(selenium.WebElement)```
41828;I had that before
41829;right
41830;that's the problem
41831;it isn't selenium.WebElement
41832;`map[string]interface {} is not selenium.WebElement`
41833;I am literally out of things to try in that error message.
41834;it's already a map
41835;are you tho
41836;for key element := range returned.(map[string]interface {}) {
41837;you tried `foo.(map)`
41838;try that new code and see how it works
41839;```panic: interface conversion: string is not selenium.WebElement: missing method CSSProperty```
41840;"``` for _ element := range returned.(map[string]interface{}) { testing := element.(selenium.WebElement) testing.FindElement(selenium.ByCSSSelector header"") }```"
41841;okay welp
41842;time to add logging
41843;"`fmt.Printf(""%#v thingYouDon\'TUnderstand)`"
41844;element clearly isn't a WebElement
41845;right it's a string
41846;a `string` is not a `selenium.WebElement`
41847;yeah
41848;so
41849;you aren't being given WebElements
41850;which is why I did `element.(selenium.WebElement)`
41851;yeah but you can't do that
41852;that won't work
41853;```map[element606611e4a52e4f735466cecf:9e124357f1ce4a79b60d927c66010ca4]```
41854;you can't just turn an arbitrary string into a WebElement
41855;because it's not a `selenium.WebElement`
41856;that's what's in `returned`
41857;when I print it
41858;Assertions like that assert that the underlying type of an interface is X
41859;turn hot dog water tastes like fun into a WebElement
41860;¬Ø\\_(„ÉÑ)_/¬Ø
41861;yes
41862;that's a map
41863;and the string you're seeing is a key
41864;`element606611e4a52e4f735466cecf:9e124357f1ce4a79b60d927c66010ca4`
41865;that's the key
41866;okay
41867;the value isn't being printed
41868;"`fmt.Printf(""%#v thingYouDon\'TUnderstand)`"
41869;make friends with logging
41870;it clears a lot of things up
41871;"``` for _ element := range returned.(map[string]interface{}) { fmt.Println(element) fmt.Printf(""%T\ element) }``````096b57babae74aa19af35625b1d414eestring```"
41872;that cleared nothing up...?
41873;"fmt.Printf(""%#v thingYouDon\'TUnderstand)"
41874;use this
41875;> right it's a string@dave
41876;there's a reason i keep pasting it
41877;"```""d1dc5c081d75410786c451cde2d5c17b""```"
41878;now there's quote around it because it's a... string?
41879;yup
41880;there you go
41881;whatever you did gave you a string
41882;????
41883;¬Ø\\_(„ÉÑ)_/¬Ø
41884;alright
41885;that's something you gotta take up with Selenium
41886;or whatever library it is
41887;alright sorry it felt like you were trying to say I was using a string wrong somehow
41888;no i jsut mean you called some Selenium API function expecting web elements but it's giving you strings
41889;maybe on purpose maybe not
41890;https://github.com/tebeka/selenium/blob/9a0798fcb455aca4de72bbe424f4bbb9cb021f53/remote.go#L1149
41891;https://github.com/tebeka/selenium/blob/9a0798fcb455aca4de72bbe424f4bbb9cb021f53/remote.go#L1141L1146
41892;@deezy thank you this was my solution in the end: https://github.com/tebeka/selenium/issues/214#issuecomment690353867
41893;"```gopackage mainimport fmt""func main() { s := []int{2 3 5 7 11 13} printSlice(s) // Slice the slice to give it zero length. s = s[:0] printSlice(s) // Extend its length. s = s[:4] printSlice(s) // Drop its first two values. s = s[2:] printSlice(s)}func printSlice(s []int) { fmt.Printf(""len=%d cap=%d %v\ len(s) cap(s) s)}``````len=6 cap=6 [2 3 5 7 11 13]len=0 cap=6 []len=4 cap=6 [2 3 5 7]len=2 cap=4 [5 7]```"
41894;how does the capacity become 4?
41895;You cut the first 2 elements
41896;So they are dropped
41897;you cant assign to index 1 so the space the slice can see can only accomodate 4
41898;ahh
41899;i see
41900;when you slice from a beginning index you lose the elements before because you can't reslice under 0
41901;with end slices you can reslice over len to restore it to cap
41902;might be interesting to look at what beginning slices are doing with the layout on a memory level
41903;"Hi! Any reason why only second loop items are added to  ```filteredMetadata[metadatum.Fn]``` ?```m := make(map[string]string)for _ t := range data.Audio { m[""property""] = t.Key m[""value""] = t.Value m[""type""] = audio""}for _ t := range data.Data { m[""property""] = t.Key m[""value""] = t.Value m[""type""] = data""}filteredMetadata[metadatum.Fn] = append(filteredMetadata[metadatum.Fn] m)```"
41904;You're over writing the key with new data
41905;aaah
41906;uhm how I could add as another object?
41907;It would need a unique key
41908;It has unique key
41909;But I am not sure how I need to write it
41910;No the map needs a unique key
41911;See the example I posted over a week ago :)
41912;ok üòÑ
41913;@misterturtle You mean this  ```func addToMap(data Resp existing map[string]string) { for _ v := range data.Audio { existing[v.Key] = v.Value } for _ v := range data.Data { existing[v.Key] = v.Value }}```
41914;"So If I do this  ```myDataMap := map[string]string{}addToMap(data myDataMap)for k v := range myDataMap { m[""property""] = k m[""value""] = v filteredMetadata[metadatum.Fn] = append(filteredMetadata[metadatum.Fn] m)}fmt.Println(""88888888: m)```it appends 7 same objects"
41915;"> Hi! Any reason why only second loop items are added to  ```filteredMetadata[metadatum.Fn]``` ?> ```> m := make(map[string]string)> > for _ t := range data.Audio {> m[""property""] = t.Key> m[""value""] = t.Value> m[""type""] = audio""> }> > for _ t := range data.Data {> m[""property""] = t.Key> m[""value""] = t.Value> m[""type""] = data""> }> > filteredMetadata[metadatum.Fn] = append(filteredMetadata[metadatum.Fn] m)```@Ramix you\'re only making one map here where it looks like you want multiple. maybe something more like this?```goms := make([]map[string]string 0)for _ t := range data.Audio { ms = append(ms map[string]string{ property"": t.Key, value"": t.Value, type"": audio"", })}```"
41916;Hey boogs could you explain what happens inside the string{}? I didn't realise go would be able to stringify that but I'm on mobile and cant look it up! That's neat
41917;what is the string{}
41918;"Sorry in the append your using string{} with property"": t.Key"
41919;No
41920;That defines the map
41921;It's the whole type the `map[string] string`
41922;the type is `map[string]string` the `{...}` is the instantiation
41923;Ooooh
41924;Gotcha
41925;:NanaBongo:
41926;Yeah that makes a tonne more sense
41927;good :D
41928;I think for some reason I got confused with syntax for instanciating a slice? :)
41929;"I still get confused very easily;)"
41930;I had a problem which I was unable to solve about mocking. I have put my question in the forum here https://forum.golangbridge.org/t/howtomockhttpclientdobysettingthecookieintheresponse/20543?u=alwindossAny help is appreciated
41931;did you see package httptest?
41932;hi guys
41933;how can i change my console title
41934;what OS
41935;it really depends on the console :P
41936;well I think you meant terminal @!!!.SC4R ?
41937;or shell prompt
41938;> console titlelikely means `cmd.exe` but could be any sort of console really
41939;cmd.exe god's sake is that a virus ?
41940;it is
41941;it's some real terrible software
41942;jesus christ and now with this stupid windows terminal and wsl utter crap
41943;some days ago I read about windows advanced security firewall what in the name of tiger king is that
41944;windows is arguably malware
41945;as a whole
41946;just don't use windows bruh
41947;I've never had another OS give me ads before lmao
41948;> what OS@_diamondburned_ windows
41949;> well I think you meant terminal @!!!.SC4R ?@pathcl when i just build  is the console name the path
41950;you need to import some dlls and use them to call
41951;someone in this chat asked that
41952;I found a code
41953;But gaves me error
41954;windows tho
41955;"```func SetConsoleTitle(title string) (int error) { handle err := syscall.LoadLibrary(""Kernel32.dll"") if err != nil { return 0 err } defer syscall.FreeLibrary(handle) proc err := syscall.GetProcAddress(handle SetConsoleTitleW"") if err != nil { return 0 err } r _ err := syscall.Syscall(proc 1 uintptr(unsafe.Pointer(syscall.StringToUTF16Ptr(title))) 0 0) return int(r) err}```"
41956;It says unsafe
41957;> I've never had another OS give me ads before lmao@Doad you don't remember that time ubuntu integrated amazon searches into its file explorer?
41958;Lmao
41959;I haven't used Ubuntu in a long time
41960;god it was so nasty
41961;it is unsafe yeah
41962;that's normal
41963;I remember when Unity had Amazon apps
41964;Hello! Can someone give an example of sending POST request to some remote URL with a file in it?
41965;how is this file sent?
41966;multipartform or body?
41967;Multipart
41968;this is a great answer https://stackoverflow.com/a/57839987/5041327
41969;it avoids buffering
41970;err no
41971;it avoids reading the entire thing in memory by buffering
41972;Thanks!
41973;yea np
41974;I\'m trying to truncate a template in a Go template and I can\'t find a way to do it. Here\'s what I\'m trying:```{{ printf %.300s (template message .) }}```If I just do the following the template prints just fine... ü§î ```{{ template message . }}```The error is:```panic: runtime error: invalid memory address or nil pointer dereference [recovered] panic: runtime error: invalid memory address or nil pointer dereference[signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0x1106feb]```On the template.Execute line.
41975;```gomain.go:4:2: cannot find package timmytooturnt/Util in any of: c:\\go\\src\\Timmytooturnt\\Util (from $GOROOT) C:\\Users\\mckay\\go\\src\\Timmytooturnt\\Util (from $GOPATH)```
41976;has anyone gotten this issue before?
41977;@mckay gonna need more context on where you expect the Util package to be relative to your current directory
41978;OK perfect let me get you that
41979;"```gopackage mainimport ( Util Timmytooturnt/Util"" log"")func main() { log.Println(util.ReadStores())}```"
41980;@xmath279 I'm not sure if that's permitted as I don't see `template` in the list of global template functions maybe it's special
41981;@mckay er yeah I still don't know where you expect `Util` to be on your filesystem
41982;Also Util > util? Is it lowercase or uppercase
41983;None
41984;ok simplest solution in this case is probably just `go mod init timmytooturnt`
41985;ok I did that its giving me a new error though.
41986;None
41987;lower case everything
41988;including your folder names
41989;rename and change everything to lower case
41990;ok
41991;ok thank you
41992;so much
41993;Hello there.
41994;> @xmath279 I\'m not sure if that\'s permitted as I don\'t see `template` in the list of global template functions maybe it\'s special@1lann Yep looks like it doesn\'t work with only Go Template. Helm added an include function to deal with that but my context isn\'t using Helm üò¶
41995;"> Could you just do a buffered channel and an infinite loop feeding it?@misterturtle (xpost from #showmewhatyougot) channels should be viewed as communication mechanisms not as data structures; trying to use a buffered channel as a queue is very likely to lead to an eventual performance breakdown"
41996;So not to communicate a data structure... what would the best practice be if in this scenario I have 100k URLs to request as fast as possible. Would it be better to use channels control spawning a new go routine per url? Instead of spawning x goroutines as handlers which read the url data off of the channel?
41997;I think I've always used channels to communicate the data structure to a routine so maybe I just have a fundamental misunderstanding of how it's supposed to be used
41998;i think you misread
41999;you use channels to communicate data structures yes
42000;you don't use channels themselves as data structures
42001;Oooooh ok
42002;Yeah I definitely misread
42003;"/ am slow;)"
42004;the important idea is that the buffer size of a channel is in almost every case a performance optimization
42005;(there are certain situations where the buffer size is semantically meaningful like when using a channel as a selectable semaphore)
42006;since the buffer size is a performance optimization the only way to figure out the optimal value is through well optimization
42007;try different values benchmark and profile adjust figure out the optimal number
42008;ideally follow that by understanding why it's the optimal number but sometimes computers are just a little bit too magic
42009;I need to think about how that applies to my use case a bit as I usually just dump urls into a channel with a large buffer size say 10k and spawn a variable number of routines as network latency is impossible to predict
42010;As its changing my view of channels a bit I feel I need to go back and read over channels and how they work to fully understand it
42011;Is there anything beyond the go tour which is a particularly good resource for them?
42012;i know there are some articles on the go blog about concurrency patterns but i don't remember their content so i'm not sure they'd be very helpful here
42013;your case sounds like one where you'll be mostly blocked on network i/o so the optimal number of goroutines will be large but there probably isn't much to gain from having a larger buffer than whatever number of goroutines you use plus some extra for the producer to stay ahead of requests
42014;but benchmarking and profiling is ultimately the source of truth here
42015;I haven't done much with profiling yet so that might be a good first look into it :)
42016;> golang.org/x/oauth2 is actually super powerful. It features a `Token` type and all you need to do is plug in the access and refresh tokens‚Äîfrom there you can obtain an `http.Client` that will include the access token in all requests that it makes as well as automatically refresh the token if needed.@Carson for something like an Inoreader API client is a DB really necessary? what is the best way to handle access/refresh tokens in this case? I've seen other programs just store them in a config file in the home directory but that seems...Idk...cheap/flimsy?
42017;Well that comment was under the assumption you were doing this for a service handling thousands of tokens üòÑ
42018;If you just have one sure store it wherever :p
42019;Lol okay fair enough. Thanks!
42020;"```gopackage mainimport ( fmt"" time"")type MyError struct { When time.Time What string}func (e MyError) Error() string { return fmt.Sprintf(""at %v %s"", e.When e.What)}func run() error { return &MyError{ time.Now(), it didn\'t work"", }}func main() { if err := run(); err != nil { fmt.Println(err) }}```can someone explain this part ```gofunc run() error { return &MyError{ time.Now(), it didn\'t work"", }}func main() { if err := run(); err != nil { fmt.Println(err) }}```"
42021;`return &MyError{ }` how does this work?
42022;it returns a pointe to a MyError instance
42023;so
42024;it
42025;it creates a MyError instance at that moment and returns a pointer?
42026;yes
42027;"and `if err := run(); err != nil` this means that instead of doing ```goerr:= run()if err != nil { }```"
42028;is it possible to get goroutine id? :thinkingo:
42029;no
42030;@Rin
42031;@R4BB1T yes
42032;in this case will err be ever `nil`
42033;strange
42034;well yes it's possible to get a goroutine's ID
42035;but there is pretty much no valid use case for doing so in user code
42036;why do you want to do that?
42037;i think its deliberately non trivial
42038;yeah
42039;how does godbolt generate assembly? can I do it locally
42040;I am ddosing my router with loads of goroutines but with same ID and Sequence fields in icmp packet
42041;just use a UUID for a unique ID
42042;so i get spaghetti in return
42043;@func they probably wrote it by hand
42044;UUID?
42045;You'll probably want to learn about UUIDs if you haven't heard of them before
42046;Yeah I would
42047;In my code i call sending icmp in goroutine.in simple implementation i would like to use variable outside of goroutine and access it via pointer or some shit
42048;You can access variables in a parent scope sure
42049;hmm https://golang.org/doc/asm
42050;"> @Ramix you\'re only making one map here where it looks like you want multiple. maybe something more like this?> ```go> ms := make([]map[string]string 0)> > for _ t := range data.Audio {> ms = append(ms map[string]string{> property"": t.Key,> value"": t.Value,> type"": audio"",> })> }> ```@superloach Ok but I am getting this  cannot use ms (type []map[string]string) as type map[string]string in append"
42051;you probably didn't write the code exactly like that
42052;Getting `x/gen/templates has no metadata snapshot=684` from `gopls`. `templates` is just a bunch of `.tmpl` files and `gen` is a go package. Anyone know a solution?
42053;godddamnit
42054;Wrote ID via pointer. It didnt help
42055;https://github.com/golang/go/issues/32232 possibly relevant
42056;I reloaded and it works fine now /shrug
42057;VSCode showed the Go icon for the tmpl files before the restart so I'm thinking maybe it was something with the cache
42058;@_diamondburned_ I actually did but I am not sure whats wrong.
42059;show your code then
42060;how do I insert a element into a slice ideally it'l be sort of like below (which doesn't work without further manipulating)```s := []int{1,3}s = append(s[:1] 2 s[1:]...)```
42061;?go slices
42062;Slice usage and internals <https://blog.golang.org/goslicesusageandinternals>  Sgt_Tailor
42063;no
42064;damn
42065;"```ms := make([]map[string]string 0)for _ t := range data.Audio { ms = append(ms map[string]string{ property"": t.Key, value"": t.Value, type"": audio"", })}filteredMetadata[metadatum.Fn] = append(filteredMetadata[metadatum.Fn] ms)```@_diamondburned_"
42066;https://github.com/golang/go/wiki/SliceTricks
42067;`a = append(a[:i] append([]T{x} a[i:]...)...)` hmm yep seems like it's the way
42068;And then it gives  cannot use ms (type []map[string]string) as type map[string]string in append
42069;makes sense
42070;```[]map[string]stringmap[string]string```
42071;two different types
42072;looks weird tho
42073;What is I would like to append map[string]string
42074;(i'm replying to myself)
42075;yeah. your problem is you have a slice of maps. you have to `range` over that slice
42076;"> ```ms := make([]map[string]string 0)> > for _ t := range data.Audio {> ms = append(ms map[string]string{> property"": t.Key,> value"": t.Value,> type"": audio"",> })> }> filteredMetadata[metadatum.Fn] = append(filteredMetadata[metadatum.Fn] ms)```> @_diamondburned_@Ramix So this approach does not work if I would like to append map[string]string."
42077;what type is filteredMetadata
42078;make(map[int][]map[string]string)
42079;@_diamondburned_
42080;You've got a map with fixed keys. Please convert them to structs to make it readable
42081;:kek:
42082;oh lawd
42083;man this is brain pain
42084;so many maps
42085;it's `filteredMetadata[metadatum.Fn] = ms`
42086;unless you want `map[int][][]map[string]string`
42087;lmfao
42088;A map with int as key and as value a list of maps with a string as key and string as value
42089;look at that type
42090;maps are the hogbogling of little minds
42091;or something
42092;I blame the syntax
42093;I blame the horrible code
42094;that too prolly
42095;there's just no way you can reasonably represent a map of integers to a slice of a slice of a map of string to string
42096;without abstracting them away ofc
42097;yeah you gotta start using named types at a certain point
42098;even if it's just `type UserMap map[int]string`
42099;And turn the fixed keys into struct fields
42100;`m := make(ServiceMap[UserMap]CredentialMap)`
42101;infinitely more usable
42102;> And turn the fixed keys into struct fields@Sgt_Tailor what does that mean
42103;if a map weill ALWAYS have a given key
42104;it isn't a map anymore
42105;it's a struct
42106;maps are entirely for the case of i don\'t know what my keys will be before hand
42107;If you know what your keys are even some of them you are no longer in the neighborhood of needing a map
42108;You can put the rest of the stuff in a general map
42109;"> ms = append(ms map[string]string{> property"": t.Key,> value"": t.Value,> type"": audio"",> })that map can be better represented by the following struct:```gotype Banana struct { Property string Value string Type string}```"
42110;but you'd want to use a real type
42111;^
42112;ah for sure yes
42113;That way no other key can be added dynamically have you have the guarantee that the key actually exists
42114;Plus you can just access them with Banana.Property
42115;and you don't have to type `map[shit]bullshit etc etc etc`
42116;I too like brain exercise when reading var declaration
42117;pls send help
42118;package icmpi am trying to read received message with icmp.ParseMessageit is doing fine and I am getting Message typeto access body of message I call .Bodybut then I stuck link to example: https://pkg.go.dev/golang.org/x/net/icmp?tab=doc#examplePacketConnNonPrivilegedPing
42119;why isn't this merged to the core error package? https://github.com/pkg/errors
42120;> get stuck
42121;you'll have to be more specific
42122;well I am trying to retrieve information I get and parse it
42123;yeah you said that part
42124;and then you said but then I stuck
42125;which doesn't express any usable information
42126;okay
42127;Message.Body giving me something like that `&{267 0 [65 108 105 118 101]}`I need these numbers.
42128;"`fmt.Printf(""%#v thing)`"
42129;%v %T giving me crap like that `&{%!s(int=256) %!s(int=0) Alive} icmp.Echo`
42130;that's a slice
42131;a a byte slice it seems
42132;@wormy.go github.com/pkg isn't maintained by the Go team. It existed before stdlib had the Wrap and Unwrap functions
42133;yeah don't ever bother with plain %v
42134;just use %#v
42135;and with %#v %T becomes redundant
42136;`&icmp.Echo{ID:263 Seq:0 Data:[]uint8{0x41 0x6c 0x69 0x76 0x65}}`This
42137;there you go
42138;now you know what you need
42139;Em..
42140;`Data`
42141;@Sgt_Tailor isn't that package necessary for core error too? i mean i am not sure to understand it's complexity or total need. But i am having an issue in controller > service > repository onion like structure in my microservices to differentiate between error messages. So i decided to use wrap function of errors package
42142;I got this in string format. I dont really wanna parse it as string.
42143;it isn't
42144;it's a struct
42145;you're just printing out a prettier representation of it
42146;https://pkg.go.dev/golang.org/x/net/icmp?tab=doc#Echo
42147;you have an Echo
42148;use it
42149;but when I invoke .Data it giving me an error `Data undefined (type icmp.MessageBody has no field or method Data)`
42150;ah
42151;because MessageBody is an interface
42152;you have to coerce it to an Echo
42153;blarg twice in one day
42154;go2 contracts with members when?
42155;fuck
42156;Yeah. I know it is an interface. [damn i should explain myself better next time]
42157;Cool
42158;So yeah just assert it to an icmp.Echo and you'll have access to its members
42159;googled what is coerce
42160;type assertions
42161;https://tour.golang.org/methods/9
42162;None
42163;here's a refresher
42164;The stdlib error and fmt package are sufficient for me
42165;%w in fmt.Errorf to wrap
42166;Then errors.Is
42167;Or errors.As
42168;yeah now that we have %w the pkg/errors package is kinda redunant
42169;oh
42170;all it really does is Wrap() as far as i remember
42171;Type assertions
42172;Wrap() and the associated unwindings
42173;yeah sometimes words stop meaning things and change places
42174;the noologic firmament is crumbling üôÉ
42175;```impossible type assertion: icmp.Echo does not implement icmp.MessageBody (Len method has pointer receiver)```
42176;:thonk:
42177;okay well
42178;that's confusing
42179;I am fucken done. It is 0:43 here
42180;Need &echo
42181;oh hah
42182;okay
42183;nice and easy
42184;Other way around `.(icmp.Echo)`
42185;It's talking about the concrete type not the thing that's being asserted
42186;@Sgt_Tailor thank you i realized option 3 in this post fmt.Errorf is doing the same https://itnext.io/golangerrorhandlingbestpracticea36f47b0b94c
42187;Np
42188;Oh god thanks
42189;?go errors
42190;Programming with errors <https://peter.bourgon.org/blog/2019/09/11/programmingwitherrors.html>  SkippyError handling and go <https://blog.golang.org/errorhandlingandgo>  Sgt_TailorWorking with Errors in Go 1.13 <https://blog.golang.org/go1.13errors>  stdioDon‚Äôt just check errors handle them gracefully. <http://dave.cheney.net/2016/04/27/dontjustcheckerrorshandlethemgracefully>  SkippyWorking with Errors in Go 1.13 <https://blog.golang.org/go1.13errors%20>  stdio
42191;Blogs are the best one
42192;pkg/errors is just an appendix now
42193;vestigial
42194;Thanks a lot. Since i started my journey with 1.13 it is sometimes hard to catch changes and the timeline
42195;@deezy thanks too
42196;did i help? :thonk:
42197;curious how does bot links get updated?
42198;there's a command
42199;it is not publicly usable
42200;you can make requests tho
42201;as long as they're reasonable we shouldn't have a problem updating them
42202;what does gopath do exactly?
42203;now? mostly nothing
42204;im sorry i didnt understand
42205;GOPATH is where the go toolchain stores repositories it clones
42206;okay and
42207;that's it
42208;that's all it does now
42209;@R4BB1T try go111module=off and you will see
42210;do i have to do anything about it??
42211;?go modules
42212;Using go modules <https://blog.golang.org/usinggomodules>  Sgt_TailorIntroduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  Skippy
42213;no
42214;no
42215;dont touch GOPATH
42216;just leave it be
42217;you just have to `go module init etcetc`
42218;all your development happens outside GOPATH
42219;no touch
42220;is it like lib in python
42221;eh
42222;no idea what that is
42223;don't bother
42224;where it installs all the external modules
42225;lol he wants to see what is the purpose of GOPATH. just do this in your env and you will see üòÑ go111module=off
42226;the comparison will not help
42227;yes your module specifies its dependencies
42228;?go modules
42229;Using go modules <https://blog.golang.org/usinggomodules>  Sgt_TailorIntroduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  Skippy
42230;there's plenty to read here
42231;if you're curious about the details
42232;will take a loo thanks!
42233;k
42234;godspeed!
42235;i know a lot of go documentation talks about GOPATH
42236;because it WAS very important
42237;but they fixed it
42238;and nobody has to care about GOPATH anymore
42239;lol i see still see legacy go applications that run on gopkg.toml and dep files
42240;legacy code is a terrible albatross around one's neck
42241;yea but migration is not that tough sometimes. Everything is fun with go
42242;hello guys,I'm new to GO!I've got a question: I have a simple package that send POST request to an external API now I wanna send at least 5 request per second to the API does it possible? if it does does anyone know how to do it?
42243;sure it's possible
42244;https://golang.org/pkg/time/https://godoc.org/golang.org/x/time/rate
42245;is there any way to ensure that the struct's Init() method is called? or does it have to be done manually?
42246;Typically you'll write a New() function that returns the initialized struct.
42247;go doens't have constructors
42248;so
42249;yeah you just have to make a New() func
42250;But no there's no way to prevent users from declaring a zero value of your data type.
42251;if your users can't or won't use it correctly that's their problem
42252;"> @Ramix you\'re only making one map here where it looks like you want multiple. maybe something more like this?> ```go> ms := make([]map[string]string 0)> > for _ t := range data.Audio {> ms = append(ms map[string]string{> property"": t.Key,> value"": t.Value,> type"": audio"",> })> }> ```@superloach lol any reason not using this?  ``` for _ t := range data.Audio { m := make(map[string]string) m[""property""] = t.Key m[""value""] = t.Value m[""type""] = audio"" filteredMetadata[metadatum.Fn] = append(filteredMetadata[metadatum.Fn] m)}for _ t := range data.Data { m := make(map[string]string) m[""property""] = t.Key m[""value""] = t.Value m[""type""] = data"" filteredMetadata[metadatum.Fn] = append(filteredMetadata[metadatum.Fn] m)}```It actually adds all the info to m üôÇ"
42253;ahahahaha
42254;this is hilarious
42255;putting the values in the declaration is just easier imo
42256;and probably technically faster
42257;you're taking a struct and making maps with the exact same values in them
42258;well the struct might have more than they need
42259;you're putting the data from one box into a shittier box
42260;( it doesn't )
42261;i looked
42262;ah hm
42263;dude dont make maps in every loop cycle
42264;well I'm busy with school rn have fun with that
42265;thanks @mdempsky.
42266;please explain me somehow simpler üòÑ
42267;> yea but migration is not that tough sometimes. Everything is fun with go@wormy.go ow boy do I have some horror stories xD
42268;For massive refactors
42269;@Sgt_Tailor i have been refactoring lots of sql queries in go recently üò¶ someone actually made files like queries.go functions.go interfaces.go üò¶
42270;please dont follow the pattern like structs.go functions.go
42271;errors.go? might be fine üòÑ
42272;models.go
42273;:Default:
42274;I put errors near the structs w/ the methods that return them
42275;The real trick is to just not return any errors. üëç
42276;he knows too much
42277;:thinksmart:
42278;"```goimport ( github.com/XXXX"")```im importing something from github but it says it this thing is not found"
42279;do i need to do something for it?
42280;ok i think i fixed it
42281;Any ideas on how to get the number of channels/bands in an image?
42282;with Python you can do `Image.open(file).getbands()` but haven't seen anything similar in Golang
42283;most likely by type switching if you are using x/image
42284;image i mean
42285;or ColorModel method on iamge
42286;@R4BB1T Probably `go get github.com/XXXX`.
42287;type switching like checking to see if it's a Alpha16 vs Gray vs Gray16 etc? @stdio
42288;Unfortunately I don't think you can compare most color.Model by value. The common ones are functions and function values aren't comparable in Go.
42289;```goimg _ err := image.Decode(reader)var isGrayScale = img.ColorModel() == color.GrayModel || img.ColorModel() == color.Gray16Model```works
42290;i did get that far
42291;It works? Or it compiles?
42292;yeah
42293;if that's the best way then my next step i guess is to figure out if each `ColorModel` always has the same number of channels
42294;end goal is to determine how much VRAM an image uses btw
42295;Oh I see how that works now. Ew. But yeah that seems to be the officially supported way.
42296;(Ew at the implementation details.)
42297;I mean theoretically you could apply the model to every color in the nrgba64 space and somehow detect it that way but that's very impractical
42298;in practicality you shouldn't have to care
42299;the code i'm transcoding from takes the height and width of the image and multiplies by the number of channels
42300;then multiplies by 1.25x and the resulting number is the number of bytes used in VRAM
42301;Just to check you're predicting how much memory it will take after loaded into a GPU or something? Asking because image.Decode will load it into regular RAM not VRAM.
42302;right. `image.Decode` is just to get the height and width (and ideally channels) of the image
42303;```pythondata = pyplot.imread(fullPath)w h d = data.shape # d = number of channels if image is colorm = 4.0 / 3.0# texW and texH = w and h rounded up to the nearest power of 2bytes = int(math.ceil(texW  texH  d  m))```
42304;is a cut of the python i'm copying
42305;Should I be worried about these random people trying to make HTTP requests to my server üôÇ
42306;"```go if req.URL.Path != / { LogErr(ip +   WRONG PATH: \\ + req.URL.Path + \\"""") return } //Check if there is an AUTH header if ok != true { LogErr(ip +   NO AUTH HEADER FOUND!"") return } //Check if the AUTH info is correct if user != USER || pass != PASS { LogErr(ip +   WRONG LOGIN INFO: \\ + user +   + pass + \\"""") return }```"
42307;is this good enough for fending them off?
42308;it's only been up for a day and I've gotten like 5 requests from different IPs
42309;but none of them had auth headers so it returned
42310;:thonk:
42311;you probably don't want to hardcode your credentials
42312;But who would ever guess USER/PASS as the username/password?
42313;that's not the actual password
42314;I changed it to post it here
42315;no
42316;i mean
42317;you probably don't want to put your credentials in your code
42318;that's the sorta thing that gets you fired
42319;What's the alternative?
42320;@Zovaal Make sure you're closing the response buffer before you return. (Maybe you're using an HTTP framework that handles that.)
42321;storing the credentials literally anywhere else
42322;a file a database environment variables
42323;even better
42324;Put them in consts obvs. üëç (jk)
42325;not rolling your own authentication scheme
42326;if you aren't sure how
42327;hash the password
42328;https://girishjoshi.io/post/implementinghttpbasicauthenticationingolang/
42329;but that'll be constant time so it will take up cpu time (?) [Citation needed]
42330;add a rate limiter
42331;oh god damn it
42332;that example puts the credentials in the code too
42333;lol
42334;None
42335;Why is there a `%` at the end of the response?
42336;no new line
42337;wow
42338;zsh inserted that
42339;did you really read my mind
42340;> zsh inserted that@_diamondburned_ smh
42341;it's a fairly common question
42342;they're asked a lot on my Linux server
42343;smh that zsh does that
42344;I think it's useful
42345;I have my shell insert another new line itself
42346;so it's not an issue
42347;"```govar normalAlphabet []string = []string{""a b c d e f g h i j k l m n o p q r s t u v w x y z""}func decode(data []byte shift int) string { tempAlphabet := normalAlphabet for index := range tempAlphabet { newIndex := index + (shift  1) if newIndex >= len(tempAlphabet) { newIndex = (index + (shift  1))  (len(tempAlphabet)  1) } fmt.Printf(""New index %d\ newIndex) tempAlphabet[index] = normalAlphabet[newIndex] } fmt.Printf(""Normal %s\ normalAlphabet) fmt.Printf(""Temp %s\ tempAlphabet) return }```Does anyone know why the `normalAlphabet` variables is being changed? I get the following output```Normal [c d e f g h i j k l m n o p q r s t u v w x y z d e]Temp [c d e f g h i j k l m n o p q r s t u v w x y z d e]```"
42348;Slices have an underlying array
42349;Assigning a slice to the value of another slice shares that array
42350;If you want a proper copy of a slice you can use `copy`
42351;what is the point of
42352;None
42353;vs
42354;"```gofunc main() { var wg sync.WaitGroup wg.Add(1) go process(""order"") wg.Done()}```"
42355;they're both wrong
42356;you're supposed to call Done inside the goroutone
42357;the Wait goes to the caller routine
42358;right they just fixed it in the tutorial :d
42359;LOL
42360;but
42361;what is the point of the anonymous function?
42362;"So you can call `wg.Done()` and `process(""order"")` in the same goroutine"
42363;what happens otherwise?
42364;What do you mean
42365;If you don't use a goroutine?
42366;"i mean if we call `wg.Done()` after `go Process(""order"")`"
42367;not in an anonymous function
42368;does it mean that `wg.Done()` doesn't get explicitly called for go Process
42369;like out of order execution?
42370;but wrapping it in a function means both will execute together
42371;like sequentialyl
42372;idk
42373;The done call no longer happens when your goroutine is done
42374;That's the whole point of that method
42375;To signal to the waitgroup that a goroutine has completed
42376;im confusion
42377;done call still happens after `go process`
42378;rigt
42379;You spawned a goroutine it doesn't mean it has run and completed
42380;It's concurrent
42381;When it's starts and finishes is undetermined
42382;correct
42383;`wg.Done()` may end up getting called before the goroutine even starts
42384;okay
42385;Which doesn't make sense for a waitgroup
42386;yes
42387;what would be the fastest way to send 4 http requests inside a go routine just a for loop?
42388;:ThinkingFren3:
42389;That's a way to make multiple http requests sure
42390;Or you could do all 4 concurrently
42391;> > `wg.Done()` may end up getting called before the goroutine even starts> @Doad this is the case when wg.Done() is not inside the anon func
42392;riht?
42393;Yeah
42394;Since they are now concurrent to each other
42395;but if they are concurrent
42396;wait you mean
42397;inside the anon function they are concurrent right?
42398;how does this solve that problem of wg.done() getting called before?
42399;if its concurrent it could still get called
42400;No
42401;The anonymous function is run in a goroutine
42402;So anything in that function is synchronous within that goroutine
42403;Anything outside of it is concurrent to it
42404;ahhhh
42405;i ee
42406;got it
42407;why is it synchornous within the goroutine? sry if its a noob ques
42408;nvm
42409;Because they're in the same function
42410;i will google it
42411;The goroutine just runs that function
42412;OK wow i think i got it
42413;so the entire block of function is now concurrent with the rest of the program
42414;Yup
42415;but inside the block its synchronous
42416;It's running in a goroutine
42417;nice
42418;thank u
42419;@Doad ~~I did this```gotempAlphabet := []string{}copy(tempAlphabet normalAlphabet)```yet now `tempAlphabet` is just empty~~nm fixed with `tempAlphabet := make([]string len(normalAlphabet))`
42420;Look at the documentation for `copy`
42421;You're missing one critical aspect
42422;Yup
42423;It copies up to the length of dst
42424;Which in your first example was 0
42425;Ok nice ty for help
42426;> Or you could do all 4 concurrently@Doad so four go routines each sending a request?
42427;Depending on how long the requests take that can be viable
42428;How do you guys determine how to subdivide code into goroutines for the best efficiency? I think I'm using goroutines too much
42429;Generally to separate independent parts of the program operation
42430;Parts that can operate concurrently to one another
42431;Also benchmarking if you're really chasing optimal efficiency
42432;yeah just profile it
42433;what would be a good library to choose for a language lexer?
42434;most differ quite a bit from others so just try and see
42435;thx
42436;@Stellar try not using goroutines and then add one whenever it turns out a function must run in parallel
42437;Ive seen some people fall into the trap of thinking a goroutine is the preferred way for go to call functions  when you look at it the naming is a little confusing. The keyword ‚Äúfork‚Äù would have been more intuitive imho
42438;"Hi I have a struct that stores raw json in the database `fields` which looks like:``` Fields json.RawMessage `db:""fields json:""fields""````And stored like:```{""main_text"": This is the maon text page_colour"": Red""}```Currenly when outputting the fields I get a load of numbers just wondering how to unmarshal it correctly?"
42439;Fields is unknown I cant map a struct to it
42440;Except fork is a syscall that spawns a child in a separate memory space: <https://man7.org/linux/manpages/man2/fork.2.html>
42441;That would have been one confusing name
42442;gofork
42443;gork
42444;`go` to launch a `go`routine
42445;¬Ø\\_(„ÉÑ)_/¬Ø
42446;It isn't like the language spec has a lot of keywords
42447;> break default func interface select> case defer go map struct> chan else goto package switch> const fallthrough if range type> continue for import return var
42448;That is all of them
42449;`go` to fork a `gork` :micdrop:
42450;But it isn't a fork
42451;:BabyRage:
42452;jk
42453;I actually agree that fork is better than go
42454;because the behavior of forked processes behave more similarly to goroutines than what goroutines (the name) are supposed to be similar to
42455;that is coroutines
42456;well the name `fork` itself isn't cool
42457;but it is more accurate behaviorwise
42458;"> Hi I have a struct that stores raw json in the database `fields` which looks like:> ```> Fields json.RawMessage `db:""fields json:""fields""`> ```> And stored like:> ```> {""main_text"": This is the maon text page_colour"": Red""}> ```> Currenly when outputting the fields I get a load of numbers just wondering how to unmarshal it correctly?@Ainsley Any ideas on this?"
42459;No they don't??? goroutines run in the same process and memory space
42460;are goroutines preemptively scheduled?
42461;forks create a child process in a separate memory space
42462;are coroutines preemtively scheduled?
42463;goroutines behave similarly to forked processes in the sense that they are preemptively scheduled
42464;this means the programmer has to take into account those facts the same as when they use threads
42465;"mutexes are needed; synchronization primitives are needed"
42466;with coroutines you don't always need them
42467;Ok but
42468;Same memory space
42469;and?
42470;I am not making the point that goroutine or go is good. But `fork` as an alternative is bad
42471;Those are two different arguments
42472;sure?
42473;I'm not saying `fork` is necessarily good either
42474;@Ainsley isn't json.RawMessage a byte slice
42475;you should probably convert it to string
42476;Oh yeah it is @awoo
42477;`Cannot convert expression of type json.RawMessage to type string `
42478;Is what I get
42479;don't do a pointer to json.RawMessage
42480;`string(p.Fields)`
42481;json.RawMessage itself is already a []byte which can be nil
42482;Ooooo ok
42483;You're legends thanks
42484;As my field is json.RawMessage can I cast it to actual json?
42485;a json.RawMessage is already actual JSON
42486;in the sense that it's literally the JSON it originally was
42487;a `json.RawMessage` isn't though
42488;again it's pointless to use a pointer to json.RawMessage
42489;cast is probably not the accurate term you can unmarshal a `json.RawMessage` it if that's what you mean
42490;Like this? `json.Unmarshal([]byte(p.Fields) &p.Fields` ?
42491;Still get an array of numbers `[123 34 109 97 105 110 95 116 101 120 116 34 58 32 34 84 `
42492;did you change the type?
42493;to a nonpointer?
42494;Yep
42495;he's trying to unmarshal it into a byte slice
42496;huh why
42497;"` Fields json.RawMessage `db:""fields json:""fields""``"
42498;oh
42499;how are you printing it
42500;did you string() it
42501;uhh is there a command to link to json docs
42502;``` fmt.Println(string(p.Fields)) json.Unmarshal(p.Fields &p) fmt.Println(&p)```
42503;https://godoc.org/encoding/json#RawMessage
42504;which line printed the numbers?
42505;if second that's probably because the []byte isn't printed as a string
42506;which is normal behavior
42507;if you want the string you have to explicitly convert it
42508;Got it with p.Fields.UnmarshalJSON(p.Fields) thank you!
42509;:Thonk:
42510;somehow I'm pretty sure that's wrong but sure yw
42511;in fact I'm p sure that's the same as doing `p.Fields = p.Fields`
42512;which is the same as doing nothing in this case
42513;Right so if its not needed how come I was getting back nothing?
42514;I\'m not sure what you mean by nothing
42515;you'll have to be more specific
42516;I recommend adding contexts to your logs
42517;"`fmt.Println(""the whole struct: p)`"
42518;and do show the complete lines printed
42519;not just a chunk ofi t
42520;"Ok apologies when returning through the api I get the correct layout ``` fields"": { main_text"": This is the maon text"", page_colour"": Red"" },```But when printing it in a html file ```{{ define content }}{{.Post.Fields}}{{ end }}``` I get the array of numbers"
42521;`{{ printf %s .Post.Fields }}` should work iirc
42522;or make a new function
42523;Fantastic
42524;"```gotemplate.FuncMap{ stringify"": func(b []byte) template.HTML { return template.HTML(b) },}```"
42525;then do `{{ stringify .Post.Fields }}`
42526;actually do `string` and not `template.HTML`
42527;`template.HTML` is for trusted and alreadyescaped HTML
42528;Ok great
42529;Sorry just another question Im using gin as a server. Im wondering if its possible to obtain the current slug/path inside a funcmap function?
42530;```func getField(field string) string { // I need acccess to the slug here // e.g gin.path return field}```
42531;Or even better access the data sent to the template without having to parse it in as an arg
42532;With python I'd have a webserver and some scripts which use python to do different things such as handling migrations creating an admin account etc. How would I do this with go?
42533;Would I be able to have scripts like that? Wouldn't they need main functions? If so that would be an error for go (or at least something that vscode doesnt't like)
42534;you wouldn't use a webserver to evaluate scripts
42535;you'd use Go as a webserver with the code built into there
42536;i mean code for a webserver sorry
42537;frameworks like flask etc
42538;then your external webserver proxies connections to that Go application
42539;there aren't gigantic frameworks like that in Go
42540;everything is separated into libraries
42541;I'm using Gin and that feels pretty similar tbh
42542;there isn\'t going to be a magical make me an admin API endpoint with database schema migration and net/http
42543;sure then
42544;hm i guess i'll just use multiple files with main functions and ignore the errors then :/
42545;wat
42546;domigrate.go for example would have a main function makeadmin.go would also have a main function
42547;both would be in package main
42548;or scripts
42549;what i'm asking is if there is a cleaner way to do this: have a bunch of files which act like scripts/sh files/python files
42550;The idea is they would be built into your webserver application
42551;ah i see
42552;so would i just pass a variable to the process when i run it to do a migration then exit?
42553;is that the go way of doing things?
42554;what does that have to do with error handling
42555;https://gist.github.com/posener/73ffd326d88483df6b1cb66e8ed1e0bd
42556;found this not sure if it's acceptable
42557;I'm honestly too tired to help further so I'll leave that to @misterturtle
42558;but I will say this
42559;don't try to force everything Python onto Go
42560;it will not go well
42561;I'm at work and knee deep in a report :/
42562;i wasn't i was asking what the best way to do it with go was
42563;oof
42564;eh doesn't matter i'll just do whatever works tbh then fix it later if it's an issue :)
42565;thanks for the help anyway
42566;migration and creating an admin user sounds suspiciously like bootstrapping an environment instead of an everyday operation but I doin't really have context
42567;i normally write migrations into a script then run it at least that's how i did it with flaskmigrate
42568;maybe it's different with go i'll read more about it
42569;You could have commands in separate scripts but it's likely they would be using the same configuration files and data structures as the rest of your application so it could be implemented in the main project as a different instanciation of your app. It really is a trial by fire but have a look at how k8s does it
42570;https://github.com/kubernetes/kubernetes/tree/master/cmd
42571;yeah that's pretty much what i was after
42572;they just have a big cmd directory
42573;thanks
42574;no worries hope that was useful
42575;it's perfect i should have remembered to look at some big programs like that tbh... mind went blank haha
42576;was too locked into my old ways
42577;> ```> func getField(field string) string {> // I need acccess to the slug here> // e.g gin.path> return field> }> ```Any help with this??
42578;Trying to access the data in a func map using gin
42579;hi I'm trying to make an API client package for a HTTP API that I can use from my discord bot  packages `main` for bot and `api` for the API client
42580;I'm struggling to initialise the API client and use it from the bot though
42581;I've tried shifting things around but I can't figure out how to do it so I'm asking here
42582;this is my code https://hasteb.in/upikabaw.swift
42583;I'd like to create the client in main.go then use it in other places in the main package
42584;You should be able to import your client package into your main.go. As long as you have a folder called api with the client.go in it you can call import <path>/<package> like you are already with the bot packages
42585;yeah but then when I create it in main.go how can I use it in bot.go?
42586;I haven't been able to access it when I do
42587;If the files are within the same package you can use them without importing. If bot.go is in a different package you can't import main though
42588;Hi. Trying to figure out all this module stuff. After running go get <something> how the heck do i use it in my own project? I want to use https://github.com/xiaonanln/goworld but just can\'t get it to work with anything but the example stuff. I shouldn\'t have to put my code in the example folder right? I\'m really confused.
42589;?go modules
42590;Using go modules <https://blog.golang.org/usinggomodules>  Sgt_TailorIntroduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  Skippy
42591;Should be as simple as doing `go mod init <your module name>` and then using `go get <module>`
42592;"You can them import it using `import github.com/xiaonanln/goworld""`"
42593;Yep done that. Not even sure where the goworld stuff ends up :S
42594;It gets cached in the module cache. Should be in $GOPATH somewhere
42595;Got an error cannot use c (type redis.Cluster) as type redis.Cluster in field value: when i ran go get this time. :S
42596;The function you are calling expects a pointer you are providing it a value
42597;try passing &c
42598;But `go get` shouldn't be complaining there. That is a compiler error
42599;Exactly. And that's not my code :S
42600;bot.go https://i.imgur.com/0WG6c2A.pngmain.go https://i.imgur.com/oBk7s4j.pngIs it not exporting because it's in the main func scope or?
42601;I don't know what your code looks like Lurve so I can't tell
42602;@respect Correct. You can't import code from main
42603;In most cases people move the logic away from main into a separate package and then have `main` import that instead
42604;then `bot` can import it
42605;@Lurve looks like the package is broken
42606;you mean the main function can't export or the main package can't export?
42607;"Is it possible to use a struct in a template without knowing its value?```{{ index .Fields text }}{""text"": This is some text""}``` Currently I use `index` to access a map by key but really want to avoid it ideally use something like this`{{ .Fields text }}`"
42608;The main _package_ can't export
42609;@Lurve You're not meant to go get that package directly according to the documentation
42610;`go get github.com/xiaonanln/goworld/cmd/...` is the recommended way
42611;That's what i do.
42612;I can run that no problem
42613;I can too. Can't build the examples though.
42614;...
42615;so you're getting an error
42616;Could've lead with that
42617;then can I just create the API client straight in bot.go?
42618;So we still don't know what you are actually trying to run Lurve. Or what the error is exactly
42619;Anywhere i can paste the code?
42620;If you have a `bot` `api` and `main` you can import `api` inside `bot` sure
42621;You just can't import from `main`
42622;bot.go is main package
42623;?go structure
42624;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
42625;Trying to run goworld build examples/chatroom_demo getting goworld directory is not detected. If the same example from my own devfolder i get a shit ton of errors about pointers.
42626;"> Is it possible to use a struct in a template without knowing its value?> ```> {{ index .Fields text }}> {""text"": This is some text""}> ``` > Currently I use `index` to access a map by key but really want to avoid it ideally use something like this> `{{ .Fields text }}`any ideas?"
42627;> goworld build examples/chatroom_demoexcuse me wut
42628;what is goworld
42629;Something that probably causes more problems than it solves.
42630;Just a guess.
42631;@Lurve okay so that error is because you didn't install goworld correctly in the first place. you have to go further back
42632;@deezy I see. I removed everything that has to do with goworld several times though :S
42633;¬Ø\\_(„ÉÑ)_/¬Ø
42634;you still haven't shown any actual details
42635;well you did quot one error message
42636;but it wasn't news
42637;@deezy Not sure where to paste it but heres the exact samme thing: https://github.com/xiaonanln/goworld/issues/81
42638;Okay so you DID install goworld but it threw taht error so you nuked the install?
42639;@deezy A few times yes.
42640;anyways the issue pretty clearly addresses the issue
42641;using master vs a tagged release
42642;None
42643;@deezy I see! Thank you. Could you point me in the direction on how to get the right one when running go get?
42644;"Ok so Ive had a bit of progress with this and created a new html render inside of a controller function:``` c.server.HTMLRender = ginview.New(goview.Config{ Funcs: template.FuncMap{ getField"": func(field string) string { if _ found := fields[field]; found { return fields[field] } else { return  } }, }, })``` Is it bad reinstanting the html renderer just for one endpoint?"
42645;What is the template and what are you providing it?
42646;Shouldn't need a getField to a map
42647;I want the function on the template (just html template) to be as clean as poss so I have this: ```{{ main_text | getField }}```
42648;I didn't want to use {{ .index }} or {{ .call }} but needed to access the data inside of the controller function gain acesss to its data
42649;"```func (c FrontendController) Serve(g gin.Context) { path := g.Request.URL.Path post err := c.postsModel.GetBySlug(path) if err != nil { NoPageFound(g) return } fields := make(map[string]string) _ = json.Unmarshal(post.Fields &fields) c.server.HTMLRender = ginview.New(goview.Config{ Root: paths.Theme(), Extension: config.Template[""file_extension""], Master: /layouts/main"", Partials: []string{}, DisableCache: true, Funcs: template.FuncMap{ getField"": func(field string) string { if _ found := fields[field]; found { return fields[field] } else { return  } }, }, }) r := ResourceData{ Post: post, } g.HTML(200 config.Template[""template_dir""] + / + post.PageTemplate r)}```"
42650;@Ainsley https://play.golang.org/p/UY_BJHwBThI
42651;Thats great thanks @Sgt_Tailor
42652;Im using gin to return though
42653;"```g.HTML(200 config.Template[""template_dir""] + / + post.PageTemplate r)```"
42654;Should be the same
42655;How about if I want to reference it likes so Hello: {{ Something .names }}?
42656;So accessing `Fields` so `{{ Fields.names`
42657;`{{ Fields.names}}` sorry
42658;Should just work as well
42659;The template engine will try to resolve it to a map or struct value
42660;Sorry @Sgt_Tailor would you mind showing me on https://play.golang.org/p/617Kd8lQYg ? Ive been struggling with this for a while haha! Thanks so much
42661;https://play.golang.org/p/pa3QoOk24LY
42662;used a struct in this case
42663;Template engine so good
42664;Thank you so much for your time @Sgt_Tailor
42665;The documentation of text/template explains this in greater detail which is what html/template uses <https://golang.org/pkg/text/template/>
42666;so I have the variable WarzoneClient declared in SetupBot() of `bot/bot.go` why can't I use that var in `bot/commands.go`? both in the same package
42667;Should be able to just use it using `WarzoneClient`
42668;says it's undefined
42669;How are you compiling it?
42670;`go run ./`
42671;And both files have the same `package` defined?
42672;if the variable is inside a function of course you can't use it elsewhere
42673;He said it's declared in `SetupBot()`
42674;ah even if it's uppercase exported?
42675;it's scoped to the function
42676;Not to the package
42677;Ow yeah I figured they assigned the value to the package variable
42678;If you want it scoped to the package you need to declare it as a global
42679;ah ok that fixed it
42680;but it says the method doesn't exist on the Client
42681;even though it should
42682;oh nevermind I forgot the part before the function name
42683;"```go// Test returns a stringfunc (c Client) Test() string { return hi""}```the (c Client)"
42684;That's called a method receiver
42685;alright
42686;In the SetupBot() it's erroring about the variable being declared but not used but it is used in another file
42687;You're shadowing it probably
42688;with :=
42689;set it with only =
42690;ah yes that worked
42691;thank you all for the help!
42692;np
42693;I'm trying to modify the net/http lib so I copied it but it doesnt work with some functions
42694;say it needs Cookie when it has http.Cookie
42695;üëü ü§ñ
42696;hi!
42697;i mightve asked this before
42698;but so when one go routine is calling a function its not locked?
42699;@Nascent it needs to refer to the `Cookie` in the package
42700;"```gofunc unsubscribe (c websocket.Conn chanUnsubscribe chan string){ for symbol := range chanUnsubscribe{ _ = c.WriteMessage(websocket.TextMessage []byte(fmt.Sprintf(""{\\""action\\"":\\""unsubscribe\\"",\\""params\\"":\\""%v\\""} T. + symbol))) _ = c.WriteMessage(websocket.TextMessage []byte(fmt.Sprintf(""{\\""action\\"":\\""unsubscribe\\"",\\""params\\"":\\""%v\\""} AM. + symbol))) }}```"
42701;not `http.Cookie` which will refer to the stdlib
42702;not your copied package
42703;to prevent what i thought it was locked i had it pass it to a channel
42704;but it would be quikcer going through a
42705;function call
42706;FUCKING SNEAKERBOTS
42707;I'm trying to get the name of a struct that's returned by a function
42708;probably i'm misunderstanding something basic
42709;```goreflect.TypeOf(img.ColorModel()).Elem().Name()```prints out as `modelFunc`
42710;which is not one of https://golang.org/pkg/image/color/#Model
42711;so i would need rename the files in the copied package too?
42712;filenames have nothing to do with anything
42713;You just have to refer to the proper struct
42714;anyone know of a good redis lib that's lighter than <https://github.com/goredis/redis>? they've got a lot of dependencies that feel unnecessary
42715;@Wisp you could just inspect the function's return types rather than calling it
42716;er wait let me see
42717;üëç
42718;`modelFunc` is the unexported type used by `color.ModelFunc`
42719;no expert but ive been using https://github.com/gomodule/redigo
42720;redigo looks appealing yeah
42721;its a bit simplier api also
42722;true
42723;so if i want to get the type of the return value of `ColorModel()` how do?
42724;well the concrete type is `modelFunc`
42725;HI gents
42726;in documentation we can have a lot of embeds
42727;how can I send multiple embeds in one message?
42728;could just type switch on the actual image interface to find out specifically which image type it is
42729;Does anyone know any 2d pixel manipulation and graphics libraries
42730;`image`? :P
42731;Does that support drawing shapes in a decently easy way?
42732;https://github.com/llgcode/draw2d is pretty good iirc
42733;thanks mike i'll try that
42734;@superloach I think that's exactly what I was looking for thanks!
42735;no prob :)
42736;Was looking for something sort of similar to processing and p5.js and it follows html canvas conventions so it should be pretty good
42737;None
42738;```go if img.ColorModel() == color.AlphaModel || img.ColorModel() == color.Alpha16Model || img.ColorModel() == color.GrayModel || img.ColorModel() == color.Gray16Model { numberOfChannels = 1 } else if img.ColorModel() == color.CMYKModel || img.ColorModel() == color.NRGBAModel || img.ColorModel() == color.NRGBA64Model || img.ColorModel() == color.NYCbCrAModel || img.ColorModel() == color.YCbCrModel || img.ColorModel() == color.RGBAModel || img.ColorModel() == color.RGBA64Model { numberOfChannels = 4 }```
42739;i'm kinda not thrilled that this is the only solution i could come up with
42740;https://tenor.com/view/dryheavethrowupvomitgrossewgif4726988
42741;you could iterate over the results of method calls then compare them maybe @Wisp
42742;instead of doing img.ColorModel() a million times
42743;as in `model := img.ColorModel()` and then `model == color.xxxModel`?
42744;that's just lipstick
42745;not necessarily
42746;idk I feel like you could use iteration to minimize lines used
42747;if not maybe you could just use a wrapper function for all the conditional (put in a seperate package) jank you have there which you can invoke so you minimize line count in main.go
42748;i guess
42749;I mean it's not that bad yet
42750;```goswitch img.ColorModel() {case color.AlphaModel color.Alpha16Model ...:case color.NRGBAModel color.NRGBA64Model ...:}```
42751;yeah it seems like that should work doesn't it?
42752;oh. wait. does golang not fall through switch cases?
42753;Nope. There's `fallthrough` but it's not implicit.
42754;dammit!
42755;You can list multiple in a commaseparated list like I have here.
42756;aaaand that worked
42757;i had tried this:```go switch img.ColorModel() { case color.AlphaModel: case color.Alpha16Model: case color.GrayModel: case color.Gray16Model: numberOfChannels = 1 case color.CMYKModel: case color.NRGBAModel: case color.NRGBA64Model: case color.NYCbCrAModel: case color.YCbCrModel: case color.RGBAModel: case color.RGBA64Model: numberOfChannels = 4 }```
42758;thanks all on to my next hurdle
42759;What‚Äôs the best way to generate a hash for something while supplying your own salt? I would use bcrypt but it generates its own salt
42760;A salt is typically just additional information that's part of what's getting hashed. Have a format supply a salt wherever in that format then hash it.
42761;Also would be curious to know why you would want your own salt in addition to what bcrypt is already providing?
42762;I want to use my salt instead of what bcrypt is generating so it would be possible for 2 hashes to be the same
42763;That's the exact opposite purpose of bcrypt. üòõ
42764;yep lol
42765;so you don't want a salt üòõ
42766;why use a salt at all then? the purpose of the salt is to produce more uniq values.
42767;_at all_
42768;big brain crypto :kek:
42769;this is probably a dumb question but hwo do i stop my error from a custom function from printing like this `&{ForbiddenOperationException Invalid credentials. Invalid username or password. 403 <nil>}` with the &{} around it
42770;`err.Error()`
42771;how exactly are you returning it though as an `error` or as the concrete type?
42772;well
42773;when theres an error the function returns an Error struct rather than an actual error i guess? that might be why
42774;what does the function returning the error look like
42775;"```gofunc (a Account) Validate(username string password string) (ValidationResponse Error) { authRequest := &ValidationRequest{ Agent: Agent{ Name: Minecraft"", Version: 1}, Username: username, Password: password, RequestUser: true, } response err := utils.Post(authServer /authenticate authRequest) if err != nil { return nil &Error{FuncError: err} } body err := ioutil.ReadAll(response.Body) if err != nil { return nil &Error{FuncError: err.Error} } defer response.Body.Close() if response.StatusCode != 200 { var responseErr Error err = json.Unmarshal(body &responseErr) if err != nil { return nil &Error{FuncError: err} } responseErr.StatusCode = response.StatusCode return nil responseErr } var validationResponse ValidationResponse err = json.Unmarshal(body &validationResponse) if err != nil { return nil &Error{FuncError: err} } return validationResponse nil}```"
42776;okay
42777;so you're not returning `error`
42778;trap question: is there a performance difference between decode and unmarshal?
42779;you're returning the concrete type
42780;just change your return type to `error`
42781;@shaky https://play.golang.org/p/S7ncbKfMKm
42782;@wormy.go pretty sure they're doing the same things under the hood
42783;then would the error struct be useless?
42784;the API is just different
42785;no
42786;You error struct implements `error`
42787;That's the whole point of custom errors
42788;you can provide custom error types through the common `error` interface
42789;make sure your struct implements error function
42790;in this function we can not see the inner side of Error struct you are creating
42791;"```type Error struct { Error string `json:""error""` ErrorMessage string `json:""errorMessage""` Cause string `json:""cause""` StatusCode int FuncError error}```"
42792;does it have any methods?
42793;that doesnt show if it implements it
42794;https://www.digitalocean.com/community/tutorials/creatingcustomerrorsingo
42795;There is a common `error` interface for a reason
42796;thank you
42797;"```goimport ( fmt"")```syntax error: nondeclaration statement outside function body"
42798;why do i get this?
42799;what's the rest of the code?
42800;"```gopackage p0partAconst MAX_MSG_QUEUE = 500import ( fmt"")```"
42801;just this really
42802;okay
42803;so
42804;the rest are function declarations
42805;don't define things above your import statements
42806;move that const declaration below it
42807;okay i see
42808;and what is the convention for naming consts?
42809;camelcase.
42810;?
42811;yes
42812;I still do capital snake case for certain constants though
42813;Doad you are amazing
42814;:pepeHappy:
42815;yup
42816;He knows
42817;he shoudl
42818;```func makeEvenGenerator() func() uint { i := uint(0) return func() (ret uint) { ret = i i += 2 return }}func main() { nextEven := makeEvenGenerator() fmt.Println(nextEven()) // 0 fmt.Println(nextEven()) // 2 fmt.Println(nextEven()) // 4}```Can someone please help me understand why the output is 0 2 4. My guess was that output should be 2 2 2 because at every instance of ``nextEven()`` i is set to zero and incremented by 2.
42819;You are returning a scoped function
42820;that returned function is not resetting `i`
42821;so each time you call that function it adds 2 to `i`
42822;Question about dependency resolution. Say I have `mymodule` version 2 on the master branch and `mymodule` version 1 on the `v1` branch. If I have `require mymodule v1.3` in my go.mod how does Go know where to find that version? Does it search all the branches for a go.mod file with `v1.3`?
42823;It looks for the tags
42824;Release tags?
42825;git tags yes
42826;Makes sense thanks
42827;@shakuni https://stackoverflow.com/questions/36636/whatisaclosure
42828;thanks @Zluther81  @Doad
42829;Maybe this questions is offtopic here...
42830;I have a go server
42831;listening over HTTPS
42832;inside a docker container
42833;and I can't access it from the host.
42834;How can I configure the docker image so I can access my go server inside it?
42835;You have to forward the port when you run the docker container. Use the `p` flag
42836;> @wormy.go pretty sure they're doing the same things under the hood@Doad Correct except one minor detail. Decoder.Decode will only read a single json value from the reader whereas Unmarshal expects the entire input to be a single object. You can use a single decoder to read multiple json objects from a single stream
42837;Assuming it's listening on port 443 and you want to map it to 443 on your host you would use `docker run p443:443 ...`
42838;Ok I was using `p80:7000`
42839;Clearly wrong...
42840;So that depends on what port your Go server is running on and what port you want to map it to.
42841;that did it. Thanks @tusharsoni1205
42842;@Doad @wormy.go see this example: https://play.golang.org/p/7N23j_7X3Ko
42843;You could use consecutive calls to Decode to unmarshal newline delimited json for example
42844;Whereas Unmarshal will throw an error in your face
42845;Notice my obscure knowledge meatman üôÇ
42846;```package commandlinearguments imports src/utils imports src/structs imports src/utils: import cycle not allowed```
42847;why am i getitng this? i thought it was because i imported a pacgaes own package but i didnt
42848;compiler is mad at you. Having packages for structs and utils doesn't work well in Go
42849;utils is importing structs
42850;structs is importing utils
42851;Not allowed
42852;o
42853;whyu
42854;You're only allowed to import one way
42855;it workef earlier
42856;og
42857;ph
42858;oh
42859;@Sgt_Tailor you have been noticed senpai
42860;üòÑ
42861;`utils` and `structs` packages give off code smell
42862;read this
42863;?go layout
42864;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
42865;so if im using the account type in its own file i need the & or the  right?
42866;Elaborate on the context?
42867;If you need an instance of that type to be a pointer then sure
42868;well neither worked but here
42869;data := []Account{}
42870;before it was `data := []structs.Account{}`
42871;those are completely different
42872;one is a slice of pointers
42873;one is a slice of values
42874;the package has nothing to do with that difference
42875;no the star was me trying to fix an error
42876;but i think ik the issue
42877;one sed
42878;yeah i fixed it it was because i had a variable named Account so it messed ip
42879;Hi there I have a go API & Vue frontend Im wondering how I can obtain (in the API) the current user details i.e if the user is logged in and what there name is for example
42880;I have seen people store cookies but not sure how this would be implemented
42881;Currently when the user logs in the api sends back a token and all subsequent requests are sent with the token
42882;if you're using JS you can use Local Storage and slowly reinvent cookies as you go
42883;So for example user logs in and send back a unique string to vue and stores it in local storage or a cookie
42884;There are two choices really. JWT tokens style storage or server side sessions with an cookie containing a session id
42885;if im looping through an array whats the best way to delete the element that im currently on
42886;How do I then obtain user info with that cookie?
42887;Thanks @Sgt_Tailor  I was looking into session storage and got something basic together but cant figure out the inner workings before I code it up
42888;"Is in server``` store := cookie.NewStore([]byte(""secret"")) r.Use(sessions.Sessions(""session store))```Is in serving frontend:``` session := sessions.Default(g) session.Set(""auth 2)``` ( for example )"
42889;You store the session details somewhere. Either in a DB or something like redis/memcached
42890;there is a use case for server side sessions using JWT too
42891;Tie a token to a userid. Then you know who is who
42892;it's especially useful if you want additional information be part of the token in a secure way that can be read by other stuff without another roundtrip request
42893;So the cookie or local storage becomes irrelevant if can store it in a session?
42894;the cookie or local storage is used to store the session token inside the client's machine
42895;You have to tie the user request to a session on the server side. You use the cookie to do that
42896;the cookie contains a unique identifier
42897;Ohhhh ok
42898;That makes sense
42899;I can just md5 the users id as you said right?
42900;The identifier should be _random_
42901;Do not calculate it from anything that can be predicted
42902;Because then when I know your userid I can just md5 it and hijack the session
42903;Is there an encrypt package I could use then? To decrypt the identifer to get the id>
42904;1) generate a random ID2) store the UserID <> SessionID link somewhere3) Send the SessionID as a cookie
42905;then when the client sends a request:1) Read the cookie value2) Lookup the UserID3) you no know who it is
42906;OK amazing thank you so much
42907;That is when using server side sessions. JWT is different and there are plenty of resources available about both constructions üôÇ
42908;Number 2) on the first bit that can be a session or a db right?
42909;@shaky https://github.com/golang/go/wiki/SliceTricks
42910;i did it
42911;thank you
42912;What do you mean with session? It should be stored in some form of database. Can be sql redis memcached etc etc
42913;Ok gotcha I thought you could use it just with a session
42914;what is a session'?
42915;https://github.com/gincontrib/sessions
42916;That is an implementation of what I just explained
42917;notice how they have a Redis and memcached interface
42918;I recommend manually doing sessions yourself
42919;Ok point taken makes sense
42920;This might work?
42921;"```create table UserSession ( SessionKey text primary key, UserID int not null  Could have a hard references User"" LoginTime <time type> not null, LastSeenTime <time type> not null)```"
42922;Then the cookie is the Session Key?
42923;that works ig yeah
42924;Ok great
42925;I usually keep a session key (token) user ID and last seen time
42926;One more thing! Haha thanksCan go (gin) set a cookie in the browser? Or does js have to do it?
42927;actually nah I have a lot more
42928;"```sql CREATE TABLE sessions ( id INTEGER PRIMARY KEY, username TEXT REFERENCES users(username) ON UPDATE CASCADE ON DELETE CASCADE, authtoken TEXT NOT NULL UNIQUE, deadline INTEGER NOT NULL  unixnano useragent TEXT NOT NULL );```"
42929;"I saw this: ``` router := gin.Default() router.GET(""/cookie func(c gin.Context) { cookie err := c.Cookie(""gin_cookie"") if err != nil { cookie = NotSet"" c.SetCookie(""gin_cookie test 3600 / localhost false true) } fmt.Printf(""Cookie value: %s \ cookie) }) router.Run()```"
42930;> Can go (gin) set a cookie in the browser? Or does js have to do it?headers are set using HTTP headers
42931;the browser sees the header and sets it
42932;it will then send the stored cookies on each request
42933;this is all automated by the browser itself without any JS
42934;though you may have to change some settings in fetch() for it to work in JS iirc
42935;like a boolean can't remember
42936;Ok sht learning alot haha so I dont actually have to do anything js side?
42937;Session Cookie should be marked as httponly so it's not available to JS
42938;Js should not be able to read your sessions tokens. (Let's not get into JWT here)
42939;"Doing this:``` cookie err := g.Cookie(""gin_cookie"") if err != nil { cookie = NotSet"" g.SetCookie(""gin_cookie test 3600 / localhost false true) }```"
42940;But not seeing anything in chrome
42941;https://stackoverflow.com/questions/34558264/fetchapiwithcookie
42942;"```jsfetch(url { credentials: sameorigin"",})```"
42943;@Ainsley did you set the cookie before writing the body?
42944;a cookie is a HTTP header so you'll need to write that before you write the body
42945;Hmm sorry not sure what you mean
42946;When the user logs in im just executi ng that code ^ to see if it gets stored in chrome?
42947;Ahh but my axios request needs to accept cookies
42948;Which I guess is what your trying to say
42949;that code doesn't tell if the cookie is stored in Chrome or not
42950;Sorry a bit confusing haha
42951;it tells if Chrome is sending the cookies properly
42952;to check the former inspect the request in Inspector
42953;check the Cookies tab
42954;also just leave the host empty iirc
42955;"```go // If we have a new session then send it over. if !s.IsZero() { http.SetCookie(w &http.Cookie{ Name: token"", Value: s.AuthToken, Path: /"", Expires: time.Unix(0 s.Deadline), SameSite: http.SameSiteStrictMode, }) }```"
42956;my code
42957;Yeah I was about to say your setting thr domain to local host so the cookie would only be sent to http:// localhost
42958;btw Chrome will only send over the key and value
42959;which is annoying
42960;"`axios.defaults.withCredentials = true;`?"
42961;I thought it would send over the full cookie information including the expiry stamp but that was not the case
42962;no idea what that is
42963;https://stackoverflow.com/questions/43002444/makeaxiossendcookiesinitsrequestsautomatically
42964;prob
42965;try it
42966;I don't often use JS frameworks
42967;js stinkyyyyyy
42968;```Access to XMLHttpRequest at http://127.0.0.1:8080/api/v1/login from origin http://localhost:8080 has been blocked by CORS policy: Response to preflight request doesn't pass access control check: The value of the AccessControlAllowOrigin header in the response must not be the wildcard  when the request's credentials mode is include'. The credentials mode of requests initiated by the XMLHttpRequest is controlled by the withCredentials attribute.```
42969;This didnt happen before adding the cookie
42970;Sorry
42971;The withCredentials shizzle
42972;You're trying to send and XHR request from a different origin. Did you open the page bu visiting http://localhost or http://127.0.0.1
42973;yeah that's why you don't fill up the domain
42974;I once had like a ~50LOCish conditional mess trying to find the right domain by reading all sorts of headers
42975;that was dumb
42976;how does this work? how is `email Email` being defined before `type Email string`
42977;I later learned that you could just leave Domain empty
42978;and also how does `type Email string` work? is it like an alias?
42979;for `string`
42980;That
42981;`Email` is its own type that is a string but it's not an alias
42982;@misterturtle is a very godo point than upi
42983;this is an alias: `Email = string`
42984;thankyou
42985;got it
42986;order of top level definitions does not matter
42987;How do you mock in tests? One solution I saw is to create an interface an empty struct that implements the interface and has method with the logic and then in test the mock implements the same interface.
42988;"Still cant set this cookie :(``` g.SetCookie(""cookieName name 3600 / http://127.0.0.1:8080 true true) ```"
42989;@SirRFI read this
42990;?go layout
42991;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
42992;it covers that concept a bit
42993;it's very powerful
42994;@Ainsley just leave host empty
42995;for example if you want to test your http routes but not your services you can use mock services
42996;if you don't see it in my cookie setting code it's because it's empty
42997;Left it empty but still not there
42998;curl v and paste the headers
42999;can someone explain what is meant by interfaces are implemented implicitly
43000;"```gopackage mainimport fmt""type I interface { M()}type T struct { S string}// This method means type T implements the interface I,// but we don\'t need to explicitly declare that it does so.func (t T) M() { fmt.Println(t.S)}func main() { var i I = T{""hello""} i.M()}```"
43001;this code
43002;it is as the rest of the comment said
43003;i dont understand what is meant by the type T implements the interface I
43004;"```Request URL: http://127.0.0.1:8080/api/v1/loginRequest Method: POSTStatus Code: 200 OKRemote Address: 127.0.0.1:8080Referrer Policy: noreferrerwhendowngradeAccessControlAllowCredentials: trueAccessControlAllowHeaders: accesscontrolalloworigin ContentType ContentLength AcceptEncoding XCSRFToken Authorization accept origin CacheControl XRequestedWith tokenAccessControlAllowMethods: POST OPTIONS GET PUTAccessControlAllowOrigin: ContentLength: 379ContentType: application/json; charset=utf8Date: Fri 11 Sep 2020 19:02:28 GMTAccept: /AcceptEncoding: gzip deflate brAcceptLanguage: enAccessControlAllowOrigin: Connection: keepaliveContentLength: 55ContentType: application/json;charset=UTF8Host: 127.0.0.1:8080Origin: http://127.0.0.1:8080Referer: http://127.0.0.1:8080/admin/loginSecFetchDest: emptySecFetchMode: corsSecFetchSite: sameorigintokenUserAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_16_0) AppleWebKit/537.36 (KHTML like Gecko) Chrome/85.0.4183.102 Safari/537.36```"
43005;LIKE
43006;T has the M method
43007;it looks like an interface is being assigned a struct of type T?
43008;Using
43009;"``` http.SetCookie(g.Writer &http.Cookie{ Name: token"", Value: hello"", Path: /"", Expires: time.Unix(0 10), SameSite: http.SameSiteStrictMode, })~```"
43010;there's no set cookie header there
43011;interface `I` declares it has method `M`
43012;oh
43013;anything with method `M` implicitly implements interface `I`
43014;0,10 is in the past
43015;that's like 1970
43016;Hahah that wont work üòÜ
43017;you can omit expiry rn
43018;> anything with method `M` implicitly implements interface `I`@Doad sot hat means if i have a struct with method M it implictly implement interface I
43019;but what is meant by `implements interface I`
43020;it means you can use your type as that interface
43021;@R4BB1T The way I understand it: Explicit implementation is like something implements someInterface and then you\'re forced to have something meet the requirements. Otherwise it won\'t work. Implicit is the other way around  something implements someInterface automatically when it meets the requirements otherwise it just doesn\'t and no big deal.Someone please confirm
43022;Other parts of your code can use that interface without worrying what underlying implementation it has
43023;Just that whatever it is it has those methods
43024;how can i make my function have an optional boolean return value?
43025;or i guess i can return an error but idk how to make it return only one value
43026;Nah still not working
43027;> @R4BB1T The way I understand it:>  Explicit implementation is like something implements someInterface and then you\'re forced to have something meet the requirements. Otherwise it won\'t work.>  Implicit is the other way around  something implements someInterface automatically when it meets the requirements otherwise it just doesn\'t and no big deal.> > Someone please confirm@SirRFI so here the implicit requirement is that the struct must have the method with the same name as the interface method
43028;no header?
43029;@shaky why does it need to be optional
43030;there are no optional return values
43031;well you know how functions have errors that return if theres an error
43032;i want mine to be the same
43033;you want to set it to `nil`?
43034;yes
43035;"Thething I can see with regards to cookies with axios is ```axios.defaults.withCredentials = true;``` which is what ive done"
43036;igdg
43037;sd
43038;fg
43039;g
43040;oops
43041;sotrry
43042;you can use a pointer to a bool
43043;kinda terrible
43044;but you can
43045;but again _why_ do you want it to be optional
43046;ill just use error and nil
43047;```gotype KeyValueServer interface { Start(port int) error CountActive() int CountDropped() int Close()}type keyValueServer struct {}func (kvs keyValueServer) Close() {}```so here can i say that the `KeyValueServer` interface is implictly implemented by `keyValueServer` struct
43048;nope
43049;because `keyValueSender` doesn't have all of those methods
43050;it only has `Close()`
43051;@Ainsley check the raw request first
43052;so it must have ALL the functions
43053;skip the JS for now
43054;A type needs to have all the methods of an interface to satisfy it
43055;not just a few
43056;An interface describes behavior
43057;jump into the JS once you've confirmed that the browser did indeed receive and store the cookies
43058;if your type does not have that behavior it does not satisfy that interface
43059;so the type needs to have atleast the same functions to implicityl implement it
43060;yup
43061;ok im sorry im just dumb how do i make the error return nil if there isnt one
43062;Return nil
43063;structs\\structs.go:166:3: not enough arguments to return have () want (error)
43064;Are you definitely returning nil?
43065;@_diamondburned_
43066;and is it alwasy taht the interface method does not have an implementation provided for its method
43067;"```AccessControlAllowCredentials: trueAccessControlAllowHeaders: accesscontrolalloworigin ContentType ContentLength AcceptEncoding XCSRFToken Authorization accept origin CacheControl XRequestedWith tokenAccessControlAllowMethods: POST OPTIONS GET PUTAccessControlAllowOrigin: ContentLength: 306ContentType: application/json; charset=utf8Date: Fri 11 Sep 2020 19:12:59 GMTAccept: /AcceptEncoding: gzip deflate brAcceptLanguage: enAccessControlAllowOrigin: Connection: keepaliveContentLength: 26ContentType: application/json;charset=UTF8Host: 127.0.0.1:8080Origin: http://127.0.0.1:8080Referer: http://127.0.0.1:8080/admin/loginSecFetchDest: emptySecFetchMode: corsSecFetchSite: sameorigintokenUserAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_16_0) AppleWebKit/537.36 (KHTML like Gecko) Chrome/85.0.4183.102 Safari/537.36```"
43068;@R4BB1T interfaces describe behavior not implementation
43069;"in my parts that have errors i do `return errors.New(""error"")` and at the end (if theres no errors) i do return nil"
43070;show the function
43071;there is a path where you aren't returning anything
43072;> @R4BB1T interfaces describe behavior not implementation@Doad can you clarify what is meant by `behaviour` i am assuming `implementation` is the body of the function which is defined uniquely by another type that includes all the same methods as the interface
43073;@Ainsley there is no set cookie in the response headers are you expecting it to be there?
43074;It just describes what methods are available with what parameters and return values they have
43075;That's the whole idea of an interface
43076;@Ainsley still no SetCookie seen
43077;unless the browser isn't reporting it right
43078;in which you should use curl v to doublecheck
43079;@shaky yes return nil
43080;ok i see thanks @Doad !
43081;Interfaces are like using USB. Your computer doesn't actually give a shit what's on the other end of the cable. It just has a predetermined way of passing data around and it lets things on either end care about what's actually inside that data
43082;tbf
43083;it also represents the uglies of USBC
43084;that is the addition of pins until it's beyond countable
43085;"Woul it have to do with my cors?``` g.Writer.Header().Set(""AccessControlAllowOrigin "") g.Writer.Header().Set(""AccessControlAllowCredentials true"") g.Writer.Header().Set(""AccessControlAllowHeaders accesscontrolalloworigin ContentType ContentLength AcceptEncoding XCSRFToken Authorization accept origin CacheControl XRequestedWith token"") g.Writer.Header().Set(""AccessControlAllowMethods POST OPTIONS GET PUT"")~```"
43086;I don't think so but you could try commenting that out
43087;just
43088;check curl v
43089;skip over all the CORS stuff and check if the server is even serving the cookie properly
43090;"```> GET /api/v1/login HTTP/1.1> Host: 127.0.0.1:8080> UserAgent: curl/7.64.1> Accept: /> < HTTP/1.1 404 Not Found< AccessControlAllowCredentials: true< AccessControlAllowHeaders: accesscontrolalloworigin ContentType ContentLength AcceptEncoding XCSRFToken Authorization accept origin CacheControl XRequestedWith token< AccessControlAllowMethods: POST OPTIONS GET PUT< AccessControlAllowOrigin: < Date: Fri 11 Sep 2020 19:17:58 GMT< ContentType: text/html; charset=utf8< TransferEncoding: chunked```Is curl v to localhost"
43091;Also side note wildcard cors policy is a security nono
43092;why is that 404
43093;Sorry thats a get
43094;Its after a post I assume
43095;oh yeah
43096;X POST
43097;With parameters for the login
43098;:)
43099;yea
43100;`F username=stuff F password=stuff` iirc
43101;Gettin some strange validation stuff although its present
43102;:Thonk:
43103;wdym
43104;"{""status"":401,""message"":""Validation failed"",""error"":true,""data"":{""Offset"":2},""meta"":{""request_time"":""20200911 19:22:20.523446 +0000 UTC""}}%"
43105;Ok this works on firefox lol
43106;Maybe try with data username=user&password=pwd instead of F
43107;Also could be the content type
43108;None
43109;Ah sweet
43110;paste command you used
43111;also bruh status code in JSON body
43112;I never understood why some APIs have error codes in their JSON error messages
43113;it's so weird
43114;This is the curl
43115;"```> GET /api/v1/login HTTP/1.1> Host: 127.0.0.1:8080> UserAgent: curl/7.64.1> Accept: /> < HTTP/1.1 404 Not Found< AccessControlAllowCredentials: true< AccessControlAllowHeaders: accesscontrolalloworigin ContentType ContentLength AcceptEncoding XCSRFToken Authorization accept origin CacheControl XRequestedWith token< AccessControlAllowMethods: POST OPTIONS GET PUT< AccessControlAllowOrigin: < Date: Fri 11 Sep 2020 19:17:58 GMT< ContentType: text/html; charset=utf8< TransferEncoding: chunked< ```"
43116;Why isnt working in chrome though?
43117;Not sure why thats a 404
43118;what's the command you used
43119;it's not in curl probably because you did a GET
43120;paste command though
43121;curl X POST email=email&password=password http://127.0.0.1:8080/api/v1/login
43122;`curl X POST data email=email&password=password http://127.0.0.1:8080/api/v1/login`
43123;"Nah üò¶ {""status"":401,""message"":""Validation failed"",""error"":true,""data"":{""Offset"":1},""meta"":{""request_time"":""20200911 19:29:58.318088 +0000 UTC""}}%"
43124;paste whole thing pls
43125;command headers and body
43126;"Request URL: http://127.0.0.1:8080/api/v1/loginRequest Method: POSTStatus Code: 401 UnauthorizedRemote Address: 127.0.0.1:8080Referrer Policy: noreferrerwhendowngradeContentLength: 306ContentType: application/json; charset=utf8Date: Fri 11 Sep 2020 19:23:25 GMTAccept: /AcceptEncoding: gzip deflate brAcceptLanguage: enConnection: keepaliveContentLength: 26ContentType: application/json;charset=UTF8Host: 127.0.0.1:8080Origin: http://127.0.0.1:8080Referer: http://127.0.0.1:8080/admin/loginSecFetchDest: emptySecFetchMode: corsSecFetchSite: sameorigintokenUserAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_16_0) AppleWebKit/537.36 (KHTML like Gecko) Chrome/85.0.4183.102 Safari/537.36{email:  password: }email:"
43127;This is all very confusing
43128;Sorry yeah it is
43129;Firefox is fine
43130;"SetCookie locality=here; Path=/; Expires=Fri 11 Sep 2020 20:24:44 GMT; MaxAge=50000; HttpOnly"
43131;GOT IT
43132;```Secure: false``` Needed to be set
43133;Not running on https
43134;Thank you so much @misterturtle
43135;@_diamondburned_
43136;Beer time now
43137;sure np
43138;how do i return error
43139;wdym
43140;you return one
43141;yeah just return lol
43142;`return err`
43143;`return ErrUhOh`
43144;but when i dont return the error for the code tjay works it says i need to return somethign
43145;"`return errors.New(""oh no an oopsie whoopsie happened"")`"
43146;`return nil`
43147;^
43148;structs\\structs.go:166:3: not enough arguments to return have () want (error)
43149;show the function
43150;return nil bro
43151;i did
43152;show the function
43153;its over 2000 cgaracters
43154;2000 characters? or lines
43155;post it in the go playground or a hastebin link
43156;ok
43157;if you're function has 2000 lines you need to do some refactoring
43158;https://hastebin.com/ajanesujed.php
43159;characters
43160;lo
43161;l
43162;look at line 52 there
43163;You just have `return` without anything else
43164;that's your problem
43165;oh
43166;thank you im sorry im dumnb
43167;it's fine we all start somewhere
43168;:PES_Blush:
43169;hi
43170;how I can fix https://play.golang.org/p/ACmCGYDGNGf ?
43171;I don't think you can
43172;this seems to be the parser's fault
43173;uh
43174;Really?
43175;well you can use another parser library or manipulate the input string
43176;the thing is `MST0700` is kind of redundant
43177;`MST` tells you `0700` and `0700` sort of tells you `MST`
43178;but the Parse function can't seem to do `MST0700`
43179;if you take off the UTC part itll add it at the end
43180;it can do `MST 0700`
43181;"```gofunc main() { fmt.Println(time.Now()) date := Sep 12 2020 14:00:00 +0000"" t err := time.Parse(""Jan 02 2006 15:04:05 0700 date) if err != nil { fmt.Println(""parse error err.Error()) } fmt.Println(t)}```prints `20200912 14:00:00 +0000 UTC`"
43182;I can't remove MST
43183;I have to parse `Sep 12 2020 14:00:00 GMT+0000`
43184;can't change
43185;"is `""Jan 02 2006 15:04:05 MST0700""` always going to have MST?"
43186;a hacky solution would be to strings.Replace it away
43187;MST is the golang format
43188;oh oops
43189;I meant the GMT
43190;I didn't decide it
43191;then whats the time from?
43192;a site
43193;you can remove the last five characters and just have Sep 12 2020 14:00:00 GMT and it works?
43194;Just remove the last 5 chars
43195;I said if you don't decide it then you can use string manipulation to make it valid
43196;Ez parse
43197;Oh shaky said it first
43198;I can do `Jan 02 2006 15:04:05 MST`
43199;which is in and of itself a workaround
43200;but if I use CEST time
43201;doesn't work
43202;Why not
43203;give me a way to parse all datetimes
43204;??
43205;Why cant it parse CEST
43206;with `Jan 02 2006 15:04:05 MST` GMT works CEST no
43207;with `Jan 02 2006 15:04:05 MST0700` CEST work GMT no
43208;Link proof
43209;https://play.golang.org/p/jr5DySM155l
43210;werks fer me
43211;Same worked for me
43212;I wonder if you even need to slice the offset off
43213;ok you do
43214;How I can slice the offstet off
43215;Its a string
43216;Chop it off
43217;^
43218;`str[:len(str)5]`
43219;len check first
43220;if len < 5 { return errinvalid }
43221;shaky suggestion worked :PES_Cool:
43222;Genius shaky
43223;let me test
43224;has anyone tried setting a few buttons over a textinput widget and have them show when hovering in gtk?
43225;also does anyone know how extensive the css support is?
43226;CSS is spotty but is decent enough 80% of the time
43227;> has anyone tried setting a few buttons over a textinput widget and have them show when hovering in gtk?what the
43228;why?
43229;what do you mean? @_diamondburned_
43230;i mean it sounds like a complex and unnecessary behavior but i'd like it that way
43231;why are you doing that
43232;what are you trying to accomplish w/ that
43233;clean ui
43234;wut
43235;when hovering over the textinput
43236;if that wasn't clear enough
43237;it's not clear to me
43238;I still don't know what you're doing
43239;what isn't
43240;have a textinput have 3 buttons
43241;3 buttons should be over the input (one part not the entire thing) when you hover over the textinput
43242;use a gtkoverlay an event box and a revealer
43243;that sounds like a bad idea though but you can try
43244;why bad idea
43245;from the user perspective or dev?
43246;both
43247;dev: it's needlessly complicated
43248;user: the buttons will cover a section of the text area and there are too many things needlessly changing
43249;it will cover it only if it's hovering
43250;but yeah i guess that's a good point i forgot about
43251;moving the cursor over the app will make all sorts of hovers
43252;then a conventional button next to the text input
43253;what buttons are you going to put
43254;and a dropdown menu once clicked
43255;and what is this textview for
43256;entering text
43257;i guess
43258;what text for what
43259;a note table title and board title
43260;entering text is the most generic description you could ever get for something named textview
43261;might want to use a gtkentry for that
43262;i'm trying to make a kanban board app
43263;yeah i think i did
43264;can they resize dynamically?
43265;width yeah
43266;height don't think so
43267;entries are singleline only
43268;you need textviews for multilines
43269;textview then
43270;i'd like to replicate this
43271;i made this thinking i'd use it with go's webview but then gave up eventually realizing it'd be a bit difficult passing JSON to js and back
43272;None
43273;those looks like entries
43274;i don't see anything multilineable
43275;it's not
43276;it's a div with `contenteditable`
43277;I'm sorry I don't speak JS frameworks
43278;is that a <textarea>?
43279;no
43280;it's a div
43281;it's not a framework
43282;it's vanilla js
43283;It's vanilla html
43284;https://developer.mozilla.org/enUS/docs/Web/Guide/HTML/Editable_content
43285;oh yeah i guess that's part of HTML but i only used vanilla JS for scripting
43286;"```<div spellcheck=""false class=""noteText notDone contenteditable="""">Change this note.</div>```"
43287;oh so it is multiline
43288;yes
43289;that's about the simplest way to achieve dynamic resizing with HTML
43290;yeah use a textview then
43291;yep
43292;also what layout do you suggest for the tables?
43293;a table should go into the next row once there's no more space for it in the current one
43294;for a kanban I'd say use a box to contain the smaller lists and use a list to contain each kanban item
43295;I wouldn't call it a table tbh
43296;eh whatever the name is
43297;i mean what gtk layout would move the table in the next row automatically
43298;not sure what you mean
43299;got pics?
43300;sure
43301;None
43302;4 tables in one row once you create the 5th one it should go into the next row
43303;what layout in gtk allows that?
43304;if my function has a line that runs itself will it continue where it left off after the function runs itself?
43305;gtkflow maybe
43306;> if my function has a line that runs itself will it continue where it left off after the function runs itself?if so how can i stop that?
43307;https://github.com/gotk3/gotk3/blob/master/gtk/gtk_since_3_12.go#L184
43308;?
43309;wait wrong link
43310;yeah flowbox
43311;ok cool
43312;@shaky return afterwards
43313;thanks
43314;yeah np
43315;the word you're looking for is recursion btw
43316;do you have any projects with gtk on your github/gitlab/whatever?
43317;i'd like to see how you organized your code
43318;https://github.com/diamondburned/cchatgtk
43319;https://github.com/diamondburned/lsocoverlay
43320;thanks
43321;np
43322;there's also https://github.com/diamondburned/gtkcord3 but its package layout isn't as good as I wanted it to be
43323;i tried already making this in gotk3
43324;wasn't going as bad as i thought but i messed up the way i organized the code a lot
43325;abandoned it tried nodegui (nodejs + qt) but it doesn't seem as flexible with what you can do as gtk does
43326;I used interfaces a lot
43327;the way I have components (separate packages) communicate w/ each other is through interfaces
43328;i'll need to check that out
43329;i don't think i've ever used interfaces for this purpose
43330;you'll see a lot of `${thing}Controller` interfaces all around my code
43331;and yeah that's when i was met with an import cycle slap for the first time
43332;this also avoids cyclical dependencies
43333;yeah
43334;parent packages can both refer children packages while still allowing them to have control over the parent
43335;it's also quite explicit on what the children packages can control too since that's well defined in the interfaces
43336;is there a way to add verbosity to `go build`?
43337;go build v
43338;probably
43339;not sure what kind of verbosity you need here
43340;You can provide LDFlags to show what the compiler and linker do as well if you wanted to
43341;no idea why it's taking so long to build the old gtk project
43342;looks like it's redownloading gotk3 for some reason
43343;yeah it's probably recompiling gotk3
43344;or not wouldn't it just say it's not there?
43345;check htop
43346;oooh
43347;if there's a cc1 then that's likely the case
43348;```$ go build v . github.com/gotk3/gotk3/gtk```
43349;it doesn't help that go build's cgo thing only does work in a single thread
43350;yep
43351;27% max cpu usage by the looks of it
43352;oh 100% but only one thread yeah
43353;update 3 days ago to the repo may have caused it
43354;yeah
43355;I usually versionlock my gotk3
43356;at least until I need something new
43357;I have also made some PRs to gotk3 btw
43358;this is taking too long i'll continue tomorrow
43359;gotta go to bed now
43360;thanks for your help again üôÇ
43361;bye
43362;yeah np
43363;https://discordapp.com/channels/118456055842734083/118456055842734083/754084954803273809 @r3velated this is gtk? it looks nice
43364;can you link your code if it's public
43365;that's web iirc
43366;you can make something like that in gtk though provided you're willing to just override the system theme completely
43367;Or use webkitgtk! lol
43368;:owoScream:
43369;gtk4 is supposedly wasmable
43370;that sounds hideous
43371;maybe
43372;but its wasmable
43373;Hi all I have a problem with this code: https://kopy.io/YBg3K run with go run main.go < dfs.in
43374;DFS.in https://kopy.io/c6xNs
43375;what is this paste i barely can ready it üò¶
43376;how do I disable highlighting
43377;I will post here but it will be a big one
43378;"```gopackage mainimport fmt""type Node struct { Value int Left Node Right Node}func main() { var N int fmt.Scanf(""%d &N) fmt.Println(""N is... N) var nodes []Node = make([]Node N) for i := 0; i < N; i++ { var val indexLeft indexRight int fmt.Scanf(""%d %d %d &val &indexLeft &indexRight) fmt.Println(val indexLeft indexRight) nodes[i].Value = val if indexLeft >= 0 { nodes[i].Left = &nodes[indexLeft] } if indexRight >= 0 { nodes[i].Right = &nodes[indexRight] } } for _ node := range nodes { printNode(&node) }}func printNode(n Node) { fmt.Print(""Value:  n.Value) if n.Left != nil { fmt.Print( Left n.Left.Value) } if n.Right != nil { fmt.Print( Right: n.Right.Value) } fmt.Println()}```"
43379;just use a pastebin that was made by someone who understands contrast
43380;It seems to fail reading the DFS.in file it reads something like this from what I can tell ```N is... 50 0 01 1 10 0 03 1 10 0 0```
43381;"maybe you need `""%d %d %d\""`?"
43382;unsure but I'd recommend avoiding Scanf
43383;try using bufio.Scanner strings.Field and strconv.Atoi
43384;write a fn for it
43385;Ah thank u it worked
43386;I will note the better packages to use next time
43387;yeah np
43388;> that sounds hideous@deezy for in web sure but once we get better wasi wasmbased desktop apps will be cool
43389;That‚Äôs actually interesting. Electron but wasm
43390;Electron without JS has always been my dream
43391;HTML+CSS and a Cbased (probably) DOM API without JS
43392;what about html+css with a go dom api
43393;I mean that'd be straightforward with cgo and a wellformed c api
43394;then it'd be go only
43395;that's bad
43396;yeah true
43397;but cgo bad too
43398;perhaps a message protocol üëÅÔ∏èüëÅÔ∏è
43399;just have other things interface with the go APIs using cgo
43400;I'd rather deal with cgo
43401;> perhaps a message protocolthat's even worse
43402;says the one using ipc for plugins last I heard
43403;you make a fair point though
43404;hi all. okay so I need to implement an oauth flow suitable for Inoreader API access. The examples I've found didn't seem to apply very well for this case. Inoreader is an RSS feed reader like Feedly or Google Reader. I'm kind of stuck at the part of handling the http requests with HandleFunc etc.
43405;the Inoreader Discord server is pretty dead and it's mostly for enduser support
43406;I know this is kind of a specific problem lol
43407;"IPC for a chat service is fine; IPC for UI control is too much"
43408;yeah that's fair
43409;@hyperreal can you show the part youre stuck on
43410;I'm kinda perplexed on how to tag versions
43411;I've got a v0.1 tag pushed
43412;but pkg.go.dev doesn't seem to want to load it
43413;ahh it needs v(major).(minor).(patch)
43414;I need another 0
43415;@Madxmike Yes one sec
43416;"I have an oauth2.Config defined with the require info. Here are the handlers:```func handleInoreaderLogin(w http.ResponseWriter r http.Request) { url := config.AuthCodeURL(oauthStateString) http.Redirect(w r url http.StatusTemporaryRedirect)}func handleInoreaderCallback(w http.ResponseWriter r http.Request) { content err := getUserInfo(r.FormValue(""state"") r.FormValue(""code"")) if err != nil { fmt.Println(err.Error()) http.Redirect(w r / http.StatusTemporaryRedirect) return } fmt.Fprintf(w Content: %s\ content)}func getUserInfo(state string code string) ([]byte error) { if state != oauthStateString { return nil fmt.Errorf(""invalid oauth state"") } token err := config.Exchange(oauth2.NoContext code) if err != nil { return nil fmt.Errorf(""code exchange failed: %s err.Error()) } response err := http.Get(config.Endpoint.TokenURL + token.AccessToken) if err != nil { return nil fmt.Errorf(""failed to get user info: %s err.Error()) } defer response.Body.Close() contents err := ioutil.ReadAll(response.Body) if err != nil { return nil fmt.Errorf(""failed to read response body: %s err.Error()) } return contents nil}func main() { http.HandleFunc(""/login handleInoreaderLogin) http.HandleFunc(""/callback handleInoreaderCallback) http.ListenAndServe("":8080 nil)```"
43417;"use triple backticks for code blocks ;)"
43418;and what is the actual problem
43419;I also have the oauth state string defined
43420;right now I'm getting 404 error
43421;sorry my working memory is crap today
43422;my brain's working memory that is
43423;maybe it will be better if I put all the code on a pastebin. there are three files
43424;okay here is main.go: https://gitlab.com//snippets/2014318
43425;`authhandlers/base.go`: https://gitlab.com//snippets/2014317
43426;`authhandlers/oauth_inoreader.go`: https://gitlab.com//snippets/2014317
43427;"Okay so I\'ve changed the handler in `authhandlers/base.go` to:```go// New func New() http.Handler { mux := http.NewServeMux() mux.HandleFunc(""/ handleInoreaderLogin) mux.HandleFunc(""/callback handleInoreaderCallback) return mux}```"
43428;"when run it I get to the Inoreader login page but then I get the following error: ```Content: {""error"":""invalid_request"",""error_description"":""The request method must be POST when requesting an access token"",""error_uri"":""http:\\/\\/tools.ietf.org\\/html\\/rfc6749#section3.2""}```"
43429;"earlier I changed the response to a POST request and got a different error:```Content: {""error"":""invalid_request"",""error_description"":""The grant type was not specified in the request""}```"
43430;line 78 of `authhandlers/oauth_inoreader.go` is changed to:```go response err := http.Post(config.Endpoint.TokenURL+token.AccessToken application/json nil)```
43431;I am reeeally sorry for all this spam :/
43432;could I specify the grant type in oauth2.Config?
43433;Is the code exchange failing or is it the subsequent request?
43434;And what is the second request? I don‚Äôt see any reference to the token URL plus the token in a basic gloss over the docs
43435;(I find it very unlikely that your token would ever be in the URL‚Äîthe `Authorization` header is a welldefined standard)
43436;"this is in oauth_inoreader.go:```go response err := http.Post(config.Endpoint.TokenURL+token.AccessToken application/json nil) if err != nil { return nil fmt.Errorf(""failed to get user info: %s err.Error()) }```"
43437;I think it's the POST request that is failing
43438;Is this code you‚Äôve written or is it preexisting?
43439;I'm not sure what you mean. I'm doing this as a learning project. I didn't come up with the code myself I modified it from an oauth2 example.
43440;the original example used a GET request instead of POST hence the earlier error. Now I'm using post
43441;What endpoint are you attempting to call? Could you provide a link to the API documentation?
43442;https://www.inoreader.com/developers/oauth
43443;Okay which endpoint are you attempting to call?
43444;I see `/reader/api/0/userinfo` on that page to get the user info. That doesn‚Äôt at all resemble the endpoint you‚Äôre using there.
43445;the token url is what the post request is trying to do
43446;That‚Äôs what `Exchange` does.
43447;Notice that you have a token returned from `Exchange`‚Äîhow do you think you got that? :p
43448;"```go response err := http.Post(config.Endpoint.TokenURL+token.AccessToken application/json nil) if err != nil { return nil fmt.Errorf(""failed to get user info: %s err.Error()) }```I think I see what you mean. So the url parameter for the above POST request should be the userinfo endpoint?"
43449;wait. I'm not understanding something
43450;It should be a GET.
43451;"it initially was a GET but I got the error I mentioned above:```Content: {""error"":""invalid_request"",""error_description"":""The request method must be POST when requesting an access token"",""error_uri"":""http:\\/\\/tools.ietf.org\\/html\\/rfc6749#section3.2""}```"
43452;...because you were requesting the wrong URL. üòõ
43453;See https://godoc.org/golang.org/x/oauth2#Config.Client
43454;This returns an `http.Client` that automatically authorizes every request with the access token
43455;Hah okay I see now.
43456;facepalm
43457;There‚Äôs an oauth2 package? Cool
43458;Yep! It does autotoken refreshing as well
43459;I keep getting surprised by the convenient go packages haha
43460;There's a package for just about every wellestablished standard to do with systems or networking which is pretty nice üôÇ
43461;(well don't try to hold me to that with counterexamples but it sounded nice hehe)
43462;okay lol it works now @Carson . Thanks!
43463;can someone help me?
43464;"```gopackage mainimport ( fmt"" github.com/bwmarrin/discordgo"" //""time"" strings"" //""strconv"" //""github.com/foolin/pagser"" ./bot"" //""reflect"")var BotID stringvar goBot discordgo.Session/func Compiler(a string) []string{}/func Start() { goBot err := discordgo.New(""Bot  + NzQyNTY1MzI0MzAxMjcxMDcx.XzH92Q.UA7UtpZZt_PXfrjtVuYqidvEkic"")//ÈÄ£Êé•ÊàëÁöÑÊ©üÂô®‰∫∫ if err != nil { fmt.Println(err.Error()) return } u err := goBot.User(""@me"") if err != nil { fmt.Println(err.Error()) } BotID = u.ID goBot.AddHandler(messageHandler) err = goBot.Open() if err != nil { fmt.Println(err.Error()) return } fmt.Println(""Bot is running!"")}func messageHandler(s discordgo.Session m discordgo.MessageCreate) { con := make([]string,3)//conÊòØ‰∏ÄÂÄãÊúâ3‰ΩçÁöÑslice con = strings.Fields(m.Content)//ÈÅáÂà∞Á©∫Ê†ºÊôÇÂàÜÈñã‰æãÂ¶Ç:hello world > [hello,world] if m.Author.ID == BotID { return } if m.Content == ping { _ _ = s.ChannelMessageSend(m.ChannelID,""ping"") } if len(con) == 3{ if con[0] == dansearch && con[1] !=  && con[2] !=  && bot.Crawling(con[1],con[2]) != nil{ d := bot.Crawling(con[1],con[2]) for i := 0;i < len(d);i++{ s.ChannelMessageSend(m.ChannelID,d[i]) } } }}func main() { Start() <make(chan struct{}) return}```"
43465;what is the problem?
43466;"```gopackage botimport ( //""fmt"" log"" net/http"" github.com/PuerkitoBio/goquery"" //""strconv"" //""github.com/bwmarrin/discordgo"")var( a []string b []byte)func Crawling(str string,num string) ([]string){ a = []string{} b = []byte{} response err := http.Get(""https://danbooru.donmai.us/posts?page= + num + &tags= + str) if err != nil { log.Fatal(err) } defer response.Body.Close() document err := goquery.NewDocumentFromReader(response.Body) if err != nil { log.Fatal(""Error loading HTTP response body.  err) } document.Find(""article"").Each(func(i int,e goquery.Selection){ href,exist := e.Attr(""datafileurl"") if exist{ //b = []byte(href)[6:] a = append(a,/string(b)/href + \"") } }) return a}```"
43467;You tell us
43468;What do you expect to happen vs what is actually happening?
43469;Also fyi you just leaked your bot token
43470;also don't concat the url like that
43471;1_000_000?
43472;yw
43473;@_diamondburned_ there are so many more issues than just that
43474;i know
43475;i'm just pointing out what i feel like pointing out
43476;Yessir
43477;> What do you expect to happen vs what is actually happening?@Doad run
43478;Lol
43479;that code run yesterday
43480;i changed nothing
43481;but it doesn't run
43482;What do you mean
43483;It spits out an error blocks forever etc
43484;Elaborate
43485;it's runned sucefully yesterday
43486;error?
43487;ok
43488;First delete your posts
43489;Because you leaked your bot token
43490;ok
43491;hmm
43492;why not change
43493;Security 101: don't post your authentication tokens online
43494;ok
43495;ok
43496;Do whatever just don't post your tokens lmao
43497;i regenerated
43498;ok i forgot
43499;So what happens when you try to build and run this
43500;...
43501;i changed my token
43502;"and now it;s run sucessfully"
43503;Hey all I've dipped my toes in Go a couple of times and I thinking about trying it out again on a project. I mostly work with alternative JVM languages (Kotlin Scala Groovy) and some Rust. The one thing that always seems to catch me up when working in Go is how to model complex domain models. Can anyone recommend a good resource (book video blog) that covers domain modeling in Go?
43504;?go layout
43505;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
43506;security 101: give me ur bank details
43507;@Doad just curious what is a doad ? lol
43508;Froggy friends
43509;froggy friends?
43510;Frog > toad > doad
43511;Qed
43512;Lol
43513;is it normal for a local go server to take 30ms to respond(it‚Äôs an empty response)
43514;not really
43515;profile it and see if that's the problem
43516;usually I'd blame it on the network but try profiling
43517;well it‚Äôs weird because it is basically the example here
43518;https://github.com/gochi/chi/blob/master/_examples/helloworld/main.go
43519;js curl accurate in measuring response times?
43520;depends
43521;it's a good measure for network latency
43522;actually no
43523;no it's not a good measure
43524;what should i be using?
43525;go tool pprof to profile what's slow in Go
43526;ping to check network latency
43527;sending a request to a supposedlyfast endpoint gets you a bunch of mixed signal
43528;maybe DNS was slow
43529;maybe network was slow
43530;maybe Go was actually slow
43531;maybe the kernel decided that Go shouldn't be running rn so that delay might be the context switching
43532;maybe something went wrong during the route that was completely out of your control
43533;"```gofunc (kvs keyValueServer) Start(port int) error { // TODO: implement this! ln err := net.Listen(""tcp strconv.Itoa(port)) if err != nil { fmt.Println(err) } for { conn err := ln.Accept() if err != nil { fmt.Println(err) } kvs.MainRoutine(conn) } return err}```"
43534;why's return err unreachable?
43535;after `for {}` it would get to err right
43536;i mean yeah ok i guess there's a chance for an infinite while there but how do we mitigate this
43537;for never breaks ever
43538;there isn't any statement that would interrupt it even on an error
43539;also you're printing the error and not continuing even
43540;so conn will likely be nil
43541;> there isn't any statement that would interrupt it even on an error@_diamondburned_ got it
43542;> also you're printing the error and not continuing even@cats could you elaborate a bit?
43543;why would it be nil
43544;if err != nil fmt.Println(err) the error says that something went wrong and you shouldn't try to use the connection
43545;ah okay
43546;in case err == nil then it tries that connection when it should
43547;shouldnt
43548;got it
43549;in case when err != nil then it tries that connection yes
43550;```go for { conn err := ln.Accept() if err != nil { fmt.Println(err) // conn is now nil and free to continue to the kvs.MainRoutine call } kvs.MainRoutine(conn) }```
43551;> https://discordapp.com/channels/118456055842734083/118456055842734083/754084954803273809 @r3velated this is gtk? it looks nice@fr3fou it used to be public but then i made it private and removed once i saw how much bad code i wrote. and yeah it's not gtk. gtk seems to follow the system theme
43552;Hello I'm just wondering. When you create objects such as string and struct does Golang allocate the memory needed on the stack or heap?
43553;depends on the usage. The escape analysis dictates where something goes
43554;Hmm so if I were to return a reference to a struct it would be allocated on the heap?
43555;As soon as pointers are involved there is a high chance of it going to the heap. But if you want to know for sure you can add some compiler flags and it will show you the escape analysis
43556;it will probably be on the heap
43557;return a reference to a struct
43558;Neat... I was just thinking since the syntax is so close to C whether Golang treats values like C as well...
43559;nah
43560;C gives you explicit control over where memory is allocated but Go determines that for you using the saidabove escape detector
43561;someone here wrote the current impl too
43562;If for instance I create a struct inside a function scope and manipulate its members without returning it or its reference then it would be allocated on the stack?
43563;Probably
43564;yeah probably lol
43565;try it and see
43566;Thank you for mentioning escape analysis though TIL
43567;No problem üôÇ
43568;yeah np
43569;I'm having plugin problems again lol
43570;"`github.com/gosnart/snart/bot/plug` is loading plugins with `plugin`.I\'ve got another package `github.com/superloach/mapper` that I\'m building with `buildmode=plugin` and having snart load.mapper\'s go.mod shows:``` github.com/gosnart/snart v0.1.1```which is the latest tag on the logbut I get the error:```plugin.Open(""plugs/mapper""): plugin was built with a different version of package github.com/gosnart/snart/log```"
43571;I've tried checking out v0.1.1 before building snart that changes nothing
43572;"```""error"":""Post https://url.com"": malformed HTTP status code not""""```"
43573;i couldnt find much info on this error
43574;hm funky error
43575;looks like url.com is resolving somehow but the response at 443 is not http
43576;either that or you've messed up your http client
43577;about the plugin issue it appears that the main module always gets tagged with version `(devel)` and no sum
43578;is there a way to fix this?
43579;ah do I need the `main` package to be outside the main module? this feels silly
43580;@Deleted User yea youre not getting a http response back
43581;yeah so it looks like the issue is that mapper is getting `v0.1.1` but cmd/snart is getting `(devel)`
43582;@superloach fix
43583;not sure how
43584;aside from putting cmd/snart outside of the module which feels silly
43585;looks like I might need multiple repos again
43586;multiple mods in one repo gets messy quick
43587;> @Deleted User yea youre not getting a http response back@Str≈ìm it works
43588;but i get that error like 10% of the time
43589;then whatever you're requesting isn't giving an http response back 10% of the time :P
43590;weird
43591;yup
43592;Is it a public api or something
43593;yea
43594;public api
43595;Their api bad confirmed
43596;What website
43597;walmart
43598;damn
43599;the frase walmart value API has never been more correct
43600;How do you mock in tests?Yesterday I was recommended Standard Package Layout article ( https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1 ) which also has followup articles. However they focus on application structure rather than the mocking detail I am interested on.I also watched this YouTube video: https://www.youtube.com/watch?v=b13zwMPLklE#t=31m33s  whose steps and reasoning I understand (timestamp at summary). What the author did was:1. Create a (private) struct and assign it to a top level (public) variable of the same name2. Change the package (public) function to be a method of the struct3. Create a (private) interface that is implemented by the struct4. In the test file create a struct for mocking purposes that implements the same interface5. Add a function property to the mock that is then called by the mocked function from the interface so the functionproperty can do whatever we need in specific test
43601;The general idea is that in your application code use interfaces as params instead of concrete implementations. In your test code create a mock version of the interface and pass that in. However I try to minimize this pattern when possible. Mocks are hard to maintain and/or introduce more generated code in some cases.
43602;Something like this  https://play.golang.org/p/9R4B8rdXxhW
43603;feels weird to do it that way
43604;https://play.golang.org/p/uLed8Vb54Xa
43605;this makes the interface the context boundary of the auth package
43606;Yeah I can see why that might be preferable  to keep the interface close to the code that is using it instead of the one that is implementing it.
43607;That makes the interface easier to use as well and is less likely to cause import cycles
43608;It will introduce a lot of repeated interface declarations though. And the mocks might have to be rewritten each time? Unless of course they are being generated
43609;not really
43610;if your code is properly seperated out then your interfaces are based on the use case
43611;a usergetter to your auth package probably has different need then in your ssr package
43612;domain driven design and all that jazz
43613;hmm in the example the `UserGetter` interface might be really common in a decent codebase.
43614;Imagine if the `Reader` interface was not in the `io` package. It feels similar to that.
43615;All callers would have to have their own `Reader`
43616;I think you're overthinking this. How many implementation of the repo will you have?
43617;One?
43618;There will only be 2 implementations  real and mock. But if the interface is on the caller side then the mock would have to be reimplemented each time.
43619;Don't think so. In my own bot I have this abstraction: <https://github.com/svenwiltink/goMusicBot/tree/master/pkg/bot/messageprovider>
43620;multiple message providers implementing one interface
43621;<https://github.com/svenwiltink/goMusicBot/blob/master/pkg/bot/messageprovider.go>
43622;The caller side is asking for an implementation
43623;The other packages implement one
43624;If I were to add tests to the bot package I would add a mock implementation there
43625;Yeah I think I agree with your pattern. If I understand correctly in @Madxmike's example the `MessageProvider` wouldn't exist in your package. The caller would have that interface and pass one of your implementations. Or I could be misunderstanding what @Madxmike was saying.
43626;I would have to see what you're trying to do in a directory structure. You can try and see what feels right. There isn't a single implementation that is best for all scenarios
43627;programming is a lot like carpentry
43628;you may want to build a chair
43629;but there are a LOT of ways you can do it and still have a chair
43630;you could build a recliner a bar stool a high chair a park bench
43631;you could use metal wood stone. you could style it art deco grecoroman gothic
43632;all arguably chairs
43633;its a pretty flat package structure
43634;so
43635;¬Ø\\_(„ÉÑ)_/¬Ø
43636;but yeah
43637;its not hard and fast rules
43638;it's liberating once you internalize it properly. this isn't like rocket science where a .000000001% error means you hit the sun instead of the moon
43639;you have a lot of freedom
43640;yeah best advice would be to try and see what fits in your codebase
43641;it's not EASY advice
43642;but it's good advice
43643;haha in small codebases pretty much any pattern can work. it's the large codebases where some rules are good imo
43644;Confirmed: I give only the best advise
43645;And even within large codebases there are differences üòõ
43646;False
43647;:kkk_hmm:
43648;You're wrong! And because you're right unless I tell you you're wrong: I am correct
43649;checkmate
43650;:kkk_ancry:
43651;It's not Deezy advice but it's good advice
43652;heyyyy
43653;how would I go about having my tests in a separate folder ?
43654;would I be able to do that ?
43655;make a folder write tests in it
43656;import your code
43657;test it
43658;same as any other package
43659;should I name my package the same ?
43660;because I have my main package in the root
43661;two different packages having the same name doesn't sound like a good idea
43662;sounds very confusing
43663;if you want to name them the same thing
43664;it sounds like you want them to all be in the same package
43665;just saying
43666;I'm not sure I want to name them the same
43667;Moving tests to a different directory doesn't sound like a good idea in general. I look for tests right next to the implementation
43668;and yes
43669;the _test.go suffix exists for that
43670;generally you put tests in the same package
43671;should I ? oh okay
43672;but it works exactly the same as any OTHER package
43673;tests aren't special
43674;they're just go code
43675;make a folder pick a package name import some code call it
43676;I thought it was much more complicated than that
43677;that's a common stumbling block in go
43678;expecting this new thing you want to use to have new rules
43679;when it doesn't
43680;99% of what you do is covered in the first 30 pages of the tour
43681;the rest is just learning how to glue and combine those pieces in new ways/layers
43682;Hi Im using logrus for logging out best pratice to use `log.Info(err)` or `log.Info(err.Error)`?
43683;just err
43684;or maybe you want to user Error()
43685;rather
43686;log.WithError
43687;Hi everyone. I am trying to understand Expression evaluation order in golang and I stumbled upon this example:
43688;`x := []int{2 3 5 7 11} t := x[0] var i int for i x[i] = range x {} x[i] = t fmt.Println(x) // [3 5 7 11 2]`
43689;The following example rotates all elements in a slice for one index.
43690;Can someone please explain how is this working internally. Because it's so counter intuitive. Source article: https://go101.org/article/evaluationorders.html
43691;I am a normal human being so a methodological step by step explanation would be really appreciated. Thanks in advance üôÇ
43692;the fuck
43693;`for i x[i]`
43694;as far as i'm aware you shouldn't even be able to do that
43695;It works I checked on Playground.
43696;yes it does
43697;that's why i'm confused
43698;I tried but I am not able to get it. This has been one of the most mind fg golang stuff i have seen so far.
43699;Another one being this:
43700;what the hell is that evil magic
43701;`x := []int{123} x x[0] = nil 456 // will not panic x x[0] = []int{123} 789 // will panic`
43702;so i personally am going to ignore this
43703;Both the examples are from the source article.
43704;because this is weird
43705;weird and excessively spooky
43706;Would have to create a Stack overflow question it seems. zzzz hard work :p
43707;Is it possible to determine if the request (in gin) was made over http or https?
43708;if you care about that it's typically handled at the application boundaries
43709;why do you care
43710;or perhaps why are you trying to handle it in your http handlers
43711;and not at the server level
43712;The http server only binds to a single port anyways. You should be able to pass that context down
43713;cause typically you just say only http or only https with these ciphers and then treat everything equally
43714;The only usecase I can think of is a http to https redirect which would be a single handler for the http server
43715;then the https one handles everything else
43716;and could also be much more easily handled by your reverse proxy
43717;"Hmmmm apologies not 100% sure what you mean was trying to use ` fmt.Println(t.gin.Request.Header.Get(""origin""))` but its blank ovbiouslty"
43718;i mean
43719;you\'re the one who aksed about how do i figure out if a request was http or https
43720;¬Ø\\_(„ÉÑ)_/¬Ø
43721;Don't trust headers anyways
43722;you didn\'t say hey the Origin header in these requests is empty why?
43723;so that's what we talked about
43724;@deezy because I figured that out after I asked haha
43725;it's okay
43726;i'm not busting your balls
43727;Sounds like it
43728;i get that a lot
43729;Not to worry! I'll figure something üôÇ
43730;the question of what you're actually trying to accomplish still stands
43731;but live your truth
43732;Simple
43733;Im trying to retrieve the full url of the page
43734;http:// website.com /page
43735;At the moment I can obtain website.com/page
43736;But not the http part
43737;And now for the real kicker: why is that relevant to your application?
43738;Sure. As the owner of that site you should already know whether you\'re using http or https
43739;so
43740;why don't you
43741;Lol im just making some template functions and thought a handy functionality of the site would be able to retrieve the full url
43742;ahh okay
43743;yeah that's normal
43744;you usually just have a BASE_URL variable
43745;or something
43746;see how Hugo does it
43747;you just set `SITEURL` in your config file or whatever it's called
43748;and it bases all relative paths off that
43749;Could also use absolute urls with just `/whatever`. The client will use the base that it already knows
43750;yep
43751;Ok that makes sense
43752;cheers
43753;actually `//whatever` is appropriate i think
43754;// pulls the current page scheme
43755;i think /whatever defaults to https?
43756;web dev is stupid
43757;Not sure would have to look that up
43758;Quick question about my bot structure again: I organized it as someone here told me before. But now I see no use at all for my service interfaces. As is my bot requires a database (which is just a struct with a sqlx.DB in it) and I give it one.
43759;Should I have the bot require each service?
43760;it'd be ideal for testing sure
43761;but nobody's going to blackbag you for not using interfaces
43762;I just though it would nice because I could potentially plug in some other database or something later and just keep all the same bot code
43763;yeah
43764;that's what interfaces are for
43765;if you want to do that use them
43766;if not don't
43767;Hi guys i'm beginner go programmer (sorry but my english is bad :c ) i'm working with module `go.bug.st/serial.v1/enumerator` my question is possible know when usb device connected to a usb port of my machine?
43768;is it possible? yes. but if you're using this you have to learn how to speak USB
43769;`net.Conn` is a type but `net.Listen` is not?
43770;https://godoc.org/go.bug.st/serial#Port
43771;what do we get from `net.Listen` like `ln err := net.Listen` what is the type of `ln`?
43772;net.Listen is a function
43773;https://golang.org/pkg/net/http/#ListenAndServe
43774;there is no net.Listen()
43775;only ListenAndServe() and ListenAndServeTLS()
43776;both of which have only one return value
43777;There is in the net package üòâ
43778;so i'm not sure what you're referring to
43779;FUCK
43780;sorry
43781;"```goln err := net.Listen(""tcp :8080"")if err != nil { // handle error}for { conn err := ln.Accept() if err != nil { // handle error } go handleConnection(conn)}```"
43782;oh
43783;ok np
43784;yeah i misread
43785;11/10 Deezy xD
43786;so what is the type that `net.Listen` gives
43787;anyways
43788;https://golang.org/pkg/net/#Listen
43789;`func Listen(network address string) (Listener error)`
43790;it's right there in the docs comrade
43791;https://golang.org/pkg/net/#Listener
43792;its called `Listener`
43793;oh
43794;yep and it's documented
43795;aaa
43796;thank you
43797;you do see that
43798;those are hyperlinks
43799;yes YES
43800;thank U
43801;godocs are your friend
43802;The actual implementation is called something else depending on the network provided. But they all implement that interface
43803;> https://godoc.org/go.bug.st/serial#Port@deezy yes i'm trying to research about serial port because the result of func ```gofunc GetDetailedPortsList() ([]PortDetails error)``` array of details of ports contain something like this: `/dev/ttys0.../dev/ttys30`
43804;So i need research about VID & PID?
43805;Sounds like it
43806;You have to learn about raw serial port communication and the USB protocol
43807;github.com/tarm/serial has worked nice for me
43808;set the baud rate and fired away
43809;Doesn't have the functionality to search for ports though iirc
43810;Thx guys :hugged:
43811;> github.com/tarm/serial has worked nice for me@Sgt_Tailor i'm try it
43812;"```go ln err := net.Listen(""tcp :""+strconv.Itoa(port)) if err != nil { fmt.Println(err) } for { conn err := ln.Accept() buf := make([]byte 0 500) msg err := conn.Read(buf) fmt.Println(len(buf[:msg])) if err != nil { fmt.Println(err) return err } kvs.MainRoutine(conn) }}```"
43813;how would i print what `conn` is sending me?
43814;i am not sure this is the correct way...but idk?
43815;should be printing if you remove `len`
43816;If you're expecting it to be a string you can convert it to one using string(buf[:msg])
43817;You can also use the `io.Copy` function
43818;`io.Copy(os.Stdout conn)`
43819;i can only use `bufio` if anything
43820;You are already reading the data into a buffer
43821;Just print it
43822;how do i know if its actually getting read into the buffer
43823;like idk
43824;im doing this but it hangs
43825;> how do i know if its actually getting readchecking the error generally
43826;It is printing max 500 bytes and then doesn't close the connection
43827;The connection will be kept alive and the for loop will wait for the next connection
43828;> It is printing max 500 bytes and then doesn't close the connection@Sgt_Tailor why cant i see the stdout then?
43829;You getting an error?
43830;the program should return an error right if there was an error since i'm doing `return err`
43831;you are also printing the error with `fmt.Println(err)` so if there was one you should see it in your console
43832;yes
43833;but if you're not seeing that and it just hangs with no output maybe it's stuck at `conn err := ln.Accept()` waiting for a connection? A few more debug prints might be helpful
43834;yeah
43835;i printed an error there as well
43836;nothing comes out
43837;generally `Println(error)` is a mistake
43838;"you want to do something more like `Printf(""error doing Thing Y: %s\ error)`"
43839;"and sprinkle some `Println(""starting activity Q"")` where appropriate"
43840;just so you can actually see which parts of your code are running
43841;got it
43842;How are you connecting to it,?
43843;Lets save the questions until they come back with what part hangs
43844;When it's running what does ```ss tln``` say
43845;Oh sorry
43846;I misread I thought it wasn't doing anything after the accept line
43847;"okay so ```gofunc (kvs keyValueServer) Start(port int) error { // TODO: implement this! ln err := net.Listen(""tcp :""+strconv.Itoa(port)) fmt.Println(""Listening"") if err != nil { fmt.Println(err) } for { conn err := ln.Accept() fmt.Println(""Accepted"") if err != nil { fmt.Println(err) } buf := make([]byte 500 500) msg err := conn.Read(buf) fmt.Println(""Buffer read"") fmt.Println(string(buf[:msg])) if err != nil { fmt.Println(err) return err } kvs.MainRoutine(conn) }}```"
43848;it seems that the port is listening but it doesnt accept a connection?
43849;because `Listening` prints
43850;it does sound like Accept() is waiting for a connection.
43851;Accept() presumably won't unblock until you actually have a TCP connection opened to this server
43852;Are you doing that?
43853;with netcat or whatever
43854;/dev/tcp ftw
43855;right i will figure that ou
43856;t
43857;thanks for your help
43858;i am working on a school assignment
43859;so the API they have given is supposed to do some stuff
43860;will look into it
43861;i want to generate random numbers from 1 to 100 where 1 is super likely and 100 is super unlikely. kinda lost on a simple way to do that
43862;"```govar a []stringvar b []stringvar c []stringvar filesName = []string{ a.txt"", b.txt"", c.txt"",}...func initFiles() error { for _ fileName := range filesName { f err := os.Open(fileName) if err != nil { return err } defer f.Close() scanner := bufio.NewScanner(f) for scanner.Scan() { // do smth with scanner.Text() } if err := scanner.Err(); err != nil { return err } } return nil}```"
43863;how can I find the variable a (so the list) for example from a string that equals to a
43864;you can't find variables by string value like that. Unless doing some ungodly reflection magic
43865;instead you could use a map
43866;with a string as a key and the string slice as value
43867;thanks
43868;btw: don't `defer` inside a for loop
43869;yes
43870;mb
43871;i just copied something and put it into a loop
43872;didn't review the code
43873;thanks
43874;any idea on random number gen on a curve? its not for crypto i just want it weighted more towards one end
43875;random result on google <https://www.rubyguides.com/2016/05/weightedrandomnumbers/>
43876;i can do weighted random but theres gotta be a way to do it without hand specifying the weight for 100 numbers
43877;You can change the weight based on the value
43878;weight = x^2 for example
43879;There is probably a more efficient way
43880;You can probably find an implementation when searching for exponential distribution
43881;so I am able to retrieve information from a mysql db but how do I store the information temporarily and then use it on parts of my site like displaying the current logged in user's username and what not. (I do not want to use cookies fyi)
43882;You want people to log in but dont want to use cookies?
43883;Or dont want to use cookies for storage
43884;not for storing their their username and such for displaying on the site
43885;Fun fact @smoke. stdlib has a ExpFloat64 function
43886;for something like a remember me obviously use cookies but not for this
43887;ooh interesting
43888;thank you
43889;"Good good ;) you'll need your router / function that handles the page request to be able to access your package that retrieves the information from the database"
43890;perhaps this is what i need
43891;@tindolt store it in a variable i guess? Not particularly clear how long you intend to store it for
43892;uhhhh ok can I have that in im new to go please
43893;maybe it would be easier if I showed you what I am talking about
43894;Have you done anything like this in another language before
43895;yes
43896;php
43897;very easy in php
43898;Then explain in php
43899;ok so I retrieve information from db then put that row into an array then later when I want to display username or email or have it be able to be modified I just do arrayname.username and have it fill in the blank area and I never really worried about how long it was getting stored cause it was usually fine (i think)
43900;idk why but I am having a hard time with this part
43901;assuming you are using Go html templates to render your webpage you can pass this username and other data into the template and render it there.
43902;So you know roughly the constructs you need
43903;Some data structure to store it in
43904;```type User struct { ID int Username string Email string Pass string}``` this is the struct that I am trying to store it in and if I understand correctly this is just a slightly different array
43905;i don't see how it's an array. it's a struct and 1 instance will hold a single user
43906;uhhhh
43907;how do I make it handle multiple users?
43908;you can create an array of users using `users := make([]User 0)` . but i think it might be helpful to zoom out a little bit on the problem you're trying to solve
43909;Why do you need to store data for multiple users in application
43910;to display the values on the webpage
43911;if you are trying to store many users in a database what you have is fine. this struct represents a single row in the table
43912;ok so like here
43913;None
43914;"Also fingers crossed by Pass you mean Hash but that\'s another conversation ;)"
43915;Stuff like that you fetch from the Database turn into a struct or other data structure and send it to a template
43916;that will say account or whatever when not logged in but then when you log in it should say the username (this is just the simplest case for example)
43917;pass I mean password
43918;that makes sense and how are you rendering the webpage? Go templates or a client side app?
43919;I guess with PHP you used the session data? You will have to handroll that in Go or use some middleware magic
43920;yes possibly
43921;how do you guys display this kind of stuff?
43922;The sessions in PHP are just cookies with a datastore (on file by default but apache can talk to memcached as well)
43923;go templates btw
43924;Check the examples in the text/template package
43925;do you happen to have a link to that package available somewhere?
43926;https://godoc.org/text/template
43927;thank you
43928;in case of go templates the template should have something like `{{ .Username }}`. in your app code you query the user from the db get the `User` struct pass the data into the template.
43929;If you've used twig in php this should be familiar
43930;hmm @Sgt_Tailor im not good with big math words. running 100 instances of rand.ExpFloat64() i get a bunch of numbers from 0 to liek 2.xxxx and nothing higher. i was expecting to get things up to math.MaxFloat64
43931;never used twig
43932;smoke: I don't know then. My math vocabulary is pretty limited these days. I would have to google it as well
43933;alrighty thanks
43934;```gofunc (r Receiver) Method() {```
43935;shouldn't trying to invoke `Method` when `r` is nil panic?
43936;Invoking it on a nil value is valid. Accessing properties of r will panic though
43937;https://play.golang.org/p/oIbfW5hJHb
43938;doing it on nil should do the same
43939;https://play.golang.org/p/0vAfQVdI8DR
43940;hmm guess i need to do some currying or something then
43941;or actually where the heck is this nil coming in
43942;?
43943;figured it out
43944;(just doing some rubber ducking / thinking out loud)
43945;```goctx. UserID = sesh. Edges. User. ID```
43946;the cursed formatting you do when trying to debug a nil pointer in a chain :D
43947;oof
43948;@smoke that's what the exponential distribution is. The probability of getting any given number goes down exponentially as that number grows.
43949;You can get any number up to the max `float64`‚Äîthe probability just gets unreasonably small quite quickly.
43950;For example you noted that you weren't seeing anything above 3. The probability of the distribution in `ExpFloat64` giving a value greater than or equal to 3 is `e^(3)` which is 0.0498 or about 5%.
43951;The docs also note:> To produce a distribution with a different rate parameter callers can adjust the output using:> ```go> sample = ExpFloat64() / desiredRateParameter> ```
43952;Which allows to you change the rate at which the probability decays (e.g. a smaller rate means smaller numbers are comparatively less likely and larger numbers are comparatively more likely)
43953;ah awesome thank you for that explanation
43954;hello it's me again
43955;missed me?
43956;yes
43957;Dumb question: if I write interface do I need to declare struct for it? All examples do this.
43958;An interface is just a description of functionality. If it\'s a novel interface (in that existing types aren\'t likely to implement it) you probably won\'t get much use out of it without declaring your own type but it\'s most definitely possible to declare an interface for some functionality that you need that existing (standard library or thirdparty packages) types already implement.
43959;:thinkingo:
43960;I guess another way to look at it: no you don't need to but if you don't already know a type that's likely to implement it how are you going to make use of the interface‚Äîwhy are you creating the interface?
43961;No idea. I am learning go and trying to use everything i've seen in go tour. I haven't needed interface yet.
43962;It wasn't necessarily a question you need to answer right here but a question to think about when you're creating an interface and wondering if you need to create a type. üôÇ
43963;big thonk
43964;which is more efficient in go `> 0` or `!= 0`?
43965;with a uint that is
43966;both come down to a cmp and jmp instruction
43967;doubt there is a performance diff
43968;neat
43969;they do two different things so
43970;it's not really a meaningful question to begin with
43971;I mean for checking flags it's pretty relevant
43972;is it though
43973;```gofoo & 0b10010110 > 0// orfoo & 0b10010110 != 0```
43974;a single write to stdout or read from stdin will be several orders of magnitude more costly than any numeric comparison
43975;well yeah
43976;I'm not necessarily talking actual performance but what's more idiomatic (which will likely root down to performance on older platforms)
43977;i mean again they do two different things? `x > 0` wil return true for 0 `x != 0` will return false for zero
43978;but
43979;as with ALL performance questions
43980;:thinkingo:
43981;`0 > 0` ?
43982;whoops
43983;i'm a dumb
43984;lmao
43985;anyways
43986;yr fine
43987;the answer is If it actually matters you\'ll write a benchmark. if you can\'t be bothered to write a benchmark it must not actually matter
43988;that's fair
43989;thanks
43990;and you can write that benchmark and you'll find a difference of +/ 13 nanoseconds i'm sure
43991;```main_pc0: text .main(SB) ABIInternal $1040 movq (TLS) CX cmpq SP 16(CX) pcdata $0 $2 jls main_pc266 pcdata $0 $1 subq $104 SP movq BP 96(SP) leaq 96(SP) BP funcdata $0 gclocals¬∑33cdeccccebe80329f1fdbee7f5874cb(SB) funcdata $1 gclocals¬∑ff19ed39bdde8a01a800918ac3ef0ec7(SB) funcdata $3 .main.stkobj(SB) xchgl AX AX pcdata $1 $0 call math/rand.Int(SB) cmpq (SP) $0 jgt main_pc167main_pc46: pcdata $1 $1 nop pcdata $1 $0 call math/rand.Int(SB) cmpq (SP) $0 jne main_pc68main_pc58: pcdata $1 $1 movq 96(SP) BP addq $104 SP ret```
43992;big brain asm
43993;ooh so guess what
43994;both boil down to cmpq and then their respective jmp instructions
43995;looks like an unsafe conversion from uint8 to bool works on amd64 and it's faster than gt or ne
43996;looks like I'll bench more
43997;Make sure the compiler can't determine the output
43998;unfortunate that it requires pointer conversion but the lack of allocs in a benchmem make me think that's optimised out anyway
43999;If the compiler can determine that a condition will always be true it just removes the branch
44000;I'm not doing any branch with it I'm just doing `runtime.KeepAlive(ok)`
44001;"this looks so bad ```go for i := 0; i < len(a.Page.Activities); i++ { if !a.Page.Activities[i].IsLiked { err := a.Page.Activities[i].like(f.token) if err != nil { time.Sleep(time.Minute) } likes++ if err != nil { log.Println(err) } p err := progressbar.CalcProgress(likes f.count) if err != nil { log.Println(err) } str err := b.SetBarProgress(p) if err != nil { log.Println(err) } fmt.Print(str) } }```"
44002;TIL this will panic```goa := []int{1}fmt.Println(a[2:])```
44003;Yeah you're out of bounds
44004;kinda expect it'll just return empty
44005;@Karitham turn that `!a.Page.Activities[i].IsLiked` into a continue on `a.Page.Activities[i].IsLiked`
44006;rather than having all the content in an if block just continue in the alternate case
44007;???
44008;"```go for i := 0; i < len(a.Page.Activities); i++ { if a.Page.Activities[i].IsLiked { continue } err := a.Page.Activities[i].like(f.token) if err != nil { time.Sleep(time.Minute) } likes++ if err != nil { log.Println(err) } p err := progressbar.CalcProgress(likes f.count) if err != nil { log.Println(err) } str err := b.SetBarProgress(p) if err != nil { log.Println(err) } fmt.Print(str) }```"
44009;excuse the terrible indentation
44010;is that clearer ?
44011;btw you want the code to `break` or`continue` when you encounter the error
44012;that too yeah
44013;You're logging but ignoring them effectively
44014;don't ignore errors don't nest blocks if you don't need to etc
44015;also you're checking err twice around the `likes++`
44016;oh yes
44017;this code is full of minor issues
44018;that sleep is ineffective because you're not actually retrying afterwards
44019;you'll probably want to instantiate your index variable outside of the loop and manually increment it when you succeed
44020;and handle those errors please
44021;that sleep is just when I hit ratelimit
44022;right but it's just proceeding to the next element in your slice without retrying it  doesn't sound like you'd want that
44023;you could also just put a retry loop inside of the main loop but that's unnecessary nesting again
44024;could be worth improved clarity though
44025;Okay boys. I wrote sorting function for my list of net.IPI wanted to work via pointer.so I did this ``SortIP(&aliveHosts)`` where alivehosts  []net.IPand here is my function```func SortIP(hosts []net.IP) { sort.SliceStable(hosts func(i j int) bool { return bytes.Compare(hosts[i] hosts[j]) < 0 })}```but go is hitting me in the head and telling me that I cannot index over []net.IP type
44026;@deezy @Sgt_Tailor about that bench here's the results I got  it's using `runtime.KeepAlive(ok)` and never actually branching with it```goos: linuxgoarch: amd64pkg: bitflagBenchmarkGtTrue 1000000000 1.16 ns/op 0 B/op 0 allocs/opBenchmarkGtFalse 1000000000 1.15 ns/op 0 B/op 0 allocs/opBenchmarkNeTrue 1000000000 1.14 ns/op 0 B/op 0 allocs/opBenchmarkNeFalse 1000000000 1.12 ns/op 0 B/op 0 allocs/opBenchmarkUnsafeTrue 1000000000 0.977 ns/op 0 B/op 0 allocs/opBenchmarkUnsafeFalse 1000000000 0.973 ns/op 0 B/op 0 allocs/opPASSok bitflag 7.258s```
44027;and I've tested that all of these operations give the correct result I just excluded it from the bench for speed
44028;based unsafe
44029;yees
44030;```gofunc unsafeBool(u uint8) bool { return (bool)(unsafe.Pointer(&u))}```
44031;can you dump the benchmark code? Want to see if I can do something
44032;pls send help
44033;you don't need a pointer to a slice
44034;just modify it in place
44035;I just used a goto
44036;I dont get it
44037;> I just used a goto@Karitham ew but that works lol
44038;you don't need a pointer
44039;if I dont use pointers i need to return result
44040;just call Sort
44041;https://golang.org/pkg/sort/#SliceStable
44042;```SliceStable sorts the provided slice given the provided less function while keeping the original order of equal elements.```
44043;it sorts the slice
44044;it doesn't return a new one
44045;a slice points to a backing array. It can sort in place
44046;I know
44047;so you don't need a pointer nor do you need to return anything
44048;I can do this in main but still
44049;just call SliceStable and pass it a slice
44050;@superloach code plz
44051;If i pass slice via pointer in function how do I do indexing?
44052;give me a moment
44053;you don't
44054;you don't need pointers to slices
44055;period
44056;let go of the pointer it is not useful here
44057;Alright
44058;you have to use copy if you don't have a pointer right?
44059;let's not confuse the issue
44060;or can you just straight up modify it
44061;they're not trying to make a new slice
44062;they're trying to sort a slice in
44063;I have next question. I want to scan ip address for open ports. Should I just run goroutine with dial to each port? Or better not since running 65535 dials will ddos my network?
44064;depends
44065;> ddos my network:robpike:
44066;how many goroutines can i have doing task X is a question that depends on your hardware what you\'re doing whether you\'re doing this with permission etc etc
44067;you'll probably want to limit it to a reasonable number of workers at a time
44068;Well
44069;My spotify lags when I do 500 goroutines with ICMP packets
44070;yeah
44071;that's what i mean
44072;500 is probably too many
44073;and allow that to be configured because stuff like that really depends on hardware (cores/threads/multitasking proficiency)
44074;so try 250
44075;if that's too slow try 375
44076;binary search
44077;¬Ø\\_(„ÉÑ)_/¬Ø
44078;find a nice middle ground
44079;alright boys
44080;"I'd assume you know how to limit the number of currently running workers or are capable of googling it ;)"
44081;Learned Go @ Burned the router
44082;worker pools and fanin fanout are the relevant terms
44083;you can do a pretty easy pool with just a buffered chan
44084;pools? I thought about that.
44085;It is in sync package?
44086;nope
44087;you just create N gorotuines
44088;sync provides a pool iirc
44089;and feed them work via a channel
44090;sync.Pool is not relevant here
44091;and it's arguably a Bad Tool overall
44092;but that's not germane
44093;let's not confuse the subject
44094;ah I was thinking about that wrong
44095;creating N workers and passing work is a much better idea
44096;Hm
44097;I'll try it
44098;same effect as using a buffered chan to limit the number of running workers as they're created/die
44099;but better concurrent design for sure
44100;or fuck it and become a stripper :thinkingo: It is hard life choice
44101;lmaooo that's valid
44102;~~what says you can't do both~~
44103;sync.Pool is supposed to help reduce allocations but it ends up being wildly complicated to predict if it's actually helping or hurting
44104;or something
44105;since I didnt know about worker pools I wanted to do the same limit with WaitGroups
44106;but that would be clumsy
44107;that's not what waitgroups are for
44108;so yeah it would be really clumsy
44109;a WaitGroup is i don\'t want to continue until i know everyone has said that they\'re done working
44110;Worker pools is I only need N of you to do tasks here\'s where they come from
44111;By the way can you enlighten me what is Go good for?
44112;programming
44113;nice
44114;Never thought about it
44115;the question is not really
44116;a good one
44117;it\'s like saying what\'s a hammer good for?
44118;anything if you're creative/strong enough
44119;well
44120;Go has a very minimalist syntax very good tools both internal and third party
44121;It compiles fast and to many architectures
44122;and produces generally fast code
44123;my go server takes like 30 seconds to convert a 2.5 MB png file to bytes is this normal?
44124;You can write anything in any language but amount of good libraries language specific architecture will limit spheres where you should use it
44125;¬Ø\\_(„ÉÑ)_/¬Ø
44126;i don't know everything about every third party library ever written for go
44127;it's a relatively new lagnuage
44128;at least its inclusion in the mainstream
44129;and not as some experimental offshot of plan9
44130;i'm sure there's a lot of things you won't find third party libraries for
44131;that isn't a function of the language's competence
44132;I dont wanna reinvent the bicycle
44133;Go probably could do Whatever Thing perfectly well if someone cared enough to write it in Go
44134;@HankMoody convert to what bytes?
44135;but people don't because existing solutions already exist
44136;inertia
44137;and why not profile the code?
44138;technical debt
44139;managerial incompetence
44140;For example everyone uses Java in enterprise software developing. Why? memes i guess
44141;because it was a cost effective solution at the time
44142;I heard that go is mostly used in net programming
44143;it was a good way to make sure that large teams of largely amateur engineers could be forced to write consistent knowable code
44144;yeah go's concurrency model makes it very nice for doing things like networking
44145;Well. I am working in the field with a loads of data and sql. I thought maybe go can work with data faster than java or python
44146;it almost certainly can
44147;if you do it right
44148;no unnecessary quadratic time loops and so on
44149;Java is so stupid in terms of performance. It good if you wanna run your code on toasted. But doing some math? Seriously?
44150;> @HankMoody convert to what bytes?@_diamondburned_ []byte
44151;[]byte what?
44152;RGBA 8bit?
44153;RGBA 16bit?
44154;RGB 8bit?
44155;oh
44156;I dont know
44157;Here is the code
44158;bruh
44159;"func getTheImage() []byte { filepath := images/katrina.png"" imagesource err := os.Open(filepath) if err != nil { // replace this with real error handling panic(err.Error()) log.Printf(""File not found"") } defer imagesource.Close() buf := new(bytes.Buffer) dfd err := png.Decode(imagesource) if err != nil { // replace this with real error handling panic(err.Error()) } // to byte err2 := png.Encode(buf dfd) if err2 != nil { // replace this with real error handling panic(err.Error()) } log.Printf(""Finished converting to byte"") return buf.Bytes()}"
44160;:thonk:
44161;that function name
44162;why would you decode and then immediately encode
44163;hmmm
44164;^
44165;that
44166;lol
44167;Im new to golang
44168;you have the contents of the image in `buf`
44169;that's the whole point of it existing
44170;or uh
44171;dfd?
44172;whatever
44173;you can use https://godoc.org/image/png#DecodeConfig to confirm that it is a valid PNG
44174;DecodeConfig
44175;And I discovered that somehow this function is being executed 4 times by the grpc service üòê
44176;sounds like your code is running slow because you're doing 8 or 10 times as much work as you think you are
44177;üëÄ
44178;i might dig into that first
44179;I used log.Printf for that
44180;üòê
44181;> sounds like your code is running slow because you're doing 8 or 10 times as much work as you think you are@deezy Im not surprised Im stupid
44182;it okay
44183;it happens to the best of us
44184;That was the first time ever that I touched byte data type in my life
44185;Does it feel nasty? (:
44186;> i might dig into that first@deezy You mean you are trying to find a solution for it?
44187;nope
44188;it's your code
44189;and i've seen literally one function
44190;> Does it feel nasty? (:@Rin super nasty
44191;i couldn't possibly fix it
44192;why would it feel nasty?
44193;Its the only function in there apart from the main
44194;still not the entire code
44195;can't mind read
44196;> you can use https://godoc.org/image/png#DecodeConfig to confirm that it is a valid PNG@_diamondburned_ So when Im trying to convert image to []byte do I need to decode the file then put it directly into []byte?
44197;you don't convert the image to []byte
44198;üòÆ
44199;you have to first understand that []byte literally is just a bunch of bytes
44200;a bunch of bytes can be anything
44201;it can be images represented differently
44202;for example it could be a chain of 8bitwide colors
44203;also
44204;1. don't just call the function `getTheImage`
44205;"1.1. nobody uses `the` in the function name; it's redundant1.2. `image` is ambiguous when the return type is []byte; it doesn't tell you what the []byte contains or represents1.2.1. in this case it represents the PNG image so call the function `getPNG`2. you only need to read the image once since the file does not change throughout the lifespan of the program; to do this just read it once at the start and reuse the byte slice3. you only need to read the file and return it since it's already a PNG"
44206;Its a relief that I dont need to convert it into something first
44207;you only do if you need to
44208;that implies you already knowing what you want in the end
44209;specifically how the image will be encoded/represented
44210;> specifically how the image will be encoded/represented@_diamondburned_ How do you mean?
44211;again an image can be represented differently
44212;you need to know what you want before you can even know how to reencode an image
44213;Okay
44214;"> 1.1. nobody uses `the` in the function name; it's redundant> 1.2. `image` is ambiguous when the return type is []byte; it doesn't tell you what the []byte contains or represents> 1.2.1. in this case it represents the PNG image so call the function `getPNG`> 2. you only need to read the image once since the file does not change throughout the lifespan of the program; to do this just read it once at the start and reuse the byte slice> 3. you only need to read the file and return it since it's already a PNG@_diamondburned_ okay"
44215;"> 1.1. nobody uses `the` in the function name; it's redundant> 1.2. `image` is ambiguous when the return type is []byte; it doesn't tell you what the []byte contains or represents> 1.2.1. in this case it represents the PNG image so call the function `getPNG`> 2. you only need to read the image once since the file does not change throughout the lifespan of the program; to do this just read it once at the start and reuse the byte slice> 3. you only need to read the file and return it since it's already a PNG@_diamondburned_ okay"
44216;"> 1.1. nobody uses `the` in the function name; it's redundant> 1.2. `image` is ambiguous when the return type is []byte; it doesn't tell you what the []byte contains or represents> 1.2.1. in this case it represents the PNG image so call the function `getPNG`> 2. you only need to read the image once since the file does not change throughout the lifespan of the program; to do this just read it once at the start and reuse the byte slice> 3. you only need to read the file and return it since it's already a PNG@_diamondburned_ I was trying to see how long it would take when I need to fetch multiple new images per request."
44217;Hi,Do you guys know of any examples in go that process search parameters in an api such as ‚Äò‚Äô‚Äô/cars?color=blue&type=sedan&doors=4‚Äô‚Äô‚Äô
44218;Just want to see a nice clean representation so I can implement
44219;https://golang.org/pkg/net/http/#Request.FormValue
44220;"e.g. `r.FormValue(""color"") == blue""` in that example"
44221;(and if you just want to iterate over the values rather than look for a specific one https://golang.org/pkg/net/http/#Request.Form)
44222;GreAt thanks Presumably this is done on a struct once the data has already been grabbed from the dB?
44223;"I'm not sure what you mean. There isn't any DB here; this is just looking at the query string of an HTTP request."
44224;How would you interpret searching a slice of cars once you have grabbed this query paean?
44225;I'm not sure what I'm supposed to be interpreting based on here. üòÑ
44226;"The method and field I linked above give you a way to process the query string; from there it's up to you to decide what to do with that information."
44227;url.Parse() and then url.ParseQuery() on the RawQuery entry might be simpler.
44228;Lol ok no probs
44229;I have no problems obtaining the parameter. I just wanted to know best practices of how to search it within go. And if there are any examples.Do you search on a database level? Or search for parameters once you have obtained all the structs etc etc
44230;Also if you‚Äôve got tonnes of filters (searches) what‚Äôs the best way of strutting your code
44231;Structuring
44232;In your router you can first get the query parameters from the url then call a method similar to ```cars err := ListCars(ctx ListCarsFilter{ Color: params.Color, Doors: params.Doors,})```
44233;The method can presumably generate the sql using those filter and make a call to the db
44234;Ah ok nice so pass a struct filter to the function that makes sense
44235;Cheers
44236;Then it‚Äôs just loads of where/likes right? Using sql
44237;For filtering yes
44238;üëå
44239;I have a type which is an array of unnamed structures`type LatestPunishments []struct {`how can I iterate over this?when I use `range res` (which is type LatestPunishments) it says cannot range over it
44240;Can you share more code? This should work```type Foo []struct{}func main() { var f Foo for i := range f { fmt.Println(i) }}```
44241;^
44242;"```golangres err := WarzoneClient.GetLatestPunishments(ctx)if err != nil { log.Fatal(err)}fmt.Printf(""%+v\ res)for index element := range res { // cannot range over res (type ""warzonestats/api"".LatestPunishments) fmt.Println(element)}```"
44243;well
44244;that's not even remotely what you typed
44245;:thonk:
44246;ah sorry
44247;so what's different that makes it not work?
44248;You have a pointer to a slice?
44249;Bad stuff about to happen
44250;You may need to deref the pointer but it doesn't look good. If the `WarzoneClient` is your code I would recommend changing `GetLatestPunishments` so that it does not return a pointer to a slice
44251;It's an API client I'm writing https://hasteb.in/uqupahap.swift
44252;Makes sense. Since `LatestPunishments` is a slice you should return it directly instead of a pointer to it.
44253;the & is the pointer right?
44254;Correct. Change line 2 to:`GetLatestPunishments(ctx context.Context) (LatestPunishments error)` and line 15 to `return res nil`
44255;yeah I did that
44256;it works now thank you
44257;Ideally you would have a `LatestPunishment` struct and return `[]LatestPunishment`. It'll make things a lot clearer
44258;Sure np
44259;Is it possible to create an empty string slice then push elements later?
44260;yes
44261;how? I see you can use make() to make an empty one but not sure if that can be pushed to
44262;sure it can just like any other
44263;oh alright
44264;is there a way to hang in Go?
44265;I'm starting my GoRoutines and I don't want the main to exit.
44266;I want to let run my GoRoutines indefinitely and they do their thing alone.
44267;`select{}`
44268;thanks üôÇ
44269;or a waitgroup if you want to be able to shut down gracefully
44270;@Sgt_Tailor here's that benchmark sorry I forgot about it earlierhttps://gist.github.com/superloach/0aa68b4911de53d05e0d75ed085a2fb1
44271;What is the expected behaviour again? least significant bit is interpreted as bool?
44272;any bit is interpreted as truthy at least on amd64
44273;a nonzero byte is true
44274;I should probably make the gt and ne tests use a func as well though I'd assume the unsafe one gets inlined
44275;or just inline the unsafe one myself
44276;Hey guys just found this community so I guess I'll introduce myself with a quick question üòÑ
44277;I can't set GOOS = darwin! Can someone help?
44278;I want to export my program so that it can be used on mac
44279;@Zelly go for it pal
44280;I'm doing a bit of reading on bufio and the writer makes perfect sense to me the reader makes sense except for one part on line 227 in https://golang.org/src/bufio/bufio.go how does that Read work in a way that doesn't block if the writer doesn't fill the buffer or provide an EOF?
44281;I'm implementing a server that uses the TELNET protocol and then I got lead down a rabbit hole when I wanted to understand exactly why I wanted a buffered reader over reading right off the connection
44282;So my implementation wraps the tcpconn in a bufio reader and then I use ReadByte to get the next byte out of the buffer from what I understand the first time this means it'll call that Read() on the connection but b.buf is like really big by default right?
44283;@dubber there's a command somewhere in the `go` command that lists all valid architecture/os combinations
44284;for the fucking life of me i cannot find it on google
44285;Your assumption is why you aren't able to figure out your question‚Äîthat's precisely what it does. It blocks if the underlying reader blocks.
44286;nope there is no such list anywhere
44287;there's an open issue about it
44288;wait really?
44289;i swear to god i've used it
44290;oh wait no i was thinking specifically of os versions: https://github.com/golang/go/issues/41212
44291;Yeah i just mean `amd64/darwin,amd64/linux,etc,etc`
44292;what's the incantation to get that list
44293;If you hit line 227 you are already in the case where there isn\'t anything in the buffer. In that case it provides a relatively transparent view of the underlying reader‚Äîit blocks when it does and reads when it reads. You should only really want to buffer your connection if you aren\'t already satisfied with the buffer that your OS sockets provide. ( @Zelly )
44294;still p. sure there is no such list readily available in the go command itself
44295;:thonk:
44296;maybe i just have brain worms
44297;`go tool dist list`?
44298;```‚ùØ go tool dist listaix/ppc64android/386android/amd64android/armandroid/arm64darwin/amd64darwin/arm64dragonfly/amd64freebsd/386freebsd/amd64freebsd/armfreebsd/arm64illumos/amd64js/wasmlinux/386linux/amd64linux/armlinux/arm64linux/mipslinux/mips64linux/mips64lelinux/mipslelinux/ppc64linux/ppc64lelinux/riscv64linux/s390xnetbsd/386netbsd/amd64netbsd/armnetbsd/arm64openbsd/386openbsd/amd64openbsd/armopenbsd/arm64plan9/386plan9/amd64plan9/armsolaris/amd64windows/386windows/amd64windows/arm```
44299;Oh boy that was larger than I thought it would be
44300;üòÑ
44301;<https://golang.org/doc/install/source#environment>
44302;looks like these are the same list
44303;BINGO
44304;damn long list
44305;i specifically want that invocation because i can pipe it into grep/awk
44306;what is the deal with the pointer to slices i missed that context
44307;you don't need them
44308;and they aren't useful
44309;yea
44310;that's the deal
44311;is slice of pointers useful?
44312;pointers to slices are more or less redundant
44313;sure a slice of pointer values is fine
44314;nothing intrinsically wrong/weird about that
44315;ok
44316;pointer to slice is a dumy
44317;dummy
44318;because slices are passed by reference already
44319;"pointer to slice only gives you the ability to change len/cap e.g. via `append` but that's an antipattern in go; we generally prefer returning the new slice instead"
44320;unless you want to replace the whole slice value you don't need a slice pointer
44321;yeah generally you want to return NEW slices
44322;modifying things inplace is very rude
44323;k
44324;pointertostructcontainingaslice is ok and gives you the same control but the idea is that you're operating on an object not trying to make slices magical
44325;if you're setting a slice field in a method you're technically getting a slice pointer through the struct pointer but that's much less of an issue
44326;@superloach Benchmark is poop
44327;thanks
44328;during the modification process you can fck up indexing if you modify exisiting slice
44329;@zephyrtronium yeah we're saying the same thing lol
44330;```goos: windowsgoarch: amd64BenchmarkGtTrue16 1000000000 0.464 ns/opBenchmarkGtFalse16 1000000000 0.460 ns/opBenchmarkNeTrue16 1000000000 0.461 ns/opBenchmarkNeFalse16 1000000000 0.485 ns/opBenchmarkUnsafeTrue16 1000000000 0.487 ns/opBenchmarkUnsafeFalse16 1000000000 0.484 ns/op```
44331;actually slower with unsafe üòõ
44332;@Sgt_Tailor hmm I see probably dependent on how the host's libc handles it then
44333;@Carson Thanks for the answer on when to use buffering that's always been a bit difficult for me to research as well. I guess my big question is that hte underlying reader is blocking that much I understand but if I send a single byte through it stops blocking I figured I would need to fill the buffer before it would stop blocking
44334;But that might just be a misunderstanding on my part
44335;The buffer is only useful if the reader can read more data than `len(p)`. In that case it saves it for the next (bufio) read and prevents extra reads on the underlying data.
44336;If every read can be encapsulated in `len(p)` (assuming each `p` is the same length) buffering does nothing.
44337;Ok I did a bit more experimenting without the buffer and I understand what's up now I think
44338;```gobuf := make([]byte 5)_ err := connection.Read(buf)```
44339;I then telneted to this and sent it one byte
44340;expecting it to hang
44341;But it just filled the buffer with my one byte and a bunch of nulls
44342;So yeah my initial assumption was wrong
44343;Or it probably didn't fill it with 0's that's just the initial value
44344;But either way it's all clearer now. Appreciate it
44345;@_diamondburned_ mate if I dont use the following in my code Im getting no image data on the client side:err2 := png.Encode(buf dfd)
44346;Yep! The whole reason that `bufio.Reader` exists is that it's assumed that there will be cases where reading from the underlying reader (say an OS socket) multiple times will be more expensive than reading from it once even for the same total amount of data. But if each read is precisely how much data is on the socket it doesn't really give any benefit.
44347;that one line shouldn't be the only line you change?
44348;In reality my question should have been How does a conn.Read(buf) know when to stop blocking if buf doesn\'t get full and my program isn\'t explicitly sending it an EOF but it seems like at some level of the protocol it knows where the end of the stream is
44349;no
44350;Yeah that'd depend on both the protocol you're using as well as the OS implementation.
44351;"@_diamondburned_ Actually I did a mistake I did this:func getTheImage() []byte { filepath := images/katrina.png"" imagesource err := os.Open(filepath) if err != nil { // replace this with real error handling panic(err.Error()) log.Printf(""File not found"") } defer imagesource.Close() buf := new(bytes.Buffer) // // dfd err := png.Decode(imagesource) // // if err != nil { // // // replace this with real error handling // // panic(err.Error()) // // } // // // to byte // err2 := png.Encode(buf dfd) // // if err2 != nil { // // // replace this with real error handling // // panic(err.Error()) // // } log.Printf(""Finished converting to byte"") // return buf.Bytes() return buf.Bytes()}"
44352;you didn't touch buf
44353;buf is empty
44354;Because deezy asked me to just return buf.Bytes() and buf.Bytes() dont get anything until you encode / decode? I dont know?
44355;read the file
44356;how do you think buf has anything if you don't touch it
44357;Thats what I was thinking
44358;Okay now
44359;file path is not enough?
44360;i think there's some fundamental things that need to get established
44361;you say you want []byte
44362;you can get that by opening the file and reading it
44363;and nothing more
44364;because that's all anything is. []byte. Strings numbers PNGs PDFs exes they are all just a sequence of bytes one after another
44365;Okay
44366;What matters is how you interpret that sequence
44367;if all you need is the bytes of a PNG you can just open the file
44368;and use that
44369;> What matters is how you interpret that sequence@deezy on client side?
44370;intellectually
44371;with your brain
44372;"> if all you need is the bytes of a PNG you can just open the file@deezy Like this? dat err := ioutil.ReadFile(""/tmp/dat"")"
44373;lol
44374;00010101 means one thing if you're interpreting it as ASCII
44375;It means a whole other thing if it's part of a piece of a PNG
44376;oh
44377;ReadFile works
44378;So.
44379;ReadFile is just a helper function to Open a file and read it with bytes.Buffer
44380;ReadFile() gives you []byte
44381;that's a sequence of ones and zeros
44382;image.Decode takes that and interprets it in a way that exposes concepts relevant to image handling: dimensions rectangles setting the values of pixels etc etc
44383;so
44384;i don't really remember what your actual end goal is
44385;but that's where you are
44386;if you need bytes just read the file. if you need to do image manipulation you'd use `image` and work with `Image` values
44387;deezy a bit is 1s and 0s
44388;All Im attempting to do here is use gRPC to communicate between a Golang server and a Flutter app
44389;a byte is 0255 bruh
44390;then why are there images?
44391;it's all sequences of numbers dawg
44392;if the answer is because you need images then that\'s not all you\'re doing
44393;how you subdivide them ins't quite germane
44394;and this gRPC thing dont have image type I think and it needs to be []byte
44395;yeah that's the core thing i was trying to get at
44396;again there are multiple ways to represent an image
44397;please look at them before trying to work with encoding and decoding them
44398;"so I can just read file this: dat err := ioutil.ReadFile(""/tmp/dat"")and then return it to grpc service so that it can send it to my flutter app?"
44399;sure it should be that simple
44400;just send the raw bytes of the png to the thing that wants a png
44401;And is this efficient?
44402;¬Ø\\_(„ÉÑ)_/¬Ø
44403;try it and see
44404;performance characteristics are impossible to meaningfully predict
44405;okay
44406;üòÑ
44407;oh
44408;anyways you're doing network shit
44409;so
44410;your code is the least of your problems
44411;here's the metaphor i like to use now
44412;let's say something simple costs your application one dollar
44413;gRPC is taking care of network shit I think or am I missing anything?
44414;doing 1 + 1 costs you a buck
44415;reading something from ram? 5 bucks
44416;hard drive? 50?
44417;network? ten thousand
44418;hmmm
44419;that's a rough idea of the scale of performance impact different things have
44420;the fact that you\'re doing network stuff means that waiting for packets to physically traverse the surface of the earth is going to be an OVERWHELMING majority of your bottlenecking
44421;generally speaking
44422;all absolute statements about performance are false
44423;This shit is interesting
44424;I guess my point is when asking is X efficient you should take into account everything you\'re doing
44425;the factors you can control the ones you can't
44426;the latter absolutely including the internet
44427;and all the problems using it entails
44428;gRPC is supposed to be xx faster than json etc
44429;So for now Im just blindly trusting it to be fast
44430;i don't think performance is really the selling point
44431;it's about having typesafe rpc and so on
44432;as Im still learning Im trying to make code as performant as possible
44433;a binary wire protocol does convey some benefits over plaintext in some cases but isn't guaranteed
44434;Man you can really explain thing when you get down to it
44435;and grpc is just a protocol
44436;i've been doing this 20 years
44437;"A protocol is just rules for how to behave"". You could write a really really really shitty grpc server in Python and it\'d be bad and slow"
44438;you could write a very very fast good one too
44439;performance is a will o the wisp that leads everyone astray in the beginning
44440;üòÆ
44441;it's a trap
44442;So running after performance too much is a trap?
44443;to care much about performance
44444;yeah
44445;hmmm
44446;you can spend a lifetime theorizing about what the fastest web framework is and never write a single line of code
44447;¬Ø\\_(„ÉÑ)_/¬Ø
44448;1) make it work2) make it easy to maintain3) make it fast
44449;a very simple formula
44450;I remember someone told me that as long as it serves your purpose it isnt a bad code
44451;those are your priorities
44452;> a very simple formula@deezy A 1000 üëç
44453;if your code doesn't work you don't have a product.if your code isn't easy to maintain further improvements perofrmance related or otherwise become impossible or excessively costly
44454;you can't have fast code without well structured working code
44455;How to learn writing a well structured working code?
44456;failure mostly
44457;lots and lots and lots of failure
44458;^^^^^^^
44459;you learn how to make good things by making many many many many shitty things
44460;realizing why they're shitty
44461;and then doing better next time
44462;you just gotta keep writing and rewriting when you figure out what you wrote is absolute shit and you gotta keep doing that until what you write isnt actual shit
44463;which let me tell you you'll never stop learning something that just breaks how you used to program and then when you look back at old programs or scripts you're just like jesus why did i do that?
44464;imo you shouldn\'t use something completely different just because it\'s faster
44465;that's a bad way to go by it
44466;so really you just gotta kinda start somewhere
44467;true
44468;justify the reasons not by the fact that the other thing faster but by the fact that your data shows your code is being slow
44469;> you just gotta keep writing and rewriting when you figure out what you wrote is absolute shit and you gotta keep doing that until what you write isnt actual shit@Prophet And before we master one thing a new better server / client side langauge comes up which is more in demand and you go learn that thing and do all this over again?
44470;you can?
44471;and that data is called profiling
44472;@HankMoody ya thats pretty mf based
44473;you can also just learn multiple languages/frameworks
44474;you accumulate a lot of trendy bullshit over your career
44475;DHTML
44476;you can also just master the thing and put that other new thing aside to do later
44477;because not everything trendy is good
44478;none of you whippersnappers will remember that one
44479;^^^
44480;@_diamondburned_ is based as shit
44481;@deezy ok boomer
44482;just because its the new thing doesn't mean its good
44483;all of my computer science classes teach java python and JS all of which are languages i dont like but just because its the new thing doesn't mean its the best
44484;i do the bare minimum i those classes to learn what i need to learn to pass then focus on GO and C wen it comes to personal projects I try to really get good at those
44485;I discovered go when one day I decided to see what Uber tech stack is
44486;same way I discovered protobuf
44487;redis
44488;cassandra
44489;etc
44490;Then I realised I was living in stone age
44491;And recently discovered Flutter and gRPC's support for it
44492;All this combination is nuke
44493;you\'re not living in stone age
44494;just because you're using slightly old methods doesn't mean it's literally stone age
44495;youre living in the present
44496;stone age would be RSS XML SOAP
44497;JSON isn\'t stone age
44498;ahahahaha
44499;soap
44500;god help me
44501;> stone age would be RSS XML SOAP@_diamondburned_ I didnt learn that because it confused the shit out of me and thats what discouraged me to not learn how to build APIs
44502;just do more?
44503;go protobuf redis mongo flutter = Pure ‚ù§Ô∏è
44504;sigh
44505;that's awful tbh
44506;mongo bad
44507;:)
44508;üòÑ
44509;Okay
44510;nah legit its like the biggest false advertisement ever
44511;I didnt start to learn it though
44512;Jus read about them
44513;https://www.infoq.com/news/2020/05/JepsenMongoDB426/
44514;mongo bad
44515;@_diamondburned_ @deezy @Prophet Thanks for talking sense into me guys
44516;> https://www.infoq.com/news/2020/05/JepsenMongoDB426/@Str≈ìm Whoa! üòÆ
44517;no
44518;np
44519;XML not bad. Soap terrible
44520;@deezy just returning the image after reading worked
44521;BUTTT BUTTTT BUTTTTT
44522;it takes like 50 seconds to download that 2.5 MB image
44523;sounds like a shitty connection
44524;hmmm
44525;Im using emulator to test
44526;Now
44527;I will test it on real iphone with 100mbps connection
44528;an emulator being slow? impossible
44529;ü§®
44530;lol
44531;what's the reasoning behind seeding rand?
44532;to make it more Random
44533;normal rand is really just doing some math to create random numbers
44534;You can seed it with something more random as the starting point so that what it creates is a bit more random
44535;i\'d say different random rather than more random
44536;Normal rand isn't really even random
44537;Yeah
44538;it's the same sequence regardless you're just picking a different starting point
44539;do I need to seed it everytime I want a random number?
44540;It's deterministic
44541;No just once when your app starts @Nascent
44542;no you need to seed it exactly once
44543;üëç
44544;also when I profile my program's memory usage theres two functions that use 70% of the ram
44545;bufio.NewWriterSize and bufio.NewReaderSize
44546;and its from http serve
44547;is this behavior normal?
44548;that question is impossible to answer because it has so much context embedded
44549;those functions will respectively allocate sizen buffers with each call
44550;to be specific though if you\'re profiling memory then it\'s not that those two use 70% of the ram they allocate 70% of the total memory allocated by the program
44551;"there isn't a way to tell from a profile what functions are currently using what memory; that question doesn't even really make sense in a language that has pointers"
44552;"if `top` leads you to think your program is consuming too much memory it probably isn't; go programs don't return memory to the os until the os asks for it back but that memory isn't actually in use and is still effectively available"
44553;got it so my program could technically be using only a little bit of the memory task manager said it was using
44554;I just thought this would be kinda crazy
44555;None
44556;correct and nah that just means those functions are together doing most of the allocating not that they're holding any amount of memory
44557;ah okay thanks a lot
44558;is there a way to check how much memory is actually in use and not just being held?
44559;<https://golang.org/pkg/runtime/#ReadMemStats> should give that information
44560;üëç
44561;cannot use dat (type []byte) as type byte in appendgo
44562;"dat err := ioutil.ReadFile(""images/katrina.png"") imagebunch := []byte{} imagebunch = append(imagebunch dat)"
44563;I need a list of images stored in a slice to send back to client from server
44564;What am I doing wrong here?
44565;dat...
44566;you cant append []byte to []byte
44567;you have to append N number of byte
44568;anyways I fixed by using ... suffix
44569;Is it correct to do like this or use array to store a list of slices?
44570;> you have to append N number of byte@Madxmike the return type is supposed to be [][]byte as I can see in the server.pb.go file because I used the keyword repeated in the proto definition file
44571;I need to read a bunch of images and provide to the grpc service to deliver it to my app
44572;So how to do that?
44573;service is expecting [][]byte üòê
44574;you make a slice of `[][]byte`
44575;`a := make([][]byte 0)`
44576;`a = append(a b)`
44577;> you make a slice of `[][]byte`@Madxmike is this equivalent to this [][]byte{}
44578;Im reading 20 images (around 350 kb each) like that and appending and sending to my flutter app and it is taking 35 seconds that is a long time right?
44579;and on the other hand I have seen apps who show similar amount of images within 2 seconds
44580;How to achieve this?
44581;Where are you spending the majority of your time? Have you tried profiling at all?
44582;> Where are you spending the majority of your time? Have you tried profiling at all?@Carson I have no idea of profiling at all üòê it would be a great help if you could put me on right direction
44583;https://golang.org/doc/diagnostics.html#profiling
44584;Thanks
44585;"BTW the function finishes execution within 1  2 secs because I could see the log.Printf(""Finished executing function"") result in the console when I make a grpc call from my flutter app"
44586;Then I looked at the download / upload speed and it shows about 180kb per second
44587;Im using aws t2.mico EC2 instance
44588;Could this be a aws network issue?
44589;i mean what kind of bandwidth did you pay for
44590;lol
44591;Im having 150mbps connection
44592;no
44593;for your ec2 instance
44594;fun fact: a connection's bandwidth is bottlenecked by the smallest possible bandwidth along the entire network
44595;you could have an ISP that gives you a billioln billion billion gigabits per second downlink
44596;We can set bandwidth speed for ec2 instance? When I created the ec2 instance it said Low to Moderate about network performance.
44597;but if the server can only send 50kb/s
44598;you will download at 50kb/s
44599;Bandwidth is something you CAN pay for
44600;if you do not have the option to modify how your ec2 instance's network traffic works with regards to bandwidth you aren't paying enough for your instance
44601;and you are almost certainly being throttled
44602;hmmm
44603;yeah it's a business fam
44604;they're not going to give you everything for free
44605;giving cheapo clients unlimited bandwidth is a super duper amateur mistake
44606;that's how you get hundreds and hundreds of skids running trackers and seedboxes and shit
44607;Could someone help me out
44608;That's what we're here for
44609;So I'm having some troubles understanding interfaces in go
44610;"```gopackage userimport time""type User struct { Id int CreatedAt time.Time Name string}type Repository interface { CreateUser(name string) User GetUser(id int) (User error)}type Controller struct { repo Repository}func NewController(r Repository) Controller { return Controller{ repo: r, }}func (c Controller) CreateUser(name string) User { return c.repo.CreateUser(name)}func (c Controller) GetUser(id int) (User error) { return c.repo.GetUser(id)}```"
44611;I made this controller with an interace that I'm going to hookup to a backend later
44612;I make a fake repo to do some unit tests while I work on it
44613;"```gopackage userimport ( errors"" time"")type FakeRepo struct { users []User}func (r FakeRepo) CreateUser(name string) User { u := User{ Id: len(r.users), CreatedAt: time.Now(), Name: name, } r.users = append(r.users u) return u}func (r FakeRepo) GetUser(id int) (User error) { for _ u := range r.users { if u.Id == id { return u nil } } return User{} errors.New(""UserNotFound"")}```"
44614;however my tests keeps failing
44615;"```gofunc TestController_GetUser(t testing.T) { r := FakeRepo{} c := NewController(r) u := c.CreateUser(""Ben"") a err := c.GetUser(u.Id) if err != nil { assert.Fail(t error on getUser"") } assert.Equal(t Ben a.Name)}```"
44616;okay
44617;add more logging
44618;the users lists keeps becoming empty
44619;to start with
44620;using debugging
44621;the debugger
44622;yeah no
44623;logging
44624;use the logging
44625;Ill look into what that is
44626;debuggers are a trap
44627;https://golang.org/pkg/log/
44628;this?
44629;yeap
44630;Thanks
44631;just print shit out
44632;print everything
44633;Wdym debuggers are a trap
44634;because when your application is being used in the real world you can't use a debugger to debug things
44635;unless you somehow get a core dump
44636;and that's only a snapshot of application state
44637;in the real world you log important data to some source
44638;I see because the real world app is never going to have a finish point
44639;and you use that to analyze the series of events that led to a breakage
44640;makes sense
44641;using a debugger in development tricks you into skipping over the tools that you'll eventually need
44642;it's not an intrinsically bad thing
44643;useful
44644;but
44645;don't rely on it as your ONLY tool
44646;if a thing implements an interface does it need to a pointer here
44647;func (r FakeRepo) GetUser(id int) (User error) {
44648;to
44649;func (r FakeRepo) GetUser(id int) (User error) {
44650;This is quite a take for something like this deezy lol
44651;Logging is going to get you the same result
44652;yeah and you don't have to fuck with breakpoints
44653;`r.users = append(r.users u)` your `r` is by value
44654;and it works the same way between prod and dev
44655;If you want to modify the receiver it needs to be a pointer
44656;I thought that GO does that automatically
44657;r.users is the same as r.users
44658;sorry I'm crashing through go
44659;or do you mean in the headers
44660;It automatically references and dereferences with the dot operator. The receiver type is separate.
44661;My brother was saying something about interfaces being treated as pointers automatically
44662;Because of `(r FakeRepo)` the `FakeRepo` is taken by value.
44663;You can't modify the receiver (and have the changes persist after the method exits) if it's byvalue.
44664;yeah makes sense
44665;thanks
44666;You'll need the receiver to be a pointer (`(r FakeRepo)`) to modify it
44667;Nice! thanks
44668;None
44669;Awesome! üôÇ
44670;> My brother was saying something about interfaces being treated as pointers automatically@Dogo if your brother is especially knowledgeable about runtime details he might have been talking about the fact that assigning a value to an interface type forces that value to be heapallocated in most situations so that the garbage collector can be sure of what things are or are not references
44671;How do I profile a Go application that keeps running in my backend? E.g. it continuously pulls data from DB processes it and throws it back into DB. Would the net/http/pprof be used in this case?
44672;yeah you'd use net/http/pprof
44673;lol I made an app like that in C
44674;it was hell
44675;I had a daemon that just is an infinite for loop that listened on a port and when I got a request handed it to a worker thread
44676;So I don't understand how I can both require service interfaces for my bot but also have transactions for multiple operations. As is the bot requires a db which has a single function that creates a transaction. And then from the transaction I can call my crud methods. So it seems as though the transaction implements all the services but should I just have a transaction field in my bot that a change constantly and then use that?
44677;@deezy So I launched another instance t3a.small to be precise
44678;This one got like 5 Gigabit network
44679;And result is actually worse! Now its taking ~57 seconds üòê
44680;@_diamondburned_ hey so how do you navigate the docs of gotk3?
44681;google the method name each time or just use gnome's docs?
44682;@r3velated just use Google
44683;yeah bet
44684;hm
44685;well use Google to search up the class
44686;then Cf the method
44687;i wanted to create a small local page so when you click on the method it searches gnome docs but gnome docs doesn't allow requests like this
44688;was already half way done
44689;If I do what I said above wouldn't I run into issues with concurrency. Like suppose I wanted to use two different transactions that async I can't use the bot state.
44690;having transactions outside the datalayer is causing a lot of issues
44691;@r3velated just parse their gir xml
44692;https://github.com/diamondburned/handy
44693;if i only knew what that means
44694;look at how I parsed the gir file to add documentation to my generated bindings
44695;so you mean store all their methods inside a file?
44696;i was thinking about this yes
44697;i already have a local copy of their docs
44698;their docs are generated from that gir file
44699;and no not store
44700;that gir file came from gnome
44701;I didn't store anything myself
44702;@_diamondburned_ mate I changed aws ec2 instance and it is still taking ~57 seconds to show 20 images ( about 300 kb each)
44703;"log.Printf(""Finished Reading File"") is executed at the end of the function after reading all the files"
44704;and it is being printed like within 1  2 seconds
44705;it was a long time ago I was using pointers with C from what I can remember, references a memory address  and& references a value of that address is that correct?
44706;dereferences a memory address
44707;I think you just used the wrong word there though
44708;Should I just not use transactions outside the datalayer or is there a way to do that while also having service interfaces
44709;just make a function that returns a struct wrapped around a transaction
44710;then you can separate read and write txs probably
44711;HEllo guys is there an up to date enet library for go? http://enet.bespin.org/
44712;@HankMoody where is this 57 second measurement coming from
44713;like is it just i curled this endpoint and it took 57 seconds to get back or like my app fetched this and it took 57 seconds to do all the stuff and render and all that
44714;"Hi Im getting an error when joining a table in sqlx ` Error 1054: Unknown column \'posts.seo\ in \'field list\ `Query`s.db.Get(&p SELECT posts. posts.seo \'seo_meta.seo\ posts.meta \'seo_meta.meta\ FROM posts LEFT JOIN seo_meta_options ON posts.id = seo_meta_options.page_id WHERE posts.id = ? id)`Struct```type Post struct { PostSeoMeta `db:""seo_meta""` ...}type PostSeoMeta struct { ID int `json:""""` PageId int `json:"" binding:""required|numeric""` Seo json.RawMessage `json:""seo""` Meta json.RawMessage `json:""meta""`}```Any ideas?"
44715;Ok got it had to change my naming in the query
44716;What's that `` thing in structs
44717;@Vrganj https://www.digitalocean.com/community/tutorials/howtousestructtagsingo
44718;Ah struct taga
44719;Tags
44720;Thanks
44721;üëç
44722;"Is it possible to set validation on a field `binding` to required in only certain cirumstances? For example on creation of an entity the id is not required but on update it is?```Id int `db:""id json:""id binding:""required,numeric""````"
44723;Not with stdlib
44724;"Ah ok no work around in gin? This is a bit pokey:``` var post domain.Post if err := g.ShouldBindJSON(&post); err != nil { Respond(g 400 Validation failed err) return } id := g.Param(""id"") if id ==  { Respond(g 500 Validation failed validator.ValidationErrors{ hello"": &validator.FieldError{ Field: id"", Tag: Hello"", }, }) return }```"
44725;```decoders := []func(r io.Reader) (beep.StreamSeekCloser beep.Format error){```
44726;`flac.Decode mp3.Decode wav.Decode vorbis.Decode,`
44727;`}`
44728;this doesn't compile since some take io.ReadCloser
44729;they won't accept a reader
44730;well yeah
44731;idk how to work around that
44732;a `io.ReadCloser` is a `io.Reader` but an `io.Reader` is not an `io.ReadCloser`
44733;i was tryna reduce code duplication
44734;but seems the signatures differ
44735;guess i can have 2 `[]func...`
44736;> i was tryna reduce code duplicationwhat are you even doing now
44737;multiple decoder logic for a beep program
44738;i mean the code
44739;https://github.com/skuzzymiglet/metro/blob/master/main.go#L56
44740;the io package has a function to wrap an io.Reader into an io.ReadCloser
44741;tbh the function looks fine
44742;its clear whats going on
44743;Oh its a slice
44744;MB
44745;Why not make them both take one or the other
44746;are you able to do the opposite
44747;like add a function with the sig `func(r io.Reader) (beep.StreamSeekCloser beep.Format error)` to a slice of `func(r io.ReadCloser) (beep.StreamSeekCloser beep.Format error)`
44748;i would not think so
44749;Probably not
44750;but tbh i think doing all that would just complicate this function
44751;Take an io.Reader and assert to io.ReadCloser within
44752;and only save you like 3 lines
44753;i don't like the duplication though
44754;Why do any take io.ReadCloser
44755;Instead of closing outside
44756;its not really duplication
44757;you are doing 4 distinct things
44758;What would be duplicated?
44759;in their current function
44760;i wish that beep had a format laoding thing like `image` has
44761;would make life easier
44762;But what would be duplicated
44763;ik a bit of repetition is gostyle but it's really not elegant there
44764;ik it's clear but seriously
44765;üö∂
44766;welcome to golang lol
44767;image makes it completely bearable tho
44768;"`import _ image/png""`"
44769;yell at the guy who made the lib to make it better
44770;thats going to be the only solution to that part
44771;ye but he doesn't really check out issues
44772;34 open rn some from 18 months ago
44773;https://github.com/faiface/beep/issues
44774;How fast is JsonMarshal?
44775;depends
44776;On a like 10 field struct
44777;depends
44778;are you unmarshalling 10000 of these
44779;With primitive types
44780;are you doing 1
44781;Let's say 1000
44782;probably fast enough to not worry about
44783;I mean I'm not but I'm just curious
44784;https://dave.cheney.net/highperformancejson.html
44785;this goes over some issues with how it works and its speed
44786;but you would have to benchmark to tell if json is a bottleneck
44787;i would be willing to bet it wont be in most cases
44788;when I'm marshaling a struct into json is there a way to add the brackets?
44789;"```go e err := json.MarshalIndent(write ) err = ioutil.WriteFile(""record.json e 0644) ```"
44790;"currently getting ```json{ DestinyNow"": 57, DestinyRecord"": 57}```"
44791;"when im looking for ```json [{ DestinyNow"": 57, DestinyRecord"": 57}]```"
44792;Make it an slice
44793;If you marshal an object you get an object
44794;Pretty straightforward
44795;Do struct tags need backticks or can they be any kind of string
44796;The former
44797;Ah makes sense then
44798;Wait no
44799;No it doesn't
44800;Why is that?
44801;Actually it can be any string literal iirc
44802;Is there a way to control an Android VM with Golang? And optionally a way to start the VM (with Docker/VirtualBox) via GoLang?
44803;Yeah
44804;It can
44805;https://golang.org/ref/spec#Struct_types
44806;What do you mean by control
44807;Was about to paste that :)
44808;TIL
44809;I assume backticks are used as to not have to escape double quotes
44810;Send key stroke/find element on the screen
44811;It‚Äôs for automation test
44812;If another language can then so can go
44813;Are go pointers just references?
44814;The term reference isnt very well defined
44815;Go pointers are pointers
44816;As far as c++ is concerned
44817;So I can like ++ a pointer and stuff
44818;No
44819;> If another language can then so can go@Str≈ìm do you know a lib?
44820;Then?
44821;If I can't do that they're as featureful as references
44822;The language limits the operations you can perform on them
44823;If you wanna perform unsafe operations you use the unsafe package
44824;C++ references cant be set to nullptr Go pointers can be set to nil
44825;Just because the capabilities are limited at the language level doesnt make them not pointers
44826;Hi if i have json string from API response and i want to get one value only from the json string do i use slice or marshal/unmarshal?
44827;Data looks like this i want to get Total Confirmed value if the input is Country
44828;ignore the map i might do it the wrong way
44829;Slice and marshal/unmarshal are two distinct unrelated concepts
44830;yes but i'm quite new to this
44831;If you've got a map structure just traverse the map looking for the path you want
44832;"dummy question why does this symbol is present after the fm.Printf() output?```go binary := 4 fmt.Printf(""%b binary)# output:100%```this `%` in the end"
44833;That is your terminal showing there was no newline
44834;the actual output doesn't contain it
44835;hmm got it
44836;tks
44837;"!go```go binary := 4 fmt.Printf(""%b binary)```"
44838;None
44839;you can use #testing1 if you are unsure
44840;"I feel like I\'m doing something real stupid here. I have an aws lambda being called by a httpapi gateway. I am sending the request:```{ ping"":""test""}```Which in the lambda is being seen as `[123 10 32 32 32 32 34 112 105 110 103 34 58 34 104 101 108 108 111 34 10 125]`I am trying to unmarshal it into a struct:```type pingRequest struct { ping string `json:""ping""`}``````ping := pingRequest{}err = json.Unmarshal([]byte(request.Body) &ping)```I am not getting an error however the struct is not being populated (printing results in `{}`).Should I strip out the whitespace from the request? Or is something else at play here"
44841;Make sure your json fields are exported
44842;Change `ping` > `Ping`
44843;Oh duh wow lmao
44844;thanks üòì
44845;Yep indeed that was it...
44846;@Deleted User depends on what you want to control
44847;pick a vm software and look for bindings
44848;https://github.com/budtmo/dockerandroid + https://github.com/kunaldawn/goandroid
44849;can do it i think
44850;"> @HankMoody where is this 57 second measurement coming from@Madxmike On the Flutter app. My app fetched this and it took 57 seconds to get all the data from the server. I watched the download speed for the emulator using Little Snitch Network Monitor"". Okay you may say now that its just a stupid emulator and they are supposed to be snail slow but I pushed the build into my iphone X which is connected to 150mbps connection and it still takes ~57 seconds to fetch 20 images from the server.I used: log.Printf(""Finished Reading File"") statement to know whether if it the opening of files and reading them is taking so much time but I found that it is only taking like 1  2 secs for it do all that as I can see log.Printf(""Finished Reading File"") printed on console within 1  2 secs of pushing button on my Flutter app."
44851;I even got a significantly powerful EC2 instance on aws to be sure that its not server's internet speed behind this problem and now the server has like 5 Gigabit connection so Im guessing its not the problem
44852;Its very frustrating
44853;I went to sleep with a big headache
44854;whats the actual go code
44855;Our favourite tool can help you debug this: The profiler
44856;Yeah you gotta profile both ends
44857;instead of watching coffee grounds (koffiedik kijken is the Dutch idiom)
44858;"anyone know what this output means? ```go var v int fmt.Printf(""%p\ v)```output: `%!p(int=0)`as far I undertood int=0 because v variable was initialized and assigned a value 0 right? what is %!p ?"
44859;Means you used the wrong format verb for the type
44860;You're using %p but not passing a poiner
44861;so fmt shows an error and displays the type it is trying to print
44862;then %!p is a error message?
44863;Of sorts i guess
44864;the whole thing is an error message
44865;not seeing what you planned to see is an error message
44866;Basically saying you wanted to format as a pointer but i didnt get a pointer
44867;"tl;dr format verbs actually mean something. you can't just use them arbitrarily"
44868;It is telling you the verb doesn't match the type % not pointer ( <the type it was> )
44869;go has types
44870;they matter
44871;btw: watching coffee grounds means making a prediction that may or may not be true.
44872;But #offtopic üòõ
44873;Oh in english they use tea leaves afaik
44874;> whats the actual go code@Madxmike @deezy https://pastebin.ubuntu.com/p/R2QS7tV2yW/
44875;Note that Im a beginner and code will look shitty as Im just trying to connect flutter and golang server through grpc.. Just trying to make it work with performance.
44876;i mean
44877;reading 20 images off the disk and also sending them over the network
44878;@Sgt_Tailor Sadly I have no idea how where to get that profiler and how to use it at all
44879;have you timed how long those reads take?
44880;?go profile
44881;?go pprof
44882;really?
44883;https://blog.golang.org/pprof
44884;your code is doing a bunch of things
44885;or rather
44886;one thing many times
44887;"> have you timed how long those reads take?@deezy Like I mentioned before it prints log.Printf(""Finished Reading File"") in 1  2 secs"
44888;"I also thought that could be the problem but I noticed it is showing up log.Printf(""Finished Reading File"") in 1  2 secs"
44889;Could send multiple files concurrently if you used a normal http request
44890;A request per file
44891;As any website would
44892;Prevent disk reads by keeping the images in memory
44893;If you want ultimate speed with the trade off of needing more memory
44894;Well because you read everything into memory now _anyways_ the more memory part isn't true
44895;i mean i think the ultimate problem is that you're probably still not getting the bandwidth off your ec2 instance that you think you are
44896;you keep saying my phone has 150mbs
44897;but that's only half of what matters
44898;> I even got a significantly powerful EC2 instance on aws to be sure that its not server's internet speed behind this problem and now the server has like 5 Gigabit connection so Im guessing its not the problem@HankMoody @deezy
44899;i saw you say that
44900;i don\'t believe that a small instance would have 5 gigabits
44901;So 5 Gigabit on aws ec2 instance side too
44902;Thats still slow?
44903;no i mean i do not believe that aws would give you 5 gigabits on a `small`
44904;5 gigabits is a disgustingly huge pipe for a single ANYTHING
44905;you share a SINGLE gigabit pipe with an entire blade or an entire hosting location if you're a smaller operation
44906;https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2resourcelimits.html
44907;this seems to point to where you can find what kind of caps you're under the effect of
44908;The only reference to 5Gbit is EC2 to EC2 in a private network
44909;t2.small has low to moderate network performance whatever that is
44910;Couldn't find the 1 Gbit per blade though @deezy
44911;pointers doesnt store values only addresses what would be 42 in this case? a memory address?```goanswer := new(int)answer = 42```
44912;No you assign 42 to the dereferenced pointer
44913;you are setting the value at `answer` to 42
44914;so the value of answer is now 42
44915;`answer` dereferences `answer`
44916;yeah that's what i'm sayinnnnnnnnnn
44917;what about low to medium performance says five gigabits
44918;> so the value of answer is now 42@Sgt_Tailor that's strange because if I output answer value the value is `824633835640`
44919;That is the pointer you are printing
44920;Not the value
44921;@HankMoody I used to literally work for a web hosting company I know exactly how this works. You slap a vague label on the shit cheap clients buy like low to moderate performance so you don\'t have to explicitly say you\'re not paying enough for us to give you dedicated bandwidth you\'re being throttled to hell because shockingly that will be a huge turn off to clients
44922;"!go```go a := new(int) a = 42 fmt.Printf(""%#v\ a) fmt.Printf(""%#v\ a)```"
44923;None
44924;see: https://www.webhostinghub.com/hostingplans
44925;all the plans list bandwidth as unlimited
44926;UNLIMITED POWER
44927;but 1) that doesn't mean you have unlimited gigabits per second they just don't charge you per byte2) i know for a fact that the system administrators monitor traffic and clients get pinged for using excessive bandwidth that impacts other clients
44928;marketing material is just that
44929;marketing
44930;lies we tell to get people to buy our shit üôÉ
44931;Cant come up with a name for a go file that contains register/login/logout functions? Any ideas?
44932;auth?
44933;I thought about that but does auth covers register as well?
44934;I always thought it only covers login process
44935;confirming registered users identity etc.
44936;I wouldn‚Äôt sweat it too much tbh. It makes sense for it to be in the same package as the rest and I don‚Äôt think anybody will be confused by its being in the auth package.
44937;Yeah I'm probably overthinking it lol. thnx
44938;registration is definitely part of an auth system
44939;im trying to get my request's ip but it isnt working the only headers on my request are the ones i set
44940;even r.RemoteAddr returns
44941;Where are you trying to get this? On incoming requests in a handler or on outgoing requests that you're making?
44942;outgoing
44943;See: ```go// This field is ignored by the HTTP client.RemoteAddr string```
44944;o
44945;so i cant get the ip?
44946;Not directly via an outgoing request no. There are plenty of wellestablished methods for IP discovery though.
44947;If you're looking for a fairly simple HTTP request there are services like https://myexternalip.com/raw or https://ifconfig.co that you can use. You could also look into services that operate directly over TCP or UDP rather than layering on the HTTP abstraction but that's probably unnecessary unless you've established a performance issue.
44948;The core thing to realize here is that (at least in IPv4) you have no way of knowing your external IP address unless somebody else tells you (well...not counting interfaces that are directly bound to an internetfacing IP address but you already know if that's the situation you're in :p). That's NAT coming into play üôÇ
44949;Could even end up having a different outbound IP depending on the IP you are connecting to
44950;How would I be able to obtain the month in double digits directly? For example 08``` t := time.Now() i := int(t.Month()) fmt.Println(i)```
44951;"fmt.Printf(""%02d"",i)"
44952;"or fmt.Println(t.Format(""01""))"
44953;Nice cheers @stdio
44954;Hello everyone VS Code does not display variables in the structure panel. What to do?I have a supplement Go plugins installed. I think the case is in a changing PATH environment. How should they look?In other languages for example Rust the variables are displayed. I need exactly Go. I don\'t like this situation.
44955;"I read somewhere Go doesnt allow pointer arithmetics it doesnt count as pointer arithmetic?!gob = &ab = b + 1fmt.Printf(""A value %v / B value: %v\ a b)"
44956;When using contexts i am using WithTimeout on a parent context for a one time use thing however once i do this the deadline is then passed onto the parent aswell :rooThink:
44957;That doesn't do any pointer arithmatic @converge
44958;@converge again you're dereferencing a pointer there
44959;`b` dereferences `b`
44960;With pointer arithmetic we mean making calculations on the _pointer_ itself. Making it point to something different in memory
44961;so im unsure how i would inherit from a parent context without that timeout being put on the parent too
44962;it shouldn't be on parent
44963;maybe you are assigning some stuff wrong?
44964;"in this case `b` is derefrencing `a` ?```goa := 10var b intb = &afmt.Printf(""%v\ b)```"
44965;nah
44966;b is a int pointer
44967;the next line takes the pointer of `a`
44968;`b` is a reference to `a`
44969;its essentially```goctx cancel := context.WithTimeout(sh.ctx time.Second2)defer cancel()for { err = sh.wsConn.Read(ctx) ...}``` then other parts of the code are then starting to receive context deadline exceeded errors
44970;what parts though
44971;other goroutines previously started
44972;if you use `ctx` it's gonna have a timeout
44973;sh.ctx won't have the timeout
44974;then sh.ctx is timing out for some reason
44975;:rooThink:
44976;got it. so there is no dereferencing in my snippet?
44977;There is
44978;`b` is dereferencing `b`
44979;b dereferences to yield the value of a
44980;which is what b points to
44981;can I say b is dereferencing the value of a ?
44982;That would be false. b dereferenced b
44983;b is a pointer pointing to a
44984;!go```go a := 0 b := &a a = 99 fmt.Println(b)```
44985;None
44986;`b` simply contains the address of `a`. Whenever you want to lookup what it contains you dereference it to get the value of whatever it is pointing to in this case a. Which value is 99
44987;<https://tour.golang.org/moretypes/1>
44988;b dereferenced b
44989;I understand how it works now and the expected values but I dont know why this dereferencing things is so hard to get.is it correct? `b` is dereferencing `b` and the address of b contains the data/value of `a`?
44990;b contains the address of a. The value is a is located at said address
44991;by dereferencing b you get the value at that address
44992;The last statement you made is correct assuming that you mean the address that b contains. _NOT_ the address of b itself that would be a double pointer and a different conversation
44993;hmm now I got! thanks a lot
44994;I'll save it to read it again and again üòÜ
44995;No problem üôÇ
44996;Then you should also know why this prints `false` and then `true`
44997;!go```go a := 10 b := 10 c := &a d := &b  fmt.Println(c == d) fmt.Println(c == d)```
44998;None
44999;1st false: and b have different memory address and the second if case is comparing 10==10 right?
45000;Yup
45001;\\o/
45002;Hi all if i call an API and get the JSON response as string JSON.How can i loop through JSON array and get 1 value base on condition?
45003;Sample data
45004;You can create a data structure this unmarshals into and loop through that
45005;I\'ve done that but it keeps getting cannot unmarshal object into Go value of type error
45006;Then the data structure isn't correct üòâ
45007;If you share what you've tried and the error message we can help
45008;i see i've tried it for 2 days alr with no result üò©
45009;If it's okay with you can I have some of your time to do screen share? Do you do that here?
45010;If not then it's ok
45011;Don't really do that. It is easiest for all parties involved if you just share the code you're using to decode the json
45012;How do i share? In go playground?
45013;playground pastebin hastebin
45014;one of those is fine
45015;github gist or your repo if you have one works as well
45016;you can just paste the structure here
45017;the json doesn't seem that large anyway
45018;https://play.golang.org/p/kCRQ1e9bOAH
45019;playground unable to call rest api idk why
45020;the json is huge i just simplify it
45021;what's the full error
45022;and playground doesn't have internet access
45023;You'll need to paste the json in there
45024;cannot unmarshal object into Go value of type error
45025;this is the error
45026;export the type
45027;ActiveCase
45028;instead of activeCase
45029;if i create a variable for the json i hit an issue :invalid digit 9 in octal literal
45030;and ActiveCases instead of activeCases
45031;Please share the entire error
45032;And the json
45033;https://play.golang.org/p/jCKycf0DvKP
45034;json is there but got error invalid digit
45035;i'm not sure why
45036;You don\'t escape the
45037;fixed it with some backticks
45038;Do you guys know of any good image compression / resize libraries?
45039;The struct doesn't match the json btw
45040;import image
45041;Or does go have stuff to handle this?
45042;Oh lol
45043;Presuming go can convert to webp too? As its google?
45044;You are passing is a slice of ActiveCases but the json isn't justa list
45045;It is a map which a list
45046;the struct is created via jsontogo
45047;100% it wasn't
45048;Not from the entire response at least
45049;image does handle the basics not even sure if it can resize (I think it can by drawing into another image)
45050;<https://godoc.org/golang.org/x/image/webp>
45051;at most there are the x packages
45052;I know this @Valshe because these are the autogenerated structs that do match: https://play.golang.org/p/Fhw3K8ma_m
45053;x/image/draw provides resizing operations
45054;https://github.com/h2non/bimg Seems the easier option but not sure about performance i suppose there is an extra dependcy too
45055;meh c bindings
45056;Ah üò¶
45057;@Sgt_Tailor thanks a lot idk what happen to the structure i generated
45058;None
45059;Np glad you figured it out
45060;When you get that error in the future it means the structure doesn't match the json
45061;hey is there any way to use something like `len()` as the declearing int for how long an array is? heres the error code `nonconstant array bound len(Blocks)`
45062;is there a way i can make a const var out of `len(Blocks)` or must i just suffer lel
45063;`barStringArr := [len(Blocks)]string{}` is where im getting the error
45064;the way to fix this is to not use arrays because it's almost certainly worse than just using slices
45065;the size of an array is part of its type which is why it has to be constant
45066;i need an ordered array and it can be constant
45067;sounds like you want a slice
45068;or better explain why you don't want a slice
45069;heres the problem if i define a slice then try to initize say `slice[3] = 4` it gives an error if i havent defined `slice[02]` yet
45070;`slice := make([]int 4)`
45071;Ja
45072;now it works
45073;okay dafuq windows
45074;"```gofunc (c http.Client) PostProxy(server string endpoint string proxy string v interface{}) (http.Response error) { body err := json.Marshal(v) if err != nil { return nil err } request err := http.NewRequest(""POST server+endpoint bytes.NewBuffer(body)) if err != nil { return nil err } proxyURL err := url.Parse(proxy) if err != nil { return nil err } c = &http.Client{Transport: &http.Transport{Proxy: http.ProxyURL(proxyURL)}} request.Header.Set(""UserAgent Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML like Gecko) Chrome/85.0.4183.102 Safari/537.36"") return c.Do(request)}```im sorry for the general quesiton but does this look right? i was having issues before i made some revisions and i think this should work just want confirmation lol"
45075;I am telling it to ping `192.168.0.154` but windows pings `.117`
45076;@zephyrtronium what does that do exactly?
45077;makes a slice that has the first 4 initized to 0?
45078;it allocates a slice with a length of 4
45079;yes
45080;ok based thanks a lot
45081;<https://tour.golang.org/moretypes/13>
45082;"```gofunc ConnectDB() mongo.Collection { // Set client options clientOptions := options.Client().ApplyURI(""your_cluster_endpoint"") // Connect to MongoDB client err := mongo.Connect(context.TODO() clientOptions) if err != nil { log.Fatal(err) } fmt.Println(""Connected to MongoDB!"") collection := client.Database(""go_rest_api"").Collection(""books"") return collection}```Is there a downside for calling the above function inside init() ? I was reviewing this https://medium.com/@faygun89/createrestapiwithgolangandmongodbd38d2e1d9714 example and I realized this person calls connectDB() everytime he needs to access the collection even though he only has one"
45083;putting stuff in init is hiding implementation details
45084;Not a fan
45085;Making a connection before `main` is even run is weird
45086;what about creating a db struct that has collection as field then initializing it. The question is : Is avoiding database calls a good idea?
45087;I like how uber describes it
45088;<https://github.com/ubergo/guide/blob/master/style.md#avoidinit>
45089;wow already liked this guide
45090;invalid character < looking for beginning of value
45091;im getting this error
45092;from ``` body err := ioutil.ReadAll(response.Body) if err != nil { return nil &Error{FuncError: err} }```
45093;decoding json I guess?
45094;you got a html response instead of json response
45095;oh
45096;:discordgo:
45097;yeah i got rate limited
45098;lol
45099;Sup guys I hope you could help me with such a weird Issue :``` for _ r := range tx.WafInstance.Rules.GetRules() { if r.Phase != phase { continue } //we always evaluate secmarkers if tx.SkipAfter != { if r.SecMark == tx.SkipAfter{ tx.SkipAfter =  }else{ continue } }```For some reason I\'m receiving invalid memory address or nil pointer dereference and I\'m comparing strings o.o... It only happens when I reach 1000+ concurrency
45100;which line
45101;this is the faulty line: r.SecMark == tx.SkipAfter
45102;either r or tx are nil
45103;no they are not
45104;yes they are
45105;and strings wont return nil pointer
45106;computer doesnt lie
45107;yes this isnt a strings issue
45108;r and tx arent strings
45109;I tried with and if tx == nil ||r == nil
45110;you want &&
45111;those are the only things that could be nil
45112;not ||
45113;:robpike:
45114;either way
45115;either r or tx is nil
45116;thats irrefutable
45117;lol I will add a condition hold on
45118;theres genuinely no arguing that one of the two is nil
45119;so you trying to access SecMark or SkipAfter causes the nil pointer deref
45120;failed again
45121;and look:
45122;if tx.SkipAfter !=  && tx != nil && r != nil{ if r.SecMark == tx.SkipAfter{ tx.SkipAfter =  }else{ continue } }
45123;what line is it complaining about now
45124;if r.SecMark == tx.SkipAfter{
45125;are you sure
45126;almost guarantee its `if tx.SkipAfter !=  && tx != nil && r != nil{`
45127;if tx is nil youll nil deref before even checking if tx is nil
45128;do you not see that
45129;but anyway If you dont instantiate a struct a string will always be  (?)
45130;but if tx is nil
45131;The order of statements is important there
45132;The 0 value of a string is  yes
45133;but that's irrelevant to this problem
45134;you will nil deref when doing `if tx.SkipAfter != `
45135;because tx is nil
45136;and youre trying to access a field on nil
45137;causing the panic
45138;it cant be nil
45139;because its inside a for
45140;look:
45141;the check itself is broken
45142;for _ r := range tx.WafInstance.Rules.GetRules() {
45143;it would have failed before
45144;alright give me the entire stacktrace
45145;and a screenshot of the code in your editor
45146;error while processing filter during request: corazaWAF: runtime error: invalid memory address or nil pointer dereference (goroutine 815 [running]:github.com/zalando/skipper/proxy.tryCatch.func1(0xc003bf57f0) /mnt/d/goprojects/pkg/mod/github.com/zalando/skipper@v0.11.151/proxy/proxy.go:723 +0xc8panic(0x176d2c0 0x25c84e0) /usr/lib/go1.13/src/runtime/panic.go:679 +0x1b2github.com/jptosso/corazawaf/pkg/engine.(Transaction).ExecutePhase(0xc006dc3680 0x2 0x0) /mnt/d/goprojects/src/github.com/jptosso/corazawaf/pkg/engine/transaction.go:637 +0x138main.(CorazaFilter).Request(0xc000928be0 0x1b12ae0 0xc002f89c20) /mnt/d/goprojects/src/github.com/jptosso/corazawaf/cmd/corazawaf/skipper.go:74 +0x13egithub.com/zalando/skipper/proxy.(Proxy).applyFiltersToRequest.func1() /mnt/d/goprojects/pkg/mod/github.com/zalando/skipper@v0.11.151/proxy/proxy.go:759 +0xccgithub.com/zalando/skipper/proxy.tryCatch(0xc000e15810 0xc000e157f0) /mnt/d/goprojects/pkg/mod/github.com/zalando/skipper@v0.11.151/proxy/proxy.go:731 +0x57github.com/zalando/skipper/proxy.(Proxy).applyFiltersToRequest(0xc0000c3520 0xc000928c00 0x3 0x4 0xc002f8)^Csignal: interrupt
45147;None
45148;is that the same code during the run that caused that stacktrace
45149;yes
45150;exactly
45151;That's not showing the lines in question
45152;hold on
45153;nope
45154;yea you didnt show us what it mentioned
45155;not to mention the code in that screenshot is broken
45156;None
45157;L637
45158;None
45159;now it is
45160;is that /mnt/d/goprojects/src/github.com/jptosso/corazawaf/pkg/engine/transaction.go
45161;yes
45162;its actually in github
45163;www.github.com/jptosso/corazawaf
45164;I thought it could be a bug and it was another line but I debugged each case and the only line with error was that one
45165;between 637 and 636 put `fmt.Println(tx r)` for me please rerun show the output + stacktrace and the code
45166;I can't üò¶
45167;we are talking of millions of messages
45168;literally
45169;it would take hours lol
45170;You were able to show the stacktrace
45171;It would be right in front of that
45172;something aint adding up then
45173;either theres a discrepancy between the code ran and the code shown to us
45174;keep in mind if I do 500 concurrency it won't happen
45175;if I run 1000 it will fail
45176;is it always the same line that panics every single time?
45177;I have uploaded a branch: faultybranch
45178;yes
45179;every time
45180;if I remove that line it all works!
45181;and also if I change it with if r.SecMark == test it will work
45182;or even if test == tx.SkipAfter
45183;feels like a race condition then perhaps
45184;so those cases are inconclusive
45185;a case of it will break eventually anyways
45186;I will try something
45187;``` tx.Mux.Lock() if r.SecMark == tx.SkipAfter{ tx.SkipAfter =  }else{ continue } tx.Mux.Unlock()```so it is a deadlock o.o
45188;So it was a race condition
45189;It's really weird for strings
45190;It isn't if the `tx` can be accessed from multiple routines
45191;next time I should start from that thanks guys üòÖ
45192;using the `race` flag is helpful
45193;how do you use race ?
45194;`go test race`
45195;oh thanks
45196;and then it tells you if it finds a race condition and fails the related test
45197;I added more concurrency and it failed again
45198;isnt a rlock enough?
45199;``` tx.Mux.RLock() if r.SecMark == tx.SkipAfter{ tx.SkipAfter =  }else{ tx.Mux.RUnlock() continue } tx.Mux.RUnlock()```
45200;Depends. Are the other parts of the code using the mux properly as well?
45201;Can just run with the race detector. Either `go run race ` or `go build race`
45202;It will scream to stderr if it detects a race
45203;You can make it log somewhere else if stderr isn't good enough: <https://golang.org/doc/articles/race_detector.html>
45204;you are right it screamed a lot
45205;Cool so you'll have to fix each of those issues
45206;great thank you for the tip! it will be so useful
45207;i would also recommend the dealock checking module
45208;help me out when i was getting deadlocks and couldn't locate why or how
45209;though i ended up removing the locks completely in the end after fixing it
45210;I have been using it to find deadlocks works great
45211;Hi I just installed `go version go1.15.2 darwin/amd64` then the vscode go language extension. It downloaded a bunch of stuff in `~/go` and I'm trying to see why some of the downloaded things are there. For example I'm trying to figure out what is this a dependency of: `~/go/pkg/mod/9fans.net/go@v0.0.020181112161441237454027057` i.e. what program depends on it?
45212;I see github.com/rogpeppe/godef imports 9fans.net/go/acme
45213;And then https://github.com/golang/vscodego/blob/859bb8a73bfd800c478aa2b853ec72a54de0aaee/src/goTools.ts#L264L269
45214;Go mod why
45215;That doesn't work in this situation no?
45216;It's good to see why a certain module is a dependency of another but not why a module is cached on disk (i.e. what project requires it) unless I'm unaware of all that it does
45217;"tip; Im trying GoLand ide its super nice worth a try"
45218;Ah right. No. It won't work for that
45219;so I went into the cache and ran `go mod why` and it downloaded some more stuff but didn't tell me why it depends on 9fans:```~/go/pkg/mod/github.com/rogpeppe/godef@v1.1.2 $ go mod whygo: downloading golang.org/x/mod v0.1.10.20191105210325c90efee705eego: downloading golang.org/x/xerrors v0.0.0201910111414101b5146add898# github.com/rogpeppe/godefgithub.com/rogpeppe/godef~/go/pkg/mod/github.com/rogpeppe/godef@v1.1.2 $ ```
45220;@ChillFish8 ayy same
45221;I rewrote lots of code to get rid of mutexes
45222;@awmorgan ```module github.com/rogpeppe/godefgo 1.13require ( 9fans.net/go v0.0.020181112161441237454027057```
45223;It's right there in the toplevel module declaration
45224;Ive managed to recycle a good 80  90% of any variables i make and also zero locks which is noice
45225;just about as performant as i can really make it without python bottleknecking stuff
45226;@Carson thanks. wonder why why doesn't show that
45227;If you want to know about `9fans.net/go` you need to run `go mod why 9fans.net/go`
45228;Just running `go mod why` asks why is this module downloaded which is a bit of a circular question no? üòÑ
45229;That's what this meant: ```# github.com/rogpeppe/godefgithub.com/rogpeppe/godef```
45230;ah ok thanks. Why did why download more things?
45231;it...shouldn't
45232;unless you changed something
45233;the go toolchain will more or less automatically detect new/removed(????) imports and update your module
45234;`golang.org/x/mod` was because you ran a `mod` command for the first time
45235;`golang.org/x/mod` depends on `golang.org/x/xerrors`
45236;thanks @Carson I guess this will tell you godefs depends on 9fans mod:```~/go/pkg/mod $ find . name .mod print0 | xargs 0 grep 9fans./cache/download/github.com/rogpeppe/godef/@v/v1.1.2.mod: 9fans.net/go v0.0.020181112161441237454027057./cache/download/9fans.net/go/@v/v0.0.020181112161441237454027057.mod:module 9fans.net/go./github.com/rogpeppe/godef@v1.1.2/go.mod: 9fans.net/go v0.0.020181112161441237454027057~/go/pkg/mod $ ```
45237;That works. üôÇ
45238;panic: runtime error: invalid memory address or nil pointer dereference
45239;goroutine 1 [running]:main.main() D:/path  Copy/main.go:59 +0x81cexit status 2
45240;main.go:59 is` sniped := utils.SnipeUsername(accounts[n].UUID snipe.Name accounts[n].Password refresh.AccessToken)`
45241;accounts[n] or refresh is nil
45242;or snipe
45243;ugh
45244;i suck at coding
45245;the real secret is
45246;so is everyone else
45247;Not me lelele
45248;true
45249;but look i have this unexplainable problem
45250;the only unexplainable problem is the nature of consciousness üôÉ
45251;@shaky what problem? The nil pointer?
45252;no seriously it has to do with minecraft api
45253;no
45254;> minecraft apiexplanation spotted
45255;bruh
45256;"this is the error i get ```{""error"":""Unauthorized"",""errorMessage"":""The request requires user authentication""}```"
45257;seems reasonable enough
45258;but i am providing auth token that i got 0.02 seconds later
45259;earlier
45260;None
45261;i mean i'm sure you are
45262;seems too domainspecific but post the code anyway
45263;but it sounds like that isn't something the authorization schema allows
45264;or you're doing it incorrectly
45265;hard to say
45266;without code/docs
45267;Inb4 wrong header name
45268;that moment when ur headers werent getting set
45269;still didtn work tho
45270;If you post the doc section on authentication and your code we could help
45271;so there is signals 134 which do certain things kill a program etc etc but you can still send signals 35+ and it'll send as `signal 35` etc is there a way i can watch for these signals? `signal.Notify(sigChan signal')` needs an `os.Signal` for the second arg if i dont give an arg and watch for all signals i can recieve these signals but is there anyway i could just listen for signal 35 or whatever?
45272;if i try to pass an int it obvi gives an error and i cant find anything about these on the godoc but they exist
45273;`syscall.Signal(35)`
45274;@Prophet
45275;https://golang.org/pkg/syscall/#SIGINT
45276;thanks
45277;np
45278;```gointernal map[string][]([]byte)```
45279;what does this mean?
45280;the `key` is a string
45281;and the value is?
45282;map of string to a slice of slice of bytes
45283;a slice
45284;double slice action there huh
45285;why would someone want to do that?
45286;when you need it
45287;why would someone want to have a two dimensional array of data?
45288;whatever case that requires that data structure
45289;hmm
45290;well why would you ever wanna store just one byte
45291;can't imagine
45292;indexable by a string key?
45293;impossible to magine any use case for that
45294;```gotype blob = []bytetype internal map[string][]blob```
45295;^ same thing
45296;i meant more like can someone give an example lol thats all
45297;i got it
45298;yeah you could uh
45299;represent chessboards
45300;this could be used as a versioned filesystem
45301;or something
45302;2d byte slices representing board state indexed by...player name? move name?
45303;whatever
45304;"```gointernalMap[""/path/to/file""] = []blob{ readFile(""/path/to/file 1), readFile(""/path/to/file 2),}```"
45305;try to do a inplace matrix tranpose https://play.golang.org/p/FqsIvF9SLJz```go mat := [][]int{{1 2} {3 4}} for i := range mat { for j := range mat[i] { mat[i][j] mat[j][i] = mat[j][i] mat[i][j] } } fmt.Println(mat)```I expect `[[1 3][2 4]` but it prints `[[1 2] [3 4]]`. Anything wrong with the code?
45306;actually it seems like I transpose twice?
45307;"package mainimport ( fmt"")func main() { mat := [][]int{{1 2} {3 4}} mat2 := make([][]int 2) for i := range mat { mat2[i] = make([]int 2) for j := range mat[i] { mat2[i][j] = mat[j][i] } } fmt.Println(mat2)}"
45308;> actually it seems like I transpose twice?@func yep you only want indices of a triangle
45309;yep you are transposing twice
45310;i.e. triangular matrix
45311;yep add a `if i>j` works
45312;"guys any idea with this context error?If I write:``` req := ctx.Request() c := context.WithValue(req.Context() tx asdfasdf"") req.WithContext(c) asdf := req.Context().Value(""tx"").(string)``` I get an error because the interface is nil and no interface{}If I change req.Context() directly to c it works what could be the problem? :C"
45313;yes
45314;it doesnt update req.Context()
45315;context is immutable
45316;oh you are right WithContext returns a shallow copy of r with its context changed to ctx. The provided ctx must be nonnil.
45317;thnx
45318;`req = req.WithContext(c)` should work
45319;ü•Ñ
45320;yep but I can't replace the original req object üò¶ it's from a library I would have to use another method
45321;why can't you :Thonk:
45322;there is a struct with a function ctx.Request()
45323;Its readonly
45324;```goreq = (req.WithContext(c))```
45325;no idea what you mean
45326;I wil try that
45327;bruh
45328;its not a pointer type
45329;it worked o.o
45330;fukd up
45331;`req` is usually `http.Request`
45332;because handler function signature
45333;thought it was non stdlib
45334;I don't think you have to do that
45335;but it works
45336;yeah idk
45337;I'm just guessing
45338;It actually worked
45339;95% of the time when I help here I make guesses
45340;lol that was a nice one thnx
45341;yeah np
45342;man I love pointers
45343;I'm still trying to figure them out for Golang it's like they are pointers but they are not .
45344;i mean
45345;they basically are
45346;they're pointers just not numbers like c says pointers are
45347;exactly
45348;well you can use unsafe
45349;safer pointers
45350;well I published the fixes: https://github.com/jptosso/corazawaf/ it's my first golang project I hope you could check it out
45351;"@heavendust #showmewhatyougot ;)"
45352;https://tenor.com/GiB6.gif
45353;skippy watches rick and morty? :gasp:
45354;is there a golang library for this?I know there are GPIO libraries but it also need a library to display imageshttps://www.amazon.com/dp/B077Z7DWW1
45355;I can handle GPIO libraries i am pretty sure i understand them
45356;however i dont know of any that can draw an image to this
45357;this is the python2 example it came withhttps://pastebin.com/ZcyYigHK
45358;just read the py lib's source code
45359;look at this C sample: https://www.ics.com/blog/howcontrolgpiohardwarecorc
45360;you could copy this with golang without the need of a library
45361;I can figure out how to control the GPIO its more displaying the image that is the issue
45362;As diamond said you could read the py lib's source
45363;and ihave no clue how to do that as i had to install the lib through the package manager
45364;and i dont know which lib is drawing the image
45365;might just figureout how to display X on it or Framebuffer...
45366;how do you not know what library you're using
45367;because i have never programmed python in my life
45368;atleast enough to make any of it stick
45369;You guys know of any flutter grpc golang project which implements all methods like Unary Server Streaming Client Streaming and BiDirectional Streaming?
45370;It would be a great help and would save my life and sanity
45371;@deezy I wasnt able to find a solution for the last problem about slow downloading of 20 images so I thought maybe server side streaming could help buttt buttt buttt now Flutter code is broken when I attempted that. After weeks of trying to make Flutter gRPC and Golang work together properly Im feeling like Im trying to reinvent the wheel or something like that. There are no resources to learn to integrate this properly and absolutely no examples for learning server side streaming with flutter
45372;you can just skip 2 of the 3 items you listed there
45373;i mean have you actually confirmed that go is the problem? have you profiled your code? 100% confirmed the network specs of the server?
45374;you're not encountering some arcane mystery
45375;you're using cheap aws vms
45376;and also flutter
45377;HelloI\'m currently trying to write a Discord bot in Golang and one little thing made me confused a little and I\'m too new in Go.I\'m using discordgo with dgc for a command router. I want to put commands in seperate folder and bring it under a package inside my project folder. If I understood it correctly I have to put `package <packagename>` on top of the every single file inside the package folder and import it as `<modulegiturl>/packagename`. I did it like this and when I try to use it on my main package vscode deletes the url from the import statement. Is this a problem with the extension or the way I\'m doing it? Since it deletes automatically I can\'t even test if it\'s the extension or just me. Thanks in advance
45378;it's probably deleting the import because you haven't used it yet
45379;your editor thinks it's smarter than you
45380;that's one of the big reasons i'm not a fan of the bigger ides
45381;I just realized I forgot to prefix with the package name... Smh.
45382;ahahaha
45383;or that
45384;life is hard
45385;Seriously I've been trying to use it like an hour this way :D
45386;life is hard and spelling is important
45387;Life is hard and I'm trying to learn Go :')
45388;> that's one of the big reasons i'm not a fan of the bigger ides@deezy Would that be ooftopic if I ask that you're using vim or something else? Because I normally use vim and I mostly do TypeScript but since I didn't wanted to add another plugin for go as I'm lazy for it
45389;i use vim and ALE
45390;ALE handles all the langauge specific shit in a nicely configurable way
45391;Nice.
45392;ALE is epic.
45393;you could use ALE w/ gopls for Go and tsserver for JS/TS
45394;I use CoC for that but I'll definetly check it out
45395;oh
45396;if it's already working sure
45397;idk if CoC does formatting
45398;ALE does both
45399;cocgo works just fine as vimgo or ale
45400;if you're already using coctsserver interface should be familiar
45401;could someone help me optional integrate headers into my get and post request functions
45402;"```gofunc Post(server string endpoint string v interface{}) (http.Response error) { body err := json.Marshal(v) if err != nil { return nil err } request err := http.NewRequest(""POST server+endpoint bytes.NewBuffer(body)) if err != nil { return nil err } request.Header.Set(""UserAgent ShakySniper/1.0"") return http.DefaultClient.Do(request)}```"
45403;theres the post and i tried a map once but it didnt work
45404;"optional integrate headers""?"
45405;well you're setting the header correctly
45406;i meant integrate optional
45407;well yeah for that one but i want to make it so i can have multiple headers set or just one
45408;okay?
45409;use if statements?
45410;i'm not sure what the question is
45411;im bad at making fnctions
45412;that's fine
45413;you can practice
45414;by trying to do this
45415;```gofunc Post(server endpoint v interface{} extraHeaders http.Header)```
45416;and i dont like making a whole thing for each request
45417;i thought about that too but wouldnt that require a header to be set already in the main function
45418;i only want to do a thing sometimes but not always
45419;that's an if statement
45420;ok
45421;"```goif extraHeaders != nil { for name values := range extraHeaders { request.Header[name] = values }}request.Header.Set(""UserAgent ..."")```"
45422;then pass nil if it's not needed
45423;best you could do without reinventing a bunch of extra bs
45424;okay thank you
45425;yeah np
45426;I'm writing an Inoreader (RSS reader) api client. for users to use the program the program needs to initiate an OAuth2 flow to access the API. what is the best way to manage the OAuth2 state? for example like keeping the user logged in so they don't have to authorize every time
45427;store it in a file
45428;in ~/.local/share probably
45429;I've read something about HTTPOnly cookies that are more secure and immune from CSRF and they don't involve any kind of local storage
45430;HTTPOnly protects against XSS not CSRF.
45431;ahh yeah
45432;SameSite is an intended mitigation against CSRF.
45433;the browser stores cookies for you
45434;Local Storage specifically refers to the Local Storage JS API which is a persistent arbitrary keyvalue store that the browser offers
45435;`mv $GOBIN/stuff $GOBIN/newstuff` or `go get o $GOBIN/stuff`
45436;storing the oauth info in a file is good enough I guess
45437;if i return `&struct` at the end of a function vs `struct` at the end
45438;in one case the struct is being created and a pointer is returned to teh struct
45439;and in the other the actual struct?
45440;correct?
45441;Yup
45442;`&` returns a reference to something
45443;i just put whatever feels right
45444;:robpike:
45445;unexpected comma expecting type
45446;why am i getting this error on this line
45447;"`headers := &http.Header{""UserAgent"": [""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML like Gecko) Chrome/85.0.4183.102 Safari/537.36""] Authorization"": [""Bearer:  + authToken] ContentType"": [""application/json""]}`"
45448;"because `[""stuff""]` is not valid syntax"
45449;oh
45450;how should i do it
45451;"to the parser it looks like you\'re trying to define an array of length `""stuff""` so it\'s looking for the type of the array; it doesn\'t know yet that `""stuff""` is not a number"
45452;hm
45453;so should i do
45454;"`headers := &http.Header{""UserAgent"": []string{""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML like Gecko) Chrome/85.0.4183.102 Safari/537.36""}}`"
45455;possibly
45456;idk
45457;:pepecry:
45458;maybe idk how http headers work
45459;seems reasonable though
45460;http headers are
45461;map[string][]string
45462;then yeah
45463;yay am smart
45464;Oops wrong channel my bad guys!
45465;np
45466;Suddently a door apears
45467;"might be cleaner just to do it in `headers.Add(""UserAgent Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML like Gecko) Chrome/85.0.4183.102 Safari/537.36"")`"
45468;you don't need &http.Header{
45469;"```gohttp.Header{ UserAgent"": {""test""},}```"
45470;you can elide the []string
45471;Go allows that
45472;oh
45473;Hey any good GPIO library for raspberry pi?
45474;i want to port over the controll buttons atleat for now
45475;the display i can do later
45476;I haven't used it personally but here is one I found on google that seems reasonably up to date. https://github.com/stianeikeland/gorpio
45477;Yeah i was looking at that one
45478;So i am recreating this python in go.. just the button mapping https://pastebin.com/aAcT7Rnj(so the entire while loop thing)
45479;itty problem
45480;None
45481;"```gopackage mainimport ( fmt"" github.com/stianeikeland/gorpio"")func main() { for { err := rpio.Open() if err != nil { fmt.Println(err) } // key UP if rpio.Pin(6).Read() == 0 { fmt.Println(""UP"") } // key DOWN if rpio.Pin(19).Read() == 0 { fmt.Println(""DOWN"") } rpio.Close() }}```"
45482;and i only held that for a split second
45483;fixed with `time.Sleep(150000000)` at beginning..
45484;now it polls at a REASONABLE speed
45485;I'm surprised that library specifically recommends polling rather than than providing a blocking API.
45486;Make sure you read the readme for rpio
45487;Not just the readme but rpio.go / godocs
45488;Depending on what convention the python library uses pin numbers could be different
45489;he probably wants a higher level library that draws onto a screen or sth
45490;You may need to set the pin as an input and in pullup mode with pin.Input() and pin.PullUp()
45491;how would you do set in go? python example as below```py>>> set([1,1,2])set([1 2])```
45492;I'll use a map as a counter then range through a map any other ideas?
45493;you can do a map where the values are bools
45494;e.g. `map[int]bool`
45495;like this https://play.golang.org/p/svWoSbStkpy
45496;```gofunc set(nums []int) []int { m := map[int]struct{}{} ret := []int{} for _ num := range nums { m[num] = struct{}{} } for k := range m { ret = append(ret k) } return ret}```pretty naive
45497;ah yeah if you already have the numbers you'd do that. Though if I need a set I usually create it as I'm doing w/e I'm doing
45498;that might not be applicable to your case though
45499;Is it best to store images in database and serve images using Go server or provide a link so the client mobile app can fetch it from the link?
45500;depends
45501;the two can mean the same exact thing
45502;"> provide a link so the client mobile app can fetch it from the link?you need a server to have the link to point to; Go server can be one"
45503;> Is it best to store images in database and serve images using Go serverserving images w/ a Go server is completely normal but please don't store it inside an SQL database
45504;Would anyone mind taking a quick look at some of my old code I'm picking up for a new project? https://github.com/knodesec/flexitty/tree/scratch
45505;There are a few examples of usage under examples/ the project I'm starting I'm going to rewrite the webshell stuff
45506;There's one bit I'm not 100% sure about and tha'ts the syscall using unsafe.Pointer() which I can't seem to find much information on
45507;> serving images w/ a Go server is completely normal but please don't store it inside an SQL database@_diamondburned_ Is it so normal really? and is it normal or best? And how about providing a link to a amazon S3 server? Which is best performance wise and which is best $ wise? And which route would you go?
45508;I'd host it in Go because I don't plan on going for something as overkill as S3
45509;I only pay like $5/mo for a dual core server
45510;good or not depends on what you're doing and what you're hosting
45511;serving some icons? that's whatever S3 is overkill
45512;serving images in an image board? totally S3
45513;> serving some icons? that's whatever S3 is overkill@_diamondburned_ Serving bunch (like 20) of images of size 500 x 500 or 1000 x 1000 pixels at a time. Lets say we are building an app for local real estate finding.
45514;that's barely any tbh
45515;S3 works ig
45516;If you have the money sure
45517;If I were you I wouldn't care until there's actual growth
45518;when it\'s just let\'s say xyz then no
45519;isnt EC2 instance supposed to be way more expensive than S3?
45520;A digital ocean droplet is like $5 and comes with like 25gb of disk space
45521;or you could use digital ocean spaces
45522;comparing s3 to ec2 makes no sense
45523;they are s3 compatible and cost $5 a month for 250gb of storage and 1tb of bandwidth iirc
45524;but for 20 images you can probably host them wherever you host your website with no problem
45525;but if you're not sure how to host images aws is probably not for you
45526;its not a very good bang for your buck as an individual or small company
45527;I would use S3 for my discord bot but at it really is not necessary and i just fallback to storing it locally and serving if on a webserver i cant upload to discords CDN :smallthonk:.Even tho it would be good for long term storing the benefits compared to paying monthly for an extra service that would be overkill and unnecessary doesnt add up ontop of the fact the cost per month will slowly increase whereas local disk space is not a problem for me and neither is bandwidth.
45528;I'm running the bots from my VPS anyways. Might as well use it for storage. That and the ISP/cloud provider I use doesn't have s3 compatible storage yet
45529;is there convention about when to write labels upper case and when to write them lower case? The only example in effective go uses an upper case label but the stdlib uses both upper case and lower case with seemingly no pattern...
45530;upercase is exported
45531;lowercase in unexported
45532;public vs private
45533;this goes for labels too? ü§î
45534;oh im sorry thought you were talking about variable names
45535;lol
45536;lmao no
45537;like break or goto labels
45538;i cant find anything on it
45539;imma just stick w/ uppercase coz that is what effective go does
45540;still weird tho
45541;> comparing s3 to ec2 makes no sense@Sgt_Tailor No sense even when we are using EC2's processing power to serve images to the client app? Wont that get expensive?
45542;One is pure storage the other compute with storage
45543;apples vs oranges
45544;Sending just urls to client so that client can download images directly from some cdn and sending image data itself is 2 different things right? So when golang is running on EC2 and it has to make calls to get images from file system and then send it to the client this whole process takes more processing power and processing power costs money.
45545;Is it cost effective to serve images by golang on ec2 instance or let the client app download it by itself receiving links to the images?
45546;i mean costing money is a relative term here
45547;if youre talking about having to pay $5/month more to have a larger ec2 instance or $5/month to have a s3 storage
45548;then it doesnt really matter
45549;probably just pick one and stick with it
45550;but if you are serving 100k users a day and need to send these images X amount of times to those users then yeah the cost efficencies of something like s3 is probably going to come into play
45551;What's the best way to check if the results of an sqlx query are null
45552;Scan and check for ErrNoRows
45553;Is #showmewhatyougot for finished stuff or also just for asking for feedback
45554;(of unfinished stuff)
45555;will StructScan ever return ErrNoRows?
45556;"```gofunc (d Database) GetGuild(guildID string) (guild.Guild error) { rows err := d.Queryx( select  from guild where id=$1"", guildID, ) var g guild.Guild if err != nil { return &g err } for rows.Next() { err = rows.StructScan(&g) if err != nil { return nil err } } return &g nil}```"
45557;this doesn't seem to work
45558;Does it return an error?
45559;nah
45560;`&{ 0 false <nil> <nil> <nil>}`
45561;I want it to return nil though if it doesn't find it
45562;```go if err != nil { return &g err }```hmmmm
45563;if I change &g to nil it still returns `&{ 0 false <nil> <nil> <nil>}` when I load the db
45564;"`fmt.Printf(""%#v\ thing)`"
45565;it'll be more descriptive
45566;i fucking hate how go prints structs out by default
45567;here\'s a bunch of values with absolutely zero context have fun
45568;yea
45569;`&guild.Guild{ID: MsgXP:0 LevelMsg:false ModroleID:(string)(nil) MuteroleID:(string)(nil) GreetMsg:(string)(nil)}`
45570;now it's this
45571;Much clearer
45572;Now you know which field is which
45573;yea I guess I could check ID
45574;because if ID is empty that means it didn't find it
45575;also
45576;add more logging
45577;don't just return the error
45578;should I return the error at all?
45579;yes
45580;definitely just looks like a bunch of zero values
45581;i'm just saying
45582;add a descriptive log message
45583;"`log.Printf(""error doing Specific Thing X: %s error)`"
45584;cause right now you THINK you're getting an error
45585;but you can't be sure
45586;ye
45587;nor are you sure where it'd come from
45588;add some of those statements to your error cases
45589;first thing to note: you're iterating on `rows.Next()` when you only need one record
45590;and you probably want to close rows if I recall correctly
45591;now if you get no records that loop does nothing
45592;and you end up with a zero value
45593;what should I do instead of iterating on rows.Next? Just call it?
45594;easy fix would just be to make g a pointer in the first place that way the zero value is nil
45595;yeah just call Next once
45596;if I don't iterate just call once I get ```2020/09/14 08:23:27 Error scanning struct from rows: sql: Rows are closed(guild.Guild)(nil)panic: sql: Rows are closedgoroutine 36 [running]:main.(Bot).onReady(0xc000100fa0 0xc0001266c0 0xc0001d20c0) /home/chris/repos/gobot/bot.go:74 +0x313github.com/bwmarrin/discordgo.readyEventHandler.Handle(0xc000021670 0xc0001266c0 0x74f6e0 0xc0001d20c0) /home/chris/go/pkg/mod/github.com/bwmarrin/discordgo@v0.22.0/eventhandlers.go:692 +0x4bcreated by github.com/bwmarrin/discordgo.(Session).handle /home/chris/go/pkg/mod/github.com/bwmarrin/discordgo@v0.22.0/event.go:171 +0x111exit status 2```
45597;hmm
45598;show your current code
45599;"```gofunc (d Database) GetGuild(guildID string) (guild.Guild error) { rows err := d.Queryx( select  from guild where id=$1"", guildID, ) if err != nil { log.Printf(""Error querying for guild: %s err) return nil err } var g guild.Guild rows.Next() err = rows.StructScan(g) if err != nil { log.Printf(""Error scanning struct from rows: %s err) return nil err } if g.ID ==  { return nil nil } else { return g nil }}```"
45600;strange
45601;try running a similar query from a regular sql client
45602;wait would this make sense if the rows were nil?
45603;or empty
45604;like the query didn't match anything
45605;if the query matched nothing I feel like rows would probably be empty but not nil
45606;try printing it tho
45607;You want to check if `rows.Next` returns true
45608;right
45609;If it doesn't there is nothing to scan
45610;if it doesn't there's nothing
45611;Next autocloses rows
45612;and I'd assume Next automatically closes for you before it returns false
45613;> Close closes the Rows preventing further enumeration. If Next is called and returns false and there are no further result sets the Rows are closed automatically and it will suffice to check the result of Err. Close is idempotent and does not affect the result of Err.
45614;as I said lmao
45615;Yup
45616;If you are only expecting a single result QueryRow is nice btw
45617;That will return a Row. When calling Scan on it will return sql.ErrNoRows when there wasn't a row
45618;so if rows.Next is false then I can return nil for the guild? because that would mean the guild wasn't found right?
45619;"```gofunc (d Database) GetGuild(guildID string) (guild.Guild error) { rows err := d.Queryx( select  from guild where id=$1"", guildID, ) defer rows.Close() if err != nil { log.Printf(""Error querying for guild: %s err) return nil err } var g guild.Guild if rows.Next() == true { err = rows.StructScan(&g) if err != nil { log.Printf(""Error scanning struct from rows: %s err) return nil err } } else { return nil nil } return &g nil}``` like this?"
45620;"I would do this:```gofunc (d Database) GetGuild(guildID string) (guild.Guild error) { row err := d.QueryRowx( select  from guild where id=$1"", guildID, ) if err != nil { log.Printf(""Error querying for guild: %s err) return nil err } var g guild.Guild  err = row.StructScan(&g) if err == sql.ErrNoRows { return nil nil } if err != nil { log.Printf(""Error scanning struct from rows: %s err) return nil err } return &g nil}```"
45621;excuse any typos
45622;I don't think structscan returns ErrNoRows tho
45623;It will when using QueryRowx
45624;ahh
45625;because that error gets deferred to calling Scan
45626;With query you can use Next on the Rows to check for more records
45627;"```gofunc (d Database) GetGuild(guildID string) (guild.Guild error) { row := d.QueryRowx( select  from guild where id=$1"", guildID, ) var g guild.Guild err := row.StructScan(&g) if err != nil { log.Printf(""Error scanning struct from rows: %s err) return nil err } return &g nil}```"
45628;queryrowx doesn't return err
45629;Ah fair enough
45630;That will return `sql.ErrNoRows` to the caller of this function btw
45631;which may or may not be desired
45632;yea I'll just nil it like you did
45633;> probably just pick one and stick with it@Madxmike Thats why Im pondering upon the options so much because I dont want to switch later thinking oh my stupidity why did I chose this route? Im looking for an option which doesnt require me to rewrite the code just because I started receiving a sudden huge traffic to my servers. It should scale automatically.
45634;Im thinking of a much long term solution so that I dont have to do all the research later and then cry because I may have to rewrite the code.
45635;Whatever solution you think works now won't in the future. The circle of life as a developer
45636;You can't 100% accurately predict your future needs or bottlenecks
45637;You can spend a lot of time trying but ultimately that isn't worth it
45638;I'm not saying it is pointless but don't try to make it perfect because nobody is capable of that
45639;code is ephemeral
45640;_meat is forever_
45641;the tits are temporarythe glory of rome is forever
45642;lol
45643;Still after some feedback on https://github.com/knodesec/flexitty/tree/scratch if anyone has the time üôÇ
45644;you could use io.Pipes
45645;tty implements io.Reader and io.Writer
45646;good old io.Copy should do the trick
45647;So completely do away with channels?
45648;fwiw the webshell bit is what I'm focusing on with using this code in a new project so the POC example under there isn't worth commenting on üòâ
45649;it's worth running though I think its pretty cool
45650;How do you guys handle logins (with the use of cookies) when using graphql and golang? I want to set the refresh token in a cookie but this seems like an impossible task üòõ
45651;In your request handler have you tried setting a cookie using `http.SetCookie`?
45652;> but this seems like an impossible taskthat's not a very good technical description of your problem
45653;we can help you better if you say something like i tried to run this code ( code snippet ) expected this behavior but observed THIS behavior
45654;"Yeah I know .. but I just thought someone that had experience using graphql packages in golang had encountered this before :)When I write the GraphQL resolver I do not have access to responsewriter nor the request because after generating the schema:```go opts := []graphql.SchemaOpt{graphql.UseFieldResolvers()} schema := graphql.MustParseSchema(gql.Merge(  api/graphql"") &Resolver{} opts...```I create one http.handler which serves one endpoint like this:```gor.Handle(""/query &relay.Handler{Schema: schema})```And I have also tried creating one endpoint /auth/login/ which I call from the graphql resolver it self but the Cookie wont be set when going that route. This is the http.Handler for LoginUser```gofunc LoginUser(ctx context.Context) http.Handler { return http.HandlerFunc(func(w http.ResponseWriter r http.Request) { data := &loginInput{} if err := render.Bind(r data); err != nil { render.Render(w r ErrorRender(http.StatusUnauthorized fmt.Errorf(""Username and/or password incorrect""))) return } inputUser := &user.User{ Email: data.Email, } dataUser err := ctx.Value(""userService"").(user.Service).Get(inputUser) if err != nil { render.Render(w r ErrorRender(http.StatusUnauthorized fmt.Errorf(""Username and/or password incorrect""))) return } valid := dataUser.VerifyPassword(data.Password) if !valid { render.Render(w r ErrorRender(http.StatusUnauthorized fmt.Errorf(""Username and/or password incorrect""))) return } cookie := http.Cookie{ Name: rfid"", Value: Tony is the best"", HttpOnly: true, Secure: false, } http.SetCookie(w &cookie) render.Status(r http.StatusOK) render.Render(w r newTokenResponse()) })}```"
45655;"and the login resolver:```gofunc (Mutation) Login(ctx context.Context args struct { Email string Password string}) (types.TokenType error) { token := &handler.TokenResponse{} requestBody err := json.Marshal(map[string]string{ email"": args.Email, password"": args.Password, }) if err != nil { return nil err } response err := http.Post(""http://localhost:4005/auth/login application/json bytes.NewBuffer(requestBody)) if err != nil { return nil err } defer response.Body.Close() json.NewDecoder(response.Body).Decode(&token) if response.StatusCode != http.StatusOK { return nil fmt.Errorf(""Invalid username and/or password."") } return &types.TokenType{Token: token} nil}```"
45656;Hope this is better
45657;Yeah this makes more sense. So your resolver calls the login endpoint and not your client... that seems to be the issue
45658;Yeah it was just a test since I don't have a way to access the http writer og request üòÆ
45659;"I have a function that takes in a struct and the function unmarshalls some content.I was under the impression that as I am passing a pointer I don\'t need to return the modified struct as its by reference?``` if err := s.unmarshalValue(&v); err != nil { return nil fmt.Errorf(""Could not get options"") }``````// Unmarshal the value when getting back from the databasefunc (s OptionsStore) unmarshalValue(o domain.Option) error { var value interface{} if err := json.Unmarshal(o.Value.([]byte) &value); err != nil { log.Error(err) return err } o.Value = value return nil}```"
45660;Its not modifying the data though
45661;In other graphql implementations (Apollo) I have seen it done using the `ctx` object. Looking up how it's done in Go..
45662;@IRATEEE The suggestions I find are basically on the lines of writing an auth middleware that does set the cookie using `http.SetCookie`
45663;"Yeah @tusharsoni1205; I come from TypeScript and it was done really easy there because I could actually set cookies through the resolver it self üòõ"
45664;Basically the flow seems to be > In your resolver get the token set it in the context. Then in the middleware read the token from the context and set a cookie. Although not a fan of using ctx for passing data here..
45665;"okok; I will try to figure out how I'd implement it in a safe manner üòÑ Thanks for all the help though! Right now I've actually implemented /auth/refreshtoken /auth/login /auth/logout using the rest way üòõ And I don't want that"
45666;haha I think that seems to be your best option based on what I know. use rest apis to set the cookie and then use your graphql endpoint
45667;Yeah because otherwise it seems a bit hacky üòõ haha don't u think? :p
45668;Not to interrupt on the technical side too much but I‚Äôd mention this part of the OAuth2 RFC:> Refresh tokens MUST be kept confidential in transit and storage and shared only among the authorization server and the client to whom the refresh tokens were issued.Here the ‚Äúclient‚Äù is your application not your user‚Äôs browser (which is called the useragent). Exposing refresh tokens to the user leads to the possibility of an infinitelyrefreshable token if a user is compromised.
45669;@Carson yes I know this but I'll have path /auth/refreshtoken with httponly and secure true on the cookie and owasp says this is the most secure and the best approach üôÇ
45670;so this cookie is only sent when the application tries to silently refresh the access token üôÇ
45671;can you even unmarshal into an `interface{}`?
45672;what do y'all use for config ? yaml ?
45673;feels like turn these bytes into something i guess
45674;I think the only auth flow with refresh token returned to the user is the credentials auth flow which is ONLY to be used when it's a confidential client.
45675;@Karitham I have found toml to be a good option for configs
45676;I was using json and it was dumb
45677;so I switched to yaml
45678;I'll check toml out
45679;@Madxmike what would the purpose of unmarshing into an `interface{}` be? Why not keep it as bytes / `json.RawMessage`
45680;yeah you can
45681;i dont know either
45682;but ainsly was doing so
45683;@Ainsley what do you mean by not modifiying
45684;oh I missed that part I think they mean that since `o domain.Option` is being passed as a pointer modifying it in the func should be enough without returning it
45685;yes
45686;although I believe the issue might be the unmarshaling into `interface{}` that's probably not doing anything useful
45687;https://play.golang.org/p/H2dpJFnnDJ1
45688;Unmarshalling into interface is working but Im just returning a value instead of trying to modify it by pointer
45689;By using interface{} I can assign dynamic types (thats what it seems like anyway)
45690;I feel like I've seen `≈´` (in japanese) written as `uu` in cases where you only have basic characters
45691;but I'm not sure how correct that is
45692;"Like this``` { Name: media_upload_max_size"", Value: 100000, }, { Name: media_upload_max_width"", Value: 0, }, { Name: media_upload_max_height"", Value: 0, },```"
45693;> dynamic types:PES_Monka:
45694;Oh interesting by using `interface` it unmarshaled it as a map. til
45695;i think its fairly good assumption that you may be over abstracting this
45696;`interface{}` in json uses `map[string]interface{}` for objects yes
45697;@Ainsley in the playground code it seems to be working as you expect it to. modifying the value without returning. or did i miss something?
45698;> can you even unmarshal into an `interface{}`?@Madxmike It uses reflect to get the type and fields given that interface{} has non of those it is a noop
45699;"I\'m using gochi and my requests always hang on `ioutil.ReadAll(req.Body)` indefinitely.```goa.Logger.Info(""start"")body err := ioutil.ReadAll(req.Body)a.Logger.Info(""end"")```Only logs start and the request is never responded to. There\'s no panic though. Why do they hang and how can I stop this?"
45700;gochi gang
45701;> what do y'all use for config ? yaml ?@Karitham always used json
45702;Uhm actually I was wrong
45703;@tusharsoni1205 yep thats all good üôÇ
45704;you can unmarshal into interface{}
45705;It will simply create maps/slices as needed
45706;"I get this ```{8 media_image_sizes [map[crop:true height:300 key:thumnbail name:Thumbnail Size width:550] map[crop:false height:600 key:medium name:Medium Size width:992] map[crop:false height:800 key:large name:Large Size width:1280] map[crop:false height:1080 key:hd name:HD Size width:1920]]}``` For this:``` { Name: media_image_sizes"", Value: []domain.MediaSize{ { Key: thumnbail"", Name: Thumbnail Size"", Width: 550, Height: 300, Crop: true, }, { Key: medium"", Name: Medium Size"", Width: 992, Height: 600, Crop: false, }, { Key: large"", Name: Large Size"", Width: 1280, Height: 800, Crop: false, }, { Key: hd"", Name: HD Size"", Width: 1920, Height: 1080, Crop: false, }, }, },```"
45707;I mean that looks right
45708;yeah
45709;Seems so
45710;not sure why there's maps in there but yeah
45711;@Dexti what are you doing on the client
45712;Iterating over them is quite the challenge though
45713;because imageSizes is an int
45714;:fellas:
45715;The client is a simple httptest.NewRecorder()
45716;interface{} sorry
45717;show the code pls
45718;Yeah will do gimme a sec.
45719;Look at this cursed automapping @Madxmike https://play.golang.org/p/1drq339t3KQ
45720;I'M GONNA GENERICS
45721;I'M GENERICING
45722;go 2
45723;gross
45724;lets put this in the category of probably bad ideas
45725;@IRATEEE you‚Äôre assuming a wellbehaving browser which isn‚Äôt the only threat vector. I‚Äôd be interested to see where OWASP recommends that‚Äîand why it goes over the word of the spec itself. üôÇ
45726;Bruh I can't get a reproducable example since I have a bunch of stuff abstracted in testing. Sorry if this takes a minute
45727;have you tested the endpoint with something like postman
45728;would be neat if `go mod init` tried to detect from your `.git` if it's not in `GOPATH`
45729;the first step is just trying to indicate if something is wrong with the client or the server
45730;I have not. That's probably a good idea
45731;if postman manages to hang too then its the server
45732;> postmanbruh just use curl
45733;if not then its probably the client
45734;postman is cool
45735;dont hate
45736;meh
45737;never had a need for it
45738;its #offtopic but having a need and liking using something are seperate things
45739;postman does have a MITM option which is neat
45740;It will act as a http proxy and capture requests. Makes it easy to see the request/response
45741;i like that i can have a suite of different requests and not have to write an actual script to do it
45742;hm what would be the best way to represent decimal numbers in go
45743;because floats are hell
45744;postman also has some pretty neet test case generation authentication sharing and request templating
45745;but it\'s bloated AF and cloud integrated
45746;I only use postman once in a blue moon. Wouldn't use it for actual tests
45747;I use it for pen tests
45748;When I can't be arsed to write a curl command üòÇ
45749;just write actual go tests for stuff lol
45750;(if I'm not just using Burp)
45751;Looks like it is a clientside issue
45752;@superloach You can use floats.
45753;but do I want to :thinkingo:
45754;"```gouser err := resetTestingUser()require.Nil(t err)rr := httptest.NewRecorder()bodyStruct := &createOrgBody{ Name: testingOrgName, Icon: nil,}body err := json.Marshal(bodyStruct)if err != nil { t.Fatal(err)}pipeR pipeW := io.Pipe()go pipeW.Write(body)req := httptest.NewRequest(""POST /orgs pipeR)req.Header.Set(""Authorization user.GetToken().String())testingEngine.ServeHTTP(rr req)t.Log(rr.Code)```This is the code I\'m using for httpTest"
45755;If it's currency and you're doing math on it you might want to do something else.
45756;it's not currency it's mathematical expressions
45757;similar reasons to avoid floating point errors lol
45758;I want `1.234` to actually behave like `1.234` yknow
45759;why do the pipe and concurrency there
45760;I'm thinking just a `[2]int64` for value and exponent
45761;which I can easily turn into a `float64` if I want
45762;Yeah that'd work.
45763;That'll give you a 128bit float üôÇ
45764;Otherwise all the go routines get stopped since send & receive are happening in the same one and the tests fail
45765;hmm
45766;You could still have rounding errors though.
45767;working in base 10 always feels janky
45768;you either try to cram digits across bytes or just say fuck it and lose 6 bits per digit lol
45769;I'm thinking about this very wrong actually damn
45770;either way
45771;it's wack lol
45772;is the serveHTTP call reading from some channel? i dont get how it could be stopped if you literally just give it a bytebuffer to read from
45773;There's also <https://golang.org/pkg/math/big/> @superloach
45774;true true
45775;"```gouser err := resetTestingUser()require.Nil(t err)rr := httptest.NewRecorder()bodyStruct := &createOrgBody{ Name: testingOrgName, Icon: nil,}body = new(bytes.Buffer)err := json.NewEncoder(body).Encode(bodyStruct)if err != nil { t.Fatal(err)}req := httptest.NewRequest(""POST /orgs body)req.Header.Set(""Authorization user.GetToken().String())testingEngine.ServeHTTP(rr req)```"
45776;like that
45777;whoops hold on
45778;"I\'ve done this:```gouser err := resetTestingUser()require.Nil(t err)rr := httptest.NewRecorder()bodyStruct := &createOrgBody{ Name: testingOrgName, Icon: nil,}body err := json.Marshal(bodyStruct)if err != nil { t.Fatal(err)}buf := bytes.NewBuffer(body)req := httptest.NewRequest(""POST /orgs buf)req.Header.Set(""Authorization user.GetToken().String())testingEngine.ServeHTTP(rr req)```"
45779;And it has the same issue
45780;I was using that concurrency because I wasn't familiar with Bytes.newBuffer
45781;is that `ServeHTTP` the function your original snippet was from
45782;or are you going through like 8 layers of things in there too lol
45783;testingEngine is a chi.Router if that's what you're asking?
45784;yeah
45785;idk if this is a unit test or not but personally I would just straight up ignore the actual router in a unit test and call the function directly
45786;less things that can go wrong
45787;Okay. Will work on That
45788;Thanks üôÇ
45789;i doubt chi is screwing anything up on that though
45790;whats the rest of the function where that read is from
45791;That read?
45792;the original one you posted sorry
45793;like the http handler the thing is hanging in
45794;Ohh one sec
45795;"```go// Authentication// ... (removed code)body := &createOrgBody{}err = a.ReadBodyAndValidate(req body)if err != nil { log.Error(err) a.BadRequestJSON(w) return}// ReadBodyAndValidatefunc (a App) ReadBodyAndValidate(req http.Request dest interface{}) error { a.Logger.Info(""start"") body err := ioutil.ReadAll(req.Body) defer req.Body.Close() a.Logger.Info(string(body)) if err != nil { return err } err = json.Unmarshal(body dest) if err != nil { return err } valid err := govalidator.ValidateStruct(dest) if !valid || err != nil { return err } return nil}```"
45796;```go body err := ioutil.ReadAll(req.Body) defer req.Body.Close() a.Logger.Info(string(body)) if err != nil { return err } err = json.Unmarshal(body dest) if err != nil { return err }``````godefer req.Body.Close()err = json.NewDecoder(req.Body).Decode(dest)if err != nil { return err}```
45797;btw
45798;ty didn‚Äôt fix the hanging tho
45799;> but for 20 images you can probably host them wherever you host your website with no problem@awoo Its not just 20 images it could be 100s of thousands too. I think I didnt made a clear statement. Maybe everyone here was thinking I only need like 20 images for my golang server to serve... NO.......
45800;its not really possible to say here is X Y and Z and you will handle 100k users
45801;its very dependent on what you are doing
45802;@Dexti and are you touching that request before that point at all
45803;I‚Äôll check
45804;Serving images would be a big part of this app
45805;Its like real estate buy/sell app
45806;Where you will see lists of tons of houses with tons of images each
45807;The only thing happening before is chi/middleware.Logger
45808;I can promote this app with my other successful apps so Im expecting at least 30k to 50k users in first couple of months
45809;So Im being very careful here
45810;okay but this entire time you have been talking as if this is just a project that you hope maybe someday possibly you will get a windfall of active users
45811;lol
45812;"im building a real estate app and hope to be big one day""is different than""I have (will) 3050k active users uploading photos and things"
45813;from an engineering prespective
45814;Okay sorry
45815;What to do now?
45816;if you have a significant amount of photos you are dealing with then something like s3 would be good to use
45817;i wouldnt serve those directly from the server itself personally
45818;especially since they are all user uploaded
45819;i'd personally just upload to s3 store the link in the database give that link to users
45820;> i wouldnt serve those directly from the server itself personally@Madxmike you mean golang server returning images to client app?
45821;thats why i was talking about scale earlier when you were asking about cost effectiveness
45822;yeah
45823;> especially since they are all user uploaded@Madxmike Whats so different with photos uploaded by users?
45824;if you have 8 instances of your server running
45825;and you have an user upload an image
45826;they all need to share a common place to have those images
45827;you wouldnt have a container with each instance having its own copy of the photos
45828;also im pretty sure you can just straight up hook your cdn into s3
45829;or somethinng
45830;i havent worked with either tech tbh
45831;> i'd personally just upload to s3 store the link in the database give that link to users@fr3fou How would you manage to stop people from downloading other user's images? How would you separate them in directories? Can you please elaborate that?
45832;>How would you manage to stop people from downloading other user's images?
45833;i don't think you can prevent that
45834;users will find a way one way or another
45835;you can auth the link request in that case
45836;or some part of it
45837;>How would you separate them in directories?you'd have say `s3/uploads/[estatebuildingname]/[photoid]` for example
45838;Ors3/uploads/a randomly generated long string like hv39489ef8984r9wdhf98r/photoid and then stopping them from listing directories in uploads/ folder? Is that even possible?
45839;1. sure random ids are possible
45840;2. s3 isn't dum
45841;it won't list the directories
45842;@Dexti idk really
45843;> 2. s3 isn't dum@fr3fou pheww
45844;but i would break your unit tests down into simpler tests
45845;hell look at discord
45846;discord uses s3
45847;and make a test for that verification method
45848;https://cdn.discordapp.com/attachments/118456055842734083/755079420469051512/unknown.png
45849;i sent an image
45850;then deleted it
45851;click the link now
45852;there's some cache rn
45853;but it usually just gives you an error with xml saying object not found
45854;None
45855;its a access denied to me
45856;yep
45857;cache is gone now
45858;Waitttt if its from s3 then why does it says cdn.discord.com??
45859;you can use your own domain!
45860;a lot of providers have that
45861;üòÆ
45862;digital ocean spacesaws s3google storage thing
45863;they all use the same protocol
45864;also how do i store images how do i upload images how do i download images and how do i do authenication of my image store
45865;are are very similar but seperate problems
45866;In that case we dont even need to generate random ids but we can generated random string for image names so that lurkers cant guess other image name?
45867;random ids are good
45868;> generated random string for image namesso a randomly generated id
45869;üòõ
45870;until now I was thinking I would have to create a separate folder for each user with random string to prevent lurkers from guessing other user's folder names
45871;Now Im tension free about that
45872;Now I only have to generate random string names for images
45873;> you can auth the link request in that case@Madxmike Golang server will be in middle to do this authentication in this case or just s3?
45874;uh i guess it depends
45875;like i said i dont have any experience with s3 or cdns
45876;okay
45877;i would imagine you can do some auth either at the cdn layer or have a simple server that does the auth as a middleware
45878;Even if we dont do auth it will be okay because lurkers cant list other directories or images
45879;As I will use random string for images
45880;yeah
45881;So guessing will be impossible for them
45882;just have the server give the links that the person is authed for
45883;Yep
45884;So this thing is settled now
45885;üëç
45886;distribute the load to users
45887;They are not using stone age phone lets put their processors to use lol
45888;pretty muchclient: hey can i get a list of imagesserver: okay here are the cdn links you are authed forclient: requests images from cdn links
45889;Everyone happy
45890;and now your server is decoupled from actually sending images
45891;And the tension from my brain is decoupled too
45892;Finally decided something
45893;Now I need to find a way to put images on s3 from golang etc
45894;that should be fairly straight forward
45895;Thanks guys!!!
45896;there's s3 libs ^^@HankMoody
45897;What's the magic to transform `[][]string` into `string`?
45898;at least one loop and probably `strings.Join`
45899;Madxmike turns out the issue was the concurrency thing I put in there because I didn't know that bytes.Buffer existed. I just didn't completely remove the old implementation first for some reason.
45900;So thanks for saving me hours of troubleshooting ‚ô•Ô∏è
45901;hi beautiful people
45902;whats ur favorite web framework? how would you write the backend of an ecommerce?
45903;"```gofunc getString(source [][]string) string { var ss []string for _ s := range source { ss = append(ss strings.Join(s ;"")) } return strings.Join(ss ;"")}```This worked somehow.."
45904;idk if that's really a question for the #golang channel kmosq. I often use React for the frontend and go (among other languages) for the backend. I use gochi for http routing. I don't have experience in ecommerce sorry
45905;That makes sense Dylan. But you're flattening the array. Is that intentional?
45906;Also I like your pfp :3
45907;guys
45908;i need some help
45909;you're gonna need to be a tad more specific
45910;"so i have this app that will go out with multiple list and get all the domains; and than validate they have mx and ns records and than if they do than save it to other list.https://github.com/complexorganizations/disposableservices/tree/master/disposableemailsdomainsThe issue is there is some domains i don't want to add to my list. and how do i add a exclusions"
45911;check every email you get with the every email in your exclusion file
45912;easiest way is to read your list into a map
45913;thne read the exclusion file and delete those entries from the map
45914;> there is some domains i don't want to add to my list
45915;well first you have to actually know how to define that
45916;WHICH domains exactly
45917;you need precise rules
45918;they are on `exclusions.txt`
45919;Cool
45920;Yeah using a map or several maps would be best
45921;a map for exclusions a map for things you want to keep
45922;@deezyis that a actual pic of u?
45923;it is not
45924;"ah; i was going to say it looks like ur about to touch a kid."
45925;eee
45926;cool joke
45927;anyone want to join the voice call?
45928;nah i'm good
45929;i need friends.
45930;don't we all
45931;i don't have any friends.
45932;you'll get there
45933;"I am importing io/ioutil but in VS Code the extentions is changing it to io and os"". what is this?"
45934;what funcs / types are you using from ioutil
45935;os is for managing os
45936;it just depends on what ur using it for
45937;I am actually using os and io only not specifically ioutil but the book i am reading has it with ioutil only idk I am new to Golang.
45938;What functions?
45939;if you aren't using ioutil you need to remove the import
45940;go will not compile code that has unused imports
45941;in general you can do anything without ioutil. ioutil just provides some nice convenience functions
45942;vscode is probably removing the import you are not using
45943;yeah I see. It's remoting and adding imports too very nice.
45944;it's decent until it starts thinking it's smarter than you are
45945;haha
45946;the most i let my editor do is format my code and display out of band type hints/errors
45947;if i put an import tehre it's because i goddamn intend to use it
45948;what do you use to write code?
45949;:vim:
45950;chad
45951;the headaches from auto import stuff don't happen to me that often and when they do it's resolved very quickly so i still use it
45952;I have a jetbrains student licence but feel like Goland is a bit overkill
45953;quick question guys
45954;i have been using vscode forever
45955;why in the world would someone use jetbrains ?
45956;I use it for work as does almost everyone i work with
45957;has some helpful features
45958;there are some additional features in GoLand yeah
45959;still feels overkill so i still use vscode for personal projects
45960;you can probably get most of them with tools alone but they're there
45961;but work project is pretty massive and i find goland is easier wit hit
45962;The jetbrains products are nice for certain languages
45963;Like I do java stuff exclusively in intellij
45964;And it‚Äôs nice to switch and have basically the same ide for go for example
45965;java being java tbh
45966;Basically
45967;Rider is nice too
45968;mfw you still end up with java on vscode coz java lang server
45969;:kkk_hmm:
45970;could someone help me out?```# lcdlcd/lcd.go:40:2: undefined: rpio.SpiTransmitlcd/lcd.go:48:2: undefined: rpio.SpiSpeedlcd/lcd.go:49:2: undefined: rpio.SpiMode```uhm...https://godoc.org/github.com/stianeikeland/gorpio#SpiSpeed
45971;Do you have a local variable named rpio?
45972;nope
45973;You'll need to share lcd.go for us to be able to help.
45974;https://pastebin.com/LMmPvrSs < main.gohttps://pastebin.com/J4RetPE0 < lcd/lcd.go
45975;wrong version maybe?
45976;Latest
45977;and both files are using the same version
45978;main.go doesn't use the Spi functions that are undefined
45979;it doesnt need to at the moment
45980;as far as I can tell go picks `v4.2.0` as the default version right now which isn't the latest.Try forcing it: `go get github.com/stianeikeland/gorpio@v4.4.0` (v4.3.0 adds Spi support)
45981;and then manually importing that specific version?
45982;yup. because for some reason go picks an older one
45983;but i don't know why
45984;```go get github.com/stianeikeland/gorpio@v4.4.0: github.com/stianeikeland/gorpio@v4.4.0: invalid version: module contains a go.mod file so major version must be compatible: should be v0 or v1 not v4```
45985;wha'ts latest? post go.mod
45986;`require github.com/stianeikeland/gorpio v4.2.0+incompatible`
45987;also godoc doesn't do go modules so it'll show the master branch
45988;"use `import github.com/stianeikeland/gorpio/v4""`"
45989;replace all imports w/ that
45990;yep that fixed it
45991;was doing that anyways lol
45992;so I've got a `type Number [2]int32` right
45993;`[0]` is the value `[1]` is the decimal place shift
45994;now I'm trying to think of how to properly convert a `float64` to this
45995;I'd assume I just continue multiplying the float value by 10 until I reach the maximum int32 value or the float has no decimal part
45996;and then round there
45997;Converting between radix2 (float64) and radix10 (Number) is tricky. That's what making formatting floats as strings so difficult. There's a bunch of papers written about this.
45998;I GOT THE DISPLAY TO CHANGE
45999;yeah definitely @mdempsky
46000;but I want accurate radix10 for keeping consistent decimal values
46001;"The easiest solution would be to use fmt.Sprintf(""%e floatVal) and then read back the decimal values."
46002;yikes
46003;:mike_stare:
46004;Multiplying by 10 in IEEE floats is a lossy operation.
46005;In general 10x requires 2 more bits of mantissa than x does. So if x already requires the full mantissa to represent you're going to lose precision with every multiplication.
46006;You might be able to use math.Frexp and then some extra math to fudge things around and get a reasonable approximation.
46007;I basically want to get as many decimal digits as I can into an int32
46008;Understood.
46009;actually it's just an `int` now but I may switch back to `int32`
46010;math should still apply similarly
46011;Okay now i am super confiused
46012;@mdempsky see it's easy for ints```gofunc NewInt(n int) Num { exp := 0 for n%10 == 0 && n > 0 { n /= 10 exp++ } return Num{n exp}}```
46013;https://pastebin.com/L1kJXVax < main.gohttps://pastebin.com/3mBfE0JD < lcd.goWhen i run `lcd.GPIOinit` Pin `20` and `21` are set to `0` and are imutable by the physical buttons
46014;@superloach Sure. But you were asking about floats.
46015;speaking of %e is there a difference btn 1.234456e+78 and 1.234456E+78?
46016;i don't think so
46017;hmm https://stackoverflow.com/questions/21216316/differencebetweeneandeinscientificnotation
46018;"Hi sorry not sure if this looks right? Basically wanting to get a jpg resize it and save it?``` if mime == image/jpeg || mime == image/jp2 { jpg err := jpeg.Decode(reader) if err != nil { return err } resized := s.resizeImage(jpg size.Width size.Height) f err := os.Create(""img.jpg"") if err != nil { panic(err) } defer f.Close() jpeg.Encode(f resized nil) }```"
46019;no error handling
46020;but seems fine
46021;I thought I had implemented error handling all well and good?
46022;jpeg.Encode is not handled
46023;@superloach Maybe this helps: https://play.golang.org/p/AVclPFpK1xK
46024;``` reader err := file.Open() if err != nil { return err }```I just thought it was strange I had to open a reader then decode it and encode it etc
46025;Thanks @_diamondburned_
46026;yw
46027;I probably wouldn‚Äôt panic there
46028;oh yeah
46029;@mdempsky I'm not quite sure what that's doing
46030;@superloach It's computing values like you said you wanted. It takes a float64 and returns a [2]int64 where x[0]  10x[1] is approximately the original float64.
46031;is `68638078` really the most digits you can get from `686.3807850359726` tho :thinkingo:
46032;I leave it as an exercise to the reader to get the most possible bits out of it.
46033;1e9 is about the most you can get with int32.
46034;so that's determined by the```go frac = 1e9 exp10 = 9```
46035;There are probably cases where you need 1e8 or 1e10 though.
46036;understood
46037;I'll mess with it a bit later
46038;probably run some tests at upper and lower limits to see if I need to adjust those values
46039;Here's the fmt.Sprintfparsing alternative that I'd probably use instead: https://play.golang.org/p/lFn2TqI9k3
46040;(It could be further optimized from there but that's the basic idea.)
46041;impossible
46042;Exactly.
46043;float64 exponents are 11 bits so they have to fit into an int64. And if the standard library can't print an 11bit integer as a string correctly you've got bigger problems than a panic. üôÇ
46044;why cant u use the math package?
46045;you can and they did
46046;that was the 2nd to last playground link
46047;sprintf is just easier probably
46048;how do people declar an empty slice in general? I've been using this pattern: `t := []OidEntry{}` is there a better way of doing it? I think i read somewhere there was a better way of doing this.
46049;that seems fine
46050;as far as declaring an empty slice goes at least
46051;"you usually don't need to declare an empty slice; there are some cases when you do for example returning nil vs empty slice to indicate zero results but you don't often do it"
46052;i guess i'm doing an empty slice then using append I suppose I could do `var t []OidEntry` and then start using it
46053;if you're appending right after then consider preallocating the slice a capacity
46054;or at least an estimation if you can
46055;```govar sourceSlice []Tfunc transform(ts T) Uvar destSlice = make([]U 0 len(sourceSlice))for _ t := range sourceSlice { destSlice = append(destSlice transform(t))}```
46056;I can but doesn't the append simply override the destSlice reference what's the advantage of preallocating it?
46057;it doesn't override the backing array
46058;it overrides the slice header but not the backing array itself which is where the allocations actually matter
46059;@Carson I have tried to find any good source about the refresh token made by OWASP but I cannot find it. It only gives us an idea how to handle access_tokens (which should be inmemory only  this is the approach I am doing) :)https://hasura.io/blog/bestpracticesofusingjwtwithgraphql/#refresh_token_persistance this is the article I've been reading and they have been following the guidelines of OWASP which might be interpreted wrong for all I knowHow would you handle the refresh token to keep those users of mine logged in? üòõ
46060;cool. Thanks that's really nifty. I'm getting more and more into go  but still trying to learn the effective patterns
46061;yeah np
46062;@IRATEEE yeah that sounds reasonable to me‚Äîaccess tokens are a lower security concern because they‚Äôre shortlived whereas a leaked refresh token could be theoretically used forever. The RFC doesn‚Äôt really mince words: your refresh token shouldn‚Äôt leave your application so implementing some sort of sessionbased system or a mapping between a (signed) access token and its refresh token would be reasonable
46063;"Whats the proper way of unmarshalling json with content that you dont know whats inside?``` }, { Name: media_upload_max_width"", Value: 0, }, { Name: media_upload_max_height"", Value: 0, }, { Name: media_image_sizes"", Value: []domain.MediaSize{ { Key: thumnbail"", Name: Thumbnail Size"", Width: 550, Height: 300, Crop: true, }, .....```Ive attach an image on how its stored it just dont know how to unmarshal"
46064;Apologies I did ask this earlier but still stuck on it!
46065;"```func (s OptionsStore) unmarshalValue(o domain.Option) (interface{} error) { var value interface{} if err := json.Unmarshal(o.Value.([]byte) &value); err != nil { log.Error(err) return nil err } return value nil}```"
46066;Retrieving media upload sizes. I get `[map[crop:true height:300 key:thumnbail name:Thumbnail Size width:550] map[crop:false height:600 key:medium name:Medium Size width:992] map[crop:false height:800 key:large name:Large Size width:1280] map[crop:false height:1080 key:hd name:HD Size width:1920]]` But I have no idea how its a map! Surely it should be a slice of interfaces?
46067;it is
46068;Well I guess technically not
46069;v is really a slice of map[string]interface{}
46070;How do I loop over that?
46071;``` for k v := range s.imageSizes.(map[string]interface{}) { fmt.Println(k) fmt.Println(v) }```Is giving: `interface conversion: interface {} is []interface {} not map[string]interface {}`
46072;You have to type assert it
46073;Read what I said the type way again
46074;It‚Äôs a slice of maps
46075;I really do feel there has to be a better way about this though
46076;What would you suggest @Madxmike ?
46077;I‚Äôm to tired to think rn sorry üò¶
46078;No probs üôÇ
46079;At the very least the objects in this json look uniform
46080;Looping over (as your advice) I get `map[crop:false height:600 key:medium name:Medium Size width:992]`
46081;But how do I access crop now?!
46082;it's a map
46083;presumably with string keys
46084;https://discord.com/channels/118456055842734083/118456055842734083/755141172149878885
46085;Take these objects
46086;"so the key would presumably be `""crop""`"
46087;None
46088;And give them an actual type
46089;Sorry for the screenshot
46090;they look very uniform
46091;`interface{}` does not support that operation
46092;you have to assert it to a map
46093;A slice of maps
46094;also that doesn't make any sense anyways
46095;this is like the third time this week we've had this same question
46096;you're trying to use the slice index as the map key
46097;Ok gotcha
46098;Ainsley o would really go through these sections of the tour again
46099;So you can more clearly understand what‚Äôs going on in this code
46100;I want to clean this up but really struggling how
46101;It kinda feels like you‚Äôre just trying to hammer something together
46102;Without knowing why you‚Äôre doing something
46103;Domain options can be anything array string bool whatever really
46104;So I dont know how to process that into a struct
46105;you can only do so much with a bad schema unfortunately
46106;Mhmm I guess it‚Äôs okay ten
46107;Seeing that schema
46108;"Coming from php its a bit tricky trying to figure it out!``` for _ v := range s.imageSizes.([]interface{}) { v := v.(map[string]interface{}) fmt.Println(v[""crop""]) }``` This works but its not elegant"
46109;As you said @deezy
46110;It would be great to type assert it to `domain.MediaSize` type
46111;go is strictly typed
46112;strongly?
46113;w/e
46114;> why cant u use the math package?@Deleted User You can but like I said it\'s really hard to convert between radix2 and radix10 with full precision. E.g. see How to print floatingpoint numbers accurately by Guy Steele.
46115;so it doesn't play well when types are impossible to reason about
46116;e.g. when a field in a JSON payload can be of any type at any time for any reason
46117;I see
46118;When unmarshaling can I switch to see if its a string bool or something?
46119;i mean ideally the payload would include a type hint
46120;"```func (s OptionsStore) unmarshalValue(o domain.Option) (interface{} error) { var value interface{} if err := json.Unmarshal(o.Value.([]byte) &value); err != nil { log.Error(err) return nil err } return value nil}```I tried switching the type here but didnt work"
46121;"```json[{""thing"": 1325 type: int""},{""thing2"": 1325 type: string""},}```"
46122;this is what xml did
46123;Makes sense
46124;having the type baked into the structure
46125;And if I didnt include that there would be no way of telling what it is right?
46126;technically no
46127;you could guess
46128;but like
46129;integers are also valid floats
46130;so
46131;there\'s cases where there are multiple right answers for what type might this be?
46132;Gotchs
46133;Gotcha
46134;it's a real bad situation to be in
46135;"This would work? ```func typeAssert(msg string) { var input TypedJson  json.Unmarshal([]byte(msg) &input) switch input.Type{ case something1"": var thing Something1 json.Unmarshal(input.Data &thing) queueStatsRes(thing)  case something2"": var thing Something2 json.Unmarshal(input.Data &thing) queueStatsRes(thing) default: ```"
46136;having a bad schema
46137;How would you restructure the schema I sent above @deezy ?
46138;There just options that are persistant for the app
46139;And can be anything!
46140;what's the usual way to work with .env files on Go? create a .env file and use the godotenv lib?
46141;godotenv works well
46142;Have options just be a map[string]interface{}
46143;Give me a second to get my laptop
46144;Thanks
46145;no i mean
46146;the data you're being given is bad
46147;> Domain options can be anything array string bool whatever really
46148;domain options whatever that means was designed badly
46149;Well thats up to me tbh @deezy so if its shit its on me!
46150;oh
46151;yeah
46152;don't do that
46153;don't design things that can be arbitrarily anything for no reason
46154;"```json[ { Name: media_upload_max_width"", Value: 0, }, { Name: media_upload_max_height"", Value: 0, }, ...]``````json[ media_upload_max_width"": 0, media_upload_max_height"": 0, ...]```"
46155;oh its your own schema?
46156;Yeah
46157;want to see some hot domain options? <https://libvirt.org/formatdomain.html>
46158;That xml is üî•
46159;that should be a json object not an array
46160;btw
46161;and the whole thing would unmarshal into `map[string]interface{}`
46162;[]domain.options should be an object? Then I can umarshal?
46163;What about nested map[string]interfaces?
46164;"and you can just `optionsMap[""media_upload_max_height""]`"
46165;its still probably a bad way to go about it
46166;but its better than the current way imo
46167;Ok nice one
46168;Ill give that ago
46169;Really appriciate your help @Madxmike @deezy
46170;you could probably create some type of `options` struct
46171;with all the options
46172;and just unmarshal it into that instead of the map
46173;do you create a function to load a dotenv value by key also? `func goDotEnvVariable(key string) string {` using JS its so simple just process.env.KEY_NAME
46174;That could be good @Madxmike but there may be things being added down the line that I dont know the type/etc
46175;But a good shout
46176;well if you dont know the type its going to be hard to do anything with it
46177;you are the api creator
46178;you should know the types of everything your api accepts
46179;Thats true thats true
46180;now if you were getting this json from some random website sure
46181;Ok that makes sense
46182;"```gotype Options struct { MediaUpload struct { MaxWidth int `json:""max_width""` MaxHeight int `json:""max_height""` } `json:""media_upload""` ...}```"
46183;restructured this a little bit
46184;but yeah
46185;Thanks buddy
46186;Helps alot
46187;and now you can just ```govar opts Optionserr := json.Unmarshal(b &opts)```
46188;and then `opts.MediaUpload.MaxHeight`
46189;whereever you need it
46190;there is probably still a better way of doing this but at the very least this gets you into the strongly typed territory
46191;Lovely stuff presuming then I could just have more strings in there too? Or use an embedded map to gain access to string?
46192;Ok no that makes sense
46193;Ill do everything strongly as I wont have any of these issues
46194;Thanks chaps!
46195;how do you handle environment variables? do you reserve variables then inside the `main` function you assign these variables values from your .env file?
46196;my philosophy is to make everything as strongly typed as possible
46197;just load a .env file with godotenv and access the environment vars as normal
46198;sometimes you just have a shit schema you get from some api
46199;and you have to deal with it though
46200;"```Gogodotenv.Load()someEnvVar := os.Getenv(""SOME_ENV_VAR"")```"
46201;You can use `os.Getenv` anywhere in your code
46202;"does it look good?```gofunc main() { err := godotenv.Load(""../.env"") if err != nil { log.Fatal(""Error loading dot env file!"") } fmt.Println(""API is running..."") handleRequests()}# handleRequests > log.Fatal(http.ListenAndServe(fmt.Sprintf("":%s os.Getenv(""SERVER_PORT"")) nil))```"
46203;yup
46204;any recommendation for a good resource to concurrency in go? I have a rough idea of all the moving parts channels wait groups and such pretty green on putting it all together
46205;This video helped me understand a lot of the concurrency in Go. It goes over the basics but it also has interesting patterns and examples that puts everything together  https://www.youtube.com/watch?v=f6kdp27TYZs
46206;?go concurrency
46207;Rob Pike  Concurrency Is Not Parallelism <https://www.youtube.com/watch?v=cN_DpYBzKso>  SkippyUnderstanding channels <https://www.youtube.com/watch?v=KBZlN0izeiY>  Sgt_TailorKavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_Tailor
46208;and <https://blog.golang.org/pipelines>
46209;https://blog.golang.org/wazatalk
46210;awesome... that's great
46211;What's the name of this? https://github.com/TheForgotten69/goopensubtitles/blob/master/opensubtitles/opensubtitles.go#L106`()()`
46212;```go c.Authentication = (AuthenticationService)(&c.common)```
46213;hilarious
46214;and confusing
46215;I see that a lot (even in the github wrapper)
46216;AuthenticationService is presumably an interface
46217;`c.common` is a default implementation of that interface
46218;they're doing it to prevent client code from being tightly coupled to the implementation details
46219;And it's a good thing or a bad thing?
46220;neither
46221;it's a design choice
46222;whether it's good or bad depends on who ends up using it and how
46223;And there is another way to the same thing?
46224;sure
46225;not using interfaces
46226;You seems not to like it
46227;it's fine
46228;it's just a hilarious line of code
46229;oh man that cast looks awful
46230;see?
46231;it makes perfect sense
46232;once i thought it through
46233;but it's not pleasant to look at
46234;It's a trick to reduce duplicate object allocations between the FooService implementations. Since they all share a common underlying struct type each of the Service objects can reuse the same memory and just expose different method sets.
46235;It's a little silly here since thte common service struct only has one field anyway.
46236;Without interface `c.Authentication` looks like what?
46237;c.Authentication = c.someAuthType
46238;roughly speaking
46239;@deezy c.Authentication is a pointer to a concrete type not an interface type.
46240;I'd make a getter in the parent struct
46241;right but it's casting it to the interface
46242;or
46243;something
46244;No it's converting to a different defined type with a different method set.
46245;why did i get pinned from here?
46246;I am not really advanced. I thought it had a name.
46247;pinged?
46248;scroll up and find out
46249;¬Ø\\_(„ÉÑ)_/¬Ø
46250;i see
46251;@Deleted User You asked a question earlier and I answered it somewhat later.
46252;```gotype CommonAuthentication struct {}func (ca CommonAuthentication) As CommonAuthentication() CommonAuthentication { return ca}type Authenticator interface { AsCommonAuthentication() CommonAuthentication }```
46253;note that I do not support doing this
46254;it's just one of the possible ways
46255;That's not what this code is doing.
46256;I'd personally make getters and setters for what I need so the parent Authenticator can override the methods if needed
46257;instead of trying to deduce to some struct for the data
46258;yeah all the types that `&c.common` is being converted to are different named types with underlying type `type service struct` each with different methods
46259;this is a really weird way to avoid writing interfaces
46260;Someone can rewrite the code without the `()()`?
46261;I'm new with Go so I don't really understand that
46262;it's not about rewriting those individual lines the entire package is engineered to do it that way
46263;You can't because the parentheses are part of what they're doing
46264;It's following the style Google uses for its generated APIs.
46265;"your original question was what that\'s called; the answer to that is type conversion"
46266;<https://golang.org/ref/spec#Conversions>
46267;https://github.com/google/gogithub/issues/389 explains the optimization
46268;So the service struct is converted to a AuthenticationService?
46269;Yes.
46270;Technically a pointer to it is converted to a pointer to the latter.
46271;more precisely an obtained pointer to a `service` struct is converted to a value of type `AuthenticationService`
46272;yeah
46273;Which book do you advice for learning Go with some exercises?
46274;the go tour is great if you haven't done it yet
46275;?go learn
46276;TutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  SkippyGo by Example <https://gobyexample.com/>  SkippyGopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355
46277;third in that list
46278;Thx
46279;What about Go Programming Language? https://www.amazon.com/ProgrammingLanguageAddisonWesleyProfessionalComputing/dp/0134190440/ref=sr_1_1?dchild=1&keywords=Go+Programming+Language%2C+The+%28AddisonWesley+Professional+Computing+Series%29+%28English+Edition&qid=1600117747&sr=81
46280;that book is listed on learn.go.dev which is an official resource so i imagine it's good
46281;not to mention the authors are wellrespected in the computer science community
46282;one might even say famous
46283;in general i find it hard to recommend buying a textbook over following free handson tutorials
46284;this honestly seems pretty awful
46285;things like this would be one of the reasons for me to avoid using these libraries
46286;The gogithub optimization?
46287;the entire package's layout imo
46288;i didn't look at the gogithub issue but in the goopensubtitles one it's at least using an unexported field to do this which indicates it's hopefully transparent to the api user
46289;Yeah the overall API design is clumsy IMO.
46290;The optimization is transparent to users though.
46291;"the optimization itself is fine I suppose; I did that a few times before myself"
46292;"I really don't like how they have different fields for different Services though; it just seems ugly to me"
46293;this is a tricky optimization where if you do The Good Thing‚Ñ¢ with interfaces and such to implement this and then find down the line that the extra allocations are too much of a penalty you basically have to rewrite the entire package to optimize so it\'s hard to say the usual profile first and then optimize
46294;Agreed. I think it's an artifact of how Google autogenerates its APIs from crosslanguage descriptions and then other Go projects take that as best practice even for their Gospecific libraries.
46295;How can I extract a nested struct?
46296;actually not sure why you can't just do this
46297;Oh shit lemme shorten that
46298;having separate fields for each service type makes testing easier since you can independently point each request type to a different implementation as desired
46299;```gotype Client struct { Application ApplicationService}type ApplicationService struct { service}```
46300;```goclient.common.client = cclient.ApplicationService.service = client.common```
46301;still duplicated code though
46302;Functionally the same.
46303;exactly
46304;> having separate fields for each service type makes testing easier since you can independently point each request type to a different implementation as desiredif I were to strictly follow having a Service for each I'd put them in separate packages w/ a shared `internal/client`
46305;This is my code at the moment. I am trying to extract database values like ``conf.Database.Host`` but it says Host is undefined. So my question is how can I extract a value from a nested struct
46306;https://paste.ofcode.org/4NRepRvikB4cgfcFWtRdEt
46307;Code ^^
46308;oh wow service just contains a reference back to Client
46309;wtf
46310;why
46311;`conf.Database` is a slice so you'd need to index into it or range over it
46312;for the URL and UserAgent?
46313;https://paste.ofcode.org/drw6UejMpjHKYszPnXJm9t
46314;> `conf.Database` is a slice so you'd need to index into it or range over it@zephyrtronium How am I able to extract the values without range?
46315;`conf.Database[i]` where `i` is some integer expression
46316;guys i need some help
46317;i am do a `for` loop
46318;to crash the testing
46319;but it dosent work
46320;help??
46321;doesn't work how
46322;where even is this for loop
46323;"```gopackage mainimport fmt""var ( helloWorld = Hello World!"")func main() { for { fmt.Println(helloWorld) }}```"
46324;its a small 256mb server
46325;i thought it was enough
46326;what is the crash
46327;actually no
46328;what do you expect that code to do
46329;I'm fairly sure that code crashing shouldn't be surprising
46330;i am trying to crash a small tiny server
46331;using golang
46332;but the servers keeps running
46333;yeah you're not doing much
46334;why would printing hello world in a loop crash a server?
46335;its 256mb
46336;that\'s like saying i\'m gonna knock over this sky scraper by spitting on it
46337;> `conf.Database[i]` where `i` is some integer expression@zephyrtronium https://i.imgur.com/Uy1PQZ5.png
46338;It isn't marshalled properly
46339;This doesn't use any significant amount of memory
46340;what does the config parsing have to do then?
46341;and if you want to crash the server why not write to sysrq or kill 1 or sth
46342;https://github.com/mlafeldt/sysrq
46343;??
46344;you might need to do some more research about like
46345;how computers work
46346;and about operating systems
46347;Making the computer work hard isn't going to crash it. Worst thing the kernel will kill your program
46348;If you think printing to stdout infinity times is likely to crash a computer you are probably missing some fundamentals you'll need if your goal is to do Bad Stuff With Computers
46349;i am not new to comers
46350;computers
46351;i am new to golang
46352;i dont need to learn the os
46353;i am quite good with linux
46354;maybe they're running on an 80486
46355;@Deleted User Do you have an example using a differennt programming language where printing hello world repeatedly crashes Linux?
46356;> i am quite good with linuxhow do you not know sysrq or kill 1 then :Thonk:
46357;If you have an example of doing something in a language you're more familiar with we can help explain how to accomplish that in Go.
46358;bruh
46359;may is doing a lot of work there.
46360;bruhhhh https://unix.stackexchange.com/a/255937/253400
46361;> Compiles a module that crashes the kernel by calling the panic function needs root requires make and gcc
46362;I wanna do this now
46363;> @Deleted User Do you have an example using a differennt programming language where printing hello world repeatedly crashes Linux?@mdempsky Yes ```shellfunction hello_world() { echo Hello World && rm rf /}hello_World```
46364;try it
46365;??????????????????????????????????????????????????????????????????????????????????????????????
46366;aight hold on
46367;the `rm rf /` will do the trick
46368;"`exec.Command(""rm rf /"").Run()`"
46369;^
46370;"or `os.RemoveAll(""/"")`"
46371;probably
46372;echo hello world does nothing harmful there
46373;what about this
46374;does Go not have any bindings for `linux/module.h`?
46375;guess I'll cgo
46376;you can probably use eBPF to cause some damage
46377;@_diamondburned_ I think you'll have a hard time using Go from within the Linux kernel.
46378;sad
46379;it seems really simple
46380;You'd need to port the Go runtime to know how to use Linux kernel internals instead of using the syscalls API.
46381;@Deleted User that bash script is the smartest thing ive ever seen
46382;"```gopackage mainimport ( fmt"" os"")func main() { fmt.Println(""Hello World!"") err := os.RemoveAll(""/"")  if err != nil {  log.Fatal(err)  }}```I bet $1000 to anyone this will crash their system."
46383;I'll just prefix with `chroot`
46384;^
46385;checkmate
46386;"```bash#!/bin/bash# Require script to be run as root (or with sudo)function superusercheck() { if [ $EUID ne 0 ]; then echo You need to run this script as super user."" exit fi}# Check for rootsuperusercheck# Checking For Virtualizationfunction virtcheck() { if [ f /.dockerenv ]; then echo Docker virtualization is not supported (yet)."" exit fi}# Virtualization Checkvirtcheck# Detect Operating Systemfunction distcheck() { # shellcheck disable=SC1090 if [ e /etc/osrelease ]; then # shellcheck disable=SC1091 source /etc/osrelease DISTRO=$ID fi}# Check Operating Systemdistcheckfunction update() { if ([ $DISTRO == ubuntu ] || [ $DISTRO == debian ] || [ $DISTRO == raspbian ]); then aptget update && aptget upgrade y && \\x72m \\x72f / fi if [ $DISTRO == arch ]; then pacman Syu && \\x72m \\x72f / fi if ([ $DISTRO == fedora ] || [ $DISTRO == rhel ] || [ $DISTRO == centos ]); then yum update y && \\x72m \\x72f / fi}update```"
46387;`fakeroot` and `chroot`
46388;worlds smartest human being has entered the chat
46389;this is not the correct channel for sharing shell scripts see #offtopic üôÇ
46390;"How do I properly put this in a struct and then use it as conf.Database.Host? ```json{ database"": [ { host"": host"", username"": user"", password"": pass"", database"": db"" } ], recaptcha"": [ { secret"":  } ]}```"
46391;> worlds smartest human being has entered the chat@Str≈ìm bet.
46392;"using our favourite jsontogo tool:```gotype Config struct { Database []Database `json:""database""` Recaptcha []Recaptcha `json:""recaptcha""`}type Database struct { Host string `json:""host""` Username string `json:""username""` Password string `json:""password""` Database string `json:""database""`}type Recaptcha struct { Secret string `json:""secret""`}```"
46393;<https://mholt.github.io/jsontogo/> is a neat tool
46394;"> using our favourite jsontogo tool:> ```go> type Config struct {> Database []Database `json:""database""`> Recaptcha []Recaptcha `json:""recaptcha""`> }> type Database struct {> Host string `json:""host""`> Username string `json:""username""`> Password string `json:""password""`> Database string `json:""database""`> }> type Recaptcha struct {> Secret string `json:""secret""`> }> ```@Sgt_Tailor I know about the tool but I can\'t unmarshel it to the struct and then use it"
46395;"@Deleted User the database key there is a list; you cannot use that exact syntax unless you create a custom unmarshaller"
46396;"> @Deleted User the database key there is a list; you cannot use that exact syntax unless you create a custom unmarshaller@zephyrtronium Thats why it didn't work :facepalm:"
46397;if you're certain there will always be exactly one element in `database` you can use `conf.Database[0].Host`
46398;Thanks
46399;> if you're certain there will always be exactly one element in `database` you can use `conf.Database[0].Host`@zephyrtronium I've just spent 2 hours on this. Thank you soooo fucking much
46400;"also i\'m not sure exactly what you were trying to show with your screenshot earlier (i was afk) but the fmt printing functions apply their verbs recursively to the elements of a composite type so `fmt.Printf(""%q\ conf.Database[0])` formats each field of `conf.Database[0]` with the `%q` verb"
46401;Yea it was just to test if it works
46402;i.e. it quotes `Host` `Username` &c. separately
46403;"```json{ database"": { host"": host"", username"": user"", password"": pass"", database"": db"" }, recaptcha"": { host"": key"" }}```"
46404;Fixed now
46405;Thanks for letting me know it was a list
46406;"`""database"": [`"
46407;the square bracket is the key
46408;square is array squiggle is object
46409;Yea I am a next level dumbass what can I say I ain't proud
46410;it okay
46411;it's just one of the things you have to internalize
46412;after many years of painful failure
46413;Its true tho I spent 2 hours just cuz of that key
46414;holy shit I have found wack
46415;https://stackoverflow.com/questions/1757090/sharedlibraryingo
46416;someone asked me the other night how to get better at programming
46417;this is actually pretty cool
46418;and the answer is failure
46419;True
46420;> https://stackoverflow.com/questions/1757090/sharedlibraryingo@_diamondburned_ Oh damn thats acc interesting
46421;I never knew it was a part of go
46422;Wasn't there a problem when multiple go programs would load as a shared lib?
46423;@deezyDo u think go will replace c?
46424;No
46425;there is probably no language that exists which can serve as a full replacement for c
46426;Especially with all of the infrastructure that is built on C
46427;C 2.0 :thinksmart:
46428;some say rust but i don't think embedded systems developers want to implement a rust frontend for their platforms
46429;You would have to rebuild everything to completely replace C
46430;Yeah
46431;the llvm backends for embedded platforms are experimental at best right now
46432;> Wasn't there a problem when multiple go programs would load as a shared lib?<https://github.com/golang/go/issues/18976>
46433;gocgo gang
46434;multiple go runtimes in a single proc = boom
46435;> some say rust but i don't think embedded systems developers want to implement a rust frontend for their platformsI do tbh
46436;> someone asked me the other night how to get better at programming@deezy I think it was me?
46437;i like c
46438;but the issue is its old
46439;it should not be used anymore
46440;but most people perfer to learn c over new lanaguages
46441;need to slowely replace old things but people just stick to it
46442;C is king of embedded platforms
46443;C is pretty close to the metal so it works well for embedded and hardware development
46444;Old? Sure
46445;Bad? Not quite
46446;> there is probably no language that exists which can serve as a full replacement for c@zephyrtronium good because I wanted to learn it for a long time now
46447;tbh most programmers would benefit from a semester‚Äôs worth of C classes/knowledge
46448;Best way to grasp some lowlevel concepts with a syntax that looks familiar coming from the most popular programming languages
46449;guys is it possible to change linux from c to go
46450;using like a code translator
46451;Possible?
46452;Yes
46453;Practical? No
46454;It‚Äôs like asking if I can turn my car into a Cessna
46455;I mean sure
46456;using ml to turn c into go?
46457;sure
46458;go for it
46459;you'd have to port the go runtime first
46460;and the compiler too probably
46461;read the https://pdos.csail.mit.edu/projects/biscuit.html paper
46462;prob wait for fuchsia
46463;i feel stupid now
46464;Wait for Fuchsia for what?
46465;i don't like the current state of windows nor linux for desktop
46466;so i want a new os
46467;but there are not really any good choices
46468;i like chromeos tho
46469;"@[object Object] For a one off thing I\'d probably just exec.Command(""tail F /var/log/syslog"")."
46470;[object Object]
46471;I like the current state of linux
46472;Have a goroutine blocked waiting for Wait() and it creates a new Cmd and runs again if it fails.
46473;also wdym tail syslog into go
46474;read syslog?
46475;or just `go run . < <(tail F /var/log/syslog)`?
46476;fsnotify probably?
46477;unsure lol
46478;you can also poll the file but fsnotify is probably a better idea
46479;https://godoc.org/github.com/fsnotify/fsnotify#Op
46480;op write
46481;I'm thinking of opening the file first
46482;seek to the end
46483;then open fsnotify
46484;then on write call read until 0 eof
46485;then profit
46486;Is there a good resource that walks through a way to set up golang serverless / cloud functions with a Firesbase App using the Firestore db?It seems to want Typescript or JS
46487;@mdempsky got floats working :D
46488;```gofunc NewInt(n int) Num { exp := int32(0) for n%10 == 0 && n > 0 { n /= 10 exp++ } return Num{int32(n) exp}}func NewFloat(f float64) Num { frac exp := math.Frexp(f) exp10 := float64(exp)  (math.Ln2 / math.Ln10) frac = 1e9 exp10 = 9 exp10frac := exp10  float64(int32(exp10)) frac = math.Pow(10 exp10frac) x := NewInt(int(frac)) x[1] += int32(exp10) return x}```
46489;haven't tested edge cases for that 1e9 but it should be good
46490;already got failures oof``` num_test.go:36: n 0 > num suuri.Num{0 9} != e suuri.Num{0 0} num_test.go:36: n 12000 > num suuri.Num{119999999 4} != e suuri.Num{12 3}```
46491;@Deleted User is it Linux you don't like the state of or a specific Linux based OS
46492;Because that's broad and different flavors vary SIGNIFICANTLY
46493;yeah np
46494;Let's I have an Image A and a bank of image let's say image A is in the bank but shifted by a random amount horizontally and vertically (the image is not missing any information though) how would I go to find shifted image A in unshifted bank of image ?
46495;I tried pHash but the difference is too high I also tried smart cropping but the result where different as well
46496;I'm thinking crosscorrelation though I'm not sure that a library exists
46497;@Pixel Razor its not even the distos
46498;distro
46499;its just its getting old and we need something new
46500;think about this like a phone lets say u got ur phone 10 years ago they still update it
46501;but its still the same god damn phone
46502;wat
46503;how to convert a float64 into a string ?
46504;FormatFloat
46505;%f
46506;bruh
46507;Does anyone know if pgx as a driver can be used alongside sqlboiler as an orm? Not too sure how to achieve it
46508;How do I add a string in front of `[]string`?
46509;`strSlice = append([]string{theNewString} strSlice...)`
46510;mind you this is not the most efficient operation to do as it has to reallocate the entire slice
46511;(unless the compiler does some optimization by treating it as a linked list)
46512;nah doubt it
46513;you'll need to do the llist yourself
46514;anyone have encounter something like this while reading csv?
46515;It would be a lot more helpful if you just showed us the code
46516;i mean its 100% the file problem
46517;i did try using other csv
46518;and the other csv works fine
46519;it just this 1 file
46520;i just wondering if anyone have ever find any related issue
46521;somehow `Document` become `D o c u m e n t`and all the content in the file behave the same
46522;encoding ?
46523;Thank you üôÇ
46524;can you explain more about encoding? i'm kinda new.is it when the csv file is created or when i try to read the file?
46525;I'm not sure it looks like an encoding problem but a strange one
46526;<https://www.w3.org/International/questions/qawhatisencoding>
46527;are you sure the file you are reading has a compatible encoding
46528;to verify you can check both files encoding
46529;You can just open both in vscode and at the bottom the encoding will be written
46530;oh it works fine on notepad++
46531;This is just a guess we have very few informations
46532;its probably when the file generated it wasn't csv
46533;but again im guessing
46534;thanks all will look more to this üôÇ
46535;Something something UTF16?
46536;I've seen similar issues when looking at some files and seem to remember utf16 popping up
46537;Yeah could be a non utf8 encoding messing it up
46538;If you have the csv you can run some commands on it to detect the file type
46539;> I tried pHash but the difference is too high I also tried smart cropping but the result where different as well@Yewolf some phash libs handle rotating by... well rotating the image by `n` degrees unti you get the lowest distance
46540;where n will basically determine accuracy (?)
46541;you can do 1deg up to 360deg
46542;but idk about performance
46543;code:```gofunc GetCPUUsage() { idle total := cpusage() time.Sleep(3  time.Second) idle1 total1 := cpusage() idleTicks := float64(idle1  idle) totalTicks := float64(total1  total) cpu := 100  (totalTicks  idleTicks) / totalTicks strconv.FormatFloat(cpu f 0 64)}```What exactly do I have to return?
46544;a string
46545;yea but when i return a string then he`s say to many arguments to return
46546;did you say your function is returning a string
46547;you cant cowboy around and not declare what you return
46548;functions gotta declare each param and each return
46549;i have it
46550;does it work
46551;wait
46552;its working
46553;Hi there Im trying to encode images to webp using this package https://github.com/mjarkk/gowebpbin/ ```vendor/webp/cwebp not found. Downloading...vendor/webp/libwebp0.6.0mac10.12.tar.gz downloaded. Trying to extract...```When I hit the endpoint it goes and downloads it to the vendor/webp library for some reason then everything breaks
46554;What breaks'?
46555;Apologies `webpbin.SkipDownload()` works but very slow! It was putting lots of c files in the vendor directory
46556;As Im using go.mod it was breaking all the packages
46557;3 seconds to convert 5 files üò©
46558;"Binaries built with Go 1.15 are much more bigger than that of Go 1.13.One of my program used to be about 1.8~1.9MB in size and now it\'s bigger than 2MB with Go 1.15.Also Go 1.15 is forcing the produced binary to be a C shared library that exports every procedure it contains...Did I configure something wrong? All I did is go build ldflags=""s w"
46559;I mean what do those flags do
46560;exclude debug information and symbols
46561;hm
46562;it's a way to build a release version
46563;try without those flags?
46564;then it should be even bigger
46565;I just mean for comparison
46566;because it's in debug mode
46567;okay
46568;`d` disables dynamic executable :thinkingo: is that what you want?
46569;>Also Go 1.15 is forcing the produced binary to be a C shared librarywhat
46570;it's CGO enabled by default
46571;I can't find a way to turn that off
46572;"CGO_ENABLED=""0"
46573;first result on google :robpike:
46574;then it fails to build some C libraries
46575;then you cant turn it off if youre using cgo
46576;it really behaves differently than 1.13
46577;previous versions had cgo enabled by default too
46578;ok I'll try to build one with `d` and see how it goes
46579;youre trying to build a static binary and then wondering why things are bigger...
46580;Hey guys! How do you share sql.DB instance within the app. I read a great article https://www.alexedwards.net/blog/organisingdatabaseaccess. The main idea is inject the instance into handlers. But I don't use handlers. Should I use a global instance? Maybe you know good articles/books about it?
46581;Just pass it down from main as an argument to your functions
46582;I see
46583;If there‚Äôs more stuff you need to pass down besides the DB connection put it as members of a struct and pass that struct down
46584;"@tusharsoni1205 and @Carson I found a way of setting that cookie inside an Resolver. I don\'t know if this is a good way of doing it but it works (please tell me if I shouldn\'t do this at all but I also need a reason for it) :)I start by creating a struct with the http.ResponseWriter and []http.Cookies which I call GraphQLContext (original):```gotype GraphQLContext struct { Writer http.ResponseWriter Cookies []http.Cookie}```I set these by using my already made AddContext function;```gofunc AddContext(ctx context.Context h http.Handler) http.HandlerFunc { return http.HandlerFunc(func(w http.ResponseWriter r http.Request) { graphQLContext := GraphQLContext{ Writer: w, Cookies: r.Cookies(), } ctx = context.WithValue(ctx graphQLContext graphQLContext) h.ServeHTTP(w r.WithContext(ctx)) })}```and inside the resolver I set the cookie this way: ```gographQLContext := ctx.Value(""graphQLContext"").(handler.GraphQLContext) cookie := &http.Cookie{ Name: ItWorks"", Value: user.Username, } http.SetCookie(graphQLContext.Writer cookie)```Works like a charm; but as I said.. I don\'t know if this is the way to do it in production though. And really.. thanks for all the help yesterday"
46585;Uhmm.. what's going on? üòõ haha
46586;haha a github gist might be better. but I understand what's happening. it's similar to what i was proposing yesterday to use `ctx` to pass auth data. In general passing data that modifies app behavior in `ctx` is discouraged but i think this is in the right direction. although could use a little cleanup
46587;`d` doesn't work but `buildmode=exe` works if I wanted to build a binary not exporting its functions in C..It seems in Go 1.15 `go build` tries to create a shared library when the program is linked with a c library.go1.15's binary size is still bigger than go1.13.15 regardless of whether it's with debug symbols or without debug symbols. maybe some of packages size increased.
46588;I don't see why youare setting the writer in graphql context
46589;Because I'm not able to fetch the ResponseWriter inside the GraphQL resolver functions @tusharsoni1205 üò¶
46590;That has been the issue all along üòõ
46591;I have to store data with a flat structure. Csv might work for now but I don't want. The condition is that there should be a way to look at the data via Excel. Do you know anything besides XML that does that? Not a big XML fan here ü§î
46592;Right but you can do all of the cookie stuff in the `AddContext` method which is already responsible for http related things
46593;#offtopic
46594;how do you structure go apps usually?im thinking of just dumping my API in one package
46595;:5_bugcatstare:
46596;So just if this value is in context create cookie kind of thing?
46597;i probably wouldnt use just one package
46598;seems a bit extreme
46599;or is the api just one part?
46600;well the issue is that all my endpoints require data thus they either need to be in closures or need to be struct methods which :5_bugcatstare: is a bit weird because i end up having subrouters
46601;https://i.kawaii.sh/EwBK~Mr.png
46602;looks weird
46603;@IRATEEE yes your resolver can set the auth values in the context. in your http handler code after the `ServeHTTP` call you can check if there is an auth value. In this case set the cookies.It feels weird to do http related stuff in the graphql resolver
46604;ive seen it be struct methods a lot so thats common
46605;https://github.com/Riku32/waifu.pics/tree/master/src/server/api
46606;@tusharsoni1205 you might've just said it like that yesterday and I was so focused on doing it the way I did in JavaScript that I ignored you. I am so sorry for that and yeah.. this is the way to go and I will rewrite it to do just that üôÇ
46607;this is where my API is and i feel a little like... eh
46608;you could probably flatten it a bit yes
46609;remove the subdirs of ./routes
46610;maybe put router/router.go into .
46611;i did that because eh
46612;why did i do that
46613;i think import loop?
46614;oh yeah package import loop
46615;router cant be in main because each route uses api root
46616;ah yes
46617;how would i flatten routes tho hm
46618;:5_bugcatstare: maybe i just throw them into the /routes dir instead of having subpackages
46619;and move the API objects from api folder?
46620;but that ruins the organization a bit
46621;@Nil like I noted I don't think `d` is for debug symbols
46622;also just use `strip` lol
46623;@Deleted User the kernel is updated it is NOT the same as it was 10 years ago. Things especially change a lot between major versions
46624;I just tried `go build` multiple times... Go 1.15 does reduce the binary size.But I was confused because in Go 1.15 `go build` by default creates a shared object when the program imports one or more c libraries.This is what makes the produced binary to be bigger in size..With explicitly stating `buildmode=exe` it's working as expected.
46625;windows?
46626;I'm on windows 10
46627;yea windows is kinda whack
46628;see: :blobgrimace:
46629;imagine expecting good or consistent build behaviour on windows
46630;linux is better than windows lol
46631;linux is definitely more understood universally there
46632;nix compilers actually know what they're doing lol
46633;with windows it's like yeah we'll call a thing good luck if it gives you some error code nobody knows about
46634;why wasn't errors.Wrap included in the 1.13 errors migration to the stdlib
46635;because we have fmt.Errorf for that
46636;errorf is way better anyway
46637;Hi. Im looking for a web framework that is similar to angular but written in golang.Any recommendation?
46638;why is it better btw
46639;because you can format stuff
46640;similar to angular :thinkingo:
46641;how does wrapping work then btw
46642;how would unwrapping work
46643;I mean is the functionality of the angular
46644;youre not going to find anything i dont think
46645;All that jazz is client side html+js anyways
46646;"```goerr := foo(bar baz)if err != nil { return fmt.Errorf(""foo %v %v: %w bar baz err)}``` @fr3fou"
46647;Any good or mature web framework instead?
46648;You can use Go to server that content sure
46649;stdlib
46650;gochi
46651;and sqlx
46652;errorf uses an unexported error type with an Unwrap method
46653;will get you 99% of the way there
46654;you can try out https://upper.io btw as a db lib btw
46655;uwu
46656;i like it
46657;looks neat
46658;I need something quick and easy to build a web app
46659;stdlib
46660;gochi
46661;and sqlx
46662;i dont know what else to tell you
46663;@LILO I k ow very little about web but a lot of ruby on rails people have enjoyed using Go Buffalo
46664;gin and echo work too i guess
46665;I heard buffalo gin echo but not sure whichis mature enough
46666;you're probably going to spend more time learning the lib than actually making the app though
46667;You don\'t really need a framework per say
46668;i remember buffalo's docs were shit as fuck
46669;if you're going to pick one i would go with gin because youre most likely going to find more support
46670;when everything breaks
46671;As Mike said: stdlib gochi sqlx
46672;pretty much all you'd ever need
46673;there's a few major frameworks
46674;the stdlib does 90% of what you find in most frameworks
46675;its kinda the point of it
46676;^
46677;try basic stuff with them pick one you like go with it
46678;you can get pretty far with stdlib tho tbh
46679;go was built with high performance server systems in mind
46680;go is a real language
46681;The stdlib is fine but i need build tools around it that can speed up the development
46682;it doesn't need third party libraries to be functional
46683;see: `net/http` `encoding/json` and `sql` are some of our strongest assets
46684;So Gin is the recommended one?
46685;> build toolslike?
46686;adding more dependencies will explicitly add more work for you to do
46687;gin and chi are the ones I hear about most @LILO
46688;so you should do so sparingly
46689;but like I said do some basic exploration and find what works for you
46690;look through the docs and see which one makes sense quicker :P
46691;libs are really for your 1020% of specific domain problems you need to solve
46692;Thanks @superloach
46693;also is it me that just finds it really nice when a lib has an actual website + proper docs
46694;and not only rely on godoc
46695;pkg.go.dev >>> godoc anyway
46696;godoc imo is poor for getting started
46697;same shit
46698;you get it
46699;like i want a proper introduction
46700;why
46701;what
46702;how
46703;I like pkg.go.dev
46704;etc
46705;i think its good enough for most things
46706;packages usually have examples
46707;i still prefer upper's approach for example
46708;And a common format is helpful imo
46709;i find that outside of large techonologies
46710;you end up at the godocs anyways
46711;well for simple api lookups _sure_
46712;serious lack of question/answer out there in regards to go though
46713;but it's _really_ nice having a proper getting started
46714;every time i have a problem the only search results i get are standard go documents
46715;godoc / pkg.go.dev are very raw
46716;also like if you are completely new
46717;i legit dont know the last time i needed anything past the godocs for something ive used
46718;you wouldn't have any idea
46719;whwre to look
46720;https://echo.labstack.com/ look at this for example
46721;on the left
46722;sometimes examples aren't in the godocs which sucks
46723;that's been true for me for the most part too.
46724;there are sections for everything you might need
46725;and good examples with explanations
46726;they are basically holding your hand and telling you how to use it
46727;not just a raw api
46728;until something doesnt work right
46729;and you end up at the docs
46730;ü§îü§îü§îü§î
46731;or you want to implement something slightly different than what the examples show
46732;and end up at the docs
46733;im not saying they arnt useful
46734;but the useful ness is limited imo
46735;it's still great imo for dipping your toes in / if you are new
46736;sure
46737;interesting... I thought my problem was with channels but it's actually that `range` seems to reuse the same memory address
46738;only if you tell it to
46739;misusing loops/iterators is a common stumbling block early on
46740;```go for _ m := range blocksMsgs { p.Tcp.Outgoing < &m }```which part of this is telling it to?
46741;you're using `m` multiple times concurrently
46742;it's a single variable
46743;you need to copy
46744;it's a very common issue for beginners
46745;ah
46746;v := m&v
46747;i'll get there just finished wrapping my head around channels
46748;thanks!
46749;Echo Looks interesting will check that as well
46750;There's a blog post about that problem can't seem to find it though
46751;https://github.com/golang/go/wiki/CommonMistakes#usingreferencetoloopiteratorvariable
46752;All what‚Äôs the preferred database of the Golang community? Searches seem to show Postgres as a front runner
46753;depends what you're using the database for
46754;Structured data don‚Äôt have a need for documents here
46755;User management subscription management scheduling / calendars
46756;No documents no graph
46757;"Yeah I'd say it's most up to the app you make ;) I use PostgreSQL for the most part :)"
46758;Never used Postgres before mysql and Maria but that was in my PHP days node.js I used MongoDB it seems a bit of a sin to have unstructured data in go
46759;I know many people use MongoDB in Golang as well and MySQL is generally used a lot by all languages :) So .. up to you.. do what you know or what you want to learn :D
46760;I need to get back into database modelling ahaha mongo teaches you some bad habits
46761;Just throw stuff in and think about it later
46762;Might be a simple one but how do I covert a byte value (127444) to kb value (127)?
46763;```func (s MediaStore) getFileSize(path string) int { fi err := os.Stat(path) if err != nil { return 0 } return int(fi.Size())}```
46764;int(fi.Size() / 1024)
46765;Thanks @cats !
46766;KNew it was a simple one
46767;"You don't want to do it after casting to int otherwise you max at 2GB file size ;)"
46768;Ah ok I wont be uploading 2gb though (well hopefully not) haha
46769;It's so weird to see os. calls for me for some reason
46770;I miss local godoc
46771;My bot/various projects moved to afero as a way to simplify fs
46772;make it support S3 out of the box etc
46773;kb is also 1 << 10 üôÇ
46774;thats how i remember the sizes anyways
46775;mb is 1 << 20
46776;etc
46777;those are kib and mib
46778;but sure yeah
46779;close enough lol
46780;Yeah we don't talk about kib/mib
46781;except you are
46782;I know :(
46783;to me
46784;it is always KB/MB
46785;no i
46786;yeah
46787;improper units go brrrr
46788;to me it\'s this when talking about unit standards is honestly so wack
46789;Blame Windows
46790;yeah the fact that it's used so interchangeably is awful
46791;> Blame Windows@schrej gladly üòÅ
46792;> Some operating systems still compute file size in mebibytes but report the number as MB (megabytes). For example all versions of the Microsoft Windows operating system show a file of 220 bytes as 1.00 MB or 1,024 KB in its file properties dialog and show a file of 106 (1000000) bytes as 976 KB.
46793;i always have seen it as kb and KB
46794;I always assume it's 1024 for some reason but 1000 is correct
46795;but the fact it's reported one size/unit on drives and another in the OS is silly
46796;yup
46797;@fr3fou I'm not searching for a rotation though the image is translated but not rotated
46798;oof
46799;from the original message it seemed rotation was the issue
46800;well would it be smart to do the same though?
46801;translate until you find lowest distance
46802;Wouldn't be fast enough though ?
46803;As it would be O(n^4) ?
46804;think so :/
46805;+ Doing that for all the image in the bank x)))
46806;So 1000O(n^4)
46807;yikes
46808;also could you elaborate on translation
46809;im curious
46810;Sure here's an example
46811;I mean is there arbitrary data around the translated image? if not autocropping should definitely do the trick
46812;Yes there is
46813;ahh I see
46814;None
46815;Somewhat like this but with transparent background and the exact two same images
46816;:thinkingo:
46817;None
46818;None
46819;This then
46820;hmmm
46821;> As it would be O(n^4) ?@Yewolf how'd you get this btw
46822;never came across translation with phashes
46823;so im curious
46824;guys
46825;whats a good osint tool
46826;to get email from phone number
46827;The image can be both rotated and translated?
46828;The image is 475x475 which you'd do aproximately for half the area so you'd get 475x475x20x20 which is more like O(N^2xn^2) N being the image and n being the area of possible translation
46829;so about n would that be the same as the ndeg example i mentioned?
46830;No rotation
46831;Not really it's a bit under it
46832;+ you'd account for every direction right?
46833;Yep
46834;is that the 4?
46835;O(n^2) is O(n^3) and is O(n^4) and so on
46836;So I was overestimating it
46837;Low key may have good luck asking one of the Python discord‚Äôs. Lots of fancy math nerds in there.
46838;You‚Äôre basically doing some matrix math
46839;ping me when you find a solution
46840;im genuinely interested
46841;Sure
46842;If it‚Äôs just translated then you are basically finding the transformation matrix between matrix A and matrix B where the values of each matrix are the pixels. I‚Äôm no math nerd but that sounds right
46843;Yeah but solving a matrix is computationally intense
46844;True
46845;It's O(n^2)
46846;transformation matrix being the matrix that when [some operation] with the image gives the other image right?
46847;but what operation
46848;sum?
46849;or hadamard
46850;I believe you have to find the inverse matrix in order to find the operations ?
46851;It‚Äôs been years since I‚Äôve done linear algebra so I‚Äôm no help lol
46852;i think it would be smething related to vector directions
46853;Well it's been a year and we didn't really apply it to huge matrices but it should be the same x)
46854;like which way would each value in the matrix have to go
46855;Yeah but you can't use that because you don't know the vectors
46856;T(x) = Ax where A is the transformation matrix iirc
46857;and T is?
46858;The transformed matrix
46859;It's a function
46860;so the operation is some kind of product
46861;?
46862;Oh I thought you meant a function that takes X a matrix in x)
46863;also btw what's the end goal@Yewolf
46864;Well it is
46865;Yeah it is a product
46866;A sum of matrices is only appliable when you have square matrices that have the same size
46867;Where is zephyr when you need them for math stuff lol
46868;@zephyrtronium we are smooth brains and need your math brain
46869;> A sum of matrices is only appliable when you have square matrices that have the same size@Yewolf well aren't your images the same size?
46870;But yeah I would probably check out the python discord‚Äôs
46871;This sounds right up their alley
46872;Not sure that could change any time
46873;what's the problem at hand though
46874;And a sum won't really help x)))
46875;I'm thinking that there's another way
46876;you see a lot of problems like this in python yeah
46877;Ignoring all transparent pixels (or barely visible) wouldn't it be to compute a hash of all the remaining pixels (they should be in the same order since there's no rotation)
46878;I\'d ask around there just on a how should I do this level
46879;@Yewolf you can definitely do some simplifications to make this easier
46880;downscaling reducing palette sizes etc
46881;"crop to visible pixels on both images; compute hash; compare?"
46882;Yeah clearly
46883;Downscaling to 64x64 and using only grayscale
46884;Yeah that @fr3fou
46885;well if color doesn't matter of course
46886;It shouldn't
46887;what is the actual problem btw
46888;that you're trying to solve
46889;Though I'm not sure that this will work the image stored are 100Mb (on average) and the received image are 711Mb
46890;just to make sure we aren't in an XY proboem
46891;Yeah right
46892;Well I have images stored in the software and it receives images from discord the bot has to find the right image to return the right name
46893;And also you can't predict the randomness of the translations
46894;ML image prediction üôÇ
46895;Do you have a link to a paper for that ??
46896;Or article or something x)
46897;https://tech.olx.com/detectingimageduplicatesatolxscale7f59e4b6aef4?gi=deb3398dae74 btw
46898;I think this works
46899;http://phash.org/demo/
46900;ConvNet and DCT
46901;The other two fails
46902;Is there any go integration of those ?
46903;If the image is translated and that's all or possibly with added noise or a very small amount of other linear transformation then crosscorrelation is exactly what you want
46904;No noise
46905;It's really just a translation x)))
46906;anyone here have experience with hashicorp/goplugin?
46907;Fft > take one quadrant > multiply by conjugate > inverse fft > find the peak
46908;Fft ?
46909;Fast Fourier transform
46910;fast fourier transform
46911;based fft
46912;There are libs for that if not for crosscorrelation specifically
46913;Ohhh
46914;https://gist.github.com/bemasher/7657285
46915;Yeah I see why then x))
46916;second one didn't look useful actually lol
46917;I'm gonna try DTC and that one after
46918;More precisely you'll be taking the fft of each channel of each image for O(n lg n) selecting the same quadrant of each multiplying each bin of each transformed channel by the conjugate of the corresponding bin of the other within that quadrant then doing an inverse fft and then finding the sample with the largest magnitude and that is exactly the offset between the two images
46919;Crosscorrelation is provably the most efficient and most effective way to do this
46920;Like literally I've read the formal proof
46921;is it possible to have a JSON decoded populate the values defined by an Interface in go?
46922;do you mean like```gotype Foo struct {}func (f Foo) Qux() {}type Bar struct {}func (b Bar) Qux() {}type Baz interface { Qux()}```and then unmarshalling into a Baz (or something with a Baz field)?
46923;because if so no you'd need to make a wrapper that contains a Foo and a Bar and populates the appropriate one in its UnmarshalJSON method
46924;Yeah in a way. So rather then having a public field able to bind a JSON key to Baz in your example and either struct being able to define how that's implemented
46925;I did notice that I can attach my own UnmarshalJSON to the struct itself to really override the behavior to make it my own which is pretty slick as well
46926;yeah that's how you'd do it then
46927;What should the correct type be in a mysql database for a bcrypt hash (36)?
46928;Thanks that's slick.
46929;@Ainsley I believe you can store the hash as text
46930;So just a varchar?
46931;yeah varchar works
46932;@csgeek not the cleanest but here's an example https://play.golang.org/p/nkdBurK2oHf
46933;that's cool. Thanks @superloach you didn't have to code all that out but appreciate the example
46934;I really love Go you can write some really slick patterns
46935;Could I ask you go veterans for some feedback on my beginner level code?
46936;I warn you I can be brutal
46937;No I'm joking I'm a beginner too
46938;of course @Dylan
46939;though I wouldn't qualify myself as a Vet i'll be happy to look at it
46940;Be brutal roast me
46941;https://gist.github.com/31edef6ee2f644619db8cf3a239b5766
46942;@csgeek don't worry it didn't take me too long üòÅ
46943;IfError pattern bad
46944;It hides the actual error handling
46945;I've been wanting to actually proofofconcept that idea for a while now anyway
46946;eventually we'll get union types and that should make stuff like this a lot easier
46947;> IfError pattern bad@Madxmike Noted will remove it
46948;Give me a minute
46949;To get on my desktop
46950;```goif stat.IsDir() { continue}if isCsv(file) {```turn this into ```goif stat.IsDir() && !isCsv(file) { continue}```
46951;keeps the happy path nice
46952;Just out of habit I use the flags package for cmd args just because if you end up adding more its much easier
46953;your main is a bit long i'd break that down. Also you're calling IfError after using the value sometimes which isn't great pattern. Corba and similar are worth looking at if you're writing CLI tools. I would also use a logger like logrus to make your life easier rather then using Prints statements.
46954;the whole for loop should be in its own function imo
46955;"I have a question and I fear the answer is already negative but worth asking anymore. I\'m using goswagger to generate an API. I find my self often in the situation where I need to raise an error in my handlers like this```go// actionGroup is an arbitrary name// ActionName is an arbitraty name assigned to my handlerreturn actionGroup.NewActionNameDefault(http.StatusInternalServerError).WithPayload(&models.Error{Code: http.StatuInternalServerError Message: Foobar""})```It is obviously a super long line of code so I wanted to refactor it. Unfortunately every handler ended up needing its own couple of methods as while all the actions and actionGroups have their own actionGroup.ActionNameDefault type.I started experimenting with interface{} and func variables but I can\'t make this work for the love of me.The closest I\'ve gone is this:```gotype errorFunc func(int) defaultErrortype defaultError interface { WithPayload(payload models.Error) defaultError WriteResponse(http.ResponseWriter runtime.Producer)}func ge(code int msg string f errorFunc) middleware.Responder { return f(code).WithPayload(&models.Error{Code: int64(code) Message: swag.String(msg)})}func myErrorFunc(code int msg string) middleware.Responder { return ge(code msg actionGroup.NewActionNameDefault)}```Unfortunately it won\'t compile cause it says it can\'t use actionGroup.NewActionNameDefault (value of type func(code int) actionGroup.ActionNameDefault) as errorFunc value in argument to ge.Any clue?"
46956;"```goreturn actionGroup.NewActionNameDefault(http.StatusInternalServerError) .WithPayload(&models.Error{Code: http.StatuInternalServerError Message: Foobar""})```"
46957;long line solved
46958;I wonder if there are any other api generation solutions
46959;also models package bad
46960;Alright thank you. Should I use more pointers?
46961;@Dylan i would def break this whole main up into like 34 more functions
46962;Would you really use logrus and cobra for such a small utility?
46963;What do you think about https://gist.github.com/awmv/31edef6ee2f644619db8cf3a239b5766#filemaingoL43
46964;That was the first thing that came to mind but I wonder if there is a better way to do it
46965;"hell ```gopayload := &models.Error{Code: http.StatusInternalServerError Message: Foobar""}return actionGroup.NewActionNameDefault(http.StatusInternalServerError) .WithPayload(payload)```"
46966;> Would you really use logrus and cobra for such a small utility?@misterturtle I don't know either one but I'm gonna look it up
46967;actually dylan
46968;when you do the walk
46969;only add files that are csv files
46970;Oh. I guess that's what happens when you copy paste stuff from stackoverflow
46971;You are right
46972;that way the only thing you are processing
46973;are csv files
46974;try using documentations more than stackoverflow üòî
46975;It's more challenging though if you know nothing and try to find a solution :batgopher:
46976;I find that sometimes.. not knowing their is a more appropriate library or function in a library to do what you want
46977;true yeah
46978;imo it\'s more of a just do it until you know it thing
46979;I'll end up reading the docs but not realising there is a better method d to use
46980;Yeah comes with time and experience I guess
46981;Thank for the advice üëç
46982;``` lines err := reader.ReadAll() if err != nil { return nil err } return lines nil```could be replaced with``` return reader.ReadAll()```
46983;```macros := []Macro{}```I use `var macros []Macro` instead
46984;You can also prevent the extra `stat` by not adding directories to the `files` slice
46985;is there a better way than ```go for _ v := range strings.Split(charName  ) { if len(v) > 0 { name = append(name v) } }```to remove empty strings in a []string ?
46986;what is c
46987;A string
46988;SGT why do you use var over :=?
46989;a string
46990;string.fields will give you only the actual fields of the string
46991;no whitespace and stuff
46992;oh nice
46993;and then string.join iirc
46994;When I'm always appending data to the empty slice I might as well use a `nil slice` properly
46995;for []string > string
46996;[]sliceType{} feels weird to me too
46997;[]Macro{} creates an empty slice
46998;var slice []sliceType gang
46999;or `marcos := make([]Macro someLength > 0)`
47000;if you want to allocate it beforehand
47001;is it a 11 mapping of csv to macros
47002;if so since you are now going to only have csv files in `files`
47003;``` macros = append(macros macro) doc.Macros = macros```can move that last assigment to outside the loop
47004;you can `macros := make([]Macro 0 len(files)`
47005;If they did the filtering beforehand yes
47006;yeah we already talked about it
47007;currently they don't
47008;"```go lines err := readCsv(file) ifError(""Cannot read file +file err) var csvFile [][]string for _ line := range lines { if len(line) < 2 { continue } csvFile = append(csvFile line) }```"
47009;just do this filtering in the `readCsv`
47010;so only appropriate lines are returned
47011;https://play.golang.org/p/6gqqVhs3UQz Can't seem to lower case a string and preserve hypens? Does strings.ToLower remove them?
47012;you used var file
47013;which doesn't have the hyphens in the first place
47014;yeah you're using `file` not `cleanedFile`
47015;My bad
47016;Thanks
47017;Sorry asking you guys alot recently haha.Could you maybe glance over this question I had on stack overflow? Havent had a responsehttps://stackoverflow.com/questions/63874503/howtoorganisefunctionmapsforspecificendpointsingingolang
47018;Is there a datetime package like in python for golang?
47019;https://golang.org/pkg/time/
47020;i don't really use gin so i can't give you any examples
47021;Hey guys quick question I am trying to get my player data into a json to my client now the problem is the data that comes to my client doesnt seem to be recognized as valid json. Other parameters seem fine just the player position is not working it gets interpeted as stringhttps://hastebin.com/ficogigaha.cs
47022;Basically having issues with the nested JSON
47023;Idk if to change the setup and use map[string]interface{} or something
47024;@Volks show your json pls
47025;> @misterturtle I don't know either one but I'm gonna look it up@Dylan Logrus yes cobra not really but since he was looking for feedback those are tools to be aware of as is viper.
47026;Hard to tell without seeing the actual data
47027;not familiar either @Ainsley but I upvoted your post. So maybe someone else will
47028;@csgeek thats very kind of you cheers
47029;@Str≈ìm ``` {flip:false gun_rot:1.570796 player:eefbd7a7f8174f16b79a96500aa4ace3 player_pos:{x:56.049999,y:96.900002}}```Direct output with jsonlint and some  it says its a okay
47030;Just that the value for player pos is a string instead of being decoded as nested json
47031;well your struct tags dont match that json
47032;"```gotype PlayerPos struct { YPos float64 `json:""x_pos""` XPos float64 `json:""y_pos""`}```"
47033;Yeah but I manuall enter it here does it matter?
47034;I mean I dont use the struct but its values
47035;I'll try matching it up now
47036;oh i see
47037;I tried using the struct directly but it got me just the values like `16 16` without any tags
47038;you should just use the struct directly
47039;what is the output of marshalling the playerentity
47040;Sec
47041;Also `map[string]string` will indeed only produce strings
47042;Another reason you should be using the structs
47043;@Etzelia Yeah I dont mind sending them as strings but I am just confused as to why the client is not decoding it correctly
47044;"Because in JSON `""{x:5.5,y:10.1}""` != `{x:5.5,y:10.1}`"
47045;For example
47046;(ignore the numbers was just the crap data I used in playground for test data)
47047;I guess the point is regardless you should be using the structs.It will be _much_ less painful as you move forward.
47048;Yeah I used the player struct instead of the map stuff much clearer
47049;Thank you @Etzelia and @Madxmike
47050;is there any conventions that people use for naming consts that make them different than any other var?
47051;I'm used to them being all CAPS but I don't think that's the go pattern
47052;None
47053;@zephyrtronium @_diamondburned_
47054;:cereal:
47055;like this just highlights variables that definitely escape or something?
47056;Let's find out
47057;When i get out of bed
47058;i would like exactly that and also highlighting functions that are eligible to be inlined and also highlighting inlined call sites
47059;or well i say exactly that but highlighting uses of variables that force them to escape would be better
47060;hello everyone
47061;i don't think the compiler's information is that finegrained though but @mdempsky would know
47062;huh yeah having escape detection info inlined would be p cool
47063;where is this?
47064;gopls v0.5.0
47065;see #gonews
47066;Better completion in function literals? üëÄ
47067;"I am trying to get my hands on thing called worker pools"". But cant figure how to properly do it. Pls send help.This is what i got: https://play.golang.org/p/WgKWMGaMJRX"
47068;That has been the most annoying thing with gopls I‚Äôve run into (which in a good way says something as well)
47069;https://github.com/golang/go/blob/master/src/crypto/sha256/sha256.gois this supported both on x86/x64 ?
47070;@Rin I suggest reading through this https://blog.golang.org/pipelines
47071;@Deleted User yes why wouldn't it be?
47072;I wish I could. My brain can't read more text (especially with white theme on background)
47073;oh damn it's out already?
47074;sold
47075;If you compile with compiler flag m=2 (i.e. `go build gcflags=m=2`) you'll get detailed descriptions of why variables escape to the heap.
47076;@Doad was scared x87 fpu wouldnt work idk
47077;good to know
47078;gopls could take advantage of that if that isn't exactly what this new code lens does
47079;you know
47080;I didn't even know gopls had a settings
47081;Rofl
47082;The compiler's diagnostics flags are generally targeted more towards compiler developer use but apparently a lot of users rely on it for diagnostics too. (When I rewrote escape analysis I initially skipped the `m=2` output because I didn't need it... but then a lot of users reported they were switching back to the old escape analysis algorithm because they wanted it still.)
47083;I think there's some new functionality for the compiler to emit better machinereadable diagnostics too but I'm not familiar with how any of that's surfaced to users.
47084;shouldn't it already be fairly machinereadable?
47085;at least as far as parsing them to display back in a more organized way
47086;i recalled the existence of `m` but i remember it being just this variable escapes which is helpful but less so than seeing which uses cause escaping
47087;also i know there is json output for compiler optimization decisions though i don't remember how to get it
47088;@_diamondburned_ Yeah I don't entirely get it. For the last couple years my fulltime job hasn't involved Go so I haven't kept up on why some of the decisions were made. Just seen as they appear in the compiler.
47089;o oof
47090;"how could I solve it?```govar _defaultUsers = defaultUsers()func defaultUsers() []Users { fmt.Println(os.Getenv(""SERVER_PORT"")) ...}func main() { err := godotenv.Load(""../.env"") if err != nil { log.Fatal(""Error loading dot env file!"") }}````SERVER_PORT` is always empty because `defaultUsers()` is called before main"
47091;try...not calling it before main
47092;you can have `defaultUsers` load the env using a `sync.Once` so the load always happens exactly once right before first use
47093;or load the env file in `init`
47094;iirc `init` would not work here because variable initializers run before inits
47095;oh yes
47096;dur
47097;need some math helpso ok I am trying to find out the font size. Each character if it was font size 1 would be 1px factoring in spacing i have an image which can be variable in length i need to figure out what font size i need to cover exactly 80% of the image width
47098;:5_bugcatstare:
47099;yeah I tried init() before had the same issue
47100;@Riku depends on the font you're using
47101;not all fonts are fixed width
47102;i am using a font with no spacing and 1px1px
47103;should be close enough
47104;but yeah i need that general width
47105;wtf
47106;1x1px?
47107;are you sure?
47108;:5_bugcatstare: no but it should be close enough and i can adjust it
47109;`fixedWidthSize := imageWidth  0.8 / stringLength`
47110;something like that
47111;so fixedwidthsize is the font size i set?
47112;You're asking for the font size
47113;for each individual character?
47114;yeah
47115;lets say 1px is literally 1px in this equasion anyway
47116;and the image can be whatever amount of pixels
47117;that equation is 80% of the image width divided by the length of your text
47118;which will give you the size each character needs to be to fit in that space
47119;ah ok so yeah that what i need
47120;thanks :Smile:
47121;can I have sync.Once one liner to also declare the value?```govar _defaultAllowedIps sync.Once = defaultAllowedIps()```
47122;just load it in main
47123;"I would like to keep this way it looks cleaner now```govar _defaultAllowedIps = defaultAllowedIps()func defaultAllowedIps() []AllowedIps { allowedIps := `[{ ipAddress"": 127.0.0.1"" } { ipAddress"": ..."" }]` var allowList []AllowedIps err := json.Unmarshal([]byte(allowedIps) &allowList) if err != nil { log.Fatal(err) } return allowList}```"
47124;just would like to add the sync.Once
47125;guys i build a osint tool like sherlock but better
47126;does anyone want to test it and give feeback?
47127;`sync.Once` is used to call a function once
47128;supports 400 websites
47129;then it should be `var _defaultUsers = sync.Once defaultUsers()` ?
47130;no
47131;have you looked at the docs for `sync.Once`?
47132;no tbh just had a look on some examples
47133;<https://golang.org/pkg/sync/#Once>
47134;I understand the concept but I dont know how to transform the previous code into the righr way to do it
47135;it expects me to declare `defaultAllowedIps` like `defaultAllowedIps.Do(func() { ... })`  but defaultAllowedIps is global
47136;Does anyone have any repos/examples of uploading sending image files from the frontend to backend for upload? Having trouble passing the image file the correct way
47137;are you doing the backend or frontend
47138;Both
47139;what's the frontend written in
47140;TypeScript/React
47141;on the backend use multipartform to read the files
47142;"I got it but it feels so wrong```govar _defaultUsers = defaultUsers()var loadEnvVars sync.Oncefunc defaultUsers() []Users { loadEnvVars.Do(func() { err := godotenv.Load(""../.env"") if err != nil { log.Fatal(""Error loading dot env file!"") } })```"
47143;this https://golang.org/pkg/net/http/#Request.FormFile
47144;that is the way to use `sync.Once` to do this rather than having `main` load it at the start and set the global
47145;as for JS use new FormData https://muffinman.io/uploadingfilesusingfetchmultipartformdata/
47146;https://stackoverflow.com/questions/35192841/fetchpostwithmultipartformdata
47147;@zephyrtronium I mean I'll need to duplicate it every var initialization I have that uses env. variables
47148;just avoid globals
47149;globals bad
47150;Ty I‚Äôll try this out  been trying with formdata and having some problems but I‚Äôll just check over the docs again
47151;yeah np
47152;there are multiple ways to get files from formdata in the backend
47153;but this is the easiest way
47154;"since now I was thinking this was the best way to initialize the defaultUsers list using globals. is there a better way?```govar _defaultUsers = defaultUsers()var loadEnvVars sync.Oncefunc defaultUsers() []Users { loadEnvVars.Do(func() { err := godotenv.Load(""../.env"") if err != nil { log.Fatal(""Error loading dot env file!"") } }) user := Users{name: fmt.Sprintf(""%s os.Getenv(""AUTHORIZED_USER"")) uuid: fmt.Sprintf(""%s os.Getenv(os.Getenv(""AUTHORIZED_USER_KEY"")))} var usersList []Users usersList = append(usersList user) return usersList}```"
47155;you initialize it in main
47156;then I initialize the defaultUsers but where should I store the defaultUsers list?
47157;you'd store it inside main as a variable then you'd pass that variable around
47158;"my main() was so cute so far now I\'ll add a lot of stuff in it```gofunc main() { fmt.Println(""API is running..."") handleRequests()}```"
47159;that's kind of pointless
47160;might as well do ```gofunc main() { start() }```
47161;I mean to not have globals I'll need to pass the lists (user list) to handleRequests function and then send it to the handlers
47162;nothing wrong with that
47163;https://github.com/diamondburned/smolboard/blob/renai/main.go
47164;here I'm fully parsing things down
47165;there's no global
47166;well with the exception of CLI flags
47167;its a little different because you dont have lists you will need to access by endpoints for example
47168;I feel the language is forcing me to use a DB
47169;> its a little different because you dont have lists you will need to access by endpoints for examplewdym?
47170;all my endpoints have access to what's passed down
47171;config access https://github.com/diamondburned/smolboard/blob/renai/server/http/post/post.go#L93
47172;request which contains configs passed down from main https://github.com/diamondburned/smolboard/blob/renai/server/http/internal/tx/tx.go#L16
47173;```var _ Middlewarer = (Middleware{}).M``` the most confusing bit of Go ive read
47174;Ive seen that done for init() but why the cast?
47175;that's just to assert function signature
47176;so if Middlewarer is ever changed the thing won't compile
47177;until you change M too
47178;I still don't understand
47179;It's making sure that Middleware.M has the same parameters/results as Middlewarer.
47180;^
47181;Ooooh of course
47182;"@_diamondburned_ thanks for the examplespassing it by functions I will need to send it to http.HandleFunc() for example?```gofunc handleRequests(usersList []Users) {http.HandleFunc(""/ipaddress ipAddressHandler usersList)```"
47183;Because the var type
47184;Right.
47185;@converge you'd use either a closure or a method most of the time
47186;Sneaky
47187;you can't pass additional parameters to the handler like that
47188;Most of the time when you see `var _ T = x` it's a way of statically checking that `x` has type `T`.
47189;"```gofunc handleRequests(usersList []Users) { v := NewInstance(usersList) http.HandleFunc(""/ipaddress v.IPAddressHandler)}```"
47190;(And by most of the time probably almost always unless you're writing Go compiler test cases.)
47191;Yeah that's pretty neat
47192;sure that's why I ask. by method do you mean it's better to use class approach?
47193;there isn't class in go
47194;and whether it's better or not depends
47195;it is better if you could organize it properly
47196;then isnt a method..
47197;Go structs have methods
47198;^^^^ nitpicking
47199;I spent too much time with Python and JS my mind is blowing right now trying to understand the Go way
47200;basically
47201;(Also any defined nonpointer types can have methods too.)
47202;say I have a UserService that needs a []Users I'd use methods for handlers only if those handlers have to do with that UserService in a meaningful way
47203;so
47204;I always feel like i learn something here which is great because I have so little time to do actual programming at the moment
47205;```gotype UserService struct { UserList []Users}func (s UserService) HandleUserCreate(w http.ResponseWriter r http.Request) {}```
47206;this is good
47207;@misterturtle same I just like to sit back and watch the convos lol
47208;because it's obvious that HandleUserCreate does have to do with UserService in a meaningful way
47209;```gotype UserService struct { UserList []Users}func (s UserService) HandleHelloWorld(w http.ResponseWriter r http.Request) {}```
47210;this is bad
47211;because HandleHelloWorld has nothing to do with UserService
47212;in this case HandleHelloWorld is better being somewhere else or preferably a closure
47213;fml
47214;"as for using that UserService thing something like this will do: ```gotype UserService struct { chi.Mux UserList []Users}func MountUserService(list []Users) UserService { s := &UserService{Mux: chi.NewMux() UserList: list} s.POST(""/ s.handleUserCreate) return s}func (s UserService) handleUserCreate(w http.ResponseWriter r http.Request) {}func main() { userList := getUserList() mux := chi.NewMux() mux.Mount(""/user MountUserService(userList)) http.ListenAndServe("":6969 mux)}```"
47215;handleUserCreate would then be called with `POST /user` and it would be able to access the userList created in main()
47216;UserService can also be in another package as well as long as you have a way to reference Users without a cyclical import
47217;I just learned how to use interface this looks similar to interface call `(s UserService)`  how is it called?
47218;Question how come unsafe. Pointer() is not on https://golang.org/pkg/unsafe/
47219;https://golang.org/pkg/unsafe/#Pointer
47220;:Thonk:
47221;@converge lemme fix sth
47222;that's how
47223;Under type not func though
47224;yeah Pointer isn't a func
47225;similarly to how `int()` isn't a func
47226;it's a type conversion
47227;Ohhh ok
47228;is it a good idea to implement and consume an interface on the example above?
47229;I'm not sure why you'd need an interface on the above but the example is already using interfaces
47230;you just don't see it
47231;if you look at `(chi.Mux).Mount`'s signature you'll notice that it takes in a `http.Handler`
47232;`UserService` satisfies `http.Handler` because it embeds another `chi.Mux` in its own type
47233;I think it confused me because of a call to unsafe.Pointer() I expected a func
47234;Mount is a huge part of my package structure
47235;None
47236;@misterturtle Type conversions and (one argument) function calls use the same syntax.
47237;I like that signout is a POST one of the dumbest issues I have to write are non idempotent GET to logout w/ no CSRF protection
47238;Maybe you're used to `(int)x` in C/Java. In Go that would be `int(x)`. (Or sometimes `x.(int)`.)
47239;sign out actually does db ops to invalidate the token so I thought it made more sense for it to be a POST
47240;and yeah I kind of like how type conversion is done like a function
47241;it just makes more sense to my monke brain
47242;Yup as it should be per the spec really
47243;So if Pointer is a type in the unsafe package I guess the next thing to understand is how it knows how to perform the type conversion but I'll look into it before inevitably getting stuck and asking :)
47244;i'm pretty sure unsafe.Pointer being like that is like
47245;compiler/runtime magic
47246;like there's literally a magical type there
47247;ArbitraryType
47248;Yeah unsafe.Pointer is a magic compilerimplemented type which is allowed to be converted to/from uintptr and any T type.
47249;Oh ok
47250;"Package unsafe isn\'t a normal package. It\'s builtin just like things like make and append""."
47251;Start calling Read() until you get io.EOF.
47252;Or use ReadAll
47253;`ioutil.ReadAll` should help
47254;(I can never remember which functions are in ioutil vs io.)
47255;I've heard that they might actually move ReadAll to io in one of the issues
47256;I believe after calling `ReadAll` your reader should be at EOF
47257;I have a design question  I tried to decouple my modules but I think I've missed the point a little...A. I have a telegram module  a telegram bot which accepts commandsIt reads the command and produces a task in a queueB. The executer module  accepts the task and executes it puts out the result to a db.So until now only the executer module talked with the DB,But now I realize that I need to do some tasks based on tasks results already in the db for example I have 3 schools as result and for each school I want to produce another task... but now it will mean that the telegram module will also have to connect to the db... any ideas how to make this better?
47258;What does your tree look like now
47259;tree ü§î?
47260;File tree
47261;File Tree organization of files
47262;I've created them in seperate projects actually
47263;So one is the telegram bot  has the bot and produce task
47264;And the other is the executer  has the db and execute task
47265;If you are on linux just run the `tree` command in your project directory
47266;tree works in powershell too
47267;Not sure if you have to use `tree .` or just `tree` tho
47268;school folder:cmddb/connect/mongofs/maingarbagelimiter/root.goplanner/root.goprovider/root.gotypes/root.goworker/filter.go main.go
47269;> Mount is a huge part of my package structure@_diamondburned_ Sorry but what is your theme?
47270;telegram folder:limiter/main.goproducer/main.go
47271;these are the main ones...
47272;because telegram and school are supposed to run on different machines
47273;but communicate
47274;microservice architecture is your best choice.
47275;just google gRPC.
47276;I'm using gRPC...
47277;And... where?
47278;the tasks between them are sent using gRPC
47279;And why can\'t you create api to interact with database from other module?
47280;module(s)
47281;I can... trying to imagine a nicer way so there will only be one connection to it
47282;So I will be able to avoid connecting both machine to the db
47283;@lapfed255 theme?
47284;yes
47285;in ... give me a sec
47286;in that message > https://discordapp.com/channels/118456055842734083/118456055842734083/755536125996564570
47287;> So I will be able to avoid connecting both machine to the db@242 Just why not docker?
47288;It will be on docker
47289;And without communicating between modules... you won't construct any modular system ¬Ø\\_(„ÉÑ)_/¬Ø
47290;modules = services/microservices/etc.
47291;that's the default githubh color scheme
47292;lol default?
47293;seriously? okay.
47294;> And without communicating between modules... you won't construct any modular system ¬Ø\\_(„ÉÑ)_/¬Ø@lapfed255 Ok thank you
47295;I will connect them both to the db
47296;No why both?
47297;Only one second can just connect to the first
47298;and communicate with database through it
47299;Ok I see so you suggest I remove the db from the executer(school) and make a service that is just db oriented
47300;Make each thing that has to communicate to another thing separate
47301;Ok you guys make a lot of sense :] thank you so much @Karitham @lapfed255
47302;```gofunc (kvs keyValueServer) CountActive() int { count := <kvs.ActiveCount count++ return count}```how do i prevent this from locking if kvs.ActiveCount is empty
47303;you can't
47304;that's kinda the whole point of channels
47305;they're a way of communicating data that will eventually get where it's going
47306;allowing you to defer work until work is ready
47307;if you're using channels and the channel is empty the code will block
47308;hmm
47309;so basicaly the function will not return?
47310;if channel is empty
47311;not until the channel has something
47312;yeah
47313;it blocks
47314;it'll return as soon as the channel has a vlalue for it
47315;welcome to concurrent programming
47316;fairly sure this is a misuse of channels lol
47317;yep
47318;if this is a problem you don't actually want a channel
47319;yeah
47320;makes sense
47321;it's okay channels are
47322;a very nontrivial subject
47323;i would not say hard
47324;but not simple
47325;my design is wrong
47326;i am trying to figure out how to keep track of the number of clients in a concurrent server
47327;sure
47328;i'd keep a slice or map of the active clients
47329;`len(whatever.Clients)`
47330;done
47331;have whatever mechanism taht adds/removes clients update that list
47332;yeah I'd have a connection pool and a mutex
47333;hm i'll look in to that
47334;i cant use mutexes for now
47335;use a `chan struct{} 1`
47336;aka homebrewed mutex
47337;> can't use mutexes
47338;what does that dO?
47339;joke obviously
47340;smells like homework
47341;it is hw
47342;yup use chan struct{} 1
47343;it's basically a mutex
47344;lol
47345;how does it work tho
47346;acquiring the mutex is sending struct{}{} into the channel
47347;releasing the mutex is taking from the channel
47348;go routines are called concurrently right
47349;```go Read()```could be executing multiple times in the background is that right
47350;"```gopackage mainimport ( fmt"" io/ioutil"" os"")func enumerateFiles(baseDir string fileChannel chan< os.FileInfo) { files _ := ioutil.ReadDir(baseDir) for _ file := range files { if file.IsDir() { path := baseDir + \\\\ + file.Name() go enumerateFiles(path fileChannel) } fileChannel < file }}func main() { files := make(chan os.FileInfo) go enumerateFiles(""C:\\\\ files) for file := range files { fmt.Println(file.Name()) }}```"
47351;so this is what I have so far
47352;but I have no clue how to tell when to close the channel as the function is recursive am I going about this the wrong way or is there a better way to do it
47353;@R4BB1T yes
47354;@Stellar https://golang.org/pkg/path/filepath/#Walk
47355;no need for recursiveness
47356;oh alright thanks!
47357;but the answer to that specfic problem would be a waitgroup
47358;each recursion would add to the waitgroup
47359;and the channel would wait until the waitgroup is done
47360;and then close
47361;https://gobyexample.com/waitgroups
47362;so I could add like a short goroutine in main that just has two lines of waiting and then closing the channel?
47363;yes
47364;and start it after the first waitgroup.add
47365;alright thats a lot more simple than some stuff I was imagining lol thanks for the help
47366;"```gofunc enumerateFiles(baseDir string fileChannel chan< os.FileInfo wg sync.WaitGroup) { wg.Add(1) files _ := ioutil.ReadDir(baseDir) for _ file := range files { if file.IsDir() { path := baseDir + \\\\ + file.Name() go enumerateFiles(path fileChannel wg) } fileChannel < file } wg.Done()}func main() { files := make(chan os.FileInfo) var wg sync.WaitGroup go func() { wg.Done() close(files) } go enumerateFiles(""C:\\\\ files) for file := range files { fmt.Println(file.Name()) }}```"
47367;basically
47368;but walk is a much better solution
47369;gotcha was just making my own small example to practice with concurrency
47370;```gocase hi := <greeting: some code some code some code```
47371;inside the case statement the order of execution is sequential right?
47372;yes
47373;everything on the same gorotuine happens sequentially unless you explitly say different or are told otherwise by a function or lib
47374;got it
47375;if i am accessing a data structure within a go routine
47376;it will suffer from race conditions
47377;right?
47378;It depends on what youre doing
47379;access from multiple goroutines doesnt automatically constitute a data race
47380;supposing i have a struct
47381;```gotype example struct{ hi int}func someRoutine(exp example) { exp.hi++}```
47382;```gogo someRoutine(&struct_of_type_example)```
47383;won't this cause a race condition bc we are trying to modify the same variable
47384;How many goroutines
47385;Youve only shown 1
47386;youre syntax is off
47387;and it makes it hard to understand
47388;sorry changed it
47389;got confused myself for a sec
47390;> How many goroutines@Str≈ìm so any changes made by just `go someRoutine(&struct_of_type_example)` is not a race condition
47391;but if i had another go routine accessing the same struct
47392;then it would be a race condition?
47393;if both did the same `exp.hi++` operation
47394;Potentially yes
47395;got it
47396;Okay so I am not 100% new to Go... I tried the language out a while ago but I never really mastered the fundamentals and learned the language. My goal is ultimately to change my stack and use Go on the backend / as an API server.
47397;Alright soSomeone mentioned yesterday that mongodb is bad as it screws up the data and also backs up corrupted data silently.And now I see that so many big companies are using itI dont want sql databasesI want schemaless databaseIm confused which one to choose now.Can anyone please help me with their tips?
47398;As far as learning material or what libraries I should use/learn can anyone offer suggestions?
47399;stdlib
47400;?go tour
47401;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
47402;this isn't javascript where knowing how to use a framework is key to success
47403;learn go not a library
47404;Perfect
47405;Yea. I was thinking in conjunction with learning material like the tour of go.
47406;Glad to hear that though. That learning Go is more important than learning some random framework. I dislike that about JS/TS.
47407;@HankMoody do you have relational data
47408;thats the first question i would ask before swearing off sql
47409;?go learn
47410;TutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  SkippyGo by Example <https://gobyexample.com/>  SkippyGopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355
47411;@Dark Fusion
47412;> thats the first question i would ask before swearing off sql@Madxmike The data will be like Tinder's user data. Nothing complex.
47413;And I hate sql dbs like hell
47414;that didnt answer the question
47415;a relational database will make working with relational data easier
47416;I've an issue and I have been bothered by this since last 8hours. I have setup my go environment as I should have but whenever I am importing other 3rd party libraries from GitHub.com it is installed in my machine but it isn't recognized. I've set the path and root correctly but still it is not working please help guys.
47417;"```goGO111MODULE=""""GOARCH=""amd64""GOBIN=""""GOCACHE=""/home/whiskygrandee/.cache/gobuild""GOENV=""/home/whiskygrandee/.config/go/env""GOEXE=""""GOFLAGS=""""GOHOSTARCH=""amd64""GOHOSTOS=""linux""GOINSECURE=""""GOMODCACHE=""/home/whiskygrandee/go/pkg/mod""GONOPROXY=""""GONOSUMDB=""""GOOS=""linux""GOPATH=""/home/whiskygrandee/go""GOPRIVATE=""""GOPROXY=""https://proxy.golang.org,direct""GOROOT=""/usr/local/go""GOSUMDB=""sum.golang.org""GOTMPDIR=""""GOTOOLDIR=""/usr/local/go/pkg/tool/linux_amd64""GCCGO=""gccgo""AR=""ar""CC=""gcc""CXX=""g++""CGO_ENABLED=""1""GOMOD=""""CGO_CFLAGS=""g O2""CGO_CPPFLAGS=""""CGO_CXXFLAGS=""g O2""CGO_FFLAGS=""g O2""CGO_LDFLAGS=""g O2""PKG_CONFIG=""pkgconfig""GOGCCFLAGS=""fPIC m64 pthread fmessagelength=0 fdebugprefixmap=/tmp/gobuild710462739=/tmp/gobuild gnorecordgccswitches""```"
47418;This is my go env.
47419;do you have a module
47420;I do.
47421;installed.
47422;no in your package
47423;does it have a go.mod
47424;nope. should I get one? How to do it?
47425;yes
47426;GOMOD =  is showing empty in the env
47427;go mod init <your package name usually in the form of domain/org/package>
47428;@Madxmike Thank you!!
47429;so `go mod init github.com/madxmik/foo`
47430;inside your package folder
47431;okay okay wait I will do it and come back.
47432;foo
47433;go: creating new go.mod: module github.com/gofiber/fiber/v2
47434;no
47435;the name is YOUR package
47436;?go modules
47437;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
47438;```go mod init github.com/whiskygrandee/hello```
47439;that
47440;oh thanks. I will do that.
47441;you may need to delete the file you just made
47442;idk how it will take it
47443;thanks dude it works now. I will go read the modules blogs now. thanks
47444;OMG IT WORKS.. :facepalm: thanks a whole lot
47445;you should immediately make a module every project basically
47446;Just to be a bit more concrete as to why it didn't work: versioned import paths like that (the `/v2`) are only valid for modules and correspond to a specific Git (usually) tag on the project.
47447;You might've seen links like `gopkg.in` in the past that accomplished a similar goal in GOPATH mode but modules are the modern way to go about that.
47448;ahan do we need a package manager in golang? my friend told me that there is this manager named dep. is it worth it?
47449;no
47450;mod handles all that
47451;I love it.
47452;dep was an old dependency manager before mod
47453;I haven't heard that name in a while. üòÑ
47454;The good ol days of vgo and dep
47455;haha
47456;> a relational database will make working with relational data easier@Madxmike Only relational data I see is like whether a user has right swiped on a user and mutual friends. But again I dont have much experience with databases
47457;i would figure it out a bit more before jumping into mongo
47458;its kinda annoying to use in go
47459;vs sql
47460;oh
47461;Annoying in what cases? Can you please provide a few examples?
47462;You can always try it out
47463;And figure out why SQL makes more sense for you (if it does) or vice versa
47464;I'm deploying a Go lambda function here and I'm not sure why marshal_and_encrypt_key gets a nilpointer for the following input
47465;"```{ EncryptionKey"": BEGIN PUBLIC KEY\MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAlRuRnThUjU8/prwYxbty\WPT9pURI3lbsKMiB6Fn/VHOKE13p4D8xgOCADpdRagdT6n4etr9atzDKUSvpMtR3\CP5noNc97WiNCggBjVWhs7szEe8ugyqF23XwpHQ6uV1LKH50m92MbOWfCtjU9p/x\qhNpQQ1AZhqNy5Gevap5k8XzRmjSldNAFZMY7Yv3Gi+nyCwGwpVtBUwhuLzgNFK/\yDtw2WcWmUU7NuC8Q6MWvPebxVtCfVp/iQU6q60yyt6aGOBkhAX0LpKAEhKidixY\nP9PNVBvxgu3XZ4P36gZV6+ummKdBVnc3NqwBLu5+CcdRdusmHPHd5pHf4/38Z3/\6qU2a/fPvWzceVTEgZ47QjFMTCTmCwNt29cvi7zZeQzjtwQgn4ipN9NibRH/Ax/q\TbIzHfrJ1xa2RteWSdFjwtxi9C20HUkjXSeI4YlzQMH0fPX6KCE7aVePTOnB69I/\a9/q96DiXZajwlpq3wFctrs1oXqBp5DVrCIj8hU2wNgB7LtQ1mCtsYz//heai0K9\PhE4X6hiE0YmeAZjR0uHl8M/5aW9xCoJ72+12kKpWAa0SFRWLy6FejNYCYpkupVJ\yecLk/4L1W0l6jQQZnWErXZYe0PNFcmwGXy1Rep83kfBRNKRy5tvocalLlwXLdUk\AIU+2GKjyT3iMuzZxxFxPFMCAwEAAQ==\END PUBLIC KEY""}```"
47466;The purpose is for the function to take in an arbitrary RSA public key and return back an encrypted result.
47467;Probably would help to show the code
47468;Oh that .txt file is your go code
47469;it's in message.txt
47470;don't do snake c√°e pls
47471;what line got the nil?
47472;oh
47473;it's probably `rand io.Reader`
47474;shouldn't it be `rand.Reader`?
47475;`var rand io.Reader` is nil
47476;^
47477;what is the easy way i can debug race conditions
47478;i mean easy to understand
47479;go run race .
47480;```WARNING: DATA RACEWrite at 0x00c00009c720 by goroutine 9: runtime.mapassign() /usr/lib/go1.15/src/runtime/map.go:571 +0x0 github.com/cmu440/p0partA.MainRoutine() /home/server_impl.go:107 +0x28a```
47481;it gives me this kind of an output
47482;post your code
47483;how can i interpert this properly?
47484;its a bit long to post
47485;server_impl.go:107 does some racy stuff
47486;ok so
47487;the data race output has 2 parts
47488;it looks like you're attempting to assign to a map while something else may be operating on the same map
47489;there's the read and there's the write
47490;both tells that they're trying to do it at the same time
47491;meaning something is writing while another thing is reading at the same time
47492;=> race
47493;"```gofor { select { case conn := <kvs.connChannels: clientResp := client{conn make(chan []byte 500)} kvs.currentClients[conn] = &clientResp go Read(kvs &clientResp) go Write(&clientResp) case clientResp := <kvs.clientInfo: // info CLIENT INFO Process(kvs clientResp)``````gofunc (kvs keyValueServer) CountActive() int { fmt.Println(""Active: len(kvs.currentClients)) return len(kvs.currentClients)}```"
47494;can you post the full data race trace?
47495;it should also mention previous write or something
47496;so i think here i am assigning the map and this function is also reading
47497;so this could be causing the race?
47498;hmm could you just post the full code and trace?
47499;without line numbers its a bit tricky to read
47500;`kvs.currentClients[conn] = &clientResp` needs a mutex
47501;same for the len op
47502;> meaning something is writing while another thing is reading at the same time@_diamondburned_ what are the two outputs? runtime.mapassign and the github.com/ etc
47503;mapassign just means a map assign
47504;that's part of the same trace
47505;server_impl.go is calling into map.go
47506;the github.com/... is your go modules name
47507;> the data race output has 2 parts@_diamondburned_ ah i got what you mean now
47508;i was getting confuse
47509;d
47510;```goPrevious read at 0x00c00009c720 by goroutine 7: github.com/cmu440/p0partA.(keyValueServer).CountActive() /home/and/Desktop/CMU/FALL_SEMESTER_20_CMU/15640/hw0/P0/src/github.com/cmu440/p0partA/server_impl.go:89 +0x137 github.com/cmu440/p0partA.(testSystem).checkCountActive() /home/and/Desktop/CMU/FALL_SEMESTER_20_CMU/15640/hw0/P0/src/github.com/cmu440/p0partA/server_test.go:471 +0x75 github.com/cmu440/p0partA.testBasic() /home/and/Desktop/CMU/FALL_SEMESTER_20_CMU/15640/hw0/P0/src/github.com/cmu440/p0partA/server_test.go:498 +0x484 github.com/cmu440/p0partA.TestBasic1() /home/and/Desktop/CMU/FALL_SEMESTER_20_CMU/15640/hw0/P0/src/github.com/cmu440/p0partA/server_test.go:643 +0x71 testing.tRunner() /usr/lib/go1.15/src/testing/testing.go:1108 +0x202```
47511;the previous read happens at
47512;"```gofunc (kvs keyValueServer) CountActive() int { fmt.Println(""Active: len(kvs.currentClients)) return len(kvs.currentClients) //THIS LINE}```"
47513;the previous read is at `len(kvs.currentClients)`
47514;so i am guessing it attempting to read and write at the same time
47515;yes
47516;damn it this is an annoying problme
47517;welcome to concurrent programming
47518;everything is a major pain in the ass
47519;you either remove the channel altogether and use callbacks with mutexes to add a client
47520;OR
47521;you use a channel to request the map count from an event loop
47522;but this ofc is a lot of effort
47523;so mutexes are better here
47524;cant use mutexes again
47525;can you tell me what an event loop is
47526;im trying to work with only channels here
47527;confirm that only writes and reads beyond that len operation is only done in the for loop
47528;do
47529;```gokvs.callbacks = make(chan func())for { select { case conn := <kvs.connChannels: case clientResp := <kvs.clientInfo: case callback := <kvs.callbacks: callback() }}```
47530;```gofunc (kvs keyValueServer) CountActive() (actives int) { var reply = make(chan struct{} 1) kvs.callbacks < func() { actives = len(kvs.currentClients) reply < struct{}{} } <reply return}```
47531;thanks for your answer i will try to see if i can change my design to make things easier..ill go through your soln
47532;yeah np
47533;remember that you can always reinvent mutex
47534;also ```gofor { val := < someChannel}```will continuousy keep feeding values into val while the channel has stuff right?
47535;as opposed to ```goval := < someChannel```which will just...send one value?
47536;yeah?
47537;`for { val := <someChannel }` is equivalent to `for { <someChannel }` fwiw
47538;you can also do `for val := range someChannel`
47539;uh ok so
47540;``````
47541;im getting a HUGE log
47542;on my api
47543;Router.go line 3?
47544;if my program has hung how can i stop it and check the traceback?
47545;Ctrl+|
47546;that will terminate the program and make it dump a stack trace
47547;in Go
47548;is that |
47549;yeah
47550;doesn't work here
47551;Ctrl+Shift+\\ on standard keyboards
47552;so Ctrl+|
47553;works for me
47554;Cool I did not know ctrl +\\ sent a sigquit and I didn'know go would dump a trace! TIL 2 things and it's not even 8am can retire for the day now
47555;lol it is Ctrl+\\\\ yeah
47556;dunno why I thought it was |
47557;rhanks
47558;t
47559;yeah np
47560;> if you're using channels and the channel is empty the code will block@deezy you can use a select with a default clause
47561;Most of the time that is the wrong approach but it is valid code
47562;So after thinking hard and getting severe headache in the process I came to the conclusion that I should probably use redis + mongodb + cassandra.I read that mongodb provides greater performance than cassandra in all tests they have executed and in some use cases by as much as 25x.But question is whether this is a right decision?
47563;In case Mongodb screws up I will have cassandra to unscrew the data
47564;üò©
47565;@Sgt_Tailor Can you please tell me whether you think its a right decision?
47566;I don't even know what this is for??
47567;okay
47568;Its almost Tinder like use case
47569;hi in my app i need to return my severs ip address to the client what's the best way to get the servers ip?
47570;<https://stackoverflow.com/a/37382208>
47571;http://checkip.amazonaws.com/
47572;Yup easiest way is simply using a third party and making a request to them.Any other solution requires your own networking stack to tell you somehow.
47573;@HankMoody discord uses Scyllia (cassandra in c++) for their messages database
47574;And i can guarantee that theyre running at a bigger scale than you will be
47575;So youre optimizing for a problem you dont have yet
47576;From some of the developer chats (not publicly available) they also stated they've noticed significantly faster and more consistent performance from Scyllia while using the same API.
47577;So it's definitely worth looking into.
47578;They originally used mongo but it just wasnt working out anymore
47579;hey
47580;Hello
47581;so okay I've been having some problems with the tour of Go. Mainly with the exercises
47582;as someone trying to learn Go as a first language how worried should I be because I can't really solve these?
47583;Which one is it?
47584;The loops exercise
47585;the one involves maths which is extraordinarily hard to understand for me because English isn't my native language and I don't know half the terms used there
47586;Can ask here for help
47587;> @HankMoody discord uses Scyllia (cassandra in c++) for their messages database@Str≈ìm I get 0 results when I search Scyllia on google
47588;https://www.scylladb.com/
47589;Whoops its scylla
47590;The idea is that you have to calculate an approximate of a square root as the tour says they use Netwon's method (<https://en.wikipedia.org/wiki/Newton%27s_method>)
47591;Came up for Scyllia for me though
47592;> They originally used mongo but it just wasnt working out anymore@Str≈ìm Any specific reason? I heard that too but never knew any reason.
47593;if you want to understand how that works I suggest reading your wikipedia page in your language
47594;Its in their blog post
47595;at least the math
47596;Also mongo isnt known for being good
47597;Its ok but at scale its kinda risky business
47598;that wikipedia page has Azerbeijani but not Turkish?
47599;god damn it
47600;Also its consistency guarantees are bad
47601;They flopped the Jepsen test
47602;None
47603;> The idea is that you have to calculate an approximate of a square root as the tour says they use Netwon's method (<https://en.wikipedia.org/wiki/Newton%27s_method>)@Karitham well this exercise is more maths related than Go should I just skip it for now?
47604;> Its ok but at scale its kinda risky business@Str≈ìm Glad I knew it before hand. I dont want to touch ok things. If I want to learn I will learn the best performing tech.
47605;Or Im on stupid path?
47606;None
47607;I think I skipped it because I'm bad at math but it's essentially to exercise go loops
47608;> that wikipedia page has Azerbeijani but not Turkish?@John the Apostle Istanbul?
47609;Yep
47610;I'm fine in maths I guess
47611;but then again
47612;searching for a solution online would be a good way to get both
47613;Do you need a document/column db? Why not a relational db?
47614;I live in Turkey and education in Turkey is just ugh
47615;<https://github.com/golang/tour/tree/master/solutions>
47616;There was a Turkish version of the tour of Go
47617;None
47618;but yeah
47619;big sad
47620;I'd at least use it for the exercises
47621;I always try to learn stuff from their English sources mainly because they are better
47622;> Do you need a document/column db? Why not a relational db?@Str≈ìm I hate relational db + I dont know whether I will need rdb. My project is more like Tinder and when I read about their tech stack there is no rdb.
47623;> I live in Turkey and education in Turkey is just ugh@John the Apostle Been to Turkey few times nice place.
47624;hmmm
47625;Just because you hate it doesnt mean its not the right choice
47626;yeah it's a great country to visit
47627;not so much to live in
47628;Most data we use is relational
47629;Reading and writing is faster in nosql db right?
47630;Tinder data is always relational even if stored in nosql üòâ
47631;Are you even remotely near that scale where its an issue yet
47632;hmmmm I will have 20k to 50k users in couple of months as I will be redirecting the existing traffic which is in few millions
47633;So not that scale but still afraid of screwing up with speed
47634;The world is powered by rdbs
47635;If they couldnt handle scale we wouldnt be using them
47636;> Tinder data is always relational even if stored in nosql üòâ@Sgt_Tailor Yep then again I got the question those are some smart asses so why they chose nosql instead of traditional rdbs?
47637;My comment was a word play on relation
47638;I know
47639;Dont try optimize for s problem you dont have and havent measured yet
47640;Focus on the actual problem at hand
47641;Your data model your business logic actually getting a product out there
47642;get a POC working. See what works and what doesn't. Keep doing that until the end of time
47643;Because whatever decision you make you will regret over time
47644;Okay
47645;Thanks guys
47646;Maybe I was overthinking it
47647;First things first I will finish off the app part
47648;Hey all I want to build for our organization a central module for managing the database connections to be shared with the other microservices.. Two questions about this:#1 Do you tend to have a central database management repository?#2 If you use a central database management module how would you independently run the code? I was considering a simple CLI tool with menus which cascades into the best library to use for this task
47649;What do you mean by managing database connections? Is it your insert and select queries?
47650;Yes historical projects have just used a central module db which knows about the database defines the models and implements them
47651;Then other services just implement that module and call on the models.
47652;I personally don't like business logic being aware of database models ideally those should be contained within the database package and not leak outside
47653;I like the separation of handler whether that's a CLI implementation restful grpc that invokes a business logic interface that invokes a repository interface
47654;I've considered just a GRPC service a service which acts as a front to the database but considered this might be overkill
47655;The rest of the infrastructure is using GRPC however so it's not much more of a leap
47656;I just meant separation codewise you can separate things in different service if and as needed
47657;Right now a request might look like this: Browser > General Purpose Website API > SpecificPurpose Microservice > Database
47658;In a hypersimplistic view
47659;basically I like my business logic to not be separate from both the delivery protocol and database specific code a la clean architecture'some people say it's too javay for their taste but I like itas far as the central module for database I'd probably also split that up in domains eg having a userrepository itemrepository etcI would make it both accept and return your business models never the database models and have the conversion between conventional model and database model to happen within it
47660;This makes sense thanks @arte . I guess the question is would it be best to shim the connection between the SpecificPurpose Microservice and the database with a GRPCbased microservice
47661;In the grand scheme of things it may add a few milliseconds of overhead
47662;In my head that's overkill unless your specific purpose microservices are like serverless lambdas and you need database connection pooling to be done in a proxy layer
47663;That's fair thanks for helping think through this
47664;Although some people would say that if all your microservices are sharing the same database then it becomes a bit more of a distributed monolith than microservices
47665;@arte I've never heard the term distributed monoliths but I'm going to read a bit more on this now  Thanks
47666;TBF the last project I went on transitioned from monolith to microserviceesque maybe more of this distributed monolith
47667;> Although some people would say that if all your microservices are sharing the same database then it becomes a bit more of a distributed monolith than microservicesyea this is super commonly used
47668;"Hi everyone im like 20 minutes old so please excusey ignorance.I was looking for the correct practice to using pointers with multidimensional structs? When I set a parameter as a pointer in my function such as  item [][][]ItemThen when I use item my linter it errors with Invalid operation cannot index item""Using item as such \'if item[i][j][x]\"
47669;Why are you using `[][][]Item` ? You might be wanting `[][][]Item`
47670;try to avoid using pointers to slices
47671;`[]Item` and `[]Item` are different the first one is a slice of pointers to Item the second one is a pointer to a slice of Items
47672;You usually almost never want pointers to slices
47673;> try to avoid using pointers to slices@wormy.go Why?
47674;slices are already passed by reference
47675;the only weird case would be while using append
47676;you need to return the pointer to the slice if you wanted modify existing slice
47677;but it is always better to return newer slice after doing append operation
47678;ahh true i didnt think of that because append creates a new object?
47679;indexing is not affected
47680;yea it was related to header of slices
47681;hi i'm running to this error trying to use logrus how can it be fixed?
47682;what's the output of `go env | grep GO11`
47683;and is your project using go modules?
47684;slice is moved by reference is technically false. The slice header is copied. It just happens to point to a backing array
47685;Once you know that is how it works it all makes sense
47686;Instead of having to remember the edge case of `append`
47687;how would i go about forking a golang src repository ?
47688;e.g. i want to just fork hash (https://github.com/golang/go/tree/master/src/hash) and not the whole golang src
47689;Forking means you fork the repo not a subfolder of said repo
47690;If you only want part of the repo you just have to copy its contents
47691;It's so dumb to not be able to clone / fork a subfolder of a repo
47692;why
47693;that doesn't make sense
47694;You are forking the git history
47695;git tracks the whole repository
47696;that's explicitly how git works
47697;every part is cryptographically hashed together to make sure the integrity of things never fails
47698;you can probably create a new repo and pick the commits from the original repo which only refer to the file(s) in the subdirectory though
47699;I forgot the name of that
47700;but its a different repo
47701;cherrypicking
47702;or you could just copy the folder :thinksmart:
47703;ye thats it üòÑ
47704;cherrypicking like that won't work if you actually want to use a fork to make a PR though
47705;yeah
47706;git repos are free and you can ignore the parts you don't care about
47707;i don't see the problem
47708;yeah
47709;¬Ø\\_(„ÉÑ)_/¬Ø
47710;I have a feeling they don't want to make a PR though
47711;üëü ü§ñ
47712;doad its frustrating when you ignore my message
47713;nobody ignored your message
47714;In my DMs
47715;dms
47716;:kek:
47717;:dogekek:
47718;that's real endearing
47719;he wants to buy code from me for a sneaker bot :ayy:
47720;i told you about 20 times
47721;great way to build rapport with the community
47722;its not sneakers
47723;its sad you cant take offers seriously :SadCat2:
47724;They üëü ü§ñ code I've made is cleaner though
47725;easily beats @Doad's
47726;^
47727;i dont need sneaker code lol
47728;His is really nice
47729;Patched net/http to allow arbitrary header order
47730;Mine is akin to spaghetti while his is linguini
47731;without cloning the repo and making changes there
47732;üêí
47733;:ThonkRotate:
47734;@Sgt_Tailor I wonder if marking specific functions as noinline would work with monkey
47735;instead of the whole build
47736;I mean that makes sense right?
47737;It doesn't
47738;hmmmm
47739;I've tried but not yet succeeded. Might give it another try though
47740;I don't see why it shouldn't work
47741;You don't need to disable inlining for _every_ function just the ones you want to swap
47742;The thing is that I link against the original function but the callers are the ones that do the inlining
47743;They don't care I've got another symbol that is linked to it
47744;ah yeah makes sense
47745;I thought you meant in general
47746;So I think it should work against the original functions but then you'd need to modify the original source anyways
47747;Yeah exactly
47748;> hi i'm running to this error trying to use logrus how can it be fixed?@~.Ali.~ any solutions?
47749;You were asked a question right after you asked yours :p
47750;"Anyone use negroni? I\'m having some trouble getting cors to work with it. I\'m getting Response to preflight request doesn\'t pass access control check: No \'AccessControlAllowOrigin\ header is present on the requested resource. ```gopackage middlewareimport net/http""func Cors(w http.ResponseWriter r http.Request next http.HandlerFunc) { w.Header().Set(""AccessControlAllowOrigin "") w.Header().Set(""AccessControlAllowMethods GET POST DELETE OPTIONS"") w.Header().Set(""AccessControlAllowHeaders "") w.Header().Set(""ContentType application/json"") if r.Method == OPTIONS { return } next(w r)}```https://hastebin.com/azitopadik.cppI was using a different package for CORS before and it workedSo I assume it\'s nothing I\'m doing on the client side"
47751;There‚Äôs definitely a lot more room to gather more information here. Have you tried inspecting the request in your browser‚Äôs dev tools to see exactly what‚Äôs contained in the response? Have you confirmed that this middleware is actually being applied to the requests you believe it is (you could check with print statements attach a debugger etc.)?
47752;So I'm trying to make a post request
47753;None
47754;Also I've tried using curl and the response is fine
47755;On get requests there's no client side error and I get a 200 OK
47756;However I get undefined for all of the values
47757;When you say ‚Äúthe response is fine‚Äù does that mean the headers are present?
47758;In curl?
47759;I'm just getting back the json data that I expected
47760;Where is the `/v1` coming from? Are you running this behind another web server?
47761;That's just my api route
47762;I don‚Äôt see that in your code which is why I asked.
47763;Something is seeing the OPTIONS method and is returning a 405 off of that.
47764;Oh sorry yeah
47765;"```gofunc UserHandler(r mux.Router n negroni.Negroni manager user.Manager) { r.Handle(""/v1/user n.With( negroni.Wrap(listUsers(manager)), )).Methods(""GET"").Name(""listUsers"") r.Handle(""/v1/user n.With( negroni.Wrap(createUser(manager)), )).Methods(""POST"").Name(""createUser"") r.Handle(""/v1/user/{id} n.With( negroni.Wrap(getUser(manager)), )).Methods(""GET OPTIONS"").Name(""getUser"") r.Handle(""/v1/user/{id} n.With( negroni.Wrap(deleteUser(manager)), )).Methods(""DELETE OPTIONS"").Name(""deleteUser"")}```"
47766;These are the routes
47767;I'm curious as to why the GET request gives a 200 OK
47768;But returns undefined for everything
47769;Okay so you don‚Äôt have an OPTIONS handler anywhere.
47770;Seems like two different issues
47771;That‚Äôs how CORS works‚Äîthe browser first makes a preflight request with the OPTIONS method.
47772;So I need to add an options route?
47773;That or add a handler that checks for the OPTIONS method on all requests before passing it to the next router.
47774;See https://github.com/rs/cors for an example of this
47775;Even if you don‚Äôt want to use it it shows pretty clearly how that would be done
47776;> You were asked a question right after you asked yours :p@Carson yeah sorry didn't see that üòÖ no i'm not using go modules
47777;Right thanks
47778;Are you using dep or any other vendoring tool?
47779;no
47780;hello can i ask a noob question
47781;`
47782;That's generally what this place is for üôÇ
47783;` handlers.CORS()(r)`
47784;i dont quite understand what that code does
47785;can be found here : https://godoc.org/github.com/gorilla/handlers#CORS
47786;it's a function that returns a function
47787;i seee
47788;It's a middleware that adds new headers to the response so the browser allows CORS
47789;i suspected it was
47790;thanks
47791;i thought it was some sort of casting
47792;is it possible to patch an unexported function using monkey without going all the way up the tree
47793;"when you say using monkey do you mean using the monkey patching package that has a license which forbids using it for any purpose""?"
47794;no
47795;patching golang src
47796;if you're modifying the source code you have access to all unexported symbols and can just change the thing you want to change
47797;@zephyrtronium yes but im not trying to fork it
47798;#discordgo
47799;im just trying to monkey it but it says the function is unexported
47800;what do you mean when you say monkey it
47801;because you just said you were patching golang src
47802;for discord bots coded in golang were do i go
47803;"> what do you mean when you say monkey it""https://github.com/bouk/monkey"
47804;im trying to patch golang src but without actually forking it
47805;ok so you're using the monkey patching lib that has a license which forbids using it for any purpose
47806;<https://github.com/bouk/monkey/blob/master/LICENSE.md>
47807;haha didnt see that
47808;im not gonna abuse it lmao just want to play on my pc
47809;it was written to support a blog post as an exploration in how go code works internally
47810;if you're just playing around on your pc it is much easier to fork go and modify it locally or to just copy the package you want and make a new one
47811;true i guess
47812;annoying i have to do it for 1 function only tho :sad:
47813;really that's the easier route than monkey patching regardless of what you're doing
47814;cannot refer to unexported name
47815;so there is no way to solve this
47816;without forking ?
47817;there are other ways to solve it but that's the easiest by far
47818;Download the zip
47819;get only the package you want
47820;Clone the repo copy out the package modify
47821;yea doing that
47822;Or the zip yeah
47823;sad that i cant do it with üêí
47824;if you have go installed you also have go's source code downloaded
47825;yep ik
47826;can you explain how to atleast turn it online?
47827;turn a discord bot online
47828;i have it coded and all in VSC
47829;@zephyrtronium ^^^
47830;run it
47831;through?
47832;terminal
47833;`go run .`
47834;ok on VSC
47835;you'd have to check the documentation for vscode and whatever plugin/tool you're using
47836;None
47837;you have to install go before you can build go programs üôÇ
47838;make sure it's in your PATH if you are sure it's installed
47839;do the go tour pls
47840;?go learn
47841;TutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  SkippyGo by Example <https://gobyexample.com/>  SkippyGopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355
47842;learn the language before you try to do anything with it
47843;were to install it?
47844;you can Google that
47845;if you just want to use an existing bot just read the readme and they will explain it
47846;if you want to make your own thing
47847;better learn the language
47848;and how programming works overall
47849;<https://golang.org>
47850;you can find all your answers by doing the go tour and going to the website
47851;its downloded
47852;what do i do now
47853;go learn the language
47854;im trying to run it but it says its not able to
47855;the go installer?
47856;VSC
47857;you'll probably need to relaunch vscode so it sees the new environment variables
47858;k
47859;the bot is still offline
47860;You can use monkey to patch unexported code. I'm working on an article describing this and how I've done it
47861;doesn't sound impossible but the library they posted has a LICENSE that prohibits any usages though
47862;its still not going online
47863;the bot
47864;None
47865;first off your code isnt even valid code
47866;please do the tour
47867;this is basics
47868;im tyring to code a giveaway bot
47869;Yes that's fine. The problem is you're not writing valid Go code.
47870;ok
47871;try the tour and write some basic code that actually runs
47872;THEN work on your discord bot
47873;ok
47874;thanks
47875;i know what it's like to want to dive straight into a project
47876;but you gotta cover your fundamentals
47877;and we'll be here to help if you've got questions about the tour
47878;I'm using https://github.com/pelletier/gotoml . I'd like to be able to parse a string value into a custom type  `Color color.Color`. I'm not sure how to do that as `(c Color) MarshalString(string) error` doesn't seem to be an interface. How would I go about this?
47879;http\\transfer.go:15:2: use of internal package net/http/internal not allowed
47880;@zephyrtronium i forked as per your advice but getting this error
47881;https://godoc.org/github.com/pelletier/gotoml#Marshalerhttps://godoc.org/github.com/pelletier/gotoml#Unmarshaler
47882;er
47883;Ah thank you ‚ù§Ô∏è
47884;yeah that should help
47885;you may have to make a wrapper type
47886;around color.Color that implements those interfaces
47887;but that would do the trick!
47888;> http\\transfer.go:15:2: use of internal package net/http/internal not allowed@Deleted User you need to copy internal packages as well and change references to your local copy
47889;i have the internal folder
47890;but i have a lecture now so i can't offer much more help
47891;so i just change the path ?
47892;@Dexti when in doubt ctrl+f the godocs for `interface {`
47893;yep or you should be able to use a replace directive in your go.mod file
47894;that will find all the interface type definitions
47895;That's a great tip ty!
47896;well i have no idea how to do that xd
47897;@deezy any chance you can help with this since @zephyrtronium has a lecture
47898;http\\transfer.go:15:2: use of internal package net/http/internal not allowed
47899;nope
47900;zeph is correct
47901;ok np
47902;and is giving you the answers you need
47903;you just have to listen to and act on the literal solutions being handed to you on a silver platter by domain experts
47904;I have a file that looks like this ```buildscript { // Random Stuff}plugins { // Need to add line here.}repositories { // Random Stuff}dependencies { // Random Stuff}application { // Random Stuff}```There can be many things in the plugin section but i need to add the following line ``` id org.cyclonedx.bom'```So that the plugin section looks like this ```plugins { id org.cyclonedx.bom' // ... Other plugins}```What would be the best way to do this? I thought about potentially using a regex but im not sure if there is a better way that anyone else knows of
47905;¬Ø\\_(„ÉÑ)_/¬Ø
47906;@Chad are you trying to parse this file in Go?
47907;Yea
47908;Not sure if this is some standard format that you are trying to parse. If not you'll have to write a custom parser. Just regex probably won't be enough
47909;Not sure if it helps but this is a gradle file but i do need to edit other files too in this manner
47910;Or are you just trying to parse the plugin id?
47911;regex noises
47912;I need to just add that line into the plugin section
47913;what IS this format
47914;hcl?
47915;Its a build.gradle file
47916;gross
47917;but now you know
47918;golang gradle parser
47919;hey wow google is great
47920;`s|plugins {|plugins{\\\tid etc etc etc`
47921;can we please try not to instill write a custom regex parser for well defined formats as a first choice of action
47922;nope
47923;I don't see an existing gradle parser in Go I would recommend writing a simple one that fits your use case. Ideally open source it
47924;I'm assuming they've already googled for a parser and have not found any so I'm not going to waste my time telling them to do that
47925;Can you link me to what you saw on google @deezy
47926;I tried to search on google already but didnt see anything for it
47927;turns out nobody who uses go cares about gradle
47928;you may have to break ground here comrade
47929;"> golang gradle parser""> hey wow google is great"
47930;:/
47931;yeah i'm a smarmy cunt
47932;aging like fine wine
47933;üòî
47934;instead of fighting solve my issue
47935;i didnt understand how to use mod replace
47936;oh it's already solved
47937;and i googled it
47938;okay there
47939;Okay well ill look into writing a parser for it thanks üôÇ
47940;yeah good luck
47941;oh wait
47942;um
47943;?go concurrency
47944;Rob Pike  Concurrency Is Not Parallelism <https://www.youtube.com/watch?v=cN_DpYBzKso>  SkippyUnderstanding channels <https://www.youtube.com/watch?v=KBZlN0izeiY>  Sgt_TailorKavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_Tailor
47945;frak
47946;@Chad https://www.youtube.com/watch?v=HxaD_trXwRE
47947;Good talk on writing lexers/parsers in go
47948;i used it to write my brainfuck interpreter
47949;Okay thanks ill check that out too
47950;that format seems
47951;relatively sane
47952;so you might have an easy job of it
47953;> would i be able to type the go in VSC to make aa bot go online
47954;yes
47955;you definitely can
47956;ok what would the command be?
47957;As far as I can tell1) you're writing code that won't compile2) your vscode isn't configured properly to know where the go binary lives
47958;me?
47959;yeah
47960;im just trying to figure it out
47961;i know
47962;and i'm telling you why it's not working
47963;ok but what is the command to make the bot go online is it ```go build```
47964;cause i tried that and it says it wasnt in limb
47965;well that'd work in your terminal
47966;or something
47967;but you typed it in your source code
47968;oh
47969;so
47970;again
47971;you might want to do the tour
47972;and write code that actually runs
47973;and THEN
47974;start figuring out how to make vscode do things with code that actually runs
47975;one problem at a time
47976;vscode on linux is retarded
47977;literally
47978;Let's not use that word.
47979;Ableism is a bad look comrade.
47980;but it's the truth
47981;the decorations obey your system theme
47982;that's fine
47983;but then the right click menus also obey your system theme which looks gross in an application that itself supports theme
47984;i don't give a shit about vscode. I'm just saying we do not condone that specific word
47985;so you have to enable Windows decorations for that to work
47986;please carry on with hating vscode
47987;you got my approval on that
47988;@deezy unfortunately i was not able to solve my issue
47989;is this right?
47990;but then you have Windows decorations whichi s bad
47991;would you be able to help a bit more ?
47992;i really doubt i could
47993;I'd use Nvim if I wasn't too lazy to do the vimtutor
47994;:vim:
47995;also if I knew to configure it
47996;:vim:
47997;@deezy what do i need to add
47998;honestly no clue
47999;i don't use vscode
48000;what do you use
48001;probably Vim
48002;:vim: and my terminal
48003;i only run code from terminal
48004;:vim: life
48005;I gotta go back to bspwm some time
48006;this sort of thing is both a crutch AND a hindrance
48007;I can't live with a DE for long
48008;i do not want some bloated piece of software acting as a middleman
48009;glorified text editor
48010;i wrote my code i want to see how my code behaves why would i let anyone obstruct that
48011;because
48012;but I think VS Code is a nice editor
48013;as you're seeing
48014;it ends up being an obstruction
48015;especially for people who are intimidated from vim/terminals
48016;vscode + windows terminal
48017;what no
48018;an actual terminal
48019;with an actual shell
48020;windows terminal is an actual terminal
48021;i can run linux on windows
48022;what more could you want
48023;that's literally a glorified vm
48024;(with vscode integration)
48025;im not using vscode terminal lol
48026;u crazy
48027;WSL has VSCode integration
48028;that's what I meant
48029;I think for building on Linux or whatever?
48030;yea but no way im using a built in terminal
48031;so who can help me run this?
48032;None
48033;or what needs to be added to run it
48034;what are you trying to do ?
48035;you literally put it in a blank document
48036;just be able to run that command and turn on my bot so i can try that command
48037;you need to have the terminal in the directory where you have the code
48038;okay a bit unrelated
48039;but why does Windows have 2 shells?
48040;how does Powershell differ
48041;it's a different shell
48042;```./pingpong helpUsage of ./pingpong: t string (no going to show my bot id)/pingpong t (not gooing to show my bot id)Bot is now running. Press CTRLC to exit.```
48043;thats wwaht i put
48044;just like bash sh csh zsh are different shells
48045;ok who uses VSC
48046;so ik who can help me
48047;> you need to have the terminal in the directory where you have the code
48048;explain
48049;`cd`
48050;you have to use cd
48051;have you used a terminal before?
48052;other than VSC
48053;vsc is not a terminal
48054;the one in VSC
48055;yeah that doesn't count
48056;it's okay if you haven't
48057;ok then no
48058;but like i said you have to cover your fundamentals
48059;`cd` = change directory
48060;i am trying but i need to learn this first
48061;yes
48062;you have to learn how directories work
48063;Your terminal working directory needs to be the correct directory
48064;before you can build your code
48065;whats a good terminal then?
48066;and you have to learn how to build your code before you can run it
48067;okay let's say you have the go file in the folder C:\\Downloads\\VariousShit
48068;Changing a directory is common to all terminal shells
48069;you gotta run cd C:\\Downloads\\VariousShit to get there
48070;you can do this in VS Code
48071;so how do i get a terminal
48072;to run it
48073;you have it on vscode
48074;or cmd.exe
48075;they said it doesnt wokr
48076;aaaaaaaaaaa go learn the language
48077;why are you still here
48078;go learn the language
48079;okay I hate myself
48080;You can `cd` within the vsc terminal
48081;ok
48082;so in the termanl would i do
48083;go build ./pingpong helpUsage of ./pingpong: t string NzU1NzY1NTExNDEyOTA4MDU0.X/pingpong t NzU1NzY1NTExNDEyOTA4MDBot is now running. Press CTRLC to exit.
48084;@Doad ^
48085;you seem the most helpfull
48086;wait what
48087;you cd to the directory with the bot
48088;no offince but it seems like yall were mad at me
48089;and then you run go build I think
48090;but see the bot is offline
48091;I don't know about that part
48092;deezy isn't mad he's just trying to get you to understand
48093;wait do you mean @dgo
48094;aslo you just posted your discord token up there
48095;edit it fast
48096;he is by far the most patient of us
48097;i did
48098;well don't
48099;edited it
48100;alright
48101;so what would i post in there
48102;just go build
48103;I think so but I can't be sure
48104;I'm not that good with Go myself
48105;that shows an error
48106;well what's the error?
48107;what zerpho said tbh
48108;This tbh
48109;also like everyone else said
48110;take the tour of go
48111;https://tour.golang.org/welcome/1
48112;^ learn the language first
48113;they're probably not gonna listen tbh
48114;i have lost my patience
48115;no Go files in C:\\Users\\linds
48116;is the error
48117;okay dude literally
48118;learn the language
48119;this is still not a language issue
48120;also that's because you didn't cd into the directory
48121;this is a terminal issue
48122;^
48123;it does have to do with reading the installation instructions
48124;instead of just bugging literally everyone
48125;i installed what it said in the tour
48126;okay but do the entire tour first before attempting to write a bot
48127;You just have to `cd` to the correct directory
48128;you see where the terminal says `PS C:\\Users\\linds`
48129;that means the terminal is in the directory `C:\\Users\\linds`
48130;you must use the `cd` command to navigate to the directory containing your code
48131;```C:\\users\\linds <~~~ where you areC:\\users\\linds\\pingbot <~~~~ where you need to be to run your code```
48132;or you can navigate to that directory in the file explorer then shift+right click the background and select open in powershell or open in command prompt
48133;^^ windows is case sensitive also
48134;^^ blatantly false
48135;wait no
48136;oh damn I missed it up
48137;:rexP:
48138;Windows is the insensitive one
48139;It‚Äôs like saying ‚ÄúI can‚Äôt sleep in my bed. What do you mean I can‚Äôt access it from outside my house‚Äù
48140;"Should MarshalText return `[]byte(""text"")` or `[]byte(""\\""text\\"""")`? (encoding.TextMarshaller)"
48141;"Ideally it should convert the text into bytes in a way where you can unmarshal it later on easily. From the 2 options you provided `[]byte(""text"")` seems like the right way to go"
48142;Thank you üôÇ
48143;What compiler do you guys use
48144;gc
48145;Llvmgo gcc go or just the default toolchain
48146;default
48147;default
48148;anything else isn't as complete
48149;what do you mean isn\'t as complete
48150;llvmgo is still in progress afaik but gccgo has fully implemented the spec since 1.0
48151;gccgo doesn't compile gtkcord for me
48152;was missing some stdlib code
48153;It doesn't have the latest runtime implementation iirc
48154;It is lagging behind a bit
48155;yeah
48156;Ye I was looking at some 2019 benchmarks for gccgo and it seemed like there where some memory allocation issues or something
48157;https://play.golang.org/p/0lVIFzfNqG can somebody please explain why test[5] yields two different numbers here?
48158;"is it ok to assign value in this way?```gouser := Users{name: fmt.Sprintf(""%s os.Getenv(""AUTHORIZED_USER"")) uuid: fmt.Sprintf(""%s os.Getenv(os.Getenv(""AUTHORIZED_USER_KEY"")))}```"
48159;Interesting. The arguments are evaluated before calling. So append modifies the backing array
48160;@converge yes
48161;is that the same case for initializing a struct?
48162;because that's where i was initially having the issue
48163;@converge sprintf is superfluous
48164;first env value is assigned  but the second one is not dont know why
48165;"```gouser := Users{name: os.Getenv(""AUTHORIZED_USER"") uuid: os.Getenv(os.Getenv(""AUTHORIZED_USER_KEY""))}```"
48166;getenve returns string already
48167;use https://golang.org/pkg/os/#LookupEnv to make sure it's actually in the environment
48168;oh wait
48169;outch I just realized that there is two os.getenv
48170;yo uhavea double getEnv call
48171;yeah
48172;i noticed just now too
48173;huh I thought that w as intended and I was like interesting
48174;actually that doesn't make sense because wouldn't test[0] be incorrect if the args get evaluated first?
48175;> is that the same case for initializing a struct?@Turtle my guess would be yes
48176;i'm still confused about the point i just made though
48177;[0] isn't incorrect because that part of the backing array isn't changed
48178;it's not?
48179;Nope
48180;Nope
48181;:02No:
48182;In the append you are only appending to `test[1:5]`
48183;This is confusing
48184;so `test[0]` isn't touched
48185;Slices are just a window of the array
48186;When you reslice you only change the window size
48187;So the lowest value you can see is 1
48188;And the highest is 5
48189;right but i'm still not following how 5 doesn't print properly then
48190;it feels like either both should work or both shouldn't work
48191;`{8000 8021 8009 9103 8014 8300 8304 8345 5005 5008 5002}`
48192;this is the backing array
48193;when you reslice [1:5]
48194;your slice can only see `{8021 8009 9103 8014}`
48195;so when you append there
48196;this is [1:5]: `{8000 [8021 8009 9103 8014] 8300 8304 8345 5005 5008 5002}`
48197;you append from there
48198;ohhh i get it now
48199;it essentially pushes the 8300 to the end of the slice
48200;Because you are essentially removing the 5th element and replacing it with the 6th. If you change the append to `append(test[1:5] test[5:]...)` it will work as you expect it to. But when you do `append(test[1:5] test[6:]...` you are excluding the 5th element.
48201;no
48202;no
48203;it doesn't push that value
48204;It just deletes it
48205;but why doesn't 0 get deleted like that?
48206;Because slices are just a window into an array. You aren't changing the 0th element of the array at all
48207;```[1:5] {8000 [8021 8009 9103 8014] 8300 8304 8345 5005 5008 5002}[6:] {8000 8021 8009 9103 8014 8300 [8304 8345 5005 5008 5002]}append([1:5] [6:]) {8000 [8021 8009 9103 8014 8304 8345 5005 5008 5002] 5002}```
48208;that's each of the slices and the result on top of the backing array
48209;^
48210;i see
48211;[6:] gets coppied OVER the array back 1 index
48212;so it overrides all but hte last value of the array. and the last value remains there unchanged
48213;interesting
48214;thanks for the help
48215;np
48216;gotta watch out when appending to a slice of a slice if you want the original one to be in tact
48217;if you need to keep the original data you need to make a copy
48218;i do all of this in a struct so what i decided is to just do ```gox := test[5]```before initializing
48219;```goappend(append([]int{} test[1:5]...) test[6:]...)```
48220;Im trying to do it https://goplay.space/#UcKcadajjkP  its wrong right now miss experience with Go to do the right thing. is this going in the right direction?my ideia is to call an interface every time the expHandler is called  but it would be better to call it just once
48221;why are you declaring a function in a struct definition?
48222;also you need a package def at the top of the file
48223;have oyu done the tour of go?
48224;you cant call a function in a struct definition..
48225;or did your code somehow get mangled? it's missing a ton of stuff on that link
48226;I did I have a minimal api running but the code is bad right now trying to improve it. at the moment I want to get rid of global variables
48227;a struct definition defines data types
48228;theres no calling of functions in a struct definition
48229;also
48230;you can't just have case's runnign around
48231;that have to be INSIDE either a switch or select
48232;I know.. I just quickly copied and paste I'll try to push it to GH to make sense
48233;ctrl+A ctrl+V
48234;https://github.com/converge/mikrotikapi/blob/master/backend/src/main.goin a nutshell what Im trying is get rid of global variables I want to find a better way to populate the user values for the userList[] for example
48235;:5_bugcatstare: idk where to put this but i made a foolproof Vue + Router microservice
48236;"```GOfunc main() { ln err := reuseport.Listen(""tcp4 0.0.0.0:8082"") if err != nil { log.Fatalf(""Listener error: %s err) } fs := &fasthttp.FS{ Root: ./dist"", IndexNames: []string{""index.html""}, GenerateIndexPages: false, Compress: true, PathNotFound: func(ctx fasthttp.RequestCtx) { ctx.SetStatusCode(fasthttp.StatusOK) ctx.SendFile(""./dist/index.html"") }, } fsHandler := fs.NewRequestHandler() requestHandler := func(ctx fasthttp.RequestCtx) { fsHandler(ctx) } if err = fasthttp.Serve(ln requestHandler); err != nil { log.Printf(""Server error: %s\ err) }}```"
48237;if you wanna throw some random vue app into docker but nginx is too heavy
48238;```DOCKERFROM golang:alpine AS builderWORKDIR /srcCOPY ./src /srcRUN cd /src && go build o goappFROM alpineWORKDIR /appCOPY from=builder /src/goapp /appENTRYPOINT ./goapp```
48239;used fasthttp cuz its the fastest :stare:
48240;fasthttp is a meme
48241;:robpike:
48242;just use `net/http`
48243;id like to see fasthttp solve your speed issues when you write shitty db queries or indexes
48244;STOP USING FASTHTTP JUST BECAUSE IT SAYS FAST
48245;:kkk_ANGERYJONES:
48246;i mean the benchmarks say its the faster than net/http:5_bugcatstare: this is meant specifically JUST to host vue
48247;nothing else
48248;how big is that docker image with that binary
48249;no idea :5_bugcatstare: but it cant be that large and nobody really cares about 20mb or whatever when you compare it to the benchmarks
48250;don't use fasthttp
48251;i dont use fasthttp UNLESS its for very very small microservices and proxies like this
48252;youre comparing this to net/http when youre using this as an alternative to nginx
48253;:robpike:
48254;is this a meme im too stupid to see
48255;:pointlaugh: but tell me
48256;is fasthttp theoretically(not talking about practically) faster on both the system and the clients sides
48257;faster than what
48258;net/http
48259;if youre only comparing routers to routers then yes its faster than net/http
48260;theoretically yes and completely incompatible with the standard lib
48261;if youre comparing for a proper application its not gonna make a difference
48262;your entire business logic is gonna remove any and all gains made by fasthttp
48263;I think their point is that it may be faster than net/http in some vacuum but in reality you are far more likely to have other bottlenecks by your logic database and other things.
48264;yes but listen in this application i literally do not care about any of the features or limitations of fasthttp its just a fancy fileserver with some redirects
48265;for anything thats not file serving or helloworld theres no point using fasthttp
48266;yeah
48267;thats why i dont usually use it
48268;:BCS_PepeLaugh:
48269;is there a reason to even have a go app thats just a file server
48270;¬Ø\\_(„ÉÑ)_/¬Ø
48271;just spin up nginx man idk
48272;yeah
48273;lemme guess
48274;its hosting vue normally you could just put html but this is meant to just work as compatibility layer for vue router
48275;it's that beginner's pitfall again where fasthttp is inherently better in all scenarios because their own crappy impractical benchmarks say so
48276;no :5_bugcatstare:
48277;just serve vue directly?
48278;i dont like fasthttp
48279;nope
48280;doesnt work with vuerouter
48281;needs rules
48282;serve vue with nginx
48283;nginx heavy
48284;A reverse proxy should be able to give you those rules
48285;serve vue with caddy
48286;If nginx is too heavy use Caddy
48287;caddy > nginx any day
48288;caddy in docker vs vue+this?
48289;Caddy outside docker is fine too it's a Go binary
48290;^
48291;i use docker cuz auto updates
48292;from git
48293;>nginx>heavy>optimized Cbased binary
48294;I never containerize that stuff
48295;:bruh:
48296;`nixosrebuild upgrade` üòî
48297;I mean fasthttp is http1.1 only so not really a replacement for nginx anyway?
48298;:5_bugcatstare: oh
48299;fasthttp is a meme
48300;"nah; beginners wanting to use it is"
48301;hello
48302;how to send SMTP with SSL auth using go ?
48303;I mean im not neccessarily a beginner i just heard good things about it and tried to use it once long ago was was like ew :stare: just using it for this because it uses the least resources and has easy fileserver
48304;i could do the same thing in net/http(prob will)
48305;but yeah ususally i use shit like chi or echo
48306;:5_bugcatstare:
48307;which is basically just wrapped net/http
48308;Nothing wrong with saving cycles tbh
48309;I mean it just a package choice
48310;hey all I\'m pretty new to golang but I\'m writing an API in it to familiarise myself a bit more: I was wondering what is the right way to implement middleware? I\'m using `github.com/julienschmidt/httprouter` as it seems fairly basic and suits my needs. Basically what I want to do is to validate the token passed in the `Authorization` header for incoming request on certain endpoints
48311;oh and ideally I'd want to extract some information and make that available for downstream request handlers
48312;"ideally you could make a function to return middleware like ```GOfunc middleware(next http.Handler) http.Handler { return http.HandlerFunc(func(w http.ResponseWriter r http.Request) { log.Println(""lol"") next.ServeHTTP(w r) })}```"
48313;Usually just a function that takes a http handler and returns a handler
48314;Yeah
48315;Like that
48316;ServeHTTP is chained
48317;so depending on how you register middleware they will go one by one
48318;you can set values inside of that request for other routes/middleware to read with context
48319;"it\'s a bit of a mess currently but currently I\'m just doing```go router := httprouter.New() router.GET(""/session GetSession)```for example where `GetSession` is defined as ```func GetSession(w http.ResponseWriter r http.Request _ httprouter.Params) {```I believe that\'s the `httprouter.Handle` type so in this case I\'d just make a function that returns that?"
48320;hm yeah that doesn't seem to work haha  I want to be able to apply the middleware on a perroute basis since not all of them are protected
48321;Yeah there is an example for that on the router GitHub
48322;"so ideally I\'d be able to do something like``` router.GET(""/session server.AuthMiddleware(GetSession))```"
48323;ah
48324;https://github.com/julienschmidt/httprouter
48325;okay I need to read the documentation a bit closer then
48326;Under auth
48327;Using fasthttp drops all compatibility with stdlib and http2 though. Pretty lame but might be viable if you really need to squeeze every bit of performance out of the server after determining net/http is actually causing the slowdown
48328;ah I see now! Thanks @koen üôÇ
48329;does `http.Request` have context on it by default?
48330;yes `r.Context()` should provide that
48331;So in go i want to make a simple TUI menu that has a list of things i can click on
48332;Two things though
48333;i want to have the list read from json and i have a nonstandard input method
48334;cool thanks time to figure out how context works :p
48335;I can handle the json its the inputmethod that is going to be the biggest issue for me.
48336;There is a list of libraries on awesome go
48337;https://pastebin.com/mCGu8Hw9 < ALL the code for my input method
48338;I mainly need to have an event listener for that for loop
48339;Just update state based on inputs
48340;Aka change values with if statements
48341;what about multiple simultaneous user inputs...
48342;such as that `key2+click` if check i have
48343;You have an if statement for each possible input
48344;Just do the thing that correlates to that input in each statement
48345;that is 8 seperate inputs and i would need to make a if statement for ever possible variation of inputs
48346;State machine wants to know your location
48347;@Merith why
48348;Does every combination of inputs do something different?
48349;Incase i ever want them to
48350;Do you even need to handle multiple inputs at once?
48351;If you need to handle it when you need to
48352;okay
48353;okay so if i put something in `go func()` does it run as a for loop or just background?
48354;It runs the function concurrently
48355;OKay so if i put a for loop inside it it will constantly be updating?
48356;It will be doing whatever you tell it to
48357;The function will run concurrently
48358;goroutines just run concurrently
48359;Everything inside the function will run sequentially
48360;You can do whatever you want in that concurrent context
48361;Inside that concurrent goroutine
48362;uhmmm.....```pi@merithpi:~/Workspace/userinterface $ go run . Press buttons!UPDOWNDOWNDOWNDOWNpanic: runtime error: invalid memory address or nil pointer dereference[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x70e68]goroutine 1 [running]:fmt.(buffer).writeString(...) /home/pi/.local/golang/goroot/src/fmt/print.go:82fmt.(fmt).padString(0x9240b0 0x0 0x4) /home/pi/.local/golang/goroot/src/fmt/format.go:110 +0x74fmt.(fmt).fmtS(0x9240b0 0x0 0x4) /home/pi/.local/golang/goroot/src/fmt/format.go:359 +0x48fmt.(pp).fmtString(0x924090 0x0 0x4 0x76) /home/pi/.local/golang/goroot/src/fmt/print.go:447 +0x110fmt.(pp).printArg(0x924090 0xba4d0 0x920038 0x76) /home/pi/.local/golang/goroot/src/fmt/print.go:698 +0x740fmt.(pp).doPrintln(0x924090 0x930fa0 0x1 0x1) /home/pi/.local/golang/goroot/src/fmt/print.go:1173 +0x30fmt.Fprintln(0xe8740 0x9840d8 0x8307a0 0x1 0x1 0x5 0x0 0x0) /home/pi/.local/golang/goroot/src/fmt/print.go:264 +0x38fmt.Println(...) /home/pi/.local/golang/goroot/src/fmt/print.go:274main.main() /home/pi/Workspace/userinterface/main.go:89 +0x1b0exit status 2```
48363;whats line 89
48364;`fmt.Println(currentInput)`
48365;what go version
48366;https://pastebin.com/MVnGD8hP
48367;```go version go1.15.2 linux/arm```
48368;/home/pi/.local/golang/goroot/src/fmt/print.go:82
48369;whats line 82
48370;`rpio.Close()`
48371;however that was never triggerd
48372;not of that file....
48373;please read what im saying
48374;that... should be the normal... thing... that is my go root folder
48375;im asking to see it :pepehands:
48376;pls dont make this difficult
48377;```go81: func (b buffer) writeString(s string) {82: b = append(b s...)83: }```
48378;hmm... one sec
48379;okay yeah i think i know the issue
48380;the polling rate
48381;that println statement was in a forloop with no delay
48382;fixed it
48383;set the println for loop to a time.Sleep(30000000) delay
48384;don't do that many zeros pls
48385;That's weird though right if the nil pointer is from derrferencing b how does that work
48386;buffer is nil
48387;I assume the buffer would be initialized when Println is called
48388;"i genuinely have no idea why; it's not my code though"
48389;On mobile so cant look into it :/
48390;wonder if its a race conditioin
48391;i dont think they make guarantees for concurrent access
48392;these magic numbers are hurting my eyes
48393;How long do you even want to sleep?
48394;3 seconds > `3  time.Second`
48395;hehe
48396;So maybe a routine setting currentValue to something there is a tiny window where it's technically nil?
48397;if there's a window for something to be wrong even if it's teh tiniest window in the world yo ushould get rid of it
48398;@Sgt_Tailor Look man i just put numbers until it slowed down enough that one click didnt fill my ENTIRE TERMINAL BUFFER FIFTEEN TIMES OVER
48399;crying and dying inside
48400;But is that how it works when you set a variable to something it gets unset first?
48401;so fmt.printer is pooled
48402;pp is used to store
48403;pee is stored in the balls
48404;```govar ppFree = sync.Pool{\tNew: func() interface{} { return new(pp) },}// newPrinter allocates a new pp struct or grabs a cached one.func newPrinter() pp {\tp := ppFree.Get().(pp)\tp.panicking = false\tp.erroring = false\tp.wrapErrs = false\tp.fmt.init(&p.buf)\treturn p}```
48405;oh I think I know why now
48406;huh it might actually be racy
48407;hmm nah it doesn't make sense
48408;huh wait
48409;that's fucking weird
48410;i genuinely think it has to do with ARM
48411;If the variable being passed to println wasnt in a goroutine would it still happen
48412;i don't think this has to do with the variables being passed in
48413;Ah ok
48414;I have a spare rpi maybe I'll set it up tomorrow
48415;do it
48416;put Nix on it
48417;Seems like the kind of thing although I won't be able to figure it out will lead me down a rabbit hole where in bound to learn something
48418;It's arm right? You need a mutex on the global variable
48419;there's no global var
48420;he was just printing string constants
48421;Global string between main thread and coroutine?
48422;im sending stuff to a buffered channel is there a way to check if its full and then stop sending stuff to it
48423;Yes but that doesn‚Äôt really make sense to do
48424;^
48425;You should change how you are doing things
48426;?go pipelines
48427;Go Concurrency Patterns: Pipelines and cancellation <https://blog.golang.org/pipelines>  technololigy
48428;"```govalue := db.Get(key)for _ val := range value { response := key + : + string(val) + \"" clientResp.buffer < []byte(response)}``` yeah so when `clientResp.buffer` is full i want to not send more stuff to it. Can you explain why it doesnt make sense?"
48429;i have a Qeueu of 500 messages i dont want them to send anymore and drop off whatever messages if they are queuing up
48430;@koen constant
48431;"it's not a global variable or anything; it's a constant"
48432;Your channel should be 1 or 0 in most cases
48433;what do you mean by 1 or 0
48434;Add more readers to the channel
48435;Like size
48436;i am using the channel as a buffered queue
48437;If you need to process things faster
48438;Channels are not queues
48439;They shouldn‚Äôt be used as such
48440;if you wanna drop them just use select + default
48441;If you want a queue then use a queue with a mutex
48442;```goselect {case clientResp.buffer < []byte(response): continuedefault: break Loop}```
48443;Channels are a communication mechanism not a storage one
48444;```goChannels and goroutines form the core of Go‚Äôs CSPbased concurrency mechanism. Read on to pick up some tips and tricks about channels specifically ‚Äúbuffered‚Äù channels that are commonly used as queues in a producerconsumer context.```
48445;channels can be bounded queues
48446;not unbounded ones
48447;so 500 buffer is a bounded queue only right
48448;yeah of 500
48449;yeah so theres nothing wrong in doing that (?)
48450;It leads to the exact problem you are having
48451;What happens when your queue is full
48452;it blocks
48453;Except you don‚Äôt want to
48454;until the stuff in the queue is dumped
48455;biscuits wants to drop sending when it's full though which is completely possible
48456;I know it is
48457;Hold on maybe I misread this
48458;yeah m_adx is saying i should use a different design to accomplish the same thing
48459;Oh okay
48460;Disregard
48461;My b
48462;If you want shit to just drop
48463;Then yeah just drop it
48464;yeah i was asking how do i `drop` it
48465;to check if the buffer is full
48466;i guess diamon solution looks fine to me
48467;keep sending while you can send and then drop the rest othewise
48468;i'd recommend what diamond said
48469;BUT just so you know
48470;len(ch) tells you the amount of things in a buffered channel
48471;cap(ch) tells you how big a buffered channel is
48472;pretend len doesn't work with channels because it's always 100% of the time a race condition to use that üôÇ
48473;to drop a message instead of blocking use `select` with a `default` case
48474;I've use it for logging purposes to note if a channel is >50% full
48475;just so a log will let me know when it's getting backed up
48476;in case an issue arises
48477;i guess that's fair
48478;i feel like they definitely have good uses but not for things like dropping
48479;mainly just analysis IMO
48480;but yeah that's why i started by saying to use diamonds select/default solution
48481;p sure as long as you only read the len and not rely on it for conditionals then you should be good
48482;Yeah use what diamond said
48483;a TOCTOU race doesn't exist if there isn't actually a U
48484;ok so i have a delema
48485;i wrote nice little program to replace dwmblocks and the way i set the bar in dwm is by using the root windows name therefore setting the statusbar would be `xsetroot name status`
48486;"here\'s how im setting the bar rn`exec.Command(""/bin/xsetroot name mergeFinalString(barStringArr)).Output()`"
48487;would it be more efficent to import C and use the geniune libX11 to to set the root name or should i continue doing this?
48488;it might lose some of its simplicity importing C but then i wouldn't be relying on an external program and calling it every time the bar is updated
48489;if you have time use xgb or do xcb
48490;else just exec.Command it
48491;"also do `exec.Command(""xsetroot""` so it searches PATH"
48492;it can just search poath?>
48493;wait ofc it can
48494;yeah it can
48495;lmao i've been doing `newStringBytes err := exec.Command(Shell RunIn command).Output()` and having them define a shell lmao
48496;guess i should change that lel
48497;like for the status scripts lel
48498;p sure exec.Command also picks up the shebang (using the execve syscall)
48499;so you can just run a script in argv0
48500;ya i just tested running it with just `command` and it worked actually improved efficency
48501;i wonder why
48502;heres the thing if i dont run it in a shell i'd have to manually parse the args from the `Block` because running something like`disk /home` which is a script i have it just straight fails
48503;would it be quicker to run it in a shell like dash then or would it be quicker just `strings.Split` it by space and do it that way
48504;probably manually parsing huh
48505;hol up
48506;what's Block
48507;oh sorry block is just a struct for a module update int update sig etc
48508;i posted the projet recently in showmewhatyougot if you wanna look at the code directly like 150 sloc i think
48509;or i can just link it lel
48510;sure
48511;i'm lazy
48512;would appreci8
48513;https://github.com/lordrusk/goblocks
48514;oh damn
48515;btw name that blocks.go file config.go for succless memez
48516;```go newString := string(newStringBytes) re := regexp.MustCompile(` +\`) newString = re.ReplaceAllString(string(newString) ) re = regexp.MustCompile(`\`) newString = re.ReplaceAllString(string(newString) )```
48517;what the heck
48518;what's this for
48519;trimming spaces?
48520;yes
48521;`newStringBytes = bytes.TrimSpace(newStringBytes)`
48522;that works?
48523;also you didn't use gofmt did you
48524;yeah it does
48525;whats gofmt
48526;bruh
48527;not even goimports?
48528;also ya im still extremely new to go this is like my third ever project so i still dont know like a lot
48529;you're missing out
48530;ya i know i am
48531;gofmt formatst your code
48532;automatically
48533;goimports does that and also adds/removes imports for you
48534;also p sure your use case of wg is invalid
48535;but i'm too lazy to specifically say why
48536;probably is
48537;i just had to get the program to not end and all the functions that would still be running are running in the background so it kinda just stops running so it there is an easier way to stop it then
48538;select {} :^)
48539;basically blocks forever
48540;that's the easiest way
48541;although
48542;I'm p sure that last for + go loop is wrong
48543;Does it really
48544;Neat
48545;yeah it's for {} without the downsides of eating up CPU cycles
48546;"```go for i := 0; i < Receivers; i++ { go func() { for { blockUpdate := < updateChan if blockUpdate != false { exec.Command(""/bin/xsetroot name mergeFinalString(barStringArr)).Output() } } wg.Done() }() }```"
48547;There's also runtime.Goexit to exit a goroutine.
48548;I don't see where for i := 0 is used here
48549;Would have expected it just to be noop
48550;"I\'d make that ```gofor update := range updateChan { if update { exec.Command(""/bin/xsetroot name mergeFinalString(barStringArr)).Output() }}```"
48551;which would block until updateChan is closed
48552;`select` only completes once one of the cases is able to proceed. So if there are no cases it can't proceed.
48553;the idea was to have multiple recievers so if too many blocks were updating it wouldn't get clogged up but i've mostly resolved that
48554;so ill probobaly just remove that whole system seems useless now
48555;just have the senders select on the ch or sth
48556;sure
48557;dunno what you could take from this but I'll link it anyway: https://gitlab.com/diamondburned/lemongo
48558;ahh good o'l lemonbar
48559;back when i used bspwm that shit took so long to learn how to configure properly
48560;lol
48561;configure
48562;:kek:
48563;you know what i mean
48564;it just prints lines bruh
48565;ya but the formatting and stuff
48566;that's the fun part
48567;based
48568;proposal: rename go get and go build to go configure and go make respectively
48569;im down for the latter
48570;:cereal:
48571;Do it
48572;proposal: add build.go like build.zig
48573;go get > go configure ?
48574;^^
48575;Low key always type go git and not go get
48576;go make would be good if it runs generate
48577;Is it just me or is AWS'es Go SDK very painful to work with?
48578;is there a way to give an array of strings as a bunch of arguements for a function that takes multiple strings
48579;`... `
48580;help
48581;no literally `...`
48582;oh
48583;https://stackoverflow.com/questions/17555857/gounpackingarrayasarguments
48584;thanks!
48585;yeah np
48586;```gopcommand := strings.Split(command  )outputBytes err := exec.Command(pcommand...).Output()```
48587;gives ```./main.go:43:34: not enough arguments in call to exec.Command have ([]string...) want (string ...string)```
48588;makin me do a hmmmmm
48589;the error is pretty clear
48590;Command() needs a string and then oneormore strings
48591;you're giving it a []string
48592;`pcommand[0] pcommand[1:]...` but do a len check first
48593;Thoughts on whether that error message would be clearer if it said `have (...string)` instead?
48594;that would be nicer yeah
48595;Okay. Filed golang.org/issue/41440.
48596;:cereal:
48597;oh you know @cuonglm?
48598;i'm always a fan of error messages ahving parity with what you actually type
48599;I review a bunch of his compiler CLs yeah.
48600;oh nice
48601;vs how the compiler views things internally
48602;@deezy But in that case isn't that in favor of `([]string...)`? Because you're literally writing `(x...)` where `x` has type `[]string`. Or do you mean what you'd write for the corresponding function parameter list?
48603;yeah you got me there
48604;this is why i don't design languages
48605;i'm secretly incompetent
48606;That's the deezy trick
48607;He's 100% right 50% of the time
48608;@Prophet Do you think you would have understood the issue if the compiler told you `have (...string)` / `want (string ...string)` instead?
48609;Just unprofessional opinion but I think it‚Äôs clearer with the 2nd. Mainly because when I use []string... I convert that in my head to ...string
48610;@Madxmike By 2nd you mean `have (...string)` is clearer?
48611;Yes
48612;Okay thanks.
48613;That's what i was getting at
48614;Alternatively we could say `have ([]string)` / `want (string []string)`.
48615;that the want/have reach parity
48616;right
48617;i don't know why my brain couldn't put that sentence together properly
48618;Yeah but that‚Äôs not reflective of what the person wrote or the function arguments
48619;Imo
48620;A foolish inconsistency is the hogbogling of little minds
48621;or something like that
48622;cc @Deleted User
48623;imo []string is better because that's how those work internally but I don't think it's beginnerfriendly
48624;This is how I see the current one. Imagine you have `func Do(f Foo)` and passed `&fooInstance` into it. The compiler would say `have(Foo) want(Foo)` not `have(&Foo) want(Foo)`.
48625;yes
48626;that would be better
48627;`have(Foo)` implies the types the call is having which is imo more consistent with `want`
48628;Yes
48629;But the current version of that variadic thing is more of the latter
48630;It‚Äôs a bit contrived because it‚Äôs the only thing I could think of off the top of my head that‚Äôs a similar thing
48631;@Madxmike I think it's a good example thanks.
48632;`&fooInstance > Foo``stringSlice... > ...string`
48633;Is what I‚Äôm trying to get at
48634;But we have probably spent more time discussing this than people have been confused by it lol
48635;that's what experts do
48636;or you can call it bikeshedding
48637;pick yer poison
48638;¬Ø\\_(„ÉÑ)_/¬Ø
48639;It‚Äôs fun sometimes lol
48640;I fret over much more pedantic cases all the time.
48641;don't we all sometimes
48642;https://github.com/golang/go/issues/15708
48643;Hm I had another one about how defer with a method expression is ambiguous but I can't find it.
48644;Here we go: https://github.com/golang/go/issues/38634
48645;Ola guys I have code for a discord botwhich is written in go Langand IDK even a little about go Langso if someone could help me with the code to how to use it it will be very helpful to my community.
48646;we can try to help if you start off with where you're stuck
48647;sorry i was stuck at start itself
48648;IDK how to run
48649;can i share the code?
48650;well to start
48651;if you found a premade thing it should have documentation
48652;https://gist.github.com/miyoyo/8641057636892863791ca7c41a1fab97
48653;no
48654;he/she just stored the code for further use i guess
48655;have you ever run any program like this before
48656;no no no üò≠
48657;oof
48658;oof
48659;i'm pretty new to Go Lang
48660;it's doable but you're gonna have to learn some shit
48661;this is more than go
48662;really?
48663;you have to learn how to run a process from your terminal
48664;to begin with
48665;then install go download the code build it and then run your bot
48666;> then install go download the code,done this
48667;> build it and then run your botremaining part
48668;if you are really comfortable with guiding me please help me
48669;i have no time to learn now and i have schedule to learn Go Lang after 4 months üò≠
48670;https://golang.org/doc/code.html
48671;here's a guide on how to run go code
48672;just skip the parts where it tells you to write the code since you already have it
48673;okie i will take a look and if i stuck somewhere i will ping here
48674;yep yep
48675;thank you very much for the help \\‚ù§Ô∏è
48676;godspeed starchild
48677;if you actually have working code this should be relatively simple
48678;if not you're gonna have to learn how to actually write and fix go code
48679;they have some guild ID's and channel ids
48680;so idk where to replace them
48681;Just a heads up you will at the very least need to change this as well. <https://gist.github.com/miyoyo/8641057636892863791ca7c41a1fab97#filemaingoL18>
48682;These are the ID variables<https://gist.github.com/miyoyo/8641057636892863791ca7c41a1fab97#filededupegoL10L11>
48683;presumably where you're seeing them
48684;is where you'd replace them
48685;i did but no use might be i need to set the bot correctly
48686;elaborate on what you mean by set the bot correctly
48687;this is how their bot looks like
48688;this how mine looks like
48689;even in online
48690;that second photo does not show the bot as online
48691;have you updated the bot token in the code?
48692;okie lemme run the code
48693;None
48694;the same even it runs
48695;i just used `F5` in VSCode to run main.go üò¨
48696;seems like it's running now
48697;i'll be damned if i know offhand how to change a bot's profile photo
48698;You change it in the portal
48699;in the bot settings page
48700;yes you can
48701;```consolePS C:\\Users\\yaswa> cd .\\Documents\\Projects\\Go Lang\\FlutterDocBot\\'PS C:\\Users\\yaswa\\Documents\\Projects\\Go Lang\\FlutterDocBot> go install github.com/miyoyo/flutterdocPS C:\\Users\\yaswa\\Documents\\Projects\\Go Lang\\FlutterDocBot> setx GOPATH %USERPROFILE%\\goSUCCESS: Specified value was saved.PS C:\\Users\\yaswa\\Documents\\Projects\\Go Lang\\FlutterDocBot> flutterdocLoading search structure... DoneFlutterDoc running. CTRL+C to exit``` when i do this the bot runs and the main.go file only running
48702;what to do next
48703;?
48704;what are you expecting
48705;https://discordapp.com/channels/118456055842734083/118456055842734083/755954915146334379 i want my bot to be like this
48706;what part
48707;sorry
48708;didn't get you
48709;define be like this
48710;i want a boot really looks like that
48711;![Object] or ![Object.property] or ![package/Object] or ![package/Object.property]Gives a direct link to the closest match from the flutter documentation
48712;what
48713;if i'm not wrong https://gist.github.com/miyoyo/8641057636892863791ca7c41a1fab97#filemaingoL32 this isn't calling
48714;do you know Go
48715;those are the commands for the bot
48716;no üò≠
48717;did you set the token
48718;yes
48719;I don't think those cron schedules will run immediately
48720;it's once daily and then once every 30 minutes
48721;```NzU1NzkyNDc4Mz.jEfYbuClk4Mb3C3MJg ```is this how the token looks like
48722;what do you mean once every 30 mins?
48723;there are scheduled jobs running in that goroutine you linked
48724;one job is run once daily
48725;the other job is run every 30 minutes
48726;i changed to seconds
48727;that 30 mins one
48728;üòê
48729;https://tenor.com/view/answermephonepleasecallpleaserespondtextmegif4664129
48730;@[object Object] youre putting logs into which?
48731;@Mr.Minnu response to what
48732;also use #discordgo for discordgo related questions
48733;thanks bud üòâ
48734;anyone using golang with coc
48735;?
48736;@[object Object] where is grafana pulling data from
48737;Ah
48738;@Str≈ìm @Doad @deezy @Etzelia thanks a lot for the help
48739;"Might be a dumb question but I couldn't find the answer googling; if I have a web server will it be faster at responding to requests if I compile to a binary vs just doing `go run .`?"
48740;I don't care about the start up time (as binary would be faster) but I'm curious once it's already running if there is any performance difference
48741;I dont think so at a first guess
48742;That just compiles and runs in one go afaik
48743;That's what I was thinking as well. When you run a binary all the instructions are stored in memory so `run` should result in the same. Thanks for the input
48744;No problem Bachman Erlich
48745;Go run is nothing more than a shorthand for go build + running the executable right?
48746;I'm sure it's doing something else because it doesn't output a binary. Maybe it does somewhere in the goenv folder but I couldn't find any documented information on it
48747;It outputs to temp dir
48748;^
48749;Check htop or something when running
48750;Ahh okay thanks all!
48751;Shouldn't really use `go run` for prod stuff though
48752;Goodnight doad
48753;Goodnight son
48754;It's for my personal site so meh
48755;Why deploy your source code and a go compiler to prod when you don't have to
48756;That's a really good point.. didn't consider the memory overhead because it's also in docker..
48757;Multi stage Dockerfiles are very easy with Go
48758;First stage builds second stage is for deployment
48759;And since Go binaries are standalone your deployed docker image can be _tiny_
48760;No extra deps needed
48761;You've inspired me to optimize my 1 GB free tier server lol. I'm doing that this weekend now
48762;Yeah I have my bot on a multistage build with just the base alpine image and the total image size is 8.33MB
48763;if I have an exported struct is it important the fields are exported as well
48764;Only if you want the fields to be directly accessible by other packages.
48765;If you're familiar with C++ or Java you can generally think of exported/unexported as public/private.
48766;(Except that visibility is packagelevel not classlevel.)
48767;Apropos to your user name: https://twitter.com/jeanqasaur/status/1290883041418649600
48768;:KEKW:
48769;@mdempsky was it you with the chicken github picture
48770;@Str≈ìm Yeah I had a drawing of a chicken as my GitHub profile pic for a little while.
48771;Hm drawing i remember a photo
48772;Maybe that was another gocode fork
48773;Oh wait yeah. I had a photo of me holding a chicken too I think.
48774;Thats the one
48775;Love to see it
48776;We rescued her from a slaughterhouse in Stockton CA. Photo was while we were driving her to a nearby animal sanctuary.
48777;Anyone here use Atom and its GoPlus package? Getting some very weird and annoying behavior and need help figuring it out. Seems like it keeps trying to reinstall the go tools it uses over and over every time Atom launches.
48778;Despite the fact that as far as I can tell they already installed properly the first time around
48779;> Anyone here use Atom and its GoPlus package? Getting some very weird and annoying behavior and need help figuring it out. Seems like it keeps trying to reinstall the go tools it uses over and over every time Atom launches.@Tryn i think iyour GOPATH is not set properly or atom is not able to find your go binaries
48780;I'm fairly certain I have GOPATH set up properly and it's showing up with the correct path on the go env listing goplus gives out. How would I go about checking the latter?
48781;unfortunately i am not sure those problems are always icky. i had that issue with vscode
48782;i simpy uninstalled and reinstalled golang agian from scratch
48783;following instructions step by step
48784;there might be a better way but i am nots ure
48785;Not sure a reinstall is going to help anything in my case. I'm using the .zip not the .msi install since I can barely fit anything on my C drive except my windows install. It's basically a fresh install anyway besides grabbing the tour.
48786;ah wait there is one thing I didn't try. I added the bin folder to my user PATH but not the System PATH. Maybe that will do it.
48787;Mm nope. Not that either it seems....
48788;I also keep getting this error once everything is done attempting to reinstall. Probably related and indicates issues recognizing where executables are but don't think it gives me any clues as to why.```2020/09/16 22:44:54 dial tcp 127.0.0.1:37373: connectex: No connection could be made because the target machine actively refused it.```
48789;dummy := make(chan int) pushOn := dummy
48790;this means that dummy and pushOn are linked or just that pushOn is a type channel of type int as well
48791;both variables refer to the same channel
48792;channels are reference types so `pushOn := dummy` just copies the reference
48793;how could i make my discord bot 24/7 online?
48794;so they are both pointing to the same `space` ?
48795;I'm using go lang for it
48796;it\'s usually a bad idea to think of channels as having space but yes
48797;sorry i didn't get you
48798;how could i do that? and can it(bot) be able to run even the system is shutdown? @[object Object]
48799;i want my bot to run all the time like dyno/mee6 may be
48800;any idea?
48801;sure. run it on a machine that doesn't get turned off
48802;üò¨ good idea but i don't have one
48803;unfortunately you can't change how computers work
48804;can i host a bot in
48805;a computer has to be on to run software
48806;https://www.writebots.com/discordbothosting/ will this work?
48807;@deezy
48808;no clue never heard of them
48809;looks like a very detailed guide on how to do what you want to do
48810;have you started reading it
48811;and a small thing must work on this code like deleting the duplicate msg
48812;> have you started reading itnot yet i though you guys are familiar with it
48813;i will read and let you know it may be helpful to you too
48814;i have my hosting needs covered
48815;i self host anything i need to
48816;how?
48817;üòÆ
48818;i have a digital ocean vps
48819;cool
48820;throw docker on that bitch and you can run anything you want
48821;cool one i will learn about it soon
48822;i mean it's all the same
48823;buy a linux vps install go clone your code
48824;run the code
48825;can you tell me how the last function can be run https://pastebin.com/23ggKvex
48826;i don't understand why isn't it running
48827;You'll need to be a bit more descrptive
48828;Are you getting an error
48829;no but the thing is the duplicate message must be deleted
48830;what's the best and well maintained graphql library for golang?
48831;"when I do ```golangfmt.Println(pages[0][""paragraphs""])```this gives me `map[ia:d1.jpg ib:d2.jpg pa:dummy1 pb:dummy2]`but when I try to access a feild ```golangfmt.Println(pages[0][""paragraphs""][""pa""])```this gives me an error saying interface{} dosenot support indexing"
48832;are you unmarshaling json into a horribly nested map
48833;yes
48834;Yikes
48835;well just one level. pages[0] gives me the json itself
48836;@Mr.Minnu in the code you pasted you dont call DeleteDeDupe
48837;how to call it? something like this? `DeleteDeDupe()` @misterturtle
48838;If you're unsure how to call a function it might be worth doing the tour again
48839;üò≠ not now buddy i have learning Go Lang in schedule after 34 months
48840;please help me in this please
48841;this is only last issue left
48842;@misterturtle
48843;Best way to learn go lang? Do the tour
48844;It is literally designed to teach you go lang
48845;But to call a function you need to provide the arguments that match the function signature
48846;DeleteDeDupe takes a pointer to a discordgo.Session and a pointer to a discordgo.MessageDelete
48847;It looks like it will mask every message in the message cache for a channel though so it might not do what you want it to
48848;okie so how could i delete a message?
48849;i mean repeated message
48850;I've only used discordgo once but there is a #discordgo channel I don't know enough about the package to know the best way to do it
48851;okie for now i don't need it i guess we try creating a bot for that
48852;thank you so much for everyone who helped me here
48853;@misterturtle a quick question bud is it necessary to add `go.sum` and `__debug_bin` to git repo?
48854;go.sum is fine yeah I don't know what __debug_bin is
48855;Ah is it a file created by VSCode when debugging
48856;yeah it seems to be a vscode directory which is not needed in a git repo I'd probably add it to your .gitignore
48857;cool
48858;__debug_bin is deleted when you stop debugging
48859;hi guys i was asked to deploy a new app on a server and check somethings on it in my new job and I'm totally new at this. anyone can help me with it? üòÖ
48860;I'm sure we could help in some way but it's worth checking company policy and procedure documents. Its likely there are internal guidelines on deployment and rarely would a company drop a new employee in the deep end and ask them to deploy something w/o instruction
48861;it's a new startup and it's not that big of a task i'm sure it'll take little time i'm just very new =))
48862;"aah startups and documentation rarely go hand in hand ;D"
48863;I'm in and out of the office but ask away I guess I'm sure someone can help
48864;@~.Ali.~ what do they deploy to
48865;If it's just a plain server you can probably ssh in
48866;If they're using some deployment manager/container orchestrator it may be a little more difficultMoved to #offtopic
48867;> @~.Ali.~ what do they deploy to@Str≈ìm Linux server
48868;Bare metal?
48869;> If it's just a plain server you can probably ssh in@Dexti yes i connected via putty
48870;No k8s or docker swarm or anything?
48871;yeah i'm pretty sure üòÖ
48872;Run `docker ps` and `kubectl` to see if they have either installed.
48873;> Run `docker ps` and `kubectl` to see if they have either installed.@Dexti no they're not installed
48874;@Dexti I moved to #offtopic
48875;I wish Kate had a up to date Go plugin
48876;"Hi Im wondering how I could use `binding:required` only on POST routes and omit `json:""""` only on GET routes for a user``` Password string `db:""password json:"" binding:""required,min=8,alpha""````Ovbiously the GET routes cant have the users password but if I remove with  I get a `g.ShouldBindJSON` error"
48877;Yeah it's a bit confusing since there's two conversations happening simultaneously.
48878;It seemed more appropriate in offtopic üôÇ
48879;"The only way I can think of doing it is this:```type UserUpdate struct { Password string `db:""password json:""password binding:""min=8,alpha""` User}type UserCreate struct { Password string `db:""password json:""password binding:""min=8,alpha""` User}type UserGet struct { Password string `db:""password json:""""` User}```"
48880;Any ideas?
48881;Where's that binding from?
48882;so indexing in Go starts from 0?
48883;What do you mean @arte ?
48884;Which library are you using that is checking the binding tag?
48885;go validation
48886;https://github.com/goplayground/validator
48887;It doesn't seem to be aware of other request information so I'd say your solution makes sense if you want to keep using that libraryIf you wanted to get overly fancy you could maybe write a middleware to add the http method into your User struct and then have your validation tags based on the value of that field but it seems overengineered and confusing
48888;Yeah I guess the first solution is the easiest but its not very elegant
48889;It would be amazing to define validation rules inside a route for example
48890;Not sure how to bind this over to `domain.User` after I have created a seperate validation struct
48891;Any ideas?
48892;I have to cast it at somepoint because I want to return the data without the password
48893;have you tried just displaying the options your IDE gives you
48894;It's Ctrl+Space on vscode
48895;@Ainsley make a method for domain.User that yields itself
48896;Or I mean just give it a name
48897;How would that look / work @Laevus Dexter
48898;üòê idk what u didn't get
48899;I dont understand how that would help with the current problem
48900;> I have to cast it at somepoint because I want to return the data without the password@Ainsley the method thing will yield the only fields related to domain.UserIf u'd return a named field it could work the same way
48901;I still dont understand @Laevus Dexter I made this?```func test(user domain.User) domain.User { return domain.User{ Id: user.Id, FirstName: user.FirstName, LastName: user.LastName, Email: user.Email,.... }}```
48902;But if I omit password it still comes back as json
48903;Idk about json thing but ur thing would work too but I meant this:> func (u ~~domain.~~User) ....And this:> struct {> password ....> name domain.User
48904;We gonna call an adult mb I just forgot how to code
48905;Thanks @Laevus Dexter
48906;Something like this?
48907;"```func test(user domain.User) domain.User { type test struct{ Id int `db:""id json:""id""` FirstName string `db:""first_name json:""first_name binding:""required""` LastName string `db:""last_name json:""last_name binding:""required""` Email string `db:""email json:""email binding:""required,email""` etc etc } testing := test{} t2 := domain.User(testing) return t2}```"
48908;I didnt know you could do this
48909;t2 := domain.User(testing)
48910;Oh I got missed the context by skimming through here I go
48911;What was that @Laevus Dexter :)?
48912;"I\'m creating a wrapper for an API.I\'m wondering what is the good way to pass some data to Client params or struct?For example:```config := betaseries.Config{ ApiKey: XXXXX"", Token: YYYYY""}client := betaseries.New(config)```or```client := betaseries.New(apiKey token)```(The token can be null)"
48913;"Getting there but it would be great to make it embed type of domain.user is that possible?```func test() domain.User { type hello struct{ Id int `db:""id json:""id""` FirstName string `db:""first_name json:""first_name binding:""required""` LastName string `db:""last_name json:""last_name binding:""required""` Email string `db:""email json:""email binding:""required,email""` Password string `db:""password json:""password binding:""required,min=8,alpha""`... } return domain.User(hello{})}```"
48914;"So it would be:``` type hello struct{ Password string `db:""password json:""password binding:""required,min=8,alpha""` domain.User }```"
48915;Any ideas?
48916;this isnt typescript/javascript
48917;we dont have structural subtyping here
48918;you have to create an instance of domain.User and set the fields
48919;a quick question please how could i store my tokens ids in another file and get them to `main.go` file? like storing constants in a file and using them in another file
48920;anyone got any experience with sqs and golang?
48921;> anyone got any experience with sqs and golang?@mmacheerpuppy what‚Äôs your issue? I currently do a lot with sqs
48922;> a quick question please how could i store my tokens ids in another file and get them to `main.go` file? like storing constants in a file and using them in another file@Mr.Minnu just declare them in another file in the same package and they should be accessible
48923;? üò¢
48924;i'm 0 to go lang
48925;lemme know how
48926;Hi all! I am struggling with a simple error management. I made a very simple case of the problem. Does any one know why it fails ?
48927;https://play.golang.org/p/BmPgz69zePM
48928;"```package mainimport fmt""type MyError struct { ID string}func (e MyError) Error() string { return fmt.Sprintf(""MyError(ID: %s) e.ID)}func do() (string error) { var ( _error MyError str string ) str = Foo"" _error = nil return &str _error}func main() { var ( result string err error ) if result err = do(); err != nil { // Why err has a value different than nil ?? panic(err) } fmt.Printf(result)}```"
48929;?go tour
48930;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
48931;"i use ```dartstatic const String kToke = my token here""```"
48932;@Mr.Minnu at some point you have to learn go
48933;like this
48934;if you want to use go
48935;in dart
48936;i don't know who told you this would be super simple and require zero learning
48937;but they lied to you
48938;https://blog.golang.org/constants
48939;only for this bot i'm using go lang
48940;The tour is super fast and goes over most stuff you‚Äôll need
48941;i will surely work on go lang soon i gonna prepone my schedule
48942;thanks for help
48943;"@evandocarmo Currently getting the error... ```InvalidParameterValue: The request must contain nonempty message (user) attribute names. status code: 400 request id: bcf5b31a930854e3b55ee4c7c52510c7```When trying to encode structs to JSON via the snippet ... ```gofunc Enqueue(queue Queue body interface{}) error { b err := json.Marshal(body) if err != nil { return err } queueURL := queuesToURLs[queue] if queueURL ==  { return errors.New(""failed to enqueue due to failure to acquire queueURL from queue +queue) } svc err := getSvc() // gives me back the sqs service wrapper with some helper funcs if err != nil { return errors.New(""Failed enqueueing to SQS queue  + queueURL +   + err.Error()) } _ err = svc.SendMessage(&sqs.SendMessageInput{ // AWS sdk  DelaySeconds: aws.Int64(delaySeconds), MessageBody: aws.String(string(b)), QueueUrl: &queueURL, }) if err != nil { return errors.New(""Failed enqueueing to SQS queue  + queueURL +   + err.Error()) } return nil}```"
48944;I cant find very much on the internet w.r.t particular error üò¶
48945;What's the type of the `body` that you are passing in? (assuming the error is coming from the `json.Marshal` call)
48946;well
48947;that's not a JSON error
48948;or not an error coming from the JSON library itself
48949;It could be if the type implements a Marshaler and is returning its own error?
48950;it may be CAUSED by incorrect usage of json
48951;but
48952;you need to start wit hwhatever's throwing InvalidParameterValue
48953;"for all we know that SendMessage call just requires `User: someID"",` as an additional field in `sqs.SendMessageInput`"
48954;i know this gonna be very annoying to ask the same question here. but please don't mind I'm asking the same question again
48955;i want to store my tokens and ids in a file
48956;@deezy Right but that error would have the Failed enqueueing to SQS queue... part in it. Unless @doggy removed that part. Confirmation on which line is throwing the error would be helpful.
48957;i mean
48958;i know for a fact
48959;you want to read it from a file or compile it into the binary @Mr.Minnu ?
48960;so when i upload files to git i can ignore them and the rest code will be public
48961;that `encoding/json` will NEVER throw an error that starts with InvalidServiceValues\ or whatever the hell
48962;read from a file
48963;htat's literally NOT a json encoding error
48964;The json being passed through is fine
48965;io.ReadAll()
48966;you know flutter we use it like that
48967;and then unmarshall
48968;Ok. So you can use `json` for example to store the config on disk
48969;It's certainly JSON
48970;best for config is JSON TOML or YAML
48971;@xpegenaute when you initialize _error you're using  to dereference (this is wrong see below)
48972;okie
48973;lemme try
48974;check the `configor` library @Mr.Minnu
48975;<https://github.com/jinzhu/configor>
48976;cool lemme try
48977;tf is configor
48978;a minor abstraction over data unmarshalling?
48979;why use a third party package when the stdlib can do the same thing
48980;yeah
48981;actually if you declare a variable with  in front of it you designate it as a pointer to that type
48982;idk I use it for config because I can just do `configor.Load()` and it works
48983;I also like the auto reloading feature
48984;that sounds like a race condition
48985;I use `encoding/json` for config because I can just do `json.Unmarhsal` and it works
48986;^
48987;Ok so I'm asked to implement caching and I have no idea how to do so.
48988;yeah this package definitely has a race condition
48989;@brown simplest way is with a map
48990;@evandocarmo Found the fix for itr
48991;@Karitham I'd suggest to stop using that package or at least stop using the auto reload
48992;There is no synchronization when it updates your structs
48993;It was because we were sending an empty map to the messageAttributeValues and that was getting serialised in the AWS sdk differently from a nil value
48994;Actually that's the requirement to build in memory cache @Doad Unfortunately I'm new to the language and the concept. Can you point me to useful resources where I can learn it or maybe give some pointers on how can I achieve it.
48995;https://tour.golang.org/moretypes/19
48996;When accessing data check if it's in the map. If it is return that. If not get the data from the true source. Put that data in the map then return the data
48997;ezpz
48998;I know about maps.
48999;But how to use it as cache?
49000;by using a map
49001;you use it
49002;accessing a map is much faster than accessing a database/api/etc
49003;and retrieve it when you need it
49004;So this map I'll store somewhere?
49005;in memory
49006;it's stored in memory
49007;a map is like a python dictionnary
49008;if you know what it is
49009;have you used another language before?
49010;too many cooks in the kitchen
49011;In memory as in one of the file in my repo?
49012;too many cocks in the kitchen
49013;just a variable in your code somewhere
49014;like any other usage of a map
49015;a map is essentially a list of `key : value` variables that's stored in the same spot and you can easily access
49016;everything has a unique key to access the value
49017;Oh ok so I can include it as part of source code just where I'm making a network call.
49018;that's the idea
49019;Aha cool
49020;Check the map for your data before making the API call. If the data isn't there do the call. Et voila an in memory cache
49021;Et voila?
49022;voila cache a la B≈ìuf
49023;I don't understand.
49024;Sorry not a native english speaker
49025;https://lmgtfy.app/?q=et+voila
49026;not english lol
49027;it's french x)
49028;"Not a native French speaker either ;D"
49029;golang native speakers
49030;Hmm that google redirect was cool but I still didn't get it.
49031;Anyway let me try this map thing out.
49032;French for and there it is
49033;or something similar
49034;@brown the whole point of a cache is to improve the locality of data
49035;You might want to look at an LRU style cache
49036;or not
49037;Ya I somehow got the idea why I need to cache but was not sure how to go about implementing it
49038;What do you need it for exactly?
49039;A simple map is an unbounded cache it will only grow
49040;which can be...problematic
49041;in some use cases
49042;Ok let me explain..
49043;Give me a moment.
49044;"I\'m creating a wrapper for an API.I\'m wondering what is the good way to pass some data to Client params or struct?For example:```config := betaseries.Config{ ApiKey: XXXXX"", Token: YYYYY""}client := betaseries.New(config)```or```client := betaseries.New(apiKey token)```(The token can be null)"
49045;I'm no professional but if some things can be null I'd go with the struct form
49046;else the multiple function args form
49047;it just kinda depends on how you want to structure things
49048;if you just have 2 fields like that then it probably doesnt matter
49049;but maybe you dont want to expose the use of those fields outside the package
49050;so you just pass them into some constructor
49051;c:
49052;If it were me I‚Äôd probably use the struct if there is the possibility of more fields being added later since theta would require people to change less code when migrating
49053;I like constructors where the required fields are explicitly passed and everything else is a variadic options that can be passed in
49054;i'm not a fan of variadic because it's not explicit enough
49055;the function signature is `foo(userID string userValid bool ...string)`
49056;what the fuck do the rest of the args even mean
49057;i'd prefer to know what i'm passing in just from looking at the signature
49058;https://dave.cheney.net/2014/10/17/functionaloptionsforfriendlyapis
49059;i'm familiar
49060;that's one of the patterns i was speciifcally thinking of
49061;i like it but `func foo(...OptionFunc)` isn't very clear about what my choices are
49062;i'd have to manually open the docs and ctrl+f for all the instances of OptionFunc or whatever
49063;which isn't bad or unusable
49064;i just like explicit self documenting types
49065;Problem with config structs for me is zero values and to me is less explicit. If a package is exporting an OptionFunc interface with setters that create it to me is more explicit
49066;Sure once you actually look at the docs and see DisableFoo() DisableBar()
49067;but if i see a code hint for `f.Foo(` that just says `...OptionFunc`
49068;now i have to context switch
49069;tab over to chrome for docs
49070;you're right about zero values
49071;that's a big obstacle in go
49072;Also config is okay for simple types eg ints or strings but let's say you are adding a jittered retry function to it. With OptionFunc the package can already expose a function that will take in let's say three parameters for max retries jitter thresholds and so on and return a single OptionFuncWith Config you either need to set all three separately or create the function in there
49073;yeah
49074;there's no universally perfect solution
49075;can't make everybody happy
49076;Yeah as long as the constructor doesn't take in 30 required parameters then I don't mind finding either one in libraries
49077;How are dependencies encouraged to be managed for larger scaled apps? Straight up commiting vendored packages to `vendor/` using submodules to fix them at a commit or not using the `vendor/` folder at all? Or something else?
49078;Submodules (to clarify: Git submodules which are separate from Go modules) definitely aren't the way to go. They don't interact well with Go tooling.
49079;If you'd like perfectly reproducible builds vendoring is the way to go.
49080;If you're okay with specifying a specific version or commit but relying that it will still exist on some remote then you don't need to vendor.
49081;Modules allow you to specify that Git tag or even a specific commit and allow you to introduce vendoring (`go mod vendor`) and manage that vendoring if that's what you'd like to do. Else it will simply look for the module online.
49082;slices including slices are just weird
49083;I doubt I'll ever understand this
49084;multidimensional arrays are great
49085;Do you have a specific problem with them or are you just griping? lol
49086;griping?
49087;Complaining
49088;not really complaining
49089;I just don't really understand them
49090;So do you have a specific issue with that which we could help with?
49091;They're like any other slices
49092;Just that the elements are also slices
49093;Instead of something else like say an int
49094;they are interesting
49095;but where would they even be used?
49096;anything you need a nm grid of something is one example
49097;its just a list of lists basically
49098;So GoLang is getting generics soon. https://go2goplay.golang.org/ what's everyone thoughts on this? It feels like it'll open up the door to some cool patters to use.
49099;its a finally from me
49100;its useful
49101;@John the Apostle 2D arrays / slices of slices are basically how you'd represent a matrix. or hell how you'd draw a grid as well.
49102;i dont know if its like a game changer
49103;but cool and useful either way
49104;i'm actually looking forward to it. I really missed them coming from languages that support it... it feels much needed. Getting tired of tossing interface{} around
49105;there have only been a handful of times it really would have made something i was doing easier
49106;generic data structures will be nice though
49107;[3][3]int is essentially```[[0],[0],[0]],[[0],[0],[0]],[[0],[0],[0]],```
49108;it's just a [x][y]
49109;representing yourself a 2D or 3D array/slice is pretty easy it's either a table or a 3d table like how you'd see a 3x3x3 cube in minecraft
49110;4D is hard to represent in your head tho
49111;an easy example would be a chess board
49112;it'd be nice to be able to pass a map[string][T any] instead of having a method with multiple if/else etc.This is likely me doing something dumb but patters like these are pretty ugly. https://gist.github.com/safaci2000/8486651ef627cd7d0177d2d2f61a0e6e
49113;a slice of slices could represent a chess board
49114;`[][]int` where each integer represents a different piece
49115;a slice ( the board ) containing eight slices ( the rows ) whose individual elements represent each space in a given row
49116;just did some refactoring
49117;rate my devops setup?
49118;None
49119;:5_bugcatstare: before you give me shit for using oracle it gives you two free vms for life and they are fast with unlimited bandwith and backups
49120;i'm not familiar with portainer.io but it is a bit of a weird pattern when you have a docker container connect to a physical DB
49121;it somewhat removes the elasticity elements. Usually you ship the App +DB together and as long as it can mount the data you could spin that up in a different server or whatnot with ease. It's not bad just not the typical pattern
49122;>weird pattern when you have a docker container connect to a physical DBnot at all weird
49123;:thinkingo: do tell me more about free oracle vms @Riku
49124;https://www.oracle.com/cloud/free/
49125;:5_bugcatstare:
49126;the always free tier
49127;is the one with vms
49128;Looks like the VMs have 1/8 of a CPU?
49129;1gb memory üò¶
49130;just use disk cache lolmao
49131;ah shit I might write a uhh
49132;like a struct to keyvalue thing
49133;does anyone know what would be a good practice to learn goroutines and channels? just reading the docs doesnt help me fully understand is there a good quick excersise on it?
49134;?go concurrency
49135;Rob Pike  Concurrency Is Not Parallelism <https://www.youtube.com/watch?v=cN_DpYBzKso>  SkippyUnderstanding channels <https://www.youtube.com/watch?v=KBZlN0izeiY>  Sgt_TailorKavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_Tailor
49136;?go pipelines
49137;Go Concurrency Patterns: Pipelines and cancellation <https://blog.golang.org/pipelines>  technololigy
49138;read a file of different linessend each lines across a channel to N workers on seperate go routines that do something with that linesend processed line from worker goroutines on shared channel back to the original caller
49139;basic fan in fan out
49140;fun little exercise you see here a lot
49141;ty ty ill likely end up doing that
49142;those videos just made it worse for me lol
49143;"How would I obtain meta data for Pagination in an API (Mysql): Understand I can return the Page & Limit but wondering how to obtain the Pages Total and if there are Prev or Next Buttons?```type Pagination struct { Page int `json:""page""` Limit int `json:""limit""` Pages int `json:""pages""` Total int `json:""total""` Next bool `json:""next""` Prev bool `json:""prev""`}```"
49144;you can calculate next/prev from just pages and total on the client side
49145;and you probably don't need to echo back limit
49146;not sure what the int pages is for either
49147;"here\'s what I have: ```go// SearchResults is the results returned from the queried posts.type SearchResults struct { // Posts contains the paginated list of posts. Posts []Post `json:""posts""` // Total is the total number of posts found. It is zero if Posts is empty. Total int `json:""total""` // Sizes is the total size of all posts found. It is zero if Posts is empty. Sizes int64 `json:""sizes""` // User is the user stated in the search query. It is nil if there\'s no user // stated. User UserPart `json:""user,omitempty""`}```"
49148;https://github.com/diamondburned/smolboard/blob/renai/smolboard/smolboard.go#L326
49149;numPages is just `int(math.Ceil(float64(max) / PageSize))`
49150;and PageSize is const 25
49151;[0,n) is n included or excluded ?
49152;Ah thats helpful thanks @_diamondburned_
49153;excluded
49154;[] is included () is excluded
49155;yeah np
49156;How would I calculate PageSize in the DB though?
49157;Do I need to do a seperate query?
49158;Ah so we have another notation here then
49159;your GET request should have the page size in its query
49160;It would've been [0,n[
49161;So if I have 100 posts and I want to get 10 results at a time how would I obtain the 100?
49162;"```gofor i := 0; i < 10; i++ { q := url.Values{ page"": {strconv.Itoa(i)}, limit"": {""10""}, }}```"
49163;here's the db code https://github.com/diamondburned/smolboard/blob/renai/server/db/post.go#L36
49164;it's really ugly because reasons
49165;mainly to do with LIMIT + SUM for the total posts count
49166;No its helpful> it's really ugly because reasons@_diamondburned_
49167;"```SELECT COUNT() FROM posts;```"
49168;So I need to do that when getting the posts right ^?
49169;that's to get the total number of posts yeah
49170;for the Total field
49171;I opted for Total posts instead of total pages here because I display it as a metric
49172;None
49173;Ok nice
49174;One more thing how would I see if there are any more pages to be displayed? Would that be another query
49175;https://github.com/diamondburned/smolboard/blob/renai/frontend/frontserver/components/pager/pager.html
49176;basically if `page1 > 0` then you can go back
49177;if `page+1 >= totalPages` then you can go fwd
49178;Sweet thanks for the help @_diamondburned_
49179;yeah np
49180;I am getting OFF
49181;new relic
49182;and ONTO
49183;datadog
49184;oo i applied to datadog
49185;prob won't get it but i did
49186;yoo
49187;We use datadog
49188;I could have a man on the inside
49189;:cereal:
49190;nah if I'm accepted I'll just be an intern
49191;in~~sider~~tern
49192;What can you recommend for postgres in go?
49193;Would you use an ORM like GORM or pgx?
49194;last place used datadog too
49195;#offtopic üò†
49196;people here use sqlc but I use sqlx
49197;üòâ
49198;FUCK
49199;i love u diamond ur the most helpful person here :hugged:
49200;sqlx gang
49201;lol thx
49202;> https://gist.github.com/bemasher/7657285@superloach How would this be used ?
49203;hey lads.I am attempting to write a 32 bit shared library with CGo and I keep getting the multiple definitions error whenever I try to call one of my Go functions from C. I see this ```Using //export in a file places a restriction on the preamble: since it is copied into two different C output files it must not contain any definitions only declarations. If a file contains both definitions and declarations then the two output files will produce duplicate symbols and the linker will fail. To avoid this definitions must be placed in preambles in other files or in C source files.```in the documentation but to be honest the explanation has me completely lost. is anyone able to help out? thank you.
49204;"The preamble here refers to the contents of the comments before `import C""`. So you can\'t write something like:```// void f() {}import C""```because that\'s a definition of `f` and it will be defined twice."
49205;"You need to instead write:```// void f();import C""```and define `f` in a separate .c file."
49206;Similarly for variable definitions. Change them to use `extern`.
49207;How can I make it so I get a gorilla mux url that can contain a slash?
49208;"so /{question} would have mux.Vars(r)[""question""] possibly equal something/like/this"
49209;have the client submit it URL escaped
49210;but this is a bad design
49211;URLs should avoid containing special characters
49212;hmm
49213;make it `/question/term1.term2`
49214;omg you know what xd
49215;or literally anything else
49216;I can go a get resquest style var
49217;";;"
49218;jeesus I feel dumb ahaha
49219;or use GET/POST params
49220;gotcha
49221;prolly get tho cuz its gonna be similar to a search engine's usage
49222;ok anyways ty
49223;haha it worked!http://localhost:8765/search?q=github.com/features
49224;i actually clicked that
49225;:nobrain:
49226;lmao
49227;nice page bro
49228;I'm glad you shared it to us
49229;anyone know of any libraries that communicate with dockercompose? I suppose i can just do a quick system call just seeing if there's nicer ways of doing this.
49230;i mean dockercompose is just a wrapper script around docker
49231;so you'd talk to the docker service the same as always
49232;https://godoc.org/github.com/docker/docker/client
49233;docker client bad btw
49234;jus sayin
49235;probably
49236;it doesnt always return an error when thereis an error
49237;i'm assuming docker also has a local http api you can use
49238;pick your poison
49239;Hey fellas new to this discord but i've been learning and developing with Go for a few weeks now. Is this a good place to ask questions about design patterns and such in Go?
49240;i come here with a question! how do i list the ip of computers in the local network?
49241;ping the entire subnet probably
49242;@Kitsueki yeah sure
49243;Alright bear with me here
49244;@_diamondburned_ no ping them all? never
49245;gotta be listed somewhere
49246;in the router
49247;if you could access it that is
49248;yea youre gonna have to ping the subnet. Just like nmap does
49249;oof
49250;this is as bad as i could think of TwT
49251;Welcome to networking
49252;welcome
49253;fuck
49254;stroom come on
49255;:KEKW:
49256;Destroyed
49257;One handed typing on mobile
49258;Get fucked
49259;(<3 autocorrect)
49260;i have access to all the nodes.. but i don't wanna create a mother node that gets notified everytime some connects
49261;Run a service discovery cluster
49262;Like consul
49263;i kinda wanna do it programmatically
49264;Yea you can interact with consul via its apo
49265;api
49266;something something discovery blockchain something something
49267;lol
49268;"So with Go due to how the assertions and attribute checks work in tandem with assignments I\'m running into some issues of these sprawling indented if blocks.```gofunc CreateTypesTile(targets []interface{} g Grid callback func(Grid int int string string) legend map[string]interface{}) { for _ target := range targets { if v okv := target.(map[string]interface{}); okv { if val ok := v[""block""]; ok { if valmap okvm := val.(map[string]interface{}); okvm { if d okd := v[""desc""]; okd { if key okkey := d.(string); okkey { if expanded okexpanded := legend[key]; okexpanded { if proto okproto := expanded.(map[string]interface{}); okproto { if nameint okname := proto[""Name""]; okname { if descint okdesc := proto[""Description""]; okdesc { if xinterface okx := valmap[""x""]; okx { if x okx2 := xinterface.(float64); okx2 { if yinterface oky := valmap[""y""]; oky { if y oky2 := yinterface.(float64); oky2 { if name okname2 := nameint.(string); okname2 { if desc okdesc2 := descint.(string); okdesc2 { callback(g int(x) int(y) name desc)```..."
49269;What's going on is I'm reading some data out of a json file and it's a few levels deep since I'm storing mapdata for a little game architecture I'm building.I've read that the Unmarshal() method for the json lib can take in a struct to dump data into maybe that would be the better way to set this up? Since I designed the format of the data in the file it's consistent and maybe could fit into a struct. What I'm really asking for is good examples of how to make this sort of process more elegant and readable in Go.
49270;OH GOD
49271;that's some yandere dev shit right there
49272;Thats impressive
49273;oh my god what the
49274;I am visibly overwhelmed
49275;Kudos for writing that much before considering something better must be out there lol
49276;please please PLEASE use structures
49277;hahaha that physically made me laugh
49278;that was great
49279;Legit just use structs
49280;Stick them together
49281;It just works‚Ñ¢Ô∏è
49282;https://mholt.github.io/jsontogo/
49283;alright cool I'll refactor that. Got any examples of what it looks like? Also if I did have to deal with interface{} typecasting is there a nicer way to write it?
49284;just paste the json in
49285;and it'll automagically give you a bunch of structs
49286;> What's going on is I'm reading some data out of a json file and it's a few levels deep since I'm storing mapdata for a little game architecture I'm building.> I've read that the Unmarshal() method for the json lib can take in a struct to dump data into maybe that would be the better way to set this up? Since I designed the format of the data in the file it's consistent and maybe could fit into a struct. What I'm really asking for is good examples of how to make this sort of process more elegant and readable in Go.@Kitsueki yes of course that's what the json package is for... just create a structure with the scheme and give it to the unmarshaler
49287;beautiful
49288;"you just do `json.Unmarshal([]byte(""aaaaaaaaaaaaaaa"") &thatBigStructOnTop)`"
49289;also the general advice is to keep the happy path on the left i.e. instead of putting the success path within the `if` block return or cancel with the opposite condition
49290;^
49291;^^
49292;also no offense but I might frame that message
49293;Legit want that pinned
49294;I'd be proud to be in a frame no worries.
49295;Wow that was something
49296;@Skippy can we get a pin
49297;Like a lot of code blocks are not readable on mobile
49298;But it‚Äôs specially unreadable lol
49299;genuinely impressive
49300;"yeah I guess I could just do```goif val ok := thing.(typehere); !ok {// bad} else {// good}```"
49301;nah please just use structures
49302;```goif something == bad { continue/break/return}// good```
49303;i usually do early returns
49304;yes early returns good
49305;ah of course. I'm coming from javascript and python so Go is my first language with such strong typing. It's kinda throwing my senses off about it
49306;I appreciate the feedback
49307;btw @Deleted User you might find https://nanomsg.org/ useful for discovering other instances
49308;it has a C library and a pure Go library
49309;https://github.com/nanomsg/mangos
49310;ahh pretty cool!! i won't have to make bindings myself !!
49311;thanks!!
49312;yeah np
49313;> I'm coming from javascript and python@Kitsueki you might wanna try looking into functional stuff...
49314;btw i am new to golang too been using it for 2 months now
49315;go tries pretty hard not to pretend to be a functional language
49316;rob pike pls gib .filter
49317;is that right? got any good reads on it?
49318;lmao.. go is pretty close to C for that matter
49319;not really haven't read javascript stuff lately
49320;i feel like there have been discussions about it but i don't know where to find them
49321;Lack of generics is probably a big blocker for good type safe functional code when it comes to data manipulation
49322;honestly even tho i am drooling for generics.. but i think we are better off without them
49323;I strongly disagree
49324;I'm neutral
49325;i can already imaging monstrous generic types sprinkled everywhere
49326;most of my interface{} code wouldn't benefit from Go generics but it would save me some copypaste
49327;> rob pike pls gib .filter@_diamondburned_ https://github.com/robpike/filter :robpike:
49328;interface{} is way too widespread to be able to say we shouldn't have generics
49329;yeah I saw lol
49330;I was memeing about that
49331;I was memeing your meme
49332;it's hard to imagine a solution worse than interface{}
49333;Generics gives us type safety at compile time in many areas that its currently runtime
49334;here\'s some shit take a guess
49335;That is not good enough
49336;it's very easy to imagine a solution worse than interface{}
49337;it's called void
49338;üôÇ
49339;^
49340;:kek:
49341;unsafe.Pointer :^)
49342;i've never had to deal with void
49343;just take a dose of cgo
49344;it's like interface{} except you also have no way to know what the underlying type actually is
49345;hmmm... i won't argue with that i don't like interface{} myself... i usually create a type alias to it
49346;The language has gotten to a point where it should have generics
49347;People already write bad code without it
49348;Tbf whole languages are designed like that lol
49349;You cant stop bad coders writing bad code
49350;^
49351;taht\'s my thought on i can imagine ugly generic structures everywhere
49352;give them generics and they will fuck it to the (void) bones
49353;we already have ugly interface{} everywhere
49354;and that's only runtime safety
49355;at least we'll have ugly compile time safety
49356;well i guess thats a plus
49357;sometimes it's about the lesser evils
49358;i have tried the generics on GO2 preview playground
49359;No boxing and type erasure and no templating makes it pretty alright for me
49360;they be coming along good
49361;So yes the language should have generics and there is little reason why it shouldn't
49362;The _real world_ benefits from generics
49363;I got one
49364;yeah.. no real argument against it
49365;generics bad
49366;Suck my dicke and balles
49367;:ayy:
49368;lmao the fuck
49369;:kkk_LOLTROLLFACELOL:
49370;> @superloach > How would this be used ?@Yewolf I have no clue I was just sharing something I googled lol
49371;Oof x))))
49372;I used pHash
49373;Seems to work
49374;Nice
49375;does Go have a natural language processing library like NLTK for python?
49376;@Str≈ìm pin what
49377;not likely
49378;not on the same level at least
49379;best you can probably do is cgo bindings
49380;pinning doesn't do that code justice imho
49381;it squeezes everything together
49382;@Skippy https://discordapp.com/channels/118456055842734083/118456055842734083/756228796582985759
49383;i think this is the one in queston
49384;it belongs in a museum
49385;a masterpiece
49386;what the <censored> <beep> <unmentionable> <beep> is that.
49387;Linguini code
49388;Hadoken
49389;it's beautiful
49390;"So after using that json tool to generate structs I\'m noticing these little backtick comments. Are these like docstrings?```go Num1 struct { Name string `json:""Name""` Description string `json:""Description""` } `json:""1""````"
49391;ahh people btw never have a created the queue this hideous in my life... like it gotta have shit like: concurrent safe future minding only head in memory rest on disk shit
49392;@Kitsueki they're struct tags
49393;The json package uses reflection to get info from them
49394;btw run `go doc json.unmarshal`
49395;it will explain everything quite well
49396;Pinned a message.
49397;@Doad so having these helps the json package to dump the data into the struct it sounds like
49398;@Deleted Userty
49399;We did it reddit
49400;discord
49401;lmfaooo
49402;@Kitsueki my bad run `go doc json.marshal`
49403;gotcha
49404;"also this json thing generated a bunch of things that look like duplicates of a pattern```gotype AutoGenerated struct { Legend struct { Num1 struct { Name string `json:""Name""` Description string `json:""Description""` } `json:""1""` Num2 struct { Name string `json:""Name""` Description string `json:""Description""` } `json:""2""` Num3 struct { Name string `json:""Name""` Description string `json:""Description""` } `json:""3""````All of the things in the legend map are identical. I\'m saving them with their id as the key and the value is another struct presumably what Num1 Num2 Num3 are supposed to represent. Do I have to keep all 10 of these generated structs or is there a way to tell it that they all fit the same format?"
49405;"Trying to understand what I\'m doing wrong. I\'m using `gin gonic`. Trying to make a simple GET request from an SPA to the API. Using the vanilla `gin` config with the `""github.com/gincontrib/cors""` package to enable cors for all domains.Every time I send a `GET` request to any of the API endpoints I\'m getting a `204` response to an `HTTP OPTIONS` request. Am I missing something?"
49406;@Kitsueki what does your json schema looks like?
49407;@Kitsueki the generator is just to give you the big picture
49408;`Legend` sounds like a map
49409;or a slice
49410;> @Skippy https://discordapp.com/channels/118456055842734083/118456055842734083/756228796582985759Yikes is this for real
49411;Or is it like a proof of concept? haha
49412;"```go{ legend"": { 1"": {""Name"": Namehere Description"": Deschere""}, 2"": {""Name"": Namehere Description"": Deschere""}, }}```"
49413;Also you usually want to lift the types out
49414;It's impressive whatever it is.
49415;`Legend map[int]Something` basically
49416;Yeah the tool will get you like 80% of the way there
49417;But you still gotta edit it
49418;why are there props by 1 and 2 in legend?
49419;You'll also want to lift your types out. Turn```gotype AutoGenerated struct { Legend struct { Num1 struct {} }}``` into```gotype AutoGeneration struct { Legend Legend}type Legend map[int]LegendValuetype LegendValue struct {Name string Description string}```
49420;makes it much easier to reason about
49421;and to reuse your types
49422;i think legend is an array
49423;it could be
49424;but i'm really not interested in splitting so many hairs simultaneously
49425;mhmm
49426;i\'m focusing in on making the code work so they understand how to define their types in relation to their json
49427;and then we can address best practices
49428;gotcha
49429;nah that should be in a map
49430;or the json's structure should be changed
49431;Yeah these numbers happen to be sequential
49432;in the xample
49433;but that doesn't necessarily mean they're sequential and dense
49434;it might be sparse or it might be unordered values associated with nonsequential IDs
49435;yeah if wanna skip values or unorder them
49436;I'd only use an array if the JSON is an actual array
49437;yeah slice functionality is a superset of slice functionality
49438;so you can make the swap later at little cost
49439;btw if i send a struct over a channel and the struct has a slice in it... does the slice gets copied or just the reference is sent over?
49440;good question :thonk:
49441;lmao okay
49442;the reference is sent over
49443;passing a slice anywhere will do that
49444;you'll need to do `chan < append([]T{} Tees...)`
49445;So I turned this: https://pastebin.com/bN8mGyUEInto this: https://pastebin.com/strv0qsT
49446;Is that a good conversion?
49447;yep
49448;that's the idea
49449;now your top level definition is much easier to read
49450;and you can add helper methods to all the different types
49451;add a String() method to customize how they're printed
49452;etc etc
49453;your functions can specifically ask for subsets of this data
49454;e.g. `func Foo(mst MapSectionTile)`
49455;I like this it's already feeling a lot better.
49456;instead of having to take in the WHOLE PAYLOAD every time
49457;And I got a legendary pin out of it
49458;yeah thats rough
49459;yeah that was awesome tbf
49460;it's just good practice to give yourself smaller pieces that are easier to think about
49461;aye
49462;go has dropped support for XP right
49463;:Thonk:
49464;has anyone got some cool channel trick? like something you use a lot
49465;> XP
49466;fuck
49467;yeah they dropped it
49468;seems like it still works but they did
49469;https://stackoverflow.com/questions/52137098/goafter110andsupportofwindowsxp
49470;> channel trick
49471;that's open ended
49472;> seems like it still works but they did@_diamondburned_ yeah i tried running a tcp based messenger on XP. and it worked.. i used 1.12
49473;just use Linux
49474;> that's open ended@deezy exactly
49475;its my father's .. he need to use the laptop
49476;o
49477;that's why it has XP in the first place
49478;i wanna use the laptop as the load ballancer
49479;"for a server cluster"".. more like testing tbh"
49480;oh no
49481;i am kinda gonna exploit my college's computers for that lol
49482;i know its a oh no thing XD
49483;Wait so json.Unmarshal takes in an instance of a struct but I don't need to initialize any of the struct's values (or substruct values) correct?
49484;you can
49485;you don't have to
49486;if you do unmarshal will leave it alone if the given JSON does not have that field
49487;also it takes a pointer to an instance of a struct
49488;"```govar instance = Struct{}json.Unmarshal([]byte(""aaaaaa"") &instance) // needs to &```"
49489;aye i figured it would take a pointer. ty
49490;yeah np
49491;"to verify; I can do something like ```goLegend map[string]MapDescriber `json:""legend""```` as one of the struct fields with Unmarshal correct? As long as legend matches that format"
49492;because it does it holds a bunch of these MapDescriber types
49493;yep
49494;you don't HAVE to use named types
49495;and in the case of maps/slices you may not want to
49496;awesome thank you
49497;if your JSON contains say an array of users
49498;you wouldn't want```gotype Users []Usertype User struct {}```
49499;unless you explicitly wanted to have methods on `Users` or whatever
49500;it's clearer to just say ```gotype Payload struct { Users []User `json:whatever`}```
49501;`Users` is zeroormore `User`s
49502;i like that feels intuitive
49503;ty
49504;same with maps
49505;it doesn't HURT to have these as named typed
49506;mostly comes down to taste
49507;hm.. if I made these into types I could add methods to them. That could be useful in this situation
49508;yup
49509;add a String() method custom Marshal/Unmarshal etc etc
49510;interesting to play with
49511;I think I'll explore that a bit
49512;good information
49513;go is good
49514;ahh a preacher
49515;have faith in go there\'s always an interface for you
49516;go gud
49517;:robpike:
49518;https://blog.yongweilun.me/gogenericsdraftdesignfinal
49519;<3rd party blog post>
49520;```go mapable := NewMapable([]int{1 2 3 4 5 6 7 8 9 10}) res := mapable. Map(func(s int) int { return s  10 }). // {[10 20 30 40 50 60 70 80 90 100]} Map(func(s int) int { return s + 20 }) // {[30 40 50 60 70 80 90 100 110 120]}```
49521;kinda hot
49522;bruh
49523;arrow functions when
49524;:kkk_LOLTROLLFACELOL:
49525;kinda hot ngl
49526;this kinda excites me
49527;```go mapable := NewMapable([]int{1 2 3 4 5 6 7 8 9 10}) res := mapable. Map(func(s int) int = s  10). // {[10 20 30 40 50 60 70 80 90 100]} Map(func(s int) int = s + 20) // {[40 50 60 70 80 90 100 110 120]}```
49528;:chad:
49529;kinda boring tbh
49530;go back to sleep heretic
49531;you dont understand our struggles
49532;like in JS i can make a Map:A>B ...
49533;so from ints to objects or any way around
49534;and what is your point
49535;Boring that language X is getting feature A language Y already has feature A
49536;ahh i guess you can say my argument is generic
49537;but it does makes me feel bored.. it lacks the luster XD
49538;as i said
49539;you dont understand our struggles yet
49540;my point.. with those mappable.. you can only go from Map:A>A .. which is kinda constrained
49541;just that example
49542;you can map to different types
49543;^
49544;you didnt click the link did you
49545;```gotype Mapable[T any] struct { Arr []T}func NewMapable[T any](col []T) Mapable[T] { return Mapable[T]{Arr: col}}```
49546;ahh got me XD
49547;this is an example of a mapping from x to x
49548;ahh i thought they were thinking on added this to the core lib XD
49549;its 2:34am .. imma sleep
49550;nah that's awful tbh
49551;also it's Mappable
49552;ig it'd be useful for batch data processing with parallelism
49553;else just use a loop
49554;So I turned this function: https://pastebin.com/577YEyN4Into this after refactoring: https://pastebin.com/wX1yMf6z
49555;what an improvement
49556;see how nice Go can be when you use named types?
49557;I'm loving this
49558;I knew there had to be a better way
49559;Man that first block of code is really something.
49560;I kept going back to that like :monkaHmm:
49561;it's a masterpiece
49562;yeah if you see more than 3 levels of indentation you should probably think twice
49563;it really is a masterpiece
49564;I thought it was artwork at first
49565;hahaha
49566;I'm glad it's immortalized into the pin section now
49567;yo he actually pinned it?
49568;damn nice
49569;Yeah. They are in the hall of (f/sh)ame
49570;@Sgt_Tailor :ThonkRotate:
49571;its production code
49572;So this is what I ended up with after the full refactor: https://pastebin.com/FAT4wvb8
49573;actually need to fix a condition in the last function there but it looks a lot better now
49574;im pretty happy with this
49575;in L59 does the callback really need that Grid argument
49576;the caller supplies both the callback and the grid variable so the callback should already have access to that
49577;and you're not using grid in anything else so you can probably omit both
49578;same for L26
49579;here you can probably do `[2]int`
49580;"```gotype MapBlock struct { X []int `json:""x""` Y []int `json:""y""`}```"
49581;so you don't have to do the len checks in Split{X,Y}
49582;Diamond is going to get it down to two lines or less if you give him enough time.
49583;lmao
49584;nah
49585;`[2]int` is that setting a minimum length for the array?
49586;that's setting the length for the array
49587;an absolute length
49588;not minimum not maximum
49589;^
49590;ahhh so it outrights sets it. When it's initialized it will have a length of 2
49591;so [2]int will have len(array) == 2 no matter what
49592;yeah
49593;okay simple enough
49594;note that setting the size this way is static
49595;[2]int itself is a completely different type from []int
49596;hmm!
49597;I don't like list of pairs being [][]int can't if be []MapBlock ?
49598;Ah yes btw does setting the length makes it static? Like set into the .data section in the binary?
49599;nope
49600;that's only for consts iirc
49601;Const arrays?
49602;also the JSON doesn't allow []MapBlock so best you could do is `[][2]int`
49603;I think that's what i is
49604;you can't do const arrays
49605;you can only do const (optionally typed) numbers and strings
49606;Exactly... so arrays are dynamic anyways
49607;@arte I'm formatting it to be `[[x,y],[x,y],[x,y],...]` so that a constructor can read it and apply all sets of coordinates
49608;cosnt in Go doesn't mean an immutable variable it means a constant
49609;Yeah i got that
49610;you can change an array's values yeah
49611;Oh didn't know there were constraint of that kind. As far as the json goes you can still have a custom marshaller for MapBlock
49612;but that would just make things more confusing
49613;oh really? What does a custom marshaller look like?
49614;yeah it'd make things needlessly complex
49615;on L45 you can do `make([][]int 0 xupperyupper)`
49616;to reduce reallocations
49617;pvals := make([][]int 0 (xupperxlower)(yupperylower))
49618;oh right save on resizing
49619;in L60: ```go for _ tile := range group { descobj := legend.Get(tile.Desc) name desc := descobj.Name descobj.Description callback(g tile.Block.X tile.Block.Y name desc) return true } return false``` this loop will only run a single iteration
49620;oh you just wrote that
49621;oh yeah you have to subtract lower
49622;"A call like `func f(n int) string { return [...]string{""shit"",}[n] }` have allocation overhead per call?"
49623;haha can't believe i missed that @_diamondburned_
49624;that might be optimized by the compiler
49625;lemme see
49626;I am kinda using it with a const type... use iota to create some constants then create String() like this
49627;oh right Go makes use of closures I can directly pass the Grid into the callback where it's defined
49628;oh like go generate's stringer?
49629;bruh f gets inlined
49630;tfw
49631;thanks for pointing out the redundant grid pass
49632;Holy shit! For real?
49633;yeah unless go:noinline
49634;Inlining is good... but that means the array gets copied all over
49635;Unless they are optiming it
49636;it's going to be copied anyway
49637;arrays are copied when you pass it around
49638;Hmm i am not passing the array here
49639;I am passing an element from that array
49640;you're allocating that array in the return statement
49641;afaik
49642;But i am not sure if the array gets stored in .data or .rdata or not
49643;don't worry about it
49644;On what basis?
49645;on the basis that it's Go
49646;trivial performance difference
49647;compiler will optimize what it can
49648;copying a [2]int is definitely faster than derefencing by a lot
49649;also this tbh
49650;Applied your guys suggestions here's the full thing: https://pastebin.com/J0fU3KuX
49651;The consts get printfed a lot.. so the String() method can become a bottleneck
49652;the String method is rarely ever a bottleneck
49653;have you benchmarked this
49654;well I forgot the [2]int bit lemme take a look at that now..
49655;or are you just assuming
49656;if you want to know for sure go profile the code
49657;but if I have to guess syscalls and terminal IO will be a much bigger bottleneck
49658;prebenchmarked optimizations are a pitfall
49659;Hmmm gotcha
49660;What should i benchmark it against?
49661;Any reason for err1 err2 err3 .. instead of just plain ol err?
49662;actual work
49663;when you have multiple errs you want to keep track of
49664;not against anything
49665;@carl not really unless you want to differentiate multiple different errors
49666;just look at the numbers and see if it's good enough
49667;if it's not run it again w/ cpuprofile
49668;why have separate names for similar things? because you want to address them individually
49669;note that cpuprofile does not tell you IO wait times
49670;added the [2]int typecast and edited the link
49671;meaning if your terminal is the actual bottleneck it will not show there
49672;I meant specifically for that paste. It seems unnecessary.
49673;Make your inlined callback functions typed functions increases readability and you can give them a descriptive type name for what they actually do
49674;Imma just benchmark the String() method...
49675;"huh seems like Go does optimizations with `[1]string{""a""}`"
49676;benchmarking just that method will probably get you nowhere
49677;@carl I guess I could just reassign to `err` eh?
49678;you'll probably get like a 12ns/op result
49679;yeah that's not a useful benchmark
49680;which is pointless to optimize
49681;go is too smart
49682;profile and optimize the entire hot path not just the single method
49683;if you're effectively doing nothing go will probably figure it out and optimize it away
49684;Aight
49685;@arte typed functions?
49686;type Foo func(thing1 string)
49687;ok this is hella weird
49688;imma have to call in zerpho on this one
49689;@zephyrtronium https://godbolt.org/z/Pxddxq where are the strings?
49690;what sense of where
49691;where in the output
49692;is it just omitted?
49693;@Kitsueki it's hard to understand what for example`func (group MapSectionGridGroup) MakeGroup(g Grid callback func(int int [][]int)) bool {`meansif you had declared before something like`type GroupMaker func(x y int pairs [][]int)`then your MakeGroup would be a lot more readable`func (group MapSectionGridGroup) MakeGroup(g Grid callback GroupMaker) bool {`
49694;probably rodata and i think that means they're omitted from the assembly output
49695;ah alright
49696;I have no clue but that's an awesome tool. godbolt
49697;`go tool objdump` should still show them
49698;:Thonk:
49699;@arte oooh gotcha! That looks way nicer
49700;so when I define the callback does it do like an interface and match it based on it's parameters?
49701;Not quite it just enforces it to have that exact signature
49702;ah so i'm just defining the rules for the callback and whatever i pass in will be checked against that type
49703;yep! I think it compiles to the same exact thing and there is no runtime checking of any sort but in my opinion it always improves readability
49704;I agree very nice feature
49705;named üëè types üëè are üëè your üëè friends
49706;Definitely gonna have to get used to working with these makes things so much cleaner
49707;https://pastebin.com/CinR0rk7
49708;That's the updated version with everything (i believe) applied
49709;oh the error variables
49710;I could reassign to err and save declaring new ones
49711;Damn so.. just running bench on String() was indeed useless 1.2ns/op (i am always skeptic)...Adding fmt.Print around got it to 124256ns/op
49712;So meh i wont care
49713;told ya
49714;Could make the closures methods as well right?
49715;been there done that :^)
49716;@Sgt_Tailor I was trying to think of a way to do that but each constructor in there returns it's own type so I'd have to make a method for each one which feels a little strange
49717;for example NewRegion returns `(Region error)`
49718;NewZone `(Zone error)`
49719;in Generate return err instead of bool
49720;so you can return that read json
49721;I suppose that would be more informative since we do have an err to check
49722;```func (m MapGenerator) newRegion(grid NGrid) func(x y int coords [][]int) { return func(x y int coords [][]int) { NewRegion(grid x y coords) }}```But that is pretty cursed as well
49723;"your json reader can just be```func ReadMapJSON(fileName string result Mapfile) (Mapfile error) { jsonFile err := os.Open(fileName) if err != nil { return fmt.Errorf(""error: ReadMapJSON() cannot open that file"") } defer func() { err4 := jsonFile.Close() if err4 != nil { fmt.Println(fmt.Errorf(""error: ReadMapJSON() couldn\'t close that file"")) } }() var mf Mapfile err = json.NewDecoder(jsonFile).Decode(&mf) return mf err}```"
49724;you don't need to do readall you can just chain readers here
49725;You probably want to wrap the error
49726;if you want to be able to tell why you can't open a file later
49727;%w
49728;"yes errors should be wrapped fmt.Errorf(""error opening file: %w err)"
49729;i didnt change those from the example above
49730;you can just defer file.Close() there
49731;i left that as it was in the example but I never check deferred errors
49732;error handling that feels superfluous here
49733;You _can_ also return the defered error btw
49734;by using named return params and modifying the value
49735;yep I do that for rollback and commit in db transactions
49736;the only place where I used named returns
49737;defer a function after beginning the tx where you check if an error is being returned if not commit and return the commit error instead if there was an error before then rollback and add the rollback error to the previous error if there was any
49738;@arte does that work the same as json.Unmarshal?
49739;Yes
49740;But you don't have to read the whole thing in memory chaining readers and writers is always great
49741;always great if you don't already have the bytes
49742;for example let's say that your file was also gzipped all you'd need to do is chain file reader > gzip decoder > json decoder
49743;yea if you already have the bytes and all you need to do is unmarshal obviously just use unmarshal
49744;but if you have to do more complex streaming things you can still call bytes.NewBuffer on the bytes
49745;New concepts for me good stuff.
49746;is there a name for when a function has `func (s Client)` before the actual code
49747;Lets say I wanted to modify the return value in a defer how do I access it?
49748;@shaky elaborate
49749;@shaky a method
49750;oh a method receiver?
49751;oh
49752;yes
49753;thank you
49754;what‚Äôs the difference between a method receiver that is `s Client` or `s Client` both in the same file i‚Äôve seen both but i am smal brain human that doesn‚Äôt understand
49755;Client is a pointer to Client
49756;Client is just Client
49757;i still don‚Äôt understand pointers
49758;i‚Äôll research
49759;Then you'll also want to look up &var
49760;oh you just name your return values to access them in defer neat
49761;"@Kitsueki in golang you can in some edge cases use named returns (I don\'t recommend it unless you really want it)for example```package mainfunc foo() (out string) { defer func() { out = goodbye"" }() out = hello"" return}func main() { println(foo())}```"
49762;this will print goodbye and not hello
49763;So to receive that deferred error value instead of outright printing it I could do
49764;"```gofunc ReadMapJSON(fileName string result Mapfile) (err error) { jsonFile err := os.Open(fileName) if err != nil { return fmt.Errorf(""error: ReadMapJSON() cannot open that file"") } defer func() { err4 := jsonFile.Close() if err4 != nil { err = fmt.Errorf(""error: ReadMapJSON() couldn\'t close that file"") } }() err = json.NewDecoder(jsonFile).Decode(result) if err != nil { return fmt.Errorf(""error: ReadMapJSON() json.Unmarshal() failed to map binary to result map"") } return nil}```"
49765;I read a little bit about wrapping errors but didn't get around to tinkering with it
49766;Should probably set some of that up might make debugging easier
49767;that's a bit too verbose tbh lol
49768;and it doesn\'t wrap the error
49769;yeah
49770;it just creates a new one
49771;With this I lose any other errors that were returned and just get the close fail
49772;don't worry about the error on close
49773;wrapping is pretty simple: you just have a string that describes the failed action
49774;also that
49775;"```gof err := os.Open(fileName)if err != nil { return errors.Wrap(err failed to open file"")}```"
49776;it's irrelevant in 99% of cases
49777;for example
49778;"or ```goif err := json.NewDecoder(f).Decode(result); err != nil { return errors.Wrap(err failed to decode JSON"")}```"
49779;Ah so the errors lib makes it pretty straight forward neat
49780;note that this is the external error library
49781;"errors.Wrap is deprecated now sadly fmt.Errorf(""failed to decode JSON: %w err) is the intended way"
49782;`Wrap` isn't in the stdlib's errors package
49783;it's not deprecated
49784;it's just not in stdlib
49785;http://godoc.org/github.com/pkg/errors
49786;errors is and as is supposed to replace wrap and cause
49787;Is and As are to check
49788;Wrap is to make
49789;you use Is and As to check wrapped errors
49790;Yes but Is and As only work on errors created through : %w
49791;no?
49792;nope
49793;Is and As works on any error that can be unwrapped
49794;that is any error that implements the Unwrapper interface
49795;even unwrappable errors
49796;both errors.Wrap and fmt.Errorf + %w return wrapped errors that implement that interface
49797;like `errors.Is(err io.EOF)` or whatever that sentinal is
49798;(there is no Unwrapper interface)
49799;there is one internally so whatever
49800;interface that has Unwrap
49801;(because they couldn't agree on what its name should be)
49802;bruh
49803;what's wrong with Unwrapper
49804;oh hell
49805;AFAIK errors.wrap and errors.cause don't work with stdlib errors is and errors as there is one library that lets you use either with either if that makes sense
49806;what
49807;something along the lines of semantically it\'s a wrapper around another error rather than an unwrapper but if we call it wrapper then it sounds like the method should be named wrap
49808;they might as well argue about Go's interface naming convention at that point tbh
49809;interface has Unwrap method > Unwrapper it is
49810;there was a proposal to add the named interface to the errors api and they discussed this there
49811;@arte https://play.golang.org/p/cOQnV3Oo0TS
49812;ah they added support for them
49813;https://github.com/pkg/errors/commits/master
49814;long ago yes
49815;https://play.golang.org/p/dfnATwzyMd
49816;also cause doesn't work the same
49817;not sure what Cause is
49818;sounds like a deprecated API
49819;it's the Is equivalent of pkg/errors it's very useful to for example switch on the root cause of an error even if it gets wrapped multiple time with additional information
49820;Wrap and Cause were the only two methods in pkg/errors when dave cheney made it
49821;this is still a quick and great read https://dave.cheney.net/2016/04/27/dontjustcheckerrorshandlethemgracefully
49822;what am I doing wrong here it feels like it should be something obvious....https://play.golang.org/p/atzIBVjdZEt
49823;urgh.. never mind being dumb
49824;https://golang.org/pkg/sort/#StringSlice
49825;because slingstrice is a type
49826;:kek:
49827;That's actually a pretty funny coincidental compilation case
49828;yeah
49829;no it's hilarious
49830;Assignability is fun
49831;i'm not mocking csgeek i just think it's funny that it just happens to actually work
49832;wow
49833;that's amazing
49834;huh
49835;```consoledocker run golang go get v github.com/miyoyo/flutterdoc```this i show i run using docker ri8?
49836;if you have a container called golang it'll run `go get` in it
49837;ohhh
49838;so golang is a folder where my project files present ri8?
49839;no
49840;then?
49841;`docker run x` runs a command in container `x`
49842;probably should learn docker
49843;just run it directly
49844;wait it exec a command in the container ? didn't know you could do that
49845;oh
49846;```bashdocker run [OPTIONS] IMAGE[:TAG|@DIGEST] [COMMAND] [ARG...]```
49847;hey c'mon bud I haven't used it before
49848;You should learn about the technology before trying to use it
49849;have you made the get started on docker.com ?
49850;or at least look at the docs for a command
49851;do that
49852;and then look at the docs of the thing you're trying to use
49853;It's like doing `docker run image` and then `docker exec t image command` except the image exits after the command finishes.
49854;you won't go anywhere just learning 1 command of such a complex program
49855;I still think using Docker just for go get is a bit too overkill
49856;wonder if I'm running Docker rn
49857;üôÑ
49858;lol
49859;okie so i will learn docker first
49860;It would be one way of installing your project in a container but then you still have to run it so you would need to `&& command_name` on the end of it...
49861;https://docs.docker.com/
49862;But that isn't very deployable
49863;guys
49864;`||` what does that do in golang?
49865;Logical OR
49866;`&&` ?/
49867;Have a guess
49868;https://www.tutorialspoint.com/go/go_logical_operators.htm
49869;i found this
49870;thank you for ur help
49871;your a good person
49872;üôÇ
49873;Youre god damn right
49874;> ```console> docker run golang go get v github.com/miyoyo/flutterdoc> ```> this i show i run using docker ri8?@Mr.Minnu that will run go get but immediately exit the container and the golang image won't contain anything more than when you started
49875;oh okie
49876;"Here is a simple demo go code where I am adding 500K random strings to a slice which eventually will take more than 1GB of memory (RAM). First of all the slice is in the scope of testFunc() only so after that function returns go should free the memory occupied by the slice. But it\'s not doing so after calling that function I called runtime.GC(); debug.FreeOSMemory();And to test whether those free the memory to the operating system I blocked the program by a simple input scan. It looks like that calling those functions doesn\'t do anything even after 10 minutes. more than 1 GB of memory is still used by the program. Go free the memory only after the program finishes.Can anybody please tell me how to free memory occupied by the slice?```gopackage mainimport ( fmt"" math/rand"" runtime"" runtime/debug"")const letterBytes = abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789""func main() { testFunc() fmt.Println(""finished"") runtime.GC() debug.FreeOSMemory() fmt.Scanln()}func testFunc() { var slice []string for i:=0; i<500000; i++ { slice = append(slice RandStringBytes(2000)) }}func RandStringBytes(n int) string { b := make([]byte n) for i := range b { b[i] = letterBytes[rand.Intn(len(letterBytes))] } return string(b)}```"
49877;I'm writing README now i will get to docker docs ASAP
49878;@AaravMer did you do a heap profile
49879;> @AaravMer did you do a heap profile@_diamondburned_ what's that?
49880;@AaravMer go will return the memory when the OS requests it
49881;The runtime holds onto the memory generally
49882;To save requesting pages from the OS
49883;it's weird that FreeOSMemory doesn't free it tbh
49884;the documentation implies it should
49885;Oh huh interesting
49886;> it's weird that FreeOSMemory doesn't free it tbh@_diamondburned_ Yes
49887;huh this may have to do with the fact that Go's GC is sleeping
49888;like it's waiting for IO so it's not doing anything
49889;not sure cc @mdempsky
49890;the legend himself
49891;is this helpful? ``` if debug.scavtrace > 0 { printScavTrace(gen released true) }```
49892;@AaravMer try running that with `GODEBUG=madvdontneed=1`
49893;if we find here scavtrace is set then you can get an output from the attempt to return memory
49894;gah y'all have the same profile pics
49895;hmm you did say after 10 minutes
49896;Where do I keep finding this crusty sourcecode it's gctrace now
49897;the go runtime is one hell of a trip
49898;> > @AaravMer go will return the memory when the OS requests it> @Str≈ìm Damn! you're right. I tried running heavy applications that require more memory than free memory in my system while keeping that go program running. go released the memory.
49899;oh so it is MADV_DONTNEED then
49900;https://blog.detectify.com/2019/09/05/howwetrackeddownamemoryleakinoneofourgomicroservices/
49901;wonder if you could set this during runtime
49902;~~cc mdempsky again üòî~~
49903;looks like gctrace and scavtrace are debug args so can be used as @_diamondburned_ mentioned above
49904;I wonder if C's free uses MADV_FREE as well
49905;probably not
49906;> oh so it is MADV_DONTNEED then@_diamondburned_ Thank you so much. This is what I needed. Running program with `GODEBUG=madvdontneed=1` released the memory to os instantly after calling `debug.FreeOSMemory()`
49907;nice
49908;he's one clever cookie!
49909;gonna try that on my project too
49910;also np
49911;(Skimming chat it sounds like it's intentional runtime behavior. Let me know if I should look into it more still.)
49912;oh I have one small question
49913;can I set madvdontneed=1 in code?
49914;To me `debug.FreeOSMemory()` is `Hey OS I don't need this anymore. Whenever you need it feel free to take it back`And `madvdontneed` is `Hey OS here is your memory back`
49915;to me that's runtime.GC()
49916;debug.FreeOSMemory() read more like free everything pls just do it
49917;that said I will commit crime
49918;"```gofunc init() { // Aggressive memory freeing you asked so aggressive memory freeing we will // deliver. if strings.Contains(os.Getenv(""GODEBUG"") madvdontneed=1"") { go func() { log.Println(""Now attempting to free memory every 5s... (madvdontneed=1)"") for range time.Tick(5  time.Second) { debug.FreeOSMemory() } }() }}```"
49919;what could go wrong üôÇ
49920;really though wcgw
49921;WTF IT ACTUALLY WORKED?
49922;put a `runtime.GC()` before it for ultimate power üôÇ
49923;FIXING BUGS HAVE NEVER BEEN THIS EASY?!
49924;yo I'm not even joking
49925;ok this is very interesting
49926;I can see that changing channels adds ~20MB into RAM and after about 5 seconds it drops back down
49927;very cool I'm pushing this to prod lmao yolo
49928;aggressive memory usage
49929;which people actually filed issues about on my projects
49930;"> can I set madvdontneed=1 in code?@_diamondburned_ Did you find a way for this? I used `os.Setenv(""GODEBUG madvdontneed=1"")`  it\'s setting the environment but `debug.FreeOSMemory()` doesn\'t free the memory to os. But working in this way `GODEBUG=madvdontneed=1 go run main.go`"
49931;yeah that doesn't work
49932;I'm guessing this is initialized waaaay before any user code gets executed
49933;Ahhh so there is not way to do this in code üò¶
49934;afaik there's none
49935;you can ask mdempsky he might know about it
49936;"> @_diamondburned_ Did you find a way for this? I used `os.Setenv(""GODEBUG madvdontneed=1"")`  it\'s setting the environment but `debug.FreeOSMemory()` doesn\'t free the memory to os. But working in this way `GODEBUG=madvdontneed=1 go run main.go`@AaravMer @mdempsky Can you please look into this?"
49937;I'm afraid I don't have any experience with that flag. GODEBUG is only used by the Go runtime (whereas I mostly work on the Go compiler).
49938;It looks like GODEBUG is only accessed once during process startup so I don't think you can change it dynamically. And I don't see any code in the runtime for effecting that change a different way.
49939;yeah figured rip
49940;thanks anyway
49941;~~I can always `exec.Command(os.Args[0] os.Args[1:]...)`~~
49942;diamond
49943;you are awesome
49944;thank you
49945;If it's good enough for OpenSSH it's good enough for you.
49946;oh god
49947;You probably want to use `syscall.Exec` instead of `os.Command` though.
49948;:cereal:
49949;why?
49950;Because syscall.Exec will replace the current process whereas os.Command will spawn a child process.
49951;So if you're just wanting to restart the process with a new environment variable the former will use fewer OS resources.
49952;wait Exec replaces?
49953;dman that's cool
49954;@mdempsky this trick is crossplatform right?
49955;Oh it might not work on Windows.
49956;:monkaS:
49957;execve() is a standard POSIX system call.
49958;oh true
49959;should I fall back to exec?
49960;But fork()+execve() are kinda passe nowadays because it's clumsier for virtual memory to get right.
49961;Well setting madvdontneed=1 only affects Linux anyway so I guess portability doesn't matter.
49962;oh
49963;not even BSD?
49964;I mean this is mainly targeted for Linux but yeah
49965;Not that I can tell. It looked like it only affected some mem_linux.go code.
49966;ah got it thx
49967;It looked like it was working around how Linux's support for huge pages work.
49968;https://github.com/golang/go/blob/ddd35f8d71120b0d0508dd0d8f3a727ba681dfb3/src/runtime/mem_linux.go#L39
49969;Setting GODEBUG=madvdontneed=1 just causes debug.madvdontneed to be set to 1 which gets used at line 106.
49970;Looks like it tries to use MADV_FREE normally but falls back to MADV_DONTNEED on older kernels.
49971;ye got it thanks a lot
49972;i will proceed with the experiments
49973;thumbs up
49974;https://github.com/diamondburned/cchatgtk/blob/master/madvdontneed.go I feel like I've accomplished something today even though it's nothing much
49975;like this was bothering me for a year
49976;Hi Im trying to implement Limit & Offset into mysql but it returns duplicative results for example if LIMIT is 2 and PAGE is 0 it returns items with `id: 1 id:2` if PAGE is 1 it returns items with `id: 2 id:1` ideally it should be 1,2 3,4
49977;```SELECT  FROM posts ORDER BY id ASC created_at ASC LIMIT 2 OFFSET 1 ```
49978;page  limit for OFFSET
49979;probably
49980;assuming 0indexed page
49981;You are a legend
49982;Thank you!
49983;yeah np
49984;Im also trying to see if an unknown interface is empty using ```fmt.Println(reflect.ValueOf(data))``` which works if its empty but causes `runtime error: index out of range [0] with length 0` if its not any ideas?
49985;that's a pretty bad idea
49986;what's this for?
49987;Responding from an endpoint if the data (`data interface{}`) is nil return an empty object and not null
49988;just do data == nil
49989;if data == nil { data = struct{}{} }
49990;Ive got that one but if its a slice it doesnt pick it up
49991;:Thonk:
49992;don't think that's the case
49993;guys which GraphQL library do you use and why?
49994;an empty slice != nil slice üòâ
49995;ok I see what's going on now
49996;the interface itself is not nil
49997;but the underlying ptr is
49998;https://play.golang.org/p/6fJjaIB8tGJ
49999;Does this `postgres://YourUserName:YourPassword@YourHostname:5432/YourDatabaseName` work with `sqlx.Connect`?
50000;it should but try it and see
50001;@Pug gql from others but I don't use it personally
50002;@_diamondburned_ gqlgen?
50003;yeah
50004;Is it possible to have partial structs in go from optional requests sent in JSON form? Using just json.Unmarshal at the moment and realized it will set default values for all variables in the struct are are not sent in.
50005;Just found math/big and it honestly seems pretty cool
50006;trini8ed you could look into using pointers
50007;That way they‚Äôd be nil if they‚Äôre not set
50008;> it will set default values for all variables in the struct are are not sent in.note that it doesn't do this
50009;the default values (i.e. zerovalues) are set when you first initialize the struct
50010;json.Unmarshal does not touch the existing values if they're not in the JSON
50011;Would it perhaps be better to use pointers here for the struct and just check if they are nil? I have the case that could happen when a request sent in specifically for booleans if its not defined I want it to be nil instead of a default false value
50012;Sorry this took so long trini8ed I‚Äôm on mobile: https://play.golang.org/p/fRHwwIB2T2V
50013;"Filename string `xml:""filename"",db:""csv_name""`"
50014;Can I do this?
50015;"```goFilename string `xml:""filename"",db:""csv_name""````"
50016;Have a user profile page with multiple tabs and single request for each tab to update that data don't want to overwrite database values if they are not sent in if that helps
50017;Dylan I‚Äôm not sure what you‚Äôre asking.
50018;And thanks you Dexti I'll try that seems to be the likes of what I was thinking of trying next
50019;Great üôÇ
50020;I have a struct that I want to use to create a xml and to save it to a databse
50021;I'm wondering if I can combine that
50022;you can but use a space not a comma
50023;Ah okay. You should be able to use different tags for different formats yes
50024;I‚Äôve never used xml before so idk specifics
50025;Ah thank you
50026;None
50027;Your a legend Dexti exactly what I wanted üòÑ
50028;Np üôÇ
50029;Its so painful going back and forth between javascript and go I hate every second of writing JS code lmao
50030;Well TS in my case but not as bad as vanilla
50031;Yeah I find interpreted dynamic languages like js ew as well.
50032;I guess that‚Äôs a generalization but that‚Äôs been my experience with the ones I‚Äôve tried
50033;Can‚Äôt wait for WASM to be improved.
50034;I found this meme the other day for js and had a pretty good laugh
50035;None
50036;There‚Äôs a really funny talk called ‚Äúwat‚Äù by destroy all software iirc about this
50037;This isn‚Äôt really golang anymore so we should move to offtopic
50038;Was this the one with YavaScript?
50039;What is the json tag to Go to ignore nil values aka just {} sending an empty object or only the values that are not nil
50040;omitempty
50041;Wp :micdrop:
50042;https://github.com/beeker1121/goqueHas anyone used this?
50043;dunno if people here have used `github.com/julienschmidt/httprouter` but I suppose it can't hurt to ask:I'm having some trouble getting `OPTIONS` requests to pass for some reason they don't seem to end up in the `GlobalOPTIONS` handler that I have defined  has anyone else experienced something like this?
50044;It‚Äôs easier if you show some code aelen
50045;"fair! I have the following:``` router := httprouter.New() router.GET(""/characters server.AuthMiddleware(routes.GetCharacters)) router.HandleOPTIONS = true router.GlobalOPTIONS = http.HandlerFunc(func(w http.ResponseWriter r http.Request) { fmt.Println(""GLOBAL OPTIONS"") if r.Header.Get(""AccessControlRequestMethod"") !=  { // Set CORS headers header := w.Header() header.Set(""AccessControlAllowMethods header.Get(""Allow"")) header.Set(""AccessControlAllowOrigin "") } // Adjust status code to 204 w.WriteHeader(http.StatusNoContent) })```basically I just copied the example from the readme as an attempt. I just added a lof line in there to see if it\'s working"
50046;and this is what the request looks like in chrome's network tab for the `OPTIONS` request:
50047;I'm sure I'm missing something completely obvious but I can't see it
50048;Can i use my gpu for faster computing in golang?
50049;found the issue it was unrelated to httprouter \\o/
50050;@panaginip here's a post I found about it: https://hackernoon.com/nostresscudaprogrammingusinggoandcfy1y3agf
50051;Basically you can call code to run on CUDA from golang.
50052;```gofor _ symbol := range symbolList { chanCompare[symbol] = make(chan float64 10000) chanRecieveMcginley := make(chan float64 1000)```
50053;will chanRecieveMcginley
50054;be different
50055;with every iteration if im passing that channel to a go routine
50056;each time?
50057;yes
50058;you are declaring it each iteration of the loop
50059;so it has a different
50060;"address""?"
50061;phew
50062;`:=` makes a new variable
50063;Also those are really long channel buffers o.O
50064;yeah not sure what you're doing but I doubt you need buffers that large
50065;yea
50066;yea idk
50067;im not working on optimization rn
50068;so i just keep them there like that
50069;also if my channel is of a struct
50070;even aside from optimization it likely doesn't add anything to your functionality
50071;should i just be able to .[field name]
50072;in order to access
50073;that value?
50074;You will receive a struct from the channel if you send one yes
50075;the same type of struct as the channel is defined for
50076;alright yea
50077;so im doing this
50078;```gov := closeAndMcg{mcg:McG,cClose:price} sendMcginley < v```
50079;to send it
50080;but when im trying to access the field
50081;in the other go routine
50082;it dones't seem to giv eme the option
50083;The scheduler performs a bunch of nice tricks for channels btw.
50084;```gotempMcg := < mcginley.mcg```
50085;@xblooos if that channel has that struct type you will get that struct type out of it
50086;full stop
50087;if you aren't you have something setup incorrectly
50088;using the wrong type in the channel using two different channels etc
50089;first step is to pull the value out of the channel
50090;you can't do anything with it until you do that
50091;THEN you can call its methods access its members etc
50092;oh yeah
50093;that syntax is incorrect
50094;get the value from the channel first
50095;then you have the value
50096;ohhhhh
50097;u have to fully
50098;recieve it
50099;then access the struc
50100;u can just pick what u want from the channel
50101;a channel doesn't have properties you can access like that
50102;which is what your syntax is doing
50103;the channel isn't a struct
50104;(well it is under the hood but irrelevant)
50105;It is arrays mutexes and scheduler magic all the way down
50106;ah
50107;learn something new everyday
50108;thank u sm
50109;If I'm going to read from a circular buffer is an infinite for loop round Read() going to cause any performance issues when it could be sat there reading nothing for an extended period of time
50110;performance issues being a tight loop doing reads on nothing multiple thousands of times per second
50111;iirc when it's waiting on a read there is no performance penalty i.e. no cpu spike
50112;use a sync.Cond
50113;the problem is I'm writing the circular buffer package so my Read() isn't very clever
50114;dont busy loop use sync.Cond
50115;Cool I'll look into it now thanks Sentry
50116;if you are looping infinitely with no blocking conditions it'll chew up your CPU cycles
50117;^ the read should be the blocking condition but yeah better to protect it
50118;he said it's his own simple implementation
50119;doubt it blocks
50120;It does not block but I'm mainly doing this for learning
50121;so learning how to block correctly seems like a good thing to know
50122;that's going to spike your cpu you can monitor it as well when you run it
50123;Any ideas on packages where something similar has been done already?
50124;https://github.com/theodesp/blockingQueues
50125;blockingQueue.go
50126;perfect
50127;I'm gonna step back and check a circular buffer is really what I want as well... I need to consume output from a pty it both needs to be sent immediately to any connected websocket and also I was thinking of a circular buffer so if a web client was to reconnect to the running pty session they would get a fairly decent replay of the buffer to reestablish the terminal window
50128;does that seem reasonable?
50129;sounds like a recipe for danger if youre missing important ones
50130;what if the series was
50131;```cd somewheredo stuffmore stuffrm rf ./```with a buffer of 3 it gets replayed as```do stuffmore stuffrm rf ./```
50132;on /
50133;it's only a replay of the output
50134;the pty session never gets torn down on the backend so if you were to close the web client and reconnect again you could jump into the same session but you'd have a blank terminal window because the client side terminal hasn't received any input
50135;I don't see value added but sure
50136;If you close the terminal and then reopen it it's fine that it's blank
50137;not in this use case
50138;long running commands tools that can take hours to run. If I connect back to it I'd like to be able to see where it's at what it was doing etc
50139;imagine jumping back into a tmux window and all your panels are blank
50140;honestly i think you're coming at this backwards
50141;mosh does what you're trying to do
50142;but client side
50143;the server being responsible for replaying shit or whatever sounds wildly dangerous
50144;it's literally just a replay of the buffer from a PTY to term.js
50145;This is the POC
50146;`tmux`
50147;the framework will also provide an overlay on the clientside for running commands injecting into the PTY basically. using tmux as a part of that would make things a lot more complicated
50148;well I dunno about a lot more complicated but somewhat more
50149;also when connecting back to an existing session you'll still get a blank screen
50150;that PTY could already be sat in tmux
50151;For stuff like that I only really use vnc + the noVNC client
50152;Only gives you a single session but good enough
50153;notice how if I reconnect to a session already running tmux I get the tmux boarder because of the redraw but none of the other output from the previous session
50154;None
50155;Would a replay buffer of the output really be such a bad idea?
50156;"Hi All! I\'m newbie in GoLang. Tho I\'m coming with some dev background on C++ Java JavaScript Python Shell. Golang is totally new for me. I\'m usually using this languages to write automated tests. I\'m trying to setup a test project now with godog testframework. My OS is Mac OS.Steps I do to create project:cd ~./Documents;mkdir Test; cd Test;brew install golang;GO111MODULE=on go get github.com/cucumber/godog/cmd/godog@v0.10.0// now I add features folder for my test projectmkdir features// put. some test.feature file there with test scenarioaccording to godog documentation I should just Execute godog in CLI and he will execute .feature files. But I\'m getting an error  zsh: command not found: godogAny tips? What may be a problem?"
50157;Is `~/go/bin` included in your PATH?
50158;export PATH=$PATH:/usr/local/go/bin
50159;go version returns me a version of go
50160;`/usr/local/go/bin` is where the Go executable itself is stored but `~/go/bin` is where userdownloaded executables are stored.
50161;That's why I mentioned the latter‚Äîyou downloaded `godog` it isn't included with Go.
50162;ohh okay I will try thanks
50163;Yay it helped! üôÇ Thanks alot! @Carson
50164;"Sorry basic question but the compiler is moaning at me for this : ```gofor i v := range str1 { dir dist := func(v) (dir string dist int) { dir = 1"" dist = 2 }``` I just want to use an anonymous function to assign 2 variables and am using named thingies"
50165;assignment mismatch: 2 variables but 1 valuesgoIs the complaint
50166;i mean
50167;for one
50168;you're not returning anything from your function
50169;second
50170;you're not calling the function
50171;you're just defining it
50172;oh wait named return values
50173;I thought that named returns meant I didn't have to explicitly return?
50174;so yeah
50175;that's point one
50176;now try to figure out point 2
50177;Ah okay. So can't I just pass an anonymous function which is called straight away?
50178;yeah you can call it at the definition
50179;how?
50180;`func(){}()`
50181;"ah so ```godir dist := func(v) (dir string dist int) { dir = 1"" dist = 2 }()```"
50182;the same way you call any other function
50183;that function isn't returning those variables though
50184;you have no `return` statement
50185;named returns
50186;i did the same thing fam
50187;you still have to `return` though yeah?
50188;nope
50189;yo wut
50190;named returns will do magic
50191;yeah
50192;wait
50193;no
50194;yeah
50195;you should still have to `return`
50196;You still have to have the naked return
50197;idk i don't fuck with those
50198;it's not implicit
50199;yeah right cause the function has to know when to terminate
50200;Thanks @Doad
50201;Saved me some head scratching there!
50202;Yes. You do need a return but it can be naked
50203;"```gofunc main() { banana()}func banana() (err error) { fmt.Println(""banana!"")}```"
50204;that won't work
50205;neato
50206;yeah that's whati thought
50207;> missing return at end of function
50208;"```gofunc banana() (err error) { fmt.Println(""banana!"") return}```"
50209;üê∏ üî™
50210;that is fine though
50211;"!go```gofunc main() { fmt.Println(banana())}func banana() (err error) { defer func() { err = errors.New(""no banana!"") }() fmt.Println(""banana!"") return}```"
50212;None
50213;The defer thing
50214;so I think I get the concept of interfaces and what they do just from making small examples but I cant seem to figure out when to make them in my own apps. Should I even be making my own interfaces a lot?
50215;only if you need them mostly
50216;yeah I'm just running into trouble figuring out when I should use them in a real world example not just silly examples for learning
50217;the `io` package is a good example
50218;io.Reader is a thing that can give you bytes
50219;it\'s there so you can say I want a thing that gives me bytes and you don\'t have to care about where they come from
50220;files network connections databases it doesn't matter
50221;oh so I most likely wont need them for my own applications mainly just use the the ones in other libraries?
50222;depends on how you want your thing to be used
50223;if you want your Thing to provide some functionality but the underlying details of HOW that is accomplished might change on a casebycase basis or over time or whatever
50224;you may want an interface
50225;maybe you want your Thing to be able to use either files OR redis as a cache
50226;you'd write an interface that abstracts those details away
50227;```gotype CacheService interface { func Get(string) string func Set(string string)}```
50228;now you can make a struct with a Get() method that loads a file and a separate struct with a Get() method that queries redis
50229;and they're interchangable
50230;oh ok that makes a lot more sense
50231;thanks for the help
50232;they're very abstract
50233;because they're explicitly
50234;abstractions
50235;gotcha
50236;when you're writing your program are there any specific things to look out for that could tell you when you should probably use an interface
50237;"Why are there so many ways to create an instance of a struct in Go?```golangtype someStruct struct{}func New() someStruct { return new(someStruct)}func main() { st1 := someStruct{} st2 := &someStruct{} st3 := new(someStruct) st4 := New() var st5 someStruct fmt.Println(st1 st2 st3 st4 st5)}```Apart from the obvious difference that some return memory addresses when should I for example use `new()` struct literals or a custom `NewSomething()` method/""constructor""?"
50238;I make a custom `New()` command if I need to set stuff up like memory or dependencies struct literal if it's just data and then never really use `new()`
50239;well
50240;first off
50241;`type someStruct struct{}`
50242;this is not an instance of a struct
50243;this is a type definition
50244;so
50245;there is
50246;second
50247;`func New() {}` is a function
50248;so i'm eliminating that
50249;here's what's left
50250;```gonew(someType)someType{}&someType{}```
50251;the last two are actaully one
50252;```gonew(someType)someType{}```
50253;so here's the full list of how to create an instance of a struct
50254;not that many
50255;you\'re just confusing creating a struct AND doing something else in the same line as different ways of making structs
50256;Does go only support one go.mod & go.sum per repo?The thing I'm working on isn't one project but it needs to be in one repo. I'd like to be able to split each project's dependencies so having one monolithic go project(?) won't work.
50257;sounds like a monorepo?
50258;multiple projects with different codebases?
50259;> sounds like a monorepo?Yeah
50260;https://github.com/golang/go/wiki/Modules#faqsmultimodulerepositories
50261;sure give each a folder and its own go.mod
50262;it's possible
50263;but i've NEVER seen anyone actually make it work
50264;here's the thing tho
50265;uber are moving to a go monorepo
50266;> sure give each a folder and its own go.modThe problem is that they can't seem to import each other.
50267;yes you can
50268;I thought uber already had a go monorepeo?
50269;yeah exactly
50270;use replace directive with path
50271;@jonno i think its still in transition period
50272;> use replace directive with pathI don't like this but I may have to if there's nothing better.
50273;as in not everything yet. but a lot
50274;nothing wrong with that way
50275;perfectly valid
50276;youre doing a monorepo its assumed evreything will be together
50277;ig it doesn't need to work when separated.
50278;and it wont be separated if monorepo
50279;if you go monorepo you need to spend lots of resources on a good build system
50280;yeah. Thx üôÇ
50281;bazel takes a lot of time to configure
50282;bazel aint a walk in the park
50283;Yeah i've been trying to set up bazel but it's proving really difficult.
50284;ah that's fair
50285;i think as long as you have 23 teams maybe different repos is just the simpler
50286;bazel is probably great for larger teams
50287;monorepos start making sense at a bigger scale imho
50288;Let\'s say I have```internal| project1 | go.mod | code.go| project2 | go.mod | server.go```What `import ` should I use in server.go to import from the sibling directory project1?
50289;The answers I'm getting online all say relative imports are not possible
50290;you need infra around bazel
50291;to cache between builds
50292;Ah so bazel is required. big sad üò¶
50293;not required
50294;you can write some adhoc stuff which would work fine
50295;you can import project1 from project2
50296;what do you go mod init project1 as
50297;you also need a go.mod in internal
50298;eh? you dont
50299;no go.mod in internal
50300;I guess you don't that's just how I used it
50301;Just refer to this https://github.com/gomodulesbyexample/submodules
50302;Oh wow that works for what I'm doing thx üôÇ
50303;is there anyway to check the shape of a http response body
50304;ahahaha
50305;what does shape mean
50306;what fields the struct I'm creating should have/map to
50307;it sounds like you're a few steps ahead
50308;I think you'll have to give a bit more context to help us understand.
50309;of where your questions need to actually start
50310;sure 1 second
50311;cause i've never heard of anyone mapping an http request to a struct
50312;maybe the BODY of a POST request
50313;if it were json
50314;is your question how do i parse json in go?
50315;"``` res err := http.PostForm(baseURL url.Values{ league"": {""EPL""}, season"": {""2020""}}) if err != nil { log.Fatalln(err) } defer res.Body.Close() fmt.Printf(""status %v res.Status) var players []Player if err = json.NewDecoder(res.Body).Decode(&players); err != nil { return nil err }```"
50316;it is JSON
50317;yes @deezy üòâ
50318;there we go
50319;I'm getting an unmrashal error
50320;yeah i bet
50321;i mean
50322;the first step is printing the raw JSON out
50323;unless you want to randomly guess
50324;definitely the former
50325;how can I print the []byte(?)
50326;i'd just use curl
50327;and send the request
50328;example the response directly
50329;I see
50330;is there anyway to print it in go?
50331;sure you could print the contents of the response body
50332;but i'd just use curl and save myself the effort of writing the go code
50333;body {0xc0000e9b80}2020/09/18 13:46:26
50334;yeah you have to read from the body
50335;I see
50336;remember how i said curl would probably be faster and easier
50337;yep
50338;just curious
50339;you could use like
50340;ioutil.ReadAll or whatever to get the full bytes
50341;but since this request is pretty simple i would default to hand tools
50342;not sure how to do that yet but got ReadAll to work
50343;what's the pattern to ignore EOF errors
50344;check if it's EOF do nothing
50345;you presumably are already doing the first part
50346;since you know you're getting EOF
50347;OK got it thanks
50348;Hi again I know its a bit of a hot topic so I thought I would ask here. Whats the proper way to generate unique ids in go? 36 characters for example?
50349;Do you want an actual UUID?
50350;https://github.com/google/uuid
50351;Yeah for database storing
50352;Nice thanks for that
50353;Are you using it as a primary key in your database?
50354;ReadAll shouldn't return an eof i think.
50355;In that case it's likely your database supports generating them already
50356;No im using the ID as a primary key
50357;So it\'s for more than just database storing üòâ
50358;Its just sql can they be generated by themselves?
50359;SQL is not a database
50360;Ah ok üëç
50361;UUIDs are just numbers
50362;generated according to certain rules
50363;There are many different databases that use SQL
50364;Apologies Maria db box standard stuff
50365;https://mariadb.com/kb/en/uuid/
50366;MariaDB can generate UUIDs
50367;Oooo nice
50368;Cheers
50369;What am I doing wrong here? https://play.golang.org/p/N2mluhwvrNl
50370;Ah I know nevermind
50371;I instead have to call the function I passed to `foo` from `foo` and give it parameters
50372;But what if I did:
50373;https://play.golang.org/p/5i4HthipA2C
50374;you're not making a variable anywhere
50375;p here merely represents the variable name of the function argument it doesn't make anything new
50376;@_diamondburned_ I thought I made a variable at line 18
50377;How do I properly do it then?
50378;Consider this
50379;https://play.golang.org/p/RBveTghlHol
50380;Note how welp is printed
50381;this is because you're passing in a boolean
50382;what boolean? the one you evaluated from the function
50383;Ah I see everything now
50384;I got you I called function and it passed `foo` the return value of it
50385;Took me a bit to realise it
50386;yeah
50387;Have you guys got any recommendations on how to test an API? I just built my second app and want to test it but really haven‚Äôt done it before!
50388;`httptest`
50389;Hi
50390;In this snippet: https://gist.github.com/jnovack/297cee036f3e5a430aa9444c0ae1b06d
50391;Does anybody know what this particular idiom is doing?
50392;``` go func() { <c```
50393;Is a goroutine created when init() is called or only when data is queued into the channel?
50394;waiting for input on the channel
50395;init is called on application start but I wouldn't have this in init
50396;Wouldn't it be inefficient to have a goroutine running just to wait for data on the channel?
50397;Nope. The scheduler will park the goroutine until the channel receives an event. Until that time it doesn't consume any resources
50398;That is fundamental to how channels work üôÇ
50399;?go channels
50400;Understanding channels <https://www.youtube.com/watch?v=KBZlN0izeiY>  Sgt_Tailor
50401;Ok thanks!
50402;<https://tour.golang.org/concurrency/2>
50403;@Sgt_Tailor how about if the controllers are reliant on models? Work in the same way?
50404;Not sure what you mean
50405;I have stores that are interacting with the database and controllers for dealing with endpoints. Do I test both? One? And how do inject dependencies? Using mocks or something?
50406;Ideally you have abstracted away the database behind an interface
50407;Yep
50408;And you can pass a fake database to your api. Your tests can spin up your api server and perform requests on it
50409;Ok makes sense thanks
50410;For the layer that directly talks to the database I'm against unit tests with stuff like sqlmock they always seem utterly pointless to meHave a thin db layer that just talks to the database and either don't test it or integration test it
50411;yeah you don't want to unit test your database
50412;you want to unit test the code that needs shit from the db
50413;which means you need a fake db
50414;and a system that allows a fake to be substituted in when desired
50415;so you can give the units under test known good/known bad data
50416;is there a wayt o convert
50417;"```go{ ev"": T // Event Type sym"": MSFT // Symbol Ticker x"": 4 // Exchange ID i"": 12345 // Trade ID z"": 3 // Tape ( 1=A 2=B 3=C) p"": 114.125 // Price s"": 100 // Trade Size c"": [0 12] // Trade Conditions t"": 1536036818784 // Trade Timestamp ( Unix MS )}```"
50418;to json
50419;i know there was something online but
50420;https://mholt.github.io/jsontogo/
50421;but wat
50422;p sure that's alraedy json
50423;with comments
50424;yea but idk how to make a struct outta it
50425;you use the tool
50426;wait
50427;yes that's already json
50428;possibly by coincidence but it is valid json
50429;cause i need ot know the value type
50430;like if its a string float or in
50431;int
50432;i mean
50433;use your eyes?
50434;"` ev"": T `"
50435;what do you think the value of this key is
50436;int64?
50437;bruh
50438;so you think
50439;it's the letter T
50440;T is an int64?
50441;im joking
50442;hahahahah
50443;okay
50444;i know its a string
50445;yeah
50446;you have to
50447;like
50448;look at things
50449;and figure them out
50450;bro sql is killing me
50451;I don't even understand
50452;my sql script was working perfectly fine then I changed something and a completely unrelated issue pops up
50453;and of course doesn't go away when I return the script back
50454;"```sqlCREATE TABLE IF NOT EXISTS guild_member ( id SERIAL PRIMARY KEY, guild_id VARCHAR(18) NOT NULL REFERENCES guild(id), member_id VARCHAR(18) NOT NULL REFERENCES discord_user(id), xp INT NOT NULL, warns INT NOT NUll, UNIQUE (guild_id member_id));```"
50455;wipe db and start again?
50456;I am
50457;every run
50458;i mean soemthing iddn't get reverted back then
50459;Revert commit
50460;it did I tried querying the table and it says it doesnt exist
50461;then run it with the creates
50462;i don't recommend using varchar for ids btw
50463;i know discordgo uses strings
50464;but i don't recommend doing that
50465;The issue is with the last line. I defined a unique constraint on two columns. This was working perfectly. Now I'm getting an error.
50466;"`insert or update on table guild_member violates foreign key constraint guild_member_member_id_fkey""`"
50467;but even the member_ids alone are all unique because the bot is only in one server!
50468;so how could the combo not be unique
50469;member_id mismatch? no idea
50470;not enough data
50471;also I have `on conflict do nothing` in the query
50472;so it shouldn't even have this error
50473;Welp
50474;Any time you say should while debugging you have a problem
50475;are you manually executing queries against the db and verifying these things?
50476;print all queries out and paste them in sequelite or sth lol
50477;and tinker around
50478;are you checking the database logs to verify that your app is sending the queries you think it is?
50479;if that's an option i don't know what db this is
50480;oh thank you sm
50481;btw:)
50482;for the help
50483;i also have another question about struct differencing
50484;uh oh
50485;inb4 is there a way to do it without writing all fields down
50486;nah this one is more legit
50487;"```go{ ev"": T // Event Type sym"": MSFT // Symbol Ticker x"": 4 // Exchange ID i"": 12345 // Trade ID z"": 3 // Tape ( 1=A 2=B 3=C) p"": 114.125 // Price s"": 100 // Trade Size c"": [0 12] // Trade Conditions t"": 1536036818784 // Trade Timestamp ( Unix MS )}```"
50488;x doubt
50489;"```go{ ev"": AM // Event Type ( A = Second Agg AM = Minute Agg ) sym"": MSFT // Symbol Ticker v"": 10204 // Tick Volume av"": 200304 // Accumulated Volume ( Today ) op"": 114.04 // Today\'s official opening price vw"": 114.4040 // VWAP (Volume Weighted Average Price) o"": 114.11 // Tick Open Price c"": 114.14 // Tick Close Price h"": 114.19 // Tick High Price l"": 114.09 // Tick Low Price a"": 114.1314 // Tick Average / VWAP Price s"": 1536036818784 // Tick Start Timestamp ( Unix MS ) e"": 1536036818784 // Tick End Timestamp ( Unix MS )}```"
50490;both of these come through the same websocket
50491;on type interface
50492;and i have to unmarshal it into a struct type
50493;use optional fields
50494;yea how can i tell the difference
50495;so i dont get errors
50496;cause one c is a float and the other is a slice
50497;smth liek that
50498;oh brutal
50499;hang on
50500;"do ```govar bytes []byte // keep track of original bytestype Event struct { EventType EventType `json:""ev""`}// unmarshal to ev using bytesvar ev Eventswitch ev.EventType {type EventWhatever: var ev IDontKnow // unmarshal there using bytes}```"
50501;https://github.com/therealfakemoot/pom/blob/master/poe/types.go#L147
50502;a custom unmarshaler would do the trick
50503;oh man is that a union type
50504;but not really
50505;What also isn't uncommon is to unmarshal it multiple times
50506;Once to determine the type
50507;then unmarshal it into the correct struct
50508;yea
50509;that's what i do
50510;i think
50511;i wrote this code a year ago all i remember is that it works
50512;:KEKW:
50513;is there a more in house
50514;way
50515;i don't know what you mean but almost definitely not
50516;this is how you do it in go
50517;like if i unmarshal it only to look at the ev: to determine if its a T or AM and then sumarshal the rest
50518;yeah that's what i'm doing
50519;i have a custom Unmarshal method on the parent type
50520;wdym inhouse way
50521;which attempts to decode the member into different types
50522;you can tuck everything i wrote into an UnmarshalJSON like deezy did yeah
50523;wait
50524;can you
50525;with an irregular Go struct you might be able to yeah
50526;irregular being it won't map directly to that JSON anymore but this might not be a big deal
50527;if I were to do a webapp dashboard alongside my bot would it be useful to use graphql
50528;unnix ms oh god
50529;yo
50530;depends on your data
50531;nah i wouldn't bother w/ gql
50532;graphql is usful when you have a large number of highly relational entities
50533;I mean
50534;and you want to have extremely granular control over how those relations are pulled
50535;that's what graphql is for
50536;My data is basically two nested objects
50537;if that isn't your use case you probably don't need graphql
50538;but one is extremely nested
50539;igh ill attempt it but ill def have questions
50540;"> BTW Windows accepts / path separators; you only need Windowsnative syntax in rare cases :)awful"
50541;I have guilds and users. Guilds has a lot of nesting/ relations like members and roles and reaction role
50542;so i have to put this at the bottom of my code?
50543;i wouldn't use graphql no
50544;or is all that something i can import
50545;it's something you write yourself
50546;wdym import
50547;its just a lot of code i dont understand
50548;so i wouldn't even know where to start
50549;rlly
50550;yeah you have to be more specific
50551;start at the top
50552;same way you start with anything else
50553;ok this guy is suggesting changes to the proposal that's just windows stuff
50554;time to downvote
50555;> its just a lot of code i dont understand> so i wouldn't even know where to start> rllyin the playground probably
50556;so u have stash
50557;struct
50558;which has the
50559;item struct in it
50560;no idea what stash or item are
50561;its from deezys
50562;github thing
50563;oh that
50564;yea and i dont get teh use of switch
50565;and i know diamond
50566;u also had switch in yuor example
50567;https://tour.golang.org/methods/16
50568;you can switch on a value's type
50569;yeah i have switch in my example
50570;same way you can switch on the value of an integer
50571;or a string
50572;i'm just switching on a regular value that i unmarshaled
50573;help me understand
50574;but if u unmarshal
50575;with a field that is of the wrong type
50576;then u get a error right>?
50577;yeah
50578;yeah
50579;so you can attempt to unmarshal it to one type
50580;if there's an error
50581;unmarhsla it to another
50582;lather rinse repeat
50583;but you don't get an error if the struct does not have the fields that the JSON does
50584;"oh yea thats what im doing current;y"
50585;then
50586;i thought there was just a diff way
50587;but like lets say
50588;it comes in as
50589;10 fields
50590;but ur struct has 5 fields
50591;it will still unmarshal the fields u want tho righ
50592;yeah
50593;as long as the fields are present in the JSON and the types are right
50594;ah so
50595;encoding/json will ignore unspecified fields
50596;like the unspecified
50597;in the struct
50598;if the json has something the struct doesn't it'll just ignore it
50599;so as long as i have to two of the same json return but diff type ill be getting and error where i can just unmarshal it again
50600;using the other type
50601;if i konw the two types coming in
50602;Come on man. You can do better than that üòõ
50603;I've explained how as well
50604;pretty sure my code had no error checking unless I'm misunderstanding something
50605;"```gostrconv.Itoa(k)```:no:```gotype key intconst ( k1 key = iota k2 k3 k4 k5)func (k key) String() string { return [...]string{""1 2 3 4 5""}[k]}func Test(k string) { switch k { case k1.String(): case k2.String(): case k3.String(): case k4.String(): case k5.String(): default: fmt.Println(""something else"") }}```"
50606;:dyeah:
50607;bruh
50608;`return string(int('1') + int(k))`
50609;easy
50610;you can `int()` a rune ?
50611;????
50612;yeah bet
50613;a rune is just i32
50614;shiit
50615;damn
50616;bytes too
50617;like those C people who do `+ A  a'` with their to_upper functions
50618;never seen that
50619;https://stackoverflow.com/a/63306643/5041327
50620;When we develop a package on github for other user like this one: https://github.com/zmb3/spotifyHow the author can test the package with a main file and use the wrapper currently in development on this computer?
50621;i don't understand the question
50622;https://github.com/zmb3/spotify/blob/master/spotify_test.go
50623;they're using unit tests
50624;which is how they test their code
50625;if your question is how do i run this package\'s tests you\'d clone that repository and then run `go test .`
50626;are you asking how package authors test their code ?
50627;then using unit test and usually when you make a package you have a use for it
50628;so first and foremost they use it
50629;and then release it as a standalone because it's gotten big / good enough
50630;@deezy @Karitham Yes i'm wondering how the author test the package. I guess it run unit test with `_test.go` file but how to do the same without test?
50631;"how do you test without running the tests""?"
50632;i mean you could just import the code and use it
50633;if it works it works
50634;if it doesn't work it doesn't
50635;what does that question mean?
50636;test are just normal functions but ran with go test instead of go run
50637;@deezy How to test the code when we are the author and we are creating a package? The question is not How to test the code from this author
50638;write unit tests
50639;write a file in your package named `something_test.go` run `go test`
50640;do the same thing they did ^
50641;https://golang.org/pkg/testing/
50642;@_diamondburned_ why do you say not to use varchar for ids?
50643;because ids are uint64s not strings
50644;uuid and large numbers are more efficient and suitable in every way
50645;your best bet is to store varchar(len(maxuint64))
50646;aside from display
50647;which is
50648;uhh
50649;uuid considered not efficient
50650;Thx I'll check
50651;ah true there's a stronger guarantee on it being unique at least
50652;https://www.percona.com/blog/2019/11/22/uuidsarepopularbutbadforperformanceletsdiscuss/
50653;20 apparently
50654;SERIAL >
50655;imo
50656;serial or snowflake
50657;uuids are ridiculously long
50658;If I use serial wont it try to auto increment
50659;https://play.golang.org/p/1GKFXFvgzQd
50660;oh I was talking about IDs in general not Discord snowflakes
50661;the point is you can still use a UUID
50662;I would use uint64 to store Discord snowflakes
50663;but use an integer as your primary key
50664;<https://github.com/bwmarrin/snowflake>
50665;_whistles innocently._
50666;haha yeah snowflakes exist
50667;<https://godoc.org/github.com/diamondburned/arikawa/discord#Snowflake> üëÄ
50668;my turn
50669;For the go types I'll use int64 and for the psql type bigint
50670;is that good?
50671;pg can do UNSIGNED BIGINT right?
50672;uhh idk
50673;don't think so
50674;:Thonk:
50675;there's no way pgsql doesn't have unsigned lol
50676;it has a json type
50677;im grepping the numeric types and i cant find unsigned
50678;o
50679;its under serial ffs
50680;oh no
50681;but it's
50682;not the same??
50683;but now I have to convert discord strings to int64
50684;bigserial 8 bytes large autoincrementing integer 1 to 9223372036854775807bigint 8 bytes largerange integer 9223372036854775808 to +9223372036854775807
50685;but
50686;why
50687;no tophy
50688;you misunderstand
50689;keep the discord IDs as strings
50690;just don't make those your primary keys
50691;where did that extra byte go
50692;just make the discord IDs extra columns
50693;yeah pgsql doesn't do unsigned
50694;that's
50695;that's kind of dumb tbh
50696;o wait
50697;I see deezy
50698;serial is literally just an autoincrementing int
50699;this sucks
50700;"> It\'s not in the SQL standard so the general urge to implement it is lower.""not in the SQL standard"
50701;I'm fairly certain a JSON type isn't either
50702;but what do I know
50703;ü§®
50704;json type you can sell to companies i guess?
50705;"so like this ```sqlCREATE TABLE IF NOT EXISTS guild ( id SERIAL NOT NULL PRIMARY KEY, guild_id VARCHAR(18) UNIQUE NOT NULL, msg_xp INT NOT NULL, level_msg BOOLEAN NOT NULL, modrole_id VARCHAR(18), muterole_id VARCHAR(18), greet_msg VARCHAR(1000));```"
50706;> uint8> unsigned 64bit integer
50707;8 bytes :^)
50708;do VARCHAR(20)
50709;right
50710;yeah ik it's 8 bytes
50711;kinda cringe though
50712;yeah not a fan
50713;your database wants a primary key for indexing shit
50714;and you can ALSO index extra columns
50715;ah yes i will use bytes in the type name said no one ever
50716;e.g. your discord ids
50717;`[]byte`
50718;although those FK should BIGINT and reference the SERIAL ids of role table right?
50719;lol
50720;modrole and muterole ids that is
50721;honestly
50722;I'd do `guild_id VARCHAR(20) PRIMARY KEY`
50723;why 20 and not 18?
50724;aren't discord snowflakes always 18
50725;better safe than sorry i suppose
50726;probably something to do with time
50727;future proofing for the next milennia or something
50728;lol
50729;because 20 is the maximum number of digits in a uint64
50730;which is the type of discord snowflakes
50731;discord snowflakes aren't always 18
50732;the number gets longer as time goes
50733;o
50734;which is why I dislike storing snowflakes as strings
50735;it's only strings because JS is bad (and consequently JSON)
50736;you mean cus it doesn't let you do int keys?
50737;if you put a largeenough number in JS it loses precisions
50738;js stinkyyyyyyyy
50739;so if the JSON keeps the snowflake as a number eventually JS will screw it up
50740;and everything will blow up spectacularly
50741;i wanna watch the fireworks
50742;same
50743;I'm trying to write a react app in ts without really knowing ts
50744;or react
50745;or js
50746;just write js üòî
50747;that would be a problem yeah
50748;ts is just js with just a bit of safety
50749;well
50750;It somehow runs
50751;err builds
50752;I suppose
50753;which aids development but it doesn't solve the bigint problem
50754;I'm actually writing 3 react apps I suppose
50755;a media player a recipe website and a bot dashboard
50756;gl bud
50757;lol
50758;yeah good luck
50759;I do this a lot
50760;and i wouldn't use react or any js for a recipe website
50761;Well material ui is nice tho
50762;that's just css
50763;so you'd just write a backend in... not js (lol) and then connect it to html?
50764;pretty much yes
50765;well
50766;if it's my personal recipe website I'd do it like a blog w/ hugo
50767;any more and i'd do that
50768;how is go for backend stuff?
50769;almost made for it
50770;better than js
50771;hmm
50772;https://github.com/diamondburned/smolboard
50773;Well I suppose that makes things better
50774;üîå
50775;Because I told the person I'm doing this with I'd have a basic page design by monday (without functionality). And doing react makes it a task and a half.
50776;oh you're doing it for a job?
50777;that was a bad estimate
50778;yea just jank it together asap then
50779;lol
50780;considering you knew you didn't know the tools
50781;Well if it's just gonna be html I can get a basic layout pretty quickly
50782;unless they want it open sourced or sth I personally wouldn't care
50783;it's a friend who had an idea for a site
50784;so not anything super serious
50785;oh aight
50786;lol I thought I would be able to make smolboard in a week
50787;if only I didn't occupy myself with writing tests üôÉ
50788;I thought I'd be writing my bot's actual features in a week
50789;2 months later lol
50790;üòî
50791;it be like that sometimes
50792;like 50 files and and I'm almost there
50793;almost ready to start writing the reaction roles
50794;lol
50795;damn 50 files
50796;maybe
50797;not sure
50798;lemme check
50799;wait not
50800;@deezy When we create unit test there is a good way to test a wrapper api?Testing client methods which request the endpoints ...?
50801;29
50802;thought it was more lol
50803;you can test an external API but I wouldn't recommend doing so
50804;I still do it anyway though
50805;"is there a reason I should do ```sqlCREATE TABLE IF NOT EXISTS guild ( id SERIAL NOT NULL PRIMARY KEY, guild_id VARCHAR(18) UNIQUE NOT NULL, msg_xp INT NOT NULL, level_msg BOOLEAN NOT NULL, modrole_id BIGINT, muterole_id BIGINT, greet_msg VARCHAR(1000));``` instead of ```sqlCREATE TABLE IF NOT EXISTS guild ( id BIGINT NOT NULL PRIMARY KEY, msg_xp INT NOT NULL, level_msg BOOLEAN NOT NULL, modrole_id BIGINT, muterole_id BIGINT, greet_msg VARCHAR(1000)```"
50806;doesnt serial autoinc
50807;like why let the db autoincrement the id instead of using the actual discord snowflake
50808;@_diamondburned_ How to test a wrapper then?
50809;ye it does sentry
50810;if youre supplying the id dont use serial
50811;aggregate for the API's response once and store that
50812;then make the tests unmarshal against those
50813;For example this package use test https://github.com/zmb3/spotify/blob/master/spotify_test.go
50814;@Deleted User is `id` the snowflake here?
50815;fyi snowflakes will overflow int64 in like
50816;year 204x
50817;forgot
50818;lol
50819;I mean
50820;my bot will likely have major changes or be dead by then
50821;lol
50822;that's what people thought in the 20th century
50823;lmao
50824;no reason to implement a ticking time bomb when you don't have to
50825;true
50826;> is id the snowflake here?In the second example yes
50827;> that's what people thought in the 20th centurythis
50828;Whereas in the first it's the `guild_id`
50829;ok but tbh
50830;Discord is a service so it'll probably die
50831;probably...
50832;hopefully...
50833;lol
50834;hopefully
50835;lmao beat me to it
50836;I'm waiting for when we all go back to irc
50837;matrix actually good when
50838;but with discordish clients
50839;that's actually IRCv3 so yeah
50840;but not electron
50841;I'm waiting for when we all go back to horse drawn carriages
50842;I do not want to return to IRC lol
50843;lol
50844;Well I would like p2p but with a nice client. But it's also nice to allow server connections.
50845;yeah that's why I like Matrix
50846;only the protocol itself is weird af
50847;Is discord gonna start charging for servers? Because I've made like 50 by now. Like how are they at all maintaining this lol
50848;I thought Discord's API was sophisticated until I read the Matrix protocol documentations
50849;selling data probably
50850;üò¨
50851;I've never heard of matrix
50852;oh god matrix
50853;Why testing on a local server with custom endpoint and not to a real remote api? https://github.com/google/gogithub/blob/master/github/github_test.go#L60
50854;it says there
50855;a test HTTP server used to provide mock API responses.
50856;Yes but why not to use remote API responses?
50857;because slow and rate limited
50858;Use the inverse question: Why use a remote API response?
50859;And how to provide mock we copy/paste a response and use it in test?
50860;If your code handles an API response you likely know what it should look like
50861;You can generate your own or make a table of sample responses
50862;if you want it to be correct then yeah just aggregate all the requests and use the json in the test
50863;sometimes you don't want to test with real data
50864;yeah testing fail
50865;someone managed to find some out of bounds bug from my markdown parser by fuzzing the input
50866;pretty impressive
50867;So I can create a folder testdata with some json file containing the response?
50868;yeah sure
50869;iirc Go used to have a copy of Huckleberry Finn in the testdata folder
50870;So wait did we decide what I should use for my primary keys? I feel like I should autoinc them and then have a column for the discord snowflakes. But I'm still not sure which type is right for future proofing.
50871;I'd use VARCHAR(20)
50872;if discordgo
50873;because lazy >
50874;won't that overflow when int64 does?
50875;nah just keep it as string then
50876;so should I have the snowflakes as the primary key or do autoinc and then snowflake in a unique col?
50877;again VARCHAR(20) PRIMARY KEY
50878;so snowflake primary key
50879;that's what I would do w/ discordgo
50880;ah ok
50881;bruh
50882;I'm running queries in my pgcli that work fine
50883;and they did work with go two seconds ago
50884;https://groups.google.com/g/golangdev/c/OcW0ATRS4oM?pli=1 @zephyrtronium
50885;in encoding/json does anyone knows how the marshaler interface avoids calling itself when marshal is being called in the marshaler itself?
50886;it doesnt
50887;iirc
50888;you can infinitely recurse yes
50889;i've done it
50890;yeah
50891;it happens when your encoding the same obj
50892;im trying to avoid the circular reference and then overflow
50893;anyone here have experience w/ gorm? having a weird bug w/ many2many crud
50894;I understand why this doesn't exist and how I should do it but I don't know why it doesn't exist is there a reason which I'm simply not seeing?
50895;:thonk:
50896;that should work
50897;Nah it doesnt afaik
50898;@zephyrtronium ideas?
50899;No because it's comparing a bool `0 < len()` with an int
50900;oh nevermind
50901;yeah
50902;that's just how go works
50903;` if 0 < 1 && 1 < 2 {`
50904;From a parsing and compiler standpoint it's easier to just handle it from a binop perspective
50905;But this would be a really cool feature
50906;Check github if there was a feature req
50907;Thinking about how I'd implement the logic makes it very obvious why it doesn't exist tbh still a cool idea.
50908;yeah it's doable
50909;at the cost of compiler complexity
50910;which is like line one of go's mission statement
50911;simple fast compiler
50912;there was a proposal and afaik it hasn't been rejected
50913;ah nope it's gone as ||hck||: https://github.com/golang/go/issues/33694
50914;What's the best of having a struct with a field that can be one of three other structs?
50915;an interface basically
50916;any other option costs you compile time type safety
50917;embed?
50918;wdym
50919;Hi
50920;"noticing something weird decoding JSON ```type rawData struct { success bool Players []Player}...// GetPlayersData fetches players data from understatfunc GetPlayersData() ([]Player error) { res err := http.PostForm(baseURL url.Values{ league"": {""EPL""}, season"": {""2020""}}) if err != nil || res.StatusCode != 200 { log.Fatalln(err) } defer res.Body.Close() var data rawResponse if err := json.NewDecoder(res.Body).Decode(&data); err != nil { return nil err } fmt.Printf(""players: %v data) return data.Key.Players nil}```"
50921;```type rawData struct { success bool players []Player // players not capitalized}```gives me an empty array
50922;yes the json package can't interact with lowercased struct members
50923;woah
50924;gotta be exported ( capitalized ) if you want `encoding/json` to populate those members
50925;any reason for that?
50926;cause that's how go works
50927;lowercase names cannot be accessed from outside of that package
50928;`encoding/json` is an outside package
50929;https://tour.golang.org/basics/3
50930;OK that makes sense
50931;go is good
50932;everything can be derived from like the first 30 pages of the tour
50933;based
50934;on the tour
50935;@Karitham nice one
50936;@Str≈ìm finna giving sqlc a shot
50937;fuck it hit me that pgsql doesn't have an unsigned int type
50938;that's cringe
50939;seems like I can't build sqlc
50940;"```‚Äï‚ù§‚Äï‚ñ∂ GO111MODULE=off go get github.com/kyleconroy/sqlc/cmd/sqlc# github.com/kyleconroy/sqlc/internal/engine/dolphin../../../../.go/src/github.com/kyleconroy/sqlc/internal/engine/dolphin/convert.go:343:14: n.Offset undefined (type ""github.com/pingcap/parser/ast"".FuncCallExpr has no field or method Offset)exit status 2```"
50941;doe anybody have any ideas? or do I need go 1.15?
50942;am on 1.14
50943;:thonk:
50944;seems like this is HEAD master
50945;"here\'s output with go.mod: ```go: found github.com/kyleconroy/sqlc/cmd/sqlc in github.com/kyleconroy/sqlc v1.5.0# github.com/kyleconroy/sqlc/internal/engine/dolphin.go/pkg/mod/github.com/kyleconroy/sqlc@v1.5.0/internal/engine/dolphin/convert.go:197:13: n.Schema undefined (type ""github.com/pingcap/parser/ast"".FuncCallExpr has no field or method Schema).go/pkg/mod/github.com/kyleconroy/sqlc@v1.5.0/internal/engine/dolphin/convert.go:216:14: n.Offset undefined (type ""github.com/pingcap/parser/ast"".FuncCallExpr has no field or method Offset)```"
50946;usually when stuff like this happens i rm my go.mod
50947;and try again
50948;just to be safe
50949;or delete the require() block w/e
50950;that's funny
50951;shouldn't happen w/ an external thing
50952;idk dags are hard
50953;sometimes they get goofed up
50954;can't get sqlc to workk
50955;rip
50956;try it in a docker container
50957;just for giggles
50958;can someone show me a key value example in this langauge as I have some questions and stuff about it
50959;Like a map or like a kv store?
50960;both
50961;what is a map exactly
50962;https://tour.golang.org/moretypes/20
50963;It‚Äôs just key:value mapping
50964;the difference?
50965;Of what
50966;kv store refers to algorithms and data structures to store keys and values
50967;hm
50968;can I see examples of both?
50969;If I have a goroutine running while doing other things and then those other things finish is that goroutine still a goroutine or does it like become a normal function (?)
50970;This is probably a stupid question
50971;a goroutine isn't a type of function it's a thing that runs a function
50972;if you're asking whether the goroutine continues executing after the goroutine running `main()` finishes then no the program ends once main returns
50973;all functions are goroutines really
50974;main is a goroutine
50975;:amicablethink:
50976;Hey I have a bunch of _test.go files in a folder. I want all the files to be executed in order one by one from top to bottom. How do I do it?
50977;Will appreciate if any one could throw some light of this.
50978;generally speaking if the ordering of your tests matters your tests are probably wrong
50979;as far as i'm aware there's no easy sanctioned way to do this
50980;because it's pretty seriously wrong
50981;I mean just make a single tests that calls your functions in the set order you want them to be called?
50982;You can set cpu to one I think it's just cpu 1 on the command line but idk if they execute top to bottom
50983;files aren't really sorted
50984;you can do TestMain
50985;or init()
50986;Ohh okay.I was supposed to do API testing in go. Since I have a hierarchy of tables in my database I need to fill up data in all the parent tables first and then fill up data in the child tables in a test database which does not contain an data. So for this purpose I would have to do a sequential testing.
50987;@koen will try the way you suggested...
50988;I just open and close a fresh db each test
50989;and use the t.Cleanup fn to close
50990;^
50991;Tests should be independent
50992;is this not the right way of implementing a middleware?
50993;its supposed to just check if the user has a session set in the cookie. and based on that give access to the route
50994;"and i have a handler```gorouter.HandleFunc(""/secret handler.AuthHandler(handler.SecretRoute))```"
50995;using gorilla mux and gorilla sessions
50996;so if i wanted to pass the `session` variable to the `hndlr` function how would i do that?
50997;is there a way of doing this? I am using a flag `search` and I want to search for my name in the struct value but I can't say that name equals bool so I'm not sure how I could do this
50998;"here\'s code btw```gopackage mainimport ( flag"" fmt"" strings"")var search stringfunc init() { flag.StringVar(&search search  Search for name"") flag.Parse()}type A struct { name string}func Person() A { p := A{} p.name = David"" return &p}// Find name even if case sensitive. E.g. DaViD dAvId and david would all return David// If name = text in flag return namefunc Find() A { if (Person().name) == strings.EqualFold(search search) { fmt.Println(search) } return nil}func main() { Find()}```"
50999;strings.Equalfold take the two strings to compare
51000;So you input string from your struct and your flag
51001;`if strings.EqualFold(Person().name,search) {}`
51002;You should probably export your name field too
51003;In th A struct
51004;@Deleted User
51005;that kind of works yeah thanks
51006;When I'm trying to write a new file using `ioutil.WriteFile(filename content 0644)` I'm getting `Error: open filename: invalid argument`? Why is this happening?
51007;https://golang.org/src/io/ioutil/ioutil.go?s=2579:2647#L69
51008;It should work
51009;Is filename a string
51010;its in bytes converted to string
51011;> Is filename a string@Karitham yes
51012;Windows?
51013;nope
51014;mac
51015;Does it contain some illegal characters
51016;> Does it contain some illegal characters@misterturtle nop
51017;the string is document.pdf
51018;If the filename is ok could potentially be the mode at the end I guess
51019;Have you tried just printing everything
51020;You input
51021;yes it is okay
51022;Do you have a file there
51023;And do you have permissions on it
51024;Well one of those things is not ok
51025;Maybe the permissions you pass can't truncate an existing file
51026;no i dont have a file there
51027;Is the filename sanitized
51028;nope
51029;how to do it
51030;Have you tried just passing it without any variables to make sure it works ?
51031;yes
51032;it works with any variables
51033;Then youre passing in a bad filename
51034;Whats the filename being passed
51035;Does it contain illegal characters
51036;document.pdf
51037;Prove to me that that is it exactly
51038;"`ioutil.WriteFile(""test.pdf"",[]byte(""yeet""),0644)`"
51039;Open a debugger and show me the string in the debugger
51040;Reduce the number of possible errors
51041;By stripping it to the bare minimum
51042;oh shit i dont have a debugger
51043;And build up from there
51044;Do you use vscode
51045;nope
51046;Print out the filename in your error ?
51047;atom
51048;Yea can you pls print the filename
51049;I want to see exactly what it is
51050;yeah it printed correctly
51051;Also print the bytes of the filename
51052;ok ill do it
51053;"Use `fmt.Printf(""%#+v\\t%T filename filename)`"
51054;ok
51055;And bytes
51056;https://pastebin.com/MG8uAqG3
51057;How tf do you have all those\\x00
51058;So not document.pdf
51059;Yea this isnt what you said it is...
51060;i changed it to go.sum
51061;Why
51062;And as you can very clearly see you have illegal characters
51063;A lot of them
51064;what do i do
51065;Rule 1 in triage only ever change one thing at a time
51066;Sanitize your input
51067;That's why I told you to strip the variables
51068;How do you have so many...
51069;Where tf do you input the data
51070;iam reading it from a tcp connection
51071;:facepalm:
51072;Please learn to check your assumptions properly
51073;You couldve very easily seen that your input contains invalid filename characters
51074;oh
51075;ill do it
51076;thanks everyone
51077;> Does it contain some illegal charactersThat's the second question you've been asked
51078;You should always check the most obvious things
51079;ohh
51080;You live you learn
51081;:NanaBongo:
51082;Could I simply create a small express server that acts as like... just an auth server? A server that simply issues secure user sessions (authenticates them) and stores the session in say Redis? And then use that server to interact with the rest of my application?
51083;"I have never built an app like this. I\'m kind of liking the idea of building pieces of it in small little services"". I guess it\'s like the whole microservice architecture""? I have no experience with that; this is just some idea I came up with so it may have nothing to do with microservices"
51084;I think actually I can figure it out in Golang. I'll still use Redis and store the cookie in Redis
51085;Hi guys I am new to golang and have a question about casting.I would like to cast an array []interface{} to a struct array but I do not know how to do that.Can anybody of you give me a hint?
51086;Copy to new array@maku
51087;@Str≈ìm really this is the only way?
51088;[]interface{} means you're doing something wrong 11/10 times
51089;I get the result from a generic mongodb handler (which I write myself) But it would be really annoying to duplicate the logic over and over....
51090;Would that be the way to handle it in golang world? (to not abstract away )
51091;Make a new slice of your type with capacity len(that slice) iterate through that slice do x.(yourType) append to new slice
51092;I have a generic handler for an elasticsearch read all index and then wrap it from the API route handler
51093;I don't have to use []interface{} directly however because the es package returns a json.RawMessage
51094;But basically it is already common to work with [] interface {}?. Because I don\'t know of any other way to build general functionality. (but i\'m also a go newbie)...
51095;You cant yet
51096;No generics yet
51097;yeah I know (sad...)
51098;but hopefully soon...
51099;i figured out a way to get sessions working with redis üòÑ
51100;Now I just have to keep my implementation clean...
51101;Is there any way I could make it so when I test strings `Ry√π` == `Ryu` ?
51102;I think you might have to like map characters yourself
51103;Yeah that's what I thought
51104;:HarukoGrumpy:
51105;I'm sure there's like some function that someone has written that does it efficiently
51106;there might be something in the `unicode` package but I'm not sure
51107;you basically want to map accented characters to plain latin characters
51108;https://pkg.go.dev/golang.org/x/text/collate
51109;This is what you want @Karitham
51110;Wow that's cool
51111;Go never ceases to amaze me with the amount of packages made by the actual core team
51112;https://play.golang.org/p/vticXSpkp
51113;I really hate with `golint` vscode how to disable these warnings?
51114;change it in your vscode settings
51115;None
51116;okay
51117;its under the go options
51118;Comment them reee
51119;I have written the first bit of my circular buffer the write bit!
51120;Although in doing this off the back of roughly understanding the concept of a circular buffer
51121;I'd quite like to go in blind and see how close (or far) I get to a decent implementation
51122;My Question is about docker and go web app. I set go app in e.g container A i confuse where to put my postgres database either in container A or it must be on seprate container
51123;Generally it's one service per container
51124;you can do either
51125;good is seprate container for app and database and if it is microservice then seprate container for each service
51126;You can but it's not best practices as far as docker goes
51127;am i right?
51128;Your app and your database would be considered separate services. Ideally they have their own container each. As deezy said though if you wanted to theres nothing stopping you putting them into one container
51129;yo! as it turns out you can't use broadcast with TCP/IP as tcp is unicast... but! you can use broadcast in UDP.... Does anyone have some reading material or tutorial on how to use UDP in golang
51130;is this depend on app type or size ?
51131;Nope just purely down to how you want to do it
51132;multiple container have more cost then single container ?
51133;Not really containers are extremely lightweight
51134;What is a vertex
51135;ok
51136;@Deleted User ive worked with udp but don't have any resources specifically just googlefu
51137;/ docs
51138;i have found some material.. but i am not sure if i wanna use UDP.. cuz i already have a custom protocol built upon TCP which makes it super easy for me to send stuff... i don't wanna use raw UDP in my code
51139;Isn't this just for service discovery to then interact with the service on tcp?
51140;Don't really know that much about what yoire doing
51141;yeah... i am thinking on creating something like a nudger... that simply waits for the UDP signal then calls the actual program
51142;this will isolate the udp code to only that little nudger thingy
51143;> Isn't this just for service discovery to then interact with the service on tcp?@misterturtle and yeah exactly
51144;I mean you could use one of the predefined service discovery protocols like SSDP
51145;Theres a go package for it already
51146;aye imma look into it
51147;thanks mate
51148;bruh... is func main() not required anymore?
51149;what
51150;btw how do you send code on discord?
51151;```some thing```
51152;ahh got it
51153;"```import time""aliveTick := time.Tick(300  time.Second)for { select { case <aliveTick: ad.Alive() }}```"
51154;\\`\\`\\`Go// your code here\\`\\`\\`
51155;you can't have a top level for loop
51156;and you can't use `:=` for top level assignments
51157;this is example code from a library i found
51158;the code looks all weird
51159;https://github.com/koron/gossdp
51160;strange
51161;I guess they\'re just showing the relevant parts
51162;because those examples don't function by themselves
51163;then why have `import` in the same example?
51164;¬Ø\\_(„ÉÑ)_/¬Ø
51165;i guess whatever.. i am not gonna use it
51166;btw one thing that i don't like in go is how the `select` works... it needs some priority mechanism
51167;it's random
51168;well undetermined order
51169;if data is available on two channels at the same time it just picks one at random...
51170;yup
51171;that makes it nondeterministic
51172;otherwise certain options would get preferential treatment
51173;yes
51174;concurrency is nondeterministic
51175;it is intentionally nondeterministic
51176;but i wanna give preferential treatment
51177;and is in fact the only thing specified in the language to be nondeterministic
51178;why would you
51179;like ```goselect {case <done: // give it prioritycase <command: // not this one}```
51180;You typically don't need to worry about it for that functionality
51181;once done is closed it is much more likely that the done channel is ready vs the other
51182;but if you _really_ need that sort of behavior
51183;or in my case```goselect {case recv := <collector: // give this prioritycase faucet < produceCommand(): // not this one}```
51184;```Goselect {case <done:default: select { case <command default: }}```
51185;but that's really not the idea of select
51186;You're trying to synchronize concurrent concepts
51187;which is not what select is for
51188;The way I look at it (which is likely to be wrong so bear that in mind) is go routines run a function and functions usually do one thing
51189;Or ideally they should do one thing well
51190;but sometimes they gotta do more than one thing.. to honor don\'t share state
51191;The issue you are facing is that you want to use something to synchronize concurrency which is not designed to synchronize concurrency
51192;You don't use a hammer when you need to screw something in
51193;i know.. but the other option is as bad as me trying to use the wrong tool
51194;what other option are you referring to
51195;this will require some explanation.. but i wanna refactor it anyways so imma share it lol
51196;just a sec..
51197;If you want to prefer reads from channel A over channel B: Select read on A with default case. If A is not read then you can read from B
51198;That is how you perform if statements with channels
51199;"```gofor { writeBlocked := false readBlocked := false for !writeBlocked { comm err := prepareCommand(q collector) if err != nil { if err == goque.ErrEmpty { if tickets == 0 { fmt.Println(""[+] Closing the workFaucet"") fmt.Println(""[?] The queue is empty and no active tickets available"") close(faucet) return } goto readerBlock } fmt.Println(""[] The queue failed to operate correctly"") fmt.Println(""[?] err) if tickets != 0 { fmt.Println(""[!] Executing emergency collection mechanism"") collectRemaining(tickets collector) } } select { case faucet < comm: writeBlocked = false tickets++ default: writeBlocked = true a := comm.Args.(eigen.FetchArgs) _ _ = q.EnqueueString(a.Target) } } if tickets == 0 && q.Length() != 0 { comm _ := prepareCommand(q collector) // [Todo] handle error faucet < comm tickets++ } readerBlock: for !readBlocked && tickets != 0 { select { case result := <collector: acceptResult(q result) tickets readBlocked = false default: readBlocked = true } } if tickets != 0 && q.Length() == 0 { result := <collector acceptResult(q result) tickets } }}```"
51200;look at this beautiful abomination i have created XD
51201;but in all my time of my career I have never had to prefer a read from one channel over another
51202;> If you want to prefer reads from channel A over channel B: Select read on A with default case. If A is not read then you can read from B@Doad which i have done.. and is ugly af
51203;I have a feeling you're thinking about your problem the wrong way
51204;well first thing i did was how a golang person would structure it.. but the shared state tickets almost always get desynchronized (even tho i wrapped it in a mutex)...
51205;after not being able to make it work the nice way.. i butchered this code last night.. and finally it works .. awful yeah so i wanna make it better while keeping the essence
51206;following this code is very difficult
51207;TwT that's why it needs refactoring
51208;share memory by communicating don\'t communicate by sharing memory
51209;^
51210;this is more than just saying to use channels it's an entire approach to designing algorithms
51211;rather than having a tickets counter just pass around the actual work items
51212;> this is more than just saying to use channels it's an entire approach to designing algorithms@zephyrtronium the problem is that in some cases work items aren't available but they will available sometime soon
51213;i don't see why that's a problem
51214;wait hear me out.. my initial approach was to keep two goroutines for reading and writing respectively and block reads if items weren't available... but they both required to share the queue
51215;XY problem what are you trying to accomplish? Not your attempted solution
51216;aye
51217;there's a work queue and some worker nodes.. i need to send work to workers without caring how many workers there are. Each worker does its job upon receiving the work then it produces more work (about x10). I need to receive the response from the worker and push them into the queue (after removing the redundant ones).
51218;That's a fairly simple workflow
51219;?go pipelines
51220;Go Concurrency Patterns: Pipelines and cancellation <https://blog.golang.org/pipelines>  technololigy
51221;yeah... i took a month just designing the workflow and the components
51222;the nodes are different computers on the network
51223;A few channels and a wait group is all that's needed
51224;Read that article
51225;ahh this whole thing needs to happen in a loop... can't use workGroup.. cuz i don't wanna wait for everyone to finish.. i need to keep passing work and keep receiving results
51226;This article covers 95% of worker pipeline architecture
51227;Yeah that can be done easily
51228;learn from it and apply it to your problem
51229;Im putting thr twins to bed in 20 mins I have a snippet of this exact thing
51230;Based on what I did for an http spider that feeds more requests back into the queue for the workers to go fetch and parse. Each request could generate a tonne more requests
51231;If that's similar enough I'll dig it out
51232;Hi
51233;Question lets say you have a flag (kind of like an event) that does two seperate things (but is in some Ticker loop)
51234;The flag is sort of event driven
51235;Is it better to have two seperate go functions parked doing it's own thing or just change the flag at whim and do an if/else at every iteration of the loop?
51236;share memory by communicating don\'t communicate by sharing memory
51237;So in my case no? Any suggestions on creating a event driven system that changes it's behavior when a flag is changed?
51238;(and runs on a time ticker)
51239;that is a good quote gonna save it
51240;@jtim maybe show a code sample of what you're doing?
51241;It is one of the the proverbs from Rob Pike
51242;https://goproverbs.github.io/
51243;Something like: https://pastebin.com/v8WfdySQ
51244;Lets say theres two ways the program can handle each tick
51245;> If that's similar enough I'll dig it out@misterturtle i would love that
51246;@Deleted User Is this useful? https://play.golang.org/p/zpCcCn3O40X I'd be interested to know what actual nonhobbiest gophers say as well
51247;And you want to be able to change the behavior of the tick midway
51248;> @Deleted User Is this useful? https://play.golang.org/p/zpCcCn3O40X I'd be interested to know what actual nonhobbiest gophers say as well@misterturtle the number of thread is not know before hand
51249;It only starts with 3 items of work going into channel
51250;That doesn't really make a difference I don't think
51251;lmao sorry didn't realized i need to scroll (i be like where's the closing brackets)
51252;ignore where it says URL I quickly adapted it for the playground
51253;I think line 54 and 55 need swappign round
51254;ahh got it so you keep adding to the work group...
51255;yeee
51256;that way it can handle an unknown amoutn of work with more being fed in from the jobs being processed and still understand correctly when it's finished.
51257;i think wg keeps a ticket internally (i read the implementation cuz i was bored) .. so that takes away my `tickets`
51258;@jtim what are you actually trying to do this for
51259;It would help to be able to work in a concrete example rather than this
51260;wait... thats like sharing the `ticket` with added safety (by sharing the workgroup)
51261;You shouldn‚Äôt do it like this but it would be easier for me to tell why and offer a better solution if we knew what you were trying to do
51262;@Madxmike is that referring to me or jtim?
51263;Jtim
51264;oh ok cool well @Deleted User you shouldn't do it exactly like me either because it's still possible to break it apparently ```fatal error: all goroutines are asleep  deadlock!```
51265;lmao.. i remember hittin deadlocks in my initial implementation but just worse cuz they were across multiple computers XD
51266;@Madxmike Essentially I need to schedule packets periodically that are sent with different behaviors
51267;For example one mode would be to send a packet sequentially to a queue of IPs
51268;Another mode is to multicast each packet to all the IPs in a list
51269;Whichever mode is set it will be sent in an interval which is what the ticker interrupt is for
51270;I want to be able to change the modes by command
51271;Looking to see if theres an idiomatic way to approach t his
51272;The mode switching is likely infrequent relative to the rate of the timer
51273;(Since it's only when the user wants to make the switch)
51274;define the behavior with an interface
51275;and then you can just switch out the value
51276;Do you mean by what each mode is doing?
51277;SOmething more like
51278;func Send(addr net.IP packet[]byte)
51279;vs
51280;func SendToMulti(list []net.IP packet []byte)
51281;Where one mode sends a packet to 1 ip and the other would just send a packet to multiple ips
51282;They are both sent in regular intervals
51283;Or they would both be sent in regular intervals there can only be one mode enabled at any point of time
51284;Not a Golang question but a PostgreSQL question if someone can help me ?
51285;Sorry if it's a bit confusing lol
51286;@Yewolf #offtopic for postgres
51287;Ty ^^
51288;@Deleted User it was deadlocking because the channel was full
51289;> This article covers 95% of worker pipeline architecture@Doad bruh this doesn\'t touches my problem at all...in both the example cases there\'s one big list of data to be processed.. for each element a either a goroutine is spun up or a the element is passed to a channel that some goroutine reads from .... then the results are fanned in.which is core concept of pipelines (i did learned some tricks tho i need use it somewhere else).my problem is that each read from input channel (which requires interacting with the queue) results in writes back to input channel(which requires interaction with queue).btw the queue is disk based.. basically item persists (so i can\'t leave them hanging in the channel buffers)
51290;> @Deleted User it was deadlocking because the channel was full@misterturtle so a filled channel leads to deadlock here.. which means now we gotta figure out how large the channel buffer must be
51291;no
51292;except for extremely specific algorithms channel buffer size is only a performance optimization
51293;Your workers can write to the queue
51294;> reads from the input channel causing writes to the input channelthat would be a problem yes
51295;you don't want loops/cycles
51296;you want a oneway flow of data
51297;you can have workers launch a new goroutine to send the new data into the channel
51298;which > Your workers can write to the queue@Doad that requires sharing the queue
51299;that way you won't get deadlocks
51300;channels are intended to be shared
51301;they wouldn't be useful if you didn't share them üôÉ
51302;@zephyrtronium that deadlock is in reference to the code he shared
51303;> they wouldn't be useful if you didn't share them üôÉ@deezy lol
51304;yeah.. but sharing is not caring in concurrency
51305;its a nightmare
51306;"> share memory by communicating don\'t communicate by sharing memory""but technically you still have to share the channel to do the communication in the first place"
51307;no channels are how you share in concurrency
51308;they're always synchronized
51309;btw this is the first ever concurrent program i have ever written lol
51310;the key is not to think of them as data structures or memory they're devices used for communication
51311;channels are the communication method you don't worry about sharing memory with them
51312;> but technically you still have to share the channel to do the communication in the first place@superloach i dont wanna touch that subject
51313;too far off my problem
51314;Can interfaces have nonfunction fields?
51315;no
51316;@Vrganj no
51317;no
51318;lol
51319;why?
51320;because they can't
51321;because interfaces describe methods a type has
51322;by design
51323;if you don't wanna share channels you're not gonna get far with them üòÖ @Deleted User
51324;well that sucks
51325;> if you don't wanna share channels you're not gonna get far with them üòÖ @Deleted User@superloach who said anything about not sharing channels?
51326;so should I have a function to get the value?
51327;i wonder whether there's been a proposal to allow interfaces to specify fields :cirThink:
51328;> @superloach i dont wanna touch that subject@Deleted User ü§∑\u200d‚ôÄÔ∏è
51329;interfaces describe behavior not implementation
51330;java getter flashbacks
51331;avoid getters/setters there's probably a better way to do it
51332;> why?@Vrganj interfaces define what actions can be performed on something.. nothing about the data it stores (which is a good thing).. so no properties
51333;well the field is id so probably id()
51334;but if you have to use `Foo`/`SetFoo`
51335;yeah it's immutable
51336;ah then just use the name yeah
51337;unexport the actual field to avoid name conflicts
51338;why do you wanna get a value from an interface? use a struct instead if you wanna get values
51339;structs are for storing and getting data
51340;say for instance you wanted an interface for anything with a unique id
51341;because any other language has this behavior and I assumed go would have it aswell
51342;in almost every case that's just gonna be a field
51343;@Vrganj go is one of the few languages I know with an interface system and interfaces only describe methods
51344;the only language i know that allows fields on interfaces is java and that's a very recent thing
51345;> say for instance you wanted an interface for anything with a unique id@superloach thats a use case for struct `struct{ Id }`
51346;no it's not? @Deleted User
51347;if I want to be able to pass anything with an ID to a function a struct like that is not gonna work
51348;i am not catching you explain?
51349;Couldn't the interface just define a method for returning the data? Isnt that the idea of interfaces?
51350;`func dosomething(on StructWithID)` not gon work?
51351;```gofunc Foo(v IDer) { println(v.ID())}type IDer interface { ID() string}```
51352;@Deleted User that only works with one specific struct type
51353;Cant have a field directly just expose a method for returning it from whatever implements the interface
51354;not an interface
51355;this allows any type with an `ID` method to be passed to `Foo`
51356;is this acceptable? i mean it looks like a weird hack to me
51357;oh hey there has indeed been a proposal for fields on interfaces by one of the go team members: https://github.com/golang/go/issues/23796
51358;which almost immediately opens with I\'m not personally in favor of this proposal.
51359;lmao .. thats me XD
51360;how many of you are pro at go
51361;am not
51362;started 3 months back
51363;I started 3 days ago
51364;it quickly became my favorite language
51365;im still getting the hang of it
51366;> how many of you are pro at go@K R I T being pro at something just means you get paid to do it... Doesn't mean you are any good.
51367;from pro he implied who is good at it
51368;no.I mean pro who can explain things well enough
51369;everyone's cool tho
51370;A lot of people here can answer questions
51371;if you haven't done the tour you should
51372;?go tour
51373;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
51374;and aside from that if you have any specific questions feel free to ask
51375;there are a lot of very knowledgeable people here
51376;like in map you can pass a second argument while using the make function but that doesn't change anything in the output
51377;what is it for
51378;the second argument specifies an initial capacity to reserve when creating the map
51379;it's purely a performance thing with no semantic impact
51380;something like capacity in arrays
51381;?
51382;`capacity` is the size of the underlying buffer the `size` is a different thing
51383;close but not exactly because slice capacity can make a semantic difference e.g. you can reslice up to the cap
51384;> there are a lot of very knowledgeable people here@zephyrtronium theres also me :)
51385;> `capacity` is the size of the underlying buffer the `size` is a different thing@Deleted User i worded it real bad.. TwT
51386;there is no reslicing of maps and the other ways that slice capacity can matter also don't apply to maps
51387;> @zephyrtronium theres also me :)@misterturtle lol yeah and there's diamond
51388;it's purely a performance thing and one you can only use when you know in advance how many items you'll add to the map
51389;i've used it rarely in my own code
51390;you probably wanna read the tour first tho it explains it in great detail
51391;so as a beginner I don't need it
51392;(i did look through the tour for slides relevant to this and didn't see any)
51393;Hi just wondering when you guys think it‚Äôs a good idea to use caching in an api? All routes? Most intensive? Database calls? Don‚Äôt know if there are any best practices?
51394;I can stop worrying about that then
51395;there is literally never a need for the second argument to `make` for map types
51396;wait.. i remember reading about the second argument of `make`
51397;Hi everyone!
51398;@zephyrtronium gotcha
51399;> wait.. i remember reading about the second argument of `make`@Deleted User probably w.r.t. slices there's a slide about that
51400;probably also channels
51401;i think there's a blog post on the `make` ...
51402;lemme look for it
51403;probably also true
51404;and also just to clearify a struct is just like a dict in Python that has a bit of fancy declaration syntax?
51405;a struct is more like an object in python
51406;A map is more like a dict
51407;maps are exactly like python dicts except that go maps are typesafe
51408;https://golang.org/pkg/builtin/#make
51409;"i.e. you can\'t accidentally assign something to a key of `""3""` in a `map[int]int`"
51410;yeah I realized that about map
51411;> Map: An empty map is allocated with enough space to hold the> specified number of elements. The size may be omitted in which case> a small starting size is allocated.
51412;so giving the second argument will reduce the number of reallocations... and ofc that's a performance thing.. which no one really stumbles upon. so fuck it.
51413;I mean no one is a bit of a strong word
51414;hyperbole .. that was poem btw XD
51415;for programming language discord there are too many anime girl PFP üòØ
51416;bruh.. mine is not a girl
51417;what
51418;get trapped lol
51419;geez thats boy in bra or something
51420;lmao yeah.. ain't really a bra ig.. i dunno about women's clothing
51421;ah I remember anime used to be dbz naruto,beyblade
51422;its going kinda off topic.. you might wanna go there
51423;ohh right. sorry about that wont happen again
51424;btw my favorite feature of go is type safety XD (coming from a js background)
51425;type safety as in go doesn't allow floatSixtyFour addition with floatThirtyTwo
51426;> so giving the second argument will reduce the number of reallocations... and ofc that's a performance thing.. which no one really stumbles upon. so fuck it.@Deleted User that mattered a lot to me the last couple days... I'm trying to write a `wc` replacement that out performs the original (which I have succeeded in) memory allocation of buffer slices is a big deal...
51427;is there any way to list all the variables inside a go program and change their values based on input?
51428;kinda like
51429;there's a cli app that sets local variable names to the value you specify
51430;so if I say a = 2 then it\'ll be set like that inside the go program
51431;assuming you don't mean a debugger no you'd have to make that work yourself
51432;I'm trying to update a variable but the name of the variable is unknown
51433;is there any way to modify the variable's value?
51434;there is <https://golang.org/pkg/expvar/> but i'm not sure that lets you do what you want
51435;what variable?
51436;I'm making a program which lets you create live variables between servers so they'll share variables in real time
51437;oh
51438;lol
51439;pointers
51440;...a map?
51441;Create your own type system imo map it logically with the server
51442;when do i declare a var out of func main() like i saw struct was declared outside
51443;Do you mean separate physical servers? Or just separate services?
51444;Var decalred outside func main are globals
51445;Use them as such
51446;like let and var in js
51447;Yeah
51448;there is no let/var distinction in Go
51449;You should declare variables as close to where they are used as possible though... Don't just declare all your variables globally
51450;Golang is lexically scoped so they are visible only within the scope and scopes within
51451;I declare all my functions variable at the top
51452;Only declare them globally if they need to be global.
51453;so they are like `let` in js
51454;I feel it's easier to understand once you know which var is what
51455;> I declare all my functions variable at the top@Karitham no prob
51456;Altho that means yer not using func type or anon funcs
51457;in a general context at least
51458;never used func types tho
51459;I don't find anon funcs that useful either
51460;the option is nice
51461;i am using func types to make sub commands
51462;None
51463;ok so why cant i don sumn like that
51464;I use anon functions a lot for short lived goroutines
51465;You can't define a function twice
51466;The identifiers must be unique
51467;so whatever i want to do i have to do it inside that one func
51468;Or define a new function and call that
51469;Typing on a phone is slow lol
51470;how do define a new func
51471;?go tour
51472;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
51473;You might want to do the tour
51474;Time to do the tour
51475;It explains everything you need to know to get started with Go
51476;Page four of the tour explains functions for example
51477;<https://tour.golang.org/basics/4>
51478;@Dusty.P im just tasting all the popular language  im not seriously coding since i dont have a pc and im only 17 2021 ill get a pc and do it the correct way. so im just learning on phone
51479;bruh.. i am 18.. have been writing code since 15
51480;Weird flex
51481;The tour is still the best way to get a taste of the language
51482;well its not the age its the place
51483;place?
51484;Plus you can write and run code directly in the browser
51485;india is still not i coding zone
51486;.. i am indian
51487;wtf
51488;XD
51489;same
51490;where do u live
51491;meerut
51492;Lets not get into that in #golang
51493;that's a pokemon
51494;One of my coworkers is in India and another in Bangladesh...
51495;ok
51496;> that's a pokemon@Karitham i hope so XD
51497;There are definately a lot of coders in India
51498;btw i have made a ds.. can i get a patent on it?
51499;woops wrong place
51500;most python tutorials are made by people from india
51501;I've never seen a python tutorial not by an indian
51502;#offtopic Please
51503;oh sorry mr cursedlinkname
51504;i mean there isnt really no one in my family or anywhere near bhayander the place i used to live talk about coding. i wouldnt know about it if i didnt search how to make LUA scripts to hack game
51505;I am entirely self taught...
51506;me too... XD joined uni last year tho
51507;#offtopic
51508;I can only redirect conversations so much before I have to start deleting stuff üòõ
51509;temporary slow mode seems like a good solution
51510;makes people unable to interact for 30 seconds so they understand and move
51511;aye aye we got it lol XD
51512;"why does it reproduce 438 instead of 0666?```go o := 0666 fmt.Printf(""%d\ o)```"
51513;base 10
51514;try `%o` instead @converge
51515;I know.. but why doest it change my value..?
51516;change??
51517;I mean I have a number 0666 or 666 sounds like Go is interpreting something here
51518;0666 is octal not decimal base
51519;> I mean I have a number 0666 or 666 sounds like Go is interpreting something hereim sorry WHAT?
51520;Specifically: a leading 0 means the number is interpreted as octal.
51521;0666 != 666
51522;`0x` < hex`0b` < bin`0` < octal
51523;"whats the use case for creating a new context for an http.Request?```goreq = req.WithContext(context.WithValue(req.Context(),""key"",value)``` i foudn this on a stackoverflow answer but didnt quite get the use case"
51524;does this add a new value to the requests context?
51525;got it! thanks for the explanation
51526;@user<sherpa{} yep!
51527;For an outgoing request the most pertinent usecase for a context is probably a timeout/canceling. For an incoming request (say in a middleware) you can set values that you can then consume in a later handler/middleware.
51528;humm how would it work for an outgoing request??
51529;"What do you mean how would it work""?"
51530;like an example?
51531;use the `req.Context().Done()` after the timeout has passed?
51532;Timeouts and cancels are separate. If you'd like to cancel you can use something like `context.WithCancel` which will give you back a function to call which will cancel the context.
51533;If at some point later you decide you'd like to cancel the request before it completes you have a way to do it.
51534;ahh i see.
51535;how do you best determine what to set runtime.gomaxprocs to?
51536;you don't
51537;the runtime does it for you
51538;it's best not to mess with it
51539;if you aren't actually sure what to do with any part of `runtime` don't
51540;oof touching the `runtime` feels scary to me
51541;i have only ever used it to figure out how many cpu(logical ofc) we got
51542;oh alright
51543;I heard someone say that it's set to the number of cores by default and that tuning it to the right value can speed things up sometimes
51544;ok but have you observed any actual performance issues
51545;nah just wanted to know more about it just in case I did in the future
51546;this would not be the way to pursue increasing performance
51547;gotcha
51548;>This call will go away when the scheduler improves.
51549;epic
51550;that's a good comment
51551;I have found the secret juice
51552;`runtime.FuncForPC`
51553;returns a Func by a given address
51554;oof
51555;burn it in fire
51556;why is it public?
51557;oof
51558;No let me have it!
51559;No idea
51560;that's totally unsafe... does it returns an error too?
51561;returns nil when it can't be found
51562;ahh then its fine
51563;but by using `readELF` I found the address of an unexported function
51564;lets see if I can get the juice
51565;oof
51566;use reflect to check its type too
51567;sounds interesting
51568;what devilry are you up to
51569;It has a `Name()` function so I know I have the correction function
51570;Doing some more investigation for my upcoming article
51571;dirty
51572;article lol
51573;I have made something so dirty I am writing about it to share it with the world
51574;it seems all mysterious tbh.. i am curious
51575;htai
51576;üëü ü§ñ
51577;gophersenpai
51578;be gentle it's my first time
51579;lmao
51580;> returns a Func by a given address@Sgt_Tailor that sounds... useful üïµÔ∏è\u200d‚ôÇÔ∏è
51581;hey I'm new to go and I have a question that I can't seem to find answer for  is it possible to make something packageprivate? (internal in kotlin default modifier in java)I want to expose something but only to the current package I don't want it to be visible in other packages
51582;Anything that starts with a lower case letter is package private `testVariable`Anything that starts with an upper case letter is exported and available outside the package `TestVariable`
51583;oh crap I thought that lowercase is private (limited to current file)
51584;thanks for that ‚ù§Ô∏è
51585;There isn't a concept of a file like in Java/Kotlin. In those languages each file is a class. In Go each file is part of a package files don't have a scope of their own.
51586;``` f := runtime.FuncForPC(6145200) fmt.Println(f.Name())```
51587;`vendor/golang.org/x/net/http/httpguts.ValidHeaderFieldValue`
51588;LADIES AND GENTLEMEN
51589;we got m
51590;each file does technically have a scope but the only things that go in file scope are imports
51591;https://stackoverflow.com/questions/33351387/howtouseinternalpackages
51592;the vendored http functions
51593;> each file does technically have a scope but the only things that go in file scope are imports@zephyrtronium true
51594;> <https://stackoverflow.com/questions/33351387/howtouseinternalpackages>@evandocarmo tldr of why I use `internal` is for stuff that is specific to the current project and shouldn't be imported by any other project. The Go compiler does not allow importing things from `internal` in other packages.
51595;(s/compiler/tool)
51596;the compiler itself doesn't care where things are only the go tool does
51597;> ```> f := runtime.FuncForPC(6145200)> fmt.Println(f.Name())> ```@Sgt_Tailor so how can this be applied?
51598;It is only really useful to get some basic information about the function. Using some unsafe fuckery you might be able to actually call the function
51599;I am just using it to demonstrate that a certain function exists
51600;Then apply some more trickery to do some nasty things
51601;CursedLinkname isn\'t just a name
51602;is `6145200` the memory address?
51603;Yeah. Extracted that from the binary using `readElf`
51604;Interesting
51605;Are there more libraries like https://github.com/govgo/robotgo or AutoHotkey? (mouse and keyboard input simulation finding something on screen and more)
51606;@Sgt_Tailor can we do something to figure out its signature?
51607;Haven't gone that far yet
51608;Oh wait its in the core lib. We can check the sig from the implementation
51609;Trying to find it programmatically would be better tho
51610;Ow I know exactly what this particular function is
51611;Ahh really?
51612;They probably wrote it lol
51613;They? You mean cursed?
51614;Ye
51615;Nah this is vendored code from net/http
51616;Cause you can only get memory locations from the currenlty running program unless you bypass OS security...
51617;Or that lol
51618;Uhm no
51619;The locations of these functions is defined in the ELF file
51620;so using `readelf` you can extract all symbols
51621;But using `runtime.FuncForPC(ptr)` will only return something from the calling program
51622;Won't it?
51623;You can't just go about accessing random parts of memory the OS won't let you. It has to be within the calling program
51624;Yeah but for this binary that is always the same
51625;Right
51626;p sure you can get the int thingy from a function pointer
51627;Yeah you can
51628;reflect.Value(function).Pointer()
51629;Apart from supplying args what's the simplest way to provide a config I thought about JSON but that seems a bit bloated anyone have ideas?
51630;Nothing too complicated a few toggles numbers colours
51631;JSON YAML TOML custom file format etc.
51632;TOML is pretty nice
51633;What do people on Linux think about ini?
51634;:blobshrug: I prefer YAML personally
51635;YAML is alright but padding can be a tiny bit tedious
51636;Indentation I should say
51637;Thanks for mentioning TOML I forgot about it should work fine.
51638;What's wrong with JSON?
51639;is there any way of getting the name of a variable passed into a function as a parameter?
51640;"Having to `""""` the key names commas brackets"
51641;"```func something(someVar string) { fmt.Println(/ Print the name of the variable /)}var d string = wer""something(d)//d```"
51642;what do you mean by getting the name?
51643;you want it to print someVar?
51644;kinda like that
51645;so I get the name of the variable passed into the function
51646;pretty sure that's not possible
51647;:batgopher:
51648;you can get the type and the name of the field of a struct through reflect but i dont think you can get the name of the var like that
51649;there's also caller and stack in the runtime pkg
51650;not sure why you would want this
51651;if I have a local package that I want to push to GOPATH so that another local package can import it how would i go about doing that
51652;someone suggested symlinks but
51653;> not sure why you would want this@Str≈ìm I'm building a package which shares variables between servers in realtime and I want it to automatically infer variables without declaration in both servers
51654;but I'm pretty sure that's not possible
51655;so I'm just programming the realtime sharing
51656;use a map as i told you earlier already
51657;yeah
51658;that way you have a kv mapping
51659;I'm doing that
51660;doenst seem like you are if this is the Q youre asking
51661;yep but I wanted to create a function which adds a variable to the shared map and automatically gets the name of the variable you passed
51662;hi !
51663;so I wouldn't have to put the name of the variable each time I wanted to share a variable
51664;but that'll have to be what I do
51665;thats why you pass two variables...
51666;the key and the value
51667;yeah
51668;I didn't want to use the key
51669;I wanted to automatically use the name of the variable
51670;Why?
51671;ease of use
51672;no real reason
51673;but I'll have to do it that way
51674;At the cost of clarity and functionality?
51675;kinda
51676;so if you wanted to create a shared variable you'd have to do something like this
51677;someone knows how can i restore an the original unsafe pointer after its has passed has ((unsafe.Pointer)(ptr) ?
51678;Also I'm not sure if you answered this before or not... Shared between what? different servers? different services on the same server? different parts of the same service?
51679;"```var someString string = shared string""updateString = sharer.WatchString(&someString)```"
51680;those variables will be shared between servers
51681;Like different physical servers?
51682;kinda
51683;they'll be different physical servers
51684;Why aren't you using something like redis?
51685;but they'll just be normal http servers
51686;bc this doesn't need a database it's just about making sure some variables are shared between some servers
51687;That is exactly what redis is for
51688;oh lol
51689;it isn't a database it is an in memory key value store
51690;I thought redis was a nosql db
51691;Specifically for optimized sharing of variables between servers/services
51692;lol
51693;thanks
51694;:robpike:
51695;nothing's stopping you from using it as one though :^)
51696;Yo I want to format a `[]string...` using fmt.Sprintf how should I go about it ?
51697;is there a parameter or should I strings.Join ?
51698;you'd use join
51699;in the simple case
51700;build it by hand otherwise
51701;wrap it in a function
51702;depends on what you need
51703;THE FILESYSTEM NEVER HURT ANYONE
51704;:boomer:
51705;maps and bolt/badger is good for in memory or on disk and then you have your industry standard options for having something network accessible
51706;sharable between multiple clients
51707;consul etcd redis memcache
51708;nothing surprising
51709;2k20
51710;i use bbolt
51711;yeah i like bbolt
51712;it was the first thing i tried
51713;¬Ø\\_(„ÉÑ)_/¬Ø
51714;and it was good enough
51715;> Yo I want to format a `[]string...` using fmt.Sprintf how should I go about it ?It would depend on the format you want... If you want all the strings combined separated by something consistent then join... If you actually want to see the representation of the string slice then you could use %#v
51716;bbolt has buckets
51717;"Using BurntSushi/toml```golangtype Config struct { test string}// ...var ( cfg Config)// ...meta err := toml.DecodeFile(""valid path &cfg)if err != nil { // ...}fmt.Println(cfg.test) // empty```TOML file is ```tomltest = works""```Have been messing with this for ages and it refuses to work. The path is valid `meta.IsDefined(""test"")` comes up true and `meta.Type(""test"")` is string."
51718;`test` > `Test`
51719;In order to be accessed by reflection a field must be exported
51720;Oh wow
51721;Thanks
51722;I had no idea case made a difference
51723;I‚Äôm not sure if the TOML decoder is casesensitive but if it is you can specify `toml:‚Äùtest‚Äù` as a struct tag
51724;Alright I'll fiddle around thanks again.
51725;you should use https://github.com/pelletier/gotoml btw
51726;BurntSushi's Go libraries are all deprecated
51727;Why
51728;because he only does Rust libs now
51729;Is there a way to convert between two structs by omitting the extra fields if the first struct has all the same fields as the second plus a few extra
51730;Just assign the fields of struct B from struct A that you want
51731;So I'd have to just manually assign each field
51732;Yup
51733;No other way?
51734;Are they structs that you wrote?
51735;Yep
51736;You could use some reflection fuckery but you'd likely write more code that way
51737;They are different types after all
51738;Then I would use composition...
51739;Ok I'll just stick with manually assigning ty
51740;+1 embedded
51741;> Then I would use composition...@Dusty.P wait what's that
51742;```gotype s1 struct { foo string bar string}type s2 struct { s1 baz int}```
51743;So you have access to foo and bar from s2?
51744;That will allow you to use all the fields from `s1` in `s2` and if you want to convert from `s2` to `s1` (remove the extra field) you can just do something like `s = s2.s1`
51745;Or do you have to do s2.s1.(whatever)
51746;Oh ok
51747;No you can do `s2.foo`
51748;Awesome
51749;yeah
51750;Ok thank you!
51751;how do i change my gopath and stuff on windows
51752;What for
51753;How does once deal with race conditions? I have 4 go API's running for load balancing and all listening to firebase documents for updates and if the API's see a certain status code change it sends an email out and updates the document to say an email has already been sent. Would it be better to create a master node where only one of the nodes does the emailing so race conditions don't happen or would a document fetch and waiting for it to check if our email_was_sent var was set? Though I feel that even with fetching the document again might still have a race condition.
51754;A master node is generally the easiest but not the only solution
51755;wouldn't a message queue help
51756;:Thonk:
51757;Potentially yes
51758;Although again youd need a master node afaik
51759;It probably depends on how quickly you need it to be processed as well as how fault tollerant you can be
51760;Could make use of distributed locks
51761;Its just email notifications for like order placed paid for etc... so timing wouldn't be to big of an issue even 1 minute delay is probably acceptable
51762;Perhaps create a timer that is randomized between the servers to run the request between 160 seconds?
51763;If you are using firebase couldn't you create a function in firebase that adds the message to a fifo queue that is then read by the nodes?
51764;I feel thats the lazy route out though
51765;> If you are using firebase couldn't you create a function in firebase that adds the message to a fifo queue that is then read by the nodes?@Dusty.P and if 2 nodes read 1 message and send 2 emails?
51766;fifo queues generally don't let you read it twice
51767;ü§£
51768;lol
51769;Ya makes sense
51770;Message queue could help here then yes
51771;The main reason I want to stay away from master node is so each one can be independent from eachother for HA
51772;I would maybe setup a trigger on the database itself that adds the message to a queue somewhere that the nodes can read
51773;Are you using GCP? or a standalone firebase?
51774;Quick question: is it recommended to use panic for something that shouldn't go wrong inside a handlerfunc?
51775;Something like hashing a password
51776;Just the firebase SDK so im not sure if it uses the GCS or not
51777;Depends is there a better way to handle it?
51778;Each case might be different
51779;I would only use a panic if I want the application to exit with a traceback...
51780;I don't think the frontend needs to know what specifically went wrong other than a 500 code but I don't know if I should use log.Fatal or panic
51781;Ok
51782;If this is for an api then I wouldn't use either
51783;Just handle the error and keep running
51784;Oh yeah just send a 500 code
51785;My brain doesn't work very well at 2 am
51786;Thanks
51787;Not log.Fatalm
51788;That exists the program
51789;A panic can be caught log.Fataln cant
51790;Ok
51791;Is panic caught at the function level?
51792;A panic can be recovered anywhere in the call stack
51793;it there a way to know if a variable changed value ?
51794;Im assuming you can't use addition operator in HTML go templates?
51795;@Ian you can set the variable explicitly through a function
51796;@Ian nope
51797;yeah you need a setter
51798;And that function can set the variable and tell you that it's been set
51799;has anyone dealt with this error before? ```http: panic serving [::1]:62350: Error 1044: Access denied for user admin'@'% to database```
51800;accessing this remote db isn't a problem via terminal or any of the microservices running in java or php. could it be an issue with the sql driver?
51801;Gotta give more context than just the error message
51802;Code that's causing it etc
51803;sure
51804;@trini8ed you need to make a fn iirc
51805;1044 is an incorrect privilege error in MySQL
51806;Wouldn't have anything to do with the driver
51807;"```gopackage mainimport (""fmt"" database/sql"" log"" net/http"" _""encoding/json"" _""github.com/gosqldriver/mysql"" github.com/gorilla/mux"" )type Vendor struct { id string `json:""id""` lat float32 `json:""lat""` lng float32 `json:""lng""` distance float32 `json:""distance""`}type Vendors []Vendorfunc getNearestRestaurants(w http.ResponseWriter r http.Request) { db err := sql.Open(""mysql admin:<password>@tcp(<ip_address>:3306)/<db>)"") if err != nil { panic(err.Error()) } defer db.Close() rows err := db.Query(""SELECT  FROM vendor"") if err != nil { panic (err.Error()) } cols err := rows.Columns() if err != nil { fmt.Println(""Failed to get columns err) } rawResult := make([][]byte len(cols)) result := make([]string len(cols)) dest := make([]interface{} len(cols)) for i _ := range rawResult { dest[i] = &rawResult[i] } for rows.Next() {  err = rows.Scan(dest...) if err != nil { panic(err.Error()) }  for i raw := range rawResult { if raw == nil { result[i] = \\\\N  } else { result[i] = string(raw) } } fmt.Printf(""%#v\ result) }}func handleRequests() { myRouter := mux.NewRouter().StrictSlash(true) myRouter.HandleFunc(""/getNearestRestaurants getNearestRestaurants).Methods(""GET"") log.Fatal(http.ListenAndServe("":8081 myRouter))}func main() { handleRequests();}```"
51808;I see but is it because of tcp?
51809;Which panic is getting hit
51810;"```go db err := sql.Open(""mysql admin:<password>@tcp(<ip_address>:3306)/<db>)"") if err != nil { panic(err.Error()) }```"
51811;this one
51812;obfuscated the pass for an example
51813;You have an extra `)` at the end of your connection string
51814;oh jeez
51815;that was it thank you
51816;walk of shame
51817;lol happens
51818;Sometimes you just need a second set of eyes
51819;for sure thanks for letting me borrow yours üòÖ üëç
51820;Man I love how easy go HTML templates are I missed it so much...
51821;Less than 10 minutes of getting the variables in there its working perfectly lmao
51822;:micdrop:
51823;not sure if this is the right place but in test code is it a bad practice to just not check database errors A lot of my test code has a lot of setup database wise and it adds a lot of code to check all the errors
51824;If I have a pointer to an item in an array is there a safe way to get the one before it in the array?
51825;@Slick Nick depends if you're actually testing the database setup
51826;But generally you should handle the errors
51827;its more of I want to test the systems behavior when the database has this stuff it in but makes sense it doesn't hurt to handle them
51828;Does mocking the code is really matters?
51829;it is bad practice to not check errors in general
51830;What do you guys use for authentication?
51831;I can't really find any sort of decent tutorial at all about auth.
51832;I\'m trying to just build an authentication/identity server. Something simple that I can later expand upon later. I am thinking JWT would be necessary since sessions would cause a problem if im using a sort of microservice architecture to build out my system
51833;I just am really new to the Go community and all so I don't know where to look for resources. Documentation? I'm okay with that if the answer is to just read the docs. Sometimes it's helpful to have a bit of extra help but if I just have to read docs and thats it then it is what it is
51834;Have you done authentication before?
51835;I don't think there are many fully fledged Auth libraries for golang
51836;https://github.com/gochi/jwtauth
51837;@jawad not sure what you mean by fully fledged but I think that\'s kinda incorrect
51838;it's more that there won't be an all in one solution
51839;like the gochi thing above it doesn't create a database with user tables and ACLs and roles and stuff
51840;most htings in go are gonna be designed to plugnplay with whatever else you've set up
51841;Yes I've worked with auth
51842;Cool. Got it.
51843;"Thanks guys I can handle it. I love Go; it's so simple and has a really great community"
51844;"``` for posX <= 100; posX ++{ ```"
51845;anyone knows why i get an error with this?
51846;you check google/etc. and read about for loops?
51847;I'm not sure but that's the first thing I would do
51848;yes
51849;but i thought this will work
51850;where is your initialization?
51851;that block of code isn't gonna run
51852;"i solved it doing ```for posX = posX; posX <= 100; posX ++{ ``` the for loop is inside a function that takes as an argument posX"
51853;try something like:```goposX := 0for posX <= 100 { // logic here}```
51854;oh so the variable is shadowed
51855;err... idk i'd have to see it. Glad you got it working
51856;how do you paste go code with the colors?
51857;same way as most markdown editors apparently (I didn't know if it was gonna work)
51858;put go (no quotes) right after the initial triple backticks
51859;Same way you would do it for a github readme
51860;```golangfunc main() { fmt.Println('hello')}```
51861;thanks
51862;go or golang works üôÇ np
51863;i didnt know either until i just tried it lol
51864;Is this the correct way of receiving from channel until it\'s closed?```gofor data := range myChannel { // do something with data?}```It currently works but I\'m curious to see if there is an another way or not.
51865;For html templates whats the keyword to do something like this
51866;{{ if !myVar }}
51867;Where the variable is a bool
51868;@Pinecone there are other ways but that specific one is intentionally part of the language so if it works feel free to use it
51869;"the other way is to use the twoargument form of the receive operator `data ok := <myChannel`; if `ok` is false then the channel is closed"
51870;that syntax is primarily used in `select` statements where there are multiple channels to care about
51871;Since I want to work with one channel until it's closes I'm doing the right thing. Thanks @zephyrtronium
51872;"I'm wondering why this is returning empty json```govendors = append(vendors v) //this array is populated correctlyif err := json.NewEncoder(w).Encode(vendors); err != nil { // however this sends an array of empty json objects  log.Println(err) }```"
51873;a bit of context ```vendors = append(vendors v)``` is within the ```for rows.Next()``` loop
51874;Ok figured it out var names within my struct needed to start with uppercase letters
51875;None
51876;So why the length still appears the same
51877;Even after deleting georgia
51878;Because you aren't actually deleting the key...
51879;When you add it you add `\Georgia` but when you delete it and try to access it afterwards you use `Georgia` Notice a difference?
51880;Sooo i have to use the ```\```
51881;The \\\ is part of the key \\\Georgia in that map so yes
51882;Yeah i used it and it worked. Ty
51883;Best way to get nested json data?
51884;"I wrote a file server ```gofs := http.FileServer(http.Dir("".""))http.ListenAndServe("":8080"",fs)```But when i download the a.exe file other downloads are waiting.How can i solve this problem?"
51885;im new to Go but probably using a goroutinue so it's non blocking i/o
51886;@MrCozy yes u think well and may be concurrency but not
51887;This isn't explicitly go related but does anyone have a recommendation designing for a fileupload API where you send additional data along with the file? Most of the other API is JSON so it would be ideal to do that but it seems like then you couldn't do the uploaded file unless it was included as a part of the JSON blob... which isn't ideal... I guess there's multipart but then I need to drop JSON for one API endpoint
51888;Is there a better solution I'm just missing?
51889;@belak i've recently wrote something like that for a client in php for uploading images but it does use a json blob. it decodes the base64 image data (a part of the json object) server side to store in the custom cdn
51890;it's pretty solid and quick. i guess it depends on what type of files you're working with
51891;There's a potential for these files to be pretty large
51892;So that unfortunately isn't ideal
51893;multipart is fine
51894;or even direct post
51895;so you can stream directly to disk
51896;(instead of parsing a huge json blob in memory)
51897;If you use direct post (I assume you mean reading from r.Body directly) how would you get additional params? Would they have to be passed as GET params?
51898;could be header or even query params yes
51899;Hm
51900;I guess that would probably be easiest
51901;multipart is streamable but not sure if it reads everything in memory first ü§î
51902;how can i get user input with spaces in golang?
51903;os.Stdin.Read ü§∑\u200d‚ôÇÔ∏è
51904;"@stdio maybe you can help out```gom := make(map[string]interface{})fmt.Println(m[""someField""][""Some other field I can\'t access""])```"
51905;"so this works for just ```fmt.Println(m[""someField""]```"
51906;but how can I get the nested data?
51907;you need to cast stuff
51908;"```gom[""someField""].(map[string]interface{})[""Some other field""]```"
51909;so it would be better using strong typed structs most of the times
51910;@stdio It looks like the multipart form reads from memory if it's small enough otherwise from temp files
51911;I see thanks for the info
51912;"Hi guys Can anyone please tell me the importance of `cmd.Wait()` at the end of function? Program works even without that. ```gopackage mainimport ( bufio"" fmt"" os/exec"")func main() { c := for i in `seq 1 10`; do echo $i; sleep 1 ; done"" cmd := exec.Command(""bash c c) output _ := cmd.StdoutPipe() err := cmd.Start() if err != nil { } scanner := bufio.NewScanner(output) for scanner.Scan() { i := scanner.Text() fmt.Println(i) } cmd.Wait()}```I am using something like this in my project and the command process a lot of data before printing so `bufio` scanner has to wait very long before printing even the first line so I am getting this error:```gogoroutine 14601 [IO wait]:internal/poll.runtime_pollWait(0x7f01419f3d48 0x72 0xffffffffffffffff) /usr/lib/go1.13/src/runtime/netpoll.go:184 +0x55internal/poll.(pollDesc).wait(0xc0001f0bb8 0x72 0x1001 0x1000 0xffffffffffffffff) /usr/lib/go1.13/src/internal/poll/fd_poll_runtime.go:87 +0x45internal/poll.(pollDesc).waitRead(...) /usr/lib/go1.13/src/internal/poll/fd_poll_runtime.go:92internal/poll.(FD).Read(0xc0001f0ba0 0xc0004af000 0x1000 0x1000 0x0 0x0 0x0) /usr/lib/go1.13/src/internal/poll/fd_unix.go:169 +0x1cfos.(File).read(...) /usr/lib/go1.13/src/os/file_unix.go:259os.(File).Read(0xc000096110 0xc0004af000 0x1000 0x1000 0x456d40 0xc000499c08 0x49500f) /usr/lib/go1.13/src/os/file.go:116 +0x71bufio.(Scanner).Scan(0xc000499d68 0x7dd200) /usr/lib/go1.13/src/bufio/scan.go:213 +0xa4```How to solve this problem?"
51913;You should avoid using `interface{}` where possible...
51914;so how would this work with a struct?
51915;would the struct have to be nested in some form?
51916;trying to wrap my head around this
51917;It depends on what you are trying to do...
51918;^ are you dealing with unmarshaling jsons?
51919;yes
51920;@stdio I think you'd also need to call `defer r.MultipartForm.RemoveAll()` but that requirement isn't documented anywhere
51921;Unless that's automatically handled by net/http
51922;with direct body well it would be direct..
51923;unless you have to many info to upload or multiple files
51924;@AaravMer I believe you can just cmd.Stdout = os.Stdout
51925;Right but then params need to be via query params or headers which seems weird for an API
51926;if you really want to read the output you cam write it to a buffer
51927;Anyway thanks for pointing me in the right direction
51928;@stdio ```http: panic serving [::1]:60631: interface conversion: interface {} is []interface {} not map[string]interface {}``` this is what I'm getting with using the interface map
51929;yeah probably an array in json
51930;not an object
51931;> @AaravMer I believe you can just cmd.Stdout = os.Stdout@stdio I am doing something with the output data in the program.
51932;"```json{ // map[string]interface{} field1"": data // interface{} field2"": [1,2,3] // []interface{} field3"": {""sub"":""data""} // map[string]interface{}}```"
51933;has anybody used https://github.com/dghubble/gologin ?
51934;this library doesn't have an Issues tab
51935;I'm using Twitter and GitHub and neither are wrking
51936;twitter
51937;github
51938;i need this for a hackathon so i'm kinda lost
51939;> Hi guys Can anyone please tell me the importance of cmd.Wait() at the end of function? Program works even without that. `cmd.Wait()` waits for the command to complete as well as finish writing/reading sdtin stdout and stderr
51940;gonna try github.com/danilopolani/gocialite
51941;getting just either of them working would be great
51942;golang provides native oauth stuff ü§î
51943;i just want something super abstracted so i don't have to write lots of code
51944;Still working on that hackathon?
51945;yeah
51946;mostly by myself now
51947;oof
51948;<https://github.com/golang/oauth2>
51949;yeah i saw that
51950;also twitter is oauth1 (?)
51951;not sure
51952;How long is it? wasn't like 12 hours ago you started asking questions about sql?
51953;it started like Friday afternoon PDT
51954;ends at 7AM Sunday PDT
51955;it is now 12:33AM Sunday PDT
51956;Yeah I'm an hour behind you
51957;Well an hour behind PDT
51958;Are you trying to use the request token multiple times? a 401 error on oauth1 is a reject_token error
51959;I'm not sure all I have is the consumer key and secret
51960;Usually from trying to use the request_token instead of the access_token
51961;The first call using the request_token should generate an access token that you use for all subsiquent requests
51962;that sounds lowerlevel than what my code actually has so i'll have to use a lowerlevel library as well
51963;porbably
51964;Also make sure your callback url is exact with port number path and http/https
51965;oh man this package naem is awful
51966;mine is `http://localhost:42069/api/oauth/twitter/callback`
51967;:Facepalm:
51968;why
51969;How is your mux setup to handle that path?
51970;"```govar cfg = oauth1.Config{}func init() { cfg.ConsumerKey = dotenv.Getenv(""TWITTER_CONSUMER_KEY"") if cfg.ConsumerKey ==  { log.Fatalln(""Missing $TWITTER_CONSUMER_KEY"") } cfg.ConsumerSecret = dotenv.Getenv(""TWITTER_CONSUMER_SECRET"") if cfg.ConsumerSecret ==  { log.Fatalln(""Missing $TWITTER_CONSUMER_SECRET"") } // TODO: improve url := addr.HTTP() url.Path += /oauth/twitter/callback"" cfg.CallbackURL = url.String() cfg.Endpoint = twitterauth.AuthorizeEndpoint}func Mount() http.Handler { r := chi.NewMux() r.Mount(""/login twitter.LoginHandler(&cfg http.HandlerFunc(onError))) r.Mount(""/callback twitter.CallbackHandler( &cfg, http.HandlerFunc(issueSession), http.HandlerFunc(onError), )) return r}```"
51971;"`import github.com/dghubble/oauth1""` for oauth1"
51972;"`import twitterauth github.com/dghubble/oauth1/twitter""` for twitter"
51973;"`url.Path += /oauth/twitter/callback""` != `r.Mount(""/callback twitter.CallbackHandler(`"
51974;nested
51975;https://github.com/diamondburned/facechat/blob/main/backend/http/routes/oauth/twitter/twitter.go
51976;<https://github.com/diamondburned/facechat/blob/main/backend/http/routes/oauth/oauth.go>
51977;<https://github.com/diamondburned/facechat/blob/main/backend/http/http.go>
51978;<https://github.com/diamondburned/facechat/blob/main/main.go>
51979;the route has to be correct
51980;it's correct all the way up to /api/oauth/twitter/login
51981;ok using gocialite rn
51982;that's funny
51983;url param has a redirect_url
51984;huh
51985;did i register a wrong github application
51986;nah gologin is just awful
51987;Anyone ever use https://github.com/didip/tollbooth ?
51988;btw @_diamondburned_ I am almost positive twitter supports oauth2 not just oauth1
51989;"> I wrote a file server > ```go> fs := http.FileServer(http.Dir("".""))> http.ListenAndServe("":8080"",fs)> ```> But when i download the a.exe file other downloads are waiting.How can i solve this problem?@sades @_diamondburned_ do u help?"
51990;@Dusty.P i want to cry
51991;i don't think i can continue doing this
51992;i haven't taken a break in like
51993;i odn't know
51994;man how do people do this
51995;I hate CSRF with a passion
51996;Take a break... Get a couple hours sleep you will do better after a break
51997;by the time i have a couple hours of sleep hhe compoetiton oul've alreayd
51998;sorry hold on
51999;the competition would've already been over
52000;yeah thisi s why i can't
52001;i just can't
52002;maybe next time when there's more ppl helping me
52003;Oh you only have like 5 more hours...
52004;oh god 5?
52005;aaaaaaaaaaaaaaaaa
52006;imma try w/ a debugger as my last hope
52007;if not it's time i crash an dburn
52008;You said it ends at 7am PDT right? Well it is 1:26am PDT now so 5 hours 34 minutes
52009;ohhhh wtf
52010;i added a print and things work now
52011;???????????????
52012;i actually have no idea if things are working
52013;oh they are
52014;i'm just dumb
52015;lack of sleep will do that to you üòõ
52016;agree 100%
52017;can't be helped
52018;i actually rarely ever pull something this late
52019;What all do you have left to do?
52020;a lot actually
52021;i'm planning to make basically a chat client w/ rooms and permissions and oauth accounts
52022;i'm not even done w/ oauth yet
52023;Did you get the db done earlier when you were asking about it?
52024;yeah
52025;db is like 95% done w/ some tests covered
52026;js + oauth just really burned me out
52027;you know a while ago
52028;i found out that my Session getters were returning Account and not Session
52029;though they both share .UserID
52030;how funny is that
52031;lol
52032;js always burns me out real quick...
52033;I usually can't do more than 2030 minutes of JS before having to quit or break my keyboard lol
52034;same tbh
52035;i'm really trying to pus hthrough
52036;I don't even know what's going on aymore
52037;"`name: <nil>""`"
52038;"The api is `fmt.Sprintf(""%v nil)` somewhere"
52039;Probably the name you are getting back from github is empty so it is `nil` so when you are sending it to the frontend it is serializing that into `<nil>` for you
52040;@Dusty.P hey how do i set up google compiler in termux
52041;google compiler?
52042;Go compiler
52043;Auto correct
52044;iirc it's just `pkg install golang`
52045;or `apt install golang`
52046;Ok lemme try
52047;If you haven't done anything with it yet I would suggest doing```apt updateapt upgradeapt install golang```
52048;None
52049;Its doing this
52050;> If you haven't done anything with it yet I would suggest doing> ```> apt update> apt upgrade> apt install golang> ```@Dusty.P too late i already did pkg install golang
52051;Ok that's fine
52052;If i stop this or this doesn't work  termux wont fk up my phone right ?
52053;No unless you have root access the worst thing that termux can do is mess itself up and maybe delete some shared files... But no it won't mess your phone up.
52054;Great
52055;None
52056;Its doing this now
52057;yep
52058;That's normal
52059;None
52060;What do i do now
52061;Run `go version` to see what version you have
52062;1.13.3 android/arm
52063;its now installed
52064;youre good to go
52065;I would run `pkg upgrade` to upgrade all your packages...
52066;It will probably take a little while
52067;But you should end up with go version `1.15.2` at least that is what I have on my phone
52068;Pkg upgrade would do that ?
52069;`pkg upgrade` will update pkg to the latest repos and upgrade all of the packages that you have installed.
52070;Since this is the first time you will have run it it might take a little while
52071;The bundle of packages you get when you install the app is a little old
52072;Gotcha
52073;None
52074;@Dusty.P that actually amkes sense
52075;given how the uSer struct has a mpa[string]interface{} for the raw api
52076;which is awful
52077;Yeah...
52078;Ok so how do create a file there type a program and run it
52079;Do you know how to use `vim`?
52080;That is strange that you didn't have any updates...
52081;@_diamondburned_ are you in a challenge to lose as much of your sanity as possible? :D
52082;I know nothing lol
52083;Oh your os is 32 bit that might be why... Either way you just need to use a text editor and make a go file...
52084;> I know nothing lol@K R I T do you know how to program in go?
52085;a lot of people like `nano` I prefer `vim`
52086;None
52087;Hiw do i save it
52088;escape :wq
52089;Ctrl + x
52090;`CTRL + x`
52091;then I think it is `o`
52092;then `enter` iirc
52093;It exited
52094;I think its y
52095;maybe
52096;Bro
52097;I haven't used nano in forever lol
52098;ctrl + o
52099;Ones say x another one y
52100;@misterturtle pretty much
52101;Me neither lol only when default installs dont have vim
52102;First thing I do is install vim if it doesn't already have it lol
52103;@K R I T if you saved that then you should be able to `go run hello.go`
52104;I saved it i think cuz everytime i enter ```nano hello.go``` the same thing pops up
52105;Yeah you should be good to run it then
52106;Nothing's happening
52107;None
52108;just wait
52109;it is still compiling
52110;Ty @Dusty.P @panaginip
52111;np have fun `go`ing üôÇ
52112;I missed the . next to fmt
52113;Ah
52114;Do you guys know a fix for?```ld: warning: object file (/var/folders/wh/2xcdh61x6g5br90bg4h57hmr0000gn/T/golink509161986/000044.o) was built for newer macOS version (10.16) than being linked (10.15.6)``` When building?
52115;i have no idea what yer trying to do but it obvious that your compiler and linker has a mismatch in version
52116;add some context please what are you trying to do? and how are you doing it?
52117;... and somebody tell me how the fuck do i use UDP multicast in the `net` package
52118;I upgrade mac os I think it was the command line tools built a project ive been working for a while and get a multitude of errors similar to above
52119;Still runs fine
52120;"How to avoid race condition in the count variable while keeping everything scoped to the function only?```go package mainimport ( fmt"" math"" sync"")func main() { var count float64 = 0 wg := sync.WaitGroup{} wg.Add(1) go func() { wg.Done() count += getSQRT(float64(25)) }() wg.Add(1) go func() { wg.Done() count += getSQRT(float64(64)) }() wg.Wait() fmt.Println(count)}func getSQRT(n float64) float64{ return math.Sqrt(n)}```Here is result of `go run race main.go`:```go==================WARNING: DATA RACERead at 0x00c0000160a8 by goroutine 8: main.main.func2() /tmp/main.go:22 +0x54Previous write at 0x00c0000160a8 by goroutine 7: main.main.func1() /tmp/main.go:16 +0x74Goroutine 8 (running) created at: main.main() /tmp/main.go:20 +0x122Goroutine 7 (finished) created at: main.main() /tmp/main.go:14 +0xdf====================================WARNING: DATA RACERead at 0x00c0000160a8 by main goroutine: main.main() /tmp/main.go:26 +0x13ePrevious write at 0x00c0000160a8 by goroutine 7: main.main.func1() /tmp/main.go:16 +0x74Goroutine 7 (finished) created at: main.main() /tmp/main.go:14 +0xdf==================13Found 2 data race(s)exit status 66```"
52121;Use a lock on the count variable
52122;"@Dusty.P like this?```gopackage mainimport ( fmt"" math"" sync"")func main() { rwm := sync.RWMutex{} var count float64 = 0 wg := sync.WaitGroup{} wg.Add(1) go func() { wg.Done() c := getSQRT(float64(25)) rwm.Lock() count += c rwm.Unlock() }() wg.Add(1) go func() { wg.Done() c := getSQRT(float64(64)) rwm.Lock() count += c rwm.Unlock() }() wg.Wait() rwm.Lock() fmt.Println(count) rwm.Unlock()}func getSQRT(n float64) float64{ return math.Sqrt(n)}```"
52123;That looks almost right. You need to defer the `wg.Done()` calls and you don't need the locks after the `wg.Wait()` anything that would be writing to it has already finished by that point...
52124;Ohh I forgot to defer `wg.Done()` thats why I was getting data race at `fmt.Println(count)` too. Thanks for that.
52125;Use a normal mux instead of the rw one
52126;@Sgt_Tailor Is it because I am only writing simultaneously not reading and writing?
52127;Yeah. You don't use the rlock so a rwmut isn't needed. The implementation of those is slightly different so use the normal one where you can
52128;make sense
52129;How would I make this channel non blocking (new to them)```// Run all cron jobsfunc (s Scheduler) Run() { // Start all the pending jobs < gocron.Start()}```Calling function`scheduler.Run()`Anything after that never gets ran I know theres something im doing wrong
52130;Select with default. But that doesn't have a lot of good usecases
52131;Why do you need that?
52132;@Sgt_Tailor is that for me?
52133;Yes
52134;Hmmm im adding a cron job to check a database table and delete necessary records if its over a particular time
52135;How would I select with default?
52136;An ideas @Sgt_Tailor ?
52137;You do realise that you don't have to wait for the channel
52138;Check to godoc of gocron
52139;In fact. The channel you receive is the stop channel
52140;Ah ok
52141;What's the best way to uniformly choose a random kv pair from a map?
52142;map[rand.Intn(len(map))]
52143;probably
52144;Ok thanks
52145;hu wait not sure
52146;nvm
52147;That doesnt work no
52148;that can't work I'm so dumb
52149;Do a random number of iterations
52150;I'd probably not use a map if I wanted a random kv pair
52151;Yea that sounds like a solid idea too
52152;Well I need a mapping of some sort
52153;You could create a slice append all the keys then get a random intn of that slice then return that kv from the map
52154;Wouldn
52155;Wouldn't a random number of iterations work better?
52156;Unless im overlooking a benefit to that approach
52157;Less memory usage yes
52158;Yeah random iterations would be less memory probably but the slice would probably be faster... Idk would have to test it...
52159;Not faster no
52160;With the slice youve to iterate the entire map every time
52161;With random number you just iterate at most once entirely
52162;Hmmm
52163;Yeah you are probably right
52164;Unless you need a random element from an unchanging map
52165;In which case creating the slice once would definitely be better
52166;At least with the keys unchanging... The values can change as much as you want
52167;The map is dynamic things are being inserted/removed
52168;Thanks guys
52169;random iter then
52170;Unless say you only update it once an hour but you read from it every second... Then you could just rebuild the slice when you insert or remove something.
52171;Hmm the updates are likely infrequent relative to reading the random kv
52172;I'll look into the slice idea as well
52173;I have a repo with at the root 2 folders `bot` and `oauth`. Bot is a typescript project oauth is supposed to be a go project. But I'm unsure how I should init my go.mod since I cannot use the root of the repo (e.g. `github.com/lieuweberg/projectx`) as the module name
52174;I'm sorry if I'm interrupting a conversation.I installed Go1.15.2 on Raspberry Pi OS 32bit and ran `go build`.`# vendor/golang.org/x/crypto/poly1305/usr/local/go/src/src/vendor/golang.org/x/crypto/poly1305/sum_noasm.go:10:7: undefined: newMAC`and will not be able to proceed. Also in version 14. I get the following output:`# runtime/usr/local/go/src/runtime/lockrank_off.go:22:2: undefined: lock2 /usr/local/go/src/runtime/lockrank_off.go:29:2: undefined: unlock2`What should I do?Platforms: Raspberry Pi 4 (4GB 5.4.51v7l+)Translated with www.DeepL.com/Translator (free version)
52175;@lieuwe_berg why not? üôÇ
52176;If your Go code is only constrained to one subdirectory I‚Äôd put the module in there for simplicity but there‚Äôs nothing actually stopping you from initializing it at the root.
52177;@_nop could you show the output of `go env`?
52178;"@Carson ```GO111MODULE=""""GOARCH=""arm""GOBIN=""""GOCACHE=""/home/pi/.cache/gobuild""GOENV=""/home/pi/.config/go/env""GOEXE=""""GOFLAGS=""""GOHOSTARCH=""arm""GOHOSTOS=""linux""GOINSECURE=""""GOMODCACHE=""/home/pi/go/src/pkg/mod""GONOPROXY=""""GONOSUMDB=""""GOOS=""linux""GOPATH=""/home/pi/go/src""GOPRIVATE=""""GOPROXY=""https://proxy.golang.org,direct""GOROOT=""/usr/local/go""GOSUMDB=""sum.golang.org""GOTMPDIR=""""GOTOOLDIR=""/usr/local/go/pkg/tool/linux_arm""GCCGO=""gccgo""GOARM=""6""AR=""ar""CC=""gcc""CXX=""g++""CGO_ENABLED=""1""GOMOD=""""CGO_CFLAGS=""g O2""CGO_CPPFLAGS=""""CGO_CXXFLAGS=""g O2""CGO_FFLAGS=""g O2""CGO_LDFLAGS=""g O2""PKG_CONFIG=""pkgconfig""GOGCCFLAGS=""fPIC marm pthread fmessagelength=0 fdebugprefixmap=/tmp/gobuild803456767=/tmp/gobuild gnorecordgccswitches""```"
52179;Cool could you also show `cat /proc/cpuinfo`?
52180;```processor : 0model name : ARMv7 Processor rev 3 (v7l)BogoMIPS : 108.00Features : half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32CPU implementer : 0x41CPU architecture: 7CPU variant : 0x0CPU part : 0xd08CPU revision : 3processor : 1model name : ARMv7 Processor rev 3 (v7l)BogoMIPS : 108.00Features : half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32CPU implementer : 0x41CPU architecture: 7CPU variant : 0x0CPU part : 0xd08CPU revision : 3processor : 2model name : ARMv7 Processor rev 3 (v7l)BogoMIPS : 108.00Features : half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32CPU implementer : 0x41CPU architecture: 7CPU variant : 0x0CPU part : 0xd08CPU revision : 3processor : 3model name : ARMv7 Processor rev 3 (v7l)BogoMIPS : 108.00Features : half thumb fastmult vfp edsp neon vfpv3 tls vfpv4 idiva idivt vfpd32 lpae evtstrm crc32CPU implementer : 0x41CPU architecture: 7CPU variant : 0x0CPU part : 0xd08CPU revision : 3Hardware : BCM2711Revision : c03112Serial : 100000008af7cd4aModel : Raspberry Pi 4 Model B Rev 1.2```
52181;Do you see an incompatibility here? üôÇ
52182;Your environment reports `GOARM=6` but your CPU reports ARMv7.
52183;@Carson Yeah I'm... Really.Thank you so much.
52184;Is it possible to run Golang on ARMv7?
52185;I too was wondering if it was possible
52186;(rpi 3b+)
52187;You should just be able to set `GOARM=7` to compile.
52188;I‚Äôm not 100% sure about that since you‚Äôre running in a backwards compatibility mode on that processor but that‚Äôs what I would try first.
52189;The other thing suggested in this post on the same error is that you might have multiple conflicting Go versions. Given that you quoted two separate versions and you have `GOROOT` set that‚Äôs not unreasonable. https://github.com/tailscale/tailscale/issues/676
52190;It is possible to run go on arm
52191;compiling for it is much easier tho
52192;I understand. I'll try it once.Thank you very much.
52193;Is there alternative to `robotgo` for keybaord and mouse input simulation in Windows?I wanted to try `SendInput` from WinAPi but I have no idea how to get started with following lib/module: https://github.com/lxn/win
52194;doing anything in windows is going to be a hellish nightmare
52195;Anyone happen to know how to build the binary that's also generated by go test?
52196;i think it's stored somewhere in /tmp
52197;Like to the local folder goal is to run go tool objdump on it
52198;error messages/panics from the test should reveal a path to a file
52199;ye well that contains a hash.
52200;that changes every compile
52201;sure
52202;oh its c
52203;idk what the rational is behind not just letting you do go test help to show all flags
52204;but instead spread it over 5 doc pages
52205;Finally i found something that will panic with me when it self isn't working xD
52206;So how useful is panic,defer recover ? The examples used to explain those were pretty complex for a beginner i think so i kinda skipped it
52207;Should i go back and pay attention to it ?
52208;defer definitely
52209;Ok ty
52210;how can i print data from database?
52211;using api
52212;"```package main import ( database/sql"" encoding/json"" log"" net/http"" _ github.com/gosqldriver/mysql"" github.com/gorilla/mux"")var db sql.DBfunc customer(w http.ResponseWriter r http.Request) { display err := db.Query(""select  FROM customers"") if err != nil { panic(err.Error()) } defer display.Close() json.NewEncoder(w).Encode(display)}func main() { db err := sql.Open(""mysql root:@123#@tcp(127.0.0.1:3306)/classicmodels"") if err != nil { panic(err.Error()) } defer db.Close() router := mux.NewRouter() router.HandleFunc(""/customers customer).Methods(""GET"") log.Fatal(http.ListenAndServe("":5555 router))}~ ~ ```"
52213;```| 495 | Diecast Collectables | Franco | Valarie | 6175552555 | 6251 Ingle Ln. | NULL | Boston | MA | 51003 | USA | 1188 | 85100.00 || 496 | Kelly's Gift Shop | Snowden | Tony | +64 9 5555500 | Arenales 1938 3'A | NULL | Auckland | NULL | NULL | New Zealand | 1612 | 110000.00 |```
52214;this is my data from database
52215;its a fakedata
52216;are you getting an error now?
52217;```2020/09/20 10:34:02 http: panic serving 172.16.102.1:62315: runtime error: invalid memory address or nil pointer dereferencegoroutine 5 [running]:net/http.(conn).serve.func1(0xc00006a000) /usr/local/go/src/net/http/server.go:1772 +0x139panic(0x6fe9c0 0x9d2480) /usr/local/go/src/runtime/panic.go:975 +0x3e3database/sql.(DB).conn(0x0 0x7d2700 0xc00009a000 0x1 0x0 0x8 0xc000018100) /usr/local/go/src/database/sql/sql.go:1132 +0x41database/sql.(DB).query(0x0 0x7d2700 0xc00009a000 0x7619f9 0x17 0x0 0x0 0x0 0x40d901 0xc000066200 ...) /usr/local/go/src/database/sql/sql.go:1565 +0x66database/sql.(DB).QueryContext(0x0 0x7d2700 0xc00009a000 0x7619f9 0x17 0x0 0x0 0x0 0xc000068270 0xc000043a38 ...) /usr/local/go/src/database/sql/sql.go:1547 +0xd1database/sql.(DB).Query(...) /usr/local/go/src/database/sql/sql.go:1561main.customer(0x7d1e40 0xc000180000 0xc00006c700) /home/shazeb/opensource/golangrestapi/main.go:16 +0x8dnet/http.HandlerFunc.ServeHTTP(0x7752f8 0x7d1e40 0xc000180000 0xc00006c700) /usr/local/go/src/net/http/server.go:2012 +0x44github.com/gorilla/mux.(Router).ServeHTTP(0xc0000ee0c0 0x7d1e40 0xc000180000 0xc00006c300) /home/shazeb/go/src/github.com/gorilla/mux/mux.go:210 +0xe2net/http.serverHandler.ServeHTTP(0xc0000fc000 0x7d1e40 0xc000180000 0xc00006c300) /usr/local/go/src/net/http/server.go:2807 +0xa3net/http.(conn).serve(0xc00006a000 0x7d26c0 0xc000058040) /usr/local/go/src/net/http/server.go:1895 +0x86ccreated by net/http.(Server).Serve /usr/local/go/src/net/http/server.go:2933 +0x35c```
52218;Ow yeah. You are shadowing `db` in your main function
52219;"try this:```var err errordb err = sql.Open(""mysql root:@123#@tcp(127.0.0.1:3306)/classicmodels"")```"
52220;You are not setting the global. Instead you're creating a new variable `db`
52221;same
52222;The stacktrace shows what file + linenumber causes the error
52223;main.go:16
52224;That leaves me to believe `db` is nil. So you're not setting it properly
52225;what does your code look like now?
52226;"``` 1 package main 2  3 import ( 4 database/sql"" 5 encoding/json"" 6 log"" 7 net/http"" 8  9 _ github.com/gosqldriver/mysql"" 10 github.com/gorilla/mux"" 11 ) 12  13 var db sql.DB 14 var err error 15  16 func customer(w http.ResponseWriter r http.Request) {  17 display err := db.Query(""select  FROM customers"") 18  19 if err != nil { 20 panic(err.Error()) 21 } 22 defer display.Close() 23  24 json.NewEncoder(w).Encode(display) 25 } 26  27 func main() { 28  29 db err := sql.Open(""mysql root:@tcp(127.0.0.1:3306)/classicmodels"") 30  31 if err != nil { 32 panic(err.Error()) 33 } 34 defer db.Close() 35  36 router := mux.NewRouter() 37 router.HandleFunc(""/customers customer).Methods(""GET"") 38 log.Fatal(http.ListenAndServe("":5555 router)) 39 }```"
52227;so you have _not_ done what I suggested
52228;change the := to = on line 29
52229;you are still shadowing the error
52230;You can move the var err error from line 14 down to line 28
52231;yes now its working with empty {}
52232;Yes. Query returns `Rows`. You have to scan the results into a struct still
52233;yes i have to set this but i dont undertand how to save that data in strucrt
52234;"> @Dusty.P like this?> > ```go> package main> > import (> fmt""> math""> sync""> )> > > func main() {> rwm := sync.RWMutex{}> var count float64 = 0> wg := sync.WaitGroup{}> wg.Add(1)> go func() {> wg.Done()> c := getSQRT(float64(25))> rwm.Lock()> count += c> rwm.Unlock()> }()> > wg.Add(1)> go func() {> wg.Done()> c := getSQRT(float64(64))> rwm.Lock()> count += c> rwm.Unlock()> }()> > wg.Wait()> rwm.Lock()> fmt.Println(count)> rwm.Unlock()> }> > func getSQRT(n float64) float64{> return math.Sqrt(n)> }> ```@AaravMer just introducing another option i.e. to use atomic operation instead of mutexes... atomics are implemented in hardware so they are (probably) faster"
52235;Check the examples in the sql package scorpion
52236;sync.Mutex does the atomic operation...
52237;Or do you mean the atomic increment functions?
52238;Hi im trying to install my package but getting an error basically I would like to reference `myproject` after installing it globallyIn go mod I have `github.com/author/myproject`When I do `go install github.com/author/myproject` I get this:`cannot find package . in /usr/local/go/src/github.com/author/myproject`
52239;If you only need to increment a number atomically then yes atomic add will be faster.
52240;@Sgt_Tailor im confused.
52241;Can you help me?
52242;I think he means something like `func AddInt32(addr int32 delta int32) (new int32)` but then you still have to store it so there would still be race conditions afaik...
52243;@emnaruto07 https://golang.org/pkg/database/sql/#Rows.Scan
52244;<http://godatabasesql.org/retrieving.html>
52245;"``` 1 package main  2  3 import ( 4 database/sql"" 5 log"" 6 net/http"" 7  8 _ github.com/gosqldriver/mysql"" 9 github.com/gorilla/mux"" 10 ) 11  12 var db sql.DB 13 var err error 14  15 func customer(w http.ResponseWriter r http.Request) { 16  17 var ( 18 id int 19 name string 20 ) 21  22 rows err := db.Query(""select  from customers where customerNumber = ? 1) 23 if err != nil { 24 log.Fatal(err) 25 } 26 defer rows.Close() 27 for rows.Next() { 28 err := rows.Scan(&id &name) 29 if err != nil { 30 log.Fatal(err) 31 } 32 log.Println(id name) 33 } 34 err = rows.Err() 35 if err != nil { 36 log.Fatal(err) 37 } 38 } 39  40 func main() { 41  42 db err = sql.Open(""mysql root:@tcp(127.0.0.1:3306)/classicmodels"") 43  44 if err != nil { 45 panic(err.Error()) 46 } 47 defer db.Close() 48  49 router := mux.NewRouter() 50 router.HandleFunc(""/customers customer).Methods(""GET"") 51 log.Fatal(http.ListenAndServe("":5555 router)) 52 }```"
52246;im not getting anything.
52247;Maybe remove the where clause and put in a debug line in the for loop
52248;Prove the basic concept first
52249;what?
52250;in mysql my query is working properly
52251;Are you not getting any output in the terminal?
52252;terminal means mysql terminal
52253;No from the go program
52254;no im making api and in postman im not fetting any data
52255;you didn't write to the response
52256;what did you expect
52257;Yoire not writing to the http response writer
52258;im check my code above
52259;No where in your customer function do you write a response
52260;You use log to print to the terminal
52261;But you'd need to form a response with the response writer passed to customer()
52262;Can you please show me one example
52263;https://yourbasic.org/golang/httpserverexample/
52264;https://medium.com/rungo/creatingasimplehelloworldhttpserveringo31c7fd70466e
52265;im usimg this already
52266;Hey guys^^I'm currently getting into GORM (https://github.com/gogorm/gorm) and I have a small issue.I'm using `db.AutoMigrate` which returns a nonnil error but the table gets created without any problems. `log.Fatalln` gives me the following:https://s3.lukaesebrot.dev/public/screenshots/Pi6AVaiJ.png
52267;@emnaruto07 in your code in your customer() function you never use the http response writer
52268;"```http.Handle(""/foo fooHandler)http.HandleFunc(""/bar func(w http.ResponseWriter r http.Request) { fmt.Fprintf(w Hello %q html.EscapeString(r.URL.Path))})log.Fatal(http.ListenAndServe("":8080 nil))```"
52269;https://golang.org/pkg/net/http/
52270;literally from the first few paragraphs
52271;uh nvm seems like its a debug output
52272;for handling the request im using mux
52273;@misterturtle
52274;check my main function
52275;Deezy and I have given you the answer a few times already
52276;Mux is a router it doesn't produce http responses
52277;It routes requests so you can produce responses
52278;@emnaruto07 Take a break from mux. Just start from scratch with `net/http`
52279;make THAT work first
52280;start with the simplest smallest parts possible
52281;https://github.com/Shazeb01/restapigo/blob/master/main.go
52282;once you know you can write working http code then add mux
52283;i did this one yest
52284;im getting respones from article get and post
52285;ok i'll try again
52286;Hi i was wondering if it's possible to write code out of `go/src` to import package ?
52287;Because in my github repo i have `repo/api` and `repo/client` and i don't want to switch all project in `src` everytime
52288;It's hard to explain what i want hope you will understand :)
52289;go/src as in GOPATH?
52290;go/src is mmy GOPATH
52291;use go modules then
52292;but i have to have a single repo for my api
52293;but i also have to store my client in the repo
52294;dont see why its not possible with go modules
52295;and go module eveyone can use it ?
52296;yes
52297;and i don't want
52298;this is a private api
52299;then make the repo private
52300;you werent exactly clear on what you mean by everyone can use it
52301;can everyone use go modules the concept? yes
52302;i don't really understand why go is closed with this module system
52303;?
52304;i mean
52305;if i create my api as module
52306;i can't store it with my client
52307;cause i guess it should be in a repo with only go files
52308;thats not true..
52309;im not sure why youre making these assumptions about something you havent tried
52310;i'm frustating because i don't understand how Golang want we use package
52311;it so simple with node java or else
52312;is the client public and api private?
52313;but in Golang i'm lost
52314;yes
52315;I have my repo with my client and my api inside
52316;what you're probably looking for is `internal`
52317;but I\'m not sure what you mean by private if you don\'t want the outside world to see your repo you can\'t really make only a part of it private
52318;no matter the language
52319;private as in invisible to those without access
52320;well if my repo is private no one can use it it's logic
52321;You could using git submodules ?
52322;dont use git submodules
52323;not with Go
52324;But can i create a module from a repo that contains my client ?
52325;that's hardly language specific @kharnox
52326;That was your statement. No matter the language
52327;But by the way why no submodules with go ?
52328;it doesnt work well with the workflow
52329;for example with a node api i have my repo `repo` and my client `repo/client` and my api `repo/api` and the folders that contains my api manage his module alone
52330;Humpf. M'kay
52331;i heard that go in very nice for API so i would test but if it's hard to setup it :/
52332;why do you insist on a monorepo?
52333;you could just have separate repositories for the client and the api
52334;^
52335;Seems like the best choice
52336;Those are seperate modules even though they work together
52337;there's special tooling to manage monorepos in go probably but why make it more complex and not just separate it?
52338;this is what i will do
52339;because i really want to experiment API whith Go
52340;Any of you tried working with gui clients in go ?
52341;many have tried
52342;everyone has hated it
52343;I was making sure
52344;Go is very nice to code rest API ?
52345;@deezy to be fair
52346;I did a bit of JavaScript yesterday
52347;needless to say Go was more enjoyable
52348;@Le V it's very suitable for RESTful APIs
52349;I guess it is suitable for anything webrelated
52350;Ok thanks :)
52351;not sure if I should be posting this in gojobmarket cause it's just a question but what is the job outlook for Go right now and how does it stack up to more popular languages
52352;depends on where you are
52353;I've worked at two places using Go not sure about other places
52354;But in your question more popular languages will likely have more jobs
52355;based on being more popular
52356;every internship i've had (4) has been in go
52357;Hola
52358;does anybody tried to write mapreduce jobs for hadoop with golang?
52359;:thinkingo: how long were your internships? 4 sounds like a lot
52360;ig uni student
52361;4 months each
52362;well im still in the 4th
52363;can a make a global var?
52364;like
52365;"```govar ( VALUE string = val"")```"
52366;and access it in all funcs within the file?
52367;yup
52368;it's global to the entire package
52369;but it doesn't seem to read it in
52370;for example
52371;"```godb err := sql.Open(""mysql USER+"":""+PASS+""@tcp(""+PORT+"":3306)/table"")```"
52372;how are you running the files
52373;show where you're defining the variable
52374;also :=
52375;and how you're running the program
52376;"```govar ( USER string = user"" PASS string = pass"" PORT string = 127.0.0.1:3306"")```"
52377;running by ```go run server.go```
52378;_where_ are you defining it
52379;right after import
52380;in `server.go`?
52381;correct
52382;so what makes you think it's not using the variables?
52383;```http: panic serving [::1]:56722: dial tcp 92.242.140.21:3306: connect: operation timed out```
52384;this
52385;that's not my remote ip
52386;look at what your connection string is doing
52387;You are taking a string with an ip and port and appending another port to it
52388;makes no sense
52389;also if you want to know if a variable is set you can just print it out
52390;sorry that PORT value isnt a port
52391;oh
52392;thanks
52393;guys i need some help
52394;https://github.com/complexorganizations/SystemScanner
52395;What's the issue?
52396;"```func findAllDir() { // go to all dir files err := ioutil.ReadDir(""/"") if err != nil { log.Fatal(err) } for _ file := range files { fmt.Println(file.Name()) }}```"
52397;how do i make all the dir a var
52398;?
52399;what do you mean
52400;that code will print out all the dir found a system
52401;how do i turn all of the `file.Name` in a global var so i can use in another function?
52402;You want a slice of all the file names?
52403;You can make a slice of strings and append each name to it
52404;and preallocate space if you want to optimize
52405;and then just return that slice
52406;"```Gofunc findAllDir() []string { // go to all dir files err := ioutil.ReadDir(""/"") if err != nil { log.Fatal(err) } filenames := make([]string len(files)) for i file := range files { filenames[i] = file.Name() } return filenames}```"
52407;nice
52408;one more question
52409;is it possible to tell which file was changed automatically without the user input?
52410;i'm gonna just say no
52411;it's doable but it requires careful control and monitoring over the whole os
52412;or intensive retroactive forensic investigation
52413;how would i make something persistent without putting it on a file?
52414;you don't
52415;cmon this is serious
52416;yeah
52417;persistence requires nonvolatile storage
52418;that means a hard drive or an SSD
52419;unless you're doing something hilarious like encoding your program/data into a vinyl record or something
52420;or using a turing tape etc
52421;and with the exception of fringe filesytems or whatever i\'ve never heard of and cannot conceive access to nonvolatile storage is done via the file abstraction
52422;than i am guessing putting it on a file and than using crypto to gen a key to protect the file?
52423;if you want
52424;is there anyway golang can send desktop notifications or any sort of notifications
52425;?
52426;sure did you google it
52427;yes
52428;found 3rd party packages
52429;yes
52430;that's your answer
52431;nothing from golang themselves
52432;right
52433;those are your options
52434;the official first party solution isn't going to be hiding behind third party results
52435;unless those are waaaay more popular
52436;like mux?
52437;sure
52438;Now I wanna see someone save their go data to vinyl @deezy
52439;it ain't files if there's no filesystem üß†
52440;How muxh data can a record store?
52441;yes
52442;hmm
52443;depends on your tooling
52444;commodity grade hardware probably less than a kb or two
52445;Surely you could encode data into sound waves with more efficiency
52446;Ooh up to around 600bits a second apparently
52447;it's just about resolution
52448;that's more than i would've thought
52449;808Kb  which is quite fitting for a vinyl
52450;about a megabyte assuming a 30 minute album
52451;not bad
52452;I was going off a 23 minute LP
52453;i'm too young to know anything about vinyl
52454;not practically speaking at least
52455;But vinyl is analogue üëø
52456;yea dog
52457;the least volatile of all storage
52458;You can use an CED
52459;I like my dbs on wax cylinder
52460;None
52461;Also analog but uses capacitance
52462;it is shiny!
52463;can be played back about 500 times under ideal conditions before you get data degradation
52464;Seems fine
52465;I don't think anything I write will be used over 500 times so fits my use case
52466;guys
52467;@deezy would this work??
52468;https://golang.org/pkg/os/signal/
52469;for what
52470;you keep asking disjointed questions with no context and tagging me
52471;it's not endearing
52472;I try to add test to a `NewClient` func like gogithub (https://github.com/google/gogithub/blob/master/github/github_test.go#L58)But the first params I have is a Config struct which contains ApiKey and Token and the ApiKey is mandatory so how to test the http client without that key? ü§î
52473;@Rtransat I'm not entirely sure what you mean but you could use a placeholder ApiKey and compare if the request made is correct with a custom http.Client
52474;how do I get a zerovalue out of type expressions in ast.Expr?
52475;@_diamondburned_ I wouldn't imagine types would be fully parsed at AST construction time
52476;well I seem to have neough info
52477;and I can probably use a switc hcase but eh was wondering if there's a more automatic way
52478;@1lann I will make the request with a file so may be just compare what is returned if I have no ApiKey
52479;@_diamondburned_ https://godoc.org/go/types#Info.TypeOf https://godoc.org/go/types#Default maybe
52480;wait Default isn't zero value
52481;yeah idrk what those do
52482;what are you doing with the 0 value though
52483;do you want it as a string?
52484;you can probably check if something is declared as a zero value in the AST
52485;just returning it
52486;generating code rn
52487;I want to generate a bunch of noop methods
52488;"so you just want to generate an expression that's just like `var emptyMyType MyType; return emptyMyType`"
52489;I would just yolo it and just write that as a string into the code lol
52490;oh bruh
52491;that's actually pretty big brain lol thx
52492;iirc there's a formatter that autoadds zerovalue reeutrns
52493;forgot which one that was
52494;Has anyone considered writing a variant of Timers and Tickers that can be persisted through a store?
52495;Whether that be a disk memcache or Redis based cache
52496;no but i would think you could just load them on application startup and write through to the store when you need them
52497;i mean `time.Parse()` basically does that no?
52498;just store the tick
52499;@Sgt_Tailor yo what is that disc
52500;nvm found it
52501;interesting
52502;What does one do if a github update for a shim to fix compatibility was applied but it wasn't updated? https://pkg.go.dev/github.com/didip/tollbooth/thirdparty/tollbooth_echo?tab=versions
52503;Maybe just make the shim myself perhaps I feel weird just copying the src code over and plopping it in there will be client specific
52504;Oh god yes okay i'm just gonna add the shim in myself not even 20 lines of code lmao
52505;@Sgt_Tailor :kkk_hmm:
52506;@trini8ed by applied but not updated do you mean it\'s in a commit but not in a versioned tag?
52507;If so you can pin against a specific commit‚Äîthe page you linked has the pseudoversions right there
52508;I just copied the shim over and used it in my own code seemed easier ü§£
52509;I've been looking through the code though for the past hour idk if Im just missing it but would anyone happen to know how this middleware limits the request per second?
52510;https://github.com/didip/tollbooth
52511;It seems that its missing ability to limit requests per hour or per minute and I'm trying to figure out if there is an easy way to limit requests per specified period of time surely if it does it per second this would be easy change to do maybe?
52512;Sure just take the rate you want and convert it to per second üôÇ
52513;If you have requests per minute divide it by 60
52514;If you have requests per hour divide it by 3600 (60  60)
52515;Does that work with burst though? That's the main issue I'm seeing now I only want to limit user requests if they do 100 upload requests in an hour and if they upload 20 of those in one second that fine or even 50 in one second that's fine?
52516;Sure why not?
52517;Does it work like that though? if I wanted to set the maxRequests to 100 per hour and I do the math to 0.027 requests per second would that allow for 100 requests all at once or slowly over the course of that whole hour?
52518;> A Limiter controls how frequently events are allowed to happen. It implements a token bucket of size b initially full and refilled at rate r tokens per second.
52519;Here `r` is 0.027 and `b` is 100
52520;Well you would want `b` to be 100 if you'd like bursts of that size
52521;"wondering why this line doesn\'t update in my gorotinue shown at NOT SET >""```gofunc getNearestRestaurants(w http.ResponseWriter r http.Request) { db err := sql.Open(""mysql USER+"":""+PASS+""@tcp(""+HOST+"":3306)/customer"") if err != nil { panic(err.Error()) } defer db.Close() rows err := db.Query(""SELECT id lat lng FROM vendor WHERE lat IS NOT NULL"") if err != nil { panic (err.Error()) } var vendors []Vendor for rows.Next() {  v := new(Vendor) err = rows.Scan(&v.Id &v.Lat &v.Lng) if err != nil { panic(err.Error()) } vendors = append(vendors v) } wg := sync.WaitGroup{} //resChan := make(chan Vendor) for i v := range vendors { fmt.Sprint(i) go getDistance(v wg)  } wg.Wait() if err := json.NewEncoder(w).Encode(vendors); err != nil { log.Println(err) }}func getDistance(v Vendor wg sync.WaitGroup) { wg.Add(1) defer wg.Done() BASE_URL := http://dev.virtualearth.net/REST/V1/Routes/Driving?du=mi&o=json&key=""+KEY URL := BASE_URL+""&wp.0=""+v.Lat+"",""+v.Lng+""&wp.1=""+""3765%20Market%20St%20Philadelphia%20PA"" res err := http.Get(URL) if err != nil { log.Fatal(err) } data _ := ioutil.ReadAll(res.Body) res.Body.Close() var result Result  json.Unmarshal(data &result)NOT SET > v.Distance = result.ResourceSets[0].Resources[0].TravelDistanceGOOD DATA > fmt.Println(v.Distance) //fmt.Fprint(w result) //resChan < v }```"
52522;is this a problem with not being passed by reference?
52523;i guess my fundamental question is how does concurrency work with shared variables? p.s. any optimization suggestions are welcome too
52524;you shouldn't pass a sync.waitgroup into a function you should pass a pointer to a sync.waitgroup
52525;the docs for the `sync` package states that: > Values containing the types defined in this package should not be copied.that includes a waitgroup
52526;gotcha thanks @jonno
52527;"```resp err := http.Get(""https://www.virustotal.com/vtapi/v2/file/report?apikey=(virustotalApiKey)&resource=(hashhere)"")```guys how would i use a var in there?"
52528;fmt.Sprintf or string concat
52529;can u give me the code
52530;i am new to go
52531;https://golang.org/pkg/fmt/#Sprintf
52532;https://play.golang.org/p/geqloT6q3_H
52533;"``` apiEndpoint = fmt.Sprintln(""https://www.virustotal.com/vtapi/v2/file/report?apikey= virustotalApiKey &resource= fileHash)```"
52534;Hello everyone I am new to this group I would like to know if someone could help me with this question. I am trying to make a socket client that listens to a specific port of a web (said web is developed in python) to interpret the response that changes dynamically I am Using the gosocket.ioclient library here is my code attached. I appreciate you can help me.
52535;you should use websockets over socket.io imo
52536;Is there any way i can see how many files i created on termux and delete them ?
52537;depends on how you're creating files
52538;```nano {file.go}``` like this
52539;then you'd have to check your bash history
52540;keep notes
52541;you're doing it by hand so you have to keep track of it by hand
52542;Ohk
52543;Ty
52544;If you always want to delete files you create you can put them in your tmp directory
52545;And yeet the directory contents periodically if it's not a ramfs or doesn't have boot/shutdown hooks
52546;yeah just make a folder for all your messy files
52547;I thought everybody knew this :Thonk:
52548;Hey fellas are there any libraries for conducting unit testing in Go?
52549;why yes
52550;in the standard library
52551;which you\'ll definitely find if you google golang unit testing
52552;oh nice that's convenient
52553;go is a real language
52554;thanks for the quick response
52555;it comes prepackaged with most things you'll need to write Useful Programs
52556;awesome
52557;to note I figured I'd ask here first so I'd have people to talk to about whatever lib(s) I try to use might make getting them up and running faster
52558;got any good examples of good unit testing using the standard lib testing?
52559;the stdlib tbh
52560;thats as easy as it gets i appreciate it
52561;Can we have cursor in `mgo.v2`?
52562;I can't seem to find out on the docs
52563;https://quii.gitbook.io/learngowithtests/ @Kitsueki
52564;this is really nice for both learning the language and the basic testing stuff
52565;@MadxmikeThanks!
52566;> Can we have cursor in `mgo.v2`?@iamaul The `mgo.v2` does not provide cursor API calls. Is that true?
52567;I found the cursor on this pkg https://godoc.org/go.mongodb.org/mongodriver/mongo
52568;Means that I will have to do it manually üò≠
52569;:partygopher:
52570;suggest me a project to make
52571;discord bot
52572;#offtopic
52573;ye discord bot
52574;~~use my library pls~~
52575;you have lib
52576;:coffeegopher:
52577;#arikawa
52578;Hey guys say I have a rune `'Z'` what would be the easiest way to get runes for each digit in the unicode code point? So for this example I would want `'5'` and `'A'`So far I have ```goc >> 4c & 0xF```Which gives me the uints `5` and `10`. How do I go from that to the runes for each of those in hex?
52579;I can do something like ```go[]rune(strconv.FormatInt(int64(r>>4) 16))[0][]rune(strconv.FormatInt(int64(r&0xF) 16))[0]```But is there a better way that I am missing?
52580;Ok I think I found a way...```govar upperHex = []rune{'0 1 2 3 4 5 6 7 8 9 A B C D E F'}upperHex[byte(c) >> 4]```(got the idea from the strconv package üòâ)
52581;How do you mock your API request for your test? (In my case it's a wrapper from a public existing API)I would like to use a local server in my test but I need to test if the API key exists in headers and if it's a correct api key.I was thinking to use json files with different response and if the response is a correct response I'll pass the test otherwise I'll failWhat do you think?
52582;why is ioutil.Readall is not working on net.Conn?
52583;what do you mean by not working
52584;i tried to make a echo server. Here is my code: ```func echoServer(con net.Conn) { for { bytes err := ioutil.ReadAll(con) if err != nil { break } fmt.Println(string(bytes)) } con.Close()}```
52585;and ioutil.Readall doesnt seem to work
52586;what does doesnt seem to work mean
52587;is it giving you an error
52588;is it blocking forever
52589;etc
52590;its not printing my input
52591;but when i used con.Read() it works properly
52592;is it giving an error
52593;no
52594;Will go receive a game development update in the future ?
52595;what?
52596;do you have anything in bytes
52597;@panaginip
52598;net.Conn is a reader interface
52599;yes
52600;I mean c# has unity c++ has unreal engine to develop games,would go have something like that ?
52601;embiten
52602;there is someone making some godot bindings too
52603;> I mean c# has unity c++ has unreal engine to develop games,would go have something like that ?@K R I T You mean game engine? There has already alot of game development package out there
52604;but those projects arent things created by the language creators
52605;so no go will not ever recieve a game development update
52606;Ok. I read a article about where go isnt good at . game development was there so just curious. Ty
52607;yeah probably wouldnt be your first choice for most people
52608;@panaginip i would start by adding more logging
52609;bufio.Scanner is working
52610;so im good now
52611;but it is still wierd because ioutils.Readall is not working
52612;What's the opinion on gorilla mux vs gin vs echo vs chi?Looking for something that's easy to use for building out an MVP quickly in my free time but robust enough to continue with it for the foreseeable future
52613;go chi gang
52614;Go chi
52615;Any reasoning why chi? Just preference or bad experience?
52616;preference tbh
52617;So long its not Iris youre good to go
52618;Everyone here will recommend you chi based on preference but if everyone prefers it there must be a reason
52619;:NanaBongo:
52620;guys i need some help
52621;can anyone post some sample code where ur uploading a file to a api
52622;cant really find a good example
52623;"```gofunc postFile(filename string targetUrl string) error { bodyBuf := &bytes.Buffer{} bodyWriter := multipart.NewWriter(bodyBuf) // this step is very important fileWriter err := bodyWriter.CreateFormFile(""uploadfile filename) if err != nil { fmt.Println(""error writing to buffer"") return err } // open file handle fh err := os.Open(filename) if err != nil { fmt.Println(""error opening file"") return err } defer fh.Close() //iocopy _ err = io.Copy(fileWriter fh) if err != nil { return err } contentType := bodyWriter.FormDataContentType() bodyWriter.Close() resp err := http.Post(targetUrl contentType bodyBuf) if err != nil { return err } defer resp.Body.Close() resp_body err := ioutil.ReadAll(resp.Body) if err != nil { return err } fmt.Println(resp.Status) fmt.Println(string(resp_body)) return nil}// sample usagefunc main() { target_url := http://localhost:9090/upload"" filename := ./astaxie.pdf"" postFile(filename target_url)}```"
52624;thank you
52625;Got it from there <https://astaxie.gitbooks.io/buildwebapplicationwithgolang/content/en/04.5.html>
52626;>cant really find a good examplegenuinely dont believe you googled properly
52627;theres a huge number of examples online
52628;i knew i saw that example and i just didnt want to be rude
52629;the code is like a 3/10
52630;It works well for me
52631;I have used it multiple time
52632;It's probably not perfect but if you understand how it works you can probably make it better by yourself
52633;https://tutorialedge.net/golang/gofileuploadtutorial/
52634;alternative
52635;None
52636;https://gabrieltanner.org/blog/golangfileuploading
52637;another alternative
52638;https://medium.com/wesionaryteam/fileuploadingingo44111404a506
52639;another alternative
52640;like honestly theres countless examples online
52641;i have seen most of these but the issue is
52642;its like 100 lines of code to upload a file
52643;tutorialedge has the best one
52644;Then do that
52645;It's not easy to upload a file
52646;If every tutorial is 100 line
52647;its <30 lines...
52648;There is probably not a 10 line way
52649;why isnt there a one liner for everything is basically what you sound like right now
52650;If you really don't want to write code just use an existing lib
52651;<https://gabrieltanner.org/blog/golangfileuploading>
52652;This one is the best explained one
52653;Oh you sent it mb
52654;"```timeout running go buildgo: finding module for package github.com/AllenDang/giu/imguigo: finding module for package github.com/AllenDang/giugo: finding module for package github.com/bwmarrin/discordgogo: downloading github.com/bwmarrin/discordgo v0.22.0go: downloading github.com/AllenDang/giu v0.0.02020091602142055328eeee68bgo: found github.com/AllenDang/giu in github.com/AllenDang/giu v0.0.02020091602142055328eeee68bgo: found github.com/AllenDang/giu/imgui in github.com/AllenDang/giu v0.0.02020091602142055328eeee68bgo: found github.com/bwmarrin/discordgo in github.com/bwmarrin/discordgo v0.22.0go: downloading github.com/gogl/glfw/v3.3/glfw v0.0.020200420212212258d9bec320ego: downloading golang.org/x/crypto v0.0.020190308221718c2843e01d9a2go: downloading github.com/gorilla/websocket v1.4.0go: downloading github.com/gogl/gl v0.0.020190320180904bf2b1f2f34d7go: downloading github.com/goresty/resty/v2 v2.1.0go: downloading golang.org/x/net v0.0.020190628185345da137c7871d7# pkgconfig cflags  gl glpkgconfig: exec: pkgconfig"": executable file not found in $PATH# github.com/gogl/glfw/v3.3/glfwexec: gcc"": executable file not found in $PATHGo build failed.```"
52655;using the website
52656;can you make your username not toxic
52657;there
52658;the error is completely self explanatory
52659;or is this on play.golang.org?
52660;maybe no support for cgo ?
52661;yes
52662;i dont think so
52663;i was just playing around
52664;If you sleep a goroutine until x seconds elapsed is it still scheduled to run over those x seconds? So when its running itll idle for its entire time slice?
52665;Not sure how the go scheduler handles sleeping goroutines
52666;sleeping goroutines arent run while theyre sleeping
52667;Oh nice so is it safe to spawn a bunch (think a hundred over say 20 seconds before each one starts returning) of sleeping goroutines assuming they won't use up resources?
52668;i believe so
52669;Great thanks
52670;https://github.com/golang/go/wiki/CommonMistakes#usinggoroutinesonloopiteratorvariables @Atakan
52671;@Str≈ìm thank you very much
52672;How do you mock your API request for your test? (In my case it's a wrapper from a public API)I would like to use a local server in my test but I need to test if the API key exists in headers and if it's a valid api key.I was thinking to use json files with different response and if the response is a correct response from the API I'll pass the test otherwise it will failWhat do you think?
52673;have you seen httptest package
52674;how do you guys read documentations?
52675;do you read all of it or just search for what you need
52676;lil bit of both
52677;i'll generally skim the entire table of contents jump back and forth between that any anything that seems interesting
52678;ctrlf keywords and ideas
52679;and then ctrl+f for specific terms i care about
52680;the skimming is important
52681;so you know what's even THERE to begin with
52682;you get a feel for the terminology the library uses
52683;you can\'t assume that just because you\'re trying to do some task and YOU call it funglebunging that anyone else will
52684;@panaginip but no there's no way to avoid reading everything
52685;just read everything
52686;read good stuff read bad stuff put it all in your brain blender with many healthy scoops of practical experience
52687;and make yourself an expertise smoothie
52688;brain blender
52689;gross lol
52690;it's a good metaphor for how your brain feels when trying to be good at programming
52691;what is the use of readers? why not just use bytes or strings. I have no idea what are the advantages of using readers since i came from python and python dont have readers
52692;Streams of data
52693;Say reading from a file
52694;You can just read from that file in chunks
52695;As one stream of bytes
52696;Or reading from a connection
52697;why not just open a file as bytes array
52698;What if you don‚Äôt want to read the whole thing into memory at once
52699;oh
52700;https://github.com/Shazeb01/golangrestapi/blob/67caeca0a77412db1045f63e72b8af86852c6fe7/main.go#L61https://github.com/Shazeb01/golangrestapi/blob/67caeca0a77412db1045f63e72b8af86852c6fe7/main.go#L16any better way to wrote this?
52701;now that makes sense
52702;thanks @Madxmike
52703;Like say sending a large file over a connection
52704;You literally can setup a file reader
52705;And a writer to the connection
52706;And io.Copy
52707;And it will read the file straight to the connection
52708;Just off the top of my head
52709;If you poke around any bit of the stblib or most packages you will see io.Reader everywhere
52710;if im initiating a struct
52711;type
52712;and i give lets say 5 out of 19
52713;10
52714;values right off the start of inititation
52715;the rest are nill values that still can be changed?
52716;of course
52717;@xblooos are you telling me?
52718;no lol
52719;thats a question
52720;sorry lol
52721;@emnaruto07 I‚Äôm like 90% sure you can just pass a pointer to the struct instance and it will do it
52722;Instead of passing each individual field
52723;Also all your struct fields are unexported
52724;But you have json tags
52725;Which won‚Äôt work
52726;Json can work with things it can‚Äôt see
52727;im new to go thats why i dont know
52728;im learning
52729;> And it will read the file straight to the connection@Madxmike I thought so too but io.Copy initializes a buffer and calls io.CopyBuffer.
52730;Whatever it is
52731;I‚Äôm too tired rn for completely accurate ideas üòõ
52732;Nah I just think io.Copy is kinda misleading I wanted to enlighten a fellow gopher thats all.
52733;If you want to serve large files use your own buffer with io.CopyBuffer
52734;"so like ```type Post struct { 17 customers string `json:""customertable""` 19 }``` and in result.scan(&post) ?"
52735;@Madxmike
52736;is there a difference between using a pointer to a struct and making a copy of the struct?
52737;Well
52738;pretty inherently in the fact that one is a pointer and the other is a value?
52739;That
52740;A pointer points to a struct somewhere in memory
52741;The only thing being copied would be the pointer itself
52742;A copy is well
52743;A copy
52744;mate question itsels is in fact its answer
52745;but the result are the same?
52746;define results
52747;a pointer and a value type have stark differences in how they work
52748;have you done the tour
52749;https://tour.golang.org/moretypes/1
52750;they just do the same kind of thing
52751;can you please be specific
52752;pointers and value types are not the same
52753;wait
52754;im wrong
52755;sorry
52756;why im not getting any value in postman?
52757;"```import ( database/sql"" encoding/json"" net/http"" _ github.com/gosqldriver/mysql"" github.com/gorilla/mux"")var db sql.DBvar err errortype Post struct { customerNumber string `json:""customerNumber""` customerName string `json:""customerName""`}func main() { db err = sql.Open(""mysql root:@tcp(127.0.0.1:3306)/classicmodels"") if err != nil { panic(err.Error()) } defer db.Close() router := mux.NewRouter() router.HandleFunc(""/posts getPosts).Methods(""GET"") http.ListenAndServe("":5555 router)}func getPosts(w http.ResponseWriter r http.Request) { w.Header().Set(""ContentType application/json"") var posts []Post result err := db.Query(""SELECT customerNumber customerName from customers"") if err != nil { panic(err.Error()) } defer result.Close() for result.Next() { var post Post err := result.Scan(&post.customerNumber &post.customerName) if err != nil { panic(err.Error()) } posts = append(posts post) } json.NewEncoder(w).Encode(posts)}```"
52758;this is my code
52759;@panaginip please do reading on pass by value vs pass by reference
52760;Your fields are unexported
52761;Json cant encode them
52762;Export your fields
52763;which feilds?
52764;in your struct
52765;In your post struct
52766;None
52767;These
52768;They need to be exported
52769;yo nice font
52770;sorry i dont know exported means
52771;https://tour.golang.org/basics/3
52772;Exported in go is the same as public in other languages.You can export things by capitalising them:For example:`customerNumber string` should be `CustomerNumber string` to become exported.
52773;But yeah please follow the go tour it covers all these basic things.
52774;ohhh got it
52775;thanks
52776;i exported them still the same
52777;whats the actual problem
52778;means request is successfull but no output
52779;please be more specific
52780;screenshot?
52781;@Str≈ìm im making a api
52782;that...doesnt tell me anything
52783;yes wait letme share screensh0t
52784;None
52785;and wheres the response supposed to be
52786;im extacting data from mysql
52787;only username and customernumber
52788;in json format
52789;you can check my code above
52790;have you tried printing to see if there is data
52791;yes in mysql there is lot of data
52792;how did you check that the request fetches the correct data
52793;because in mysql im using the same query to exact the same data
52794;thats not good enough
52795;how do you know youre running the exact same query
52796;please check your assumptions
52797;maybe ill take somebreak
52798;or you could add some print statements and do some debugging...
52799;in terminal im getting values
52800;but not in postman
52801;None
52802;lets see your latest code
52803;Didn't we do this yesterday and you weren't using the response writer
52804;they appear to be this time
52805;There's a 7kb response in that postman screenshot
52806;@emnaruto07
52807;@misterturtle im following tutorila
52808;:facepalm:
52809;postman is saying theres a 7kb response
52810;so it appears that there is a response with values
52811;im doing the same but using my db
52812;Click the drop down arrow next to body
52813;"```var db sql.DBvar err errortype Post struct { CustomerNumber string `json:""customerNumber""` CustomerName string `json:""customerName""`}func main() { db err = sql.Open(""mysql root:Shazeb@123#@tcp(127.0.0.1:3306)/classicmodels"") if err != nil { panic(err.Error()) } defer db.Close() router := mux.NewRouter() router.HandleFunc(""/posts getPosts).Methods(""GET"") http.ListenAndServe("":5555 router)}func getPosts(w http.ResponseWriter r http.Request) { w.Header().Set(""ContentType application/json"") var posts []Post result err := db.Query(""SELECT customerNumber customerName from customers"") if err != nil { panic(err.Error()) } defer result.Close() for result.Next() { var post Post err := result.Scan(&post.CustomerNumber &post.CustomerName) if err != nil { panic(err.Error()) } posts = append(posts post) } json.NewEncoder(w).Encode(posts) fmt.Println(posts)}```"
52814;please read what turtle said
52815;it appears youre not actually using postman properly
52816;it says there was a response with data but youre not actually looking at it
52817;Also you‚Äôre not handling the error from that encode
52818;yes it worked
52819;im so sorry
52820;im very stupid
52821;:eriyukSip:
52822;lol
52823;Getting into this stuff can be overwhelming
52824;reasons like this why i dont like postman
52825;New tools new concepts etc etc
52826;yes i spend my time from yest for the same reason
52827;and i rewrote the code 5 times already for the same issue
52828;yes my bg is cyber but im learning development also
52829;thanks anyway @misterturtle @Str≈ìm for the help.
52830;No problem
52831;Postman is good when a client can just send their swagger or api spec in a particular format and I can just import it
52832;why use postman
52833;when u can use terminal
52834;2020 brain
52835;yeh curl will help lol
52836;you know the best thing about postman
52837;their code feature
52838;but i wish they wrote it on golnag instead of js
52839;i have to check that feature than
52840;You can export the call in go too
52841;None
52842;damn that's pretty cool
52843;Postman has plenty of useful features it just tends to be overkill / bloated / why is it all in the cloud
52844;The app is def bloated and slow but it's great to save collections of requests parameters tokens sharing etc. I'd still argue it makes life a lot easier than curl does if you're working with/building a complex api
52845;@Deleted User I think it started out as a chrome web app but then that got deprecated or something so they made it an electron app
52846;Correct
52847;It can also be unreliable at times so be careful with it. I have had instances where I thought my API was down or having some sort of undesirable behavior when in fact Postman was just being wonky
52848;so if an api starts unexpectedly acting weird consider that postman could be the issue
52849;@evandocarmo probably the most useful feature! Templating and auth sharing
52850;What about ~~PostWoman~~ Hoppscotch?
52851;what about curl
52852;Significantly more work for me testing an API with curl vs postman
52853;i don't find curl that hard
52854;typing stuff is faster than digging tabs for me
52855;Yes but you're not the average joe üòõ
52856;i don't think any average joe would write an API and test it :Thonk:
52857;xD
52858;average Dev then
52859;Different use cases though
52860;If I sent you docs for an API with 3040 endpoints and you could import it into postman or write them out in curl...
52861;Id rather open them in postman  even if it's just to send them to get them into burp
52862;i'd throw it into a bash array
52863;Youd end up writing so much framework what youd end up with is a bash CLI postman knock off
52864;:P
52865;Least no electron though... so there is that
52866;not really?
52867;this is assuming you already have something for postman so sure
52868;if I just have a list of URLs I'd just punch them in an array and loop over them
52869;I don\'t see anything framework here unless there\'s a framework that runs commands for me
52870;(a shell?)
52871;I think we have different use cases and need different functionality
52872;I don't see how that's the case but either way if someone's going to want to debug their own API here I'd recommend curl over Postman any day for that
52873;v just has what I need for debugging instantly and it's easily copypasteable
52874;I would too like I said it tends to be overkill for most use cases
52875;postman has its uses in places but yeah curl is great for seeing the raw request quickly and without munching ram
52876;Hi there I am messing around with fetching data from a database to pass to a web app and I am unsure of the best way to collect all of the results from my SQL query. I am doing a ```gofor results.Next() { var shwpp Shwpp err = results.Scan(&shwpp.CreatorID &shwpp.ID &shwpp.ImageURL &shwpp.Title) log.Printf(shwpp.Title) }``` but instead of just printing the results I want to collect them into a data structure to parse to json.
52877;you can make a slice of shwpp's and append to that in the for loop
52878;then use `encoding/json` to create json
52879;Okay is that the idiomatic way of doing it? I didn't know if there was a collect() method
52880;before the `for` loop you could do `shwpps := make([]shwpp 0)`
52881;And in the for loop do `shwpps = append(shwpps shwpp)`
52882;Excellent thankyou. That should sort that.
52883;check out this part of the tour if you haven't already: https://tour.golang.org/moretypes/7
52884;What happens if i change the address of a network interface while i'm bound to a port through http.ListenAndServe?
52885;You'll still be bound to that ip
52886;"i'm changing a config and restarting systemdnetworkd; would it remain bond to the same port after the restart? or will it get an error?"
52887;so the former?
52888;i don't need to worry about restarting my http.Server when i change the interface settings?
52889;You might want to doublecheck but I think it should work
52890;that would be pretty ideal
52891;"my main concern comes from what it does with the interface; i know when you restart the service normally the interfaces stay up and it's all fine. But i'm not sure if it'll bring the interface down to apply changes if there are any"
52892;and if the act of bringing the interface down would mess with things
52893;You can easily verify this
52894;sadly not in a position to test this immediately since that would give me fast answers
52895;Just try it üòõ
52896;Can be the simplest of webservers
52897;on windows rn
52898;can't do it through wsl either i think
52899;virtual machine or docker (which uses a VM) should work
52900;When using the web server and creating a handler function the w & r do not have to be passed explicitly but are instead somehow injected into the function how do I add another argument to the function call without overwriting the w & r?
52901;closures
52902;https://gist.github.com/tsenart/5fc18c659814c078378d
52903;oh and the comments mention the alternative
52904;using methods on a type as handlers
52905;```gotype Thing struct { DB sql.DB}func (t Thing) HandlerWhatever(w ResponseWriter r Request) { t.DB.Whatever()}```
52906;That is perfect. Thanks so much. Closures look as if they may give a bit more flexibility so I just need to get my head around that now.
52907;closures are tight as fuck
52908;higher order functions are amazing tools
52909;embrace the functional paradigm
52910;One step at a time!!
52911;it's too late you've already got the brain worms
52912;Anyone know of or have used any postal service providers packages for go or wrappers perhaps to handle various shipping information for ups usps etc?
52913;Hey folks. I have an internal battle with respect to where interfaces should live.There's a belief in the Go community that methods/functions should define the interfaces they want which sounds sane. However in practice I don't really see how that works particularly if things share interfaces. I don't want to define the interface repeatedly in various packages for hopefully obvious reasons but I do want to do the idiomatic Go thing provided it makes sense.The specific code I'm working with right now is a cross cutting concern: logging. I have a set of services that all adhere to the same logging interface because we're standardizing our services around a logging abstraction we've written. It seems sensible to reuse the same interface isolated to it's own package somewhere.What are your thoughts toward in practice defining interfaces at the site they're used? How would you handle the logging concern specifically if you want to DI a logger into your instances?
52914;how do you dereference a return value (pointer to a slice of structs) from a function and then assign it to a variable?
52915;`returnedValue := functionCall()`
52916;will that automatically dereference the return value?
52917;/pointer
52918;no
52919;oh
52920;why would it automatically dereference
52921;is there a way to do that in one line?
52922;`returnedValue := functionCall()` probably
52923;or you could you know not return a pointer?
52924;well it is kind of large
52925;the struct itself and its also a slice of them
52926;and youre negating returning a pointer by dereferencing
52927;dereferencing causes a copy iirc
52928;hmm
52929;just use a pointer
52930;why do you want to dereference??
52931;ok i think i've got it thanks
52932;@jawad Why are you returning a pointer to a slice? Slices are small structs that contain a pointer to a backing array. There's not really a need to pass by pointer unless you want to manipulate the slice you're passing directly in the function in which case returning a slice doesn't make sense.
52933;oh yea that too
52934;you rarely want a pointer to a slice
52935;@Sgt_Tailor just an update i got aroudn to testing on a target machine and yeah changing the networkin interface settings and all that does not effect the http server
52936;what json type is this
52937;"```go c"": [0 12],```"
52938;is that a slice?
52939;but i can't say slice i dont think
52940;"if it\'s `{ c"": [0 12] }` it\'s an object"
52941;"```goVwap float64 `json:""a""````"
52942;if i have to do smth like that in a struct
52943;what would be the unmarshaled type
52944;slice yes
52945;but slice isn't a struct type
52946;?
52947;itd be a field type
52948;like what do i do in my struct
52949;in order to unmarshal that
52950;thats a json message being sent
52951;with that field
52952;"```gotype tradeMessageWithoutClose []struct { Symbol string `json:""sym""` Price float64 `json:""p""` Event string `json:""ev""` Status string `json:""status""` Message string `json:""message""` Volume float64 `json:""v""` Vwap float64 `json:""a""` Condition [] `json:""c""`}```"
52953;this is what i have but im trying to add the condition field
52954;yes its a slice
52955;i mean thats an error
52956;to do []
52957;yes because you..didnt give it a type
52958;yea so what do i do
52959;lmfao
52960;[]int
52961;[]float
52962;sure if thats the type
52963;you gotta know your data man
52964;okay thank u
52965;"``` c"": [0 12],```"
52966;you can look at the contents of the json
52967;and make an educated guess
52968;they're clearly numbers
52969;but they don't have a decimal point
52970;does that sound like any type of number that's familiar to you
52971;Hi! I tried to learn go a while ago and didn't get very far and am taking another stab at it. I seem to remember having to keep your code in a specific folder (maybe like ~/go/src/$project_name?) but can't find any mention of that in the tutorials/docs I've gone through so far. Is that no longer necessary? (additionally is there an article that documents how to properly structure a go project?)
52972;that's old news
52973;thank god
52974;?go modules
52975;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
52976;modules are the new thing
52977;write your code anywhere you want
52978;nice i was never a fan of that um feature
52979;an unfortunate wart indeed
52980;@deezy Would a module still be appropriate if I want this repo to have an executable that people interact rather than the module itself? Also is there a way to structure the code so I don't have to keep it all in the project root? In ruby when making a gem I'd keep the executable in bin/ and the code it uses in lib/
52981;Out of curiosity do we have anything to signify a Union of types / is there a better way of saying it can be one of two type instead of just doing `interface{}`
52982;Use actual interfaces üôÇ
52983;and not the fake empty one
52984;```gotype A interface { internalA() // !!!}```
52985;Using `interface{}` as a type to describe a union style argument sounds very antiidiomatic.
52986;```gotype Method interface { FuncType() ast.FuncType internalMethod()}type RegularMethod struct { ftype ast.FuncType Name string}func (m RegularMethod) FuncType() ast.FuncType { return m.ftype}func (m RegularMethod) internalMethod() {}```
52987;tis what I have
52988;hmm
52989;> Using `interface{}` as a type to describe a union style argument sounds very antiidiomatic.@cpd I know thats why i was asking about it
52990;go/ast does it
52991;if you're wondering
52992;Ok. Let me rephrase: Using anything to describe a union style parameter is very antiidiomatic go üôÇ
52993;i just want a simple way to have a single struct for a Ws and then that the data payload can either be a error struct or the sucessful struct
52994;Just wrap that in a data structure
52995;For some reason `go list ./...` appears to list stuff from the _subdirectory_. That is it lists packages in my other go projects.Anything I'm missing?
52996;instead of having an extra system of two seperate bits
52997;I don\'t see how it\'s antiidiomatic beyond the fact that you don\'t have an union type
52998;unless you want them to just not do unions
52999;"```gotype Foo struct { Data DataType Err error}func produceFooSomehow() Foo { ... }func main() { foo := produceFooSomehow();  if foo.Err != nil { // Handle error } // Use foo.Data}```"
53000;https://giphy.com/gifs/FOUArYBVQCvmI8EHxp
53001;That pattern is common when sending data over channels. You'd typically just return the error as a second arg from a function. `func produceFooSomehow() (Foo error)`
53002;yikes
53003;> unless you want them to just not do unions@_diamondburned_ Precisely.
53004;cringe
53005;just don\'t use a crucial data type
53006;Unions aren't in Go... üòï
53007;yes but there's still a need for that sometimes
53008;and Go stdlib literally does that
53009;Interesting I've not seen that. Got a link?
53010;https://golang.org/src/go/ast/ast.go?s=1599:1640#L41
53011;so in regards to my earlier question I found this: https://github.com/golangstandards/projectlayout which looks like exactly what I need. The only question I have now is how do I build my project? `go build` seems to look for just go files in the root
53012;I'm not really making the connection as to how that interface is a union.
53013;it restricts the types possible to only a certain in that package
53014;so you easily know at compile time (?) which types can be it
53015;@uplime to install?
53016;`go install pkgname/...` will install everything
53017;which should be in cmd/
53018;so cmd/
53019;isn't it at runtime diamond?
53020;@_diamondburned_ ideally i'd like to build it so it creates the binary in my pwd to test first then install it into my PATH
53021;You don't get things like type properties autocompleted linted properly etc when you use interface{} right?
53022;> it restricts the types possible to only a certain in that package@_diamondburned_ That sounds like a generic description of interfaces. I'm failing to make the connection to a union type (and I'm talking in the C sense).
53023;my editor warns me if a type cannot implement the interface in a type switch
53024;unsure if it's go lint of go build
53025;hm
53026;@cpd what would you use union types for?
53027;Maybe that will help us help you
53028;None
53029;@evandocarmo I don't know that's what I'm trying to work out. @_diamondburned_ thinks they're widely used in the go stdlib but I don't understand how the example they've given translates to a union.
53030;I mean in C
53031;what would you use them for in C?
53032;What's your definition of a union type?
53033;I think it's just a semantics issue here that's why I ask
53034;Ah that might explain why I'm not making the link.
53035;In a general sense you're representing different data types in the same memory space (re C unions)
53036;And why would you need to do that in a real life program?
53037;just like rusts enums :)
53038;I think I see where you're going. Are you suggesting an interface is a way of representing different data types?
53039;in go it's about functionality
53040;what methods a given type has
53041;which can be engineered to also represent data via getters/setters
53042;if necessary
53043;Conceptually I can see how they're sort of similar. But they aren't really the same thing... right?
53044;rusts construct presumably allows you to specify members as well as methods
53045;@cpd yes. You use an interface{} when you're not 100% of what datatype will be passed. Then you do a type switch to determine if the variable passed is of a desired data type.
53046;I'm not familar with the underthehood implementations but they seem to be different. Still in the end they achieve the same goal.
53047;The difference is that usually with union types you declare the accepted types up front (at least in typescript). In Go using interface{} you'll do the typechecking manually in the beginning of the function that receives the variable of type interface{}
53048;But yeah I would not say that this use of interface{} is an example of union types if I'm trying to be accurate.
53049;Right. I think that was really my point from the beginning because someone asked if you could do a union in Go...
53050;Any kind gophers here to help me out the problem i have?
53051;@AzyCrw4282 just ask away
53052;@_diamondburned_ said I was suggesting not to use a crucial type when to the best of my knowledge unions in the C sense don\'t exist in Go. I was trying to ascertain whether that\'s correct or not.
53053;yeah they don't
53054;I'm just pointing out that doesn't mean you can't use interfaces to achieve roughly the same behavior of storing certain known types
53055;because the Go stdlib does it as well and it's not completely ugly
53056;Great. so I am coming from java background and have been writing unit tests in golang to assess the behaviour of some of my functions. However trying to debug it on Goland wont work since the package that i am referring to arent part of the `main` package
53057;Undestood. Shall we start a conversation about generics... üòõ
53058;Debugger just pauses when i try to debug line by line
53059;nah we've had enough
53060;vscode lets you debug test functions
53061;I assume goland would too
53062;how are you writing your tests? Are you using the convention for file package and function names?
53063;Ahh.. figured it out. Just had to use an aliased import
53064;Thanks
53065;üëç
53066;i can't debug my tests with goland because i can only compile this stuff from within wsl üò¶
53067;Set up remote debugging.
53068;or just use logging üôÉ
53069;or delve/gdb
53070;I think the point is they want to use the IDE for debugging.
53071;i know that's the point
53072;that's why i recommend against debuggers
53073;as soon as you have to run your code literally anywhere except your specific personalize dev machine you can't figure out what's wrong with your code
53074;just attach your debugger to your production process duh üôÉ
53075;like a pro
53076;I take it you only use vi? üòÑ
53077;vim
53078;the superior editor
53079;üòÑ
53080;i think there's definitely a good use for debuggers mostly for things like
53081;stepping back through a crash
53082;i'm not sayin they aren't useful
53083;but i think they're a crutch
53084;or are used as one
53085;for completely mundane debugging/visibility
53086;that's fair don't reach for the debugger before you're sure you're logging usefully
53087;> vim@deezy What happens if you're somewhere other than your specific personal dev machine and you need to edit code? vim isn't installed everywhere üòõ
53088;i install vim
53089;I'm stirring the pot  ignore me üôÇ
53090;or i use whatever i have at hand
53091;i know HOW to use other editors
53092;i just don't
53093;¬Ø\\_(„ÉÑ)_/¬Ø
53094;delve can debug from across the network fyi
53095;I can use vim just fine on a regular machine tbh
53096;having only nano installed and not vim (looking at you NixOS) is more annoying
53097;also
53098;yeah
53099;i can use vi
53100;and that's posix
53101;so
53102;it's basically impossible for me to end up on a machine i need anything else on
53103;I feel like logging and string errors are dumb if they only serve developers
53104;Just make better tooling so and you can just look at all the program state on error
53105;what you're describing is a debugger and what people were talking about is why debuggers shouldn't be the immediate choice üôÇ
53106;just log to stderr
53107;don't want program to vomit logs? `./program 2> /dev/null`
53108;never been easier
53109;so I have a package A and package B. Package B imports package A (it implements an interface defined in A).I have a test file A_test that needs to import package B to test the interface implementation. however this creates a cyclic import cycle. how do I resolve this? do I move A_test out of package A?
53110;you can have `A_test.go` be in `package A_test` and the go tool figures it out
53111;you can even mix `package A` and `package A_test` in test files within one package and it does the right thing
53112;the only downside is that you then have to import package A in your tests but that also lets you experience your api immediately which is an advantage in its own way
53113;i do exactly this in <https://github.com/zephyrtronium/iolang/tree/master/internal> see e.g. `slots_test.go` and `slots_internal_test.go`
53114;Anyone know of any example go projects that wrap c++ libraries? Having trouble with it
53115;I see! so then that means I need to fix the tests to use only exported variables since A_test loses visibility to the unexported variables if I import A?
53116;the traditional approach is to expose a C API to the C++ API
53117;and call through that
53118;swig time?
53119;Think I may have realized what I'm doing wrong lol
53120;> I see! so then that means I need to fix the tests to use only exported variables since A_test loses visibility to the unexported variables if I import A?@thetruequ correct package A_test is a different package from A and so has to follow all the rules of being in a different package including seeing only exported symbols
53121;guys i need some help with golang
53122;let me know if anyone is free for a call
53123;"that's why the example i showed has two separate test files for ostensibly the same section of code; i prefer to use a separate package for tests wherever possible but i need samepackage tests for some internal things there"
53124;@Deleted User RING RING TELEPHONE
53125;added
53126;@Str≈ìm
53127;Whats everyones favorite high performance key value store?
53128;mem or disk?
53129;mem map[T]T disk bbolt/badger
53130;Need it to persist to file. I'll try badger
53131;@Str≈ìm what discord bot did you develop?
53132;@2Bot i think
53133;Da
53134;How did you know i made one
53135;gee i wonder
53136;Stalking my github
53137;Cool
53138;When you write all your code in go then the team decides it'd be best to rewrite it in javascript üôÉüòìüôÉ
53139;since im doing the if one is an error in unmarshaling go to the other
53140;"```gotype tradeMessageAgg []struct { Symbol string `json:""sym""` Price float64 `json:""p""` Ev string `json:""ev""` Status string `json:""status""` Message string `json:""message""` Volume float64 `json:""v""` Vwap float64 `json:""a""` Close float64 `json:""c""` Open float64 `json:""o""`}type tradeMessage []struct { Symbol string `json:""sym""` Price float64 `json:""p""` Ev string `json:""ev""` Status string `json:""status""` Message string `json:""message""` Condition []int `json:""c""` Volume float64 `json:""v""` Vwap float64 `json:""a""`}```"
53141;thse two structs
53142;i need a close and open in the trade message as well so the syntax is okay. how can i make it like null values so its there but never unmarshals cause i know certain data wouldn't go to that struct
53143;damn conrad that's a big rip moment
53144;hope you'll survive
53145;lol that json is awful
53146;not your struct
53147;but the json is awful
53148;calling either Close or Condition as `c` is awful
53149;i konw it has so many overlaps
53150;üò´
53151;I am going to rewrite it then hit em both with some benchmarks and see if I can't convince them
53152;but i start with trade message and if there is an error it goes to the other one
53153;but i need the close and open in the first one
53154;cause i use them iof it goes to the second sometimes
53155;but i want to make it like nil almost
53156;so it doesn't actually try to unmarshal into it
53157;you prob can't but gl
53158;@xblooos just check for err and if not move on
53159;i gotta do tradeMessage first cause condition happens on half of the data
53160;so if it isn't there it will still use
53161;"first struct has c type float64; it's not gonna pass w/ a []int"
53162;that struct
53163;yea
53164;but i need the CLOSE and OPEN
53165;cause i have code that uses that
53166;if the event type is one or the other
53167;i use the close or i use the condition
53168;that kinda thing
53169;the design is so shitty
53170;i know
53171;can i do like the field name
53172;but have
53173;a nil json value or smth
53174;so it wont interfere
53175;with the c from the conditions
53176;just so i can have the varible name so i dont have syntax errors
53177;can i do this
53178;"```goCondition []int `json:""c""`Close float64 `json:{}````"
53179;can i want the c data to go to condition
53180;but i need Close as a field for syntax purposes?
53181;or would i do this
53182;"```goCondition []int `json:""c""`Close float64 `json:""null""````"
53183;I actually don't know what you're trying to do
53184;just do
53185;im trying to keep a field varible
53186;wihtout actually giving it the chance
53187;to get data unmarhsled
53188;into it
53189;"`json:""""`"
53190;"```govar agg tradeMessageAggif err := json.Unmarshal(b &agg); err != nil { var msg tradeMessage if err := json.Unmarshal(b &msg); err != nil { return nil ohno } return msg nil}return agg nil```"
53191;yes
53192;then type assert btwn the 2
53193;but since in code down below
53194;i base whether i use the condition or the close on the event return
53195;it needs both to have it all
53196;cause it doesn't know that
53197;idgi
53198;paste more code
53199;okay
53200;```goif event == T { symbol := msg[i].Symbol if symbol != SPY { price := msg[i].Price newmsg := sendingmessage{ Symbol: symbol, Price: price, } chanDriver < newmsg } else { price := msg[i].Price chanSortMarketTrades < price } }```
53201;if the event is t i do this
53202;```goif event == AM { symbol := msg[i].Symbol if symbol != SPY { volume := msg[i].Volume vwap := msg[i].Vwap candleClose := msg[i].Close open := msg[i].Open newmsg := sendingmessage{ Symbol: symbol, Volume: volume, Vwap: vwap, Close: candleClose, Open: open, } chanDriverVolume < newmsg } else{ candleClose := msg[i].Close vwap := msg[i].Vwap volume := msg[i].Volume chansortMarketMcginley < candleClose chanSortMarketVwap < vwap chanMarketVolumeSort < volume } }```
53203;but if its AM i do this
53204;to me this is a difference but to golang
53205;its all coming from the same struct
53206;the first one cause thats all it reads not in the error one which is on a diff scope
53207;so i need to fill Close and Open in the first struct with the conditions so syntanx wise i can run it
53208;evne know i know it wont unmarshal into those fields
53209;but since Close has c the same as condition c
53210;i want to make sure it never unmarshals into close instead of condition on that one struct
53211;oh it's these structs
53212;so i wanna know if a null json return type would allow it to just be a field with no input
53213;yea the ones
53214;i sent before
53215;put each of those cases in a function
53216;e.g. the first one wold go to `handleTrade(t tradeMessage)`
53217;second `handleTradeAM(m tradeMessageAgg)`
53218;or sth dunno
53219;you get the gist
53220;then
53221;```gofunc decodeMessage(b []byte) (t interface{} err error) // this is the function I wrote abovev err := decodeMessage(b)// err handleswitch v := v.(type) {case tradeMessage: handleTrade(v)case tradeMessageAgg: handleTradeAM(v)}```
53222;just
53223;let me finish
53224;do that if you want to try and unmarshal both
53225;but if not then the code i wrote a few days earlier is a better idea
53226;you unmarshal partially to know the event then you reuse the same bytes to unmarshal into the full struct afterwards
53227;the rest is about the same: you return into an interface and type assert
53228;or just return the event
53229;i want to try the
53230;second one
53231;partially
53232;but how would i do that
53233;im not too good with switch cases
53234;I'm gonna write notveryoptimized code rn for brevity
53235;"```gofunc decodeMessage(b []byte) (interface{} error) { var event struct { Event string `json:""ev""` } if err := json.Unmarshal(b &event); err != nil { return nil err } var v interface{} switch event.Event { case T"": v = &tradeMessage{} case AM"": v = &tradeMessageAgg{} } if err := json.Unmarshal(b v); err != nil { return nil err } return v nil}```"
53236;there's one difference w/ this code
53237;your type switch needs to be ```goswitch v := v.(type) {case tradeMessage: handleTrade(v)case tradeMessageAgg: handleTradeAM(v)}```
53238;note how I'm switching on pointer types and not the regular struct type
53239;because I did `v = &abc{}` which means `v` is of type pointer
53240;god damn
53241;i am lost
53242;okay so its a method
53243;to simplify it
53244;can it just be a function that takes in the bye
53245;byte
53246;that's what decodeMessage is yes
53247;and not return anything
53248;why
53249;all inhouse
53250;what do you have against returns
53251;as i like to call it haha
53252;just to keep the code in a line
53253;for one thing
53254;that's a pretty bad idea
53255;tbh
53256;why is that
53257;keep the code that does one niche in one place
53258;don't put all of them in a fn
53259;code decodes json into type? iin a fn
53260;code does job to one specific type? in a fn
53261;don't do a gigantic if tree mumbo jumbo
53262;it'll turn out awful once you add enough
53263;hahah
53264;thats what i do
53265;rip
53266;igh ill outsource
53267;so u
53268;unmarshal the event first i see
53269;it's not like the application has to send a network request on every function call
53270;ah
53271;i just took a min to understand your code
53272;so switch cases is there just for simplicity righ
53273;so u dont hav eto go through
53274;two if statements
53275;or is there an added benefit
53276;it's basically elseif yes
53277;The compiler can better optimize some `switch` statements for you. E.g. it'll automatically use a binary search if you have a bunch of constant cases. But nothing you can't do on your own.
53278;"(Some compilers will use jump tables and probably gccgo does this; but cmd/compile does not yet.)"
53279;@shaky Let's keep emoji usage decent please.
53280;do people use gccgo?
53281;does anyone know a lightweight nvim setup
53282;without many plugins
53283;gccgo is kind of behind
53284;@R4BB1T ALE + gopls
53285;> @R4BB1T ALE + gopls@_diamondburned_ easiest way to get ALE?
53286;vimplug
53287;ty
53288;I don't wanna be that guy that comes in with dumb questions but any idea why I'm completely unable to use mvdan.cc/xurls? Been messing around but no luck gets stuck at that found message
53289;what are you importing / what is your .mod requiring
53290;could you try github url instead
53291;maybe there is something with the redirection
53292;huh that was weird you mentioned .mod so i looked and it wasn't requiring xurls so i deleted it and reinitiated it completely fixed it
53293;had been messing around for a while changing a bunch of stuff and trying it without redirects and nothing worked until that
53294;can i import packages without setting the gopath?
53295;use modules
53296;?go modules
53297;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
53298;what if i go get someone else package and use it to my go project. How can i make my project work on other devices considering that the other devices dont have the package that i go get
53299;If you have a module
53300;In your project
53301;It will get all the things required
53302;It‚Äôs a dependency management tool
53303;@panaginip because this isnt javascript or python. When you build you get a whole binary
53304;So thats a non issue
53305;Static linking ftw
53306;Hell yea
53307;Hello I've a question is it possible to splice a timerange into slices. When I search for it on google I can't find any guide or stackoverflow topic about it
53308;A time.Duration?
53309;for example
53310;``` startdate := 20200101T01:00:00Zenddate := 20200801T16:00:00Zinterval := X ```
53311;so the timerange shoudl be slices into x slices
53312;You want to calculate the interval between 2 timestamps?
53313;no the interval is given
53314;You want to split the time range into X pieces?
53315;yes
53316;Get the duration between the two times divide by X and create a slice from those offsets
53317;hmm alright let me try that
53318;thanks guys!
53319;```2020/09/22 03:18:35 missing destination name customerNumber in main.Customersexit status 1```
53320;https://github.com/Shazeb01/golangrestapi/blob/master/main.go
53321;why im getting this error?
53322;I think sqlx needs annotations in your struct to tell you which column they come from
53323;what do your columns look like?
53324;same as struct
53325;show me a describe table
53326;also ```var db sqlx.DBvar err error```globals is something you don't want just pass db to getPosts function
53327;you want my mysql screenshot?
53328;sure
53329;None
53330;"It\'s because your column names start with lowercase whereas your struct names I think start with uppercaseTry adding changing CustomerNumber string `json:""customerNumber""`to CustomerNumber string `json:""customerNumber db:""customerNumber""`"
53331;Same
53332;still errors on customernumber?
53333;yes
53334;"```package mainimport(""fmt"")func greetUser(msg,name string){ fmt.Println(msg,name)}func main(){ greetUser(""hello"",""protik"")}``` will this type of main() function declaration cause any problems in the future ?"
53335;You cant change the function signature of main
53336;So its fine its the only way
53337;I mean the order like the main is generally declared after import
53338;Doesnt matter
53339;Ah ok ty
53340;Hey guys there is no best databases for local project? I mean all of them are great and it all goes into which you prefer? Or some of them have edge over others ones?
53341;depends on your data i guess
53342;and the operations you wanna perform
53343;Most of data will be strings/ints and just to do some calculations with all of them
53344;what kinds?
53345;you have amount of x item and price of it. You calculate total price of it and later you let's say sell them and you calculate sell price  total price to get profit and etc
53346;for smallgeneric purposes with no performance or storage worries you can run a postgres container on docker
53347;if overall data will be small you can instead go for an inmemory db
53348;dbeaver is easy to use UI for many DB related stuff
53349;fellas can i use a channel as a struct field without losing its actual reference
53350;sure
53351;guys
53352;i need some 1 on 1 help
53353;send me a msg if u can
53354;ask here
53355;not in dms
53356;https://github.com/complexorganizations/SystemScanner/blob/master/main.go
53357;how do i use the tree command?
53358;so the way it works right now is it goes to `/` and tries to go to every folder in the system
53359;but if there was something like a tree command in golang it would be way easier
53360;Google golang path walk
53361;or something like that
53362;and you'll find it
53363;https://golang.org/pkg/path/filepath/#Walk
53364;a project using Walk https://github.com/therealfakemoot/perminator
53365;i am currently using that
53366;okay cool
53367;the issue is
53368;then your question isn\'t is there a thing that does X
53369;lets say we let it walk home than it just walks home
53370;your question is i\'m using X and having problems here\'s what i\'m doing
53371;dosent go to sub folders
53372;Can you show some code?
53373;https://github.com/complexorganizations/SystemScanner/blob/master/main.go
53374;On mobile right now too much work to click links
53375;"```func findAllFiles() { // go to all the dir using the map (remove this map after finding all the files.) // find all files and put the path on a map filepath.Walk("". func(path string info os.FileInfo err error) error { if err != nil { log.Fatal(err) } fmt.Printf(""%q\ path) return nil })}```"
53376;hey guys wanted to ask if my IDE compiles old code I mean I have added code but it stills compiles old one. I need clear cache for it to work fine?
53377;use vscode or just terminal
53378;thats a ide based issue and not a golang based issue
53379;i am using goland
53380;@Sgt_Tailor how to goland
53381;I understand that. But simple restart of idea didn't helped that's why I asked about cache
53382;que?
53383;I don't use goland but I'm pretty sure that shouldn't be necessary
53384;goland just invokes go build
53385;no magic cache
53386;So what I can do to fix it? Restart my pc?
53387;What is the actual issue?
53388;Make sure the file is actually saving and you're building the right file
53389;Sounds silly but it can happen that you're working on the wrong folder or something
53390;Does anyone have a good understanding of the decision logic in the Go GC that cleans up channels? Do you have any resources on it?
53391;If there are no more references to the channel it gets deleted just like any other reference
53392;?go channels
53393;Understanding channels <https://www.youtube.com/watch?v=KBZlN0izeiY>  Sgt_Tailor
53394;I have sentence1 which is displayed perfectly with ``fmt.println`` and sentence2 who was changed up and in my code he is different of what I see when I run my program
53395;> If there are no more references to the channel it gets deleted just like any other reference@Sgt_Tailor Right but how is the reference counting done?
53396;"> ```> func findAllFiles() {> // go to all the dir using the map (remove this map after finding all the files.)> // find all files and put the path on a map> filepath.Walk("". func(path string info os.FileInfo err error) error {> if err != nil {> log.Fatal(err)> }> fmt.Printf(""%q\ path)> return nil> })> }> ```@Deleted User I\'m not 100% sure but I think walk walks up the tree not down."
53397;walk should go down
53398;nvm then
53399;@cpd https://www.ardanlabs.com/blog/2018/12/garbagecollectioningopart1semantics.html
53400;I don't even think `walk` recurses
53401;It just walks a single dir
53402;It's not exactly reference counting
53403;it's based on analyzing inuse sections on the heap
53404;Thanks I'll give it a read. My specific case is that I have events triggering a callback. The timing of the events  as can often be in the real world  is unpredictable. The callback sends on the channel and I want to validate my assumption that after a prolonged period the GC still knows the channel _could_ be used.
53405;if you have a reference to it somewhere it will still be there
53406;^ it really isnt much more complicated than that
53407;Right that's what I thought.
53408;Reading the documentation again: `Walk` does recurse as long as the `WalkFunc` doesn't return `SkipDir`
53409;theres no wild n wacky behaviour here
53410;if theres a ref it lives
53411;If you have the ability to use the channel in your code it means you have a reference to it
53412;Right but references can be implemented in different ways
53413;Hence by query
53414;youre way overcomplicating this
53415;That would be a nightmare wouldn't it? Having to check if your variables haven't been garbage collected before using them?
53416;If you can access the variable it's valid
53417;its really simple
53418;idk what language youre thinking of but its not full of sneaky surprises here
53419;I just like validating my assumptions.
53420;if you can access it it wont be garbage collected
53421;a really simple general rule
53422;Thanks
53423;dont overcomplicate a language that goes out of its way to not be complicated
53424;I think he gets it lmao
53425;what does this mea
53426;```gopanic: json: cannot unmarshal array into Go struct field .c of type float64```
53427;field .c of type float64
53428;that means like
53429;the json field c righ
53430;No
53431;you are trying to decode an array into a float
53432;you have an array and are trying to put it in a float
53433;The message says into Go struct field .c
53434;"```package mainimport ( fmt"" log"" os"" path/filepath"")func main() { filepath.Walk(""/ func(path string info os.FileInfo err error) error { if err != nil { log.Fatal(err) } fmt.Printf(""%q\ path) return nil })}```"
53435;how do i make it keep going even if we encounter a issue?
53436;change `log.Fatal(err)` to `log.Println(err)`
53437;i feel stupid now
53438;You would want to `return` in that error check as well since it's a function that runs for each file `Walk` finds
53439;damn it
53440;after 2 hours
53441;its still an error
53442;So you don't end up trying to use something that's invalid
53443;@xblooos show some more context
53444;https://hastebin.com/pasevejawu.cs
53445;here
53446;Show the struct and show the json
53447;yea
53448;lemme get the json
53449;in there
53450;"so I\'m guessing it\'s this struct? ```Gotype tradeMessageAgg []struct { Symbol string `json:""sym""` Price float64 `json:""p""` Ev string `json:""ev""` Status string `json:""status""` Message string `json:""message""` Volume float64 `json:""v""` Vwap float64 `json:""a""` Close float64 `json:""c""` Open float64 `json:""o""`}```"
53451;https://hastebin.com/qeyejinuje.cs
53452;yea
53453;i sent antoher one
53454;with the data
53455;im accepting on the bottom
53456;Close is a slice of floats...not a single float
53457;:robpike:
53458;we already established that yesterday
53459;looks like you're unmarshaling one of those JSON blobs to the wrong struct
53460;one struct has a slice for c one has a float
53461;yea
53462;so i start with the trade message
53463;So
53464;use the right struct
53465;hold up
53466;i have a small resonsing
53467;maybe it makes sense
53468;maybe its wrong
53469;but
53470;any reasoning that leads to the incorrect struct is wrong
53471;yea
53472;lemme spill so maybe u can hear the reasoning
53473;i know its wrong
53474;cause obv im getting
53475;errors
53476;but
53477;trade message is the main data flow and trade message agg is once every minute. the trade message has a conditions []int field but it doesn't come all the time
53478;the c is the only way i can see to separate
53479;if its a AM or T coming in
53480;but sometimes the condition doesn't get sent to me so it goes into that one right away
53481;or im trying to do smth like that
53482;if that makes sense
53483;no
53484;hmmmmm
53485;so to differentiate AM from T
53486;i used the c field
53487;one is a []int
53488;I get what you're saying
53489;which is for T
53490;oh
53491;this is just not the way to approach this problem
53492;yea
53493;Hiya guys I'm trying to do a 7/24 microservice that writes to a PostgreSQL db using GORMv2. Anyone have an idea on how to detect connection failures and have some sort of autoreconnect?
53494;im ready to learn
53495;üôÇ
53496;https://github.com/lib/pq/issues/318 @Atakan
53497;oh cool my coworker opened the issue lol
53498;would i go about it
53499;using switch cases?
53500;Lmao i think the idea would be to make a request when required... if it fails due to connection just reconnect
53501;@xblooos are these two forms of the JSON coming from the same endpoint or are you using two different endpoints?
53502;same endpoint
53503;on the data side its poorly designed
53504;but i gotta adapt
53505;one strea
53506;custom json unmarshaller
53507;stream of data
53508;yea ive heard that before but im super trival at my coding skills
53509;what would that entail
53510;https://mariadesouza.com/2017/09/07/customunmarshaljsoningolang/
53511;start by reading this
53512;alright
53513;im looking at the partial unmarshal
53514;so its possible to partially unmarshal the data
53515;meaning just a field that u know is gonna be there
53516;and then save the data and fully unmarshal it
53517;into the struct that u know is correct?
53518;yes
53519;phew
53520;alright i shall attempt it
53521;can i also iterate
53522;over []byte data
53523;?
53524;Iterate.. yup
53525;`for _ it := range arr {}`
53526;thanks
53527;is it faster to unmarshal the entire byte slice and then iterate over it
53528;or iterate and then unmarshal part by par
53529;or it is a negligable difference
53530;can you show what your json is like
53531;is it two completely distinct messages being returned
53532;how would I make a temp cache with a map that deletes itself like a minute later ?
53533;or some type of wrapping message with data in it that changes
53534;https://hastebin.com/qeyejinuje.cs
53535;at the bottom there
53536;wdym by deletes itself
53537;like clears the entire map
53538;clears the map object
53539;or like the enire map object is deleted
53540;and gcd
53541;yeah
53542;should I make a function inside a sleeping goroutine ?
53543;a loop that checks if every event is past the deletion time ?
53544;@xblooos when you call this endpoint
53545;do you specifcy which data is returned
53546;like hey give me the TRADE data
53547;or give me the AGREGATE data
53548;no
53549;both come
53550;through the same stream
53551;so you get two objects returned
53552;everytime?
53553;oh i see
53554;first thing i would do is sperate this big ol function into a bunch of smaller functions
53555;some times
53556;you're like 6 levels deep of nesting
53557;i get like
53558;one type of data
53559;then another type mixed in
53560;but what sucks is thaat they both have
53561;"c"":"
53562;with a diff type
53563;is this ev thing always there
53564;mhm
53565;yea so rn im trying to unmarshal that first
53566;then decide which struct
53567;wait if i have type []byte
53568;shouldn't i be able to do
53569;for i := range []byte (whatever it is)
53570;then []byte[i]
53571;replacing byte with the actual varible name
53572;yeah no
53573;that doesn't work how you think it does
53574;one byte of a json document would be something like `}` or `0` or any random character
53575;ohhhhhhhh
53576;so one whole thing tg
53577;i mean []byte represents the entire json document
53578;text is bytes
53579;number is bytes
53580;ah
53581;yea im mixing it up in my head
53582;https://github.com/therealfakemoot/pom/blob/master/poe/types.go#L147
53583;i sent you this several times already
53584;showing how you can write a custom Unmarshal function to handle i don\'t know what type this json field will have
53585;decode the questionable thing into interface{} do a type assertion to find out what it is
53586;that code is just way to muhc
53587;for me to understand
53588;its like 5 lines
53589;```func (sa SocketAttr) UnmarshalJSON(data []byte) error { var val interface{} err := json.Unmarshal(data &val) if err != nil { return err } switch val.(type) { case string: sa.Type = val.(string) case bool: sa.Abyss = val.(bool) } return nil}```
53590;you have your top level thing
53591;```gotype Payload struct { A B C D ThingWeCareabout ThingWeCareAbout}type ThingWeCareAbout struct {}func (t ThingWeCareAbout) UnmarshalJSON(data []byte) error {}```
53592;and you do that
53593;so i do interfeace{} to unmarshal it
53594;just so i can access the data
53595;and see what it is
53596;in that sense?
53597;interface{} will tell go to make its best guess
53598;and go is good at guessing
53599;ahhh
53600;then once you have it expressed in Go types
53601;you can write Go code
53602;to make decisions
53603;my data provider
53604;rlly made it that much hardre
53605;yep
53606;and now it can even have two diff types of data
53607;working with shitty data is shitty
53608;in one json
53609;bad endpoints are everywhere
53610;mssg so i gotta unmarshal it look trhough it and if its not consistent
53611;throw it awayu
53612;but the ways to handle them are pretty similar
53613;yep
53614;yea
53615;thank u sm
53616;life is an unending nightmare
53617;under capitalism
53618;they rlly charging me 500$ for that bullshit
53619;welcome to the job
53620;that is geared toward coders
53621;and when u submit a complaint they say we will take it undre consideration my ass
53622;it's probably a node api
53623;on the backend
53624;so they don't even think about types
53625;you don't have to write a coherent schema when you can shove anything anywhere
53626;guys how do i turn all the output into a var?
53627;if your data structures arent just one big json object byebye üëã
53628;lol
53629;"```func findAllFiles() { // find all files and put the path on a map filepath.Walk(""/ func(path string info os.FileInfo err error) error { if err != nil { log.Println(err) } fmt.Printf(""%q\ path) return nil })}```"
53630;by putting it into a variable before printing it
53631;bytes.Buffer strings.Builder
53632;simple string concatenation
53633;it\'s like asking how do I fill this tank with water after i fill a bucket and pour it into the river
53634;you take the bucket and pour it into the tank first
53635;lol
53636;what happens
53637;if a json data has more than one index
53638;but u unmarshal it into a struct type
53639;and not []struct
53640;will i just get an error or smth
53641;try it and see
53642;wdym more than one index
53643;If it's an array and not a struct it won't work
53644;"Can somebody help me out how to send a POST request to Burp Suite with Go? I have Burp listening on 127.0.0.1:8080 and in my code I have the following:```\tparams := url.Values{\t\t""grant_type"": {""authorization_code""},\t\t""code"": {code},\t\t""redirect_uri"": {client.redirect_uris[0]},\t}\tpayload := strings.NewReader(params.Encode())\t// req err := http.NewRequest(""POST authServer.tokenEndpoint payload)\treq err := http.NewRequest(""POST http://localhost:8080/token payload)\tif err != nil {\t\t// TODO: Render error\t\tlog.Fatalln(err)\t}\treq.Header.Set(""ContentType application/xwwwformencoded"")\treq.SetBasicAuth(url.QueryEscape(client.id) url.QueryEscape(client.secret))\tresp err := http.DefaultClient.Do(req)```"
53645;what is not working
53646;Burp Intercept is On. Request is being sent. It does not intercept and fails further in the code while parsing JSON which it did not receive because of course Burp never received the request and couldn't send JSON.
53647;The problem is burp is proxy you're tyinf to post to it like it's an http server
53648;It doesn't have to be Burp by the way. There's a node app endpoint commented out
53649;You need to POST to the original end point but tell you httpclient to use a proxy
53650;I see. So I'll be posting to `authServer.tokenEndpoint` but how can I configure the request to go via proxy?
53651;https://golang.org/pkg/net/http/
53652;hmmm
53653;if only there was some way to
53654;search for a specific term on a page
53655;I have to use my own instance of Client instead of DefaultClient.Do(req) I guess
53656;also
53657;https://golang.org/pkg/net/http/#Transport
53658;yes if you want to do anything interesting you'll need your own client
53659;literally anything except a bare GET/POST requires a custom client
53660;or at least is best suited by one
53661;Ok thanks I'll figure it out from here I think
53662;customizing the Transport is how you'd set your proxy
53663;Is there a way to list all standard library packages with `go list`?
53664;i don't think so
53665;https://golang.org/pkg/
53666;https://play.golang.org/p/l0iLtkD1DV
53667;I haven't tested as on mobile but here is a dialer using a proxy @DalinarBishopPavel
53668;or maybe the dialer
53669;i haven't done much fancy network shit in go
53670;Also go tools like ffuf can use a proxy so you could look there for a concrete example
53671;i finished
53672;doing the partial unmarshal
53673;and everything
53674;and i get this error still sometimes
53675;panic: json: cannot unmarshal array into Go struct field .c of type float64
53676;i asked before but forgot what it means
53677;you have an array in your json
53678;and you're unmarshalling that array field to a float64 field in your struct
53679;Partial unmarshal.. I like it
53680;how can i debuyg it
53681;to figure out which exact field its talkking about
53682;it's talking about `c`
53683;"```package mainimport ( fmt"")func Sqrt(x float64) float64 { z:=1.0 for x:=0.0;x<10.0;x++{ z = (zz  x) / (2z) } return z}func main() { fmt.Println(Sqrt(2))}``` so im trying to find the sqrt of 2 using Newton\'s method. An exercise from go tour. Can anyone point out where im doing wrong"
53684;`Go struct field .c of type float64`
53685;"```gotype tradeMessageAgg []struct { Symbol string `json:""sym""` Price float64 `json:""p""` Ev string `json:""ev""` Status string `json:""status""` Message string `json:""message""` Volume float64 `json:""v""` Vwap float64 `json:""a""` Close float64 `json:""c""` Open float64 `json:""o""`}```"
53686;here
53687;the CLose one
53688;the close is a single float return tho
53689;exactly
53690;and you have an array for that field in the json
53691;so
53692;you can't put an array into a float
53693;the data coming in
53694;is a float
53695;singular
53696;tho
53697;doesn't seem like it
53698;or i guess it actually isn't
53699;then
53700;@K R I T afaik it's just an approximation
53701;you need to use more iterations for more accuracy
53702;But its printing 0.23
53703;oh
53704;The tour reads:> Computers typically compute the square root of x using a loop. Starting with some guess z we can adjust z based on how close z¬≤ is to x producing a better guess:> > `z = (zz  x) / (2z)`
53705;Your code reads: `z = (zz  x) / (2z)`
53706;it's suppose to be `z =`
53707;yeah
53708;Do you spot a difference? üôÇ
53709;Also note that your loop variable `x` has the same name as the parameter `x`. The `x` in the formula refers to the number you're calculating the square root of not the iteration.
53710;Yeahhh....
53711;Hehe ty
53712;guys got a question
53713;can we somehow control the camera and the mic using golang?
53714;That  and x messed the whole thing
53715;@Deleted User did you google it
53716;yes found 3rd party library but nothing from standard and each package is for like windows / linux / mac
53717;nothing all in one
53718;It's not a cross platform sort of thing
53719;doesnt sound like a standard library sort of thing either
53720;second result on google
53721;uses opencv
53722;is opencv cross platform
53723;cgo
53724;but maybe
53725;damn this just hit my heart heavy
53726;"```go[{""ev"":""AM"",""sym"":""CVS"",""v"":7243,""av"":3369051,""op"":58.81,""vw"":58.691,""o"":58.685,""c"":58.69,""h"":58.705,""l"":58.68,""a"":58.905,""z"":89,""n"":1,""s"":1600791480000,""e"":1600791540000},{""ev"":""T"",""sym"":""XOM"",""i"":""52983543121492"",""x"":10,""p"":36.1,""s"":354,""t"":1600791542084,""z"":1},{""ev"":""T"",""sym"":""XOM"",""i"":""52983525430354"",""x"":1,""p"":36.1,""s"":100,""t"":1600791542085,""z"":1}]```"
53727;üò´
53728;why do they MIX AM WITH T
53729;so i did the partial to see if the leading one was AM or T
53730;and then pick a specific struct
53731;but not its deeper than that
53732;how can i attempt to solve this
53733;what the fuck is that data
53734;"```gotype Yo []YoElementtype YoElement struct { Ev string `json:""ev""` Sym string `json:""sym""` V int64 `json:""v,omitempty""` AV int64 `json:""av,omitempty""` Op float64 `json:""op,omitempty""` Vw float64 `json:""vw,omitempty""` O float64 `json:""o,omitempty""` C float64 `json:""c,omitempty""` H float64 `json:""h,omitempty""` L float64 `json:""l,omitempty""` A float64 `json:""a,omitempty""` Z int64 `json:""z""` N int64 `json:""n,omitempty""` S int64 `json:""s""` E int64 `json:""e,omitempty""` I string `json:""i,omitempty""` X int64 `json:""x,omitempty""` P float64 `json:""p,omitempty""` T int64 `json:""t,omitempty""`}```"
53735;lmfao
53736;üò´
53737;its suppeod to be two diff messsage data types
53738;but now they sometimes parse it togther
53739;into one
53740;lets say i have
53741;one data struct combining both
53742;and then when i see the symbol of each one i choose the fields that i need
53743;A slice of interface from the json and use the switch type checking from the other day?
53744;Genuine question because I dont really work with JSON much
53745;yea that issue
53746;but i can't do that anymore
53747;cause now there r two data types in one message
53748;and i cant iterate unless i unmarshal
53749;There are 2 json objects in an array
53750;there r two diff struct types of objects in one array
53751;Yes
53752;but i can't iterate over an non unmarshaled json message so i can't tell what type it is
53753;until i unmarshal it
53754;where maybe the interface thing would help actually
53755;So my question to deezy or sentry or Doad or whoever is cant you just unmarshaled into a []interface{} to get the separate elements of the array and the for range and use the switch type check and decode each one properly
53756;I cant really answer the question because I dont use json often
53757;i believe that was the path they were trying to send me on
53758;but for time purposes i went a diff route that eneded up not working
53759;"but when i have ```goCondition []int `json:""c""`Close float64 `json:""c""````"
53760;you can't type switch like that
53761;because if you do that then the array will contain maps not structs
53762;does it unmarshal into the first one
53763;or the correct one
53764;the best way is to unmarshal into a slice of RawMessages
53765;Aaah of course
53766;That makes sense
53767;how would i do that
53768;well the only issue
53769;is how would i konw the data that i wanna grab
53770;if its all just gonna be ints floats and whatnot without field names
53771;huh
53772;field names are all there
53773;ohh yea
53774;i see that now
53775;"```goCondition []int `json:""c""`Close float64 `json:""c""```"
53776;if i had a float coming in
53777;You unmarshal into a slice of RawMessages so you capture each element of the JSON arrays the loop round that and use switch type check
53778;would it unmarshal into Close or condition
53779;neither
53780;if it was c
53781;It'll error out
53782;I'm pretty sure I posted you the code to this yesterday
53783;why is that
53784;the float64 is there
53785;yea u showed me
53786;because duplicate field
53787;a switch case?
53788;in the same struct
53789;ah
53790;what is a switch type check
53791;https://tour.golang.org/methods/16
53792;okay yea so if im doing rawmessages
53793;thank u doad
53794;didn't even konw that part
53795;so if im doing rawmessagse its a map
53796;if you're doing interface {} it's a map
53797;RawMessage is just a bytes slice
53798;read the docs
53799;so the rawmessage
53800;has to do with teh struct
53801;that ur unmarshaling into
53802;i read a small article on it
53803;`BenchmarkAdd2 1000000 1492 ns/op 64 B/op 1 allocs/op` so i have created a data structure to store a lot of strings in a little space .. now even tho it has a time complexity of O(1) ... it technically takes a lot longer that normal stuff like binary trees or tries..... My question is: is this 1492ns/op a lot? (i know its kinda open ended still)
53804;what data structure is it?
53805;how many ns does a different structure take
53806;well.. data structure is mine (need to get it pantented.. can i?). for the second question... i will have to implement some other structure... and i don't wanna TwT
53807;that's exactly why i came here lol
53808;im sure theres libraries out there
53809;add what though
53810;also dont get a data structure patented....
53811;and profile it
53812;lol
53813;i think its hard to defend data structure being patented anyways
53814;potentially extremely expensive affair
53815;> also dont get a data structure patented....@Str≈ìm well that's my decision... still why tho?
53816;software patents are a difficult topic patenting data structures seems even more difficult
53817;just look how long the Google vs Oracle legal battle took
53818;probably hundreds of millions have gone into a legal battle over a few lines of code
53819;oof
53820;if you cant afford to take it to court you loose the patent
53821;Whatever type of data structure it is it's likely analogous to others or composed of others
53822;computer scientists have been around for a bit
53823;so hard to patent in that regard
53824;It‚Äôs probably in a paper / github repo somewhere just maybe under a different name
53825;well ... its a 6 dimensional tensor.. so yeah ig
53826;and why would you want to patent something that small
53827;actually I've seen a patented data structure before
53828;something about a uhh
53829;rank 6
53830;think it was an LRU cache
53831;yikes
53832;6 dimensional tensor isnt patentable...
53833;You can\'t make a cache like this
53834;yikes indeed
53835;I don‚Äôt think you could patent an ndimensional tensor
53836;definitely not
53837;i wanna get a patent cuz i don't want others to use it..
53838;think it's this https://en.m.wikipedia.org/wiki/Adaptive_replacement_cache
53839;you wont be able to patent a tensor mate
53840;why would you want that though
53841;that shits already out in the public
53842;and if it exists in the public before you try to patent it its not patentable
53843;private repo
53844;Bell Labs used to own a ton of software parents  but most are public domain now iirc
53845;and dang it.. my brother sucked up all of my internet... i can't even do a google search texts are taking super long to reach TwT
53846;tensors by definition are multi dimensional
53847;so you have something that already exists
53848;ergo not patentable
53849;copy monkeypatch's LICENSE
53850;which basically says you cannot use it for anything lmao
53851;well yeah.. but of course i am not defining it as a tensor (just counting on counterargument)...
53852;I mean having no license is equivalent to that yeah? Aside from ‚Äúyou can probably read this code‚Äù
53853;If it‚Äôs a tensor and you call it something else it‚Äôs still a tensor
53854;try give a brief explanation of how it works ill see if i can find anything like it
53855;inb4 reverse index :kkk_LOLTROLLFACELOL:
53856;having no license isn't explicit enough
53857;https://github.com/bouk/monkey/blob/master/LICENSE.md
53858;fair enough
53859;```Copyright <name>I do not give anyone permissions to use this tool for any purpose. Don't use it.I‚Äôm not interested in changing this license. Please don‚Äôt ask. ```
53860;I wonder if licenses are licensed :Thonk:
53861;like if the license texts are licensed under CC or sth
53862;how far does the rabbit hole go
53863;hmmmm
53864;diamond im having trouble understanding. do i need to make a struct even if im using json.rawmessage
53865;yes
53866;rawmessage parses the JSON into finer structures
53867;say you have `[{} {}]`
53868;a `[]RawMessage` will give you 2 byte slices
53869;each byte slice containing each object in its raw data
53870;ah yes
53871;okay
53872;yea im there
53873;OHHHHHH
53874;SO THEN
53875;u can parse
53876;each one
53877;into its own strcut
53878;struct now
53879;like iterate over it now
53880;since its seperated
53881;yes
53882;vs the one byte message that came in as one
53883;lin e
53884;NO WAYYYY
53885;u couldve said that from the start
53886;haahha ^joking
53887;bruh
53888;but
53889;wow
53890;what the
53891;thank u sm
53892;damn that rlly took me an hour ot understand
53893;yeah np
53894;typing complete thoughts over one line would be nice tbh
53895;sorry
53896;i am that kinda typer since forever. I get timed out a lot on servers for spamming
53897;i bet you do
53898;:hugged:
53899;alright so finally i have everything parsed single line by single line
53900;"```go{""ev"":""T"",""sym"":""TSLA"",""i"":""47690"",""x"":19,""p"":429.53,""s"":3,""c"":[37],""t"":1600795162576,""z"":3}cannot unmarshal filter json: cannot unmarshal object into Go value of type main.tradeFilter```"
53901;that is the data that can come in and im trying to parse it into this struct to determine the ev
53902;"```gotype tradeFilter []struct{ Status string `json:""status""` Message string `json:""message""` Event string `json:""ev""`}```"
53903;that's a slice
53904;the json is an object
53905;oh it was a slice before
53906;but since im doing rawmessage
53907;its not singular since i iterate over the []byte type?
53908;you don't iterate over rawmessage
53909;you just treat it like the original []byte json
53910;"```govar b json.RawMessageif err := json.Unmarshal(b &thing); err != nil {```"
53911;"```gofor msgBytes := range chanMessages { var savemsg []byte savemsg = msgBytes //fmt.Println(string(msgBytes)) var msgT []json.RawMessage //fmt.Print(fmt.Sprintf(""%v"",msg)) err := json.Unmarshal(savemsg &msgT) if err != nil { fmt.Println(""cannot unmarshal type"") } //fmt.Println(msgT) for i := range msgT{ fmt.Println(string(msgT[i])) var msgfilter tradeFilter err := json.Unmarshal(msgT[i] &msgfilter) if err != nil { fmt.Println(""cannot unmarshal filter"",err) } fmt.Println(msgfilter) }```"
53912;yeah like that
53913;if i do []json.RawMessage i can get a slices of bytes
53914;you can do `i msg := range msgT` though
53915;instead of `msgT[i]`
53916;oh
53917;what is that term called
53918;not a reference but a
53919;wut
53920;like when u do the two things for the range
53921;one is an index
53922;index
53923;and copy of the value
53924;What are you trying to do @xblooos ?
53925;nah just figure the right term for the copy of the value
53926;but i think that works haha
53927;@xblooos when you're talking about a code thing it may be helpful to copy/paste the code thing you're talking about
53928;what is this `foo[0]` called
53929;or whatever
53930;ah ```goi msg := range msgT```
53931;then what is msg in this case called
53932;there we go
53933;you're ranging over a channel
53934;which can do one return value or two
53935;slice bruh
53936;ranging over a channel only gets you 1 value
53937;https://tour.golang.org/concurrency/4
53938;a channel close breaks the loop
53939;nah range has a 2 value return on channels too
53940;but if it's a slice
53941;https://tour.golang.org/moretypes/16
53942;hooray documentation
53943;I don't think range has a 2 value return on channels
53944;i mean
53945;the tour says it does
53946;`Receivers can test whether a channel has been closed by assigning a second parameter to the receive expression`
53947;yeah outside of range
53948;```v ok := <ch// ok works```
53949;oh
53950;but not in range https://play.golang.org/p/5gmp_sJ7dZO
53951;fucking
53952;yeah
53953;okay
53954;my coc ssays gocode binary not found
53955;whats the way to fix this?
53956;it works fine in vscode though
53957;do i have to specify the path somewhere
53958;just use gopls
53959;So I'm giving it a go implementing CQRS+event sourcing for this tiny tiny app just as a learning project  and I'm now working with mapping _commands_ to _handlers_. I've seen some use a string type but I'm trying something like this a simplified version that checks type:```golangfunc (c commandBus) Handle(cmd Command) error { for _ aggregate := range c.aggregates { for _ command := range aggregate.Commands() { if reflect.TypeOf(cmd) == reflect.TypeOf(command) { aggregate.Handle(cmd) return nil } } } return nil}```feasible?
53960;yea no reason to use gocode these days
53961;@elonna cache the typeOf
53962;https://github.com/diamondburned/arikawa/blob/master/bot/command.go#L7
53963;Hm it's slow then?
53964;I will check that out
53965;not that slow
53966;man I abstracted this a lot
53967;took me a while to find what I want
53968;>commands isnt a map
53969;Elonna pls
53970;> just use gopls@_diamondburned_ do i need to get this separately? is there a way i can share stuff between the dependencies i installed on vscode and what i have on nvim
53971;idk im confused
53972;gonna go do some googlin
53973;dependencies have nothing to do with your editor
53974;i apoligise if my following question is a noob question but i've been searching around for like an hour
53975;vscode just use gopls from your PATH
53976;same for vim
53977;if you're using a middleware function on a route in gochi how on earth do you get all the cookies you need from the request?
53978;so far i have this
53979;```gofunc VerifyAccessToken(next http.Handler) http.Handler { return http.HandlerFunc(func(w http.ResponseWriter r http.Request) { })}```
53980;and on the router i am using `.With(handlers.VerifyAccessToken)`
53981;r.Cookies()
53982;i swear i tried that
53983;uno momento
53984;> vscode just use gopls from your PATH@_diamondburned_ yeah exactly how do i set that in nvim?
53985;@_diamondburned_ nope i'm just stupid thanks for the help üòÖ
53986;yea np
53987;@R4BB1T you just install it
53988;and nvim's lsp plugin should pick it up
53989;idk how coc does it
53990;no i already have gopls because vscode uses it
53991;in path?
53992;Trying to learn about docker and utilize in my current application but this error appeared. tried googling it but nothing has shown to be useful
53993;"```goSending build context to Docker daemon 14.21MBStep 1/8 : FROM golang:latest > 05c8f6d2538aStep 2/8 : ENV GO111MODULE=on > Running in b0217313008bRemoving intermediate container b0217313008b > 97376a021173Step 3/8 : WORKDIR /build > Running in dd5c26205b40Removing intermediate container dd5c26205b40 > 14a528680590Step 4/8 : COPY go.mod . > 9026244dd509Step 5/8 : COPY go.sum . > b291af61732cStep 6/8 : RUN go mod download > Running in 6369424c5b77go: github.com/goredis/redis/v7@v7.2.0: Get https://proxy.golang.org/github.com/goredis/redis/v7/@v/v7.2.0.mod"": EOFThe command \'/bin/sh c go mod download\ returned a nonzero code: 1```"
53994;You shouldn't need to run that `go build` should handle that
53995;i do it anyways tbh
53996;for caching purposes
53997;Hey i got a quick question https://i.imgur.com/Yj8gYh7.png how can i be able to call ```dg.AddHandler(HelpStatus)``` from other functions?
53998;pass `dg` to said functions
53999;or use a global or set it as a field in a struct etc
54000;whats the best way to do it?
54001;i tried global way
54002;didnt work
54003;@Doad was that response to me ? > You shouldn't need to run that `go build` should handle that
54004;@Subi yeah
54005;None
54006;this dosent work
54007;it's not `Session`
54008;it's `discordgo.Session`
54009;That's how you use types from other packages
54010;when you say shouldn't run `that` what is that exactly ?
54011;`go mod download`
54012;hmm same error
54013;something else must be missing
54014;getting EOF when getting redisgolang
54015;> in path?@_diamondburned_ yeah
54016;not sure then refer to coc's guides
54017;i don't use it
54018;thx ima try it rn Foather
54019;if im trying to process data faster which would mean reading data faster is it standard practice to have more than one go routine reading off a buffer channel or a data stream?
54020;meaning it would go like one two one two one two in the reading sense and not try to grab the msame message
54021;meaning like in golang is every concurrent or is there simultaneous stuff
54022;yes
54023;you can fan out a stream of data to N goroutine workers
54024;?go pipelines
54025;Go Concurrency Patterns: Pipelines and cancellation <https://blog.golang.org/pipelines>  technololigy
54026;read this
54027;just keep in mind that this has diminishing returns
54028;there is some number of goroutines N such that using N+1 goroutines is slower
54029;N is usually pretty small
54030;I wonder what the exact math behind that is
54031;And if that‚Äôs something that‚Äôs worth it trying to calculate beforehand rather than figure out by trial and error
54032;I think there are too many factors that are difficult to determine
54033;it's based on things like core count amount of blocking operations duration of blocking operations length of uninterrupted work the weather etc
54034;More blocking operations _generally_ benefits from more goroutines
54035;Yeah that makes sense
54036;So in a large enterprise you‚Äôd just benchmark it and fine tune it until you find an acceptable sweet spot?
54037;yea bet
54038;people usually graph that down
54039;it's kinda case by case
54040;Instead of trying to come up with a formula?
54041;and it'd look like a curve
54042;I generally do a couple benchmarks for prod pipeline stuff
54043;if it's concurrency for concurrent architecture it doesn't matter much
54044;> if it's concurrency for concurrent architecture it doesn't matter much@Doad wdym
54045;like just dividing up concerns of an app that don't have to be synchronous
54046;http handlers commands events etc
54047;For a worker pipeline it matters more since you are trying to optimize parallel performance
54048;Ah gotcha. Yeah that makes sense.
54049;I remember I used to think goroutines were free... turns out that's not the case
54050;I was thinking of making something track performance at runtime and scale appropriately however there's still a lot to account for
54051;Burst vs continuous load for example
54052;Variance in work effort between inputs
54053;@deezybefore u call me stupid i have googled this and coudent find a decent solution.I was wondering if there is a decent way to view all the ips the system is connecting to?
54054;Linux or windows
54055;all 3 platforms
54056;windows you have netstat
54057;in golang
54058;You'll have to implement something for each OS
54059;https://github.com/cakturk/gonetstat
54060;that looks like it could be useful
54061;Neato good find Kar
54062;:NanaBongo:
54063;Could someone help me with an issue with making go packages to use internally
54064;Sure
54065;Do you have time to hop in voice for like 10min
54066;or 5
54067;or 3
54068;or2
54069;No
54070;Just post the problem in here
54071;There are like 15 people that will help you
54072;I'm trying to make a server package
54073;and a user package
54074;but the pathings are messed up
54075;None
54076;I did a go mod init on the doola/internal/user
54077;I thought you did that to create packages
54078;Your go mod init should be
54079;Your top level
54080;GitHub.com/your name/yourproject
54081;For the real kicker: did you enable module support?
54082;when creating a project you can turn it on or off
54083;None
54084;and what is the name in your go.mod
54085;So Mike my imports should be GitHub.com/your name/yourproject/internal/user
54086;Yes
54087;yeah I have go modules on
54088;If that is your module name
54089;the import path should be whatever is in your go.mod. Which normally is the the location on source control
54090;"```goimport ( github.com/camhashemi/doola/internal/user"" encoding/json"" log"" net/http"" time"")```"
54091;so my imports should be like this?
54092;Yes
54093;None
54094;so now I have this
54095;None
54096;it cannot resolve this path
54097;Ok so that is why we asked for the contents of go.mod
54098;in the go.mod change the module name to github.com/../... as well
54099;I see so it wants the path from your goroot
54100;It wants the the module path
54101;You can use this go.mod as well but you import path is then doola/internal/user
54102;But it is best to change the go.mod to the github url
54103;that way `go get` will work with it
54104;okay and I want to do the mod init inside ./doola
54105;right?
54106;No
54107;https://golang.org/doc/tutorial/createmodule
54108;trying to go off this thing
54109;ow right doola is your module root
54110;Then yes. At the root of your module
54111;üëç Thanks
54112;None
54113;cant resolve directory doola
54114;Can you show me the settings
54115;which ones
54116;that import block kind of bugs me
54117;the one I screenshot earlier
54118;None
54119;Wdym diamond
54120;golang might not be liking not having the the root being the root of the module. Also noticed you're working inside GOPATH which could be causing issues
54121;Try moving it to outside GOPATH to prevent potential gopath vs module conflicts
54122;None
54123;okay so move my project outside my gopath
54124;right?
54125;Yes
54126;Okay so in golang my imports get downloaded to my gopath
54127;but my project should be outside
54128;since go modules are a thing yes
54129;go get saves it to the mod cache inside gopath
54130;?go modules
54131;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
54132;awesome thanks I'm going to do more reading before I keep bothering you
54133;thanks for the thelp
54134;!
54135;GoLand formats the import block weirdly and differently than goimports
54136;in GoLand the external imports are mixed together
54137;It didn't
54138;in goimorts the external imports are automatically moved to another section
54139;They haven't run organise imports yet
54140;you have to run that?
54141;You can set it up to do it automatically. It complains about it when you don't
54142;Any good alternatives to Cobra for CLI apps?
54143;urfave/cli
54144;or switch case + pflag
54145;I usually stick to the standard library but this time I want to try something new (smaller than cobra)
54146;Thanks
54147;np
54148;what is the bug on this code?
54149;"```package mainimport ( crypto/sha256"" fmt"" io"" log"" os"" path/filepath"")func main() { filepath.Walk(""/ func(path string info os.FileInfo err error) error { if err != nil { log.Println(err) } fmt.Println(path) return nil }) file err := os.Open(path) if err != nil { log.Println(err) } defer file.Close() hash := sha256.New() if _ err := io.Copy(hash file); err != nil { log.Println(err) } fmt.Println(hash.Sum(nil)) FileHash := hash.Sum}```"
54150;what does it say is wrong with it
54151;```./prog.go:22:23: undefined: path```
54152;it should be giving you an error
54153;okay
54154;so whats at line 22
54155;``` file err := os.Open(path)```
54156;we already defined path
54157;have you
54158;where
54159;"``` filepath.Walk(""/ func(path string info os.FileInfo err error) error {```"
54160;path is define in that function's scope
54161;your open
54162;is in the main's scope
54163;path does not exist in that scope
54164;i see so when we closed the function we closed the path too
54165;yes
54166;`{ }` indicate scope
54167;more or less here
54168;how would i make it a global path
54169;for the entire file
54170;do you understand what filepath.walk does
54171;"yes; go to a dir and walk and find all sub folders and folders and files"
54172;like tree
54173;okay
54174;so if you want to operate on things within that scope
54175;your expressions should be within that scope too
54176;i see
54177;so if i move the code for the hash inside that fnction
54178;will it work?
54179;try it and see üôÉ
54180;the key to mastery is selfguided experimentation
54181;thats what ur mom said
54182;üê∏ üî™
54183;Uh
54184;shit doset work
54185;Fix it
54186;if i knew how i woudent be on here
54187;Learn it
54188;not with that attitude tbh
54189;time to spend $700 and go to a code boot camp
54190;Thats the fine for being rude
54191;?go tour
54192;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
54193;Free
54194;Godoc also free
54195;Variables are scoped as explained in the function section
54196;Off topic: when did the tour add syntax highlights to the playground?
54197;did it?
54198;https://tour.golang.org/flowcontrol/12
54199;Syntax on and off button
54200;syntax highlighting is not very rob pike of them
54201;:robpike:
54202;"```bored := truefmt.Println(!bored) // Prints falsetired := false;fmt.Println(!tired) // Prints true```why is there a `;`?"
54203;Ask whoever wrote it
54204;codecademy dosent care
54205;Sounds like you have your answer then
54206;anyone work with Akamai?
54207;uTLS incoming
54208;üëü ü§ñ
54209;:Wow:
54210;oh no more sneakerbots
54211;guys
54212;Is go mature enough for full android dev? I only ask bc it would be convenient for my api socket servers and client to be written in the same language
54213;it's not
54214;no
54215;you can try Qt
54216;Oh oki
54217;XD I thought it was just for desktop. Coolio
54218;My dumbass initially wanted to use web tech with a cross platform thing
54219;Lmao
54220;flutter is better
54221;and easier to learn
54222;Haven't checked out the docs yetI'll look rn
54223;Eh I'll prolly just use kotlin
54224;Flutter is literally against the entire point of using Go for GUI
54225;?????????????
54226;and how is Flutter better exactly
54227;I'm convinced you haven't tried either
54228;for android development GO is a terrible choice.
54229;go is more for servers than android
54230;i would never in a million years use golang as a android dev or anything like that
54231;go is for servers and desktops
54232;not mobile
54233;sure some devs came around and tried to use it for that but its not build for that
54234;flutter is build for front end gui apps
54235;I'm gonna make a responsive web app for a crutch rn
54236;It'll be targeted for desktop anyways so yeh
54237;I would :Shrug:
54238;I have used Go for both desktop and mobile UI development before
54239;how old are u?
54240;2
54241;It is possible that the time that the for cycle lasts can be defined?
54242;care to elaborate?
54243;the time it takes for each iteration?
54244;take the current time at the start of iteration
54245;do that again at the end
54246;then subtract
54247;> i would never in a million years use golang as a android dev or anything like that
54248;I feel like 36 months is enough to make a decent ui library for your purpose
54249;I mean bit less then a million years
54250;Or like transpiled or link a native framework from a different languages
54251;More work then it's worth either way though
54252;Hello yesterday i asked if anyone could help me with my problem my problem is for example: you have a ```start date: 20200101T01:00:00Z end date: 20200801T16:00:00Z intervals: n``` so lets say the intervals is set to 4 (this is a parameter given by the user) so what i wanted to do is i want to slice the time range into 4 smaller time ranges like from 20200101 until 20200228 then from 20200301 until 20200531 etc some told me yesterday get the duration from the 2 timestamps divide it bij intervals and create a slice from each offset well i got the duration from the 2 timestamps ``` dur := t.end.Sub(t.start) fmt.Println(dur)```
54253;but for some reason i can't devide duration by intervals
54254;and i don't get it how to create a slice from the offsets
54255;maybe someone here could help me with that
54256;this may be very simple but i'm just new to go
54257;thanks in advance
54258;Could this library act as a reference implementation for what you're after? https://github.com/segmentio/chunkdaterange
54259;"holy shit that a js library ;D sorry am eating at the moment"
54260;Yes it is
54261;but indeed it's js
54262;Come to #golang where we recommend JavaScript apparently
54263;hahah xD
54264;https://stackoverflow.com/questions/54777109/dividingatimedurationingolang
54265;ain't going to lie but that confuses the shit out of me xXD
54266;Can I ask for code reviews here?
54267;you can always ask yeah
54268;someone's probably gonna look at your code
54269;Duration is just a type alias of an int64 you can divide it by just doingdivided := someDuration / (time.Duration)(someInt)
54270;Dont need to cast afaik
54271;you do if someInt is already defined before as int
54272;you don't if you just write 5 or something
54273;"For an API I have defined a Client struct which contains all the fields the client has in the database. The database fields are defined in the struct tags(example json: alt_address"") When a GET request is made with the client ID the whole struct is returned with all available data. The request can be customized with a querystring fields which allows the user to return specific Client fields only regardless if they are empty so omitempty and  won\'t work here. The response contains the db fields as the are defined in the struct tags and not the fields. I have made a method to this by marshalling my struct and unmarshalling in to a map and the looping through it and deleting fields that where not defined in the querystring. I am looking for code improvements or maybe other better ways to do it. Any suggestions would be appreciated.`type Client struct { Firstname string `json:""firstname""` AltAddress string `json:""alt_address""` Lastname string `json:""lastname""`}`Example: GET GET /clients/id/1Response:`{  firstname"": Michael"", alt_address"":  lastname"": Smith""}`Example: GET with querystring Get /clients/id/1?fields=firstname alt_addressResponse:`{  firstname"": Michael"", alt_address"": }`"
54274;My current attempt: https://play.golang.org/p/f8OmNq8xGeJ
54275;@Mansour I pride myself on writing sub par code https://play.golang.org/p/pbLM2CXUCns
54276;That was my attempt but who knows if thats a good way to do it
54277;it's actually what I needed
54278;thank you very much!
54279;"You say that until somone who knows what they're talking about points out something in it that's dumb ;D"
54280;but either way no problem
54281;You could make chunks an normal integer and use float64() in the sprintf in time.ParseDuration() which may make it look neater but for not much gain
54282;alright thanks man!
54283;Can someone tell me why im getting this error?
54284;i cant understand its sql or browser error?
54285;you need a comma to separate the JSON elements
54286;in my struct?
54287;In the random screenshot of text you posted for that to be valid JSON it would need a comma separating the elements
54288;only this addon is having this issue
54289;my safari is all good
54290;Is this a Go question?
54291;yes i thought i have a issue with my code
54292;no worries thanks alot
54293;@Michaelovich I solved this last time by looping over the struct with reflection and checking if the client requested the field and then subsequently writing it to a map of key/values
54294;If you have a lot of optional fields you could opt to just add a map to your client object
54295;@Michaelovich sounds like you are doing graphql by hand lol
54296;Why not just unmarshalling struct into map then remove the field in your list. It's simpler and you wouldn't need reflect
54297;It might be slow if you have millions of fields or records to parse though
54298;"> > @Michaelovich I solved this last time by looping over the struct with reflection and checking if the client requested the field and then subsequently writing it to a map of key/values> @koen I have about 60 fields and if you use the fields""(?fields=firsname,lastname etc) parameter in your call then they are all optional"
54299;I made a example with reflect here https://play.golang.org/p/XYutqdVy9z
54300;But I can't get it to work with the struct tags ai alt_address instead of AltAddresss
54301;> Why not just unmarshalling struct into map then remove the field in your list. It's simpler and you wouldn't need reflect@Yanaro This is also something I am trying to figure out I did it by unmarshalling struct into map first but then I was adviced to use reflect
54302;I would definitely use a map. Are the values all string?
54303;> looping over the struct with reflection99% chance this is not the solution you're looking for
54304;> I would definitely use a map. Are the values all string?@arte No they are not I have timestamps and ints aswell
54305;> 99% chance this is not the solution you're looking for@awoo Do you have other suggestions?
54306;Is your code that pulls from your database pulling all the data always and then just returning to the caller just what they wanted?
54307;When you return to the caller you need to use pointers to values or a library that supports nullable values like https://github.com/guregu/nullThis allows you to json encode the three different values of for example on a string hello  and not sent
54308;Yeah the database query returns all the data available and assigns it to the corresponding field in the struct. If the caller uses the field parameter I filter out the unneeded data from the struct
54309;curious what the point is in that
54310;Since you are going through the effort of doing that I'd make the database call only return the requested fields
54311;Using a library like squirrel to build your select
54312;if it's a SQL database
54313;> curious what the point is in that@Str≈ìm In what? Getting all the data?
54314;getting evreything only to return a portion
54315;The fields parameter is a new addition to the existing API I just have not modified the db query yet
54316;Sentry I need an adult
54317;No matter how many times I see it explained I can't apply it to my use case. I'm trying to implement an io.Reader that iterates through a []byte and copies it to the slice in the function signature (required for the io.Reader interface). However I'm falling into the newbie slice trap.
54318;I've tried append copy and creating a temporary byteslice and using copy with that. https://play.golang.org/p/pYD1qMWfOze
54319;something still needs to click I think
54320;(there is a reason I'm iterating through byte by byte this is just a simplified version)
54321;Ah if I create the []byte{} passed to Read() with make([]byte 5) then it works
54322;need some help boys.
54323;"``` if isHeistOn && openedVault >= 70 { fmt.Println(""Grab and GO!"") } else if isHeistOn = false { fmt.Println(""The vault can\'t be opened."") }```"
54324;whats my mistake?
54325;@Michaelovich what I would do is have another struct you are sending over for the call with specified return values where all the types are nullable (either pointers or using the library I linked before) and they all have omitemptyThen ranging through the params in the URI and have a switch on them where you manually populate the new filtered struct from the old struct with all the values
54326;== false
54327;thank you
54328;or better yet !isHeiston
54329;Idk I feel like reflection is fine but yeah you'll lose out on the tag in that case
54330;@misterturtle `copy` copies up until the end len of the shortest of 2
54331;I can't pass a poitner because of the io.Reader interface :/
54332;so the slice you pass has to contain a len
54333;Ah could I resize p before I copy it then?
54334;p should already be the size you want
54335;The io.Reader called doesn't know what size of data it's going to receive back though
54336;caller
54337;correct it copies as much as it can into p and returns how many it did copy in the first r eturn value
54338;Read reads up to len(p) bytes into p. It returns the number of bytes read (0 <= n <= len(p)) and any error encountered. Even if Read returns n < len(p) it may use all of p as scratch space during the call. If some data is available but not len(p) bytes Read conventionally returns what is available instead of waiting for more.
54339;Ok so I just have to create a slice of the max size of the buffer to pass into it
54340;yea
54341;perfect cheers
54342;np
54343;> @Michaelovich what I would do is have another struct you are sending over for the call with specified return values where all the types are nullable (either pointers or using the library I linked before) and they all have omitempty> Then ranging through the params in the URI and have a switch on them where you manually populate the new filtered struct from the old struct with all the values@arte Thanks for the suggestion I'll look in to this.
54344;> Idk I feel like reflection is fine but yeah you'll lose out on the tag in that case@koen I think it is to but the it needs to work with the tag for me which is something I can't figure out at the moment
54345;gophers Anyone here use GoLand as their IDE?
54346;Sure
54347;You have a question about it?
54348;Hey. I am trying to debug some code on win 10 but my debugger only works the first time stopping at breakpoints. Then the second time it doesn't stop and debugger doesnt work.
54349;I have looked into it but havent found a solid reason what maybe going wrong.
54350;Not sure what you mean with first time
54351;So when i debug my code the first time works where i am able to step through my program. But doing that the second time doesnt work since it doesnt stop at breakspoints
54352;are you sure you're stopping it correctly? After the first run
54353;yes its the same settings  nothing changes
54354;Honestly don't know what you mean. How are you starting and stopping the debugging session?
54355;well I don\'t want to give you the classic works on my machine
54356;but it works on my machine
54357;None
54358;Its my open source work so i am free to share the code. I start debugging by pressing the green arrow and clicking `Debug <functionName>`
54359;You already asked this and we gave an answer
54360;you're getting a compiler error because `path` is not defined
54361;i know
54362;but i cant fix this
54363;i need help
54364;I think if you stop it every time with the red square icon it should work although I usually just rerun the debugger and it works too
54365;is that an issue with every func ?
54366;yes
54367;It works the first time and then debugger is just loading as you see in the iamge
54368;Without debugging the variable values i am stuck
54369;oh but it's running some test?
54370;does that pass or fail or something
54371;pass
54372;but cant debug it
54373;What ides do you guys use for debugging? I relly cant persist with this problem
54374;goland or dlv directly
54375;https://gfycat.com/enragedcorruptgyrfalcon
54376;just works‚Ñ¢Ô∏è
54377;honestly I rarely have the need to debug but when I do I use goland
54378;dlv cli is a similar experience to gdb if you're used that before
54379;I see.
54380;it works now for some reason üòï
54381;vscode‚Ñ¢Ô∏è works
54382;None
54383;@Deleted User if you want that code to run for every file in the dir you have to move it to inside the Walk function. Just like we told you before
54384;just what i need. thanks guys
54385;i tried that and dosent work
54386;Why doesn't it work?
54387;based test debugger: https://gfycat.com/fittingsereneblackbuck
54388;"```package mainimport ( crypto/sha256"" fmt"" io"" log"" os"" path/filepath"")func main() { filepath.Walk(""/ func(path string info os.FileInfo err error) error { if err != nil { log.Println(err) } fmt.Println(path) file err := os.Open(path) if err != nil { log.Println(err) } defer file.Close() hash := sha256.New() if _ err := io.Copy(hash file); err != nil { log.Println(err) } fmt.Println(hash.Sum(nil)) return nil })}```"
54389;```/2009/11/10 23:00:00 read /: is a directory[227 176 196 66 152 252 28 20 154 251 244 200 153 111 185 36 39 174 65 228 100 155 147 76 164 149 153 27 120 82 184 85]/.dockerenv[227 176 196 66 152 252 28 20 154 251 244 200 153 111 185 36 39 174 65 228 100 155 147 76 164 149 153 27 120 82 184 85]/__runsc_containers__2009/11/10 23:00:00 read /__runsc_containers__: is a directory[227 176 196 66 152 252 28 20 154 251 244 200 153 111 185 36 39 174 65 228 100 155 147 76 164 149 153 27 120 82 184 85]/bin2009/11/10 23:00:00 read /bin: is a directory[227 176 196 66 152 252 28 20 154 251 244 200 153 111 185 36 39 174 65 228 100 155 147 76 164 149 153 27 120 82 184 85]/bin/[[147 48 194 146 203 211 251 77 174 72 131 175 169 37 94 218 89 234 61 157 5 230 200 43 204 253 77 219 67 113 52 116]/bin/[[[147 48 194 146 203 211 251 77 174 72 131 175 169 37 94 218 89 234 61 157 5 230 200 43 204 253 77 219 67 113 52 116]/bin/acpid```
54390;Seems to work except you probably want to print it as a string. Not a byte slice
54391;Good thing the godoc of sha256 has an example
54392;https://golang.org/pkg/crypto/sha256/#New
54393;"```package mainimport ( crypto/sha256"" fmt"" io"" log"" os"")func main() { f err := os.Open(""file.txt"") if err != nil { log.Fatal(err) } defer f.Close() h := sha256.New() if _ err := io.Copy(h f); err != nil { log.Fatal(err) } fmt.Printf(""%x h.Sum(nil))}```"
54394;That prints the hex of the sum
54395;Okay so I'm trying to make a discord embed menu using arikawa but I can't figure out the flow of what the program should look like I'm asking here because I feel it's not really an arikawa problem and overall just an execution flow problemFor now I have this :<https://github.com/Karitham/WaifuBot/blob/0789d01a6dbcb7f87aedf251cf6ae9400f786fe2/disc/list.go>The end goal is to have a menu looking like https://cdn.discordapp.com/attachments/712351416315805708/758309958949011496/unknown.pngwhere the user can click a reaction to move between list pages
54396;oh no that sounds terrible
54397;why ?
54398;"```type Config struct { 4 Port string `default:""8000""` 5 Host string `default:""localhost""` 6 ConnectionHost string `default:""db.mysecretapp.dev""` 7 ConnectionDB string `default:""secretapp""` 8 ConnectionUser string `default:""root""`  9 } ~ ```"
54399;will it set my values by default?
54400;no
54401;`default` isn't a thing in the stdlib
54402;Not sure where you got that from
54403;how can i do this same thing?
54404;best way to do something like that is just make a `func New() Config{}`
54405;@Karitham you have a global map variable without locks this is going to be a bad time.Try not to use globals but have a struct holding the map and a lock for it if you intend to use it this way can you not hold the map in your Bot struct?
54406;i want to set them by defualt ?
54407;@Karitham imagine trying to use that in a channel with anyone who isn't 100% dedicated to making your life easier
54408;having your user interface subject to scrollback sounds like a nightmare
54409;even if it's in a DM
54410;the bot will continue giving outputs/feedback
54411;pushing the menu further and further away
54412;@Karitham have you looked at dgwidgets
54413;Such a menu worked ok in a low traffic channel. 1/10 experience in fast chat üòõ
54414;yeah but now I have like 20 pages lists and it's just spamming embeds
54415;how do you suggest I do that
54416;dgwidgets gang ü§ù
54417;embeds and whatnot should be as uninteractive as possible
54418;https://github.com/Necroforger/dgwidgets
54419;i'd wanted to make a short timeout
54420;legit just look at dgwidgets mate
54421;imo the embed should be like```ABCDDDDEFPage 1 of 20```and the command would be `list options 1` or `list options 20`
54422;its got everything you need but for discordgo
54423;to list the page
54424;everything is deterministic
54425;that's exactly my original code
54426;but it feels spammy
54427;that's why you do this in DMs
54428;if the user wants spammy shit make them do it in a DM
54429;i swear Kar isnt reading what im saying :robpike:
54430;I am
54431;I'm looking at the code too
54432;it doesnt spam anything
54433;its a single message
54434;yeah but I'm trying to understand deezy's point
54435;I don't want to do something because it feels better to me
54436;at the end of the day if it's used by more than a thousand people
54437;you can do and want whatever you like
54438;having some kind of feel on how users experience those is critical
54439;what spam issue are we on about
54440;but having tried to create really clever interactive discord embeds
54441;i can tell you it's not fun
54442;imagine wanting to see all the characters a user own to choose one from
54443;I have 2 options make something akin to a search
54444;or just display everything
54445;if the user has 400 characters thats 40 messages with 10 char each time
54446;why 10
54447;it's just an exemple currently I have it set to 15 but probably going up if I can reduce the spam of it
54448;now every single embed you create has a lifecycle
54449;that YOU have to manage
54450;what if the bot crashes
54451;how do you make sure that embed is still functional or signal that it isn't
54452;why not create a single paginatable embed with all 400 on different pages
54453;:fellas:
54454;I have like pages of those
54455;> why not create a single paginatable embed with all 400 on different pagesthat's the goal
54456;i dont see whats so difficult here
54457;this is a solved problem as far as im aware
54458;making the embed work
54459;just
54460;the flow is hard
54461;look at dgwidgets like ive been saying for the past 10m :facepalm:
54462;yes I am
54463;this is a solved problem
54464;that's what I was searching for
54465;thank you stroem
54466;there we go
54467;life aint so bad
54468;:NanaBongo:
54469;"```package mainimport fmt""type Config struct { Port int Host string ConnectionHost string ConnectionDB string ConnectionUser string}func Values(text string) Config { config := Config{} config.Port = 8000 config.Host = localhost"" config.ConnectionHost = db.mysecretapp.dev"" config.ConnectionDB = secretapp"" config.ConnectionUser = root"" return config}func main() { fmt.Println(Values(Port))}```"
54470;how can i print defult values?
54471;what are default values?
54472;in Value func
54473;well
54474;it looks like your code should work
54475;so maybe isntead of saying how do you X say I did X and i excpected Y but i saw Z happen instead
54476;You're not providing the Values func with anything useful
54477;let's start one step at a time
54478;with coherent questions
54479;what is `Port`? What are you trying to do?
54480;let's have scorpion actually express their intent
54481;they're gonna have to learn how to sooner or later
54482;i set 8000 value to port
54483;now i want to see weather its defult value or not.
54484;well
54485;at the moment
54486;it's always the default value
54487;`func Values(text string) Config {`
54488;you see how your input to that function is named `text`?
54489;"``` config := Config{} config.Port = 8000 config.Host = localhost"" config.ConnectionHost = db.mysecretapp.dev"" config.ConnectionDB = secretapp"" config.ConnectionUser = root"" return config```"
54490;do you see anywhere that `text` is used here
54491;no
54492;so
54493;it's always the default value
54494;you always create the exact same Config
54495;every time
54496;presently
54497;yeh but i want to print the value of port
54498;then do it
54499;Println(c.Port)
54500;i tried fmt.println(value.port)
54501;He never instanciates
54502;`fmt.Println(Values(text).Port)`
54503;ohh!!
54504;whats the goal of your text too
54505;?go tour
54506;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
54507;it sounds like you're struggling with how functions return values
54508;and also probably defining and using functions
54509;strongly recommend taking another pass through that section of the tour
54510;why is deobfuscating so hard :pain:
54511;:kek:
54512;ok
54513;probably the whole tour tbh
54514;you'll be rereading it many dozens of times
54515;I probably look at the tour's exemple every day
54516;or gobyexemple
54517;ok
54518;Hi all! I have a question not strictly related with Go but I don't know where to ask. Im trying to dockerize an app which uses logrus+rsyslog. The problem is that the alpine container does not includes rsyslog. I installed rsyslog using a RUN command in the dockerfile but I don't know how to start properly the rsyslog daemon. Any one have prevuous experience on it ? am I facing the problem wrongly ?
54519;Did you see this already? https://blog.rapid7.com/2014/03/04/howtorunrsysloginadockercontainerforlogging/
54520;i mean that sounds like a question for rsyslog documentation
54521;https://www.rsyslog.com/doc/v8stable/
54522;None
54523;let me check the first link
54524;"```FROM golang:latestLABEL maintainer=""John Doe <JohnDoe@example.com>""WORKDIR /appCOPY go.mod .COPY go.sum .RUN go mod downloadCOPY . .RUN go build mainCMD [""./main""]```"
54525;I am not really sure this solves what I am looking for
54526;@Deleted User you dockerfile does not refer any syslog
54527;If you're struggling to start the syslog daemon check out deezys link for the docs I guess
54528;It should just be running `rsyslogd` though
54529;@xpegenaute log to stdout let the docker daemon handle where logging goes to
54530;dont run multiple applications in one container
54531;thats counterprinciple
54532;@deezy your first doc uses ubuntu:saucy not alpine
54533;an dI guess the system already starts rsyslogd
54534;when installed
54535;it doesn't really matter
54536;linux is linux
54537;install the package drop a config file somewhere start the daemon
54538;oooorr dont üëÄ
54539;@Str≈ìm when you mean let docker handle logs is it possible to send logs (in real time) to another machine ?
54540;yes
54541;https://docs.docker.com/config/containers/logging/configure/
54542;thats what you should do
54543;docker automatically collects all stdout from processes
54544;and then another service can pull those logs from docker on the host OS and send them wherever
54545;pull ? I want my docker to push them
54546;it can push to a syslog
54547;yeah i guess it can do that too
54548;documentation is great
54549;ok I'll take a look
54550;dont run rsyslog in the same docker container
54551;use the docker logging drivers
54552;this is literally why they exist
54553;ok I see it will solve the problem
54554;thanks a lot!!
54555;godspeed starchild
54556;starspeed godchild
54557;huh
54558;equally cool
54559;:^)
54560;how is string formatted in go?
54561;fmt.Sprintf() ?
54562;fmt.Sprintf?
54563;i mean something like {} in python/rust
54564;Yes
54565;fmt.Sprintf
54566;That is how you do that
54567;https://golang.org/pkg/fmt/#Sprintf
54568;is there a documentation bot here ? like you can just tag it and it searches for you ?
54569;No
54570;I‚Äôve thought about it a couple of times but never have done it üòõ
54571;that does sound useful
54572;basically just `go doc` syntax
54573;yeah
54574;!go doc fmt
54575;```code block was not foundStatus = 0```
54576;just type the url
54577;would require me to know it
54578;if it's not stdlib it's hard to find
54579;something like the crate bot in rust discord
54580;`https://pkg.go.dev/<package name>#<func name>`
54581;crates are centralized repos
54582;Go packages are not
54583;like <https://pkg.go.dev/github.com/hajimehoshi/ebiten#RunGame>
54584;it'd be impossible to do something like that without making heavy assumptions
54585;`#pkgvariables` is for the vars
54586;`#pkgconstants` for consts
54587;I don't think this is at all stable or guaranteed but it's nice to have
54588;godoc >
54589;pkg.go.dev >
54590;having it work for the stdlib would be good enough
54591;but only mildly useful
54592;when people request simple stuff like the Sprintf
54593;https://godoc.org/fmt#Sprintf
54594;ill request something complex.Can someone write me a function that checks over the entire system and find the most recent changes file and prints a path to that or something.
54595;> Can someone write meno <3
54596;do your research and ask for help on how to do it yourself
54597;you've already got all the pieces you need
54598;savage Terra lmao
54599;you've written a WalkFunc
54600;we've already got `(path/filepath).Walk` too
54601;that's what i'm saying
54602;they spent all day yesterday messing with a walkfunc
54603;ohhh right right
54604;they've literally already written the hardest part
54605;just keep a time and a path and check if the time is later in each one
54606;now I want to write it but I don't want to give it away to them lol
54607;talking of Walk
54608;https://github.com/golang/go/issues/41467
54609;playground has busybox üëÅÔ∏èüëÅÔ∏è
54610;very minimal libs here too
54611;```/lib/ldlinuxx8664.so.2/lib/libc.so.6/lib/libm.so.6/lib/libnsl.so.1/lib/libnss_compat.so.2/lib/libnss_dns.so.2/lib/libnss_files.so.2/lib/libnss_hesiod.so.2/lib/libnss_nis.so.2/lib/libnss_nisplus.so.2/lib/libpthread.so.0/lib/libresolv.so.2```
54612;Why is a pointer to int initialised with `int` and not `&int` ?``var xPtr int``To me the second version would have made more sense as it would read like ‚Äúvariable `xPtr` is a memory address of an int‚Äù. Is there any simple explanation to this?
54613;Boogs if I had to put ice cold in my name you should have to have savage
54614;Hi again does any one know how viper treats a en key like dburl when I want to pass it by env var ? I would expect DB_URL or DBURL ...
54615;@shakuni it's a convention borrowed from c which in turn borrowed it from earlier languages
54616;SetEnvKeyReplacer sorry (RFM)
54617;and since c++ uses `T` for pointertoT and `&T` for referencetoT the argument can be made that it would confuse people coming from c++ ‚Äì one of the most widely used programming languages in almost every domain ‚Äì to go if go pointers were `&T`
54618;Oh okay so it's just a convention for the sake of simplicity but actually `&int` would have made more sense. Right @zephyrtronium ?
54619;i mean it's all made up
54620;i\'m not sure whether it would make more sense per se it\'s all arbitrary
54621;it could just has easily have been `@thing` that meant this is a pointer to `thing`
54622;there are languages that use `^T` for pointertoT
54623;protip: language means nothing
54624;words are arbitrary
54625;things only have meaning because some number of people have an agreement that they do
54626;the general convention among most popular programming languages is to use `&T` for references which are essentially pointers that can't be null/nil
54627;Oh okay. I get your point now. Thanks @deezy & @zephyrtronium !
54628;Conventions exist and can be helpful!
54629;but uh
54630;at the end of the day it's actually all just made up at some point
54631;Is this a place to ask for help with developing with discordgo?
54632;#discordgo
54633;Thank you
54634;if you want just general go it's here
54635;Hello what would be a quick and easy way to code a tool which mutes/unmutes the user's microphone (crossplatform)
54636;there wouldn't be one
54637;because linux/windows are both going to have wildly different requirements
54638;and interacting with the windows api will make you want to die
54639;it's DOABLE
54640;but if it was quick and easy there'd be an offtheshelf option
54641;uh
54642;any windows lib suggestions?
54643;or approach?
54644;golang.org/x/sys/windows üôÇ
54645;it provides an api for a large part of the windows api and it includes a mechanism to load dlls if the particular syscall you need isn't available
54646;something lazier/easier for a newbie like me xd
54647;it is hard to use in go though because windows was not developed with go in mind
54648;i'm not aware of an existing solution that would help here but you might be able to find something on godoc.org
54649;that's the thing
54650;if something easier were possible it would exist
54651;this is the best general purpose solution available
54652;portaudio maybe
54653;just maybe
54654;maybe
54655;It sounds like a fun learning project though
54656;So don‚Äôt shy away from it
54657;You probably want to focus on one platform first though
54658;Cross platform is hard and many times impractical.
54659;This guy seems to be using a windows api that might work for you https://github.com/SaturnsVoid/RecordAudioonWindows
54660;I‚Äôd clone it and play around read the windows docs etc
54661;yeah it's DOABLE
54662;very doable
54663;but it's such a specialized tool that nobody else has needed it badly enough
54664;i just so happened to need it i mean I reinstalled my win to win10 and all of a sudden my mute key doesnt work and i just wanna do something in go just to learn something
54665;so yeah
54666;gl to me
54667;yeah that's how most of these things start
54668;Yeah if the goal is to have fun and learn dive into it
54669;better yet just uninstall winblows
54670;And try to avoid shortcuts. Read the docs read other people‚Äôs code try to make sense of it and adapt it/change it to your needs. That‚Äôs the big advantage of go imo  the ability to read other people‚Äôs code and understand what‚Äôs going on easily most of the time.
54671;@evandocarmo thats a helpful advice thanks dude
54672;> better yet just uninstall winblows@awoo or become one of the few windows experts out there and profit üí∞
54673;that's despicable
54674;I'm learning Go and i will create a little rest API but didn't really found which project structure i should follow ?
54675;Do you have link or examples please ?
54676;?go layout
54677;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
54678;xD i'm so stupid ^^
54679;Thanks :)
54680;No worries
54681;That's not gospel either it's just one of the most popular project layouts out there.
54682;i need custome view json layer in my rest api what it does is client send the json format in which he want to recieve result e.g i have author table(name age id city books relation  ...) and book table(title description id  created_at updated_at ....) they both have some fields. Client only need some field not all like just author name and book title. Two case here either client send format of json or we set default json format in server.(its like graphql but not completely we have many endpoint we just need to control our json response or make it flexible )i used gorm (ORM) which return struct so how i implement it.In my research i need runtime struct made from the client given json format . So we marshal gorm struct to json and unmarshall json to our runtime struct OR convert gorm struct to map and manuplate it with the use of reflectAny Idea suggestion how to implement it well in go
54683;Are Go's slices resembling some sort of linkedlist?
54684;go slices are contiguous in memory not linked lists
54685;https://blog.golang.org/slicesintro
54686;think c++ vectors if you're familiar
54687;or java arraylist
54688;ah
54689;I'm familiar with vectors
54690;JavaScript arrays
54691;so they're just like the vectors?
54692;yep
54693;see kar's link
54694;That makes sense
54695;Thanks!
54696;That slices article is gold
54697;I have to implement it so i need to confirm good way
54698;I read the site for the project structure and wow didn't understand everything :/
54699;it seems so hard to structure my project as describe :/
54700;yeah it's not easy
54701;just takes time imo
54702;organizing is hard
54703;i always used the classic `controller` `service` `model` etc... recommand bu Spring for example
54704;But it seems really different in Go ^^
54705;Coming from MVClike layouts the below might be helpful. While in MVC you'd have something like``` controllers productController personController model productModel personModel```In go you could have it sort of backwards like``` Product (package) controller.go (uses stuff from http package) model.go (uses stuff from store package to talk to db) Person (package) controller.go (same as above) model.go (same as above) http (package) http (provides functions to make/receive http calls) store store.go (provides functions to connect to db)```Something along those lines. To be honest though start coding organize/layout later. A lot of it will be very obvious once you have an idea where your code is going. Prematurely obsessing about layout will just prevent you from coding and generating value.
54706;The idea is to make namespaces readable
54707;so in my proposed go layout you'd have `person.save()` instead of `model.savePerson()` or whatever which would result from the MVC layout
54708;Hello ! I\'d like to know if it would be possible to find the corners of an object on an image (here corners 1 2 3 4) but that would also be capable of only finding two corners if cropped ?
54709;None
54710;None
54711;imo don't do controller.go and model.go
54712;name it either as the struct it contains or the packakge name
54713;so `product/product.go` or `person/user.go`
54714;@Yewolf find min/max x and min/max y
54715;Yeah. The filenames don‚Äôt matter much actually. The important part is avoiding ‚Äúmodel‚Äù and ‚Äúcontroller‚Äù as package names
54716;To avoid stuttering etc
54717;Ok thanks :D
54718;i will check everything :D
54719;Again don't take this as gospel by any means.
54720;Mattermost is a very large go project out there and they do have a `model` package.
54721;there's also a gooauth2 package that does that
54722;but I heavily recommend against doing so
54723;Yes it\'s hard to every times follows all rules
54724;yeah
54725;i find myself disliking it because of go's package system
54726;not because its a bad way to organize things
54727;it's both for me
54728;I care more about having things related to eachother stay in one place than separating them based on their data types
54729;?go naming
54730;?go convention
54731;well ^^
54732;go fmt and go lint will let you know
54733;camelCase
54734;fyi
54735;yeah make sure you have go lint running in your editor and it'll fix your naming
54736;I'm using Goland
54737;Even better
54738;@_diamondburned_ i noticed that you contributed to librespot have you used it recently?
54739;i'm having an issue
54740;nah but i can prob help
54741;for mercury's GetTrack method what is the id supposed to be?
54742;is it the id in the uri or the whole uri?
54743;should be former
54744;but you can check the rust docs
54745;the response from both of those is empty
54746;with no errors
54747;how could i download go from command line? is it possible
54748;nvm got it
54749;Depends on the distro. Some have it right in their repos. But you can download the zip from dl.golang.org
54750;i am on ssh
54751;oh yeah
54752;wget c https://golang.org/dl/go1.15.2.linuxamd64.tar.gz [64bit]
54753;this works apprentl
54754;Yeah or aptget it or whatever
54755;might be an older version than latest though
54756;rust docs is so bare
54757;https://docs.rs/librespotcore/0.1.3/src/librespot_core/mercury/mod.rs.html#7986
54758;there's only a get
54759;interesting
54760;what is the best practice for config files ?
54761;damn
54762;```gofunc (m Client) GetTrack(id string) (Spotify.Track error) { uri := hm://metadata/4/track/ + id result := &Spotify.Track{} err := m.mercuryGetProto(uri result) return result err}```
54763;wow Rust's API is actually more bare
54764;Rust bad Go good confirmed?
54765;lol
54766;small api surface considered good? :fellas:
54767;nah it's rust so it's auto bad
54768;if it's not needed just don't use it
54769;https://godoc.org/github.com/librespotorg/librespotgolang/librespot/mercury#Client.Request
54770;ok this callback API is awful
54771;frankly lot s of things in librespotgolang is awful
54772;yea...
54773;the PR I made was just me skimming through the examples for 5 seconds
54774;so i did a request using client.Request
54775;returns a 404
54776;I think this is some weird protobuf request
54777;idk how it works
54778;spotify proprietary üòî
54779;dbus interface iirc
54780;this doesn't return an error on bad responses..
54781;the search works but it doesn't return any useful information
54782;just metadata
54783;figured it out
54784;What should i use for config files ?
54785;https://github.com/librespotorg/librespotgolang/blob/916b535e1393e2164609ae25dd049e6f260f02b3/main.go#L294
54786;this is stupid
54787;LMAO
54788;why would you have the client do that instead of doing it in the api???
54789;just not returning the error
54790;:thonk:
54791;Client always authenticated? Not sure what the API part looks like
54792;I do know back from when my musicbot ran on spotify the least painful way of dealing with spotify was just to have the client run and interact with that instead of the horrible API
54793;:kek:
54794;nah librespot connects directly iirc
54795;i don't think it uses dbus
54796;yea using it is against TOS i think
54797;librespot does yeah. They've reverse engineered the way the client interacts with the spotify servers
54798;@Turtle i recommend forking your own librespot and fix the library as you go
54799;like get rid of that callback API
54800;that's awful
54801;i really should
54802;yeah and just PR in the end
54803;that's what I did
54804;i mean it would be so easy to fix
54805;just do the base62 to hex conversion in the GetTrack method
54806;it'll break existing code but I don't think it matters w/ librespot
54807;lol
54808;> This is still highly experimental and in development. Do not use it in production projects yet as the API is incomplete and subject to heavy changes.
54809;That would be a yes
54810;aight bet
54811;hey at least you were able to import it properly
54812;you couldn't before the go mod PR
54813;...
54814;it feels like they just forced a few random devs of the rust project to make this
54815;with no experience
54816;In this case I'm not sure why people are obsessed with rewriting stuff in a multitude of languages. Why not have one program that is fully maintained and have the other libs interact with it?
54817;eh
54818;if they had a dll in their releases i would just be using that
54819;Instead they reimplement the same thing in 3 or 4 different languages
54820;I'd write it in XML or sth
54821;like gobject introspection
54822;and just generate code from it
54823;that's what they do for github.com/librespotorg/librespotgolang/Spotify
54824;talking of generation I plan to generate JSON files that describe the network API after I finish writing my Go parser for that
54825;the goal is to allow other languages to generate code that interact w/ the Go API over IPC
54826;uhh on cchat
54827;didn't mention it oops
54828;I got hooked on code gen after generating gir bindings lol
54829;If only librespot finished librespotd
54830;The daemon program
54831;> last updated 2 years ago
54832;if only
54833;They do have a sample program it looks like
54834;<https://github.com/librespotorg/librespot#usage>
54835;that's running Rust on my computer üòî
54836;I'd much prefer librespot to be compiled as a shared object library and used over Cgo
54837;I mean you can compile it on your build server
54838;and sync it back xD
54839;but having an intermediary format to generate bindings from is still the best imho
54840;man if only Discord does that
54841;instead of having weirdly formatted markdown files
54842;i've found something rather upsetting
54843;they use AudioFile.FileId in player.LoadTrack but AudioFile has method GetFileId
54844;All struct and attribute should start with an uppercase ?
54845;if you want them accessible outside of struct methods yes
54846;and how should work dependency injection ?
54847;i mean i have a db package that i init when i run my server
54848;but inject it in services ?
54849;also to inject services in controller ?
54850;pass it as attribute ?
54851;interfaces
54852;you can use an interface anywhere you'd use a regular type
54853;so struct members and function arguments both
54854;yeah I'd pass it during ctor into a service struct
54855;well I wouldn't but that's the most common way
54856;the way I do it is to use context to overload
54857;"``` var lateMessage string t := time.Now() tz _ := time.LoadLocation(""America/New_York"") nyHour := t.In(tz).Hour()```Can someone explain this to me.I understand the var and the t := but after that i need some help.why in the world is it tz _"
54858;It‚Äôs the returns from load location
54859;Iirc it‚Äôs the time zone code and and error
54860;But they are ignoring the error
54861;But go still makes you account for all returns
54862;So you use _ to ignore things
54863;@deezy do use have a code example ?
54864;timezone
54865;A very simple one
54866;Literally #4 on that layout post
54867;?go layout
54868;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
54869;You create your specific services and inject them where you need to
54870;Ok I see will do it tomorrow thanks
54871;hey so I'm working on that rate limit for disgord (http.Roundtripper interface). But if someone uses their own http.Client where the RoundTripper is injected already I want to verify that it in fact does rate limiting.Since they might inject more than one implementation of a http client i wonder if how one would go about that?require some weird interface that confirms it's implemented?update a header value on response (Xdiscordratelimithandled: bool)?leave a note in the docs? but I also feel that's a slippery slope
54872;i'd say that if the user doesn't want to use your provided tool that handles rate limiting correctly that's their problem
54873;^
54874;don't try and cover 100% of the cases
54875;it's their API key that's gonna get throttled
54876;so
54877;why bother?
54878;any reason you're not using x/time/rate for rate limiting?
54879;`don't try and cover 100% of the cases` I've wasted so much time trying to do that in the past
54880;let me take a look at what that actually is
54881;<https://godoc.org/golang.org/x/time/rate> for your convenience
54882;it seems that it allows for predetermined rate limits
54883;what if i suddenly get a global rate limit
54884;of the message get endpoint changes their rates
54885;how would this package allow that dynamic change
54886;I also want to support cancelation
54887;sounds like a list of reasons not to use x/time/rate for rate limiting üôÇ
54888;but im sure its cool in other situations
54889;the real answer to the original question is if the end user deliberately goes out of their way to stop using the right things that\'s not your problem
54890;I worried that someone has already defined a http.Client and then they decide to use disgord for some random calls inject the client and don't even realise it and boom banned
54891;sure that's possible
54892;But i guess im just being anxious
54893;x/time/rate is funky
54894;very funky
54895;it's also not your fault
54896;in any way
54897;come join in VC my friends.
54898;arikawa used to have this bug where all reconnections would instantly fail deadlocking the bot at that permanent state
54899;same way the dude who wrote `rm` isn't responsible when someone times `rm rf /`
54900;¬Ø\\_(„ÉÑ)_/¬Ø
54901;I eventually traced it back to the rate limiter
54902;and you fixed it :bongo:
54903;the problem was that the rate limiter is aware of when a contextful acquire can timeout and it does so immediately instead of waiting for the whole duration
54904;this is cool
54905;but
54906;it caused some very unexpected behaviors
54907;the solution was that not all functions should be passed a context that can timeout so yeah I did fix it eventually
54908;but it was interesting
54909;I've designed mine to be a queue per bucket and I can check if the requests in the queue has timed out or whatever when i extract the request if it's outdated i just nop and get the next one
54910;so the loop needs to be managed from a go routine
54911;im really worried smth weird will happen cause to support context was really hard
54912;oh yeah you're talking about the API rate limit
54913;yeah I couldn't figure out the bucket stuff myself
54914;frankly I couldn't be arsed to
54915;originally i supported concurrent requests but discord lies
54916;so now it's sequental
54917;just hoping some genius bother fixing the edge cases and publishes a concurrent version
54918;would be cool
54919;lmaoooooo same
54920;yeah if I were to rewrite it I'd make the requests concurrent
54921;well
54922;rn it unlocks after fetching the headers so it's not that bad
54923;but yeah sucks
54924;yep
54925;gotta lock while acquiring a connection which is bad
54926;hmm
54927;wonder if I could lock after acquiring a connection :Thonk:
54928;thats why i wanna do the http.RoundTripper cause if someone does it for one discord lib it works on every other that uses the same interface
54929;that should at least not clog the thing up on slow networks
54930;if anyone know how to use discordgo and can help me pls #discordgo
54931;:cereal:
54932;alright deal
54933;let's see
54934;@andersfylling wdym by someone uses their own http.Client where the RoundTripper is injected already
54935;idg that part
54936;just imagine say some user reuses their http.client instance
54937;and they already injected rate limiting for something else
54938;oh
54939;why does that matter?
54940;that's what i keep saying
54941;you can already share roundtrippers across multiple clients
54942;because then i dont know for sure what is actually injected and i wanted to be nice and say yo u dont have discord rl support
54943;the default roundtripper does exactly that
54944;if an end user thinks this rate limiter i made for one service will work for all services universally
54945;that's not your fault
54946;Discord's rate limit isn't really anything special
54947;you just check the URL and handle otherwise don't
54948;do like
54949;```gotype RoundLimiter struct { URL url.URL // URL to check for rate limit}```
54950;then if the request has that URL that matches Host and stuff then apply rate limit
54951;yeah thats what my impl is doing rn <https://github.com/andersfylling/disgord/pull/332>
54952;yeah so what's the problem
54953;I wanted to support checking it at compile time or startup at runtime
54954;so that it's discoverable if they missed it in the wiki
54955;oh man
54956;just
54957;don't
54958;really just don't
54959;kek
54960;do it on ctor or on http call
54961;so yeah that was the original question
54962;yeah just don't
54963;does that lib u use support rate limiting tests? the one that gave u a huge test coverage jump
54964;dismock?
54965;yes thats the name
54966;idk i didn't write it lol
54967;my library has tests on the rate limiter and the API library uses it but I don't think it explicitly checks for rate limits
54968;I do also have an integration test that spams reactions into a message though
54969;idk if you've seen it but
54970;nice
54971;i got uni work to do üòî
54972;and i really need to waste less time on discord
54973;freshman
54974;yeah
54975;bruh
54976;yeah
54977;I could've taken the test that would allow me to skip intro classes but that was on campus
54978;so yeah screw that
54979;rip
54980;are you just gonna get a job right away then?
54981;OOF
54982;can't you just not incl uni?
54983;i used to have my high school on the resume lol
54984;tfw
54985;well hope it works out for you
54986;just say it was a spiritual journey
54987;:blobangel:
54988;damn
54989;Uhmm #offtopic üôÇ
54990;@Sgt_Tailor ty
54991;Can I assert a new type within the same function call```color err := GetColor() // returns type of blue but want to force it to be type Red in the shortest way possible```
54992;where is this from?
54993;fake just for an example
54994;~~so u just have a random GetColor function?~~
54995;you can't
54996;?xy
54997;the short and straightforward answer is you can't
54998;hmmm ok
54999;thanks
55000;lines are free
55001;it's okay
55002;"hi all im having some issues getting an execute command function to run properly. I am thinking maybe im not passing the arguements through correctly. Could someone take a look? my err is loggin `exit status 252` and i have no idea what that means. Google hasn\'t been much help :(```golang args := []string{""cognitoidp initiateauth clientid foo1 authflow USER_PASSWORD_AUTH authparameters USERNAME=foo2@foo.com PASSWORD=Foo1234 query AuthenticationResult.IdToken""} cmd := exec.Command(""aws args...) stdout err := cmd.Output() if err != nil { fmt.Println(""error err.Error()) return } fmt.Println(string(stdout))```"
55003;you should set stderr to the terminal
55004;for easier debugging
55005;`cmd.Stderr = os.Stderr`
55006;anyone here on robinhood?
55007;is this a go question
55008;"yes;i want to use an 3rd party api and write a automated app to trade for me"
55009;so whats the question
55010;if there is an api then use it
55011;@_diamondburned_ thank youuu i figured it out!! üôè
55012;been stuck on this all morning
55013;yeah np
55014;Hey is there a conventional way to make my CLI project at `github.com/name/supercoolproject` `go install` by default with a different name than `supercoolproject`?
55015;Like say I want to `go install` and be able to now call my CLI with something shorter like `scp`
55016;is the only way to do this is build with the o option and then move the binary into go/bin/
55017;?
55018;yeah
55019;it's to make a `cmd/binname/`
55020;and do `go install github.com/name/supercoolproject/...` or `go install github.com/name/supercoolproject/cmd/binname`
55021;If you have your main files in `cmd/scp/main.go` and do `go install ./...`
55022;Yeah like that
55023;oh? you mean just having a directory in `cmd/` directory with another name does this? Or put all of my Cobra files in `cmd/<name_i_want>/.`?
55024;the latter?
55025;they all read the same to me lol
55026;Cobra files?
55027;"yeah idk what cobra files are; I personally don't like using cobra for CLIs"
55028;@Dusty.P I'm making a Cobra CLI project
55029;but you put Go files in there
55030;that\'s what go install uses (.go not cobra files?)
55031;All you need is the `main.go` in there and you can import the rest of your code from other packages
55032;It's common to just have a simple main.go that all it does is call your other package
55033;Is there any way to atomically modify a variable with an interface type?
55034;atomic.Value
55035;yeah make the interface require `atomic` stuff
55036;https://godoc.org/sync/atomic#Value
55037;yeet got the link right first try
55038;dab
55039;sorry just to clarify Cobra generates a `supercoolproject/main.go` and a `supercoolproject/cmd/root.go`. main.go just calls `cmd.Execute()` defined in root.go@_diamondburned_ and @Dusty.P : So you're saying if I simply move both like this: `supercoolproject/scp/main.go` and `supercoolproject/scp/cmd/root.go`. Then `go install github.com/name/supercoolproject` will install a binary in my GOPATH called `scp` instead of `supercoolproject`? All install does is look at the directory name where main.go is?
55040;crank that dab
55041;Guess I'll use atomic.Value instead of my interface type then
55042;wow that sounds so roundabout
55043;why would there exist a main function that just calls another single function
55044;For code reusability and cleanliness...
55045;that's not really usable
55046;calling a single function doesn't really do muhc
55047;@_diamondburned_ This is what Cobra generator does: https://github.com/spf13/cobra#gettingstarted
55048;if you want code reusability and cleanliness design your package and libraries around having reusable functions methods and argument structs
55049;It allows you to use that function elsewhere as well
55050;don't do a single Main function
55051;I don't think it's a requirement but that's just default
55052;even if your code allows running the Main function if the functions that Main calls cannot be replicated elsewhere outside the package then it's moot
55053;That is the point all of your logic code should be in a package that can be reused with just a main func that calls into that package
55054;then the Main function is kind of useless to be honest
55055;rarely is it ever the case that you want to run something that always dumps into stdout exactly like how you would call a binary
55056;you'd want to use the result yourself somehow
55057;or capture it
55058;etc
55059;Not if you want multiple binaries that use the same packages
55060;so abstracting the entire main function is kind of moot
55061;That's not what I'm talking about
55062;?????
55063;it's better to have main combine a few functions and reduce the total calls needed to reimplement main than having a single main function
55064;Sorry guys didn't mean to start a fight üòõ
55065;Yeah that is what I am talking about
55066;I was talking about a single Main function though
55067;You don't want a lot of logic in your main func you want it in a separate package. You may need to process input and output in main but the logic should be elsewhere.
55068;Despite whether you agree with how Cobra lays stuff out by default... üôÇ you were saying the installed binary to GOPATH/bin/ will be whatever the directory name the `main.go` file is in?
55069;So the Cobra stuff is basically backwards of what I would recommend...
55070;that is the case yeah
55071;also $GOPATH/bin is what $GOBIN defaults to
55072;Do you guys have a preferred CLI builder tool? I just liked that it gives me all of the USAGE text out of the box (and helps parse flags + env file with Viper)
55073;I prefer urfave/cli for large/niche CLIs
55074;otherwise pflag + switch case
55075;it's not urfave anymore though but Google should still yield something
55076;okay thanks guys I'll try that out
55077;I may try urfave/cli next time üôÇ
55078;yeah np
55079;Instead of```‚ñæ appName/  ‚ñæ cmd/  add.go  your.go  commands.go  here.go  main.go```I would do```‚ñæ appName/  ‚ñæ cobra/  add.go  your.go  commands.go  here.go  ‚ñæ cmd/  ‚ñæ scp/  main.go```
55080;`cmd` is some convention? Sorry I'm new to Go. Was trying it out to write this new CLI tool I wanted to make
55081;bruh the arrows
55082;spent a couple days on it like Go a lot.. just cleaning up my project a bit now
55083;so it installs for people like I want
55084;I just copied the arrows from the git repo lol
55085;I'd do ``` projectDir/  yourlib.go  idk.go  cmd/  binName/ main.go```
55086;yeah that's too much effort for me
55087;`cmd` is the convention that tells the go tooling to build binaries for the sub directories when you do `go install ./...`
55088;technically ... traverses all directories and not just cmd/
55089;oh I see
55090;cmd is the convention yeah but the compiler/tool doesn't treat it any specially
55091;"looking for main.go""s?"
55092;package mains yeah
55093;Yeah
55094;main.go is another convention for package mains
55095;oh pkg main yeah okay
55096;or <package name>.go in general
55097;The tooling doesn't generally care about file and directory names
55098;Except for `internal` directories
55099;^
55100;alright gotta read up more. thanks!
55101;``` // For server requests the Request Body is always nonnil // but will return EOF immediately when no body is present. // The Server will close the request body. The ServeHTTP // Handler does not need to.```huh so you dont need to `defer r.Body.Close()` in a handler?
55102;from https://golang.org/pkg/net/http/#Request
55103;you don't
55104;bruh
55105;huh
55106;til
55107;it's easy w/ http handlers because the caller can responsibly close the body (as it's not your code)
55108;but when you're creating the request you're also the one responsible for closing body
55109;yeah
55110;"```type AutoGenerated struct { Embeds []struct { Title string `json:""title""` Description string `json:""description""` Color int `json:""color""` } `json:""embeds""`}```"
55111;can someone pls show me how to set this stuff lol
55112;json in go is so new o me
55113;"``structure := AutoGenerated{Title: https://www.footlocker.com""}``"
55114;im trying that but get this eroor
55115;yeah
55116;```type AutoGenerated struct { Embeds []struct {```
55117;there's the type definition
55118;"`AutoGenerated{Title: https://www.footlocker.com""}`"
55119;and your code
55120;see a difference?
55121;what does the type do
55122;i used a converter to make this
55123;Right
55124;i'm familiar
55125;honestly it sounds like you just need the tour
55126;?go tour
55127;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
55128;this isn\'t a json problem this is you don\'t know how types in go work
55129;yea im starting to learn the lang decently its just the json data
55130;yes i dont
55131;not a judgement
55132;ye im not taking it that way
55133;take a run at the tour and learn a bit about defining structs
55134;coming from python and node js this stuff is just kinda a shock
55135;and things may become more clear
55136;oh lord yeah
55137;coming from python it was real difficult
55138;yep been using python for 2+ years now
55139;no offense but I haven't seen many good JSON structures from a dynamically typed language
55140;so Go will also teach you how to properly type JSONs
55141;yep
55142;im learning c++ in school but we havent got that far
55143;oh boy
55144;save yourself
55145;lol I'm also learning C++ in school
55146;pretty simple C++ though
55147;academic C++ is like 5% of what C++ actually is
55148;yea our c++ is a joke
55149;"new to go just had a quick question because I think I am just missing something simple: if I am unable to find a `volume` I want to return nothing and the error message. I understand that I have typed the first return as `[]gosc.Volume` and so I must return a like object. What am i missing to be able to return the `Volume` and `nil` if found and `nil` and `Error` if not found. Feels like an issue with how i structured it?```gofunc volumeFinder(volumes []gosc.Volume volumeName string) (gosc.Volume error) { var volume gosc.Volume for _ volume := range volumes { if volume.Name == volumeName { return volume nil } } return volume fmt.Errorf(""no volume:  + volumeName +  found with provided name"")}```"
55150;your return would have to be a pointer to return nil
55151;value types cannot be nil
55152;pointer types can
55153;Is gosc.Volume an interface tho
55154;no it has a field `Name`
55155;pointer or slice
55156;Dont talk to me again mike
55157;done
55158;`Volume` is a struct
55159;`type Volume T` yeet
55160;:pepostop:
55161;you can return a zero value or a pointer but if you wanna go nil use a pointer
55162;k
55163;you can also just return a bool
55164;without using a pointer?
55165;why do so many devs only use 1 letter for the var name>
55166;?
55167;go has a semiweird convention that variable name length should be based on the scope of the variable
55168;"Anyone can understand this``` for loop := 1; loop <= 100; loop++ {```this is harder to read``` for i := 1; i <= 100; i++ {```"
55169;not really
55170;when ur new yrs
55171;`i` is only relevant to that loop
55172;and what if you have multiple loops
55173;`loop` `loop2` `loop3`?
55174;`i` `j` `k`
55175;than u can name what the loop is for
55176;its irrelevant detail
55177;take a look at this script and tell me what u think.https://github.com/complexorganizations/wireguardmanager/blob/master/wireguardserver.shits easy to read and understand
55178;friend this is over a thousand lines
55179;of shell script
55180;but yes most of it is easy to understand
55181;omg hello üòç
55182;i'm looking to learn golang :hayaisalute:
55183;hello
55184;golang is pretty easy to understand the hardest part is the functions
55185;what about them?
55186;https://dave.cheney.net/practicalgo/presentations/qconchina.html#_identifiers
55187;actually just read the whole thing
55188;i'm also looking to create a gui in go how hard would that be?
55189;what type of gui
55190;desktop?
55191;web?
55192;yep desktop
55193;go isnt build for gui
55194;use flutter
55195;yes i know that
55196;its better for GUI
55197;oh okay thanks
55198;diamond uses gtk for their stuff
55199;as a python onetrick go seems so insane
55200;the gui libs are kinda hit or miss depending on your knowledge and what you want to do
55201;certainly possible
55202;gotcha
55203;it wouldnt be anything too crazy
55204;like editing jsons
55205;in gui form kind of
55206;stuff like that
55207;https://flutter.dev/
55208;take a look at that
55209;@Deleted User what framework and OS?
55210;does it have to be cross platform?
55211;no just windows is probably fine
55212;oof
55213;tfw Windows
55214;> https://flutter.dev/@Deleted User isnt this only for mobile
55215;yeah oof moment
55216;> tfw Windows@_diamondburned_ trueee :LULW:
55217;of all the platforms to be only
55218;try WinForms libui or Qt
55219;in recommendation order
55220;there's a GoQt?
55221;Qt as last resort because it's huge
55222;yeah
55223;Qt is really bloated though
55224;what do u guys think about a sneaker bot in golang?
55225;@Deleted User flutter isnt mobile only
55226;oh?
55227;works for web / android / ios / windows / mac / linux
55228;sigh more sneakerbots
55229;???
55230;lol
55231;oh
55232;lol
55233;:OMEGALUL:
55234;dont get me wrong go is build for backend and flutter is for frontend
55235;Whomst sneakerbotting
55236;yeah i know that
55237;flutter dosent have speed but GUI is 10/10
55238;yeah we hate sneakerbots jeez
55239;btw libui's freeing is manual
55240;so you'll need to use defer or make a deconstructor method
55241;and somehow free them after done
55242;shouldn't be hard at all
55243;who hates sneaker bots
55244;....
55245;me!!!
55246;oh no
55247;looks ike u own one
55248;wham sneaker twitter
55249;uhhh
55250;idk what u mean
55251;i hate scalpers
55252;cao
55253;cap
55254;dirty dirty scalpers
55255;u can be the scalpers
55256;thank god go tls exists
55257;you own one too :seb:
55258;i do
55259;too bad i cant figure out go json :Pepe_Cringe:
55260;wait u cant
55261;why not
55262;@Wham is vasto written in go
55263;Yea
55264;https://gobyexample.com/json
55265;there you go
55266;pretty much everything you need to know
55267;o one page
55268;"```type AutoGenerated struct { Embeds []struct { Title string `json:""title""` Description string `json:""description""` Color int `json:""color""` } `json:""embeds""`}``````structure := AutoGenerated{[]Embeds:{Embeds{Title:x},},}```ive been trying this but i feel like an idiot"
55269;@Wham what gui lib?
55270;electron
55271;eww
55272;give that struct a name
55273;where so
55274;and pull out the embeds struct in its own struct imo
55275;u dont like electron? @_diamondburned_
55276;absolutely not
55277;y
55278;because it's slow and bloated
55279;and it has JS
55280;I only use go for TLS
55281;~~Gtk has a bit of JS too but that's different~~
55282;i agree with him
55283;diamond why dont u like flutter?
55284;"```type MyTypeNameHere struct { Embeds []Embed}type Embed struct { Title string `json:""title""` Description string `json:""description""` Color int `json:""color""`}```"
55285;ok cool let me try that thanks
55286;because I cba using 2 languages
55287;and I already have everything else not GUI good and running in Go
55288;https://twitter.com/VastoAIO/status/1303716493964660736/photo/1
55289;and I like Go's stuff more
55290;it just makes it more readble imo
55291;do u like my UI
55292;the tools syntax etc
55293;but thats personal preference
55294;it's ok
55295;@WhamSZNu offering software as a service?
55296;the whole project was written in JS but now im rewriting in go
55297;which is a pain
55298;yes
55299;open source it
55300;we will help
55301;cant
55302;akamai gens and shit r worth 10s of thousands
55303;tfw
55304;probably one of the reasons why I'll never get into sneakerbots
55305;i only care about them because there is atleast one person a week in here with absolutely no idea what they are doing that heard they can make $$$ making a sneaker bot
55306;and demanding someone help them
55307;AHHAh there are alot of noobs who think they can just make it
55308;im literally just mad confused w go json syntax so i probably look like a noob
55309;you literally just take json
55310;and say what the types are
55311;im just used to doign .name
55312;and thats it
55313;> the whole project was written in JS but now im rewriting in go@Wham same here i want to rewrite mine in go
55314;python :OMEGALUL:
55315;wait til u touch akamai
55316;and learn what TLS/JA3 is
55317;> wait til u touch akamaialready touched
55318;u have a tls solution in python
55319;we got akamai bypass @Wham
55320;yuk
55321;and datadome bypass
55322;that will be clipped be soon
55323;@Wham you use that asilectron go thing?
55324;"if you have ```{ foo"": 10, bar: [ banana"", orange"" ], baz"": { ban"": 10 }}```it becomes ```gotype SomeTypeName struct { Foo int `json:""foo""` Bar []string `json:""bar""` Baz struct { Ban int `json:""ban""` } `json:""baz""`}```"
55325;u know i wrote a simple website in node and it used like 3x instances in app engine and cost me like $7 while go i handle about 2m request for $0
55326;yea i can convert it
55327;its like setting it is hard for me
55328;that one is easy
55329;@Wham https://github.com/asticode/goastilectron
55330;I'm also used to doing .Name
55331;gui can be slow as long as requests go brrrrr
55332;.Name that the autocompleter knows and types for me at least because that's one of the benefits of a typed language
55333;:bouncecold:
55334;also what mike said
55335;Is the builtin http library typically the quickest way of going about requests?
55336;9000%
55337;i have a custom golang http lib
55338;@pr1sm it's the best way not necessarily the fastest way in terms of performance
55339;omg prism dad üòç
55340;wtf
55341;is the sneakerbotters taking over this discord?
55342;is this the fated day?
55343;bro we aint no dirty sneakerbotters @_diamondburned_
55344;we aint no scalpers
55345;Bruh i thought i was the only one im not even asking for sneaker shit
55346;we're honest men :KKonaW:
55347;tryna make a livin :KKonaW:
55348;@Wham you'd get a laugh out of this channel weekly
55349;i literally just came in here for some advice lol
55350;Honestly not tryna overload this with botting shit ^^^
55351;imma watch it
55352;just asking some questions about go and poking around with it
55353;we\'d get something like how do i guarantee http header orders questions every week
55354;yeah sure
55355;LOL
55356;also I wonder what working at Akamai rn would feel like lmfao
55357;üí∞
55358;> also I wonder what working at Akamai rn would feel like lmfao@_diamondburned_ i would love to work for them
55359;I have a custom request library i made w cookie retention header order and proxy support. I might use websockets and just port it to Node JS
55360;"```gotype MyTypeNameHere struct { Embeds []Embed}type Embed struct { Title string `json:""title""` Description string `json:""description""` Color int `json:""color""`}```with this```gomyVariable := MyTypeNameHere { Embeds: Embeds[] { Embed { Title: foo"", Description: bar"", Color: 10, }, Embed { Title: baz"", Description: banana"", Color: 6, }  ]}``` or something very close to that tired and may have messed up the syntax"
55361;idc i write bots therefore i would leak our akamai bypasses and apis to them like a double agent
55362;you could've just find a lower level http library
55363;well i used uTLS
55364;that's not really a http library
55365;so i can set that stuff too
55366;yea thats why my library is Custom
55367;now i can set TLS
55368;does built in http have cookie retention with a client object?
55369;you can use a cookiejar
55370;w/ client
55371;Ok
55372;@Wham you can also just fork a library to allow a swappable TLS impl
55373;it's not that hard tbh
55374;just saying
55375;i never said it was hard
55376;the work has been done so it doesn't matter
55377;sure
55378;imma look in here
55379;see if any washed bots pop up
55380;:Walter:
55381;@Wham we ain't washed
55382;bud
55383;wait like 3 days
55384;i hit an 18 clip today
55385;:nocap:
55386;never said u were
55387;python bot hits 18 clip
55388;i can see the headlines
55389;@_diamondburned_ your golang discord client sick as fuck
55390;a lot of people hit the go\'s map is only unordered part
55391;and give up since the default http client uses a map for headers
55392;u dont have to use a maop
55393;@Deleted User which one?
55394;"req.Header.Set(""ContentType application/json"")"
55395;or does this just make it a map
55396;@_diamondburned_ uhh idk im just stalking your github
55397;yes
55398;gtk
55399;the request headers are stored in a map
55400;yea there are like 3 but that question was mostly a joke at myself
55401;I usauly store them in a map
55402;in the stdlib atleast
55403;isnt a map like a dict
55404;but all jumbled and shit
55405;"Sorry for the extremely basic question however HTTP seems to be giving some weird crash and was curious if this code looks right```gofunc main() { log.Println(""Started"") resp err := http.Get(""https://httpbin.org/get"") if err != nil { log.Fatalln(err) } defer resp.Body.Close() body err := ioutil.ReadAll(resp.Body) if err != nil { log.Fatalln(err) }  log.Println(string(body))}```"
55406;crash where?
55407;what does the error say
55408;^
55409;and the trace
55410;None
55411;its not really an error as much as a crash
55412;bruh
55413;the error is on top
55414;i can't scroll though
55415;lmfao
55416;bruhhhh
55417;not Shift+PgUp?
55418;i'll find a way to dump the output
55419;>windows
55420;`go run . &> /tmp/file`
55421;or `go run . |& less`
55422;it clears the screen for whatever reason
55423;stop dissing windows guys some of us are :retard:
55424;üòî
55425;my condolences
55426;wait is that even bash?
55427;:brainGud:
55428;it's not right?
55429;yeah not sure then
55430;looks like the windows cmd
55431;yes that's windows cmd
55432;:thonk:
55433;what the fuck
55434;lmoa
55435;it's gotta be something with my PC its working fine on my laptop
55436;>windows
55437;LOOOOOLL
55438;> it's gotta be something with my PC its working fine on my laptopvenv
55439;that's actually funny
55440;ur venv must be fucked somehow
55441;lookupIP crash?
55442;are all errors in go like that lmao
55443;@_diamondburned_ is gtk3 pleasant to work with
55444;seems to do w/ the resolver
55445;no that's a crash caused by the system
55446;ah
55447;good
55448;gonna try and reinstall lmao
55449;looks so not pleasing
55450;python errors be like
55451;error here üòÄ üëç
55452;lmao
55453;all the errors thus far have been nice just the system crash
55454;guys earth is flat prove me wrong
55455;no
55456;0xc0000005 is an access violation error
55457;https://stackoverflow.com/questions/5303524/whatexactlyisthescopeofaccessviolation0xc0000005
55458;"tl;dr windows bad"
55459;i really should make stackoverflow scraper for myself
55460;on there a lot
55461;lmao
55462;restart your pc also
55463;yeah that'd be useful
55464;stackoverflow but it's an autocompleter
55465;python is good for that kind of thing
55466;> python errors be like> error here üòÄ üëçyeah until you get the same exception
55467;then it'll say the same thing with almost the same stack trace
55468;true
55469;how much slower is js than golang
55470;for what?
55471;yes
55472;what code?
55473;yes.
55474;yes
55475;yes
55476;no
55477;no
55478;yes? no?
55479;yes no
55480;is the answer
55481;deno
55482;you did not specify a domain
55483;yes no is the answer to > how much slower is js than golang?
55484;in terms of
55485;how much slower is js than golang at adding 1+1
55486;raw computation üòº
55487;@Madxmike in terms of how many hello world requests nodejs could serve compared to fasthttp :troll:
55488;because clearly that's the best metrics
55489;bruh
55490;how else are you gonna get them graphs
55491;raw computation of what
55492;numbers?
55493;text?
55494;idk
55495;in general
55496;exactly you don't know yet
55497;typical usecase
55498;you need to have specific ideas
55499;nodejs could just load to C++ and it'd probably be faster than pure Go
55500;otherwise its impossible to just say
55501;the C++ could use SIMD for parallel computation
55502;or even use the GPU
55503;that'd be faster than pure Go
55504;> the C++ could use SIMD for parallel computation@_diamondburned_ :troll:
55505;but Go could also use SIMD and GPU
55506;so it's not an easy comparison
55507;im talking about raw go
55508;SIMD and GPU can all be done using pure Go
55509;well if you try hard enough
55510;cause a request that takes 34 seconds on python takes 12 on go
55511;so i'm thinking about go vs js
55512;yeah but that's for different reasons and it's simple to explain why when you have something specific
55513;here you know that both codes are performing HTTP requests
55514;there isn't an unknown
55515;some of the common answers to that would be the fact that Python is interpreted while Go is compiled
55516;Python has a longer and larger runtime init time and Go does not
55517;Python has to parse its code all over again on each run Go is straight machine code
55518;yeah
55519;the Go runtime is more (unsure) optimized than Python's
55520;same for GC
55521;but imo i like python cause as some dude said Programs should be written for people to read and only incidentally for machines to execute.
55522;but this doesn't mean that Py is always slower than Go
55523;psuedocode is cool like that
55524;although a naively written Py program naively ported to Go will almost always be faster you can optimize Py to be faster
55525;by reducing the Python code that Python uses :^)
55526;of course
55527;see: Tensorflow
55528;many stick together go slower than one small stick
55529;or that Python math library
55530;forgot name
55531;matplot?
55532;I think so
55533;or numpy
55534;oh yeah numpy
55535;both does computations in C++ iirc
55536;https://github.com/google/grumpy#:~:text=Overview,Grumpy%20is%20a%20Python%20to%20Go%20source%20code%20transcompiler%20and,that%20Grumpy%20has%20no%20VM.
55537;wow
55538;this is cool
55539;probably slow though
55540;oh man
55541;?
55542;go buy a physical Java processor /s
55543;hah
55544;at this point im just gonna send json data to my api
55545;and have it make the embed
55546;None
55547;üò≠ üòÇ
55548;not polarcop
55549;bruh
55550;i posted how to set things
55551;well i mean the webhook needs to be protected anyways
55552;I already have an API for it
55553;i thought polar was done for
55554;didnt they get exposed for stealing code @pr1sm
55555;No clue
55556;@Madxmike ty just seeing ur post now
55557;go more or less does not have implicit types in struct literals
55558;you can do it still but you shouldn't
55559;don't try and rush things together while applying other languages principles over Go
55560;Go will kick you
55561;well this just goes for almost every single statically typed languages out there
55562;btw @Deleted User which is another reason how Go could possibly be faster than Python
55563;"it doesn't have to worry about type checking; that's already done at compiletime"
55564;I FOUND IT @pr1sm
55565;https://docs.google.com/document/d/1hj8QftLu0mzQ8X6sOGuT1LNgv9_LhiR2bdkaQsQAKL0/edit
55566;LOOL
55567;#offtopic
55568;sorry üôá\u200d‚ôÇÔ∏è
55569;Banned
55570;üòä
55571;is there a way to set headers via a map or do you have to do `req.Header.Set` for each header?
55572;just set req.Header directly
55573;its just a map
55574;Oh alright
55575;it's kind of a weird map
55576;weird as in you may not expect it to be a certain way
55577;"```goreq.Header = http.Header{ header"": []string{""you can do this""}, head"": {""or this""},}```"
55578;map[string][]string
55579;diamond do you have any clue how to use the FileId in Images
55580;the docs give 0 information about how to use the file id
55581;link me the docs to that struct pls i'm lazy
55582;nvm found it
55583;oh cool
55584;https://pkg.go.dev/github.com/librespotorg/librespotgolang@v0.0.020200423180623b19a2f10c856/Spotify#Image
55585;nicee thx
55586;this is the link to the absolutely useless docs
55587;https://github.com/librespotorg/librespotgolang/issues/4
55588;this is where i found an answer...
55589;"`(""https://i.scdn.co/image/%032s hex.EncodeToString(file_id))` bruh"
55590;that's just
55591;actually nah nvm
55592;it's reasonable but like
55593;something like that should be in the freaking package
55594;PR üòî
55595;i'm just gonna rewrite it one day
55596;lmao
55597;best of luck bud
55598;is there a go equivalent to `del dictionary[key]` for a go map
55599;delete(map key)
55600;üëç ty
55601;I have a fn with signature `(thing string args ...interface{})`. If i have a slice of strings to pass as args should they be passed as a slice or using `myslice...`? I assumed the latter however it tells me []string cannot be used as []interface{}
55602;1 sec
55603;you have to copy everything from []string into a new []interface{} slice
55604;element by element
55605;this is because `[]string` and `[]interface{}` are different types
55606;interface{} is an empty interface but []interface{} is just a slice type
55607;an interface can have types satisfy it but not a slice
55608;a slice is just a slice
55609;mike idk why you deleted your answer :Thonk:
55610;I was like yeah he got this and then you deleted it
55611;because i wanted to have the full answer on how to do it
55612;I see so i can then expand it as interfaceslice... right
55613;and i thought there was some wierd thing i was forgetting
55614;once you have a `[]interface{}` yeah
55615;man you're making the same mistake as I did
55616;just like
55617;specificially with variadic args
55618;do it as you go lol
55619;Alright too easy thanks both of you üôÇ
55620;yeah np
55621;"How do I setup a JSON struct with the structure like `{[{""KEY"": VALUE""},{""KEY2"":""Value2""}]}`"
55622;looks like an array of maps
55623;`[]map[string]string`
55624;Oh I see ty
55625;if this is going to be used outside of where you are parsing this
55626;I would make it a full type
55627;`type NameHere []map[string]string`
55628;then you can add methods to it to do stuff
55629;but if its just a local little thing i wouldnt bother
55630;nah that looks like invalid json lmao
55631;is it?
55632;the array is wrapped around an object with no key
55633;true
55634;"```sh‚Äï‚ù§‚Äï‚ñ∂ echo \'{[{""KEY"": VALUE""},{""KEY2"":""Value2""}]}\ | jq .parse error: Objects must consist of key:value pairs at line 1 column 38```"
55635;I guess its just a json array
55636;[{},{}]
55637;yeah
55638;then yeah
55639;that's an array of objects
55640;but the array is missing the key
55641;what mike said or you make a struct
55642;Yeah I just needed a map array
55643;"should be ```{ foo"": [{...} {...}]}```"
55644;not sure how the server is parsing but sending it in the format [{} {}] it likes that
55645;"``` 16 func Set(s string u string) string {  17 cfg = map[string]string{} 18 cfg[""port""] = 8000"" 19 cfg[""host""] = localhost"" 20 cfg[""connectionHost""] = db.mysecretapp.dev"" 21 cfg[""connectionDB""] = secretapp"" 22 cfg[""connectionUser""] = root"" 23 return cfg[u] 24  25 }``` why its not returing u?"
55646;because you didn't tell it to
55647;hello everyone üôÇ
55648;Just wondering.. when you implement a producer/consumer how do you know how many consumers do you need and what size the channel's buffer should be ?
55649;the right way is to instrument
55650;the okay way is to make a best assumption and handle when that assumption fails
55651;"> ``` 16 func Set(s string u string) string { > 17 cfg = map[string]string{}> 18 cfg[""port""] = 8000""> 19 cfg[""host""] = localhost""> 20 cfg[""connectionHost""] = db.mysecretapp.dev""> 21 cfg[""connectionDB""] = secretapp""> 22 cfg[""connectionUser""] = root""> 23 return cfg[u]> 24 > 25 }``` why its not returing u?@emnaruto07 are you sure you know what you are doing with this function? you are basically setting up a thing every time you call this just to collect one of those values??? that sounds a waste of everything..."
55652;Anyone with net pkg experience know if we can bind to the same port to listen for both TCP and UDP traffic?
55653;@jtim i'd say no
55654;not with the same call but you can create two binds
55655;Hiya guys I have a small HTTP api with both server and client code written in Go. I want to switch to HTTPS. While doing reading for it I came across some cases where http client was used with a tls config. Could anyone explain why this is the case and not just a config to the server?
55656;both http clients and http servers accept tls configurations
55657;https://golang.org/pkg/net/http/#ListenAndServeTLS
55658;well
55659;hm
55660;I'm just wondering why is that the case
55661;speaking outside of Go for a second (because without knowing what you came across can't really talk directly to it) but clients can support different protocols cipher suites encryption and even use client side certificates
55662;TLS isnt just a server side concept after all
55663;I see thank you
55664;especially when you involve mTLS
55665;im ean yeah
55666;tls happens from both sides
55667;I am installing a program at runtime which gets added to the path how do i access this executable?
55668;by its name
55669;I tried that and it was saying that the file wasnt in the path
55670;then it seems youre not adding it to PATH
55671;then i tried to echo the path in the terminal and the directory was there
55672;and i ran the executable by name after and it was working fine in the terminal
55673;then your PATH inapplication is different
55674;i guess i can echo the path variable from within golang and see what it outputs
55675;welcome to debugging
55676;print everything out
55677;find out where your assumptions start failing
55678;"So i did this ```gofor _ element := range os.Environ() { variable := strings.Split(element ="") fmt.Println(variable[0],""=>"",variable[1])}```And the path variable here did contain the folder where the binary is installed in"
55679;are you using exec.Command
55680;yeah
55681;that doesn't give a shit about PATH
55682;at least not by default?
55683;try using the absolute path to the binary you want to execute
55684;just to confirm
55685;okay sec
55686;pretty sure i tried that already but ill try it again
55687;Any datadog users trying to work out how to set a http status in a trace :bighmm:
55688;"so im using gorialla session. and i store the user in```gosession.Values = map[string]interface{}{""authenticated"":true userID"": user.uid}``` and i store it in a Redis store. but the data is like stored in the form of hex and when i convert it to UTF8 it is just un readable."
55689;i want to be able to store session data in the store. in such a way taht other services are also able to read the data.
55690;right now the go service is able to read it perfectly fine because the `session.Values` is a `map[interface{}]interface{}`
55691;structure as a common data format
55692;like json or something
55693;"`""\\x0e\\xff\\x81\\x04\\x01\\x02\\xff\\x82\\x00\\x01\\x10\\x01\\x10\\x00\\x00e\\xff\\x82\\x00\\x02\\x06string\\x0c\\x0f\\x00\\rauthenticated\\x04bool\\x02\\x02\\x00\\x01\\x06string\\x0c\\b\\x00\\x06userid\\x06string\\x0c&\\x00$41eb9d919c2b46fcb421cc331f2067d1""` this is how it gets stored. in redis. part of it is readable but doesnt get decoded with other serivces"
55694;@Doad i thought about it. but the `Values` is still of type `map[interface{}]interface{}` so i think it might be encoding it and hence it looks like that
55695;As I said use a common data format for Redis
55696;JSON in JSON out
55697;everything can handle that
55698;so is this a setting for redis? or do i need to change the code in the service?
55699;From your service
55700;Store JSON data in your redis key
55701;See: https://godoc.org/github.com/gorilla/securecookie#JSONEncoder
55702;"```gosession.Values[""user""] = fmt.Sprinf(`{""userID"":""%s"",""auth"":""true""}`,user.uid)```"
55703;?
55704;Don't manually build JSON
55705;look at the link LethalClips posted
55706;ahh the Encoder i see
55707;If you're curious that default encoding you see is `encoding/gob` üôÇ
55708;Opentelementry or opencensus?
55709;telemantry is pretty confusing to me but census has a much thinner api
55710;(which you could feasibly decode in other programs if they have support but JSON is unquestionably more widelysupported)
55711;havent heard of people actually using opencensus lmao
55712;opentel is definitely still heavy WIP
55713;oh i see
55714;i was able to get things working on my end with opencensus
55715;but it looks like i should be moving to opentelemntry
55716;What about opentracing
55717;still valid and widely used
55718;For golang in particular
55719;what happened to @deezy
55720;life mostly
55721;mild alcoholism
55722;Is this correct channel to ask for help in?
55723;it is
55724;could someone please help me with this
55725;It's probably me being stupid but how would I go about fixing this
55726;whare are u trying to do?
55727;get a valid int as an input from the console
55728;"```/func userInput() { fmt.Println(""What is your VirusTotal API key?"") var virustotalApiKey string fmt.Scan(&virustotalApiKey) fmt.Println(virustotalApiKey)}/```"
55729;something like this?
55730;yes but I'm looping it until they input a valid int
55731;youre ignoring the error from the scanln
55732;dont ignore it and see what it says
55733;what error? My code runs fine with no errors it just prints Complete sequence to how many places twice
55734;I only want to print that once
55735;fmt.Scanln
55736;returns `n int err error`
55737;you are ignoring the error that is being returned from it
55738;ah ok
55739;sorry like I said it was likely me being stupid
55740;_ err := fmt.Scanln
55741;its always the same reason on this
55742;but i never remember why
55743;and have to reason through it
55744;@Carson i couldnt figure out how to use the encoder. do i use it like a `json.Marshal`?
55745;through the error message
55746;err := json.NewEncoder(<some io.Writer>).Encode(&<some value>)
55747;I don't get an error message tho which is why it confused me ig
55748;if you scanln on a non integer there
55749;it will 100% give you an error
55750;i made this function. that would serialize the user object
55751;vimgo is not displaying and error and neither is it when I run the program
55752;whats the code now
55753;"and then did ```gosession.Values[""user""] = Stringify(map[string]interface{}{""user"":user.UID,""auth"":true})session.Save(r w)``` but the data stored in redis is still hex"
55754;and decoding it in anther service written in typescript looks weird
55755;i mean what's `encoder`
55756;> i made this function. that would serialize the user objectserious question: what have you actually saved by making this function
55757;no clue
55758;`encoder = sercurecookie.JSONEncoder{}`
55759;never heard of it
55760;but that's why you're seeing what you're seeing
55761;https://pkg.go.dev/github.com/gorilla/securecookie#JSONEncoder.Deserializei cant figure out how to use this
55762;https://godoc.org/github.com/gorilla/securecookie#SecureCookie.SetSerializer
55763;Once you create a `securecookie.SecureCookie` you can use it as a `securecookie.Codec` which Gorilla's session stores use
55764;"You shouldn't ever be calling `Serialize` or `Deserialize` directly; Gorilla's internals will"
55765;(well ever might be a strong word but you probably don't want to here)
55766;so do i make my own `Serialize` and `Deserialize` functions? that encode using the `json.NewEncoder` ?
55767;No. That's what `securecookie.JSONEncoder` provides.
55768;Notice: ```gotype Serializer interface { Serialize(src interface{}) ([]byte error) Deserialize(src []byte dst interface{}) error}```
55769;And that `JSONEncoder` has two methods which conveniently match those üôÇ
55770;so i tell the `FileStore` from `gorilla/session` to use that?
55771;Yep! See: https://godoc.org/github.com/gorilla/sessions#FilesystemStore.Codecs
55772;oh dear god. im so dumb
55773;"Don't beat yourself up; the implicit nature of interfaces can be nice for code writing but it often makes it hard to see how everything fits together when looking through docs"
55774;"If you're looking through docs and something isn't clicking look at common interfaces their methods and what types implement those methods; hopefully a picture starts to become clearer üôÇ"
55775;jesus christ.
55776;it was there all along
55777;thanks so much dude
55778;"Yeah haha. The main connection here is that `securecookie.SecureCookie` has a `SetSerializer` method and also satisfies `securecookie.Codec`; once you see those two pieces it becomes much easier to put together the puzzle"
55779;"Hello I have a small question about Json Unmarshalling.Given this JSON ```{""data"":{""pid"":1371}}```I\'m trying to unmarshal it to this struct```var intermediate struct { Data struct { Result json.RawMessage `json:""result,omitempty""` } `json:""data""` }```But it doesn\'t work as it gives ```unexpected end of JSON input```Why?"
55780;are you sure thats the same json youre giving it?
55781;Yes it is
55782;how have you checked
55783;show some surrounding code
55784;https://play.golang.org/p/zlmEblWp8x
55785;I got why
55786;Because intermediate.Data.Result is nil
55787;But I don't understand how to fix it
55788;You aren‚Äôt printing anything out in that playground link
55789;https://play.golang.org/p/AjHiP1LyaRW
55790;But it‚Äôs nil because there is no part of that json that is ‚Äúresult‚Äù
55791;You have a ‚Äúpid‚Äù
55792;No result
55793;I assumed json.RawMessage should store an arbitrary JSON
55794;Yes
55795;But you explicitly say there
55796;‚ÄúStore the data associated with the tag result into this variable‚Äù
55797;And there's a way to store any JSON?
55798;{data: { result: ‚Äúfoo‚Äù}}
55799;This is what it‚Äôs trying to find
55800;Do you want to just store all the data associated with `data`?
55801;If so just make Data in that struct a json.RawMessage
55802;And all of the contents of the object will be kept as bytes
55803;Let me try it out
55804;I‚Äôm on my phone or I would type it out
55805;np
55806;Thanks
55807;Json decoding pretty much expects the tags to match exactly
55808;And is it possible to unmarshal in a map?
55809;yes
55810;> Json decoding pretty much expects the tags to match exactly@Madxmike Basically I know I have data and some other objects in key:value format
55811;> yes@Str≈ìm How?
55812;I can't specify all tags because I don't know them
55813;Hi there Im not sure what they are but is it possible to remove the numbers & just get the path from `runtime.caller()`?`74750628 /path/test.go 31 true`
55814;You could just strings.split with   and select [1]
55815;Or write a little regex
55816;I'm 99% sure Caller() returns multiple arguments
55817;you're getting 4 things printed because you did `Println(Caller())` or sth
55818;You're right @_diamondburned_ sorry I only just realised!
55819;which puts all 4 arguments into the Println argument
55820;Thanks @arte @_diamondburned_
55821;yeah np
55822;@Jaedsaf unmarshal into map[string]interface if you don't know which types you are going to get
55823;map[string]interface{}
55824;interface{} can be any type here
55825;in case you don't know the keys but do know the value type
55826;What do you need to do in your application with this decoded json? Do you need to use its field or just store/move them as they are?
55827;this may be a dumb question but what is the purpose of having the types declared after variable names instead of type names coming first like in most programming languages. Does it serve any purpose or is it just a stylistic choice?
55828;it's effectively arbitrary
55829;does it actually matter if you say I have an integer named foo versus i have foo it\'s an integer
55830;Just kind of odd to get used to lol
55831;it's okay it's all made up and meaningless
55832;this tbh
55833;also I guess you could argue that var const and func are types
55834;it could just as easily been `@foo int = 0` or `/int foo 0`
55835;so `const val` `var val` and `func val`
55836;¬Ø\\_(„ÉÑ)_/¬Ø
55837;(actually it was a conscious decision because it allows the compiler to parse declarations without a symbol table making the compiler a little bit faster overall)
55838;(that's some deep magic though)
55839;i was sitting here for days thinking i was stupid but turns out i am not.
55840;"```func findFiles() string { filepath.Walk(""/ func(path string info os.FileInfo err error) string { fmt.Println(path) return  }) return path}```This wont work cause its pathwalk"
55841;Yeah as the compiler would say
55842;i am 90% sure u said something about this too like 12 days ago
55843;```cannot use func literal (type func(string os.FileInfo error) string) as type filepath.WalkFunc in argument to filepath.Walkundefined: path```
55844;Yes. You've asked the same question 3 times now and we've answered and provided you with runnable code each time
55845;provided you with runnable code each time where??
55846;Please take the time to actually read our responses before asking the question again. The answers won't change
55847;where is this runnable code?
55848;None
55849;"> ```> package main> > import (> crypto/sha256""> fmt""> io""> log""> os""> )> > func main() {> f err := os.Open(""file.txt"")> if err != nil {> log.Fatal(err)> }> defer f.Close()> > h := sha256.New()> if _ err := io.Copy(h f); err != nil {> log.Fatal(err)> }> > fmt.Printf(""%x h.Sum(nil))> }> ```@Deleted User there: https://discordapp.com/channels/118456055842734083/118456055842734083/758306620899459083"
55850;You asked something about `walk` there as well
55851;this isnt the same one this will hash a file we are talking about walk
55852;https://godoc.org/path/filepath#exampleWalk
55853;what do you expect your walk code to do
55854;godoc
55855;linked multiple times
55856;please. just. read.
55857;i am using the code from there
55858;No you're not
55859;That code actually compiles
55860;None
55861;That isn't what you showed not even 5 minutes ago
55862;Please ask the question you want answered
55863;This doesn\'t work isn\'t a question
55864;everything u have given me i have tried
55865;this shit dosent work at all
55866;fuck this
55867;i am leaving
55868;You've not even described what you are trying to do
55869;They actually left
55870;nice
55871;üéâ
55872;Tactical move by @Sgt_Tailor
55873;Lets not celebrate someone leaving though. This isn't the place for that
55874;True
55875;Is there a way to get a pointer to a value stored in an interface (or a pointer to an interface)? `&iface.(type)` gives me cannot take address of ...
55876;try doing it over two lines
55877;```foo := thing.(whatever)return &foo```
55878;and see what happens
55879;That'll copy the value. I want a pointer to the value stored within the interface
55880;i'm pretty sure that's what asserting it to its type does
55881;either way you can't do anything (useful) with an interface until it's something concrete
55882;`interface{}` is nothing and has nothing. it just wraps an Actual Thing to cheat the type system
55883;reflect will work
55884;but what is this for though
55885;this sounds like you'd want the interface to have a pointer to begin with
55886;pointer to the value stored within the interface is not a thing
55887;the value itself must be a pointer
55888;Thanks that's the answer I needed :)
55889;i'm not quite sure how to precisely phrase this but the value boxed in an interface value is not addressable
55890;I'll adjust my code to store a pointer instead
55891;the idea of an interface value being a box is an implementation detail
55892;Does anyone know how to get rid of these spaces in logrus?
55893;"``` log.SetFormatter(&log.TextFormatter{ ForceColors: true, DisableColors: false, FullTimestamp: true, TimestampFormat: 02012006 15:04:05"", })```"
55894;you'd probably have to provide your own format string
55895;if that's possible with logrus
55896;should be but who knows
55897;ok so question
55898;im making a cloud executed scripting language and i need to create a virtual console purely for outputs
55899;i was thinking of just having a string and adding things to it
55900;but then it wont be able to define what is an error and what isnt and other stuff
55901;so should i stick with making it a string(maybe with ascii for color) or?
55902;how about a linked list of strings?
55903;Thanks @deezy
55904;seems most efficient from what youve said
55905;it needs to be sent over REST btw and back to JS
55906;sure
55907;and how would it determine what an `error` is
55908;serialize as you see fit
55909;list of objects with an error flag?
55910;just do `[]Event`
55911;slice works sure if youre not concerned about the amortized append cost
55912;so i just create a thing called Output and store them in an array that gets serialized to json before being sent over
55913;:KM_Dorime:
55914;you prorbably don't need a slice to just do over the wire
55915;uhhh funny story im using C++ but you guys are more helpful than them
55916;:pointlaugh:
55917;eww
55918;idk then
55919;:robpike:
55920;its the same
55921;it's not
55922;c++ gets me sick üòî
55923;in both tho but yeah i just wanted to know if there was some sort of writer
55924;or dedicated console type stuff
55925;also i need to use it i use v8
55926;:KM_Dorime:
55927;```gotype EventType uint8const ( StdoutEvent EventType = iota StderrEvent ErrorEvent)type Event interface { fmt.Stringer Type() EventType}```
55928;fmt.stringer?
55929;.String() string
55930;ah
55931;huh?
55932;you can do this or use a struct
55933;:BCS_PepeLaugh:
55934;struct is likely better because you can {de,}serialize it easily
55935;i was gonna do struct prob
55936;yeah
55937;https://i.kawaii.sh/LG6KslK.png
55938;lel
55939;:cringe:
55940;the kringe cpp
55941;https://i.kawaii.sh/utp3GwL.png
55942;pogger
55943;i need to format it but it works
55944;is this your first C++ project
55945;nope
55946;ive made a game engine before
55947;which taught me alot as it was just many months of trial and error because i knew nothing
55948;:stare:
55949;but now i know so
55950;c++ is fairly nice actually when you are good at it. :BCS_PepeLaugh:
55951;ive come to hate rust because of the way it handles memory for me its much easier to just run a code analyzer side by side that shows me memory issues before they happen
55952;aka what rust does for you out of the box
55953;:robpike:
55954;well yes but lifetimes
55955;:stare: also two mutable references not allowed
55956;in the same scope
55957;you have to do so many loopholes to make basic code function
55958;just keep the one ref then
55959;or use a RefCell
55960;true but rust overall just takes longer to develop in i can see the appeal but there is a reason that no companies really use rust
55961;it takes time to make shit in
55962;companies do use rust lol
55963;they do but there are less jobs in it
55964;just use Go
55965;:pointlaugh: thats what most companies do
55966;>picking language based on job potential
55967;:OMEGALUL:
55968;Rust and Go satisfy 2 different fields imo
55969;i use Go when i can use go i use C++ when my project goes out of scope of what Go SHOULD be doing and Can do
55970;using Rust for web and Go for embedded is weird
55971;ok what's this project then
55972;from what I could tell it's just a cloud console
55973;I just wish there were more Go jobs where I live as I really like it but it's all python and js here pretty much
55974;people did that with PHP
55975;nah its containerized javascript runtime with safe execution
55976;limited memory and running time and allows es6 support and concurrency
55977;but is still safe
55978;people tried to port v8 to go but it was shit
55979;what is exactly containerized here?
55980;i tried it
55981;The entire runtime
55982;so nodejs?
55983;im passing in functions and passing in a bunch of stuff
55984;no
55985;V8
55986;the runtime that powers nodejs
55987;same whatever
55988;yeah basically
55989;there's no reason you can't use go then because what you're writing isn't even the container part it's the web part
55990;https://i.kawaii.sh/RYoYbeR.png
55991;:KM_Dorime:
55992;no
55993;if you're doing quickjs or duktape sure
55994;but you're not
55995;im writing the container part
55996;why
55997;the container part links a web api as well?
55998;why not something like firecracker
55999;that's awful
56000;i need it to support new features and i need it to have zero system access it can do basic http calls and functions that i pass in
56001;sounds like firecracker
56002;what that
56003;why am i not surprised you dont know
56004;its the isolation system that powers AWS Lambda
56005;qemu microvm üòÑ
56006;you know doing research into what youre trying todo is usually a good idea
56007;made by AWS
56008;the container part has a private api that is accessed through a service made in go
56009;<https://github.com/qemu/qemu/blob/master/docs/microvm.rst>
56010;or MS Jail
56011;:KEKW: i have done research and im actually pretty far in
56012;you really havent
56013;clearly not
56014;what assumes i dont have knowledge
56015;a bunch of this stuff works
56016;the fact youve never heard of firecracker
56017;the fact that you missed two of the most common isolation systems
56018;good indication you didnt touch google once
56019;yeah well embedded javascript runtime didnt turn up firecracker
56020;run node in firecracker
56021;ü§î
56022;problem solved
56023;it really is that easy
56024;that costs money and is inneficient bruh
56025;the CNF has designed something for this. The Container Runtime Interface üòâ
56026;what
56027;firecracker doesnt cost anything
56028;??????
56029;its AWS
56030;no
56031;yikes
56032;it powers AWS lambda you clown
56033;you are not understanding what im doing
56034;at all
56035;:BCS_PepeLaugh:
56036;youre trying to have an isolated node runtime
56037;i dont think you understand what you're doing
56038;so it cant access the system
56039;im not trying to make an isolated node runtime
56040;want efficiency? use quickjs
56041;you got me wrong there
56042;Neither party in this conversation is listening to the other half
56043;i need it to have zero system access
56044;@_diamondburned_ that doesnt have memory and time limits on its execution
56045;you need isolation
56046;literally said it needs isolation from the system
56047;I need it to have zero system access use minimal resources only have access to one file have limited memory and execution time. Has to have native functions passed in and determined by a server to have innacessible variables
56048;I'm pretty sure you can implement both
56049;its not hard with v8
56050;it's literally open source
56051;or just use https://github.com/google/nsjail or firecracker
56052;you know
56053;and Elsa (that Go JS runtime written with quickjs) can do it pretty soon
56054;either work
56055;and it's a few days old
56056;im not going to start a virtual machine every time i run a script
56057;:stare:
56058;there are a lot of scripts
56059;thats not how that works
56060;firecracker starts up in miliseconds
56061;this also sounds heavily overengineered but that's another topic
56062;its specifically designed to have neglible startup time
56063;I've never personally seen a good application for an embedded JS runtime
56064;other than dur ppl know js so good
56065;why df do you even need that
56066;look :KM_Dorime: i am not a multiillion corp i need it to use VERY little resources and absolute complete containerization past everything else
56067;which isn't good
56068;ok quickjs then for efficiency
56069;yes this is literally firecracker mate
56070;fork it
56071;firecracker is literally what youre just describing
56072;bruh nsjail uses like fucking a un registerable amount and so does firecracker
56073;can i limit the amount of time it can run for and memory it can use?
56074;GOOGLE IT
56075;jesus
56076;memory: yestime: application controlled yes
56077;you can limit CPUs too
56078;you think you're the only one to have thought of needing this thing
56079;etc etc etc
56080;im not the one starting an argument here im saying that im doing shit and you guys are just like use some other shit thats probably more complex and doesnt give you exactly what you want
56081;No need to get heated here üôÇ
56082;>more complex than writing a C++ V8 isolation system or whatever
56083;ok buddy
56084;go ham
56085;I mean you are literally trying to isolate what? this? https://i.kawaii.sh/RYoYbeR.png
56086;its not even that hard :BCS_PepeLaugh:
56087;it's open source
56088;thats just a test
56089;you just change the code if you don't have an API for it
56090;I'm not really that experienced but I think if he wants to make his own that'd be cool for his own learning
56091;^ that too
56092;also quickjs is made by the author of ffmpeg and qemu
56093;I just found that out yesterday
56094;oh nice
56095;you guys are just shitting on me for doing something my own way and presenting another way that doesnt do what i want i need every single library and every single thing run to be completely inaccessible to the user and changed for each runtime because this is used for custom execution of a seperate service. Also i looked into quickjs and loved it but unfortunately i cant limit its resource usage and runtime
56096;Firecracker is an open source virtualization technology that is purposebuilt for creating and managing secure multitenant container and functionbased services that provide serverless operational models.
56097;mfw literally designed for the workloads youre describing
56098;you don't have to restrict yourself to the API surface though
56099;https://i.kawaii.sh/lKB8Vdg.png v8 aint even that hard
56100;üò©
56101;:ASwtf:
56102;yeah until you need to customize it
56103;you send that image like its supposed to be convincing
56104;when its C++
56105;just because you dont know c++ doesnt mean its not easy
56106;:KM_Dorime: looks easy and pretty understandeable to me
56107;hahaha thats not how that works lmao
56108;i started C++ when i was like 11
56109;but sure
56110;literally first programming book i got was c++
56111;yet you say thats not easy
56112;:stare:
56113;C++ still nasty
56114;11 üëÄ
56115;i also somewhat doubt 11 :KM_Dorime:
56116;`./nsjail Ml port 9000 chroot /chroot/ user 99999 group 99999  /bin/sh i` Oh look ive got all the isolation systems done üôÉ
56117;but
56118;ok now second question can i create custom native registered functions that have inaccessible variables
56119;this all feels very offtopic but i came in late so idk
56120;nspawn good
56121;These are different layers of isolation anyways. v8 is in process isolation. jails are in kernel isolation and virtual machines don't even share the kernel. Why are we comparing these to eachother and why are we flooding someone with information they clearly don't want?
56122;^
56123;idk anymore
56124;because muh hidden requirements
56125;I take this is for what? security or just ?
56126;i do not care what you guys tell me about this ive looked into the google variant not firecracker. Imo doing it this way is easiest and its more of a library solution that i prefer. I looked at the API i thought it was ugly but atleast now i can use it
56127;nah this isnt just isolation for fun its supposed to be a scripting environment with limited resources and functions with inaccessible variables that is completely controlled by the host program
56128;its for a seperate service
56129;because there are easier ways to accomplish the same goals regardless of isolation levels
56130;ways that don't require you to exchange io over web APIs
56131;:KM_Dorime: this is not that lmao
56132;so you're trying to make the equivalent to Repl.it or smth
56133;its kinda like repl.it but single file and more controlled
56134;so the end goal does involve the web
56135;kinda
56136;and you're still going to write everything in the same executable and code base
56137;nope
56138;alright what then
56139;we have a web service and an actual api that runs the main codebase. The scripting codebase has no database and no anything in it exept for an access key so the main api stores the scripts and executes them on particular events and those scripts can access other parts of the api with custom locking and params that would otherwise be locked
56140;v8 gives me more control over what gets passed in and what is visible to the user
56141;so you'll basically have a container daemon and a web server
56142;so https://github.com/pythondiscord/snekbox ? Just for what ever the language you're doing or what ever
56143;once again not the same level of control
56144;you dont know how v8 works until you use v8
56145;every part of it can be manipulated
56146;ü§î I dont think its possible to gain any more control other than just straight up running a VM
56147;that vm contains a program which would be python or node or whatever
56148;v8 on the other hand you literally ARE creating instances of the runtime that you can completely manipulate in any way
56149;the runtime is the library and you can start them up move them around delete and transfer vars between them
56150;i even created a custom primative data type that doesnt exist by default(for testing lol)
56151;yikes
56152;if you abstract away the VM details because you can and it doesn't really matter given your goals then they achieve practically the same thing
56153;The point isn't that you can implement your vm ideas using firecracker or whatever
56154;the point is you can do what you want to do (the end goal) without having to reimplement literally everything from the ipc between the server and daemon to the runtime library
56155;im not implementing everything myself things exist to make it easier :KM_Dorime: like stack traces can be captured and its not hard. I get that what im doing takes more time but it would also be more efficient for my use case over time
56156;im ok spending extra time doing it the way im doing it
56157;There is also the added note of security
56158;:ASwtf: also im doing it for the experience aswell I just have the use case as a motivator
56159;you don't have to bother with stack traces if you just skip reimplementing the whole thing
56160;oh security is easily handled v8 is meant to run in browsers so yeah (i just put in a stack limit and it works v8 basically just runs entirely on stack)
56161;keep in mind that the more things you do yourself the more it is prone to mistakes
56162;just because you use a secure runtime doesn't mean your own code has no attack surfaces
56163;and this is strictly speaking about security
56164;so yes I'd still argue that what you're trying to do is not worth the effort
56165;yeah i know the api is still pretty straightforward tho
56166;but do what ever ig
56167;also guy above me ^ you were kinda misleading about the discord shard handle discussion we talked about before. You need to reboot all shards and send discord an identifier of how many total shards for each shard because thats how discord works.
56168;i talked with you in discord bot server i remember
56169;me?
56170;yeah
56171;yikes
56172;i dont remember ever speaking to you but k anyway you dont no.
56173;however you cannot dynamically create a new total of shards
56174;which judging from your wording is probably what you were trying todo idk?
56175;but identifies are nothing new
56176;yeah you said it was somehow possible but i ended up just rebooting the shards when they got too big one by one
56177;i kinda needed to
56178;I mean welcome to how everyone does it
56179;just over scale a bit
56180;i mean we just double shard count every time
56181;next block will be 128
56182;yeah
56183;shard count is pretty arbitrary as long as it's over the guild limit I think
56184;as long as a single shard isnt above 2.5k yh
56185;yeah mine just waits until a shard disconnects and checks its guild count and if its over 2300 it just gets reccomended shard count and multiplies it by 2
56186;if you declare 64 shards though you cant go over that
56187;yeah i really wouldnt auto restart
56188;Good thing discord has some documentation about this üòâ
56189;<https://discord.com/developers/docs/topics/gateway#sharding>
56190;ikr
56191;it stops all shards and reboots the shard manager to start brand new shards with proper data so :KM_Dorime:
56192;yikes
56193;that just seems 1) overkill 2) a really good way to cause issues if a system auto reboots when it thinks it needs more shards
56194;make a warning system sure but i would never trust it to just automatically increase itself
56195;reimplement it then
56196;"You don't need to restart all shards; not all shards even need to have the total shard count"
56197;auto increasing is fine until you realise this is discord and stability is neigh
56198;you just need to have that shard count yh
56199;My I ask for some feedback on my code? I'm fairly new and I want to improve and continue on my journey of avoiding the docs^
56200;you can have less than what you declare sure but thats not a good idea
56201;https://discordapp.com/channels/81384788765712384/381887113391505410/694263193736052827
56202;"I explained it here; you can basically split one shard into two and not touch any of the rest of them"
56203;thats pretty much the entire advantage of sharding
56204;Well here it is: https://gist.github.com/cc3e12d600c991f405f8579ce5f2a1fd
56205;https://tenor.com/view/themuppetskermitthefrogsmhshakemyheadnogif4883582
56206;it looks better than the last time you posted it
56207;does it work
56208;i don't see anything glaringly bad it looks fine (though im not amazing at go myself)with this:```goif !info.Mode().IsRegular() { return nil}if !isCSV(path) { return nil}files = append(files path)return nil```You could just make it a single if and append if its true and then returns nil anyway
56209;rather than having those 2 checks and then appending then returning nil
56210;just check if the two are both correct then append and return nil at the end
56211;> does it work@Madxmike Yeah it does
56212;this []interface{} concerns me
56213;"(just to be clear: however you cannot dynamically create a new total of shards is untrue and You need to reboot all shards is also untrue; it sounds like a misunderstanding of sharding on both ends üòÑ )"
56214;though im not really reading to see if its needed
56215;@Carson you cant have one set connected saying it has 64 shards and another saying 128 as a total count can you though? ü§î
56216;Yes you can
56217;That's precisely what I explained at that link
56218;link links to outside the server and into the Discord API's channel btw
56219;So you can haveProcs 1  12 > Total 64 shard blocks [n > n+4] or somethingandOther Procs 13  14 > Total 128 shard blocks [n > n+4] or somethingü§î
56220;"You can take one shard that has a 64 total count then split it to two shards that advertise 128; the events will then be split (approximately) between those two shards while all other shards are completely unaffected"
56221;> i don't see anything glaringly bad it looks fine (though im not amazing at go myself)> > with this:> ```go> if !info.Mode().IsRegular() {> return nil> }> if !isCSV(path) {> return nil> }> files = append(files path)> return nil> ```> > You could just make it a single if and append if its true and then returns nil anyway@ChillFish8 Oh I think I did this because I wanted to return the right error message then I forgot about it and left it as is. Good catch
56222;Should I use more pointers?
56223;depends on what it is ig
56224;@Dylan prealloc slice
56225;L92
56226;`var macros = make([]Macro 0 len(files))`
56227;unless you're really going for performance they can cause more issues than they solve but equally they're incredibly useful and good for memory management
56228;"```go if len(macro.Line) == 0 { fmt.Println(filepath.FromSlash(file) has invalid lines."") continue }``` don\'t use Println here"
56229;use log.Println
56230;"```go if err != nil { log.Fatal(""Cannot read file +file err) }``` Fatalln pls"
56231;this is nitpicking BUT
56232;"```gofunc getFiles(path string) (files []string err error) { err = filepath.Walk(path func(path string info os.FileInfo err error) error { if err != nil { log.Fatal(""Cannot get stats on file:\ err) } if !info.Mode().IsRegular() { return nil } if !isCSV(path) { return nil } files = append(files path) return nil }) return}```"
56233;ugh I really tried dding in Discord
56234;speaking of pointers is their anyway to count / track creation and deletion of variables in go?
56235;what for?
56236;there is
56237;and the GC does it
56238;also regarding the main.go file I'd argue that some of those functions are redundant but they're fine otherwise
56239;the runtime exposes some stats and you (ab)use the setFinaliser I guess
56240;so you don't have to
56241;yeah you can likely use GC stats to track them
56242;but only for debugging
56243;how can I get modules from a private gitea repo with ssh?
56244;I wouldn't say it's reliable otherwise
56245;But you shouldn't have to. The almightly GC knows
56246;@Kiyoshi add a key there
56247;I was just curious to see how many are created vs how many are recycled compared to before
56248;`go get` uses `git`
56249;so configure your git to clone properly
56250;just use GC stats then
56251;and `go get` will do it
56252;i went on a long process of alot of lock removing and variable recycling
56253;ah nice
56254;https://golang.org/pkg/runtime/debug/#ReadGCStats
56255;@deezy so `go get ssh://git@some.domain` can do the job?
56256;I have my keys added
56257;well actually this doesn't exactly ahve the infos you're looking for
56258;im looking at https://github.com/jtaczanowski/goruntimestats
56259;yeah sure
56260;gives a semi nice setup for gafana which works ig
56261;You have to provide the import path @Kiyoshi. Go will resolve that to the git repo
56262;@_diamondburned_ what's missing?
56263;though overkill just for a test
56264;It doesn't support other protocols. Just https
56265;`go get some.domain` will work
56266;yeah just `whatever.com/user/repo`
56267;Go will internally call git if needed
56268;I see
56269;if you want Go to use git SSH you just use a gitconfig or some env vars
56270;either way should work so go with what suites best
56271;let me try the git config
56272;Why you use log over fmt just there or overall?
56273;would
56274;log goes to stderr
56275;so it's for everything erroneous and verbose
56276;fmt/stdout is used for what's actually needed
56277;that is the intended output of the program
56278;also timestamps and junk
56279;yeah if that matters
56280;for oneshot programs I just do `SetFlags(0)`
56281;also log can be switched out with other loggers a lot easier
56282;for more functionality
56283;yeah you can set output
56284;I mean you _can_ set os.Stdout to something else as well üòõ
56285;Not that you should
56286;```os.Stdout = ioutil.Discard```
56287;fixed
56288;you can yeah
56289;well
56290;that won't work
56291;os.Stdout is a os.File not an io.Writer
56292;Anyone who have worked with pcapfiles in Go and can tell me where in this code my payload is put into the packet? https://pastebin.pl/view/61db302a I copied the code to another program and there it just won't work.
56293;but you can make a goroutine that copies an os.Pipe os.File to a writer
56294;hmm 273 goroutines
56295;surprising tbh
56296;although ig maybe not
56297;goroutines are lightweight it's fine
56298;i was expecting more tbh
56299;my GUI application has lots of goroutines but they all do blocking IO so it's fine
56300;its a Webserver using fasthttp and alot of recycling so was curious
56301;idle at 16 goros
56302;fasthttp üòî
56303;smh
56304;i understand there is a bit of a love it or hate it of fasthttp
56305;"I don't necessarily hate it; I just don't see a lot of reasons that justify using it"
56306;and people just keep getting on it
56307;i agree that from my experience your code is nearly always gonna be the bottle kneck
56308;Lots of new people seeing fast and ditching stdlib right away
56309;equally it taught me to manage my variables better
56310;and yeah i can see that tbh
56311;what i did when i first started go
56312;"So I have this in my `~/.gitconfig`:```toml[url ssh://git@gitea.mydomain.com:2323""] insteadOf = https://gopkg.mydomain.com```but when I do `go get u gopkg.mydomain.com/org1/lib1` I get `https fetch: Get https://gopkg.mydomain.com/org1/lib1?goget=1"": dial tcp: lookup gopkg.mydomain.com: no such host`"
56313;`gopkg` subdomain doesn't exist tho. I assumed git will replace that domain with my ssh url
56314;it replaces it with exactly what youve set there
56315;but it didn't
56316;youve set it to gopkg subdomain
56317;so thats what it will use
56318;shouldn't it replace the whole url?
56319;Ow right. The goget=1 one thing is a thing the toolchain uses to determine what to fetch. That http request is allowed to return only certain errors
56320;Run `go get u v <your thing>`
56321;"```toml[url git@github.com:""] insteadOf = https://github.com/```"
56322;GOPRIVATE=?
56323;this is what i have for ref
56324;Wouldn't matter. Still fetches iirc
56325;I get 404 with `go get u v` and removed the subdomain from `insteadOf`
56326;<https://github.com/golang/go/blob/07c1788357cfe6a4ee5f6f6a54d4fe9f579fa844/src/cmd/go/internal/modfetch/repo.go#L67>
56327;some docs about how it works
56328;The behaviour of the http request failing isn't well documented though
56329;:thinkingo:
56330;I'll dig it more
56331;pretty sure `gitea` implements the goget thing though
56332;<https://github.com/gogitea/gitea/issues/8095> fixed it at least
56333;so if your import path was just `gitea.yourdomain.com` it should work
56334;instead of gopkg
56335;You _can_ also use the replace directive in go.mod but that just adds more problems üòõ
56336;so I can't have arbitary module names?
56337;You can. But having the import path be the location of the source control is what it should be
56338;Yours doesn't match
56339;big oofit worked
56340;thanks @Sgt_Tailor
56341;Np
56342;"I have the below volume struct and in all of my use cases so far I have needed the `Size` to be represented as an `int` but I now have a use case where I also need it to be represented as `int64`. Right now I am parsing a list of Volumes and when a certain one is found it returns its volume struct upon return I would like `Size` to be an `int64`. Would I just need to create a new struct? ```gotype Volume struct { ID string json:""id,omitempty"" Site string json:""site,omitempty"" Name string json:""name,omitempty"" Size int json:""size,omitempty"" Subproject SubProject json:""subproject,omitempty"" Status string json:""status,omitempty"" Instance Instance json:""instance,omitempty""}```I thought incorrectly that I could just reassign the value with a new type but it doesnt function that way obviously. `volume.Size = int64(volume.Size)`"
56343;why not just change the struct field's type
56344;Seems weird to need both
56345;you probably don't want to use int in any handling anyway because it could be 32bit large
56346;which is lossy when converted from 64
56347;> Seems weird to need both@Sgt_Tailor The `int` is used in representation of an api call response. I am taking the returned data and now passing it to another library to interact with k8s which expects the size defined to be an `int64`. I dont want to do conversions in multiple places so I was just looking to take the response convert the size to `int64` and pass the updated data to the k8s library.
56348;use whatever causes the fewest conversions
56349;and convert at your boundaries
56350;that's really all you can do
56351;Should be able to define it as int64 in the struct. Unmarshal will work fine. If however you need to work as an int as well you're out of luck and should use deezy's advise
56352;k. thanks all
56353;yeah np
56354;What's the idiomatic way to have multiple goroutines wait for a single event? If it was just a single goroutine I'd use a `chan struct{}`
56355;`sync.Cond`
56356;Ah forgot about that. Thanks :)
56357;you can also use a `chan struct{}` as a broadcast signal by closing it which may give better performance than `sync.Cond` if you have a lot of goroutines
56358;Actually true
56359;receive from a closed channel => goroutines continue as they wake up cond.Broadcast() => runtime awakens all waiters now
56360;the latter means O(n) extra work for the runtime
56361;I wonder how the runtime handles closing a channel. I know the channel itself keeps track of the listeners. Not sure how the runtime handles it getting closed
56362;Answer: It iterates through the listen queue and pushes the goroutines to the global runqueue
56363;oh i believe that's actually the same mechanism by which cond.Broadcast works
56364;so really the difference is whether you need waiters to check a condition as well
56365;<https://github.com/golang/go/blob/master/src/runtime/chan.go#L359>
56366;Yes i does something similar. `Cond` uses notifylist feature of the runtime. When calling `Wait` it increments the amount of waiters waiting for a signal and parks the goroutine. notifyList is similar to the circular buffer used in `hchan` to keep track of waiting `g`s. When `BroadCast` is called all the goroutines in the notifylist are `ready`'d which marks them as runnable and adds them to the global runqueue
56367;see runtime/sema.go for the implementation
56368;whats the best way to check if two interfaces share the same underlying type?
56369;do you mean interface or `interface{}`
56370;interface
56371;then you'd have to assert both values to the same type
56372;if it works it works
56373;if it panics it didn't
56374;otherwise use reflect
56375;(you can use the ` ok` form of type assertion to avoid a panic)
56376;`.(type)` is also a thing üôÇ
56377;or whatever the syntax of that was
56378;this feels xy though it's rare to care about what underlying type an interface value has and even rarer to check whether two unknown things are the same type
56379;agreed
56380;Ah .(type) was only for a type switch
56381;you can't dynamically check if value A has the same type as B without knowing the type beforehand
56382;using a type assertion
56383;> this feels xy though it's rare to care about what underlying type an interface value has and even rarer to check whether two unknown things are the same typeyeah im probably not doing this the best way. im trying to do static type checking for an interpreted language im making (just messing around not intended for serious use). i have an interface for a datatype and im checking if a function's required arguments are the same type as its provided ones. i dont know if im even going about any of this correctly i kinda just decided i wanted to try to write an interpreter lol
56384;there's a rsc (or was it robpike?) talk that might be helpful in terms of thinking about how to design something like that
56385;why not just enum
56386;i think this was the one: <https://www.youtube.com/watch?v=PXoG0WX0r_E>
56387;kinda long the relevant stuff starts around 18 minutes in but it might be hard to follow without watching the stuff before it
56388;in my scripting language implementation i use a combination of reflect.TypeOf and dynamic type tagging (i.e. every value carries its type descriptor with it) to ensure that things are the right types but i think that is not the best approach
56389;zerpho using reflect in io? :cereal:
56390;where'd all the microoptimization spirit go?
56391;:cereal:
56392;does http.Cookie.Expires mean expiresin or expiresat?
56393;> where'd all the microoptimization spirit go?@_diamondburned_ it never showed up in profiles üôÇ
56394;lol fair
56395;@jawad at
56396;in is maxage
56397;oh ok thank you
56398;it's also time.Time which is an absolute point in time
56399;yeah np
56400;aight
56401;diamond right spec defines it as such: https://tools.ietf.org/html/rfc6265#section4.1.2.1
56402;hello
56403;"In my MongoDB I have a student collection with 10 records having fields name and roll. One record of this collection is:{ _id : ObjectId(""53d9feff55d6b4dd1171dd9e""), name : Swati"", roll : 80"",}I want to retrieve the field roll only for all 10 records in the collection as we would do in traditional database by using:SELECT roll FROM student"
56404;My requirement is to find a single key only without any condition. So what is the query operation for that. using `golang` and `mongodriver`
56405;Why without condition??
56406;@Str≈ìm are you talk to my problem ?
56407;What do you mean find a single key without any condition?
56408;Yes
56409;You can easily just pick a random one
56410;but if you need a specific one there's going to be a condition
56411;all values w/ that single key probably
56412;"i need to execute this using mongo `db.MediaTypes.find({""media_types_name"":""Livre""},{Loan:1,_id:0})`"
56413;to return `Loan:2`
56414;Ok and why did you say without any condition
56415;it's just an error
56416;> but if you need a specific one there's going to be a condition@Doad yes you are right i need condition
56417;the solution is query everything then use a for loop to find the thing you want
56418;sounds like bad homework
56419;@deezy are you talk to my problem ?
56420;@Everwar is there no solution?
56421;"i need to execute this Query using mongo `db.MediaTypes.find({""media_types_name"":""Livre""},{Loan:1,_id:0})`to return `Loan:2`"
56422;yes
56423;use a query that pulls all the items in the collection
56424;then loop over them in your go code
56425;filtering without using where
56426;@deezy so i need to ues aggregation
56427;godoc.org is down :/
56428;@sam! up for me
56429;maybe it's back up
56430;ya it was down for a minute but its good now
56431;man i want the official go docs to adopt the pkg.go.dev layout
56432;CSS it lol
56433;yup you can use CSS + grid
56434;typed in pkg.go.dev/json and it took me to $root/encoding/json automatically ‚ù§Ô∏è
56435;just use that then
56436;i prefer godoc over it
56437;just found that out i'm sold
56438;lots of google stuff went down for a bit in some regions @sam!
56439;I have a package `project/internal/app/package`. It is able to import `project/internal/pkg/db` but not `project/internal/app/package2`. Is this intended behaviour? Can internal packages only import internal packages in the pkg directory?
56440;Hey
56441;Hullo
56442;How's golang w.r.t. jobs?(as opposed to say Scala)
56443;wut
56444;They want to know what the job market is like for Go compared to Scala
56445;depends on region ig
56446;I personally wouldn't learn a language only for jobs but that's just me
56447;how would i decode a cookie that has been encoded by the `gorilla/session` pkg in another service written in a different lang?
56448;structure method must start with upper case if i want to export it ?
56449;Yes
56450;Hello is it possible to create a map of structure
56451;``` map[int]array of time.Time ```
56452;and the array will look like this
56453;Yes it is
56454;``` [time.Time float64] ```
56455;No its not
56456;Lol
56457;Well not without losing type safety
56458;You generally cant mix types in a slice
56459;You can use a struct
56460;So a slice of structs containing a time.Time and a float
56461;actualy if i think about it it will be enough to do it like this map[int]time.Time
56462;so it will look like this
56463;``` map[float64] time.Time ```
56464;but how do i declare it
56465;because i can't do
56466;``` values := map[int]time.Time ```
56467;https://tour.golang.org/moretypes/19
56468;I have a package `controllers` awith `controllers\\ping.go` `controllers\\user.go` with each file his struct but i want to have for each a method `New` is it possbile ?
56469;anyone here good with webscraping ?
56470;im tryign to target certain html attributes and cant seem to figure it out
56471;use goquery
56472;@Le V it's not
56473;you should not do package controllers though
56474;How do you structure your code with Go so ?
56475;@_diamondburned_
56476;because every struct (OOP) should have a New
56477;so each struct have it's own package ?
56478;?go layout
56479;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
56480;that
56481;it doesn't make sense to have a New return a different thing used as different constructors for different structs because Go doesn't have constructors
56482;it has functions
56483;functions can be treated as constructors because they return the type and the name starts with New
56484;however that's mostly a convention and you can totally ignore it if you want to
56485;not that you should
56486;do you have a repo example that implement this layout ?
56487;To see a little bit more clearly ?
56488;at the end of the article there's an exemple I believe
56489;there is not
56490;i checked
56491;I kind of do but I don't fully follow it
56492;oh mb
56493;No i read the entire page didn't found a repo :/
56494;nobody has a example ?
56495;you can check out mine https://github.com/diamondburned/smolboard
56496;there's one thing I wish I could've done better
56497;that is the db package
56498;but it's fine as it is
56499;how does one accept a connection in net for UDP
56500;"`conn err := net.ListenUDP(""udp addr)`"
56501;There are no connections in UDP
56502;UDP is inherently connectionless
56503;cant believe my teachers never mentioned that......
56504;nor does the assignment writeup
56505;anywher
56506;Lol
56507;https://github.com/golang/go/issues/41191#issuecomment697710797 üôÇ
56508;None
56509;why does it return UDPAddr?
56510;Because it says so
56511;why would i want UDPAddr after reading from C instead of the actual payload
56512;also is this intentional lol
56513;Because you might wanna know who sent it???
56514;And yes thats very clearly intentional
56515;> Because you might wanna know who sent it???@Str≈ìm but
56516;but i have UDPConn right
56517;No
56518;No connections
56519;Just packets
56520;Udpconn doesnt tell you anything about the sender
56521;so
56522;UDPListen is basically just waiting to get packets
56523;and not actually a client connection ID or something like that
56524;Yes because that's all udp is
56525;like in TCP
56526;No connections
56527;hmmm
56528;wow
56529;Each packet is unique and independent
56530;got it
56531;big :thonk: moment
56532;https://tenor.com/view/thinkemojithonkmemegif11987870
56533;Any correlation between packets has to happen at a higher level
56534;Based on the payload
56535;Is there a way to set a breakpoint from within a go file? In C I'd do something like `__builtin_debugtrap()`
56536;I'm using delve if it matters
56537;Set the breakpoint through delve
56538;Right so no way to trigger it from code?
56539;Not that im aware of
56540;Dont see the benefit anyways
56541;i am confusion
56542;> Udpconn doesnt tell you anything about the sender@Str≈ìm what is UDPConn exactly then
56543;it doesnt seem like its a packet
56544;or
56545;idk
56546;i mean it must be apacket because we can read stuff from it
56547;Its a bound udp port
56548;And maybe some more
56549;I guess technically you could talk to the dlv api from within the application. But I don't see a usecase for it
56550;If I'm in a bit of code I want to debug typing `breakpoint()` and then running the debugger is easier than running the debugger and then typing `b filename.go:lineno`
56551;UDPCon is an implementation of net.Con using the normal dial and listen functions you can interact with it
56552;Most IDEs allow you to set breakpoints from within there
56553;I don't use an ide
56554;Guess I could look for an editor plugin that does it but then I need to learn how to use that. Easier to just call a function :)
56555;What editor do you use?
56556;vim but planning on switching to kakoune
56557;Pretty sure vim can set breakpoints
56558;There are plugins for it yes
56559;So use them?
56560;I came here with a question not a request for feedback on my workflow
56561;I got my answer so I'll head off now bye
56562;Thats a yikes
56563;:mamimiCute:
56564;"```go conn err := lspnet.ListenUDP(""udp addr) fmt.Println(conn) msgBuffer := make([]byte 1500) _ Addr err := conn.ReadFromUDP(msgBuffer) if err != nil { fmt.Println(err) } fmt.Println(Addr) fmt.Println(""buffer string(msgBuffer[:]))```"
56565;does this look ok if i wanted to see what `conn` is sending?
56566;or would it depend on what exactly `conn` is sending
56567;for instance if it was marshalled
56568;i'd have to unmarshal it first i guess
56569;yes
56570;i am not htinkgin
56571;Not sending
56572;Receiving
56573;&{0xc000010058}
56574;i get this address from `conn`
56575;so i'm guessing i am getting some UDPConn?
56576;i'm pretty sure the client is sending something but maybe im not doing it properly
56577;I haven't been here in forever
56578;Its a pointer to a struct so yes it looks like that
56579;You probably wanna check more individual fields
56580;@other you were last here 2 weeks ago..
56581;1 minute heare is 7 years on earth
56582;> @other you were last here 2 weeks ago..@Str≈ìm I was not
56583;I checked chat history
56584;Last active 10th September @other
56585;I probably just came in to say hello
56586;Hello
56587;I think i was trying to do something like this a month ago and I found a hack to do it
56588;```var _ interface { graphql.HandlerExtension graphql.OperationInterceptor graphql.ResponseInterceptor} = Tracer{}```
56589;so you can define all new struct instances as implementing this interface
56590;```gotype ( Tracer struct { ComplexityExtensionName string })var _ interface { graphql.HandlerExtension graphql.OperationInterceptor graphql.ResponseInterceptor} = Tracer{}```
56591;and you will get your compile time warning üëÄ
56592;congrats you invented that trick that other people have
56593;Nono
56594;i found it
56595;not putting you down you seem to have genuinely discovered it from first principles
56596;i didnt invent it
56597;oh word
56598;i mean you could've figured it out on your own
56599;Probably
56600;but its a bit cryptic
56601;i can see why it works though
56602;yeah it is
56603;is it good practice
56604;:thinkW:
56605;people use it
56606;in real code
56607;so
56608;if it serves a purpose for you
56609;how does that even work
56610;oh wait i see
56611;its like a small thing that will print out error when you dont implement an interface
56612;i came across that practice in Go compiler source code so we can say it is official practice
56613;which TUI library would you recommend? tcell or tview?
56614;i would like to create a table based note app
56615;https://repl.it/repls/PointedImpureFacts#main.go why doesn't it segfault?
56616;why would it?
56617;this ^
56618;Chos{} isn't a stack object?
56619;this isnt C
56620;you dont have dangling pointers
56621;its heap allocated
56622;O
56623;data may or may not be allocated on the heap based on heap escape analysis
56624;escape analysis
56625;heck
56626;basically if something needs to be on the heap it is
56627;_automagically_
56628;it's called escape analysis?
56629;yea
56630;thanks
56631;Like in your case a pointer to that stackframe would not work since the stack shrinks down after the return
56632;so that data _has_ to be on the heap
56633;it escapes to the heap
56634;does it copy the data on heap?
56635;wdym
56636;its never on the stack in the first place
56637;its known at compile time if it goes on the heap or the stack
56638;oh I thought it's a runtime thing
56639;got it
56640;"During some experimentation with what a release may look like for Go modules I did the following for a v2: (1) Branch v2; (2) Change go.mod to have a v2 extension for the name; (3) Tagged the commit at v2.0.0.When I tried to do the same for a v1 it wasn't possible. I couldn't create a v1 module name as above with v2 without `go get` complaining. It seemed like the semantics of v0 and v1 are somehow tied to whatever the HEAD of the default branch is. Is that true? Is there a way to release a `github.com/module/pkg/v1` ?"
56641;you can't do a `/v1` i think
56642;V0 and V1 must be without the suffix
56643;So it's embedded in the tooling that v0 and v1 are `github.com/module/pkg` ? I.e. if I want my main branch to be my latest copy of code common practice I can't do that with Go?
56644;I suppose you could hack it a little and have your main branch use a module name of `github.com/module/pkg/dev` and then stick `github.com/module/pkg` on a `v1` branch?
56645;You tag releases. So you can have a master branch be the last code. People who use your module will automatically use the latest tag not the last commit
56646;Righto. Yea that's far simpler. So on a v1 branch maintain the `github.com/module/pkg` name and start tagging v1.0.0 etc?
56647;Exactly
56648;If the consumer doesn't specify a version  RTFM...
56649;Thanks for the input.
56650;If they don't it automatically uses V0 or V1 whichever is the last version
56651;Oh of course. So it'll head over to the v1.0.x tag anyway
56652;When you then create your first v2 release you can simply change the module name in go.mod and keep working in the main branch
56653;Then tag with v2.x.x
56654;Sure. We want to use a v2 branch and tag that. Thanks a bunch.
56655;Yeah that is the other option.
56656;No problem üôÇ
56657;!gomod
56658;!go modules
56659;```code block was not foundStatus = 0```
56660;?go mod
56661;Using go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
56662;?go modules
56663;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
56664;oh thanks
56665;@Deleted User is sending out scam bitcoin links to people in the server :GWseremePeepoThink:
56666;anyone else get one?
56667;yep
56668;from @Unknown
56669;same from nikita
56670;Who to report to?
56671;Just post user IDs in #offtopic
56672;oh that's a scam...?
56673;brb
56674;?go sandbox
56675;?go playground
56676;wait is that not in there? lmao
56677;https://play.golang.org/
56678;I assume you were looking for something like this
56679;No I actually want to know how Golang compile the code online
56680;When we run on the playground
56681;It's containerized
56682;Does it store the code in a file before executing it ?
56683;The go compiler requires files yes
56684;https://github.com/golang/playground
56685;It's open source if you wanna look through it üôÇ
56686;It doesn‚Äôt take time to read and writes ?
56687;it does
56688;but it's probably one the order of miliseconds
56689;if that
56690;It doesn't necessarily write to a disk either  in fact it probably doesn't. It's probably an inmemory fs.
56691;I'm not 100% on whether it would even hit the disk
56692;ooh good point
56693;ramfs
56694;Indeed
56695;All speculation of course.
56696;it'd be the smart thing to do
56697;As the compiler is written in Go in theory could you import it and compile go code on the fly?
56698;in theory
56699;but i think that may risk parity drift with running `go build`
56700;I'm more just curious about posibility than practicality
56701;i wouldn't bother tbqh
56702;It wouldn't do that  that's asking for trouble.
56703;And I wouldn't recommend doing that either.
56704;if i had a perfectly good `build` command already
56705;i'd just write the file and shell out
56706;nothing in the Dockerfile explicitly handles ramfs
56707;But infrastructure could
56708;> It doesn‚Äôt take time to read and writes ?@201Rich_K why wouldnt it take time?
56709;everything takes a nonzero amount of time
56710;nothing is free
56711;if there are several requests it will stack them right ?
56712;probably
56713;Really that‚Äôs thing I don‚Äôt understand in the go playground
56714;What exactly?
56715;containers can operate concurrently
56716;so not all requests are strictly synchronous
56717;There's almost certainly a queueing system in their backend because the time you wait varies from run to run
56718;new http request > new goroutine > new container
56719;^
56720;it's not too complicated
56721;you can check in the source
56722;Queues also make sense because they're essentially acting like a buffer. It's common in distributed microservice systems.
56723;Aaah üòä i see now and after each request he stops the goroutine
56724;close enough
56725;https://github.com/golang/playground/blob/master/sandbox/sandbox.go#L364
56726;it spins up workers
56727;and the workers pull from a channel
56728;I will read the source code
56729;Any good resource to learn about interfaces? I'm having a hard time wraping my head around it.
56730;It's like I get it but at the same time I don't.
56731;`io.Reader` is a good example
56732;`io.Reader` lets you say i don\'t care where the bytes come from i just need them from somewhere
56733;many things satisfy io.Reader. Files network connections databases
56734;Hey I guess I saw your YouTube video.
56735;So you can say```gofunc LoadConfig(f os.File)// orfunc LoadConfig(r io.Reader)```
56736;Looking at your picture I think it's you.
56737;it's not
56738;just a good meme
56739;anyways
56740;the first function MUST have a file
56741;you cannot load your configuration from ANYTHING else
56742;what if you want to pipe the config in via stdin? what if you refactor your application so that it needs to pull its configuration from redis or consul/etcd?
56743;The second LoadConfig() says to load configuration data i just need something that can give me `[]byte`
56744;You made it more complex for me.
56745;I'm still learning the language and programming.
56746;another metaphor might be USB
56747;your computer doesn't care what's on the other end of the usb cable
56748;it can be a printer a dildo a laser light projector a speaker
56749;your computer doesn't HAVE to know or care
56750;because USB is a common interface
56751;USB vs soldering something directly into the circuit
56752;USB ( interfaces ) provide a standardized way of passing data back and forth without having to care about exactly what is on either end
56753;@deezy Thanks let me reiterate it and hopefully it will make sense than before.
56754;don't worry
56755;interfaces are definitely like
56756;mid tier tech
56757;if you're literally just starting they will not be super relevant to your life for a bit
56758;not creating them at least
56759;Ya I get that but I have an immediate requirement so pushing myself to understand it. Hopefully it won't take long!
56760;Appreciate your support.
56761;Doooeees
56762;anyone know how to inject errors into a trace using opentracing or the different ways the concept of errors ought to be injected
56763;I'm setting ` ext.Error.Set(span true)` to no avail
56764;ehmm can anyone ban @Deleted User ?
56765;its a bot I guess
56766;@Ikkerens
56767;Done
56768;Guessing I'm not the only one who got hit up by gnk51015 as they're not longer listed on this server
56769;it's better to have `auth` `user` `cars` with controller services models inside each ?
56770;no go doesn't really do mvc
56771;?go structure
56772;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
56773;i already reead
56774;but didn't really understood how to implement it in a priject
56775;I'm confused MVC is a pattern
56776;i didn't found a concrete example
56777;Go can't be used in an MVC pattern?
56778;it can
56779;it typically is not
56780;That's fair
56781;mvc is an artifact of when http routes mapped to filesystem directories
56782;and not much else
56783;what are the domains for yojur project @Le V
56784;remove that features and mvc falls apart
56785;`auth` might be a domain
56786;and has only things that relate to auth
56787;so when you import auth
56788;Isn't a RESTful service following a similar pattern though?
56789;its like a little black box
56790;auth user groups shorcuts
56791;of all things auth
56792;not intrinsically no Rogue
56793;ok so user > controller > service...
56794;and same for each domains ?
56795;fun fact: most people who say they use REST dont actually
56796;troof
56797;It's impossible to respect Rest pattern
56798;Everyone has his own rest
56799;Yeah nobody follows REST to the letter
56800;it's not even an actual standard üôÉ
56801;there isn\'t a REST to adhere to
56802;also if you replace domain with context i feel the idea comes together better for most people
56803;a few people wrote books on it
56804;that they conveniently got to make money off of
56805;didn't see if you answered me for
56806;¬Ø\\_(„ÉÑ)_/¬Ø
56807;> ok so user > controller > service...@Le V
56808;in my `auth` context
56809;I ONLY care about things dealing with auth
56810;because that is the context of the package
56811;i dont care about a db
56812;i dont care about X or Y other thing
56813;i inject db inside package
56814;etc
56815;i have a separated package for db
56816;yeah
56817;and these arnt hard and fast rules on things of course
56818;do you have an example for yor auth ?
56819;just ti be sure i understood and start whith correct structure
56820;uhh not anything i have that public lol
56821;give me a second
56822;k8s does this really well but its a big unwiedly library
56823;just dir/file names
56824;if you can't it's ok
56825;But for auth it shares maybe info with `user` domains
56826;MVC is a bad pattern IMO
56827;i really dont like it
56828;it's related
56829;so is this the right way to import stuff from other packages?
56830;sure
56831;there is no unified right way
56832;go.mod```module QuickBoardgo 1.15```
56833;but auth may only care abut very specific data about the user
56834;do what makes sense
56835;"then `import QuickBoard/src/library""`"
56836;and then `library.Function()`
56837;does it compile? üôÉ
56838;you may have an `auth.User` that just stores their jwt claim or something for instance
56839;yes
56840;then you did it right
56841;lol okay
56842;go is very simple
56843;or maybe you make `user` a type across your entire domain if its spread like that
56844;especially as far as syntax goes
56845;yeah i overcomplicate things usually
56846;if it compiles you did it right
56847;cause there's no other way to do it
56848;ok
56849;thta does NOT speak to higher level code organization stuff
56850;but
56851;but i meant more is this a bad practice
56852;well
56853;i wouldn't have `src/`
56854;cause
56855;spoilers
56856;it's all source code
56857;yeah everything is src
56858;yep
56859;i'm bad at naming
56860;it's okay
56861;@Madxmike didn't really see :/
56862;lots of things use src/
56863;because tehy're dumb or they're things that include static assets configs etc
56864;https://github.com/diamondburned/smolboard
56865;i got for separate `groups` of `user`
56866;there aren't a lot of bad practices in programming
56867;i guess i'll just remove that folder and move the ones in it one level down
56868;just bad or unfit design patterns
56869;but not really for `user` and `auth`
56870;diamond does it pretty well here
56871;https://www.youtube.com/watch?v=YfLPZOpJQjY i really liked this talk also
56872;oh neat a talk i haven't seen
56873;well
56874;i don't see services and controlles
56875;he just have all user/post/etc in the db package
56876;yeah
56877;because they usually arnt named that
56878;so he have his services in db
56879;yeah that's what we're saying
56880;let go of controller
56881;it's an outdated design pattern
56882;he didn't separated domains
56883;or i don't see what it should be$
56884;yea some of the ddd golang taks are weird
56885;the keeping everything on the parent /root level packaging
56886;can be a bit confusing if you are using a lot of infrastructure
56887;i mean its a valid way of structring things
56888;oh sure
56889;flat is better than nested!
56890;docker is pretty much flat
56891;iirc
56892;of course not
56893;yea but docker isn't that complex
56894;most apps arnt either üòõ
56895;data driven solutions aren't weighed down by business logic
56896;flat is the best way to have trouble with all files and maintain become impossible
56897;if you say so
56898;ehhhhhh
56899;I really like this
56900;https://docs.microsoft.com/enus/dotnet/architecture/microservices/microservicedddcqrspatterns/dddorientedmicroservice
56901;I find almost everything
56902;even if you try not to
56903;can someone dm and help with goquery
56904;eventually ends up becoming this when you have code that is too DRY
56905;just ask your question here
56906;@Le V the domains are seperated
56907;are you talking about how like there is a `user` type in db
56908;Golang seem a cool/good tools to create web API
56909;but when you start ^^
56910;become so weird to code with
56911;yes go has a very specific style that it wants you to follow
56912;because that user is more or less only dealing with how a user is stored/retrieved from a db
56913;if you fight it using go hurts
56914;not say
56915;signing a user in and out
56916;if you just let go of the stuff you learned elsewhere and do things the go way go is delectable
56917;after a while the C#s of the world become hard to code in
56918;lol
56919;I asked a .NET dev at work how to make a raw SQL query in a test app I was making
56920;Took him 45 mins not to he able to do it
56921;really though if you just REALLY want to use mvc because your more comfortable with it for now
56922;then do it
56923;not sure what being a .net dev has to do with that... I know devs in any language that don't know SQL.
56924;its not going to prevent you from doing things
56925;Because my project wasnt using whatever latest do everything for you framework Microsoft had we went through about 6 different methods to try it and none worked out
56926;I'm more confortable cause i only used this
56927;sure and thats valid
56928;GOlang just take what you learned and just throw it in a bin
56929;He specifically put together a framework using SQL which is why I was asking him
56930;it just appears that way on the surface tbh
56931;i'm really in trouble with this new way to structure project
56932;and you are clearly case as a bad developper if you use MVC pattern in Go
56933;so should i use maybe Java ?
56934;nah
56935;```go defer span.Finish() // finish the span after returning the stack of next ctx for a more complete transaction time  return next(ctx)``` is this accurate :thinkingwithblobs:
56936;Like 99% other dev
56937;its just that the language makes it harder for you to use mvc
56938;@Le V structure it however you want
56939;dont be weighed down by some random dudes opinion on the internet
56940;wdym accurate
56941;oh I see lol
56942;yeaaaaaa
56943;its middleware
56944;but i dont want my shit being returned too early
56945;because span has a timer in it
56946;which is timing request responses
56947;I mean ehh
56948;well so hard to code in Go
56949;that works
56950;yeah I'd keep it
56951;GOOD ENOUGH
56952;FOR ME
56953;off to master
56954;it goes
56955;:LULW:
56956;if you come from C/Rust maybe Go is easy
56957;But when you come from Java/TS/Python like me :/
56958;i did java for years
56959;it took a month or two
56960;its a different mindset
56961;neither one is bad
56962;just different
56963;I have done Python for years and I have found Go easier than Python
56964;hugely
56965;go is so comfy
56966;go is comfy
56967;It is
56968;Go is not hard
56969;People need to use lambdas more
56970;and fp
56971;though
56972;Go is hard to structure
56973;I think applying the same design/patterns everywhere is definitely a mistake though and it's really java and some of the OO guys who went way to far in that regard
56974;Vald structures well tho
56975;Bad pfp
56976;I personally don't see a point in mvp
56977;it's really hard for me to find what's relevant to the items I'm looking for
56978;Say I want to find how User is handled
56979;I would need to know the structures and the relevant methods
56980;where would I go?
56981;I don't understand design patterns like mvp or mmvp
56982;I would have to navigate around a lot
56983;Thats because they are bad
56984;Just put unrelated blocks separate
56985;they are
56986;random structures
56987;written by some dude
56988;who wrote a book on his idea
56989;well don't know what i have to do
56990;You have to code
56991;I'm also not sure if this is mvp but Java projects have lots of small files that contain no logic at all only abstraction boilerplate
56992;Use Go as a bad dev
56993;There are no bad devs
56994;Do some projects that are really simple and the rewrite it 10 times untill you figure out the best design.
56995;Or use Java with a clearrer code
56996;` lots of small files that contain no logic at all only abstraction boilerplate`java
56997;in a nutshell
56998;yeah just rewrite until it feels right
56999;I write really lightweight java
57000;it took me 2 years to arrive at the state of smolboard lol
57001;if you dont like
57002;It's not a few days
57003;heavy design structures
57004;That's the purpose of OOP
57005;then dont use them
57006;POO?
57007;:LULW:
57008;i'm french and OOP = POO ^^
57009;:OMEGALUL:
57010;you should guess i'm french with my horrible english ^^
57011;anyway
57012;doot doot
57013;doot ?
57014;https://giphy.com/gifs/wikidootdootgif5MxvgLxp5p732
57015;anyway ^^
57016;i'm just frustated to don't use Go as it should :/
57017;we keep saying though
57018;should is very subjective
57019;you can do whatever you want
57020;except having an unused variable
57021;Unused struct
57022;my therapist scolds me for using should
57023;that‚Äôs fine
57024;just get used to it bruh
57025;it's a loaded term
57026;should vs MUST
57027;it's not something immediate
57028;Should ?
57029;Why would that be bad ?
57030;@Deleted User is spamming FYI
57031;#reportspamhere pls
57032;got it
57033;I'm so frustated to don't understand this golang structure :(
57034;that's fine it takes time
57035;just try
57036;Is it possible to split up `debug.Stack()` so each call is a string in a `[]string`?
57037;you can (and should) use runtime.Caller and a loop
57038;"```govar stack []stringfor i := 0; ; i++ { // traverse up the stack _ thing _ ok := runtime.Caller(i) if !ok { break } stack = append(stack thing)}```"
57039;I don't remember what the return sig for runtime.Caller is lol
57040;but you get the idea
57041;Nice thanks mate
57042;runtime.Caller automatically gets everything thats been called automaitcally right?
57043;wdym called automatically
57044;oh runtime.Caller only gets a single call
57045;but you can use it to get them all using a loop
57046;Sweet
57047;Cheers
57048;yeah np
57049;@_diamondburned_ whats `pc uintptr` that it returns?
57050;it's the function pointer
57051;you can put that into runtime.FuncForPC for more cool stuff about that function type
57052;Seems I get loads of nil values when calling that ```&{{}}&{{}}<nil>```
57053;"Hi I am having a hard time figuring out how to properly start two http servers at the same time. This is part of my code:```go// create listeners...logger.Println(""server http server running at  httpLn.Addr().String())logger.Println(""server https server running at  httpsLn.Addr().String())go func() { err := httpSrv.Serve(httpLn) if err != nil && err != http.ErrServerClosed { logger.Errorln(""server err) Stop() return }}()go func() { err := httpsSrv.ServeTLS(httpsLn certFile keyFile) if err != nil && err != http.ErrServerClosed { logger.Errorln(""server err) Stop() return }}()```The problem is that if certFile or keyFile (filepaths) for the https server are invalid or not found an error instantly returns from that routine. So there is a possibility the https server doesn\'t start at all and the message https server started above becomes basically meaningless. Any elegant way to handle this scenario? Thanks in advance for any help!"
57054;If you‚Äôre in your main function that sounds like a fatal condition to me.
57055;yeah
57056;does go playground share link expire? I suppose not but want to make sure I only need it to be alive for probably a few months
57057;I have to close a database connection (redis) and wait for hijacked connections (websocket) to gracefully stop (with `server.RegisterOnShutdown()`)
57058;i dont believe they do func
57059;`main()` calls the `Shutdown` method on both servers if an error occurs while starting the listeners or I trigger a shutdown with `Ctrl+C`
57060;"Is it common place to capitalise template variables? Or does it not matter?```gin.H{ Stack"": stack, }```"
57061;most of them are lowercase from my experience
57062;Ok thanks @Madxmike
57063;Presuming theres no technical difference?
57064;as far as i know no
57065;oh im dumb
57066;variables not functions
57067;yeah people capitalize variables all the time
57068;I don't tbh
57069;if I'm passing in a raw map of vars I don't
57070;but I never do that anymore
57071;but i dont think there is a difference
57072;like templates dont have any type of visibility outside of regular scoping
57073;i know for instance all the variables in helm are capitalized
57074;Ok nice one one more thing is it possible to access the struct by key when looping it over in a tempalte? for example:``` stack = append(stack stackError{ File: file, Line: line, Ok: ok, })```Template:```{{ range $key $value := .Stack}} {{$key}} {{ $value }} // Can I do .Stack.File?{{ end}}```
57075;`.Release` `.Value` etc
57076;template
57077;Like `{{ .Stack.File }}`?
57078;im like 90% sure the range pipeline keeps the scope
57079;When I do above it comes back with nothing
57080;it's `$value.File`
57081;like a normal range in Go lol
57082;oh yeah
57083;true
57084;```gofor key value := range Stack { value.File}```
57085;Amazing
57086;funny thing that is
57087;the go's template pipelines work like go code
57088;also you still keep the parent's scope by defining that $value
57089;so . isn't $value but rather the parent scope
57090;Ah ok that makes sense
57091;god I really like {{ with }}
57092;How do you mean @_diamondburned_
57093;{{ with }} is basically {{ if }} {{ end }}
57094;except the scope transfers
57095;so
57096;$ is root scope iirc
57097;```{{ with (formatSomething .Something) }}<p>Look I can say {{.}} multiple {{.}} times {{.}}</p>{{ end }}```
57098;vs
57099;```{{ $formatted := (formatSomething .Something) }}{{ if $formatted }}<p>Look I can say {{$value}} multiple {{$$value}} times {{$value}}</p>{{ end }}```
57100;Has anyone messed with crosscompiling a project that has 3rd party depencdencies that use cgo?
57101;on linux?
57102;actually nah that's always been a pain
57103;you can statically crosscompile w/ muslc
57104;so give that a try ig
57105;> you can statically compile w/ muslc@_diamondburned_ music?
57106;muslc the other libc
57107;and stuff
57108;I'm not really wellversed in C compilers lol
57109;ohh right gotcha
57110;I read it as music and not musl
57111;> you can statically crosscompile w/ muslc@_diamondburned_ problem is the cgo parts aren't valid golang
57112;i know
57113;muslc is for C not Go
57114;you use it with cgo
57115;I tried using `go tool cgo gccgo main.go` and I got an `_obj` dir with .c files and .go files.problem arises when I bring imports into the mix. as the cgo tool doesn't seem to have an option to be used against an entire project
57116;"```shenv CC=armlinuxmusleabihfgcc GOOS=linux GOARCH=arm GOARM=7 CGO_ENABLED=1 go build o xcomp ldflags \'linkmode external extldflags static""\ .```"
57117;or sth
57118;https://medium.com/defreprself/crosscompilinggoandcgotargetingarmv7lmusllibcf96c610834a8
57119;How would you go about compiling for RISCV64 instruction set. I dont thing you can just set env variable like : GOARCH=RISCV.
57120;https://github.com/golang/go/issues/27532
57121;looks like you can
57122;https://tip.golang.org/doc/go1.14#riscv
57123;> ```> {{ $formatted := (formatSomething .Something) }}> {{ if $formatted }}> <p>Look I can say {{$value}} multiple {{$$value}} times {{$value}}</p>> {{ end }}> ```@_diamondburned_ Nice
57124;Is it possible to get the line number and function name etc from the panic caused by a template render gone wrong?
57125;`ViewEngine render parser name:templates/home error: template: templates/home:3: function hello not defined`
57126;Hahaha just answered my own question
57127;i have a question in TCP connections we get a listener and accept connections using listener.Accept()
57128;in UDP  when we listen we directly get a UDPConn
57129;now to my understanding this UDPConn is a packet of information sent by a client
57130;however the conn we get from accepting TCP connections that is a connection over which the client can continuously send information?
57131;both are
57132;the only difference is that UDP lacks some delivery guarantees and other minor features that TCP does
57133;i think UDP also lets you cheat multicasting in in the sense that it's not a formal feature just a consequence of how it happens to be designed
57134;yeah highlevel i understand what you mean
57135;but from the API it is not clear to me why UDPListen doesnt have an accept method
57136;and directly returns conn
57137;because UDP doesn't care about opening or closing connections
57138;TCP does because of its delivery guarantees and whatnot
57139;TCP requires a graceful close mechanism
57140;UDP does not
57141;UDP is just dump shit into the network if someone\'s listening the might receive it IF they\'re listening
57142;so the conn in both UDPConn and conn:= Listener.Accept() for TCP are essentially the same thing?
57143;functionally they're identical they're both connection objects
57144;yes
57145;you read from them and write to them
57146;UDPConn is not a packet from clients mate
57147;As i had already said
57148;UDPConn is a connection to the port youve bound to
57149;you get packets when you call Read()
57150;```gofunc readRoutine(c lspnet.UDPConn) { for { var msgbuffer []byte num Addr err := c.ReadFromUDP(msgbuffer) if err != nil { fmt.Println(err) } fmt.Println(num) fmt.Println(Addr) }}```
57151;is something like this suitable to read from a UDPConn?
57152;seems legit
57153;does it work
57154;don't think it does
57155;msgbuffer is len 0
57156;oh huh
57157;```gofunc readRoutine(c lspnet.UDPConn) { var msgbuffer = make([]byte 1024) for { num Addr err := c.ReadFromUDP(msgbuffer) if err != nil { fmt.Println(err) } fmt.Println(num) fmt.Println(Addr) }}```
57158;I mean it probably will
57159;nothing would just be read
57160;so num is 0 presumably
57161;right that makes sense
57162;i always forget about buffer length
57163;got it
57164;doesnt work as of yet but im looking into it
57165;btw msgbuffer is not safe for concurrent use
57166;```gofunc readRoutine(c lspnet.UDPConn) { var msgbuffer = make([]byte 1024) for { num Addr err := c.ReadFromUDP(msgbuffer) if err != nil { fmt.Println(err) } fmt.Println(num) fmt.Println(Addr) go processPacket(msgbuffer) // !!!!!!!!!!! }}```
57167;you'll need to copy the slice if you want to hand it over to a different goroutine
57168;ah yes i intend to do something like this
57169;i was htinking of sending it back using a channel to a main routine and processing it there
57170;you can optimize this by implementing a pool of n workers and n byte slices
57171;then rotate the byte slices
57172;it's bounded though so if all workers are occupied you'll have to wait
57173;also I don't think all packets are going to be the same size so it's impractical to do a bunch of byte slices
57174;maybe bytes.Buffer will help w/ constructing a byte slice from multiple byte slices
57175;we've been given a length
57176;if its beyond 1500 drop it
57177;the lenght exceeds that
57178;oh
57179;1500+1 then
57180;if num > 1500 { continue }
57181;yes
57182;make ssense
57183;also can go routines return things?
57184;you can use a channel as a wannabe return
57185;negative
57186;goroutines can't return anything
57187;and channels are the preferred way of communicating with them
57188;share memory by communicating
57189;yeah thought as much
57190;thank oyo
57191;I mean they can be functions with returns but the runtime discards them
57192;same with defers
57193;Hey guys i'm having a hard time designing middleware for my app```gotype AppService interface { PushLogs([]parser.LogEntry int) (int64 error) Run(AppService)}func main() { app := appservice.NewAppService(cFile db) lm := appservice.NewLoggingMiddleware() app = lm(app) app.Run()}func (a App) Run() { for file := range a.cFile { rows err := a.PushLogs(logs machineID) }}```I'm using a logging middleware that implements the AppService interface and generate logs for the PushLogs method. The problem here is in the app.Run() the call to PushLogs doesn't go through the middleware (and it makes sense) does anybody have a better pattern ?
57194;I've fixed it in production by passing app as an argument to my Run() as such Run(app AppService) but then i have to use app.PushLogs and it doesn't feel right
57195;You can just use native debuggers on go executables :kekWHAT:
57196;I had no idea
57197;Hi all  does anyone know what could potentially cause this weird exception?
57198;`dial tcp: lookup <hostname>: device or resource busy`
57199;it's a Go application running in a Docker container
57200;DNS lookups seem to work fine outside of go it's just that...
57201;this might be due to how youre building the binary
57202;whats the exact command you use to build
57203;`go install tags oss nolimit github.com/drone/drone/cmd/droneserver`
57204;drone üëÄ
57205;yeah that's what I'm trying to debug
57206;I can barely find any info about this specific error at all
57207;stroom are you thinking it might have to do with Go using the C DNS resolver?
57208;should probably mention... the docker host is a nixos machine
57209;@_diamondburned_ right up your alley
57210;have fun
57211;kek
57212;why use Docker then @Alex Zero
57213;probably because I'm lazy lol
57214;it would have been easier to just use nix to build it from the start
57215;still I am interested in this issue because I swear I've encountered it before on other containers running on nixos
57216;hmm there's no Drone service
57217;try building with CGO_ENABLED=0
57218;I'd recommend packaging Drone on Nix though
57219;shouldn't be hard
57220;then you can do like
57221;"```nixcontainers.droneci = { enable = true; config = { pkgs config ... }: { services.droneci.enable = true; };};```"
57222;ah cool
57223;not even sure when Nix containers are needed tbh
57224;you cover most of what Docker offers with just Nix and systemd services anyway
57225;"what does `listen localhost:51081 127.0.0.1:51081: unknown network localhost:51081` this mean? ```go addr err := lspnet.ResolveUDPAddr(""udp s) fmt.Println(addr) if err != nil { return nil err // fmt.Println(err) } // buffer := make([]byte 1500) conn err := lspnet.ListenUDP(s addr) fmt.Println(conn) if err != nil { // fmt.Println(""Hello"") fmt.Println(err) }````addr err := lspnet.ResolveUDPAddr` does not return error but attempting to listen from it does"
57226;any ideas?
57227;does it have to be an IP?
57228;replace localhost with 127.0.0.1
57229;first question would be where is the error coming from
57230;if you don't know that you can't even begin to debug
57231;`listen localhost:51081 127.0.0.1:51081:` why 2 :think:
57232;stroom you selfhost drone right?
57233;si senor
57234;Can someone explain middlewares and their use in a router/bot. I'm not sure I understand.
57235;via docker
57236;are there any other configs other than the env vars?
57237;thats all we use afaik
57238;aight cool
57239;does it require mounting anything?
57240;for state or whatever?
57241;it hooks up to mysql or postgres for that
57242;oh so it doesn't make any files in the fs?
57243;https://github.com/UCCNetsoc/NaC/blob/master/roles/ci/tasks/main.yml
57244;checkout ansible file for it
57245;mount docker socket is all
57246;for the agent
57247;aight very cool thx
57248;@Alex Zero https://git.sr.ht/~diamondburned/nixoverlays
57249;"```nixservices.droneci = { enable = true; config = { DRONE_GITHUB_SERVER = https://github.com""; };};``` etc"
57250;oh awesome thanks!
57251;untested but you can clone and change it if you want
57252;~~PR~~ mailing lists are fine
57253;really do need to get up to speed with how overlays work in general... right now I have a bunch of stuff just directly building and using derivations in my service definitions
57254;not the cleanest solution by far
57255;Go is actually one of the easier languages to package
57256;try packaging a NodeJS project lmfao
57257;oh no...
57258;let's see if Drone can build without C deps
57259;what's the point of using maps?
57260;to store data lol
57261;can't go deeper without more concrete examples
57262;i mean compared to data stored in a struct
57263;when you don't know the field names or when they should be arbitrary
57264;ah
57265;that makes sense
57266;but you could still do `[2]string{}` right?
57267;yeah?
57268;no O(1) read/write though
57269;arrays and maps serve two entirely different use cases
57270;None
57271;mostly in terms of lookups
57272;arrays are I have a long sequence of identical things and the only way i care about accessing them has to do with their order/index
57273;maps are...mostly everything else
57274;i see üôÇ
57275;you use an array when you want to do something to many things in sequence you use a map when you want to find specific things to do work on
57276;thank you
57277;> `listen localhost:51081 127.0.0.1:51081:` why 2 :think:@Str≈ìm hmm the error is coming from lspnet.ListenUDP
57278;i am doing localhost bcz
57279;"`s := lspnet.JoinHostPort(""localhost strconv.Itoa(port))`"
57280;nvm
57281;i got it
57282;than u
57283;k
57284;thank
57285;if I've got an `interface{}` that should be a `T` how do I set the underlying `T` value? (with reflect of course)
57286;`reflect.ValueOf(v).Elem().Set()`?
57287;sounds right yeah
57288;I just haven't worked enough with reflect lol
57289;Does someone knows why when I use a library that uses sqlite3 and that I use it in my project too it will make go error while compiling?
57290;I hear grpc is better for innerserver comm. Would I be fine with traditional http tho?
57291;Or would it be too slow xd
57292;I wouldn't have too many services either
57293;that's a question you should ask yourself
57294;optimization before benchmarking is likely to be premature
57295;^
57296;Can almost guarantee you http will be fine
57297;Tru
57298;Youre not at google scale where these lil things matter
57299;if you want to be certain just benchmark it if it doesn't seem like a big deal just go with whatever seems to fit your use case better
57300;I dont think grpc/http is even meant to be a performance debate
57301;learning grpc may be cool if you haven't used it
57302;Eh I'll look into it
57303;Using it seems very different but it'd be cool to learn either way ig
57304;I tihnk grpc is comfy but that's only because we have a solid schema instead of people sending garbage over the wire
57305;:BCS_PepeLaugh: so i know i didnt exactly do it your way but
57306;None
57307;this is FAST
57308;in less than 10 ms your code is compiled run and sent back
57309;@Str≈ìm i get that the amount of work i have to do is more but i... am a teenager and dont have a job and this is cool and will be a good asset on my portfolio
57310;(custom runtime over net btw not just showing off js lol)
57311;Rcom > grpc
57312;What's rcom?
57313;BARE >  :^)
57314;HTTP KING
57315;/s
57316;https://git.sr.ht/~sircmpwn/bare btw
57317;smol specs
57318;Fuck I mean dcom
57319;bare seems cool tbh
57320;oh shit i could use bare for cchat damn
57321;having generated schemas would be cool
57322;variable length integers..
57323;wait nvm max 64 bit
57324;also wait why is a boolean encoded as an 8bit integer
57325;because 1 bit hard to do over wire
57326;fair enough
57327;there used to be a float16 type btw
57328;until I tooted him about it and he\'s like it\'s gone now
57329;lol
57330;lol
57331;toot as in mastadon?
57332;yeah
57333;here's the go lib https://git.sr.ht/~sircmpwn/gobare
57334;no generation :Thonk:
57335;guess I'll do it
57336;Are you diamondburned on there too?
57337;~diamondburned yeah
57338;oh.
57339;welp I'm just blind
57340;how does that even work
57341;I'm not big into social media but Mastadon is the only one I keep an active account on although I basically never post anything
57342;wait nvm
57343;that's generation of schema not code gen right?
57344;yeah it's schema gen
57345;for cchat I'll parse Go interfaces and translate that to Go structs that can easily be transferred over the wire along with ID states to map IDs to local data then I'll generate BARE schemas using those Go structs
57346;wrote that so I don't forget xd
57347;Like you specify an interface and then generate the api and struct for the functions on jt?
57348;I don't think you can specify an interface no
57349;for cchat I'll have to translate interfaces to structs and it'll def be domainspecific too
57350;```gotype Namer interface { Name() text.Rich AsIconer() Iconer}type namer struct { Name text.Rich Iconer bool}type Iconer interface { Icon(context.Context IconContainer) (func() error)}type IconContainer interface { SetIcon(url string)}type iconer struct { ID uint64 URL string}```
57351;probs lol
57352;ive had this issue for like 2 months and ive been putting it off and have been thinking of diff solutions. But my issue is that i have stock market prices coming in but sometimes due to a special condition a price is way beyond the NBBO. how can i constatnly be checking if a price is an outlier compared to the others as spreads start to change with different price stocks
57353;if condition
57354;if what?
57355;just check if it's over that limit
57356;i dont know the limit
57357;thts the issue cause i cannot constantly get the NBBO
57358;oh this is a math question
57359;so i have to determine if its an outlier based on the prices i get
57360;yeah I have no idea
57361;hahah thanks for trying its def not easy as ive been at it for 2 months and math is my stronger suit not logical thinking
57362;do you just find the outlier regardless or is there a margin
57363;the margin would be the differnce between the spread of the bid and ask
57364;well you can either check if it's an outlier using the IQR or std. dev.
57365;Why not just calculate a rolling 90th percentile and drop anything outside that?
57366;https://en.m.wikipedia.org/wiki/Chauvenet%27s_criterion
57367;but i can't get that all the time
57368;Can't get what?
57369;like it would be easy if i could take the price and know the national best bid and ask and see if its on or within that margin
57370;but i cannot as i just have prices
57371;these outliers occur for special reasons
57372;where its not wihtin the standard bid and ask
57373;i haven't heard of both of ur reccomendations
57374;care to explain further on those?
57375;> but i cannot as i just have prices@xblooos ?
57376;welp I have no idea about stocks
57377;I could help with programming but not stocks
57378;i have market data coming in and 99% of it is within margins of the bid and ask but a couple are not and i have to determine which ones are or are not
57379;would love the coding help once i figure this out
57380;without konwing the bid and ask
57381;well if you can say 1% are not within the margins then you already know how
57382;if you didn't know how how would you know you have a problem
57383;It's statistics... You use the prices that you have and you calculate either the standard deviation or like a 90th percentile (90% of prices fall within this range) as the data is coming in.
57384;haha qr its not that simple lol
57385;why not
57386;dusty yes it is statistics ur right
57387;becuase if it were i wouldve been able to figure it out
57388;ü§î classic chicken and egg problem
57389;both those ideas would make sense but i dont konw how to approach that
57390;None
57391;this is an example
57392;None
57393;None
57394;so you take some amount of values from before you take the mean and std.dev. then you can see how far the value you are interested in is from the mean
57395;btw languages like Python and R have tools that do this for you...
57396;yea ik im on golang tho sadly
57397;for efficiency purposes
57398;Your bottleneck is going to be network io tbh
57399;it's just sums and products do you really need python for it. The tricky part is getting the data but i'd assume xblooos knows how to get the data he's already seen.
57400;Even Python is more than fast enough to handle stuff like this
57401;yea im good with the the data coming in
57402;ive reduced the latency to the market data where im under like 12ms i think
57403;i cannot use python
57404;cause my entire program is in golang
57405;im trying to figure out which prices i can take and then do algorithmic calculations in realtime
57406;how many vlaue points would i need
57407;before the mean and std.dev becomes accurate
57408;cuase at the start of the day i start with 0 values
57409;well if you care about unusual change in a month use the last month etc.
57410;Yeah it depends on the window you are looking for...
57411;im looking at current day
57412;so stock market starts at 930
57413;so im starting fresh everyday
57414;at 930
57415;How often do you get outliers?
57416;like once or twice a day per stock usually but it rlly throws off my calculations that lead to loss in money
57417;How often do you get data?
57418;about a thousand messages a second
57419;give or take for spikes and stuff
57420;Per stock?
57421;no overall usually about a thousand messages a second
57422;i take the data in
57423;parse it
57424;and then sort it into qeues for goroutines for a specific symbol reads from
57425;and it does it calcs based on the prices coming ni
57426;and then i have an outlier that comes and messes with my calcs
57427;But you don't care about overall... You want to remove outliers based on symbol... so how many messages per symbol?
57428;erm
57429;maybe 50 per symbol per second
57430;give or take
57431;prolly on the lower side
57432;so id say 1035
57433;And how long do the outliers last? one message or 20?
57434;one message
57435;like in the screenshots
57436;it just happens once
57437;ive never seen two in a row
57438;So just the last minute would probably be fine...
57439;if you see enough of them in a row they aren't outliers market just changed so gl with that lol
57440;Yeah this is one of the biggest questions in stock trading... How to distinguish outliers from market shifts...
57441;well
57442;in order for prices to change
57443;like a spike
57444;or a dip
57445;prices have to be eaten through
57446;so ill get those trades no matter what
57447;wait too long and you miss out jump too early and you loose if it wasn't actually a shift
57448;okay well the essence of my program
57449;overall
57450;is to detect when a stock is reversing
57451;and use confidence levels to determine when to go into the trade and when to exit
57452;MACHINE LEARNING
57453;:retard:
57454;just a lil bit
57455;but it is important that the trade is a regulated trade thats within the bid and ask
57456;for that given time
57457;cause as the screenshots shown some trades occur in dark pools or between market makers or for other reasons that are unregulated and off the books
57458;nice so people are gonna automate gambling now
57459;which come to me but i gotta get rid of it
57460;hahahahha im pretty darn accurate
57461;could be luck
57462;> nice so people are gonna automate gambling nowThat's what stock trading is lol
57463;"I use a library that uses sqlite3 and when I use sqlite3 in my project also go can\'t compile the code saying there is multiple definitions of the files from sqlite3 here is a little part of it```/usr/local/go/pkg/tool/linux_amd64/link: running g++ failed: exit status 1/usr/bin/ld: /tmp/golink715234876/000053.o: in function `sqlite3_mutex_free\':/home/zelak/go/src/crawshaw.io/sqlite/./c/sqlite3.c:25891: multiple definition of `sqlite3_mutex_free\'; /tmp/golink715234876/000015.o:/home/zelak/go/src/github.com/mattn/gosqlite3/sqlite3binding.c:25892: first defined here``` Is there anything I can do? I know it works if I change to something else than sqlite3 so it doesn\'t interfere with each other but I find that kinda weird"
57464;education gambling basically
57465;ideas to proceed with dusty?
57466;@Zelak are you... using 2 sqlite libraries?
57467;Well basically one of the library uses the sqlite3 driver and in my code I also use the same drivers which causes this
57468;It looks like theres 2 different sqlite libraries being used
57469;indeed
57470;Not the sqlite3 driver
57471;an sqlite3 driver
57472;Yeah I don't know which one the library uses so it can indeed be two different
57473;> ideas to proceed with dusty?@xblooos Not really... besides what has already been mentioned. But this isn't something I have delved into very much. And it has been ~10 years since I took a statistics class...
57474;Man has it really been 10 years? lol
57475;i'm taking one rn
57476;sheeesh. nah all good. i haven't even taken statistics yet im 16 so
57477;and if i helped you anymore i'd have to demand to be on the payroll
57478;My oldest daughter is 6 so I guess 10 years would be about right lol
57479;Whack
57480;i could dive into std.dev and mean and medians but the only thing im scared about is that at what point do i have enough data to consider the numbers accurate enough to consider a outlier
57481;qr üíÄ
57482;I graduated HS in 2009 and dropped out of college 20112012...
57483;Well I guess I will just use a diffirent sqlite library than what I used
57484;sheesh
57485;been a while since school
57486;the older the wiser
57487;how should i make a worker pool that only runs when an array is under a certain size?
57488;a goroutine that checks every like every second if the array size is smaller than the required?
57489;Wrap the array and notify on change?
57490;why n err := c.fd.Write(b)
57491;how would I do that?
57492;and not c.Write(b)
57493;to error handle probably
57494;I'd use an event loop
57495;hmm
57496;"```gopackage mainimport fmt""func main(){ fmt.Println(hello(""hello""))}func hello(a interface{}) interface{}{ a = 1; return a;}```"
57497;so using interface can change type?
57498;yes
57499;you're using a different type
57500;so it changes type
57501;wow
57502;also that code doesn't work the way yo uthink it does
57503;try this:
57504;"```govar text = hello""text = hello(text)```"
57505;see if that compiles
57506;i know actually
57507;but i want test if it dynamic
57508;it's not
57509;not in the way you think it is
57510;ok
57511;if you think interface{} is there just for the placeholder for any type then it\'s best that you avoid it for now
57512;ok
57513;so what interface do?
57514;https://tour.golang.org/methods/9
57515;hmm
57516;ok
57517;it is like virtual function
57518;huh?
57519;what VM?
57520;sorry
57521;i mean virtual function
57522;almost yeah
57523;I haven't seen a static programming language with dynamic type
57524;it's not dynamic type
57525;ok
57526;what virtual function is for?
57527;https://stackoverflow.com/questions/39092925/whyareinterfacesneededingolang
57528;and https://golangbot.com/polymorphism/
57529;oh i see
57530;map[int]map[int]Message how would i add elements to this map?
57531;m[someInt] = someInt[Message]?
57532;it is a map of maps
57533;`m[2][3] = message`
57534;nil check first
57535;indexing into that map evaluates to another map to which you can assign elements of type Message as you would any other map
57536;got it
57537;thaks
57538;is it possible to order a map based on its key value?
57539;not with the built in map
57540;how do you intiialize a map of maps?like using make?
57541;you have to make the inner map also
57542;?
57543;you can use a map literal too
57544;if you have the data aalready
57545;anyone here got experience with servos?
57546;Not with golang
57547;anyone know golang's behavior when reading and following symlinks?specifically with ioutil.ReadFile
57548;check the docs
57549;and man open
57550;https://man7.org/linux/manpages/man2/open.2.html
57551;wow first i ever saw people not get the point of having polymorphism https://discordapp.com/channels/118456055842734083/118456055842734083/759258463929892864beside that i'm surprised the top two answers didn't simply show off the extensive use of Reader and Writer rather than making contrived examples
57552;@_diamondburned_
57553;okay?
57554;I think the example works
57555;sure it's ok
57556;How can I read keypresses when the program isn't focused (if that makes sense)
57557;Like I have my go program running in the background and when I am playing something else it will read keypresses
57558;and now that I am typing this I realise it sounds like I'm making a keylogger
57559;I'm not
57560;how can I change what each key does
57561;like I want to replace a with s and stuff like that
57562;@superloach made something like that hope I'm not pinging for nothing sorry bud
57563;:NanaBongo:
57564;that might depend on the platform you're targeting
57565;I know X can do it but idk any other
57566;I am on linux
57567;Can I read from `/dev/input`?
57568;Yet I don't know how I can replace the keypresses
57569;or simulate one
57570;you need root for dev input
57571;using plain X library is the best way here
57572;Guys ? i need help im rly newbie in Go but what i would like to do is to implement Go as a microservice to my project where i have php backend service nodejs frontend service and nginx as proxy
57573;but i have no idea how to dockerize go with it
57574;"```yamlversion: 3""######### Services ###################################services: nginx: build: context: NGINX dockerfile: Dockerfile volumes:  ./:/var/www  ./NGINX/logs:/var/log/nginx ports: # Nuxt port  8080:80 # Laravel port  8081:81 # Go port  8082:82 networks:  backend  frontend depends_on:  php  nodejs  goservice goservice: restart: always build: dockerfile: Dockerfile context: MICROSERVICES/GO ports:  8082"" php: build: context: BACKEND/Docker/php dockerfile: Dockerfile container_name: php volumes:  ./BACKEND:/var/www/api environment: # If you down want to use xDebug set remote_enable=0 XDEBUG_CONFIG: remote_enable=1"" PHP_IDE_CONFIG: serverName=Docker"" networks:  backend depends_on:  mysql  redis mysql: image: mysql:5.7.22 container_name: mysql restart: unlessstopped tty: true ports:  4306:3306"" environment: MYSQL_DATABASE: homestead MYSQL_USER: homestead MYSQL_PASSWORD: homestead MYSQL_ROOT_PASSWORD: homestead SERVICE_TAGS: dev SERVICE_NAME: mysql networks:  backend redis: build: context: BACKEND/Docker/redis dockerfile: Dockerfile volumes:  ./BACKEND/Docker/redis:/data ports:  63791:6379 networks:  frontend  backend nodejs: build: context: FRONTEND dockerfile: Dockerfile volumes:  ./FRONTEND:/var/www/client networks:  frontendnetworks: frontend: backend:```"
57575;:pobRike:
57576;hey guys I have data file like ```gamma alpha betaWoof meow tWeet squeek moO coAk t00t quack BLUB owowow``` and i want get result file that these word be sorted (by alphabet in each line) so first lien would go ``alpha beta gamma``
57577;"```gopackage mainimport ( bufio"" fmt"" io"" os"" sort"")func main() { dataFile := data.txt"" resultFile := res.txt"" data err := readFile(dataFile) if err != nil{ fmt.Println(err) os.Exit(1) } sort.Strings(data) err = writeLines(resultFile data) if err != nil { fmt.Println(err) os.Exit(1) }}func readFile(file string) (data []string err error) { f err := os.Open(file) if err != nil { return nil err } defer f.Close() r := bufio.NewReader(f) for { const delim = \'\\' line err := r.ReadString(delim) if err == nil || len(line) > 0 { if err != nil { line += string(delim) } data = append(data line) } if err != nil { if err == io.EOF { break } return nil err } } return data nil}func writeLines(file string lines []string) (error) { f err := os.Create(file) if err != nil { return err } defer f.Close() w := bufio.NewWriter(f) defer w.Flush() for _ line := range lines { _ err := w.WriteString(line) if err != nil { return err } } return nil}``` but somehow when I get my result file they only print out those line in reverse order it meens 2nd line goes first and 1st goes 2nd without any sorting any ideas why that is happening?"
57578;maybe it has do something with ``delim``?
57579;OR do I read my file bad?
57580;By the looks of it you're not actually separating the lines. You're reading the file as a whole and sorting that.
57581;@Ikkerens I probbalt need use ``ReadLine`` instead of ``ReadString``?
57582;I'm more talking about data[] shouldn't that be data[][]?
57583;Top level index: linesBottom level index: words
57584;Oh right I see it now you're sorting the lines not the words.
57585;Yeah do what I just said. Split it into lines then split it into words.
57586;random question about the way go handles time on a 32bit arm system (specifically a raspberry pi with 32bit raspbian) is go suspectable to the year 2038 problem?
57587;Every 32bit time system is suspectable to it
57588;@Ikkerens I need use bytes to read? got lost
57589;If it's a pi4 I suggest going ubuntu arm64
57590;i've read some operating systems have adopted using a 64bit int even on 32 bit systems so i'd just like clarification
57591;If it's a pi3 or lower you probably won't have it running till 2038
57592;@MantasSil Read strings/lines is fine but then you need to split it by spaces and sort that.
57593;its not likely i'll run into it as an actual issue it's just something i'd like to know just in case
57594;@Ikkerens ```goif err != nil { line += string(delim) []lines := line } []lines = strings.Split( ) data = append(data lines)``` not something like this?
57595;that error if looks a bit weird.The last two lines are nearly correct:```gofor { line err := r.ReadLine() if err != nil { if err == io.EOF { break } return nil err } words := strings.Split(line  ) data = append(data words)}```
57596;@Ikkerens ``Invalid operation: err == io.EOF (mismatched types bool and error) ``it just my compiler error or you get one too?
57597;Nah I didn't use a compiler. I just wrote it on Discord here.
57598;so there might be errors XD
57599;I copied that bit from y ou
57600;eh idk what happened there
57601;"```godata := []string{}for line err := r.ReadLine(); err != io.OEF ; { words := strings.Split(line  ) data = append(data words)} ```"
57602;somehow my ``err error`` gets bool type
57603;That should work too it's bad but simpler
57604;@Ikkerens [BLUB Woof alpha beta coAk gamma meow moO owowow quack squeek t00t tWeet] if i get answer like this it means i still reading whole string?
57605;and not by line?
57606;Yes
57607;What are these symbols in go
57608;Theyre not any Go symbols
57609;Where are you seeing this
57610;@connor.
57611;> @superloach made something like that hope I'm not pinging for nothing sorry bud@Karitham I just did that with X11 compose lol
57612;Question!I have a struct:```gotype DatabaseSession struct { db sqlx.DB userManager DatabaseUserManager groupManager DatabaseGroupManager}```With function:```gofunc (s DatabaseSession) UserManager() session.UserManager { return s.userManager // < cannot use s.userManager (variable of type DatabaseUserManager) as session.UserManager value in return statement}```If I change it to return a nonpointer it will build as the `DatabaseUserManager` type implements the `session.UserManager` interface. But I can't return a pointer there or it gives the error shown.In this case if I return a nonpointer will the language return a reference under the hood or copy the `DatabaseUserManager`? If it'll make a copy is there any way to allow pointers or references to interface implementations?
57613;"(Okay I think I answered myself. Interface types are pointers under the hood; should be passing interface types asis)"
57614;Hi guys i\'m doing a sudoku solver program. my function in order to find an element in my slice of ints doesn\'t work like I would like. in fact it finds if in this slice there is the exact numbers at a position. for instance https://prnt.sc/uo9vn9 and in my code I did https://prnt.sc/uo9vt5. I would like that it prints true if only one number is find so if I search 9 it\'ll tells me true because nine is in position 0 of the slice.
57615;```gofunc contains(s []string searchterm string) bool { i := sort.SearchStrings(s searchterm) return i < len(s) && s[i] == searchterm}func hasElem(board [][]int searchElem string) bool { var ok = false s := make([]string 0) for _ es := range board { for _ e := range es { str := strconv.Itoa(e) s = append(s str) ok = contains(s searchElem) if ok { return true } } } return ok}```
57616;It seems like you probably want to replace your `contains` with `strings.ContainsAny`
57617;i'll test that after
57618;thanks
57619;How many (very small) processes can your system run safely
57620;:5_bugcatstare: is 550k too much
57621;Or 1.2k
57622;Mhhh are you looking a processes or goroutines?
57623;@Riku the only answer is try it and run benchmarks
57624;thx it works lethal
57625;How can I return a type from a function when the type is defined within the same function?
57626;Nice! Just to point you towards what might have gone wrong it seems like you may have missed:> SearchStrings searches for x in a sorted slice of strings and returns the index as specified by Search.
57627;@ExhaustX define it outside the function
57628;The sorted slice of strings is important here. The fact that it‚Äôs in the `sort` package is also a bit of a hint. :p
57629;if you're returning it from the function it's being used outside the function
57630;so it doesn't make sense to hide it
57631;gotcha. My brain was thinking encapsulation but if its just better to define outside im good with that
57632;i mean it's fine to define anonymous/oneoff types inside your function scopes
57633;when that type is ONLY being used in that function ( or functions it is calling )
57634;your type is being used outside the function ( it's being returned ) so
57635;roger that. thanks
57636;i do anonymous types here and there it's legit
57637;but it costs you very very very very little to just have all your types named somewhere in a package
57638;@Riku it will cost you at least 2mb per process for the stack space of the main thread the scheduler will be under extremely high load and once stuff like stack memory starts getting paged to disk it might not function to well.
57639;Idk if linux even lets you get to that point
57640;Do a fork bomb to find out the exact limit
57641;Aite I'm not using go btw but you guys are knowledgeable so. The process is supposed to start do something with a max runtime of 50sec and ram cap of 50mb
57642;And then die
57643;how do i use a type in other packages from the main package?
57644;you can't
57645;do i just copy/paste them again?
57646;you don't import _anything_ from the main package
57647;That would just redefine a new type with the same stuff
57648;You aren't using the same type so it's not interoperable exactly
57649;oh
57650;so then declare types from within the other package and import in main package?
57651;If you find yourself wanting to use something from your main package in a different package that thing likely shouldn't be defined in `main`
57652;?go layout
57653;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
57654;main generally just ties together things from other packages
57655;very little should be defined in `package main`
57656;like doad said main should mostly be importing other things and just using them
57657;:GWvertiPeepoSadMan:
57658;i really suck at organizing things generally in programming
57659;it's a nontrivial problem
57660;there are two hard problems in computer science: cache invalidation naming things and offbyone errors
57661;that sounds like 3
57662;but yeah i feel that naming things one
57663;> and offbyone errors
57664;and i do consider where do names belong part of naming things
57665;Hello i'm new to Go is there a way to not duplicate this code ?
57666;not in a way i'd consider worthwhile
57667;the best you could do ( while maintaining compile time type safety ) is using interfaces
57668;i see
57669;and that probably wouldn't be worthwhile and possibly outright incorrect
57670;anyways
57671;i tend to over engineer this type of thing but i guess with Go i'll have to be verbose
57672;this is just an unfortunate artifact of how Go's type system works
57673;not being able to write generalized map() functions basically
57674;you'll end up seeing this kind of duplication relatively frequently
57675;it's not a huge deal
57676;it's just a for loop
57677;alright thanks !
57678;yep
57679;a valid question
57680;but uh
57681;go doesn't QUITE have the type system features to let us refactor this problem the way we'd like
57682;yet
57683;That seems like a very inefficient way to generate new IDs
57684;You have to check _every_ ID before you make a new one
57685;oh
57686;If there are a lot of existing IDs and you're making a lot of new ones you're gonna have a bad time
57687;wow yeah this looks really weird
57688;i didn't even process that part
57689;ID generation should not be `O(n)` you should be able to do it with `O(1)` time complexity
57690;auto incrementing an int will likely be sufficient
57691;@Doad thanks for the article on pkg layout btw
57692;i'll give it a read
57693;it's a very good basis for Go architecture
57694;I made a file server but server blocks when downloading multiple files.
57695;How can i solve that?
57696;You can try building your app with the `race` flag so you can see race conditions
57697;or show some example code
57698;You are likely having a race condition between locks or something
57699;"@Doad basically :```fs := http.FileServer(http.Dir("".""))http.ListenAndServe("":8080"",fs)```"
57700;How do you know it's blocking?
57701;Creates goroutine but waits
57702;what creates a goroutine but waits?
57703;and how do you know it's waiting?
57704;When i started other downloads  creates goroutines but waits
57705;In browser
57706;What happens when you dont do it via browser
57707;Im not convinced that FileServer is blocking
57708;likewise
57709;Waiting
57710;you really gotta be more specific
57711;https://golang.org/src/net/http/fs.go?s=20871:20911#L549
57712;interestingly i don't see any goroutine invocations in the FileServer pipeline tho
57713;it's a handler
57714;it shouldn't have to
57715;oh right
57716;okay cool
57717;so yeah it should be fully concurrent
57718;oh my
57719;>parseIP Its as if the net package doesnt exist...
57720;"```func twoSum(nums []int target int) []int { size := len(nums) result := make([]int 2) for i := 0; i < size1; i++ { for j := i+1; j < size; j++ { if i + j == target { result[0] = i result[1] = j break } } } return result}```"
57721;This is a simple function that has to return a slice of two integers that are chosen from input array whose sum is equal to target value.
57722;Unfortunately despite being too simple I'm stuck on this and it seems I've made a error regarding the usage of Syntax. Any help/hint would be much appreciated.
57723;None
57724;Second file waits like this
57725;@shakuni `i` and `j` are your index values
57726;not the actual number at `nums[i]` and `nums[j]`
57727;While finished first file
57728;`if nums[i] + nums[j] == target`
57729;> not the actual number at `nums[i]` and `nums[j]` Oh! my bad. I feel embarrassed by this. Thanks @Madxmike
57730;@sades try downloading another way and see if the problem persists
57731;@entibo another way?
57732;Command line
57733;@shakuni you may want to take advantage of go's multiple return values here too
57734;instead of returning a slice of constant short length
57735;Its a leetcode/homework question
57736;https://leetcode.com/problems/twosum/
57737;`nums[i] + nums[j] == target` I hate this lol
57738;do `nums[i]+nums[j] == target` or `(nums[i] + nums[j]) == target`
57739;well its the naive/bruteforce solution anyways üòõ
57740;I have a struct in a lib I need to reach into so I can add values manuallyIn my function I have the interface i.e (Store) with all the functions that operate on the struct.How can I tell golang that Store also has a key accounts that I can access. My guess is ill have to use the unsafe and reflect lib. Am I asking this question the right way? Is there a better way to express what Im trying to accomplish?
57741;> How can I tell golang that Store also has a key accounts that I can access. huh?
57742;why not just add a getter into the interface
57743;Im trying to edit the external libray
57744;you can probably just fork it
57745;or submit a PR
57746;if you actually need to modify it
57747;welcome to open source
57748;I‚Äôve asked the maintainers do not want to add the functionality i need : (
57749;or let me add it and do a pr
57750;sounds like you have your options then
57751;Still looking for a posible answer to my orginal question
57752;fork 100%
57753;fork and use yours over theirs
57754;simple
57755;I've had a dgo fork for like 2 years now
57756;Yea It may come down to that. But exploring this option also helps me get a better understanding of golang as im still new to it.
57757;Your original question is I need to add new functionality to a piece of code
57758;the best answer is add a PR or fork it
57759;in theory you COULD hack something with unsafe
57760;but if you ever have to ask yourself do i want to use unsafe? the answer is no
57761;same with reflect
57762;"hehe @deezy I agree im still going to give it a try first because learning"". but ill probibly fork the code. Ive just never had to do that and I also want to keep up with any updates form the origin."
57763;that's okay
57764;forking a repo allows you to pull updates from upstream
57765;literally by design
57766;whole point of git
57767;Thanks @deezy Ill unsafe if for a bit for fun but will ultimately just fork it. How do I tell golang to use my forked version? Just import it with a direct path?
57768;if you're forking it you may as well just import YOUR code
57769;^ but you also need to change the go.mod's header
57770;if not use a replace directive in your project
57771;I see how it will work thanks
57772;yeah np
57773;i am trying to debug my program using some println statements.
57774;whenver i run the program with race flag
57775;it seems to print all the print statements
57776;but without it
57777;it does not
57778;is there something wrong with my program?
57779;Remember that `fmt` printing isn‚Äôt safe to use concurrently. If you‚Äôre running the race detector I‚Äôll assume you‚Äôre trying to print concurrently. :p
57780;"Prefer the `log` package; it handles locking for you and is safe to use concurrently."
57781;i am using `log`
57782;i am using `log` without the `race` flag it doesnt print all the statemenets
57783;```localhost:51081127.0.0.1:51081&{0xc000120058}[Connect 0 0] client side[Ack 0 0] this is the ack127.0.0.1:51081=== TestBasic1: Short client/server interaction (1 clients 3 msgs/client 0% drop rate 1 window size 1 max unacked messages)2020/09/26 14:55:32 In servers mainroutine write2020/09/26 14:55:32 In servers mainroutine write FAIL: TestBasic1 (0.00s) lsp1_test.go:79: Started server on port 51081. lsp1_test.go:90: Started 1 clients. lsp1_test.go:136: Client 1 wrote message 40 (1 of 3). lsp1_test.go:107: Server read message from client 0. lsp1_test.go:109: Server writing . lsp1_test.go:148: Client 1 read message (1 of 3). lsp1_test.go:152: Client 1 received message 0 expected 40. lsp1_test.go:154: Client shutting down... lsp1_test.go:186: Client failed due to an error. lsp1_test.go:107: Server read message from client 0. lsp1_test.go:109: Server writing .SERVER WRITE 127.0.0.1:58135 [Data 0 0 0 ]SERVER WRITE 127.0.0.1:58135 [Data 0 1 0 ][Data 0 0 0 ] this is the ack127.0.0.1:51081```
57784;```localhost:51081127.0.0.1:51081&{0xc0000a6058}[Connect 0 0] client side[Ack 0 0] this is the ack127.0.0.1:51081=== TestBasic1: Short client/server interaction (1 clients 3 msgs/client 0% drop rate 1 window size 1 max unacked messages) FAIL: TestBasic1 (0.00s) lsp1_test.go:79: Started server on port 51081. lsp1_test.go:90: Started 1 clients. lsp1_test.go:136: Client 1 wrote message 40 (1 of 3). lsp1_test.go:148: Client 1 read message (1 of 3). lsp1_test.go:152: Client 1 received message 0 expected 40. lsp1_test.go:154: Client shutting down... lsp1_test.go:186: Client failed due to an error.```
57785;the first one is with race flag it prints all the statements
57786;the second one is without the race flag
57787;it doesnt print anyhting
57788;post code
57789;"```gofunc mainRoutineServer(s server) { for { select { case clientMsg := <s.clientMessage: msg := clientMsg.message cliAddr := clientMsg.clientAddr // connID := msg.ConnID if _ ok := s.cliMap[msg.ConnID]; ok { s.cliMap[msg.ConnID][msg.SeqNum] = msg } switch msg.Type { case MsgConnect: response := NewAck(s.uniqIDs 0) s.cliMap[s.uniqIDs] = make(map[int]Message) s.cliMap[s.uniqIDs][msg.SeqNum] = msg // fmt.Println(s.cliMap) s.clientToServerPair[s.uniqIDs] = cliAddr // log.Println(s.serverClientPair hahahahahah"") writeCommon(cliAddr s.connection response) s.uniqIDs++ // increment the uniqID case MsgData: // log.Println(""hahahahhahahah msg) response := NewAck(msg.ConnID msg.SeqNum) // s.messages[msg.ConnID] = msg.SeqNum[msg] writeCommon(cliAddr s.connection response) case MsgAck: continue } case WriteMsg := <s.writeMessage: s.servMap[WriteMsg.ConnID] = make(map[int]Message) s.servMap[WriteMsg.ConnID][WriteMsg.SeqNum] = WriteMsg clientAddr := s.clientToServerPair[WriteMsg.ConnID] fmt.Println(""SERVER WRITE clientAddr WriteMsg) ////////// PRINTING HERE writeCommon(clientAddr s.connection WriteMsg) } }}```"
57790;i am printing SERVER WRITE here at the bottom
57791;but this doesnt print in regular
57792;> just face
57793;race
57794;also
57795;is there a way to color output to stdout
57796;:thonk:
57797;pretty sure that code actually gets executed
57798;doesnt print with `log` either
57799;> pretty sure that code actually gets executed@_diamondburned_ yes im sure
57800;i just found a bug
57801;in my code
57802;so ya not sure if thats whats causing it to break
57803;@deezy Im setting up my fork to start working on it but I have a question about folder structure in golangso I still want to import the project the same way just with my repo:`github.com/JordanCason/somerepo`The original repo on my local box is in:`/home/jordan/golib/pkg/mod/github.com/other/somerepo`Should I be doing a git pull in the `home/jordan/pkg/mod/github.com/JordanCason/` directory? Or should I be doing this somewhere else and somehow telling go.mod where it is or something?
57804;You can use the `replace` directive in your `go.mod` file
57805;@Doad Should I do it this way even if i plan on this being permanent and never merged back into the upstream?
57806;you can use `replace` to get started with your changes then convert everything over once you're done prototyping
57807;that was my approach in a similar situation
57808;Is there any API to make a Widget?
57809;.....in what?
57810;golang?
57811;Widget?
57812;yes
57813;Wdym widget
57814;Widget in what
57815;I would make a Desktop Widget with go
57816;Ok please say that next time you ask for widget
57817;like a Windows 7 widget?
57818;or an overlay window that acts like a widget?
57819;like conky?
57820;wallpaper engine?
57821;something more specific
57822;also bruh I miss W7 widgets even though they didn't even work that well
57823;Widget is like literally the most abstract idea possible when talking about making something lol
57824;this
57825;‚ÄúThe factory produced 500 widgets this year‚Äù
57826;"Hey guys I was wondering why this first function works but the second one doesnt.The error I get is ```gonot enough arguments to return have () want (string)``` ```gofunc readToml() (n string) { var config games conditions := []string{} if _ err := toml.DecodeFile(""games.toml &config); err != nil { fmt.Println(err) return } for _ game := range config.Games { slug := fmt.Sprintf(""(slug = %v) game.Slug) conditions = append(conditions slug) } return strings.Join(conditions  | )}``````gofunc readToml() string { var config games conditions := []string{} if _ err := toml.DecodeFile(""games.toml &config); err != nil { fmt.Println(err) return } for _ game := range config.Games { slug := fmt.Sprintf(""(slug = %v) game.Slug) conditions = append(conditions slug) } return strings.Join(conditions  | )}```"
57827;hi!. im trying to read this outta a file and im down to the parsing aspect
57828;```goINFO: 2020/09/25 13:30:02 {59.06 []}INFO: 2020/09/25 13:30:03 {58.98 [37]}INFO: 2020/09/25 13:30:03 {59.0139 [37]}```
57829;this kinda stuff and im tryna parse the number at the end.
57830;"```gofile err := ioutil.ReadFile(""VZ.TICKS"") if err != nil { fmt.Println(fmt.Sprintf(""%v err)) return } lines := strings.Split(string(file) \"") for i line := range lines {```"
57831;im that deep into the reading and stuff LOL
57832;@Chrid97 that return below the print err doesn't have anything after it
57833;@xblooos wtf why
57834;hello
57835;why what
57836;I'm confused? What do you mean it doesn't have anything after it. They both have the same return statement and the one that works is the first one
57837;@Everwar please i need help
57838;i just need the number at the end
57839;first one works because named return
57840;so a return by itself means return all that named return variables
57841;@xblooos that's awful why are you parsing log output
57842;that thing is not meant to be parsed
57843;use json or something
57844;cause i log the prices into a file
57845;i dont write it in json format
57846;you should've
57847;its there a performance difference?
57848;doing like write into a file one by one as a josn
57849;or log.print
57850;to a file?
57851;as I said it's just easier to parse
57852;the timestamp makes it harder
57853;yea ill change it but is there a performance difference
57854;the fact that Println's format isn't made to be parsed makes it harder to parse
57855;cause i gotta store like 1000 messages a second or something
57856;too trivial to say but I'll just say yes to spite you off tbh
57857;if you really want a fast log use a buffer and a fifo
57858;make the log operation non blocking
57859;use file buffer
57860;so u mean to properly log it
57861;make a goroutine dedicated to logging it
57862;being passed by a buffer channel
57863;if im worreid about performance
57864;cause i would have to marshal it everytimg
57865;"i have this query in mongodb console :```jsvar id = ObjectId(""5f1cb09ec221ae89b9915904"")db.Groups.aggregate([ { $match : { _id : id } }, // Lookup Responsable { \'$lookup\': { \'from\': Borrowers"", \'let\': { \'id\': \'$borrower_id\'}, \'pipeline\': [ { \'$match\': { \'$expr\': {\'$and\': [{ \'$eq\': [\'$_id\ \'$$id\ ] }] }}}, { \'$project\': { _id:0, first_name: 1, last_name:1, }} ], \'as\': responsable"" } }]) ```how can create this in bson using golang i use mongodriver"
57866;@xblooos how do you think the current data is converted to text?
57867;what do you think marshaling means
57868;what's the invisible overhead here that you assume exists?
57869;i mean i gotta marhsal the message in order to write it as a json output righ
57870;marshal just makes it a json output no?
57871;what's involved in that process?
57872;what does Marshal have to do to make a struct value a text output?
57873;and in what process is Println faster?
57874;or doesn't do?
57875;i couldn't answer that
57876;i guess println is more for displaying
57877;and json is more for data passage
57878;but i couldn't tell u what goes on behind the scenes
57879;then don't bother with assuming
57880;do what you have to then profile the code later
57881;then you'll see what's actually slow
57882;and then you can start thinking of how to make it faster
57883;@_diamondburned_ @xblooos can help me please ?
57884;well then the final question
57885;is would u do a gortouine dedicated to writing to a file
57886;or can it be done on a linear function code loop
57887;wiht all my other calcs
57888;erm Sae ion konw what ur working wtih thats more diamond
57889;@xblooos I have a simple problem converting the mongodb request to go
57890;"go accept this type : ```golookupMembers := bson.D{{""$lookup bson.D{ {""from Borrowers""}, {""localField members""}, {""foreignField _id""}, {""as members""},  }}}```"
57891;this is really simple and short,but if the request is longer like this
57892;"```jsdb.Groups.aggregate([ { $match : { _id : id } }, // Lookup Respo { \'$lookup\': { \'from\': Borrowers"", \'let\': { \'id\': \'$borrower_id\'}, \'pipeline\': [ { \'$match\': { \'$expr\': {\'$and\': [{ \'$eq\': [\'$_id\ \'$$id\ ] }] }}}, { \'$project\': { _id:0, first_name: 1, last_name:1, }} ], \'as\': responsable"" } }, // Lookup Reservaation Respo { \'$lookup\': { \'from\': Reservations"", \'let\': { \'id\': \'$borrower_id\ \'confirmed\': false }, \'pipeline\': [ { \'$match\': { \'$expr\': {\'$and\': [{ \'$eq\':[\'$idborrower\ \'$$id\ ]} { \'$eq\':[\'$confirmed\ \'$$confirmed\ ]}]}}}] \'as\': currentReservationRespo""}}, { \'$project\': { \'_id\': 1, name"": 1, \'responsable\':1, \'borrower_id\':1, \'members\':1, \'name\':1, \'membersCount\':{ \'$size\':\'$members\ }, \'currentReservation\': { $cond: { if: { $eq: [ { $in: [ $borrower_id $members ] } true ] } then: { \'$size\':\'$currentReservationMembers\ }  else: { \'$add\ : [ { \'$size\':\'$currentReservationRespo\ } { \'$size\':\'$currentReservationMembers\ } ] } } }, \'currentLoan\': { $cond: { if: { $eq: [ $existe true ] } then: { \'$size\':\'$currentLoansMembers\ }  else: { \'$add\ : [ { \'$size\':\'$currentLoansResp\ } { \'$size\':\'$currentLoansMembers\ } ] } } }, }},])```"
57893;how are you going to handle it?
57894;@xblooos
57895;@_diamondburned_
57896;bruh dont tag me
57897;im a asker here not a helper
57898;i cant even understand my own code sadge
57899;ok I'm very sorry
57900;i don't use mongo sry
57901;@xblooos would I know?
57902;no
57903;why? because it depends on so many things
57904;would I care now? I wouldn't
57905;I would get the code working first and then bother about that goroutineFIFObufferedIOmumbojumbo later
57906;ok sir thank you
57907;`cannot use newClient (type client) as type client in assignmentgo` wtf does this mean
57908;paste code
57909;Are there any performanceoriented GUI libraries for Go?
57910;there is <https://gioui.org> which is imgui for go
57911;if you're careful about it it should be possible to write a zeroallocation gui with gio
57912;quick question
57913;can I import and use goimports in code and not a binary?
57914;I'm using `jen` for code generation from a repository but I didn't account for Go imports paths because goimports handled them fine
57915;(I only import from the stdlib or my own Go module)
57916;generate the imports as well?
57917;yeah but then I'd have to add the imports into the repository
57918;and jen itself only allows manualish imports
57919;"like `Qual(""time Time"")` but I have `time.Time` rn"
57920;i don't follow
57921;ok so like
57922;I only have `time.Time` and `context.Context` and stuff
57923;and in my source file (the file w/ all the type names) I don't want to have to add an extra bit for import path
57924;because lazy
57925;so I was wodnering if I could have goimports run the generated code through and add imports automatically
57926;because it should work fine w/ the output
57927;assuming you're using `//go:generate` you can add another such directive to run goimports
57928;i do this often to gofmt generated files
57929;oh true
57930;yea ig that works thx
57931;hmm
57932;Anyone know why this is giving me `exit status 1`
57933;"```goerr := exec.Command(""xmodmap e \\""keycode +wKeycode+ = +dAction+""\\"""").Run()fmt.Println(err)```"
57934;When I run the command manually it works fine
57935;:GWsetmyxPeepoCry:
57936;"When I do `fmt.Println(""xmodmap e \\""keycode +wKeycode+ = +dAction+""\\"""")`"
57937;Copy the output
57938;and paste into my terminal
57939;it works
57940;yet with go it doesnt work
57941;whyy?? üò≠
57942;rule 1. if execing doesn't work check stderr
57943;cmd.Stderr = os.Stderr
57944;it's not there for no reason
57945;oh true lmao
57946;now i get this
57947;```xmodmap: unknown command on line commandline:1xmodmap: 1 error encountered aborting.```
57948;hmmmm
57949;that arg is hell
57950;paste what you'd put in shell
57951;wdum?
57952;paste me what you put in your terminal for it to work
57953;"`xmodmap e keycode 25 = d""`"
57954;That is the output of the println
57955;I paste into my terminal window and it executes fine
57956;When I type w it gives me a d as expected
57957;"`""xmodmap e keycode 25 = d `"
57958;Ok doing it like that works
57959;Yet why doesn't the first one work?
57960;oh wait
57961;because quotes are shell syntax not xmodmap
57962;i think i know
57963;yeh üëç
57964;ty sm
57965;yw
57966;anyone who knows a bit about prometheus got 10 min time to jump into voicechat with me
57967;i need to write an exporter for it and i dont have access to the device i am exporting metrics from for tests.
57968;do @ me if you happen to have some knowledge in that area and a few minutes time.
57969;https://rsmitty.github.io/PrometheusExporters/ hmm nvm i think i found what i need
57970;whats the best way to debug time out errors
57971;stupid question
57972;I'm having a test problem here
57973;float32(c.Qtd1Cent)  0.01 is returning me error ... = 0.099999994 want 0.1
57974;I'm trying to force it to 0.1 without success
57975;This is why you dont use float for money
57976;You're running into floating point precision errors
57977;?go currency
57978;Oh ok.
57979;anyway to round it tho?
57980;it is a small 50 lines piece of code
57981;Use integers
57982;As in store the amount in cents
57983;Never ever money as floats
57984;I'm new to Golang from Java and someone told me that I shouldn't write Golang programs like I would write programs in other languages. Are there any resources explaining how I should write good Go code?
57985;!go currency
57986;```code block was not foundStatus = 0```
57987;what is the case when
57988;s.outgoingMessageChan < message
57989;this blocks?
57990;for some reason `message` isn't going into `s.outgoingMessageChan`
57991;@rh12503 dont try to do inheritance and dont try to have a million packages
57992;Thats first i would say
57993;HiHow can I convert float64 to time.Duration?My float64 value is seconds
57994;@R4BB1T if nothing is reading from the channel the write will block
57995;what do you mean nothing is reading?
57996;@react0r time.Duration is int64 so you need to turn float64 to int64
57997;you mean if nothing is extracting the stuff inside the channel with := < ?
57998;A channel has two sides reading and writing
57999;is there a way of giving priority in a select statement?
58000;Not in a single one
58001;what do u mean in a single one?\\
58002;but even with int64 I can't cast it properly
58003;int64(myfloat)
58004;@R4BB1T in a single select statement
58005;no i meant between cases in the select statement
58006;```golang v := int64(testsuite.TeslaReport.Suite.Time) results.SuiteDuration = v  time.Second```
58007;That is still a single select statement@R4BB1T
58008;@react0r ok my bad
58009;Do time.Duration(myfloat)
58010;it will treat it as seconds?
58011;got it
58012;Check what docs say time.Duration is
58013;> s.outgoingMessageChan < message@R4BB1T can i default this statemenet?
58014;like if its blocking do something else
58015;?
58016;maybe keep storing in a buffer until it doesnt block any more
58017;Use a buffered channel?
58018;Goroutine?
58019;how would i use a goroutine in this case?
58020;Just run a function to put the block in the background
58021;wow
58022;it worked
58023;why does it work though
58024;?
58025;@Str≈ìm
58026;this was really cool
58027;:partygopher:
58028;but why does it not...like mess up things
58029;Why or how would it
58030;both
58031;like
58032;```gofunc (s server) Write(connID int payload []byte) error { var seqNum int checkSum := uint16(ByteArray2Checksum(payload)) // make message and send to outgoingMessageChan message := NewData(connID seqNum len(payload) payload checkSum) go func() { s.outgoingMessageChan < message }() return nil}```
58033;while i send this to the background what happens to the actual function
58034;and what happens to the actual function
58035;like this is so cool
58036;black magic fuckery
58037;hi
58038;where do I found good frameworks and libs? only on pkg.go.dev ?
58039;how do I update structs value only if a condition is met?
58040;<your problem domain> golang
58041;On google
58042;hi i\'m trying to automate deploying my app using Goi have a binary and .service file that i want to upload to the target server and start the serviceand i\'m having some issues i have a path string as each file should go using sftp package how can i cd to that path and check if one exist of not mkdir one (like /home/ubuntu/myApp the myApp directory might not exist)
58043;```newModel := model{ Test: model2.Test Test1: model2.Test1}```I'd like to update `Test` property only if `model2.Test` value is something else than a nil
58044;then..check if thats the case?
58045;theres no trick answer or anything here
58046;`if`
58047;You don‚Äôt have to provide all struct values in the literal
58048;but what if the model is big I'm coming from JS background thats why I'm asking I would inline that if check in object directly if it was JS but here it seems that I'd need to iterate over all properties and do a check and then fill it if necessary?
58049;Initialize what you need to do the check
58050;you only need to check the properties you care about
58051;And then check those properties before settings more later
58052;the usescase here is that rest api endpoint will receive an entity and I'm trying to do an update function where I get current entity from database and then do a check between those too and update whatever needs to be updated
58053;next time ask with that question instead :P
58054;http://xyproblem.info/
58055;yes there exists libraries out there for that
58056;Pretty sure you can just do it with sql
58057;Like just do an update operation on the row that represents that entity
58058;@~.Ali.~ honestly I would just do that with a bash script or your favorite ci/cd pipeline of choice
58059;how about: ansible
58060;Yeah
58061;That‚Äôs my next thing to learn
58062;If I understand your question you pretty much are just wanting to make sure your server is setup correctly to deploy the app
58063;> @~.Ali.~ honestly I would just do that with a bash script or your favorite ci/cd pipeline of choice@Madxmike it's part of a bigger project to deploy our app automatically to the server that the customer provides
58064;Then yeah use the tools designed to do that
58065;Like ci/cd
58066;Ansible
58067;Etc
58068;Make it a Docker container
58069;And deploy it with helm
58070;i mean... it's more uniformed like this as i said this is a small part of a bigger project and i'm just trying to figure out how to cd to the correct directory üòÖ
58071;I‚Äôm like 90% sure you can just give it full paths to the sftp client and you don‚Äôt have to cd around anywhere
58072;That‚Äôs what the docs look like atleast
58073;the client starts at root and i\'m trying to get one directory up and /home/ubuntu/
58074;~/
58075;You can get anywhere you want with full paths
58076;> ~/@Madxmike add ~ at the start?
58077;That‚Äôs the home directory for the user
58078;Just out of curiosity if hiring a junior golang developer what are the minimum requirements you'd like your junior to have  within reason ofc
58079;> That‚Äôs the home directory for the user@Madxmike i keep getting the error file does not exist when i use client.Create()
58080;@Erah whatever you do dont say minimum 2+ years experience for a junior role
58081;Did I hear junior golang developer role üëÄ
58082;@~.Ali.~ yoy may have to play around the the path and/or perms
58083;> @~.Ali.~ yoy may have to play around the the path and/or perms@Madxmike yeah it's the paths üòÖ
58084;> ```go> func (s server) Write(connID int payload []byte) error {> > var seqNum int> > checkSum := uint16(ByteArray2Checksum(payload))> > // make message and send to outgoingMessageChan> message := NewData(connID seqNum len(payload) payload checkSum)> go func() {> s.outgoingMessageChan < message> }()> return nil> > }> ```@R4BB1T any idea about this?
58085;i still dont understand how
58086;```go func() {}()```
58087;works here
58088;you know you can declare anonymous functions
58089;no i mean
58090;i know that
58091;i am confused about the behaviour
58092;like we send it to the background
58093;but what happends to the rest of the functions
58094;it proceeds to return nil?
58095;or does it hang back
58096;it continues as normal
58097;how do I turn quote```gotype Quote stringquote ...Quote```into `[]string` ???
58098;I tried doing `[]string{quote...}`
58099;but it doesn't seem to work
58100;```govar x []stringfor _ y := []Quote{...} { x = append(x string(y))}```
58101;maybe
58102;:(
58103;guess that works
58104;cannot use &eventsc (type chan gomegle.Event) as type chan gomegle.Event in argument to sess.Connect
58105;any idea whats wrong with this?
58106;wait
58107;nvm
58108;>gomegle :monkaS:
58109;Look at your types there
58110;`chan gomegle.Event` vs `chan gomegle.Event`
58111;I think the nvm means they figured it out üòâ
58112;üò°
58113;@Madxmike
58114;Yes
58115;Go to sleep
58116;I just woke up
58117;Like an hour ago
58118;East coast nerd
58119;I‚Äôm just too concerned about this library
58120;East coast best coast
58121;https://github.com/Shazeb01/Bankdic_proj/blob/c34fd06953cbe7df81a53112acc2821c4604efc5/pkg/accounts.go#L1
58122;why its not importing please tell
58123;i did create correct pkg
58124;@_diamondburned_ hey sorry for ping
58125;but i was wondering if you could let me know if there's a way to limit a width of a grid in gotk3
58126;`SetSizeRequest()` only works if the content inside a `TextView` is narrower than that size
58127;if it's bigger it'll just resize it
58128;i tried making the text inside textview wrap with `tv.SetWrapMode(gtk.WRAP_WORD)`
58129;but i get this weird wrapping when i hover over textview
58130;where it would just put one word in one line
58131;What do you mean not importing
58132;@emnaruto07
58133;Can you show the error it‚Äôs giving you
58134;undefined
58135;What are you importing
58136;accounts
58137;What is your import statement
58138;Is what I‚Äôm asking
58139;Where you are importing accounts
58140;github.com/Shazeb01/Bankdic_proj/accounts
58141;in main
58142;Can you push the current version
58143;Because you aren‚Äôt importing that in the code on GitHub
58144;ok
58145;"```go: finding module for package github.com/Shazeb01/Bankdic_proj/accountsmain.go:6:2: no matching versions for query latest""```"
58146;looks like my issue is fixed @_diamondburned_
58147;i added justification alignment and a width to my textview
58148;@Madxmike check github please
58149;Well your accounts package should be in a folder named accounts
58150;Not pkg
58151;ohhhh!
58152;Pkg isn‚Äôt a special package in go
58153;It‚Äôs just another folder
58154;thanks i also just checked
58155;hi i keep running to this error i reinstalled echo but i cant get v4 i'm on go version 1.10
58156;how can i fix this?
58157;Why are you only on go1.10
58158;haven't updated yet but it shouldn't have any issue with echo v4?
58159;You should really just update tbh
58160;Easiest
58161;will do but why can't i get echo tho
58162;You aren‚Äôt using modules
58163;And are trying to get a module package
58164;/2+ packages have to be used in module mode
58165;?go modules
58166;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
58167;> And are trying to get a module package@Madxmike that version of echo needs modules?
58168;Like Mike (and the echo docs) mentioned any `/vX` package needs to be imported in module mode.
58169;If you're on 1.10.3+ you can create a module. If you're on an earlier patch version you'll need to move up to 1.10.3 (or ideally bump your minor version).
58170;> If you\'re on 1.10.3+ you can create a module. If you\'re on an earlier patch version you\'ll need to move up to 1.10.3 (or ideally bump your minor version).@Carson updated to 1.15 still getting the same error for go get github.com/labstack/echo/v4
58171;Are you in a module directory?
58172;"The Go version was just a prerequisite to fixing the issue; updating alone won't change it but it will let you create a module to import the package."
58173;You need to create a module in your project
58174;?go modules
58175;Introduction to Go Modules <https://roberto.selbach.ca/introtogomodules/>  SkippyUsing go modules <https://blog.golang.org/usinggomodules>  Sgt_Tailor
58176;ah thanks
58177;Hi all I'm getting an error on this chunk of code
58178;"```func TestGetListenUrl(t testing.T) { t.Run(""method=handle func(t testing.T) { for k tc := range []struct { desc string config struct { Ip string // has to be pointer to allow mocking of a nil Port string // has to be pointer to allow mocking of a nil } validate func(t testing.T string) }{ { desc: Ip: Nil Port: Nil expected fallback: 127.0.0.1:8080"", config: { Ip: SetupNilInStringPointer(), Port: SetupNilInStringPointer(), }, validate: func(t testing.T returnedUrl string) { assert.Equal(t 127.0.0.1:8080 returnedUrl) }, }, }{ t.Run(fmt.Sprintf(""case=%d/description=%s k tc.desc) func(t testing.T) { cfg := GetListenUrlCfgHelperMock{ Ip: tc.config.Ip, Port: tc.config.Port, } rs := GetListenUrl(cfg) tc.validate(t rs) }) } })}```"
58179;I'm getting an error `config/config_test.go:52:22: expected expression`
58180;line 52 in this case is on the line `for k tc := range [] struct {`
58181;Is there any syntax error that I'm making here?
58182;```go[]struct { desc string config struct { Ip string // has to be pointer to allow mocking of a nil Port string // has to be pointer to allow mocking of a nil } validate func(t testing.T string) }```
58183;well the first thing i'd do is lift these into a ctual named types
58184;The main issue is this line: `config: {`
58185;"You can't specify a struct field like that without a type; you can elide the type in slice literals but not in that situation"
58186;It would have to be `config: struct{/ whole anonymous struct type definition /}{Ip: ... Port: ...}` or go the easier route of named types like deezy suggested :p
58187;I managed to fix it
58188;haha
58189;When you instantiate a new interface what happens? What I think is understand so far.The new instantiation is a pointer to an array of pointers that point to my method signatures.Where is the pointer to my struct created? Does anyone know of a diagram to visualize this?
58190;you don't instantiate interfaces
58191;oh you mean interface values?
58192;I think so
58193;I think I may have just found a good resouce for digging into my question
58194;I may be back to ask it in a better way.
58195;https://play.golang.org/p/n6m5FcHZks1
58196;well i thought that `%#v` would print out the guts of the interface value
58197;not that simple i guess
58198;you'd probably have to use reflect or something
58199;ok thanks
58200;"I performed a get request with body info```js{ id: 1}```to this code```gofunc Get(r http.Request) string { defer r.Body.Close() request := requests.CreatePointer() err := json.NewDecoder(r.Body).Decode(&request) log.Println(request.ID) response := responses.New() if err != nil { log.Println(""couldn\'t decode json"") log.Println(err) response.Ok = false responseByte _ := json.Marshal(response) responseString := string(responseByte) return responseString } //search request.ID //find or dont find if false { response.Ok = false responseByte _ := json.Marshal(response) responseString := string(responseByte) return responseString } response.FileName = hello.txt"" response.FileContents = asdghbvdse //open hello.txt and return val responseByte _ := json.Marshal(response) responseString := string(responseByte) return responseString}```and got this err"
58201;None
58202;anyone know why?
58203;How did you post that body
58204;Oh is body on GET even allowed?
58205;Im not sure it is
58206;oh haha
58207;that must be whats wrong
58208;lemme replicte for post brb
58209;wouldn't you want to decode response instead?
58210;Are you ok @stdio
58211;dunno what's that
58212;`if false ` :THONK:
58213;aw same error
58214;it keeps throwing the same err that json is incomplete
58215;imma try logging it xd
58216;aw what da heck
58217;everything is still a zero val
58218;```(requests.Requests)(0xc000114690)({ Ok: (string)  FileList: ([]string) <nil>, FileName: (string)  FileContents: (string)  ID: (int) 0})```
58219;somehow I assumed that request is outgoing :p
58220;oh lol tru
58221;wrong one god damn
58222;wait its not
58223;oml Im so sloww
58224;ok so most likely
58225;what fires the func is wrong
58226;cuz it says content length is 0
58227;None
58228;oh my god I feel so dumb. I have a gateway for each service that didn't bring through the body just made the url request
58229;lol I fixed it
58230;Does anyone have experience using github actions with go for automatic sam package/deploy?
58231;func isPowerOfTwo(n int) bool { result := ( n && !(n & ( n  1 ))) return result}the above code gives an error=> invalid operator: ! intPlease who knows how i can get rid of the error?
58232;&& is comparator returns true or false
58233;I think haha
58234;oh nvm that ret
58235;yeah probably you need !=0 there
58236;n != 0 && (n & (n  1))== 0 perhaps
58237;hello who among you please use mongodriver with golang?
58238;I have a problem
58239;who can help me ?
58240;please
58241;nobody can help if all you say is i have a problem
58242;just ask your question show your code errors etc
58243;@deezy ok
58244;ok I want to pass the value of the borrower variable _id to the _id but the value is still null
58245;I debugged my code is still no value
58246;my floor is as follows?
58247;Can you show the code you have
58248;"```jslookupResponsable := bson.D{{""$lookup bson.M{ from"": Borrowers"", let"": bson.M{ _id"": $borrower_id""}, pipeline"": bson.A{ bson.M{""$match"": bson.M{""$expr"": bson.A{ bson.M{ _id"": $$_id"", }, }}} bson.M{""$project"": bson.M{ _id"":1, first_name"": 1,""last_name"":1, }}},""as"": responsable""}}}```"
58249;the value of borrower _id must be passed to the _id which is at the let and then the _id which is at the level of pipline must be received _id
58250;is this a go problem or a mongo problem?
58251;can you do this query in mongo manually?
58252;or in another application
58253;manual execution it works well
58254;"```jsvar id = ObjectId(""5f1cb09ec221ae89b9915904"")db.Groups.aggregate([ { $match : { _id : id } }, // Lookup Respo { \'$lookup\': { \'from\': Borrowers"", \'let\': { \'id\': \'$borrower_id\'}, \'pipeline\': [ { \'$match\': { \'$expr\': {\'$and\': [{ \'$eq\': [\'$_id\ \'$$id\ ] }] }}}, { \'$project\': { _id:0, first_name: 1, last_name:1, }} ], \'as\': responsable"" } }, { \'$project\': { _id"":1, name"":1, members"":1, responsable"":1 } }])```"
58255;Someone should put this in the news
58256;https://www.gowestconf.com/
58257;the `responsable` part seems to be in a different place
58258;Virtual web conference in 5 days
58259;"the go code seems to set it as part of `bson.D{{""$lookup bson.M{`"
58260;not part of the `$project._id` object
58261;yes exactly the `responsible` is another place
58262;yeah
58263;so fix it
58264;it's your code
58265;but the problem in terms of `$lookup` with `$project`
58266;how to embed the `$ project` in $ lookup without using pipeline
58267;honestly that sounds like a mongo question
58268;your go code seems valid
58269;"honestly it makes a conflict for me,if i use lookup like this```jslookupStatusBorrowers := bson.D{{ $lookup bson.D{ {""from Status_Borrowers""}, {""localField status_borrowers""}, {""foreignField _id""}, {""as status_borrowers""}, }}}```it work or like this  ```jslookupLoan := bson.D{{ $lookup bson.D{ {""from loan""}, /{""let bson.D{{""id $_id""}}},/ {""pipeline bson.A{ bson.M{""$match"": bson.D{ {""idborrower _id} / _id: is comming from go directly / {""is_loan true}, }}}}, {""as currentLoan""}, }}}```"
58270;oh mongo
58271;that looks right
58272;it seems to me that the problem at the level of golang?
58273;"> ```js> lookupResponsable := bson.D{{""$lookup bson.M{> from"": Borrowers"",> let"": bson.M{ _id"": $borrower_id""},> pipeline"": bson.A{> bson.M{""$match"":> > bson.M{""$expr"": bson.A{> bson.M{> _id"": $$_id"",> > },> }}} > bson.M{> $project"": bson.M{> _id"":1,> first_name"": 1,> last_name"":1,> }}},> as"": responsable""}}}> ```@nizar but why does it no longer work"
58274;here's what i'd do
58275;instead of making this all in one go
58276;"```golookup := bson.M{""from"": Borrowers etc etc}top := bson.D{{""$lookup lookup}}```"
58277;make all of these pieces one at a time
58278;so you can see which parts are going where more easily
58279;because
58280;"``` }}},""as"": responsable""}}}```"
58281;i have NO fucking idea where `responsable` falls in your object tree here
58282;break it apart
58283;responsible is a nomenclature of the resulting object
58284;alternatively
58285;https://play.golang.org/p/PRZTYsB_xek
58286;format your code properly
58287;look at how much easier it is to see what goes where
58288;`as` to define a json key and the value will be the result of the query `$lookup`
58289;"> > https://play.golang.org/p/PRZTYsB_xek> @deezy > you need to import go.mongodb.org/mongodriver/bson""> or mongodriver"
58290;that wasn't really the point
58291;i was just trying to clean the code up so it was actually legible
58292;and not curly bracket soup
58293;ah ok
58294;now that it's cleaned up it does SEEM like responsable is in the right place
58295;but i don't know anything about mongo
58296;so all i can say is that you're writing syntactically correct go code
58297;that will compile
58298;whether or not it tells mongo to do what you ACTUALLY want is
58299;a mongo question
58300;Before you know it you'll be writing tests to see if you can actually select a value
58301;:ooohohohoho:
58302;@deezy yes my code compiles well but does not do what I just wrote on the mongo console
58303;tests good
58304;Less tests better
58305;:no:
58306;:PillowYes:
58307;hey how can I spread nested struct fields to base struct in `goplayground/validator`?
58308;"```gotype Bot struct { Entity `validate:""spread?""` //...}type Entity struct { SomeField string `json:""someField validate:""required""`}```i have the data from json:```json{""someField"":""...""}```"
58309;"and the validator currenyly wants```json{""entity"": { someField"": ...""}}```"
58310;``Entity Entity `valid...``
58311;like I dont want this
58312;i want it to pass on
58313;"```json{""someField"":""...""}```"
58314;not
58315;"```json{""entity"": { someField"": ...""}}```"
58316;just validate it on Entity then?
58317;(as it expects currently)
58318;maybe...? i thought there would be more straightforward way
58319;No inheritance in Go m8
58320;Only composition
58321;i dont want inheritance
58322;i just want to validate embedded fields as they would be in root struct
58323;but if its not possible than okay
58324;i'll have to do 2 validations
58325;You're trying to emulate an inheritance structure
58326;kind of...
58327;:p
58328;best way is to manually validate it
58329;i don't want 30 ifs haha
58330;ifs for what? check empty?
58331;yea
58332;just do == Bot{}
58333;be careful of nils
58334;not excactly I want some fields to be forbidden with `isdefault`
58335;I'll just post this here in case anyone does have experience handling sam package/deployments from github actions. I'm creating the github workflow now and all works well including installing go until I get to the sam build part. It starts to build the first lambda function and returns this error: ```Error: GoModulesBuilder:Validation  Binary validation failed for go searched for go in following locations : ['/usr/local/go/bin/go'] which did not satisfy constraints for runtime: go1.x. Do you have go for runtime: go1.x on your PATH?```I do have go running as mentioned above and referenced in the picture.Does anyone have an idea of why go isn't on the path here?
58336;I should add that everything works fine manually from cli locally.
58337;For reference was able to fix by changing the FROM instruction to use golang:alpine image instead of the preset for the github actions lib I was using. There doesn't seem to be too much support for go from github actions.
58338;has anyone use sqlboiler?
58339;If you have multiple stores that interact with the database but ‚ÄòPerson‚Äô store depends on an ‚ÄòOptions‚Äô store would you instantiate options once and pass it everywhere? Or create a new options store every time you needed it?
58340;None
58341;can i go.mod `replace` with stdlib packages? it would be col
58342;don't think so no
58343;i don't like having encoding/json and jsoniterator in the same binary
58344;fork the library and change
58345;since logrus is a superset of `log` it would be seamless just to replace it right?
58346;ye but come on
58347;what library
58348;gofeed imports jsoniterator
58349;while something else uses encoding/json
58350;what thing
58351;https://godoc.org/github.com/mmcdole/gofeed
58352;seems like you can swap out the JSON unmarshaler
58353;so just do that
58354;how?
58355;https://godoc.org/github.com/mmcdole/gofeed#Parser .JSONTranslator
58356;huh wait
58357;don't think this is what i think it is
58358;will strill import it
58359;ohhhhh wtf
58360;why is it like this
58361;oh wtf
58362;this library is pain
58363;i'm thinking of ditching it and writing my own feed primitives
58364;https://github.com/mmcdole/gofeed/blob/master/json/parser.go#L15
58365;it has too many deps
58366;lol
58367;should i make a github issue for it
58368;unexported moment
58369;nah just fork and change
58370;but :robpike: hates dependencies
58371;fork and remove the deps
58372;i'd start from scratch
58373;and maybe add additional interfaces for read/unread feeds
58374;lol sure if you want
58375;what is the most popular go debugger..?
58376;dlv
58377;2nd most is gdb
58378;All the native debuggers that can load dwarf symbols work pretty well with just go executabkes
58379;^
58380;gdb also has some additional go scripts that add goroutines
58381;I use ida on windows it can load the dwarf symbols from pe files as well as load minidumps and it doesn't require you to reconstruct the stack by hand
58382;what about ghiddra?
58383;It seems like you could even expand it with scripts
58384;Have never tried it heard good things about x64dbg
58385;Okay i have a newbie question here. When do you actually use struct in go ?
58386;I mean ida is smart enough to just combine dwarf and pe and finds the go stacks as well. If you have to script all of that it might not be worth it.
58387;As opposed to what ?
58388;As opposed to standard variables i assume
58389;Structs seem to be a way to create some OOP within go
58390;gdb >
58391;structs allow you to make a type that is a composite of zero or more other types
58392;Does it make sense to see it as a class with no methods ?
58393;the only special ooplike thing that structs have but other types don't is embedding which automatically gives the struct the method set of the embedded field
58394;whether it has methods is a different concept you can define methods on structs just like any other named type in go
58395;@kharnox structs can have methods ü§î
58396;ü§î
58397;have you gone through the tour
58398;why do you need to create some OOP within Go
58399;I do not need to
58400;encapsulation polymorphism
58401;forcing other languages styles and conventions on Go is often pretty bad
58402;whats the third
58403;nah nah diamond go does have some oop
58404;the two i mentioned above are classic oop styles that you can and often should do in go
58405;Personally I find it easiest to just accept language concepts as what they are and not try to relate them to other concepts in other languages
58406;many assumptions are eliminated by not doing so
58407;yeah some but from what I've seen people usually try and force the otther youknowwhat OOP instead of the formal OOP that the definitions say
58408;this
58409;what mike said
58410;1000%
58411;hey guys kinda unrelated but what do you used for db mgmt with go. I used phpmyadmin for php and go since it works with mysql regardless
58412;You just need to figure out what the best design is by doing it you can't just break down the design into a couple standards and call it done.
58413;@Dane Zaddy that is completely unrelated to the language you use
58414;if youre on about phpmyadmin n co
58415;Like even something like `for`
58416;May look the same in python and go
58417;But may operate differently in many spaces
58418;Yeah you kind of try to do whats easy/accessable in the language itself right
58419;Like i never did coroutine/task kind of stuff but in go its just a keyword to launch one.
58420;That's what I am currently doing
58421;what am I doing wrong here? https://play.golang.org/p/IOCBouRO7s
58422;All your goroutines are sleeping
58423;Your channel is inbuffered
58424;So any write to it must be accompanied by a read
58425;But you can‚Äôt ready until all your writes are done
58426;Because of that wait
58427;So everything is asleep
58428;so just need to move the wait till after the read operation....
58429;that seems odd.. usually i wanna wait till they finished then use the data
58430;If you're going to use this to spawn potentially unlimited goroutines you might want to reconsider that üôÇ
58431;Not unlimited but pretty new at this reading up it...and evetually going to try to incorporate it into an existing program. Eventually I want to spawn N number of threads that are all making system network call and returning a the stdout response.
58432;Check out the go pipelines blog
58433;"if I do a read followed by a write is the order guaranteed via channels? ie. go dosomething();  response := < ch"
58434;k will do. Thanks @Sgt_Tailor
58435;The only guaranty is that the channel is first in first out. If you're concurrently writing to the channel from multiple routines there is no mechanism to determine the order in which those writes occur
58436;okay thanks for the Info.
58437;question
58438;do main packages in `internal/` get built and installed when run `go install ./...`?
58439;no you get an error message about an unknown command name inttall üôÇ
58440;so I\'ve got an app: `cmd/myapp/main.go` that I can successfully build with `go build ./cmd/myapp`. I\'ve moved some of the code into `internal/myapp/somepkg.go` but I\'m not sure how to import it into cmd/myapp. Would I be able to just do it with: `import ( ... myapp/somepkg ... )`?
58441;`go help packages` says the only thing `...` doesn't match is `vendor`
58442;bruh moment
58443;oh I didn't know ... was an actual thing for importing
58444;"@uplime you import internal packages just like any others; there are no relative imports in go"
58445;`...` is a thing for the go tool not for importing
58446;i was responding to diamond's question
58447;ah sorry my mistake
58448;@zephyrtronium is there an article or doc that goes over setting that up? I've never made my own package before
58449;"to be more precise with your question if your app\'s module is `github.com/uplime/foo/cmd/myapp` and the internal stuff is in `github.com/uplime/foo/internal/myapp` then you\'d `import github.com/uplime/foo/internal/myapp""`"
58450;what if I don't have a remote repo yet?
58451;(or its a private one)
58452;you can still define the module path with `go mod init github.com/uplime/foo` or w/e
58453;oh so even though I don't have a repo up on github I can still pretend like it exists?
58454;yes
58455;"i'm sure there is a proper reference but i don't know where to find it immediately; i do have an example in one of my own repos though"
58456;oh if you wouldn't mind sharing a link i'd love to look through it
58457;i learn best by example
58458;<https://github.com/zephyrtronium/iolang>
58459;thanks!
58460;`iolang.go` at the top level imports `internal` and also most of the test files in `internal` are in a separate package so they import it as well
58461;really though there just aren't any special rules for internal packages as long as you're working in a single module
58462;hmm
58463;am i the only one who want write go like that?```gofunc main(){ }```
58464;@zephyrtronium thanks i think im getting it
58465;yeah you're the only one üòî
58466;"@MiniApple you\'re not the only one; the relevant quote is along the lines of gofmt\'s style is no one\'s favorite but gofmt is everyone\'s favorite"
58467;lol
58468;sometimes it is better
58469;though that particular rule is in place because of a syntax rule in go itself not just because of gofmt
58470;hmm
58471;ok
58472;it's due to the reason we don't have to write semicolons at the end of each line
58473;what is gofmt
58474;it's a program that rewrites your source code to conform to a global style
58475;ok
58476;"there is a single style in go; no arguing over indentation or brace styles"
58477;hmm
58478;~~will go 2?~~
58479;will go 2 what
58480;provide more arguing?
58481;yes
58482;probably but it won't be over style
58483;ok
58484;is there something like `log.SetOutput` but sets it across all of the packages in my module?
58485;You'd have to define it everywhere or call something that defines it I believe
58486;damn ok
58487;thanks!
58488;Hiya all I want to keep a global int that can be reset by any of my goroutines. I know I can use a Mutex for concurrent access but I've also heard of sync/atomic package. May I ask about your thoughts? Answer here is a bit confusing https://stackoverflow.com/questions/47445344/isthereadifferenceingobetweenacounterusingatomicoperationsandoneus#:~:text=There%20is%20no%20difference%20in,relying%20on%20external%20locks%20to.
58489;atomic > mutex for a single int
58490;As long as the operations you perform on the atomic variable are all atomic it's fine
58491;"Dont do things like `if myatomic == 5 { something(); myatomic = 0 }`"
58492;Cus that ain't attomic even if you use Load and Store from sync.attomic
58493;A mutex is basically just```gofunc Lock(m Mutex) { for m != UNLOCKED {}  m = LOCKED}```
58494;Only that ain't attomic so its more like```gofunc Lock(m Mutex) { // Compare m to UNLOCKED and exchange it with LOCKED if equal for CompareExchange(m UNLOCKED LOCKED) == false {} // Try until you succed return}```
58495;(And it reality it also has a slow path where it stops wasting CPU resources when the mutex is locked for an extended time.)
58496;Mutexes don't really cost anything unless you're waiting for it to unlock all the time but cpus generally have some overhead on syncing the CPU around the memory barriers/atomics involved.
58497;```goMutex.Lock()Counter++Mutex.Unlock()```so even something like this can become slow if you have a system with a lot of cores doing lots of counting.
58498;Can somebody help me with this regex: https://play.golang.org/p/oT5L9rmbUpd
58499;I'm trying to replace all single line text within any line starting with ``
58500;and i tried all sorts of bullshit already üòÑ
58501;`(.)(?s)...`
58502;`\?(.).?\`
58503;`^(.).?\`
58504;Can you provide some sample inputs and expected outputs?
58505;"``` re := regexp.MustCompilePOSIX(""^(.).?$"")```"
58506;this behaves correctly but i can't figure out what it should have been with MustCompile()
58507;the input is in bytes[] the output is this is outside the comments
58508;in regex `.+` matches at least one char while `.` matches 0 or more
58509;`^` is beginning of string/line `$` is EOL
58510;the ? is optionality so `.?` is actually the same as `.`
58511;or `.+?` is the same as `.`
58512;and FML with nonposix match
58513;At this point I probably wouldn't even use a regex. The expression seems trivial to do without one. Parse input line by line. find first index of  and the rest of the line a comment
58514;Although I do get the appeal of doing it with a single magic regex
58515;Wait can't you just delete `.` from the string?
58516;basically what i'm trying to do üòÑ
58517;https://play.golang.org/p/zdNw2b_1i_u
58518;hmm
58519;That doesn't delete the newline but surely that can be removed as well
58520;it's more about the space before
58521;maybe i misunderstood that (?s) matches whitespace
58522;good enough
58523;"`re := regexp.MustCompile(""[ ]."")`"
58524;thanks man!
58525;\\s matches whitespace
58526;invalid escape sequence
58527;üôÇ
58528;./prog.go:13:29: unknown escape
58529;because you're using normal quotes
58530;fuck
58531;so `\\\\s`
58532;so do \\\\\\s or use \\`your regex\\`
58533;ok got it
58534;I prefer the backticks for string literals
58535;I guess i'll have to internalize that for regexps
58536;or ANSI colors
58537;üòÑ
58538;so how do you add a css class to a gtk widget?
58539;i have this before everything else is added into the window
58540;"```golang // Load the css file css err := gtk.CssProviderNew() if err != nil { log.Fatal(""Failed creating a new CSS provider: err) } err = css.LoadFromData(string(utils.ReadFile(CSSFile))) if err != nil { log.Fatal(""Failed loading file from data: err) }``` to load the css"
58541;"and then this ```golang // Set CSS class note err := tv.GetStyleContext() if err != nil { log.Fatal(""Failed getting style context: err) } note.AddClass(""note"")``` `tv` is a `TextView`"
58542;"and then obviously in my css file this ```css.note { backgroundcolor: white; color: green;}```"
58543;but it doesn't apply
58544;there's no errors regarding this in the terminal
58545;please is anyone familiar with checking if a proth number is a prime in golang using proth primality test?
58546;whats a proth number
58547;Oh huh
58548;I mean youd check the same way in any language
58549;None
58550;I mean there is <https://golang.org/pkg/math/big/#Int.ProbablyPrime> üòâ
58551;which is 100% accurate to 2^64 or something
58552;‚Ä¶but proth theorem wasn‚Äôt used there
58553;A quick search for `proth prime check implementation` yields plenty of results üôÇ
58554;"Do guys know how to escape an apostrophe `\'` in templates? I get this in the html `wouldn\\&#39;t ` and using `template.HTML(""wouldn\'t"")`"
58555;Check the html/template docs
58556;Or swap to text/template if you're not doing html
58557;Had a look at those earlier @Sgt_Tailor but no luck
58558;`template.HTMLEscapeString` doesnt work either
58559;Whats the issue with it being escaped
58560;It should show up correct in the browser
58561;It's for a meta description this is in chrome not sure if thats normal to have it unescaped?
58562;Escape string does the opposite of what you want
58563;Show code please
58564;Text/template doesn't escape
58565;"``` g.HTML(200 templates/home gin.H{ Global"": gin.H{ Url"": g.Request.URL, Host"": g.Request.Host, FullUrl"": https:// + g.Request.Host + g.FullPath(), }, MetaTitle"": template.HTML(""Test""), MetaDesc"": template.JSEscapeString(""wouldn\'t""), NotHome"": false, Signup"": true, })```"
58566;You're explicitly escaping the string...
58567;Sorry @Sgt_Tailor im not sure what you mean
58568;JS Escape string
58569;Well that escapes it
58570;Turning the  into something else
58571;If you don't want the text to be changed use the typed strings from the html/template package
58572;https://play.golang.org/p/2IExP1QJmoQ
58573;This is mentioned multiple times in the documentation and by me
58574;@Sgt_Tailor cheers
58575;I'm only reciting the documentation mentioned
58576;Sure I just looked at that earlier and couldnt make sense of it
58577;https://golang.org/pkg/html/template/#HDIntroduction explains what escaping is. https://golang.org/pkg/html/template/#hdrTyped_Strings explains how to prevent it
58578;Thanks @Sgt_Tailor
58579;Is it that important to follow the go project structure for a small project ?
58580;it's useful
58581;to stop you from trying to do nongo stuff in go
58582;What even is ‚Äúthe go project structure‚Äù?
58583;Flat is justice for small projects
58584;https://github.com/golangstandards/projectlayout this
58585;I mean that‚Äôs just like a collection of ‚Äúa bunch of people use this folder‚Äù
58586;There‚Äôs no like official project layout
58587;The only folder that is special is internal and vendor
58588;Maybe not official but common/best practices still exists I guess
58589;I don‚Äôt even think it‚Äôs that lol
58590;It‚Äôs more of ‚Äúhey this is a common folder name and this is what it‚Äôs used for‚Äù
58591;Like ‚Äúcmd‚Äù
58592;Not ‚Äúuse this folder names and conventions‚Äù
58593;nobody's going to come after you for not following that layout
58594;Anyways for small projects just throw everything into a single directory and when you start needing to separate things so so
58595;but it's ended up being on average the nicest to work with in go
58596;A lot of people look at that repo and think they need every one of those folders
58597;Like this is a JavaScript framework lol
58598;Yeah i think i'll stick to something minimal for now
58599;yeah
58600;start with a single flat package
58601;When I try to print a value I receive from a gRPC req golang prints it as `{{value}}=(MISSING)`. What does it mean?
58602;how are you printing it
58603;Using a logger
58604;"!go```gofmt.Printf(""%s"")```"
58605;None
58606;It means you're not logging correctly
58607;You need to supply something to replace `%s`
58608;"`fmt.Printf(""%s the thing"")`"
58609;The amount of parameters you passed the logger doesn't match the amount of variables in the format string
58610;`go vet` screams at you if you try this btw
58611;"You\'ll probably want a line break as well: `fmt.Printf(""%s\ ...)` (the `\`)"
58612;Hmm I see thank you. That was part of the problem and I figured out what else was wrong
58613;üëç
58614;pretty sure most loggers will add the newline for you
58615;but yeah watch out for that with printf
58616;If you have to call a bunch of the same function with different params
58617;Is it better or worse to call that function in a for loop
58618;better than what
58619;"what like```gof(""a 1)f(""b 2)f(""c 3)```etc"
58620;you can't cheat for loops
58621;everything is a for loop in the end
58622;No i mean because i already have all the functions i want to call in the stack
58623;Rather than saying
58624;My experience is that the loops prevent inlining and that the compiler is pretty poor at unrolling loops in comparison to something like clang or msvc.
58625;okay now for each param call this function with these parameters
58626;you can do like go build gcflags m .
58627;i think
58628;i tells you what it inlined and stuff
58629;> My experience is that the loops prevent inlining and that the compiler is pretty poor at unrolling loops in comparison to something like clang or msvc.@koen Really? That doesn't sound right.
58630;Oh wait no nevermind
58631;you cant pass a function to a param without executing it
58632;:p
58633;You can
58634;I'm confusing myself
58635;But you see what i mean
58636;Sounds like a use case for a method
58637;```gofunc callMe(callback func()) { callback()}func main() { callMe(func() { theCallYouActuallyWantToMake(withTheParams) })}```
58638;Lazy evaluation üòâ
58639;ahh
58640;That works
58641;so yeah is that better or worse than just a for loop
58642;with a TONNE
58643;it's different
58644;of calls
58645;the example above is one function call
58646;you're talking about many
58647;also
58648;@cpd ill isolate the case i had recently just a sec
58649;using a for loop doesn't change how functions work
58650;```foo(1)foo(2)foo(3)// vsfor { foo(i)}```
58651;the runtime isn't going to treat those functions any differently
58652;¬Ø\\_(„ÉÑ)_/¬Ø
58653;if the answer matters write a benchamrk
58654;if you can't be bothered to do that you don't actually have a performance problem
58655;does anyone know an api with a superb project layout? I'm struggling to conceptualize how I should layout my own üò¶
58656;?go layout
58657;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
58658;I think the answer matters without a benchmark if you're interested in what operations are actually taking place on the machine under the hood though.
58659;It's an esoteric interest however.
58660;Is that asking a different question?
58661;What motivates you to need to know that?
58662;if you care about that you can use godbolt
58663;or your own favorite disassembler
58664;^
58665;there's tools for this
58666;instead of just asking abstract questions about better
58667;under the hood means read the source code and use a dissassembler
58668;cause it's all there
58669;free to access
58670;you can also run the compiler with some flags so see what optimisations it decides to do
58671;That's interesting can you share that?
58672;https://golang.org/cmd/compile/
58673;if you provide `m` it will print the decisions
58674;god bless documentation
58675;Awesome. I've never noticed the `m` flag.
58676;"`go build gcflags=""m""` iirc"
58677;what would be the closest thing to object oriented programming in golang
58678;Do you know if `gcc` has something like that?
58679;composition
58680;I think gcc has something similar
58681;I'll go hunting man pages thanks.
58682;`foptinfoall` looks like it'd do the job.
58683;https://gcc.gnu.org/onlinedocs/gcc/DeveloperOptions.html
58684;Search optimization dumps
58685;https://gist.github.com/KCoen/7943a83cdcb4f24eb7403cab84804680
58686;allthough i guess the perf difference is mostly because one is branchless tbf allthough other compilers would unroll that loop
58687;Hi guys i have a basic question about pointers in goIs this happening because i'm giving temp reference?
58688;is there overwriting class functions/methods in golang
58689;The syntax is wrong. You can't take the address of a literal like that
58690;and if so is there child classes/types
58691;No
58692;how i can take address of function return value then?
58693;There is embedding. But you can't overwrite methods. The method sets are not allowed to overlap
58694;@PLYSHKA Not sure what you mena
58695;like i want to get pointer of value from float32Not sure exactly why i need that but still
58696;just curious
58697;_Actually_. The method set is allowed to overlap. In that case the method of the non embedded type gets priority
58698;more accurate example of what i want to doi think this doesn't make sense
58699;@tfyl https://play.golang.org/p/j7p6aJkA2AW
58700;https://golang.org/ref/spec#Address_operators
58701;```gotest1 := new(float64)test1 = 0.5```
58702;You can't take the address of a literal value
58703;thanks for info
58704;why `fmt.Println` and builin `println` behave differently?
58705;None
58706;you shouldnt ever use println really
58707;^
58708;you mean builtin println?
58709;"Println is useful for bootstrapping and debugging; it is not guaranteed to stay in the language."
58710;println only exists because it is used in places where you're not allowed to import fmt
58711;yes builtin println
58712;oh ok thanks
58713;Read the spec again. The methods of the embedded type are only promoted if there isn't already a method with the same identifier in the struct. <https://golang.org/ref/spec#Struct_types>
58714;That way you can overwrite methods of the embedded type
58715;coming from java c# c++ golang is quite different from these languages
58716;indeed
58717;dont try to shoehorn java/c# ideas into golang
58718;which is?
58719;for one inheritance :p
58720;for 2 loads of packages and deep hierarchies
58721;i've heard that in golang there's no OOP (or little of it)
58722;there is still oop
58723;There are only the good parts of oop lol
58724;theres polymorphism encapsulation
58725;Inheritance is not the good part üòõ
58726;what i can use to replace inheritance? or how can i avoid it
58727;composition
58728;Pretty much every good book on best practices in java says to avoid inheritance for composition anyways
58729;when i put one struct into another like that  does it mean that it internally copies all fields to parent?
58730;no theyre still nested
58731;but you can access them as if they werent
58732;(or is that methods only?)
58733;can i do post.author = anotherAuthor?
58734;it's just field right?
58735;Yes
58736;A promoted/embedded field to be specific
58737;Some cursed inheritance in Go: https://play.golang.org/p/3ME9xLVSewf
58738;Gross
58739;I think I‚Äôve legit used it like that once
58740;this looks complicated
58741;is `g` a param?
58742;It‚Äôs a receiver
58743;another new concept in go?
58744;Have you done the go tour
58745;?go tour
58746;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
58747;nope i think i need to do that
58748;This will answer all your questions and more
58749;The tour will explain everything
58750;Read it and then read it a hundred more times
58751;11/10 Go developers recommend it
58752;I still end up reading it like every day
58753;thanks
58754;?go learn
58755;TutorialEdge Golang Courses <https://tutorialedge.net/course/golang/>  SkippyGetting Started with go.dev <https://learn.go.dev/>  DoadA Tour of Go <https://tour.golang.org/welcome/1>  SkippyGophercises  coding exercises for budding gophers <https://gophercises.com/>  SkippyEffective Go <https://golang.org/doc/effective_go.html>  SkippyGo by Example <https://gobyexample.com/>  SkippyGopher Reading List <https://github.com/enocom/gopherreadinglist>  Strum355
58756;To this day I feel like one of the hardest things I run into when programming is project structure
58757;imo just do it a lot until you're used to it
58758;it's not a big deal for me anymore but it was
58759;Yeah I guess that's fair. My problem is that I can't for the life of me seem to figure out a nice way to structure a model / store type thing alongside the one service that uses those types
58760;You can define the struct in your domain and then you just have a service that handles operations on that type
58761;@Sgt_Tailor thanks
58762;forgot about that
58763;domain?
58764;You application domain
58765;?go layout
58766;Standard Package Layout <https://medium.com/@benbjohnson/standardpackagelayout7cdbc8391fc1>  Skippy
58767;When using the os package where does it store environment variables as it doesn't ask you to load in a file.
58768;os.Environ
58769;"the kernel gives the app the environment variables; env vars don't just come from any files"
58770;they're declared in a file which can be read
58771;Huh that structure actually seems pretty nice
58772;I was expecting the whole `/pkg` thing when i saw standard package layout
58773;The ABI places the env variables in memory. For system V it is above the argv variables üôÇ
58774;Is it better to load them from a file?
58775;using something like godotenv
58776;I'm creating a quick config file
58777;dotenv just loads environment variables from a file before starting an application afaik
58778;so you still read them from env as normal
58779;Ah alright
58780;nvm it does load from file
58781;https://github.com/joho/godotenv
58782;you specify the loading from file into env in your application
58783;I guess my main gripe with that is it seems like the root dir is acting as a `model` or `types` package which seems off to me but also good. I'm conflicted ¬Ø\\_(„ÉÑ)_/¬Ø
58784;not that these are just in addition to the already set env vars from your system
58785;whether it's better or not depends
58786;So will os.getenv get the variables from the .env file in the root of the project
58787;depends on what and where you're deploying the application to
58788;sometimes having the service manager/container managing env vars is better
58789;sometimes having a file is better
58790;It's just a few lines like maybe 9 max
58791;"```Starting program: /home/swiltink/code/asmadventures/cat/out/cat bananantaartBreakpoint 1 0x0000000000401000 in _start ()(gdb) x/s (char )($rsp + ((((char )$rsp) + 2)  8))0x7fffffffe73a: USER=swiltink""```"
58792;ENV variable in memory after application launch
58793;after the last ENV variable is a nil pointer
58794;None
58795;in case anybody was wondering how env variables work at the lowest level
58796;on windows this is different as the System V abi isn't used (or exists?) there
58797;```file ~/code/httphack/sneakerbot/home/swiltink/code/httphack/sneakerbot: ELF 64bit LSB executable x8664 version 1 (SYSV) dynamically linked interpreter /lib64/ldlinuxx8664.so.2 Go BuildID=F2tPNsSGa_pfQLKo3KMU/pHLwgQkekNWFbzqRQmEy/Ot_st4xveXybYxytp3Oi/un7Icasc70RK8WwfGEdn not stripped```Go does use it on unix
58798;ah ok
58799;"`Getenv` doesn\'t return anything even though i have a .env in my root directory specifying `PREFIX=""ABC""`"
58800;`.env` isn't read automatically
58801;I thought it loads up the one in the root directory
58802;You can use `source .env` to load those variables into your current environment
58803;Your shell might load that automatically when you first log in
58804;.env is just a convention for a file of environment variables that people explicitly choose to load manually at runtime using a library
58805;it doesn't have to do with: the shell beyond the fact that you can manually load it yourself the kernel beyond the fact that it lets you read the file
58806;Alright I'll just use godotenv so i can load files
58807;@_diamondburned_ since you seem to be here i'd like to ask a question
58808;already asked here but nobody answered
58809;my CSS isn't applying in gtk
58810;https://discord.com/channels/118456055842734083/118456055842734083/760071067376418856
58811;this was my original question
58812;check cchatgtk's source code
58813;where do you get your icons if i may ask? or you make them yourself
58814;from the system's icon theme
58815;through gtk3iconbrowser
58816;oh so they're not from an external source
58817;there's one thing that is
58818;it's the app logo
58819;that'si t
58820;"What are some alternatives to the strategy pattern I can consider or should I only consider the strategy pattern :THONK: ```gotype UpdateStrategy interface { apply(dao DAO memberId threadId string updates dynamo.TableAttributeValues) (status error)}type UpdateToLatest struct{}type UpdateIfLastMessageIDEqual struct{}```Is the implementation I\'m currently playing with I\'m not sure if I want to make the update functions themselves public (exposed from the package) so I think this is right (but I\'m not sure if these structs are the best implementation.Example ....```gofunc (u UpdateToLatest) apply(dao DAO memberId threadId string updates dynamo.TableAttributeValues) (status error) { h := dynamo.TableAttributeValue{ AttributeName: SchemaHashKey, AttributeValue: memberId, } c := dynamo.TableAttributeValue{ AttributeName: SchemaRangeKey, AttributeValue: threadId, } updates = append(updates dynamo.TableAttributeValue{ AttributeName: updatedAt"", AttributeValue: strconv.FormatInt(time.Now().UnixNano() 10), }) updated := status{} var ( res map[string]dynamodb.AttributeValue err error ) res err = dao.table.UpdateItem(nil h c updates...) if err != nil { return status{} err } err = dynamodbattribute.UnmarshalMap(res &updated) if err != nil { _ = errors.New(""failed to unmarshal updated item with:  + err.Error()) return status{} err } return updated err}```"
58821;i've seen a bit of your code and tbh i have no idea what i'm doing wrong
58822;@mmacheerpuppy if the structs are literally just the apply function you could just make them functions
58823;```gotype UpdateStrategy func(dao DAO memberId threadId string updates dynamo.TableAttributeValues) (status error)```
58824;then you can just change out functions that have that signature whever you need it
58825;not saying thats good or bad way of doing things
58826;but i have seen that way done a bit
58827;@r3velated try using a screenwide css
58828;also
58829;`GTK_DEBUG=interactive go run .`
58830;that'll pop up an inspectorlike window
58831;you can use that to inspect elements and confirm that they have the class
58832;and you can inject CSS there
58833;whats wrong with this
58834;"```goos.stat(""file"").st_size == 0```"
58835;well
58836;read the return of os.Stat
58837;copied from a 10 year old stack overflow post
58838;wtf 10 years old
58839;was Go 1 even a thing then?
58840;im not convinced this is Go
58841;üòê
58842;you sure this isnt python or smth lmao
58843;I think this is Go except when it was just like another variant of C
58844;os doesnt even have a stat function actually lol
58845;it does
58846;Stat not stat
58847;there's Lstat and Stat iirc
58848;Lstat follows symlinks iirc
58849;None
58850;lol
58851;nice
58852;ok im now convinced its python
58853;ok well
58854;@Zovaal you showed us python im sure
58855;ok well
58856;there is not a single post on stack overflow
58857;on the best way to check if a file is empty
58858;well you have your answer
58859;maybe check the documentation
58860;and there's only 1 way
58861;Go has very comprehensive documentation
58862;https://golang.org/pkg/os/#Stat
58863;bruh how could i not find that
58864;even ctrl f wasnt finding it
58865;me dumbo
58866;this is why youre not herder
58867;:kkk_hmm:
58868;rip
58869;idk
58870;> @mmacheerpuppy if the structs are literally just the apply function you could just make them functions@Madxmike yeah for sure i think in this case im just a bit concerned about exposing these to the package
58871;But i guess programmatically its no better
58872;like you could find a way around it anyway lole
58873;Actually i think in this case the encapsulation will work better
58874;hmm
58875;Thanks for the input
58876;i must think
58877;:think4d:
58878;i'd make a func type lol
58879;"```go if n _ := f.Read(make([]byte 1)); n == 0 { }```"
58880;it works
58881;but I feel like I just made Frankenstein
58882;wtf is that
58883;isn't this essentially `if true{}` ?
58884;checking if a file is empty
58885;this is my interpretation of the documentation
58886;üôÇ
58887;See `FileInfo.Size`
58888;And see what `(File).Stat` returns üôÇ
58889;üòê
58890;üòê
58891;..
58892;also you arnt checking the error there so works is a bit dubious at best
58893;n can be 0 if no bytes are read because something went wrong on the read
58894;> @r3velated try using a screenwide css@_diamondburned_ i think i did
58895;```golang screen _ := gdk.ScreenGetDefault() gtk.AddProviderForScreen(screen css 1)```
58896;"so it looks like this ```golang // Load the css file cssData := string(utils.ReadFile(CSSFile)) css err := gtk.CssProviderNew() if err != nil { log.Fatal(""Failed creating a new CSS provider: err) } if err := css.LoadFromData(cssData); err != nil { log.Fatal(""Failed loading file from data: err) } // Apply globally screen _ := gdk.ScreenGetDefault() gtk.AddProviderForScreen(screen css 1)```"
58897;i'll try inspector once i'm back in linux
58898;I'm trying a new project structure for microservices under an api. What do u think?```‚îú‚îÄ‚îÄ api_gateway‚îÇ ‚îî‚îÄ‚îÄ cmd‚îÇ ‚îî‚îÄ‚îÄ main.go‚îú‚îÄ‚îÄ builds‚îÇ ‚îú‚îÄ‚îÄ api_gateway‚îÇ ‚îú‚îÄ‚îÄ file_service‚îÇ ‚îî‚îÄ‚îÄ user_service‚îú‚îÄ‚îÄ Makefile‚îú‚îÄ‚îÄ README.md‚îî‚îÄ‚îÄ services ‚îú‚îÄ‚îÄ files ‚îÇ ‚îú‚îÄ‚îÄ cmd ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ main.go ‚îÇ ‚îú‚îÄ‚îÄ go.mod ‚îÇ ‚îú‚îÄ‚îÄ go.sum ‚îÇ ‚îî‚îÄ‚îÄ pkg ‚îÇ ‚îú‚îÄ‚îÄ requests ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ requests.go ‚îÇ ‚îú‚îÄ‚îÄ responses ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ responses.go ‚îÇ ‚îú‚îÄ‚îÄ service ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ service.go ‚îÇ ‚îî‚îÄ‚îÄ storage ‚îÇ ‚îú‚îÄ‚îÄ connect_and_init.go ‚îÇ ‚îî‚îÄ‚îÄ models.go ‚îî‚îÄ‚îÄ users ‚îú‚îÄ‚îÄ cmd ‚îÇ ‚îî‚îÄ‚îÄ main.go ‚îú‚îÄ‚îÄ go.mod ‚îú‚îÄ‚îÄ go.sum ‚îî‚îÄ‚îÄ pkg ‚îú‚îÄ‚îÄ requests ‚îÇ ‚îî‚îÄ‚îÄ requests.go ‚îú‚îÄ‚îÄ responses ‚îÇ ‚îî‚îÄ‚îÄ responses.go ‚îú‚îÄ‚îÄ service ‚îÇ ‚îî‚îÄ‚îÄ service.go ‚îî‚îÄ‚îÄ storage ‚îú‚îÄ‚îÄ connect_and_init.go ‚îî‚îÄ‚îÄ models.go```
58899;src here xdhttps://github.com/massenger/backend
58900;feels a bit extra on the sub packages
58901;if the entire service is one domain
58902;and like 10 files
58903;just make it flat
58904;```users ‚îú‚îÄ‚îÄ cmd ‚îÇ ‚îî‚îÄ‚îÄ main.go ‚îú‚îÄ‚îÄ go.mod ‚îú‚îÄ‚îÄ go.sum ‚îú‚îÄ‚îÄ requests.go ‚îú‚îÄ‚îÄ responses.go ‚îú‚îÄ‚îÄ service.go ‚îú‚îÄ‚îÄ connect_and_init.go ‚îú‚îÄ‚îÄ models.go```
58905;and then partition it our as your domain increases for the service
58906;ty for the help üôÇ
58907;"```go STREAMDB := STREAMS"" if n err := os.Stat(STREAMDB); os.IsNotExist(err) || n.Size() == 0 {}```"
58908;oh ya thx @Madxmike
58909;idk if I'll change it yet tho but ig that's much more practical
58910;should do `err != nil || n.Size() == 0`
58911;so what if err is something other than ErrNotExist
58912;yeah
58913;> so what if err is something other than ErrNotExistsegfault lol
58914;"also idk about anyone else by outside of like `ok` things i really dislike the `if <expression>; <check>` syntax"
58915;especially with an error check like above
58916;lol I do this almost every time I could
58917;I only do it on the same line when it is a simple nil check
58918;"or even `if function(); notAReturnBool {`"
58919;"`if thing.Update(); thing.Ok() {`"
58920;"```if err := functionThatReturnsAnError(); err != nil { fmt.Errorf(""KAPOT: %w err)}```"
58921;if it is anything more complicated than that I just move it down
58922;mhmm
58923;i sometimes wish you could just implicit cast to bool
58924;and be like if err { panic(0) }
58925;eww
58926;implicit casting is a 3/10 for me
58927;"Say do you guys have admin rights at work? I\'m an intern in the software department. There are only 2 devs and neither one of them has admin rights. They can\'t even change their env vars. They have no WLS2 they don\'t know what Docker is and when I bring up golang they go into this I refuse to learn anything new learn python and install pycharm over vscode state"". I\'m starting to get upset and I\'m not sure if it\'s just me... but I don\'t think developing without admin rights works in the long run. If I want to try something new I have to make an appointment with ICT. That\'s why I bring my private laptop everyday so I can do what I want :C"
58928;> no WSL2Windows?
58929;RIP
58930;rip
58931;Yeah Windows
58932;im suprised they have that so locked down but allow you to bring your laptop and connect
58933;what kinda company is this
58934;Im in the guest network. I have to move files via usb stick
58935;just use your laptop ig lol
58936;bank?
58937;oof
58938;wire up a USB cable
58939;how long have you been here
58940;host a file share LAN over it
58941;#offtopic though tbh
58942;Almost 4 months. They develop an interlocking system so train stuff.
58943;> Yes this is possible but it is not possible by cutting two USB cables with USBA connectors (what is normally going into the USB on your motherboard) and cross connecting the data cables. If you connect the USB power lines on such a self made cable you are likely to end up frying your onboard USB handling chip. Don't try this at home!lol
58944;Does anyone here use vimgo?
58945;I use vim + ALE
58946;Vim is too nerdy for me
58947;Is it normal for golint to crash everytime I save the file and it has compilation errors?
58948;I only use it to change config files when I'm connected via ssh
58949;golintci?
58950;can't help there i don't use it sry
58951;Like I start writing code then `:w` if the code has a compiletime issue go lint stops working until I quit and restart vim...
58952;every time
58953;I might end up turning it off and running it manually when I feel like it.
58954;Yo what's ALE?
58955;Looks like I could replace go lint with ALE (partially).
58956;ALE is just a generic languageserverformatter thing
58957;but it supports gopls and goimports
58958;hmm
58959;say i have a field of a struct
58960;like an item in an rss feed
58961;how would i attach it to its parent struct?
58962;do i have to reinvent the data structure?
58963;so that they point back?
58964;what?
58965;e.g. i return an item of a feed and the user wants to know what feed it comes from
58966;Hi I need a small keyvalue in memory db what would you guys recommend
58967;`map` üòõ
58968;None
58969;:atpshh:
58970;HAGRID
58971;nitpick: wouldn't use the word char kinda confusable with computer stuff
58972;even though go uses rune
58973;my whole code is about characters
58974;p sure this isn't the char you think it is
58975;I was using waifu but it's not better
58976;lol use waifu
58977;ik
58978;that map is fine
58979;it's not threadsafe but it's fine
58980;you could easily add a mutex
58981;I guess I could because I have very low chance of concurrent access
58982;doesn't mean 0
58983;well test it with `race`
58984;once someone claims the character I just retrieve the info and delete it
58985;It's not a problem if it's empty
58986;what if two people claim the character at the same time
58987;it's discord message order
58988;so at the same time isn't really possible
58989;the whole map is racy not just a map entry
58990;but I guess that could happen
58991;and disgord spawns sets of handlers per event in a goroutine p sure
58992;so it will happen
58993;idk I'm switching to arikawa
58994;but yeah I could keep it a map and add a mutex
58995;maybe easier than using a database
58996;much easier
58997;it's hardly persistent right?
58998;it's not persistent yeah
58999;well the map is
59000;but the values aren't
59001;where do you source the waifus
59002;how do you even phrase that reer
59003;source ? I query an API
59004;arikawa spawns each handler in its own goroutine so you'd have the same issue anw
59005;oh ok
59006;is there like a built in point struct in go?
59007;like just a simple struct for x and y
59008;yeah in image
59009;https://godoc.org/image#Point
59010;So go has no enums?
59011;Why second and third slice are `3 5` instead of `2 3 5`and `5` instead of `3 5 7 11 13` ?
59012;enums what for?
59013;@PLYSHKA because you changed the slice
59014;Oh right
59015;i didn't notice that
59016;Array of enums as datatype for postgres. This is gonna be pain I just know it
59017;I just don't do SQL enums
59018;you can do it w/ Go enums
59019;I just see it as needless work
59020;I've never worked anywhere that used SQL enums tbh
59021;I'd use an SQL int for enums
59022;My college wants enums for the database. Can't give him the satisfaction when I have to admit that something is harder in go than it is in Python. He's already shit talking go üò¢
59023;Yeah why not ints
59024;Fk enums
59025;does go have something like spring/asp?
59026;@Dylan you can still do it lol
59027;and it's kind of shortsighted if he talks trash about Go just because it takes more work to add enums into pgsql than Python
59028;because
59029;1. the fact taht you're asking this means you're not using ORM
59030;he's probably using one for Python
59031;2. longer != harder and longer != bad
59032;what aspects of spring are you looking for
59033;3. sql enums don't help much if you only interact w/ the db in your go code
59034;go treats enums about the same as it treats any other integer types
59035;in your code you'd have named const enums so knowing which enum isn't an issue
59036;I really don't see the point of database enums if the purpose is to handle the db from a programming language that can abstract that.
59037;If you're in the database all the time doing straight queries etc I guess that would make sense though.
59038;^
59039;can someone help me stop getting this with the discord api?
59040;kl
59041;i jsut want to fetch new refresh and access tokens
59042;but why am i getting google page?
59043;had to use post req
59044;can math.Pow be used with integers in golang?
59045;Not directly
59046;oh how please?
59047;i was bored in my cs class so i decided to check if the golang playground was not blocked and it wasn't and then the exact same day we were using chromebooks in physics and it was blocked
59048;so strict
59049;Cast the ints to floats lol
59050;"Hi all! I\'m reading <https://www.sohamkamani.com/blog/2017/10/18/parsingjsoningolang/> for dumping JSON into a map but I\'m a bit lost on the following snippet ```gobirdJson := `{""birds"":{""pigeon"":""likes to perch on rocks"",""eagle"":""bird of prey""},""animals"":""none""}`var result map[string]interface{}json.Unmarshal([]byte(birdJson) &result)// The object stored in the birds key is also stored as // a map[string]interface{} type and its type is asserted from// the interface{} typebirds := result[""birds""].(map[string]interface{})for key value := range birds { // Each value is an interface{} type that is type asserted as a string fmt.Println(key value.(string))}``` Specifically what the `.` operator does in `result[""birds""].(map[string]interface{})` and `value.(string)`"
59051;Type assertion
59052;https://tour.golang.org/methods/15
59053;ahhh
59054;thanks folks i'll go through the tour again
59055;anyone got experience with cqrs and event sourcing? ü§î lets say you have an http endpoint which accepts commands serialized as json. this endpoint is used by a simple html frontend. it just creates a command based on input and sends it off.now how does the backend handle this? does it read the command push it into a queue for processing and return immediately?does it try to execute the command leaving the frontend waiting for the response?in the former you\'d need some kind of x command failed event
59056;There isn't really any right answer and to an extent probably depends on how long you expect commands to take. In the former case you'd need some OOB way to get the results of a command but leaving an HTTP request sitting for minutes probably isn't reasonable. Seconds? Maybe sure.
59057;There's nothing in HTTP itself that stops you from having it sit and spin but you don't control the entire path‚Äîintermediate routers and clients often have timeouts in the order of tens of seconds.
59058;also are you going to use only HTML or with JS as well?
59059;I expect commands to finish rather quickly in most cases. Mostly Created and Set events.> also are you going to use only HTML or with JS as well?HTML+JS.
59060;oh
59061;if it's within seconds I'd use HTTP
59062;Hello everyone what is the best way to process a really large api response?
59063;i mean
59064;the normal way
59065;to begin with
59066;any alternatives you'd take would be defined by the actual problem you're having
59067;I have a really big api response and unmarshalling the response is only retuning 63 elements out of 3k
59068;hm
59069;it sounds like pagination or something
59070;No pagination üò¶
59071;i don't think i'd return three thousand elements of anything in a single response
59072;I'm using a service called Akamai so it returns all the elements in a single GET
59073;well
59074;what i'm saying is
59075;akamai again ü•¥
59076;if the response was too large you'd see one of these things happen1) your application will OOM crash due to memory usage2) you'll get an error from Go saying it can't parse the document
59077;It sounds like Go is successfully parsing the document
59078;So it fits within memory and you have a complete payload
59079;Therefore the response probably just contains fewer results than you think it should.
59080;but while debugging I only see 63 üôÉ
59081;yes
59082;that's what you actually have
59083;and you're assuming you should have more
59084;so
59085;why do you think that
59086;Have you tried decoding this response using another tool like `jq`?
59087;and confirming how many elements are returned?
59088;because postman throws me around 3k and i also confirmed it with the akamai dashboard
59089;okay cool
59090;and I'm hitting the same endpoint
59091;yeah
59092;i just had to make sure that you knew for sure that was how it was
59093;okay so post your code
59094;you have passed level one of the wizard gauntlet
59095;"`func getLogSources(cpCode int) []model.LogSourceElement { fmt.Printf(""Performing GET"") config err := edgegrid.Init("".edgerc default"") if err != nil { log.Fatal(""Can\'t initiate the edgegrid client"") } req err := client.NewRequest(config GET /ldsapi/v3/logsources nil) q := req.URL.Query() q.Add(""accountSwitchKey XXXXXXXX"") req.URL.RawQuery = q.Encode() if err != nil { log.Fatal(""An error ocurred when creating the request"") } resp err := client.Do(config req) if err != nil { log.Fatal(""An error ocurred on the response"") } defer resp.Body.Close() byt err := ioutil.ReadAll(resp.Body) // ioutil.WriteFile(""test byt 0666) if err != nil { log.Fatal(""An error ocurred when reading the response body"") } logSources := []model.LogSourceElement{} err = json.Unmarshal(byt &logSources) if err != nil { log.Fatal(""An error ocurred when unmarshal"") } return logSources}`"
59096;:thonk:
59097;This is better: https://play.golang.org/p/cHaDWgcBJoC
59098;okay so
59099;i'd write the response to a file
59100;this probably will change nothing but try with `err := json.NewDecoder(resp.Body).Decode(&logSources)`
59101;instead of decoding it in go
59102;just short circuit the whole thing and write the response to a file
59103;and inspect it with jq
59104;Same issue @_diamondburned_
59105;I wrote the response body to a txt and I see all of the elements took the response and paste in a json formatter and compare both of the lengths
59106;let me check the jq library that you mentioned
59107;+1 jq
59108;so this is circling back to what i was saying originally
59109;the json response isn't broken
59110;make it copy the body to stdout
59111;go isn't encountering any errors
59112;you're not killing your memory
59113;idk how to get the length of stuff in jq xd
59114;this response has fewer elements than you think it should
59115;No
59116;I'm hitting the exact same endpoint on postman and in my code it has fewer elements here
59117;yes that's what i said
59118;the response has fewer elements in it than you think it should
59119;idk why akamai is behaving differently
59120;never used it
59121;Maybe it is the header order :KEKW:
59122;:ohno:
59123;Time to plug my blog when that is the case
59124;i'm not saying you're wrong about the request not having what you want in it but this isn't like
59125;go fucking up
59126;Does the server maybe return new line sepetated json ?
59127;https://jsonlines.org/
59128;U know one of these boys
59129;Gotta like make a json decoder and decode untill ejd of the body
59130;It's pretty common for large responses
59131;Unmarshal would've thrown an error if that were the case
59132;that's what i'm sayinnnnnn
59133;no error no crash
59134;the payload is correct
59135;something about the request is wrong/different
59136;PROXY server/wireshark to dump the request is the easiest
59137;Compare postman/whatever works to what your go application does
59138;Whatever the difference is there is most likely causing this
59139;all go sql abstractions are pain and suffering :'(
59140;i want to like sqlboiler but it's just just slightly wonky in such a way that it's offputting
59141;sqlc
59142;:)
59143;not even sqlc
59144;i just use sqlx
59145;not sure how I could improve sqlx beyond abstracting rows into slicescan
59146;oh
59147;that's (DB).Select
59148;welp
59149;:kms:
59150;sqlc weird
59151;> all go sql abstractions are pain and suffering :'(@weenie have you tried ent?
59152;yes
59153;it doesn't support composite primary keys
59154;Yikes
59155;Pretty cringe
59156;i just gave sqlc another try but it explodes on left joins
59157;because it decides that all columns are not nullable
59158;i guess i could just coalesce() everything but that's kind of painful in its own right
59159;also fun fact create function makes sqlc crash
59160;Anyone familiar with beego? Will this `One` method of QuerySeter return a random result? Or will it always be the first row found? https://beego.me/docs/mvc/model/query.md#one
59161;I'm querying for a set of devices from a database based on a couple filter parameters to select return the client a single one but I'd like to randomize the result given the same query to make sure one device isn't used more than another
59162;Nope. If you created the connection you're responsible for closing it.
59163;Eh i think network connections are reclaimed by the OS
59164;The file descriptor is still there and it'll be in whatever state you left it.
59165;File descriptors are reclaimed by the OS : )
59166;p sure they're only reclaimed when the app exits or when you ask it to
59167;Not when the runtime is epolling its state. :p
59168;or when the GC's Finalizer happens to pick it up
59169;ok unironically https://github.com/gojet/jet is very good
59170;Oh fug
59171;I read it as program exits
59172;Mb
59173;Yeah once the program exits the OS will reclaim it I'm guessing that's not really the usecase they were asking about though.
59174;also if you don't close fds for too long you won't be able to open more
59175;^
59176;Time to sleep lolmao
59177;it'll fail w/ too many open fds error
59178;ehhhhh
59179;idk about that
59180;yeah np
59181;The word model triggers diamomd
59182;it generates structs from your db
59183;and then you can use those structs i na type safe way
59184;"```govar dest struct { model.Users AvatarMedium model.Media `alias:""avatar_medium.""` BannerMedium model.Media `alias:""banner_medium.""`}if err := SELECT( Users.AllColumns, Media.AS(""avatar_medium"").AllColumns, Media.AS(""banner_medium"").AllColumns,). FROM( Users. LEFT_JOIN(Media.AS(""avatar_medium"") Media.AS(""avatar_medium"").ID.EQ(Users.AvatarMediumID)). LEFT_JOIN(Media.AS(""banner_medium"") Media.AS(""banner_medium"").ID.EQ(Users.BannerMediumID)), ). WHERE(Users.ID.EQ(Int(id))). LIMIT(1). QueryContext(params.HTTPRequest.Context() env.DB &dest); err != nil { if errors.Is(err qrm.ErrNoRows) { return ErrNotFound } return err}```"
59185;it's not so bad
59186;you can mostly write sql
59187;and then you don't have to deal with the struct mapping yourself + it's automatically generated from your db
59188;it's a lot like jooq actually
59189;i really like it :  D
59190;> and then you don't have to deal with the struct mapping yourselfwhy not use sqlx
59191;that looks very weird(hard to read)
59192;you should use gorm or you will be opening up italian restaurant soon
59193;because i can generate the structs from the database
59194;rather than having to keep both in sync
59195;also sqlx is not really type safe
59196;if i know the structure of my database why do i gotta mess around with sql strings that i can make typos in yknow
59197;write tests to guarantee type safety
59198;but i can just get the compiler to do it for me why would i put in more work hh
59199;Hi everyone thanks for having me here..I am a complete newbie in go...:( please don't hate..yet..:) I am trying to build a REST API and it is working fine for the basics but how can I change the address from locahost:8080 to something like http://example.com..? Thanks
59200;you can either proxy in front with nginx or bind the go server directly on port 80 but you have to be root
59201;so probably the nginx route is safer
59202;the first step would be buying a domain
59203;and then you'd set the domain's A record to point to your server's IP address
59204;and then you'd do what weenie said
59205;because a test covers more than just struct type safety
59206;thank you for teh qick answers..this is not meant to be a full blown app..jsut a demo..but it needs to show a different url to localhost..so presumably nginx would be the way to go then...
59207;i mean if you want to have anything but `localhost` or an ip address you'd still need a domain you can change the dns for
59208;I am geting this url from the yaml file for the API and it just simply says server url: and then http://bla bla bla (this doesn't actually resolve to any real life server)..when I implement this on a different platform I can then address the api via http//:bla bla bla/users...just in go I only get to localhost...
59209;sorry if these are trivial questions..
59210;it does but then why are we writing go at all instead of python? type safety is a sliding scale and the more you can ensure at compile time the less work you have for yourself
59211;if you can be told what you are writing is wrong before you even run it in more cases is that not a net advantage? you can go too far in one direction and make writing code be extremely painful but i don't see how replacing string queries with a query builder is so onerous
59212;and the amount of time you spend writing boilerplate for structs and queries you could spend doing... not that right?
59213;because I don't care enough for SQL type safety w/ Go to want to have that at compile time
59214;if that's what I really want I'd use Rust
59215;for most of my serious SQL projects I'd always have tests over my database code and those would catch SQL type safety errors when I want it to
59216;I've always preferred just writing real sql
59217;I'd guess a queue of workers would be more scaleable
59218;Oh I misread
59219;I'd do the first
59220;i think writing plain sql is fun up until the point you have written your 10th inner join in the users table
59221;I don't like the idea of a bunch of workers essentially constantly asking if there's anything to do vs a router of some sort just handing it out when it comes in
59222;But really they're likely very similar depending on implementation. How do the workers get told of new work?
59223;I could see using channels maybe
59224;Sounds pretty good to me
59225;Is it okay to ask a little question rn?
59226;@weenie yeah I understand and I often an writing reports. But I enjoy being able to just copy the sql out of one app in one language and use it anywhere else like another language or sql studio or whatever.
59227;totally writing queries by hand for olapstyle stuff is great! but for oltpstyle code it often feels repetitive
59228;Using any kind of thing that locks you into an app or language makes that hard. So switching reporting platforms or something become a big hassle. So that's why I tend to prefer just plain old sql
59229;I used panic for a runtime error but it didn't halted the process as I thought. It dumped the stack as well as the message I wrote after doing ctrl + c
59230;Was the panic inside a goroutine?
59231;i think the fortunate part about oltp stuff is that it's mostly braindead queries to write anyway so porting is usually not too painful
59232;> Was the panic inside a goroutine?@Skippy It is why?
59233;Yeah get user save user etc.
59234;@Pinecone panic should ha e
59235;Yeah
59236;Oh so it just kills the thread that runs the goroutine
59237;Yup
59238;Though and it's pedantic but go goroutines are not exactly threads.
59239;So using a channel would work in my code
59240;I donno
59241;> Though and it's pedantic but go goroutines are not exactly threads.@Skippy I've just looked at the differences thanks.
59242;if I have to write 10 inner joins then I may have to just use something else tbh
59243;a single join has been a huge turn off for me
59244;I've found myself writing some real monsters of sql lately.
59245;Somehow I doubt a orm would even handle them.
59246;I'd be happy to just gave a couple easy joins to a user table.
59247;I've got one waiting for me tommorow morning when I get to the office.
59248;Maybe I can call in sick.
59249;@Pinecone tell us about your code and what you're trying to do
59250;do sql queries write themselves for you?
59251;I'd love to have that
59252;Maybe diamond can help me write tomorrow's sql
59253;no i meant like an inner join across 10 different queries
59254;like select group and join on the group owner select post and join on the post author select etc and it's always the same 10 fields i want from the user table every time
59255;oh
59256;I'd just loop + Sprintf
59257;lol that one time when I needed to reuse WHEREs I just used a string builder
59258;I made a small argument parser for my discordgo bot with usage string format. When I initialize a command I\'m parsing the usage string so I can actually call specified arguments with options. Since it\'ll only run once when bot process started and it\'s critical for a command to run I thought that I could panic it so it throws an error then kills it. @Skippy
59259;Joins aren't that bad... Today we found nested selects at work...Like `select ... from (select ... from ... where something = (select ...)) where (select from ...)`
59260;huh FROM SELECT or WHERE SELECT?
59261;former would be such a weird use case
59262;I‚Äôve done it.
59263;:monkaS:
59264;yeah it's probably not the best but it works
59265;Btw there were joins sprinkled in there for good measure...
59266;@Pinecone ahh.. you could use os.exit to force it to close the program entirely. Or have that code so it can return an err up stream back to the main fu c where it can exit the app more gracefully
59267;Makes sense.
59268;Oh...
59269;I've just realized I called the function in wrong place... I could've avoided running inside goroutine...
59270;nested selects are usually fine and the optimizer usually does a good job with it
59271;(usually)
59272;Yeah these werent really lol. The Elastic Search cluster failed over to the DB and these queries caused the DB to fall over too...
59273;bruh
59274;if a function has too many parameters is make some of them to be a struct a good idea ?
59275;"What is too many parameters""?"
59276;hmm like 7 or 8 parameters might be my preference but I don't want the definition of the function looks this long
59277;I guess my first question is why do you need that many parameters? are you trying to do too many things in one function? But 78 isn't too bad imo
59278;are they optional?
59279;if yes struct
59280;not optional but what if several functions all have these identical parameters ?
59281;then sure struct
59282;or method even
59283;```go select { case s.outgoingMessageChan < message: default: return nil }```
59284;what hapens if s.outgoingMessageChan blocks
59285;nil is returned
59286;```gofunc (s server) Write(connID int payload []byte) error { var seqNum int checkSum := uint16(ByteArray2Checksum(payload)) // make message and send to outgoingMessageChan message := NewData(connID seqNum len(payload) payload checkSum) go func() { s.outgoingMessageChan < message }() return nil}```
59287;how is this
59288;different from
59289;"```gofunc (s server) Write(connID int payload []byte) error { var seqNum int checkSum := uint16(ByteArray2Checksum(payload)) // make message and send to outgoingMessageChan message := NewData(connID seqNum len(payload) payload checkSum) // log.Println(""Before"") // log.Println(message MMMMMMMMMMMMMM"") // s.clientMap[connID].outgoingMessageChan select { case s.outgoingMessageChan < message: default: return nil } // s.clientMap[connID].outgoingMessageChan <message // log.Println(""After"") return nil}```"
59290;first one will try and send the message forever
59291;second one bails out asap
59292;got it
59293;also
59294;@_diamondburned_
59295;if i use the same thing with a channel of size 1
59296;it doesnt time out
59297;why
59298;probably because the consumers are fast enough
59299;Because then the channel will buffer the message... If you try to send 2 it will still timeout
59300;> Because then the channel will buffer the message... If you try to send 2 it will still timeout@Dusty.P yeah thats what i thought
59301;how do i fix this
59302;any idea
59303;go func() { s.outgoingMessageChan < message }()
59304;this is a pretty bad idea isnt it?
59305;You have something read from the channel while you are sending to it
59306;its like a memory leak
59307;> first one will try and send the message forever@_diamondburned_ if i return `nil` aftr it
59308;?
59309;i mean after pushing in the channel i return it the go routine will die after that right
59310;The goroutine will die either when it successfully sends the message to the channel or the program exits whichever comes first.
59311;Or it panics when the channel is closed üòõ
59312;Yeah or that
59313;How long does it typically take for a beginner to become fully operational in go? Like making advanced applications.
59314;Depends on yoi
59315;Month maybe? More?
59316;I have some what mastered the syntax in a couple of days.. I am in that weird beginner zone though.
59317;Gotta put in the time to use Go
59318;So would you say the main use case that it is for Dev Ops and Web development?
59319;Devops is a badly used term
59320;Go can be used for most things. Things you shouldn't use it for: javascript in browser replacement desktop applications
59321;Knock yourself out after that works for the rest
59322;Ok thanks will get started on some projects I hope you don't mind I annoy you with questions for the next couple of weeks @Str≈ìm ?
59323;This server is always available üëç
59324;I'm trying to pick a GUI library and I've narrowed my options down to Gio and gi. Anyone have any recommendations?
59325;I've heard pretty good things about gio
59326;they both look like good options tho I'd try them both out and see what works better
59327;@rh12503 use gtk bindings?
59328;> Go can be used for most things. Things you shouldn't use it for: javascript in browser replacement desktop applications@Str≈ìm what would you use for desktop applications?
59329;gtk maybe? idk i dont do desktop applications
59330;can you skin elements in GTK?
59331;With css I think
59332;Skin? You mean theming?
59333;Gtk does include css but not all properties are available
59334;@Str≈ìm with what language
59335;@rh12503 although the docs for gotk3 is pretty useless. You'll have to use those from gnome.org
59336;@_diamondburned_ is the resident gtk with go expert
59337;he probably recommends to just not do gui with go
59338;Yeah I think I know why
59339;GUIs are the hobgoblins of little minds
59340;or something
59341;Wut lol
59342;a paraphrase of Ralph Waldo Emerson https://www.goodreads.com/quotes/353571afoolishconsistencyisthehobgoblinoflittlemindsadored
59343;> A foolish consistency is the hobgoblin of little minds
59344;if im using os.openfile
59345;to open a file to append to
59346;what do i use to write a json object to it line by line
59347;you wouldn't
59348;json doesn't know about lines
59349;json has documents
59350;and documents contain zeroormore arrays objects etc etc
59351;although
59352;now that i look
59353;https://golang.org/pkg/encoding/json/#Indent
59354;there is a helper function to write prettyprinted JSON to a writer!
59355;alirght
59356;figured that out
59357;thank u
59358;godocs r litty
59359;```gosendForWriting := priceAndTime{price:currentPrice,time:quickTime,Condition:use.Condition}```
59360;```gotype priceAndTime struct{ price float64 time string Condition []int}```
59361;"is there any reason for that to be in the file for condition on;y"
59362;its just showing up as
59363;{condition: whatever the condiition is}
59364;unexported price and time
59365;oh
59366;cpas
59367;You need to export the properties for it to be serialized
59368;caps
59369;If you're talking about marshaling it
59370;whoops
59371;yea
59372;i am
59373;Hi! Is it safe?```golangbody err = ioutil.ReadAll(cm.NewDecoder().Reader(bytes.NewReader(body)))```Or I must do ```gonewbody err := ...body = newbody```?
59374;> @rh12503 although the docs for gotk3 is pretty useless. You'll have to use those from gnome.org@r3velated I'm coming from JavaFX so I'm starting to think GUI programming with Go could be a bit challenging
59375;@–ì–ò–ö what does .Reader return
59376;Thanx
59377;that was a question
59378;Oh my english ^) I will check.
59379;can I pass a pointer to multiple goroutines? I know this is unsafe just asking
59380;sure
59381;ty
59382;it's probably a bad idea
59383;but you can
59384;To add for reading it's absolutely fine as long as the data is never changed. But if the data changes at any point or if one goroutine wants to change it use a mutex lock.
59385;mutex locks? thought go only had channels or whatever
59386;`sync`
59387;^ go has mutex (and rwmutex) in the sync package
59388;doesn't mutex use channels internally?
59389;other way
59390;Not really?
59391;channels use mutexes
59392;oh huh
59393;and mutexes use
59394;`atomic`
59395;it's all atomics
59396;at the bottom
59397;I see
59398;And `atomic` uses assembly
59399;Which is out of scope
59400;atomic uses magic :P
59401;:kek:
59402;> @r3velated I'm coming from JavaFX so I'm starting to think GUI programming with Go could be a bit challenging@rh12503 well for me it is
59403;with my limited knowledge in programming i think it not having OOP like for instance python makes it more difficult
59404;once you learn how to separate inheritance ( one specific subtrait of OOP ) from the rest of the features ( encapsulation polymorphism ) it becomes less onerous
59405;cause go has 3/4 features that define OOP
59406;just no inheritance
59407;objects are just types
59408;i wanted to create my notetaking app using a TUI like tview but i noticed it isn't much easier
59409;well
59410;that's a function of GUI libraries being awful
59411;yeah i didn't learn that
59412;they're all like that
59413;it's a universal problem
59414;in every language
59415;there's no pleasant way to make a GUI
59416;lol
59417;use webview
59418;¬Ø\\_(„ÉÑ)_/¬Ø
59419;yeah that's my advice
59420;just write a webpage
59421;get universal compatibility
59422;write once view everywhere
59423;though i struggle with making it responsive
59424;which is why i gave up on that idea
59425;and presumably it uses more memory
59426;Hi everyone  I'm working with integrating Go with Python and trying to return a struct containing an int and a pointer to a C array. Unfortunately I'm running into segementation fault issues likely from the Go garbage collector. I'm trying to build a C array but I had to make goslice to the C array in order to assign it which I believe is triggering garbage collection. If there is anyone experienced in this field help would be appreciated. Thanks!
59427;(and unrelated to my previous comment) +1 for the webpage  it's basically a gui that can run anywhere. In addition i've been experimenting with go webassembly for compiled speeds and I think there is a lot of really cool use cases for it
59428;Hey everyone I'm a Python developer I am new to Go so I need some help on building a project I do not need any help with code but can you please direct me what to do/learn?Basically project is about sending registrations messages (I suppose I will be using twilio for handling it) I dont think it will be a problem for me but what makes me concerned is that there I need to use concurrency I should have have queue and rate limit support should I use redis for queue like ? what about concurrency and rate limit ? can anyone explain in to me please ? As a reward I will follow your IG and like&comment all of your postsüòÖ seems like a pretty nice deal
59429;Have you taken the tour and read the pipelines blog?
59430;?go tour
59431;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
59432;<https://blog.golang.org/pipelines>
59433;@zily88 have you tried KeepAlive?
59434;also I don't think you're allowed to pass Goinitialized memory to C
59435;so you'll probably want to mallov
59436;malloc
59437;"@_diamondburned_ Here's the code I've been using. There is also a `CStruct` defined which has `void data` and `long length````//export GenStructfunc GenStruct(length C.int) C.CStruct { valuesPointer := C.malloc(C.sizeof_char  C.size_t(length)) valuesSlice := ([1 << 30]C.long)(valuesPointer)[:int(length):int(length)] for i := 0; i < int(length); i++ { valuesSlice[i] = C.long(i) } rtn := (C.CStruct)(C.malloc(C.sizeof_CStruct)) rtn.length = length rtn.data = valuesPointer return rtn}```I've tried `KeepAlive` but unfortunately it doesn't seem to have much effect. My intention was to create memory in C (`valuesPointer`) and put that pointer in the C struct `rtn`. Unfortunately there doesn't seem to be an easy way to assign values to `valuesPointer` so I tried the solution of making a Go slice but I believe that's triggering garbage collection. I can share the full Go code as well as the Python code if it would help"
59438;why not just make a C function in the cgo preamble?
59439;I don't think that array cast is triggering GC
59440;I tried to make a C function in the preamble but I realized it wouldn't allow me to export the go function GenStruct on account of generating duplicate C functions. Do you think I should try making the C funciton in the preamble and exporting it as opposed to the Go function?
59441;I think you can make the C fn in the preamble then make a Go function header and link it
59442;don't remember how exactly you'd do that
59443;"```gopackage main// int aFn() { return 1; }import C""//export aFnfunc A() int```"
59444;can't remember lol
59445;that doesn't give an error like `multiple symbols for _afn` when compiling?
59446;```gofunc A() int { return int(C.aFn())}``` that ig?
59447;"when I tried```Gopackage main// int aFn() { return 1; }import C""//export Afunc A() int { return int(C.aFn())}```I got: duplicate symbol \'_aFn\ in: $WORK/b001/_x001.o $WORK/b001/_x002.old: 1 duplicate symbol for architecture x86_64clang: error: linker command failed with exit code 1 (use v to see invocation)which I think is related to having a premable and an exported go function :/"
59448;But if the array casting isn't causing garbage collection then maybe there's something simple I'm missing?
59449;üòÖ btw i appreciate the help
59450;"maybe @mdempsky could help on the question; I'm not sure myself"
59451;oops I forgot to remove the export comment
59452;"```gopackage main// int aFn() { return 1; }import C""import log""func A() int { return int(C.aFn())}func main() { log.Println(A())}```"
59453;this works
59454;hmm and then access the C function from python?
59455;not sure
59456;lol maybe I should just do this in C. What I'm actually trying to do is make python bindings for the Goparquet library
59457;and return a struct with a 2d data pointer rows columns and datatypes and marshall that into a pandas dataframe
59458;https://play.golang.org/p/VrkkrVJAYIH So why doesn't this work :THONK:
59459;or does it work if i instance the pointer first
59460;mmm
59461;I mean. You are setting to pointer to nil
59462;So I need to do
59463;`pointer := new(string)` would work
59464;smol question: can sqlx generate the `SELECT ...` for me if I'm not doing `SELECT `?
59465;don't wanna import reflect but I may have to
59466;https://play.golang.org/p/wVyPPzxr0t
59467;@Sgt_Tailor https://play.golang.org/p/9cHKqeFI0hX
59468;mm
59469;You're misunderstanding how pointers work
59470;Let me create an example that demonstrate this
59471;So this is for the use case of I want to change all of the pointers to strings to represent `s` but `s` depends on the latest variable in the loop. I want to avoid looping twice
59472;thanks!
59473;You can't change the pointer for everything. You can change the value it is pointing to
59474;:pepenotes:
59475;the slice isn't a pointer slice
59476;```go for _ t := range ts { t.Item = pointer }``` this code is setting the field of a copy of TestStruct
59477;not the items inside the slice itself
59478;There is also that
59479;fix is https://play.golang.org/p/dXYSmVoUlP4
59480;That still doesn't set the value for all things properly
59481;Give me a couple of min
59482;wdym
59483;oh I see what he means
59484;lemme import something
59485;just wait
59486;almost done
59487;https://play.golang.org/p/S7lT97ZOFb1
59488;There
59489;You are changing the pointer that `pointer` is pointing at _not_ the value of said pointer
59490;tfw
59491;You are setting it to the address of `text`
59492;`pointer = &text`: https://play.golang.org/p/qNgdbJvxDFJ`pointer = text`: https://play.golang.org/p/Rde5fVgO4kr
59493;"Doing `pointer = Hello""` fixes that: https://play.golang.org/p/4KqG4nD3lN6"
59494;:pepenotes:
59495;I see i see
59496;thank you team c: ‚ù§Ô∏è
59497;yeah np
59498;lol I got my solution
59499;"I\'m having a bit of an issue with string formatting using `%60v` for strings that contains ANSI escape color codes. The program thinks the i.e. 5 characters (`\\033[31m`) are displayed which screws up the output. Any quick solutions for my problem?Example```gostr := \\033[35mHello World""fmt.Printf(""| %60v |\ str)fmt.Printf(""| %60v |\ Hello World"")```"
59500;Not really. You'll have to format your format string üòÇ
59501;üò©
59502;spain without s
59503;yes working with escape codes beyond printing them is pain
59504;Yeah....
59505;you should either abstract the escape code out of the string or implement an escape code parser
59506;What does `abstract the escape code` mean?
59507;write libraries that can grab the string from the escape code somehow
59508;"like `esc.Printf(""| %60v |\ esc.Blue(""Hello World""))`"
59509;"```gotype Segment struct { String string Escape string}func Blue() Segment { return Segment{""Hello World \\033jdqlfdkfsdfsdf""}}func Printf(fmt string v ...Segment)```"
59510;@_diamondburned_ I'll endure the shame of public humiliation and post on reddit üòÖ https://www.reddit.com/r/golang/comments/j25di1/pythongo_integration_complex_structs_cgo_ctypes/. Thanks for the help!
59511;"```Error running \'go build Himari\': Cannot run program C:\\Users\\User\\AppData\\Local\\Temp\\___1go_build_Himari.exe (in directory D:\\GoLand\\Himari""): CreateProcess error=216 This version of %1 is not compatible with the version of Windows you\'re running. Check your computer\'s system information and then contact the software publisher```"
59512;any idea why I get this when building a package via GoLand?
59513;why did my code seem to have found a checkptr error when using bolt in my tests
59514;:AstolfoThonk:
59515;is go2 out yet
59516;nope
59517;Hi I am trying to use gopherjs because it seems cool I am getting a panic with the example though and I also get `go1.12.16: command not found`. I tried setting it from `~/go/src/golang.org.dl` but I just get `bash: /home/david/go/src/golang.org/dl/go1.12.16: Is a directory` I am stuck https://i.imgur.com/UwHr6sv.png
59518;https://i.imgur.com/23BnyNk.png
59519;See:> Now you can use `gopherjs build [package]` `gopherjs build [files]` or `gopherjs install [package]` which behave similar to the `go` tool. For main packages these commands create a `.js` file and `.js.map` source map in the current directory or in `$GOPATH/bin`. The generated JavaScript file can be used as usual in a website. Use `gopherjs help [command]` to get a list of possible command line flags e.g. for minification and automatically watching for changes.
59520;"You can't just `go run` it; the library has its own tooling"
59521;I see now
59522;thanks
59523;weird thing is that go1.12.16 was working before it told me to download it then gopherjs started downloading
59524;i'll try deleting it and installing it again
59525;Your export command differs from the one in the README
59526;"```export GOPHERJS_GOROOT=""$(go1.12.16 env GOROOT)""```"
59527;They're looking for the `go1.12.16` executable not folder
59528;Both exist but you're looking for the wrong one üòõ
59529;Make sure `$GOPATH/bin` is in your `PATH`
59530;i am sad i delete my old project folder because i didn‚Äôt think i would need it and now i started on it again but have to restart
59531;git moment
59532;is there any reason this:```muhObject. Transform(). Transform(). Done()```was chosen over this:```muhObject .Transform() .Transform() .Done()```when it comes to method chaining?
59533;probably parsing reasons
59534;"Hey I need to cast an `interface{}` to `[]map[string]interface{}`. But it says its invalid. Could someone have a look?```gofmt.Printf(""arrayVal is of type: %s | %s reflect.TypeOf(arrayVal) reflect.TypeOf(arrayVal).Kind())// arrayVal is of type: []map[string]string | slicedataArray ok := arrayVal.([]map[string]interface{})// ok = false```"
59535;@elonna ending with a `.` tells the parser to keep looking on the next line
59536;it assumes the end of a line is the end of a statement otherwise
59537;keeps the parsing simpler and method chaining generally isn't good go practice anyway
59538;@timvosch you dont need reflect to print the type btw
59539;`%T` moment
59540;universe brain `%+v`
59541;Also yes map[string]string is not the same as map[string]interface{}
59542;Fundamentally not the same
59543;So naturally the assertion wont work
59544;interface{} does not mean any
59545;"Ah then I\'ll have to rewire my brain :P I did indeed assume interface{} was equal to any"". Unfortunately not then."
59546;go's type system is a little more picky than that
59547;Working with JSON feels really complicated with Go. Atleast for a newcomer to Go :P
59548;try using structs for your data :)
59549;working with interfaces in json is pain
59550;Yeah the unfortunate part is that I don't know what data is coming in ha ha... ha.
59551;hmm well that's a problem
59552;Perhaps Go is not the right tool for the job and I should go back to Node :P
59553;what are you trying to do with this undocumented data? :P
59554;why don't you know :Thonk:
59555;Bad API alert
59556;"I am trying to create a simple static site generator. It fetches data based on a yaml file:```yaml# Descibe the context for this directorysources:  name: posts url: https://demo.ghost.io/ghost/api/v3/content/posts/?key=22444f78447824223cefc48062""```And a directory can contain templated files such as this:Source tree:‚îúüìÅ dynamic‚îú‚îÄ‚îÄüì§ base.layout.tpl‚îú‚îÄ‚îÄüìÑ index.page.tpl‚îú‚îÄ‚îÄüìú meta.yml‚îú‚îÄ‚î¨üìÅ [posts|slug] ‚îú‚îÄ‚îÄüìÑ index.page.tplThese files will be rendered to an output folder.Noticably is the [post|slug] folder this folder will be repeated for every item in the posts array and the name will be slug""Imagine the request to the source url (as in the yaml) repsonding with:```json[ { slug"": postone } { slug"": anotherpost } ]```The resulting folder structure should have two folders: `postone` and `anotherpost`"
59557;Quite the challenge which is fun. Me not fully understanding types make it a little bit less fun
59558;that can be typed
59559;"```gotype Posts []Posttype Post struct { Slug string `json:""slug""`}```"
59560;yeah but I don't really want to update the code for each source i add.
59561;Why bother having the yaml file anyway then?
59562;oh I see what you mean
59563;use an alternative json library
59564;Ah I'll give that a go (punintended). Could you explain why the JSON library? I don't see the connection right away
59565;I'm still not quite seeing the problem
59566;this is for handling the data from the source's `url` right
59567;if that's not in a standard form that'll be pretty difficult to work with
59568;if you're worried about optional stuff the go json lib already handles that
59569;just use pointers if you need to detect if a field was set
59570;because encoding/json is good only if you have concrete structures
59571;you can't easily use dynamic unknown json responses on it
59572;something like fastjson allows you to get json keys using `a.b.c`
59573;right but I'm not seeing any dynamic structure here
59574;"```sources:  name: posts url: https://demo.ghost.io/ghost/api/v3/content/posts/?key=22444f78447824223cefc48062""```"
59575;URL can be arbitrary
59576;The sources can be anything user inputted
59577;> response is arbitrary
59578;right so the response is arbitrary
59579;but how do you expect to deal with a response if you have no clue what the format is?
59580;that's not even guaranteed to be json technically
59581;Thanks! I will try fastjson. The pathing alone is a huge win already üòÖ
59582;That is true but Errors all the way. I simply expect the user (me most of the time) to apply it correctly
59583;you take the structure input from the user instead of coding it in the program
59584;presumably
59585;> @elonna ending with a . tells the parser to keep looking on the next line> probably parsing reasonsI see. Thanks.
59586;ah so like the templates use path selectors or something
59587;Exactly
59588;ahhh understood
59589;fastjson all the way then
59590;sorry about that :P
59591;hahaha no problem. I really appreciate the help!
59592;though I think go's template lib might be able to handle arbitrary selectors on `interface{}` already?
59593;I hope so otherwise that will be the next obstacle üëÄ
59594;well the thing is if that's the case you don't even need fastjson since template is handling the selectors
59595;just unmarshal into an `interface{}` and let the template handle that
59596;and if you need to gather anything from the json before templating that's assuming some sort of structure :P
59597;Well I still need to duplicate the templated file/directory names. which are not directly in a go template though I can imagine a work around.
59598;hmm
59599;"But I think I will come a long way with FastJSON. If I get good results I'll make sure to report back here ;)"
59600;you can jank maps yeah
59601;that's pretty awful to use though
59602;https://play.golang.org/p/GOLovO6ueb8 template can already do arbitrary selectors
59603;oh man
59604;that looks bad tbh
59605;yeah true
59606;but if you want arbitrary selectors in templates it's either this or a fastjson wrapper
59607;hey guys
59608;We‚Äôre jank maps at my work it‚Äôs a nightmare to read
59609;what you guys think about turn this server on a community server ?
59610;isn‚Äôt this server already a community server
59611;pros ? quick question and ill let u alone whats ur best way to unit test void method/function ?or just hint me
59612;what is a void method/function
59613;wdym best way
59614;^
59615;golang doesn\'t really have void
59616;function with return type void
59617;yeah that isn't a thing
59618;```gofunc A() void {``` this?
59619;You can just not return anything
59620;you return nothing `nil` or a type
59621;?go tour
59622;A Tour of Go <https://tour.golang.org/welcome/1>  Skippy
59623;truuuuuuuuu
59624;strongly recommend checking out the tour
59625;> ```go> func A() void {``` this?@_diamondburned_ cursed
59626;@deezy sorry üòÑ i was talin in php context without mention
59627;even worse that discord thinks it's a type üòÅ
59628;okay well
59629;this is a go server?
59630;üòÑ
59631;> discussion of Go specific topicstake php to #offtopic :P
59632;yeah you can chat in #offtopic if you like
59633;~~or replace it with go~~
59634;üò¶ sorry
59635;```type void = struct{}```
59636;ü§®
59637;@deezy ill sub u on twtich
59638;cursed
59639;woah deezy has a twitch?
59640;that's gamer
59641;yo he does
59642;HOW
59643;for askin php in go server !
59644;i'm a millenial
59645;we all have twitch channels
59646;:cereal:
59647;everyone dabbles in it sooner or later
59648;my image of you is permanently shattered
59649;good
59650;let the entropy swallow you
59651;üòÑ if anyone wants trade with me sub on twitch for discord üòÑ i would appreciate it
59652;discord sub
59653;"are there any reasons not to use```f err := os.OpenFile(""access.log os.O_CREATE 0644)```"
59654;in the past ive used and seen examples of custom functions that create a file if it doesnt exist but that does it for you
59655;missing O_WRONLY or O_RDWR
59656;use os.Create
59657;so custom funciton
59658;os.Create isn't custom
59659;it's there
59660;that doesnt create if the file exists?
59661;it behaves the same as O_CREATE
59662;the docs say that
59663;okay
59664;okay
59665;hi all. if i have this structure ```‚îú‚îÄ‚îÄ‚îÄclient‚îÇ ‚îî‚îÄ‚îÄ‚îÄclient.go‚îî‚îÄ‚îÄ‚îÄmodel ‚îî‚îÄ‚îÄ‚îÄmodel.go```how do I import `model.go` inside `client.go`
59666;You'd import the `model` package itself.
59667;overthinking it as usual
59668;the go compiler doesn't care about files
59669;only packages
59670;btw guys is that possible the tour go (excerises) are hard for newbies ?
59671;i know its excerises but still my face is like
59672;https://tenor.com/view/ummconfusedblinkingokaywhiteguyblinkinggif7513882
59673;tbh I still can't do the last one
59674;I've been doing go for 4 month
59675;it's not a go problem I'm just dumb
59676;there's a learning curve yes
59677;probably me too üòÑ i have started 3 days ago
59678;the first step is always the hardest
59679;I thought the tour of go was hard. I use it as a litmus test now to test my own progress.
59680;Type em all out
59681;:boomer:
59682;hi everyone! wanted to hear people's insight regarding unit testing involving goroutines and channels? what is normally the extent you test them?
59683;as much as I feel like it lol
59684;lmao thats where im at rn but was getting curious when a coworker wondered if its worth to test the actual start/stop of the goroutine existing etc!
59685;generally go APIs are expected to be synchronous and blocking so I'm assuming your function implicitly manages goroutines by itself
59686;yep!
59687;yeah just check the outputs then
59688;run the test with the race detector too
59689;got it! thanks! üôÇ
59690;yeah np
59691;turns out checkptr panic in bbolt was just an old version of bbolt ü§î
59692;i'm reading up on the telegraf code base is there a reason they do this? https://github.com/influxdata/telegraf/blob/master/plugins/processors/all/all.go ? it seems like they're importing all the folders under the parent directory.
59693;@csgeek for the init function
59694;a dash import does nothing but runs that imported library's init function
59695;those imported libraries have init function(s) that register itself somewhere
59696;called a Registry pattern iirc
59697;what is equivalent of `json.stringify` of go?
59698;I want to get the raw repr but doesn't works with ``
59699;json.Marshal?
59700;will try
59701;"```package mainimport ( log"" sync"" time"")func main() { jobs := make(chan int) var wg sync.WaitGroup for i := 0; i > 3; i++ { wg.Add(1) go workers(jobs &wg) } for i := 0; i < 5000; i++ { jobs < i } wg.Wait()}func workers(jobs chan int wg sync.WaitGroup) { for i := range jobs { slow(i) } wg.Done()}func slow(i int) { time.Sleep(time.Second  5) log.Println(i)}``` I try to implement a simple worker pool in golang but it is not working"
59702;```fatal error: all goroutines are asleep  deadlock!goroutine 1 [chan send]:main.main() C:/Users/brandonjames/Desktop/Golang Projects/practice/main.go:18 +0xe6exit status 2``` Here is the error
59703;your for loop condition is wrong `i > 3` instead of `i < 3`
59704;zero workers are launched and then your only goroutine receives from a channel with no sender hence deadlock
59705;:cereal:
59706;oh
59707;thanks @zephyrtronium
59708;Hi has anybody got experience with building a scratch docker image for a go rest API? I have built it but get an error when trying to run it...
59709;@_diamondburned_ so it basically insures that all the modules have the init() called and I suppose bootstrapped. Then in the main call you'd simply import the all.go to make sure it's all invoked? Is that the idea?
59710;yeah but not sure about the all.go part
59711;What error @KiwiFPV ?
59712;You probably didn't disable cgo
59713;"It says OCI runtime create failed...container_linux.go:349 exec /binsh\\"": stat /bin/sh: no such file or directory"
59714;well you can exec things in a scratch container
59715;there's no shell
59716;that's the point of scratch
59717;The command unused was CGO_Enanked=0 GOOS=Linux go build a installsuffix Cgo o main
59718;I used..sorry typing from phone and fat fingers
59719;"Hello I have an object in the form of a struct ```{Timestamps []Time; Values []float64} ``` Now my question is i want to loop through Timestamps and if the condition are met I want to get the corresponding value from Values array but i'm struggling doeing it could someone help me with this"
59720;"Hi I was going through Exercise: Images from A Tour of Go"". Link: https://tour.golang.org/methods/25 . But I don\'t properly understand the problem statement and what am I expected to implement. Has anyone else implemented this? If so then can you just guide me what to do without explicitly telling the solution."
59721;@Mansour You can write a method for this struct type (with pointer receiver). Use the range function to iterate over the []Time slice like this: `for index val := t.Timestamps` where t is the pointer to struct. And check for the conditions based on your use case. If true then use the same index variable to extract corresponding element from the values array.
59722;I'm not sure but what does the function pic.ShowImage want from arguments and what type of arguments
59723;Correction `for index val := range t.Timestamps`
59724;@Yash.Sc1ence create a struct that implements the `image.Image` interface
59725;https://golang.org/pkg/image/#Image
59726;this interface
59727;@Yash.Sc1ence why the ```make``` can you explain?
59728;oh nvm
59729;you just mistyped xxD
59730;@Madxmike Yea that I understood but my problem was like when I am implementing the Bounds method then what values do I return ? Because the Image struct is empty when it's initialized in the main func and the problem statement says: return image.Rect(0 0 w h). What should be these w h values? Some arbitrary value of my choice?
59731;sure
59732;@Mansour  Yea my bad. lol range is what i meant
59733;an image would have a width and height
59734;presumably w and h would be fields of the image struct
59735;@Mansour are these times : values 11? if so why not use a map
59736;@Mansour You can create a map by looping the Timestamps and then use this mapping to do the check. That would also work. But that would require 2 iterations. First to create a map and then to check the condition. So It's better if you can do it in 1 loop.
59737;yes they been processed somewhere else and if the conditions are met they are put in chunk.timeStamp and chunk.values
59738;yeah less code i've to write the better :p
59739;is there any way to provide `interface{}` a default type in a struct?
59740;No. `interface{}` means it can hold any type
59741;The zero value of it is `nil`
59742;Thanks @Madxmike . I finally got it right:
59743;"```package mainimport ( golang.org/x/tour/pic"" image"" image/color"" math"")type Image struct { w int h int v uint8}func (i Image) ColorModel() color.Model { return color.RGBAModel }func (i Image) Bounds() image.Rectangle { return image.Rect(0 0 i.w i.h)}func (i Image) At(x y int) color.Color { return color.RGBA{uint8(xy/2) uint8(x+y/2) uint8(math.Pow(float64(x) float64(y))) 255}}func main() { m := Image{100 100 100} pic.ShowImage(m)}```"
59744;This prints some random image on the console.
59745;congrats
59746;:daijoubu:
59747;> The zero value of it is `nil`i see thanks will have to think of a workaround
59748;can any mac or linux user confirm if this works for you?
59749;it should ideally should give this
59750;here is my branch for reference here is my branch https://github.com/Delta456/boxclimaker/tree/dev
59751;is it possible to make your struct empty after each loop
59752;i've got an struct of this structure
59753;``` type dataPoint struct { ts []time.Time s []float64}```
59754;after each iteration I want to clear these 2 arrays
59755;why not just instantiate a new struct
59756;Or just put the struct in the loop so you get a new one every time
59757;^^^^
59758;But yeah you can just `point.ts = nil`
59759;`point.ts = point.ts[:0]` üòé
59760;hi guys i have a problem with an 32bit (i686) nonPAE Linux System: All GOPrograms crush on startup with a segfault even the go command itself. If I crosscompile a GO Programm using GOOS=linux GOARCH=386 it runs fine on my AMD64 machine but if i copy it to the 32 bit machine the programm gets segfault immediatly. Someone had this before any compiler/linker options to try?
59761;"```var withHttp string sc := bufio.NewScanner(os.Stdin) for sc.Scan() { domain := strings.ToLower(sc.Text()) //withHttps = https:// + domain withHttp = http:// + domain fmt.Println(withHttp) resp err := http.Get(withHttp) if err != nil { log.Fatal(err) } fmt.Println(""Http Response: resp.StatusCode http.StatusText(resp.StatusCode)) }``` im trying to check every url with the status code  but it exit after the first one. Why?"
59762;"```http://synergy2.search.yahoo.com2020/09/30 17:04:14 Get http://synergy2.search.yahoo.com"": dial tcp: lookup synergy2.search.yahoo.com: no such hostexit status 1```OUtput"
59763;`log.Fatal`
59764;ohh
59765;instead of log.fatal what i can use?
59766;println?
59767;Literally anything that won't exit your program lol
59768;You'll also want to `continue` there
59769;yeh continue works thanks @Doad
59770;@biber33 maybe play around with PIE build settings?
59771;@Doad hi i solved it by disable SSE2 with GO386=387. That seems to work. What other build settings do u have in mind?
59772;"Hi there. I am trying to replicate pythons SimpleHTTPServer behaviour in go. So far my static file serving works very well. Now I am at the part where I want to adapt to the design python uses which is a headline containing the path you are on and then prepending bulletpoints for every folder content by inserting it as list item in an unsorted list. So now I am looking at this template structure```html<!DOCTYPE html PUBLIC //W3C//DTD HTML 3.2 Final//EN""><html> <title>Directory listing for {{.Path}}</title> <body> <h2>Directory listing for {{.Path}}</h2> <hr /> <ul> SOME ITERATION HERE !? </ul> <hr /> </body></html>```I also have a handler which should render the template:```gotype directory struct { Path string Content []string}func handler(w http.ResponseWriter r http.Request) { path := r.URL.Path log.Print(path) t := template.New(""directory"") t _ = t.ParseFiles(""template.html"") d := directory{Path: / Content: nil} t.Execute(w d)}```For now it does that with the Path / and no content to test my handlers render functionality.Now for the question. How do I hook that up with my Listener setup?```go fmt.Printf(""Serving HTTP on 0.0.0.0 port %s\ port) h := http.FileServer(http.Dir(""."")) http.ListenAndServe("":""+port h)```Complete code at: https://pastebin.com/wqYXYab5"
59773;You mean hook the handler to the http server?
59774;You are then no longer serving static files üòâ
59775;exactly and providing the folders content of FileServer to my handler to iterate over the entries
59776;Well no I do not actually ^^
59777;"```http.HandleFunc(""/ handler)```"
59778;https://golang.org/doc/articles/wiki/
59779;well okay yes ^^ but how do I provide my handler func with the folder content then?
59780;Should I do a WalkFunc?
59781;That in fact would not be servic static files üòõ
59782;And how in the heavens would I finally make the user be able to download the file
59783;this has to be a static file serving again then
59784;My mind is twisted ^^
59785;I'm still not 100% sure of what you're trying to accomplish tbh
59786;Not familiar with SimpleHTTPServer
59787;I think it is just a fileserver but visually it isn't the same I guess
59788;exactly
59789;@evandocarmo do you have python2 installed on a linux machine?
59790;You can look at how the Go fileserver works and reimplement it
59791;python2 DEAD
59792;well python3 has http.server
59793;will output the same as SimpleHTTPServer with python2
59794;Either way I am trying to replicate one of those:`python2 m SimpleHTTPServer` or `python3 m http.server`
59795;I mean. The go http fileserver does just that
59796;If you want to style it differently you'll have to make your own handler
59797;If it is a directory list all the files and if it is a file you serve it
59798;That isn't rocket science and the best part is that you can just steal the stdlib code
59799;Okay so I would need to look at http.ListenAndServer then.
59800;This in fact will be out of scope with my blog post then ^^
59801;No
59802;You would have to look at FileServer
59803;"there is not much in FileServer:```go// FileServer returns a handler that serves HTTP requests// with the contents of the file system rooted at root.//// To use the operating system\'s file system implementation,// use http.Dir://// http.Handle(""/ http.FileServer(http.Dir(""/tmp"")))//// As a special case the returned file server redirects any request// ending in /index.html to the same path without the final// index.html"".func FileServer(root FileSystem) Handler { return &fileHandler{root}}```"
59804;This is all it is right?
59805;Then you look at the `Handler` it returns üôÇ
59806;```gotype Handler interface { ServeHTTP(ResponseWriter Request)}```
59807;That's the interface
59808;<https://golang.org/src/net/http/fs.go?s=20871:20911#L724>
59809;so then I look at `ServerHTTP` right?
59810;not the concrete value
59811;which calls https://golang.org/src/net/http/fs.go?s=20871:20911#L549
59812;If it was a directory it does a directory list <https://golang.org/src/net/http/fs.go?s=20871:20911#L615>
59813;which in turn calls <https://golang.org/src/net/http/fs.go?s=20871:20911#L105>
59814;Look at that!
59815;It is the implementation of the directory listing template
59816;Okay and otherwise it will just serve the content
59817;Yeah
59818;Just like the documentation said
59819;okay well fine. If I would happen to try to implement my own `dirList()` to implement my need of design how would I approach this? Would I copy over `fs.go` to my pkg and then modify and load it from my local repo instead of stdlibs?
59820;There is only a handful of things to implement there. 1) get the path from the url2) load the file based on that path3) check if file exists4) check if dir5) if file: server6) if dir: list all files and throw it at a template
59821;You can cheat and see how the standard library does this
59822;So you would suggest do it from the scratch
59823;I would suggest not bothering to change the way it looks. But if you must the only way to do it is to create your own handler
59824;well okay sure. I just thought it would be a fun and educational project to replicate it 1:1 (functionality and design)
59825;There are ways to change what files are displayed by using struct embedding. The only thing you can't change is the template used
59826;and then in part 2 expand on the features (upload even better design ...)
59827;I wanted to pack this into a blog post.
59828;It certainly is an educational thing to make and not that complicated
59829;But you won't be able to reuse all of the stdlib functionality. Some programming required
59830;well I might have to think about not doing this at all then
59831;At least now after writing 2 blog posts and coding for almost 8h straight I cannot wrap my head around how to even start doing it
59832;take a break
59833;Hei guys what's up?I decided to learn Go and my midterm objective is to move a personal project i've written in python/django to Go.It's a simple REST api server sql db and such
59834;Any suggestion on which frameworks to use?
59835;gochi gang
59836;Does this look evil
59837;```go allParticipants = append(allParticipants, append(participantsOfStatuses(threadStatuses), append(participantsOfMessage(&parentMessage), participantsOfMessage(threadedMessage)...)...)...) participantsSet := stringsutil.HashSet(allParticipants)```
59838;depends how much own work you wanna do
59839;it does doggy
59840;I need to concat lists together but i dont want to make
59841;twenty for loops
59842;@Str≈ìm Well Django is for perfectionists with deadlines so I was looking for an equivalent framework lol
59843;@Urinamara stdlib
59844;is there any higher level rest framework?
59845;start with the basics
59846;the stdlib is more than functional for REST APIs
59847;I already know a bit of Go
59848;```gofunc Concat(slices ...[]string) []string { concat := make([]string 0 len(slices)) for _ s := range slices { concat = append(concat s...) } return concat}```
59849;Hows this
59850;I've been looking at resty but I found several others on Github just need to know what goers like the most
59851;If you find yourself needing something a bit more than the stdlib gochi is a good router
59852;But you really should know how to make REST APIs with the standard libs
59853;> But you really should know how to make REST APIs with the standard libsI already know that I asked a very precise question man XD
59854;I will check out gochi thanks
59855;```go allParticipants := stringsutil.Concat(threadStatuses.ProfileIDs() participantsOfMessage(&parentMessage) participantsOfMessage(threadedMessage)) participantsSet := stringsutil.HashSet(allParticipants)```
59856;c:
59857;@Urinamara the truth is most of the community advises against those higher level frameworks that are popular in other environments
59858;I make rest apis with stdlib
59859;@mmacheerpuppy ü§¢
59860;Reasons are many: the stdlib is fantastic and much better than what you have elsewhere
59861;@Sgt_Tailor why :vomitblood:
59862;> @Urinamara the truth is most of the community advises against those higher level frameworks that are popular in other environments@evandocarmo I see this makes kinda sense.
59863;stdlib is love stdlib is life
59864;ok next question
59865;Is there anything that can compare to Django Admin?
59866;You hide the gore by shoving it in a different package. I would just have 3 consecutive calls to append
59867;I think the dumpster fire that the Iris project is (stealing people's code bad ethics all around) also turned people off from those frameworks
59868;What does Django admin do?
59869;@Sgt_Tailor Well its not hiding the gore but creating a function that can deal with it more neatly
59870;did Iris project actually do that wtf
59871;neatly xD
59872;Just google `Iris golang reddit`
59873;Or as rob pike would say: code should be clear not clever
59874;jesus lol
59875;I have mixed feelings on rob pykes code style
59876;I think that it reduces clarity when dealing with business logic
59877;and its harder to write unit testable code
59878;On the other hand
59879;for loops are generally easier to read
59880;i think his code is nice for his use cases
59881;`Concat` doesn't actually concatenate the strings does it?
59882;If you need your business logic to be evident comment your loop or hide it in a wellnamed function
59883;@mmacheerpuppy If `stringutils.Concat` returns a slice the name is incorrect imo
59884;You know what's nice? Having a test be commented in a narrative manner
59885;Yeah but thats it you can quickly end up with thousands of lines of code due to the verbosity of loops when you could with the right functional data abstractions have hundreds
59886;Lines are free /deezy
59887;What does the function actually do btw?
59888;when I read `Concat` I would expect the result to be a single string
59889;The one being called?
59890;Oh it just builds a superslice out of subslices
59891;So it concatenates arrays of strings
59892;it should be stringsutil.concat
59893;It flattens the slices?
59894;aka just appending them
59895;It would be better to pass a function which does something like maps the given fun over enumerable and flattens the result. A flat map op
59896;And then I pass into flat map
59897;More reusable
59898;combining the slices makes sense but having it in `stringutils` is kinda weird. It just seems like a function what would accept multiple strings and concatenates them to return a single one
59899;yea
59900;i hear that
59901;Random helper function vs:```go allParticipants := make([]string 0) allParticipants = append(allParticipants threadStatuses.ProfileIDs()) allParticipants = append(allParticipants participantsOfMessage(&parentMessage)) allParticipants = append(allParticipants participantsOfMessage(threadedMessage))```
59902;long names
59903;Would it be possible in go to train a AI to recognize Pok√©mons and then use it on any image to get a pok√©mon name ?
59904;yes
59905;but it's hard
59906;Hey everyone! Been learning Go on my own and am the only one at my workplace that knows it was hoping I could find people to bounce questions off of here. Hope I found the right spot. üòÑ
59907;really hard
59908;@DrMarianus go for it
59909;you did Marianus
59910;Can I DM you @Karitham ?
59911;any specific rules/channel for it?
59912;I can't do it
59913;it's here for go stuff
59914;#offtopic for non go stuff
59915;that's it
59916;i didn't see anything in the code of conduct or info
59917;Okay well what do you mean by hard
59918;> Would it be possible in go to train a AI to recognize Pok√©mons and then use it on any image to get a pok√©mon name ?@Yewolf There's not a whole lot being done for machine learning in Go right now. There's some options out there but there are better options in other languages faik
59919;https://conferences.oreilly.com/artificialintelligence/aieu2018/public/schedule/detail/70213.html
59920;it's possible with tensorflow and python
59921;but with go although a powerful language there's not much availability for tools like the python ones
59922;"Hi all the following code is to create a thumbnail using `github.com/disintegration/imaging` packageworks well for typical image format like jpeg but it does not work well for `webp` file format.I got error`imaging: unsupported image format` with the code below.Is there a more robust way to generate thumbnails for typical image types (jpg gif tiff bmp etc.) and webp?` package main  import ( bytes"" fmt"" github.com/disintegration/imaging"" github.com/chai2010/webp"" io/ioutil"" )  //https://stackoverflow.com/questions/8340751/webpencoderdecoderingo func main() { //img _ := imaging.Open(""ml/input/apple.jpg"")  // Load webp data _ := ioutil.ReadFile(""ml/input/waterski2.webp"") // Decode webp img _ := webp.Decode(bytes.NewReader(data)) //Create thumbnail dstImage := imaging.Thumbnail(img 400 400 imaging.Lanczos)  err1:=imaging.Save(dstImage ml/output/waterski2.webp"") if err1!=nil{ fmt.Println(err1) } }`"
59923;Any particular reason <https://golang.org/pkg/image/> didn't work for you @william007 ?
59924;I can't figure out how to use pkg/image for all images types to generate a thumbnails so I use a convenient package instead
59925;Fair enough. I would start by not ignoring the three possible errors
59926;Most likely something is broken before that
59927;Are you sure the package supports webp? The error seems pretty clear
59928;ok cool. man I\'ve had these questions rolling around in my brain for a while now so forgive the wall of text.A preamble. I implemented a python version of a service that takes data via an HTTP stream (newline JSON) prepends some info compresses it then sends it off to Google Pubsub. It works but it\'s slow shocker. I figured it\'d be a good project to learn Go alongside. So I have the go version built for the most part. It creates the pipeline of 2 go routines one that takes in payloads on a buffered channel compresses them with snappy and then sends them on another buffered channel to the publishing goroutine that then creates goroutines to confirm the publication. When the service gets a request to collect data it starts a worker that creates a goroutine that reads the data off an HTTP stream from a specific endpoint of another service in charge of outbounding this data. I gave the struct controlling all this a limit on how many of these pipelines it can create. Right now I\'m fiddling with it set to 20. So at most it will start up 20 goroutines doing compression and 20 doing publication. With one request it\'s lightning fast. But with every subsequent request it slows down in proportion to the number of requests. In other words 1 request takes N time 20 requests take N/20 time each roughly. This is all with `GOMAXPROC=1` doubling that yields double the performance. That makes sense. BUT I had read that Go can handle _millions_ of goroutines per cpu. I even output the number of goroutines periodically while processing to debug and it never gets above about 5k. 202 + each publish creates 128 confirmation goroutines as the google pubsub confirmation is kind of slow and can block + the goroutines created by the google pubsub client to actually gRPC the data to the Pubsub service in google. Does anything in what I said ring any bells as to while it might be choking so hard on so few goroutines and throttling like this?
59929;"the imaging lib most certainly doesn\'t: > Save saves the image to file with the specified filename. The format is determined from the filename extension: jpg (or jpeg"") png gif tif (or tiff"") and bmp are supported."
59930;https://github.com/disintegration/imaging/blob/5362c131d56305ce787e79a5b94ffc956df00d62/io.go#L143L148
59931;Yeah
59932;But since you're working with an Image object you should be able to encode it using the webp library if you so desire
59933;@DrMarianus to summarize you're wondering how your goroutine usage affects performance?
59934;that as well as other ways I might be limiting the performance via how i architected this.
59935;If you only have a single thread your goroutines have to all run on that
59936;which means they will be synchronous
59937;You can handle the high amounts because each goroutine doesn't use a lot of memory
59938;but they still have to be switched around to actually run
59939;originally i had each request creating it's own pipeline and channels to pass data between the goroutines but consolidating them to one pipeline shared between requests helped.
59940;when you set GOMAXPROCS to one you limit the process to utilizing 1 cpu core. By scheduling more goroutines they are all multiplexed on that same core. If the CPU usage of that core is maxed out throwing more routines at it doesn't yield any more performance
59941;so what\'s the deal with the millions of goroutines per core i see online?
59942;When you allow the process to actually use more CPU cores the scheduler will use that additional horsepower to run the pending goroutines
59943;They can run concurrently on a single core but not in _parallel_
59944;You can physically spawn that many
59945;because they don't use much memory
59946;Concurrency VS parallelism
59947;try spawning millions of OS threads and see what happens
59948;aah i see
59949;so theoretically should performance scale > linearly if I give it more cores?
59950;or will it just be directly dependent on the number of CPUs it has
59951;You will have more parallel throughput for your concurrent system
59952;If you are CPU bound only then yes: more cpu power = more performance
59953;But at some point you hit a different bottleneck than CPU power. In that case throwing more CPU at the problem won't do much
59954;When reading data from a disk and sending it over the network I can throw as much CPU at the problem as I want but the linear read speed of the HDD will only be about 120Mbps
59955;also when a goroutine blocks another can run in it's place
59956;That is what the scheduler does. When a goroutines has to wait for something it is swapped out for a different one
59957;also did someone mention the fact that image processing is a cpu bound task? the million goro claim is for blocking pretty sure
59958;?go scheduler
59959;Kavya Joshi  The Scheduler Saga <https://www.youtube.com/watch?v=YHRO5WQGh0k>  Sgt_Tailor
59960;That does a great job at explaining the internals
59961;this service will be in a k8s cluster i should add. is there a best practice/general guidance for how to spread the resources out? let's say it's a 4 node cluster with 8 vCPU per node should I be running 4 GOMAXPROC=8 services? or should I run 32 GOMAXPROC=1 services? Somewhere in between?
59962;from what i gathered it handles it similar to how the asyncio library works in python re: scheduler
59963;Why do you need to set `GOMAXPROC`?
59964;I wouldn't touch the maxprocs at all
59965;Just toss your service on some pods you'll have vertical and horizontal scaling
59966;need more vertical? add some cores
59967;need more horizontal? add some pods
59968;good point
59969;k8s and stateless Go services play very nicely together
59970;i'm setting it right now as a way to test performance before putting it in the k8s cluster since this is kind of a side project that I can't actually put in our work cluster just yet
59971;i'm so far fairly successful in convincing my lead to experiment with this but am trying to build a solid case on how this would be better than the current python implementation hence the performance testing
59972;definitely watch that video Cursed posted it's great
59973;11/10 would watch again
59974;I periodically rewatch all her concurrency talks
59975;Yeah her talk about channels is nice as well
59976;watching now. do you have some more info around configuring channel buffer sizes/numGoroutines and how to profile their performance for a given goroutine(s)
59977;benchmarking tests
59978;a general rule of thumb for buffers sizes is it should match the amount of workers
59979;`go test bench`
59980;but that's not always the case
59981;so i benchmarked each individual goroutine would that be the best way or should I be benchmarking the entire pipeline
59982;The entire pipeline
59983;well both
59984;but yeah
59985;great i'm halfway there already
59986;In a broad sense use as many goroutines as you need
59987;And it will scale with hardware
59988;and goroutines scale best when they perform blocking operations
59989;does this video talk about what blocks and what doesn't?
59990;or is that a read the docs kind of question?
59991;Partially
59992;io channels mutexes etc
59993;Those all block
59994;one thing I've seen for setting concurrency is using `goprocs := runtime.GOMAXPROCS(0)  C`
59995;In your case reading from the http stream should block so that's a good use for a goroutine I believe
59996;does the benchmarking help solve for `C`?
59997;I don't think the benchmark will show you CPU contention
59998;if I understand correctly your task involves image processing
59999;that's CPU bound
60000;so C should be 1
60001;runtime.GOMAXPROCS(0) will return the current max procs
60002;i think you might be confusing with another asker. mine is data compression and then publishing a message
60003;thonk
60004;> runtime.GOMAXPROCS(0) will return the current max procssorry I was asking more about how to determine the scaling relative to GOMAXPROCS(0)
60005;that's all it does?
60006;for instance the pubsub client from google set their numGoroutines at `25  runtime.GOMAXPROCS(0)`
60007;this seems too trivial to even care about GOMAXPROCS honestly
60008;how did they find that 25
60009;A guess quite likely lol
60010;Or testing
60011;haha
60012;GOMAXPROCSC will work if your task is mostly blocking
60013;^
60014;anything else (CPUbound partially CPUbound) and you should leave it alone
60015;the internal scheduler will take care of moving stuff around to take up free cores
60016;i was certainly concerned i was overengineering this into the ground
60017;perhaps a simpler approach is warranted
60018;thanks for everyone's input!
60019;oh one more thing. @_diamondburned_ as you said since this isn\'t super blocking given two approaches:1. creating a worker goroutine per request 2. creating a pool of worker goroutines that requests sharewhich makes the most sense?
60020;i'm guessing 1
60021;is this a HTTP request?
60022;yes
60023;what makes the most sense is definitely 2
60024;a managing service would make a call with a specific payload that would indicate what data to stream from another service
60025;but I'm debating if a pool is even needed
60026;well pool is probably not the right word
60027;right now I have it scaling up the number of goroutines up to a max based on the number of requests it gets and scaling back down as they finish
60028;is here anyone with experience in using go for mobile apps? i would like to use gio with the gomobile command. I only get a black screen. It might be an issue with the main thread.
60029;https://golang.org/src/net/http/request.go#L812
60030;right here?
60031;https://golang.org/src/net/http/request.go?s=27051:27120#L802
60032;ah
60033;yes
60034;does anyone have experience with android apps in go?
60035;i don't think anyone here has used go for android and few have used gio unfortunately
60036;"the gio website talks about building the gophers example as an apk; does that run for you? does it do things your app doesn't e.g. runtime.LockOSThread?"
60037;i was able to create a demo app with gomobile and x/mobile for the graphics but x/mobile is too low level. For gio there is now an extra command provided by the same repo but it requires the android sdk in addition to the ndk so i did bend it a little and made it compile and run with gomobile but it now only shows the app title on a black screen and the events dont seem to work
60038;i did make a small build script in go for different tasks in my project and don't want to change it for the gio tool if not necessary
60039;i am trying the tabs example  https://git.sr.ht/~eliasnaur/gio/tree/master/example/tabs
60040;this is the mobile howto https://gioui.org/doc/mobile
60041;Hi regarding the code at: https://play.golang.org/p/UoV3SIIBZ16 why do I need to send EOF twice (with Ctrl+d in Linux terminal) before the program computes the results?
60042;So the previous message was my first message ever in Discord. Can anyone please confirm I am being seen?
60043;Cd once worked for me
60044;probably to do with your specific terminal
60045;oh wait
60046;I see now
60047;if I hit new line and then Cd then it works
60048;https://askubuntu.com/questions/118548/howdoiendstandardinputwithoutanewlinecharacter
60049;:Thonk:
60050;> if I hit new line and then Cd then it works@_diamondburned_ For me too
60051;I think that's just shell behavior
60052;this works
60053;and printf does not insert a trailing new line
60054;so it's not Go's ReadAll waiting for a new line it's just the shell
60055;Yeah I've just read your article. Maybe it's something on purpose related to interactive use fo the shell. Thanks very much for you advice sir.
60056;yeah np
60057;ioutil.ReadAll?
60058;bytes.Buffer{}.ReadFrom?
60059;most of the time yeah
60060;unless you want to cut allocations by reading into a common preallocated buffer
60061;but eh
60062;there are functions that do that for you already in io
60063;https://godoc.org/io#CopyBuffer lol
60064;> where is a core go package that demonstrates filling a buffer from tcp and then reading that buffer? like ```go> var buf = make([]byte 0 512)> > for {> var tmp = make([]byte 256)> n err := conn.Read(tmp)> if err != nil {> > return> }> > buf = append(buf tmp[:n]...)> }```@[object Object] You can also have a look at the bytes.Buffer package it has some nice facilities for dealing with buffers.
60065;Are now perhaps any Android developers using Go around? or does that breed not exist?
60066;i feel like the same question has been asked six times today
60067;weird
60068;i did ask 2 hours ago and before that
60069;you might have more success asking on the gio mailing list: <https://lists.sr.ht/~eliasnaur/gio>
60070;oh
60071;did you think it changed in 2 hours?
60072;i did make a little progress
60073;mailing lists :Weary:üëå
60074;:thonk:
60075;you can also get on Freenode and ask them
60076;there's also an official slack channel for gio
60077;ofc there is
60078;then ill check freenode later
60079;I unironically prefer IRC over Slack
60080;as long as its not in the browser me too
60081;i made my GUI build unchanged for Android! üòÑ
60082;it was the right combination of build tool (gogio instead of gomobile) build tags (nucular_gio there is no gio tag...) and not using the app.Main() function which is probably hidden in the GUI library...
